!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=95)}([function(t,e,n){"use strict";t.exports=n(102)},function(t,e,n){"function"===typeof Symbol&&Symbol.iterator;t.exports=n(112)()},function(t,e,n){"use strict";var i=function(){};t.exports=i},function(t,e,n){"use strict";var i=function(t,e,n,i,r,o,s,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,o,s,a],u=0;c=new Error(e.replace(/%s/g,function(){return l[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};t.exports=i},function(t,e,n){"use strict";function i(t,e,n){if(!e(t))throw l("error","uncaught at check",n),new Error(n)}function r(t,e){return S.notUndef(t)&&C.call(t,e)}function o(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=d({},t),n=new Promise(function(t,n){e.resolve=t,e.reject=n});return e.promise=n,e}function a(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,i=new Promise(function(i){n=setTimeout(function(){return i(e)},t)});return i[y]=function(){return clearTimeout(n)},i}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments[3],r={name:n,next:t,throw:e,return:O};return i&&(r[m]=!0),"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"===typeof window?console.log("redux-saga "+t+": "+e+"\n"+(n&&n.stack||n)):console[t](e,n)}function u(t,e){return function(){return t.apply(void 0,arguments)}}n.d(e,"u",function(){return p}),n.d(e,"e",function(){return g}),n.d(e,"b",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return w}),n.d(e,"o",function(){return x}),n.d(e,"r",function(){return E}),n.d(e,"l",function(){return A}),e.g=i,n.d(e,"n",function(){return S}),n.d(e,"s",function(){return M}),e.t=o,n.d(e,"f",function(){return T}),e.i=s,e.j=a,n.d(e,"v",function(){return k}),e.q=c,e.p=l,e.k=u,n.d(e,"w",function(){return P}),n.d(e,"m",function(){return L}),n.d(e,"h",function(){return R}),n.d(e,"x",function(){return D});var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},f="function"===typeof Symbol&&"symbol"===h(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":h(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":h(t)},p=function(t){return"@@redux-saga/"+t},g=p("TASK"),m=p("HELPER"),v=p("MATCH"),y=p("CANCEL_PROMISE"),b=p("SAGA_ACTION"),w=p("SELF_CANCELLATION"),_=function(t){return function(){return t}},x=_(!0),E=function(){},A=function(t){return t},C=Object.prototype.hasOwnProperty,S={undef:function(t){return null===t||void 0===t},notUndef:function(t){return null!==t&&void 0!==t},func:function(t){return"function"===typeof t},number:function(t){return"number"===typeof t},string:function(t){return"string"===typeof t},array:Array.isArray,object:function(t){return t&&!S.array(t)&&"object"===("undefined"===typeof t?"undefined":f(t))},promise:function(t){return t&&S.func(t.then)},iterator:function(t){return t&&S.func(t.next)&&S.func(t.throw)},iterable:function(t){return t&&S.func(Symbol)?S.func(t[Symbol.iterator]):S.array(t)},task:function(t){return t&&t[g]},observable:function(t){return t&&S.func(t.subscribe)},buffer:function(t){return t&&S.func(t.isEmpty)&&S.func(t.take)&&S.func(t.put)},pattern:function(t){return t&&(S.string(t)||"symbol"===("undefined"===typeof t?"undefined":f(t))||S.func(t)||S.array(t))},channel:function(t){return t&&S.func(t.take)&&S.func(t.close)},helper:function(t){return t&&t[m]},stringableFunc:function(t){return S.func(t)&&r(t,"toString")}},M={assign:function(t,e){for(var n in e)r(e,n)&&(t[n]=e[n])}},T={from:function(t){var e=Array(t.length);for(var n in t)r(t,n)&&(e[n]=t[n]);return e}},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++t}}(),F=function(t){throw t},O=function(t){return{value:t,done:!0}},P=function(t,e){return t+" has been deprecated in favor of "+e+", please update your code"},L=function(t){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+t+"\n")},R=function(t,e){return(t?t+".":"")+"setContext(props): argument "+e+" is not a plain object"},D=function(t){return function(e){return t(Object.defineProperty(e,b,{value:!0}))}}},function(t,e,n){"use strict";function i(t){return"[object Array]"===C.call(t)}function r(t){return"[object ArrayBuffer]"===C.call(t)}function o(t){return"undefined"!==typeof FormData&&t instanceof FormData}function s(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"===typeof t}function c(t){return"number"===typeof t}function l(t){return"undefined"===typeof t}function u(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":x(t))}function h(t){return"[object Date]"===C.call(t)}function d(t){return"[object File]"===C.call(t)}function f(t){return"[object Blob]"===C.call(t)}function p(t){return"[object Function]"===C.call(t)}function g(t){return u(t)&&p(t.pipe)}function m(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function b(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==("undefined"===typeof t?"undefined":x(t))&&(t=[t]),i(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function w(){function t(t,n){"object"===x(e[n])&&"object"===("undefined"===typeof t?"undefined":x(t))?e[n]=w(e[n],t):e[n]=t}for(var e={},n=0,i=arguments.length;n<i;n++)b(arguments[n],t);return e}function _(t,e,n){return b(e,function(e,i){t[i]=n&&"function"===typeof e?E(e,n):e}),t}var x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=n(75),A=n(160),C=Object.prototype.toString;t.exports={isArray:i,isArrayBuffer:r,isBuffer:A,isFormData:o,isArrayBufferView:s,isString:a,isNumber:c,isObject:u,isUndefined:l,isDate:h,isFile:d,isBlob:f,isFunction:p,isStream:g,isURLSearchParams:m,isStandardBrowserEnv:y,forEach:b,merge:w,extend:_,trim:v}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(d.g)(arguments[0],d.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),d.n.pattern(t))return O(g,{pattern:t});if(d.n.channel(t))return O(g,{channel:t});throw new Error("take(patternOrChannel): argument "+String(t)+" is not valid channel or a valid pattern")}function r(t,e){return arguments.length>1?(Object(d.g)(t,d.n.notUndef,"put(channel, action): argument channel is undefined"),Object(d.g)(t,d.n.channel,"put(channel, action): argument "+t+" is not a valid channel"),Object(d.g)(e,d.n.notUndef,"put(channel, action): argument action is undefined")):(Object(d.g)(t,d.n.notUndef,"put(action): argument action is undefined"),e=t,t=null),O(m,{channel:t,action:e})}function o(t){return O(v,t)}function s(t,e,n){Object(d.g)(e,d.n.notUndef,t+": argument fn is undefined");var i=null;if(d.n.array(e)){var r=e;i=r[0],e=r[1]}else if(e.fn){var o=e;i=o.context,e=o.fn}return i&&d.n.string(e)&&d.n.func(i[e])&&(e=i[e]),Object(d.g)(e,d.n.func,t+": argument "+e+" is not a function"),{context:i,fn:e,args:n}}function a(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return O(b,s("call",t,n))}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return O(_,s("fork",t,n))}function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1)return o(e.map(function(t){return l(t)}));var i=e[0];return 1===e.length&&(Object(d.g)(i,d.n.notUndef,"cancel(task): argument task is undefined"),Object(d.g)(i,d.n.task,"cancel(task): argument "+i+" is not a valid Task object "+F)),O(E,i||d.d)}function u(t,e){return Object(d.g)(t,d.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(d.g)(e,d.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(d.g)(e,d.n.buffer,"actionChannel(pattern, buffer): argument "+e+" is not a valid buffer")),O(C,{pattern:t,buffer:e})}function h(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return c.apply(void 0,[f.b,t,e].concat(i))}e.h=i,e.g=r,e.b=o,e.d=a,e.f=c,e.e=l,e.a=u,e.i=h,n.d(e,"c",function(){return L});var d=n(4),f=n(70),p=Object(d.u)("IO"),g="TAKE",m="PUT",v="ALL",y="RACE",b="CALL",w="CPS",_="FORK",x="JOIN",E="CANCEL",A="SELECT",C="ACTION_CHANNEL",S="CANCELLED",M="FLUSH",T="GET_CONTEXT",k="SET_CONTEXT",F="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",O=function(t,e){var n;return n={},n[p]=!0,n[t]=e,n};i.maybe=function(){var t=i.apply(void 0,arguments);return t[g].maybe=!0,t};i.maybe;r.resolve=function(){var t=r.apply(void 0,arguments);return t[m].resolve=!0,t},r.sync=Object(d.k)(r.resolve,Object(d.w)("put.sync","put.resolve"));var P=function(t){return function(e){return e&&e[p]&&e[t]}},L={take:P(g),put:P(m),all:P(v),race:P(y),call:P(b),cps:P(w),fork:P(_),join:P(x),cancel:P(E),select:P(A),actionChannel:P(C),cancelled:P(S),flush:P(M),getContext:P(T),setContext:P(k)}},function(t,e){var n,i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"===typeof window?"undefined":i(window))&&(n=window)}t.exports=n},function(t,e,n){"use strict";function i(){function t(t){return n.push(t),function(){return Object(a.t)(n,t)}}function e(t){for(var e=n.slice(),i=0,r=e.length;i<r;i++)e[i](t)}var n=[];return{subscribe:t,emit:e}}function r(){function t(){if(s&&l.length)throw Object(a.m)("Cannot have a closed channel with pending takers");if(l.length&&!o.isEmpty())throw Object(a.m)("Cannot have pending takers with non empty buffer")}function e(e){if(t(),Object(a.g)(e,a.n.notUndef,p),!s){if(!l.length)return o.put(e);for(var n=0;n<l.length;n++){var i=l[n];if(!i[a.b]||i[a.b](e))return l.splice(n,1),i(e)}}}function n(e){t(),Object(a.g)(e,a.n.func,"channel.take's callback must be a function"),s&&o.isEmpty()?e(h):o.isEmpty()?(l.push(e),e.cancel=function(){return Object(a.t)(l,e)}):e(o.take())}function i(e){if(t(),Object(a.g)(e,a.n.func,"channel.flush' callback must be a function"),s&&o.isEmpty())return void e(h);e(o.flush())}function r(){if(t(),!s&&(s=!0,l.length)){var e=l;l=[];for(var n=0,i=e.length;n<i;n++)e[n](h)}}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a.fixed(),s=!1,l=[];return Object(a.g)(o,a.n.buffer,f),{take:n,put:e,flush:i,close:r,get __takers__(){return l},get __closed__(){return s}}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.none(),n=arguments[2];arguments.length>2&&Object(a.g)(n,a.n.func,"Invalid match function passed to eventChannel");var i=r(e),o=function(){i.__closed__||(s&&s(),i.close())},s=t(function(t){if(d(t))return void o();n&&!n(t)||i.put(t)});if(i.__closed__&&s(),!a.n.func(s))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:i.take,flush:i.flush,close:o}}function s(t){var e=o(function(e){return t(function(t){if(t[a.c])return void e(t);Object(l.a)(function(){return e(t)})})});return u({},e,{take:function(t,n){arguments.length>1&&(Object(a.g)(n,a.n.func,"channel.take's matcher argument must be a function"),t[a.b]=n),e.take(t)}})}n.d(e,"a",function(){return h}),n.d(e,"d",function(){return d}),e.b=i,e.c=o,e.e=s;var a=n(4),c=n(19),l=n(67),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},h={type:"@@redux-saga/CHANNEL_END"},d=function(t){return t&&"@@redux-saga/CHANNEL_END"===t.type},f="invalid buffer passed to channel factory function",p="Saga was provided with an undefined action"},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=null,n=null;switch(t.getType()){case E.SiteObject:case E.FloorObject:e=t;break;case E.BuildingObject:e=t.site,n=t._mesh.position.clone();break;case E.SpaceObject:case E.UserObject:e=t.parent,n=t._mesh.position.clone();break;case E.LabelObject:case E.LabelTextObject:case E.LabelImageObject:n=t._mesh.position.clone();var i=t.parent;i.isSpace?(e=i.parent,n.applyMatrix4(i.matrix)):i.isBuilding?(e=i.site,n.applyMatrix4(i.matrix)):e=i;break;default:throw new Error("Unexpected")}return{ground:e,groundPosition:n}}function c(t,e,n){var i=t._mesh.localToWorld(e.clone());return i.setZ(t.isSite?0:t.altitude),n.adsumToUtm(i)}function l(){function t(t,n,i){if(dt=(new DOMParser).parseFromString(t,"text/xml"),n=n||pt,void 0!==i){var r=i.split("/");r.pop(),wt=(r.length<1?".":r.join("/"))+"/"}!function(){var t=dt.querySelectorAll("asset")[0];if(t&&t.childNodes)for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"unit":var i=n.getAttribute("meter");i&&(Pt=parseFloat(i));break;case"up_axis":Lt=n.textContent.charAt(0)}}}(),function(){if(!0!==Ot.convertUpAxis||Lt===Ot.upAxis)Rt=null;else switch(Lt){case"X":Rt="Y"===Ot.upAxis?"XtoY":"XtoZ";break;case"Y":Rt="X"===Ot.upAxis?"YtoX":"YtoZ";break;case"Z":Rt="X"===Ot.upAxis?"ZtoX":"ZtoY"}}(),Et=e("library_images image",h,"image"),Mt=e("library_materials material",O,"material"),Tt=e("library_effects effect",B,"effect"),St=e("library_geometries geometry",_,"geometry"),kt=e("library_cameras camera",z,"camera"),Ft=e("library_lights light",V,"light"),Ct=e("library_controllers controller",d,"controller"),At=e("library_animations animation",N,"animation"),yt=e("library_visual_scenes visual_scene",g,"visual_scene"),bt=e("library_kinematics_models kinematics_model",G,"kinematics_model"),_t=[],xt=[],ut=function(){var t=dt.querySelectorAll("scene instance_visual_scene")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return yt[e.length>0?e:"visual_scene0"]}return null}(),ft=new at.Scene;for(var o=0;o<ut.nodes.length;o++)ft.add(s(ut.nodes[o]));ft.scale.multiplyScalar(Pt),mt=[],function t(e){var n=ut.getChildById(e.colladaId,!0),i=null;if(n&&n.keys){i={fps:60,hierarchy:[{node:n,keys:n.keys,sids:n.sids}],node:e,name:"animation_"+e.name,length:0},mt.push(i);for(var r=0,o=n.keys.length;r<o;r++)i.length=Math.max(i.length,n.keys[r].time)}else i={hierarchy:[{keys:[],sids:[]}]};for(var r=0,o=e.children.length;r<o;r++)for(var s=t(e.children[r]),a=0,c=s.hierarchy.length;a<c;a++)i.hierarchy.push({keys:[],sids:[]});return i}(ft),ht=function(){var t=dt.querySelectorAll("instance_kinematics_model")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return bt[e.length>0?e:"kinematics_model0"]}return null}(),function(){if(ht&&0===ht.joints.length)return void(vt=void 0);var t={};vt={joints:ht&&ht.joints,getJointValue:function(e){var n=t[e];if(n)return n.position;console.log("getJointValue: joint "+e+" doesn't exist")},setJointValue:function(e,i){var r=t[e];if(r){var o=r.joint;if(i>o.limits.max||i<o.limits.min)console.log("setJointValue: joint "+e+" value "+i+" outside of limits (min: "+o.limits.min+", max: "+o.limits.max+")");else if(o.static)console.log("setJointValue: joint "+e+" is static");else{var s=r.node,a=o.axis,c=r.transforms,l=new at.Matrix4,u=new at.Matrix4;for(n=0;n<c.length;n++){var h=c[n];if(h.sid&&-1!==h.sid.indexOf("joint"+e))switch(o.type){case"revolute":l.multiply(u.makeRotationAxis(a,at.Math.degToRad(i)));break;case"prismatic":l.multiply(u.makeTranslation(a.x*i,a.y*i,a.z*i));break;default:console.warn("setJointValue: unknown joint type: "+o.type)}else switch(h.type){case"matrix":l.multiply(h.obj);break;case"translate":l.multiply(u.makeTranslation(h.obj.x,h.obj.y,h.obj.z));break;case"rotate":l.multiply(u.makeRotationAxis(h.obj,h.angle))}}var d=l.elements,f=Array.prototype.slice.call(d),p=[f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15]];s.matrix.set.apply(s.matrix,p),s.matrix.decompose(s.position,s.quaternion,s.scale),t[e].position=i}}else console.log("setJointValue: joint "+e+" doesn't exist")}};var e=dt.querySelector("scene instance_kinematics_scene");if(e)for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"bind_joint_axis":var r=i.getAttribute("target").split("/").pop(),o=i.querySelector("axis param").textContent,s=parseInt(o.split("joint").pop().split(".")[0]),a=dt.querySelector('[sid="'+r+'"]');if(a){var c=a.parentElement;!function(e,n){var i=n.getAttribute("id"),r=ut.getChildById(i,!0),o=ht.joints[e];ft.traverse(function(n){n.colladaId==i&&(t[e]={node:n,transforms:r.transforms,joint:o,position:o.zeroPosition})})}(s,c)}}}}();var a={scene:ft,morphs:_t,skins:xt,animations:mt,kinematics:vt,dae:{images:Et,materials:Mt,cameras:kt,lights:Ft,effects:Tt,geometries:St,controllers:Ct,animations:At,visualScenes:yt,visualScene:ut,scene:ut,kinematicsModels:bt,kinematicsModel:ht}};return n&&n(a),a}function e(t,e,n){for(var i=dt.querySelectorAll(t),r={},o=0,s=i.length,a=0;a<s;a++){var c=i[a],l=(new e).parse(c);l.id&&0!==l.id.length||(l.id=n+o++),r[l.id]=l}return r}function n(t,e){var n=e instanceof y?Ct[e.url]:e;if(!n||!n.morph)return void console.log("could not find morph controller!");for(var i=n.morph,r=0;r<i.targets.length;r++){var o=i.targets[r],s=St[o];if(s.mesh&&s.mesh.primitives&&s.mesh.primitives.length){var a=s.mesh.primitives[0].geometry;a.vertices.length===t.vertices.length&&t.morphTargets.push({name:"target_1",vertices:a.vertices})}}t.morphTargets.push({name:"target_Z",vertices:t.vertices})}function i(t,e,n,r){if(t.world=t.world||new at.Matrix4,t.localworld=t.localworld||new at.Matrix4,t.world.copy(t.matrix),t.localworld.copy(t.matrix),t.channels&&t.channels.length){var o=t.channels[0].sampler.output[n];o instanceof at.Matrix4&&(t.world.copy(o),t.localworld.copy(o),0===n&&t.matrix.copy(o))}r&&t.world.multiplyMatrices(r,t.world),e.push(t);for(var s=0;s<t.nodes.length;s++)i(t.nodes[s],e,n,t.world)}function r(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=-1;if("JOINT"==i.type){for(var o=0;o<e.joints.length;o++)if(i.sid===e.joints[o]){r=o;break}if(r>=0){var s=e.invBindMatrices[r];for(i.invBindMatrix=s,i.skinningMatrix=new at.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,s),i.animatrix=new at.Matrix4,i.animatrix.copy(i.localworld),i.weights=[],o=0;o<e.weights.length;o++)for(var a=0;a<e.weights[o].length;a++){var c=e.weights[o][a];c.joint===r&&i.weights.push(c)}}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new at.Matrix4,i.weights=[]}}}function o(t,e,n){void 0===n&&(n=40);var o=Ct[e.url];if(!o||!o.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!e.skeleton||!e.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var s=function(){var t=void 0,e=1e6,n=-e,i=0;for(var r in At){var o=At[r];t=t||o.id;for(var s=0;s<o.sampler.length;s++){var a=o.sampler[s];a.create(),e=Math.min(e,a.startTime),n=Math.max(n,a.endTime),i=Math.max(i,a.input.length)}}return{start:e,end:n,frames:i,ID:t}}(),a=ut.getChildById(e.skeleton[0],!0)||ut.getChildBySid(e.skeleton[0],!0),c=function(t){var e=[];return function t(e,n,i){var r={};r.name=n.sid,r.parent=e,r.matrix=n.matrix;var o=[new at.Vector3,new at.Quaternion,new at.Vector3];r.matrix.decompose(o[0],o[1],o[2]),r.pos=[o[0].x,o[0].y,o[0].z],r.scl=[o[2].x,o[2].y,o[2].z],r.rotq=[o[1].x,o[1].y,o[1].z,o[1].w],i.push(r);for(var s in n.nodes)t(n.sid,n.nodes[s],i)}(-1,t,e),e}(a),l=o.skin.joints,u=[],h=0;h<l.length;h++)for(var d=0;d<c.length;d++)c[d].name===l[h]&&(u[h]=c[d]);for(h=0;h<u.length;h++)for(d=0;d<u.length;d++)u[h].parent===u[d].name&&(u[h].parent=d);for(new at.Vector3,h=0;h<t.vertices.length;h++)t.vertices[h].applyMatrix4(o.skin.bindShapeMatrix);var f=[],p=[],g=o.skin.weights;for(h=0;h<g.length;h++){var m=new at.Vector4(g[h][0]?g[h][0].joint:0,g[h][1]?g[h][1].joint:0,g[h][2]?g[h][2].joint:0,g[h][3]?g[h][3].joint:0),v=new at.Vector4(g[h][0]?g[h][0].weight:0,g[h][1]?g[h][1].weight:0,g[h][2]?g[h][2].weight:0,g[h][3]?g[h][3].weight:0);f.push(m),p.push(v)}t.skinIndices=f,t.skinWeights=p,t.bones=u;var y={name:s.ID,fps:30,length:s.frames/30,hierarchy:[]};for(d=0;d<u.length;d++)y.hierarchy.push({parent:u[d].parent,name:u[d].name,keys:[]});for(console.log("ColladaLoader:",s.ID+" has "+u.length+" bones."),function(t,e,n){var o=[];i(e,o,-1),r(o,n.skin);for(var s=new at.Vector3,a=[],c=0;c<t.vertices.length;c++)a.push(new at.Vector3);for(c=0;c<o.length;c++)if("JOINT"==o[c].type)for(var l=0;l<o[c].weights.length;l++){var u=o[c].weights[l],h=u.index,d=u.weight,f=t.vertices[h],p=a[h];s.x=f.x,s.y=f.y,s.z=f.z,s.applyMatrix4(o[c].skinningMatrix),p.x+=s.x*d,p.y+=s.y*d,p.z+=s.z*d}for(c=0;c<t.vertices.length;c++)t.vertices[c]=a[c]}(t,a,o),n=0;n<s.frames;n++){var b=[];for(i(a,b,n),r(b,o.skin),h=0;h<b.length;h++)for(d=0;d<y.hierarchy.length;d++)if(y.hierarchy[d].name===b[h].sid){var w={};w.time=n/30,w.matrix=b[h].animatrix,0===n&&(b[h].matrix=w.matrix);var _=[new at.Vector3,new at.Quaternion,new at.Vector3];w.matrix.decompose(_[0],_[1],_[2]),w.pos=[_[0].x,_[0].y,_[0].z],w.scl=[_[2].x,_[2].y,_[2].z],w.rot=_[1],y.hierarchy[d].keys.push(w)}t.animation=y}}function s(t,e){var i=new at.Object3D,r=void 0,a=void 0,c=void 0,l=void 0;for(c=0;c<t.controllers.length;c++){var u=Ct[t.controllers[c].url];switch(u.type){case"skin":if(St[u.skin.source])(d=new w).url=u.skin.source,d.instance_material=t.controllers[c].instance_material,t.geometries.push(d),r=t.controllers[c];else if(Ct[u.skin.source]){var h=Ct[u.skin.source];a=h,h.morph&&St[h.morph.source]&&((d=new w).url=h.morph.source,d.instance_material=t.controllers[c].instance_material,t.geometries.push(d))}break;case"morph":var d;St[u.morph.source]&&((d=new w).url=u.morph.source,d.instance_material=t.controllers[c].instance_material,t.geometries.push(d),a=t.controllers[c]),console.log("ColladaLoader: Morph-controller partially supported.")}}var f={};for(c=0;c<t.geometries.length;c++){var p,g=t.geometries[c],m=g.instance_material,v=St[g.url],y={},b=[],_=0;if(v){if(!v.mesh||!v.mesh.primitives)continue;if(0===i.name.length&&(i.name=v.id),m)for(l=0;l<m.length;l++){var x=m[l],E=Mt[x.target],A=E.instance_effect.url,C=Tt[A].shader.material;if(v.doubleSided){if(!(x.symbol in f)){var S=C.clone();S.side=at.DoubleSide,f[x.symbol]=S}C=f[x.symbol]}C.opacity=C.opacity?C.opacity:1,y[x.symbol]=_,b.push(C),(p=C).name=null===E.name||""===E.name?E.id:E.name,_++}var M,T=p||new at.MeshLambertMaterial({color:14540253,side:v.doubleSided?at.DoubleSide:at.FrontSide}),k=v.mesh.geometry3js;if(_>1)for(T=new at.MultiMaterial(b),l=0;l<k.faces.length;l++){var F=k.faces[l];F.materialIndex=y[F.daeMaterial]}void 0!==r?(o(k,r),k.morphTargets.length>0?(T.morphTargets=!0,T.skinning=!1):(T.morphTargets=!1,T.skinning=!0),(M=new at.SkinnedMesh(k,T,!1)).name="skin_"+xt.length,xt.push(M)):void 0!==a?(n(k,a),T.morphTargets=!0,(M=new at.Mesh(k,T)).name="morph_"+_t.length,_t.push(M)):M=!0===k.isLineStrip?new at.Line(k):new at.Mesh(k,T),i.add(M)}}for(c=0;c<t.cameras.length;c++){var O=t.cameras[c],P=kt[O.url],L=new at.PerspectiveCamera(P.yfov,parseFloat(P.aspect_ratio),parseFloat(P.znear),parseFloat(P.zfar));i.add(L)}for(c=0;c<t.lights.length;c++){var R=null,D=t.lights[c],B=Ft[D.url];if(B&&B.technique){var I=B.color.getHex(),N=B.intensity,j=B.distance,U=B.falloff_angle;switch(B.technique){case"directional":(R=new at.DirectionalLight(I,N,j)).position.set(0,0,1);break;case"point":R=new at.PointLight(I,N,j);break;case"spot":(R=new at.SpotLight(I,N,j,U)).position.set(0,0,1);break;case"ambient":R=new at.AmbientLight(I)}}R&&i.add(R)}if(i.name=t.name||t.id||"",i.colladaId=t.id||"",i.layer=t.layer||"",i.matrix=t.matrix,i.matrix.decompose(i.position,i.quaternion,i.scale),Ot.centerGeometry&&i.geometry){var $=new at.Vector3;object.geometry.computeBoundingBox(),object.geometry.boundingBox.getCenter($),i.geometry.center(),$.multiply(i.scale),$.applyQuaternion(i.quaternion),i.position.add($)}for(c=0;c<t.nodes.length;c++)i.add(s(t.nodes[c],t));return i}function a(t){for(var e=dt.querySelectorAll("library_nodes node"),n=0;n<e.length;n++){var i=e[n].attributes.getNamedItem("id");if(i&&i.value===t)return e[n]}}function c(t,e){for(var n=null,i=0,r=t.length;i<r&&null===n;i++){var o=t[i];if(o.time===e)n=o;else if(o.time>e)break}return n}function l(t,e){for(var n=-1,i=0,r=t.length;i<r&&-1===n;i++)t[i].time>=e&&(n=i);return n}function u(t,e,n,i){var r=function(t,e,n){for(n=n>=0?n:n+t.length;n>=0;n--){var i=t[n];if(i.hasTarget(e))return i}return null}(t,i,n?n-1:0),o=function(t,e,n){for(;n<t.length;n++){var i=t[n];if(i.hasTarget(e))return i}return null}(t,i,n+1);if(r&&o){var s=void 0,a=(e.time-r.time)/(o.time-r.time),c=r.getTarget(i),l=o.getTarget(i).data,u=c.data;if("matrix"===c.type)s=u;else if(u.length){s=[];for(var h=0;h<u.length;++h)s[h]=u[h]+(l[h]-u[h])*a}else s=u+(l-u)*a;e.addTarget(i,c.transform,c.member,s)}}function h(){this.id="",this.init_from=""}function d(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function f(){this.method=null,this.source=null,this.targets=null,this.weights=null}function p(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function g(){this.id="",this.name="",this.nodes=[],this.scene=new at.Group}function m(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new at.Matrix4}function v(){this.sid="",this.type="",this.data=[],this.obj=null}function y(){this.url="",this.skeleton=[],this.instance_material=[]}function b(){this.symbol="",this.target=""}function w(){this.url="",this.instance_material=[]}function _(){this.id="",this.mesh=null}function x(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function E(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new at.Geometry}function A(){E.call(this),this.vcount=[]}function C(){E.call(this),this.vcount=1}function S(){E.call(this),this.vcount=3}function M(){this.source="",this.count=0,this.stride=0,this.params=[]}function T(){this.input={}}function k(){this.semantic="",this.offset=0,this.source="",this.set=0}function F(t){this.id=t,this.type=null}function O(){this.id="",this.name="",this.instance_effect=null}function P(){this.color=new at.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function L(t,e){this.type=t,this.effect=e,this.material=null}function R(t){this.effect=t,this.init_from=null,this.format=null}function D(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function B(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function I(){this.url=""}function N(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function j(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function U(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function $(t){this.targets=[],this.time=t}function z(){this.id="",this.name="",this.technique=""}function H(){this.url=""}function V(){this.id="",this.name="",this.technique=""}function W(){this.url=""}function G(){this.id="",this.name="",this.joints=[],this.links=[]}function q(){this.sid="",this.name="",this.axis=new at.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function X(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function K(){this.joint="",this.transforms=[],this.links=[]}function Y(t){var e=t.getAttribute("id");return void 0!=gt[e]?gt[e]:(gt[e]=new F(e).parse(t),gt[e])}function Z(t){for(var e=tt(t),n=[],i=0,r=e.length;i<r;i++)n.push(!("true"!==e[i]&&"1"!==e[i]));return n}function J(t){for(var e=tt(t),n=[],i=0,r=e.length;i<r;i++)n.push(parseFloat(e[i]));return n}function Q(t){for(var e=tt(t),n=[],i=0,r=e.length;i<r;i++)n.push(parseInt(e[i],10));return n}function tt(t){return t.length>0?function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}(t).split(/\s+/):[]}function et(t,e,n){return t.hasAttribute(e)?parseInt(t.getAttribute(e),10):n}function nt(t,e){(new at.ImageLoader).load(e,function(e){t.image=e,t.needsUpdate=!0})}function it(t,e){t.doubleSided=!1;var n=e.querySelectorAll("extra double_sided")[0];n&&n&&1===parseInt(n.textContent,10)&&(t.doubleSided=!0)}function rt(t,e){if(!0===Ot.convertUpAxis&&Lt!==Ot.upAxis)switch(Rt){case"XtoY":var n=t[0];t[0]=e*t[1],t[1]=n;break;case"XtoZ":n=t[2],t[2]=t[1],t[1]=t[0],t[0]=n;break;case"YtoX":n=t[0],t[0]=t[1],t[1]=e*n;break;case"YtoZ":n=t[1],t[1]=e*t[2],t[2]=n;break;case"ZtoX":n=t[0],t[0]=t[1],t[1]=t[2],t[2]=n;break;case"ZtoY":n=t[1],t[1]=t[2],t[2]=e*n}}function ot(t,e){var n=[t[e],t[e+1],t[e+2]];return rt(n,-1),new at.Vector3(n[0],n[1],n[2])}function st(t){if(Ot.convertUpAxis){var e=[t[0],t[4],t[8]];rt(e,-1),t[0]=e[0],t[4]=e[1],t[8]=e[2],rt(e=[t[1],t[5],t[9]],-1),t[1]=e[0],t[5]=e[1],t[9]=e[2],rt(e=[t[2],t[6],t[10]],-1),t[2]=e[0],t[6]=e[1],t[10]=e[2],rt(e=[t[0],t[1],t[2]],-1),t[0]=e[0],t[1]=e[1],t[2]=e[2],rt(e=[t[4],t[5],t[6]],-1),t[4]=e[0],t[5]=e[1],t[6]=e[2],rt(e=[t[8],t[9],t[10]],-1),t[8]=e[0],t[9]=e[1],t[10]=e[2],rt(e=[t[3],t[7],t[11]],-1),t[3]=e[0],t[7]=e[1],t[11]=e[2]}return(new at.Matrix4).set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function ct(t){return t>-1&&t<3&&(t={X:0,Y:1,Z:2}[t=lt(["X","Y","Z"][t])]),t}function lt(t){if(Ot.convertUpAxis)switch(t){case"X":switch(Rt){case"XtoY":case"XtoZ":case"YtoX":t="Y";break;case"ZtoX":t="Z"}break;case"Y":switch(Rt){case"XtoY":case"YtoX":case"ZtoX":t="X";break;case"XtoZ":case"YtoZ":case"ZtoY":t="Z"}break;case"Z":switch(Rt){case"XtoZ":t="X";break;case"YtoZ":case"ZtoX":case"ZtoY":t="Y"}}return t}var ut=void 0,ht=void 0,dt=null,ft=null,pt=null,gt={},mt=void 0,vt=void 0,yt=void 0,bt=void 0,wt=void 0,_t=void 0,xt=void 0,Et={},At={},Ct={},St={},Mt={},Tt={},kt={},Ft={},Ot={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},Pt=1,Lt="Y",Rt=null;return h.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];"init_from"===n.nodeName&&(this.init_from=n.textContent)}return this},d.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.type="none";for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"skin":this.skin=(new p).parse(n),this.type=n.nodeName;break;case"morph":this.morph=(new f).parse(n),this.type=n.nodeName}}return this},f.prototype.parse=function(t){var e={},n=void 0,i=[];for(this.method=t.getAttribute("method"),this.source=t.getAttribute("source").replace(/^#/,""),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"source":e[(s=(new F).parse(r)).id]=s;break;case"targets":i=this.parseInputs(r);break;default:console.log(r.nodeName)}}for(n=0;n<i.length;n++){var o=i[n],s=e[o.source];switch(o.semantic){case"MORPH_TARGET":this.targets=s.read();break;case"MORPH_WEIGHT":this.weights=s.read()}}return this},f.prototype.parseInputs=function(t){for(var e=[],n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"input":e.push((new k).parse(i))}}return e},p.prototype.parse=function(t){var e={},n=void 0,i=void 0;this.source=t.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(1==o.nodeType)switch(o.nodeName){case"bind_shape_matrix":var s=J(o.textContent);this.bindShapeMatrix=st(s);break;case"source":var a=(new F).parse(o);e[a.id]=a;break;case"joints":n=o;break;case"vertex_weights":i=o;break;default:console.log(o.nodeName)}}return this.parseJoints(n,e),this.parseWeights(i,e),this},p.prototype.parseJoints=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"input":var r=(new k).parse(i),o=e[r.source];"JOINT"===r.semantic?this.joints=o.read():"INV_BIND_MATRIX"===r.semantic&&(this.invBindMatrices=o.read())}}},p.prototype.parseWeights=function(t,e){for(var n=void 0,i=void 0,r=[],o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];if(1==s.nodeType)switch(s.nodeName){case"input":r.push((new k).parse(s));break;case"v":n=Q(s.textContent);break;case"vcount":i=Q(s.textContent)}}var a=0;for(o=0;o<i.length;o++){for(var c=i[o],l=[],u=0;u<c;u++){for(var h={},d=0;d<r.length;d++){var f=r[d],p=n[a+f.offset];switch(f.semantic){case"JOINT":h.joint=p;break;case"WEIGHT":h.weight=e[f.source].data[p]}}l.push(h),a+=r.length}for(u=0;u<l.length;u++)l[u].index=o;this.weights.push(l)}},g.prototype.getChildById=function(t,e){for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildById(t,e);if(i)return i}return null},g.prototype.getChildBySid=function(t,e){for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildBySid(t,e);if(i)return i}return null},g.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.nodes=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push((new m).parse(n))}}return this},m.prototype.getChannelForTransform=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e],i=n.target.split("/");i.shift();var r,o=i.shift(),s=o.indexOf(".")>=0,a=o.indexOf("(")>=0;if(s)o=(i=o.split(".")).shift();else if(a){o=(r=o.split("(")).shift();for(var c=0;c<r.length;c++)r[c]=parseInt(r[c].replace(/\)/,""))}if(o===t)return n.info={sid:o,dotSyntax:s,arrSyntax:a,arrIndices:r},n}return null},m.prototype.getChildById=function(t,e){if(this.id===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildById(t,e);if(i)return i}return null},m.prototype.getChildBySid=function(t,e){if(this.sid===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildBySid(t,e);if(i)return i}return null},m.prototype.getTransformBySid=function(t){for(var e=0;e<this.transforms.length;e++)if(this.transforms[e].sid===t)return this.transforms[e];return null},m.prototype.parse=function(t){var e=void 0;this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.type=t.getAttribute("type"),this.layer=t.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new at.Matrix4;for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push((new m).parse(i));break;case"instance_camera":this.cameras.push((new H).parse(i));break;case"instance_controller":this.controllers.push((new y).parse(i));break;case"instance_geometry":this.geometries.push((new w).parse(i));break;case"instance_light":this.lights.push((new W).parse(i));break;case"instance_node":var r=a(e=i.getAttribute("url").replace(/^#/,""));r&&this.nodes.push((new m).parse(r));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new v).parse(i));break;case"extra":break;default:console.log(i.nodeName)}}return this.channels=function(t){var e=[],n=1e6,i=-1e6;for(var r in At)for(var o=At[r],s=0;s<o.channel.length;s++){var a=o.channel[s],c=o.sampler[s];(r=a.target.split("/")[0])==t.id&&(c.create(),a.sampler=c,n=Math.min(n,c.startTime),i=Math.max(i,c.endTime),e.push(a))}return e.length&&(t.startTime=n,t.endTime=i),e}(this),function(t){if(t.channels&&t.channels.length){for(var e=[],n=[],i=0,r=t.channels.length;i<r;i++){var o,s=t.channels[i],a=s.fullSid,h=s.sampler,d=h.input,f=t.getTransformBySid(s.sid);if(s.arrIndices){o=[];for(var p=0,g=s.arrIndices.length;p<g;p++)o[p]=ct(s.arrIndices[p])}else o=lt(s.member);if(f)for(-1===n.indexOf(a)&&n.push(a),p=0,g=d.length;p<g;p++){var m=d[p],v=h.getData(f.type,p,o);if(!(w=c(e,m))){w=new $(m);var y=l(e,m);e.splice(-1===y?e.length:y,0,w)}w.addTarget(a,f,o,v)}else console.log('Could not find transform "'+s.sid+'" in node '+t.id)}for(i=0;i<n.length;i++){var b=n[i];for(p=0;p<e.length;p++){var w;(w=e[p]).hasTarget(b)||u(e,w,p,b)}}t.keys=e,t.sids=n}}(this),this.updateMatrix(),this},m.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(this.matrix)},v.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=J(t.textContent),this.convert(),this},v.prototype.convert=function(){switch(this.type){case"matrix":this.obj=st(this.data);break;case"rotate":this.angle=at.Math.degToRad(this.data[3]);case"translate":rt(this.data,-1),this.obj=new at.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":rt(this.data,1),this.obj=new at.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},v.prototype.apply=function(){var t=new at.Matrix4;return function(e){switch(this.type){case"matrix":e.multiply(this.obj);break;case"translate":e.multiply(t.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":e.multiply(t.makeRotationAxis(this.obj,this.angle));break;case"scale":e.scale(this.obj)}}}(),v.prototype.update=function(t,e){var n=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(e)if(1===e.length)switch(e[0]){case 0:this.obj.n11=t[0],this.obj.n21=t[1],this.obj.n31=t[2],this.obj.n41=t[3];break;case 1:this.obj.n12=t[0],this.obj.n22=t[1],this.obj.n32=t[2],this.obj.n42=t[3];break;case 2:this.obj.n13=t[0],this.obj.n23=t[1],this.obj.n33=t[2],this.obj.n43=t[3];break;case 3:this.obj.n14=t[0],this.obj.n24=t[1],this.obj.n34=t[2],this.obj.n44=t[3]}else if(2===e.length){var i="n"+(e[0]+1)+(e[1]+1);this.obj[i]=t}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(t);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;case"ANGLE":this.angle=at.Math.degToRad(t);break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2],this.angle=at.Math.degToRad(t[3])}}},y.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"skeleton":this.skeleton.push(n.textContent.replace(/^#/,""));break;case"bind_material":for(var i=n.querySelectorAll("instance_material"),r=0;r<i.length;r++){var o=i[r];this.instance_material.push((new b).parse(o))}}}return this},b.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this},w.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType&&"bind_material"===n.nodeName){for(var i=n.querySelectorAll("instance_material"),r=0;r<i.length;r++){var o=i[r];this.instance_material.push((new b).parse(o))}break}}return this},_.prototype.parse=function(t){this.id=t.getAttribute("id"),it(this,t);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"mesh":this.mesh=new x(this).parse(n)}}return this},x.prototype.parse=function(t){this.primitives=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"source":Y(n);break;case"vertices":this.vertices=(new T).parse(n);break;case"linestrips":this.primitives.push((new C).parse(n));break;case"triangles":this.primitives.push((new S).parse(n));break;case"polygons":this.primitives.push((new E).parse(n));break;case"polylist":this.primitives.push((new A).parse(n))}}if(this.geometry3js=new at.Geometry,null===this.vertices)return this;var i=gt[this.vertices.input.POSITION.source].data;for(e=0;e<i.length;e+=3)this.geometry3js.vertices.push(ot(i,e).clone());for(e=0;e<this.primitives.length;e++){var r=this.primitives[e];r.setVertices(this.vertices),this.handlePrimitive(r,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},x.prototype.handlePrimitive=function(t,e){if(t instanceof C)return void(e.isLineStrip=!0);var n=void 0,i=void 0,r=void 0,o=void 0,s=void 0,a=void 0,c=void 0,l=void 0,u=t.p,h=t.inputs,d=0,f=0,p=[];for(n=0;n<h.length;n++){var g=(r=h[n]).offset+1;switch(f=f<g?g:f,r.semantic){case"TEXCOORD":p.push(r.set)}}for(var m=0;m<u.length;++m)for(var v=u[m],y=0;y<v.length;){var b=[],w=[],_=null,x=[];for(l=t.vcount?t.vcount.length?t.vcount[d++]:t.vcount:v.length/f,n=0;n<l;n++)for(i=0;i<h.length;i++)switch(r=h[i],a=gt[r.source],s=(o=v[y+n*f+r.offset])*(c=a.accessor.params.length),r.semantic){case"VERTEX":b.push(o);break;case"NORMAL":w.push(ot(a.data,s));break;case"TEXCOORD":void 0===(_=_||{})[r.set]&&(_[r.set]=[]),_[r.set].push(new at.Vector2(a.data[s],a.data[s+1]));break;case"COLOR":x.push((new at.Color).setRGB(a.data[s],a.data[s+1],a.data[s+2]))}if(0===w.length)if(r=this.vertices.input.NORMAL){c=(a=gt[r.source]).accessor.params.length;for(var E=0,A=b.length;E<A;E++)w.push(ot(a.data,b[E]*c))}else e.calcNormals=!0;if(!_&&(_={},r=this.vertices.input.TEXCOORD))for(p.push(r.set),c=(a=gt[r.source]).accessor.params.length,E=0,A=b.length;E<A;E++)s=b[E]*c,void 0===_[r.set]&&(_[r.set]=[]),_[r.set].push(new at.Vector2(a.data[s],1-a.data[s+1]));if(0===x.length&&(r=this.vertices.input.COLOR))for(c=(a=gt[r.source]).accessor.params.length,E=0,A=b.length;E<A;E++)s=b[E]*c,x.push((new at.Color).setRGB(a.data[s],a.data[s+1],a.data[s+2]));var S,M,T=null,k=[];if(3===l)k.push(new at.Face3(b[0],b[1],b[2],w,x.length?x:new at.Color));else if(4===l)k.push(new at.Face3(b[0],b[1],b[3],w.length?[w[0].clone(),w[1].clone(),w[3].clone()]:[],x.length?[x[0],x[1],x[3]]:new at.Color)),k.push(new at.Face3(b[1],b[2],b[3],w.length?[w[1].clone(),w[2].clone(),w[3].clone()]:[],x.length?[x[1],x[2],x[3]]:new at.Color));else if(l>4&&Ot.subdivideFaces){var F=x.length?x:new at.Color;for(i=1;i<l-1;)k.push(new at.Face3(b[0],b[i],b[i+1],w.length?[w[0].clone(),w[i++].clone(),w[i].clone()]:[],F))}if(k.length)for(E=0,A=k.length;E<A;E++)for((T=k[E]).daeMaterial=t.material,e.faces.push(T),i=0;i<p.length;i++)S=_[p[i]],M=l>4?[S[0],S[E+1],S[E+2]]:4===l?0===E?[S[0],S[1],S[3]]:[S[1].clone(),S[2],S[3].clone()]:[S[0],S[1],S[2]],void 0===e.faceVertexUvs[i]&&(e.faceVertexUvs[i]=[]),e.faceVertexUvs[i].push(M);else console.log("dropped face with vcount "+l+" for geometry with id: "+e.id);y+=f*l}},E.prototype.setVertices=function(t){for(var e=0;e<this.inputs.length;e++)this.inputs[e].source===t.id&&(this.inputs[e].source=t.input.POSITION.source)},E.prototype.parse=function(t){this.material=t.getAttribute("material"),this.count=et(t,"count",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"input":this.inputs.push((new k).parse(t.childNodes[e]));break;case"vcount":this.vcount=Q(n.textContent);break;case"p":this.p.push(Q(n.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},A.prototype=Object.create(E.prototype),A.prototype.constructor=A,C.prototype=Object.create(E.prototype),C.prototype.constructor=C,S.prototype=Object.create(E.prototype),S.prototype.constructor=S,M.prototype.parse=function(t){this.params=[],this.source=t.getAttribute("source"),this.count=et(t,"count",0),this.stride=et(t,"stride",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if("param"===n.nodeName){var i={};i.name=n.getAttribute("name"),i.type=n.getAttribute("type"),this.params.push(i)}}return this},T.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++)if("input"===t.childNodes[e].nodeName){var n=(new k).parse(t.childNodes[e]);this.input[n.semantic]=n}return this},k.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=et(t,"set",-1),this.offset=et(t,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},F.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"bool_array":this.data=Z(n.textContent),this.type=n.nodeName;break;case"float_array":this.data=J(n.textContent),this.type=n.nodeName;break;case"int_array":this.data=Q(n.textContent),this.type=n.nodeName;break;case"IDREF_array":case"Name_array":this.data=tt(n.textContent),this.type=n.nodeName;break;case"technique_common":for(var i=0;i<n.childNodes.length;i++)if("accessor"===n.childNodes[i].nodeName){this.accessor=(new M).parse(n.childNodes[i]);break}}}return this},F.prototype.read=function(){var t=[],e=this.accessor.params[0];switch(e.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var n=0;n<this.data.length;n+=16){var i=st(this.data.slice(n,n+16));t.push(i)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+e.type+".")}return t},O.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++)if("instance_effect"===t.childNodes[e].nodeName){this.instance_effect=(new I).parse(t.childNodes[e]);break}return this},P.prototype.isColor=function(){return null===this.texture},P.prototype.isTexture=function(){return null!=this.texture},P.prototype.parse=function(t){"transparent"===t.nodeName&&(this.opaque=t.getAttribute("opaque"));for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"color":var i=J(n.textContent);this.color=new at.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=n.getAttribute("texture"),this.texcoord=n.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(n)}}return this},P.prototype.parseTexture=function(t){if(!t.childNodes)return this;t.childNodes[1]&&"extra"===t.childNodes[1].nodeName&&(t=t.childNodes[1]).childNodes[1]&&"technique"===t.childNodes[1].nodeName&&(t=t.childNodes[1]);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?this.texOpts[n.nodeName]=1:this.texOpts[n.nodeName]=parseInt(n.textContent);break;default:this.texOpts[n.nodeName]=n.textContent}}return this},L.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"ambient":case"emission":case"diffuse":case"specular":case"transparent":this[n.nodeName]=(new P).parse(n);break;case"bump":var i=n.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=(new P).parse(n):"normalmap"===i.toLowerCase()?this.normal=(new P).parse(n):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+i+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new P).parse(n)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new P).parse(n));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var r=n.querySelectorAll("float");r.length>0&&(this[n.nodeName]=parseFloat(r[0].textContent))}}return this.create(),this},L.prototype.create=function(){var t={},e=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var n=(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency;n>0&&(e=!0,t.transparent=!0,t.opacity=1-n)}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var r in this)switch(r){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var o=this[r];if(o instanceof P)if(o.isTexture()){var s=o.texture,a=this.effect.sampler[s];if(void 0!==a&&void 0!==a.source){var c=this.effect.surface[a.source];if(void 0!==c){var l=Et[c.init_from];if(l){var u,h=wt+l.init_from,d=at.Loader.Handlers.get(h);null!==d?u=d.load(h):nt(u=new at.Texture,h),"MIRROR"===a.wrap_s?u.wrapS=at.MirroredRepeatWrapping:"WRAP"===a.wrap_s||o.texOpts.wrapU?u.wrapS=at.RepeatWrapping:u.wrapS=at.ClampToEdgeWrapping,"MIRROR"===a.wrap_t?u.wrapT=at.MirroredRepeatWrapping:"WRAP"===a.wrap_t||o.texOpts.wrapV?u.wrapT=at.RepeatWrapping:u.wrapT=at.ClampToEdgeWrapping,u.offset.x=o.texOpts.offsetU,u.offset.y=o.texOpts.offsetV,u.repeat.x=o.texOpts.repeatU,u.repeat.y=o.texOpts.repeatV,t[i[r]]=u,"emission"===r&&(t.emissive=16777215)}}}}else"diffuse"!==r&&e||("emission"===r?t.emissive=o.color.getHex():t[r]=o.color.getHex());break;case"shininess":t[r]=this[r];break;case"reflectivity":t[r]=this[r],t[r]>0&&(t.envMap=Ot.defaultEnvMap),t.combine=at.MixOperation;break;case"index_of_refraction":t.refractionRatio=this[r],1!==this[r]&&(t.envMap=Ot.defaultEnvMap)}switch(t.side=this.effect.doubleSided?at.DoubleSide:at.FrontSide,void 0!==t.diffuse&&(t.color=t.diffuse,delete t.diffuse),void 0!==t.ambient&&delete t.ambient,this.type){case"constant":void 0!=t.emissive&&(t.color=t.emissive),this.material=new at.MeshBasicMaterial(t);break;case"phong":case"blinn":this.material=new at.MeshPhongMaterial(t);break;case"lambert":default:this.material=new at.MeshLambertMaterial(t)}return this.material},R.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"init_from":this.init_from=n.textContent;break;case"format":this.format=n.textContent;break;default:console.log("unhandled Surface prop: "+n.nodeName)}}return this},D.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"source":this.source=n.textContent;break;case"minfilter":this.minfilter=n.textContent;break;case"magfilter":this.magfilter=n.textContent;break;case"mipfilter":this.mipfilter=n.textContent;break;case"wrap_s":this.wrap_s=n.textContent;break;case"wrap_t":this.wrap_t=n.textContent;break;default:console.log("unhandled Sampler2D prop: "+n.nodeName)}}return this},B.prototype.create=function(){if(null===this.shader)return null},B.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),it(this,t),this.shader=null;for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(n))}}return this},B.prototype.parseNewparam=function(t){for(var e=t.getAttribute("sid"),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"surface":this.surface[e]=new R(this).parse(i);break;case"sampler2D":this.sampler[e]=new D(this).parse(i);break;case"extra":break;default:console.log(i.nodeName)}}},B.prototype.parseProfileCOMMON=function(t){for(var e=void 0,n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"profile_COMMON":this.parseProfileCOMMON(i);break;case"technique":e=i;break;case"newparam":this.parseNewparam(i);break;case"image":var r=(new h).parse(i);Et[r.id]=r;break;case"extra":break;default:console.log(i.nodeName)}}return e},B.prototype.parseTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new L(n.nodeName,this).parse(n);break;case"extra":this.parseExtra(n)}}},B.prototype.parseExtra=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique":this.parseExtraTechnique(n)}}},B.prototype.parseExtraTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"bump":this.shader.parse(t)}}},I.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},N.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.source={};for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"animation":var i=(new N).parse(n);for(var r in i.source)this.source[r]=i.source[r];for(var o=0;o<i.channel.length;o++)this.channel.push(i.channel[o]),this.sampler.push(i.sampler[o]);break;case"source":r=(new F).parse(n),this.source[r.id]=r;break;case"sampler":this.sampler.push(new U(this).parse(n));break;case"channel":this.channel.push(new j(this).parse(n))}}return this},j.prototype.parse=function(t){this.source=t.getAttribute("source").replace(/^#/,""),this.target=t.getAttribute("target");var e=this.target.split("/");e.shift();var n=e.shift(),i=n.indexOf(".")>=0,r=n.indexOf("(")>=0;if(i)e=n.split("."),this.sid=e.shift(),this.member=e.shift();else if(r){var o=n.split("(");this.sid=o.shift();for(var s=0;s<o.length;s++)o[s]=parseInt(o[s].replace(/\)/,""));this.arrIndices=o}else this.sid=n;return this.fullSid=n,this.dotSyntax=i,this.arrSyntax=r,this},U.prototype.parse=function(t){this.id=t.getAttribute("id"),this.inputs=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"input":this.inputs.push((new k).parse(n))}}return this},U.prototype.create=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t],n=this.animation.source[e.source];switch(e.semantic){case"INPUT":this.input=n.read();break;case"OUTPUT":this.output=n.read(),this.strideOut=n.accessor.stride;break;case"INTERPOLATION":this.interpolation=n.read();break;case"IN_TANGENT":case"OUT_TANGENT":break;default:console.log(e.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){for(this.startTime=1e8,this.endTime=-1e8,t=0;t<this.input.length;t++)this.startTime=Math.min(this.startTime,this.input[t]),this.endTime=Math.max(this.endTime,this.input[t]);this.duration=this.endTime-this.startTime}},U.prototype.getData=function(t,e,n){var i=void 0;if("matrix"===t&&16===this.strideOut)i=this.output[e];else if(this.strideOut>1){i=[],e*=this.strideOut;for(var r=0;r<this.strideOut;++r)i[r]=this.output[e+r];if(3===this.strideOut)switch(t){case"rotate":case"translate":rt(i,-1);break;case"scale":rt(i,1)}else 4===this.strideOut&&"matrix"===t&&rt(i,-1)}else i=this.output[e],n&&"translate"===t&&(i=function(t,e){if(!0!==Ot.convertUpAxis||Lt===Ot.upAxis)return e;switch(t){case"X":e="XtoY"===Rt?-1*e:e;break;case"Y":e="YtoZ"===Rt||"YtoX"===Rt?-1*e:e;break;case"Z":e="ZtoY"===Rt?-1*e:e}return e}(n,i));return i},$.prototype.addTarget=function(t,e,n,i){this.targets.push({sid:t,member:n,transform:e,data:i})},$.prototype.apply=function(t){for(var e=0;e<this.targets.length;++e){var n=this.targets[e];t&&n.sid!==t||n.transform.update(n.data,n.member)}},$.prototype.getTarget=function(t){for(var e=0;e<this.targets.length;++e)if(this.targets[e].sid===t)return this.targets[e];return null},$.prototype.hasTarget=function(t){for(var e=0;e<this.targets.length;++e)if(this.targets[e].sid===t)return!0;return!1},$.prototype.interpolate=function(t,e){for(var n=0,i=this.targets.length;n<i;n++){var r,o=this.targets[n],s=t.getTarget(o.sid);if("matrix"!==o.transform.type&&s){var a=(e-this.time)/(t.time-this.time),c=s.data,l=o.data;if(a<0&&(a=0),a>1&&(a=1),l.length){r=[];for(var u=0;u<l.length;++u)r[u]=l[u]+(c[u]-l[u])*a}else r=l+(c-l)*a}else r=o.data;o.transform.update(r,o.member)}},z.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"optics":this.parseOptics(n)}}return this},z.prototype.parseOptics=function(t){for(var e=0;e<t.childNodes.length;e++)if("technique_common"===t.childNodes[e].nodeName)for(var n=t.childNodes[e],i=0;i<n.childNodes.length;i++)if(this.technique=n.childNodes[i].nodeName,"perspective"===this.technique)for(var r=n.childNodes[i],o=0;o<r.childNodes.length;o++)switch((a=r.childNodes[o]).nodeName){case"yfov":this.yfov=a.textContent;break;case"xfov":this.xfov=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}else if("orthographic"===this.technique){var s=n.childNodes[i];for(o=0;o<s.childNodes.length;o++){var a;switch((a=s.childNodes[o]).nodeName){case"xmag":this.xmag=a.textContent;break;case"ymag":this.ymag=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}}}return this},H.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},V.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);break;case"technique":this.parseTechnique(n)}}return this},V.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++)switch(t.childNodes[e].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=t.childNodes[e].nodeName;for(var n=t.childNodes[e],i=0;i<n.childNodes.length;i++){var r=n.childNodes[i];switch(r.nodeName){case"color":var o=J(r.textContent);this.color=new at.Color(0),this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"falloff_angle":this.falloff_angle=parseFloat(r.textContent);break;case"quadratic_attenuation":var s=parseFloat(r.textContent);this.distance=s?Math.sqrt(1/s):0}}}return this},V.prototype.parseTechnique=function(t){this.profile=t.getAttribute("profile");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"intensity":this.intensity=parseFloat(n.textContent)}}return this},W.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},G.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.joints=[],this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n)}}return this},G.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(t.childNodes[e].nodeName){case"joint":this.joints.push((new q).parse(n));break;case"link":this.links.push((new X).parse(n))}}return this},q.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.axis=new at.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var e=J(t.querySelector("axis").textContent);this.axis=ot(e,0);var n=t.querySelector("limits min")?parseFloat(t.querySelector("limits min").textContent):-360,i=t.querySelector("limits max")?parseFloat(t.querySelector("limits max").textContent):360;this.limits={min:n,max:i};for(var r=["prismatic","revolute"],o=0;o<r.length;o++){var s=r[o];t.querySelector(s)&&(this.type=s)}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},X.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.transforms=[],this.attachments=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"attachment_full":this.attachments.push((new K).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new v).parse(n))}}return this},K.prototype.parse=function(t){this.joint=t.getAttribute("joint").split("/").pop(),this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"link":this.links.push((new X).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new v).parse(n))}}return this},{load:function(e,n,i,r){var o=0;if(document.implementation&&document.implementation.createDocument){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState?0===s.status||200===s.status?s.response?(pt=n,t(s.response,void 0,e)):r?r({type:"error",url:e}):console.error("ColladaLoader: Empty or non-existing file ("+e+")"):r?r({type:"error",url:e}):console.error("ColladaLoader: Couldn't load \""+e+'" ('+s.status+")"):3===s.readyState&&i&&(0===o&&(o=s.getResponseHeader("Content-Length")),i({total:o,loaded:s.responseText.length}))},s.open("GET",e,!0),s.send(null)}else alert("Don't know how to parse XML!")},parse:t,applySkin:o,geometries:St,options:Ot}}n.d(e,"b",function(){return rt}),n.d(e,"a",function(){return St}),n.d(e,"c",function(){return N}),n.d(e,"f",function(){return T}),n.d(e,"d",function(){return Mt}),n.d(e,"e",function(){return Q}),n.d(e,"g",function(){return S});var u=n(10),h=n(35),d=(n.n(h),n(73)),f=n(155),p=(n.n(f),n(74)),g=n(180),m=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),w={NONE:"none",VISIBLE:"visible",TRANSPARENT:"transparent"},_=new u.Vector3,x=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"setFromObject",value:function(t){var e=this;return this.makeEmpty(),t.updateMatrixWorld(!0),t.traverseVisible(function(t){var n=t.geometry;if(void 0!==n)if(n.isGeometry)for(var i=n.vertices,r=0,o=i.length;r<o;r++)_.copy(i[r]),_.applyMatrix4(t.matrixWorld),e.expandByPoint(_);else if(n.isBufferGeometry){var s=n.attributes.position;if(void 0!==s)for(var a=0,c=s.count;a<c;a++)_.fromBufferAttribute(s,a).applyMatrix4(t.matrixWorld),e.expandByPoint(_)}}),this}}]),e}(u.Box3),E={AdsumObject3D:"AdsumObject3D",BuildingObject:"BuildingObject",FloorObject:"FloorObject",LabelImageObject:"LabelImageObject",LabelObject:"LabelObject",LabelTextObject:"LabelTextObject",SiteObject:"SiteObject",SpaceObject:"SpaceObject",PathSectionObject:"PathSectionObject",UserObject:"UserObject"},A=new x,C=function(){function t(){r(this,t),this.id=null,this.isAdsumObject=!0,this._mesh=null,this._levelOfDetails=null,this.placeId=null}return b(t,null,[{key:"_createFromMesh",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),i=new this;return i.id=n,i._setMesh(t),e.levelOfDetails&&(i._levelOfDetails=e.levelOfDetails),e.placeId&&null!==e.placeId?i.placeId=e.placeId:i.placeId=Symbol("AdsumMapPlaceId"),i._mesh.onBeforeRender=i._onBeforeRender.bind(i),i}}]),b(t,[{key:"getType",value:function(){return E.AdsumObject3D}},{key:"_setMesh",value:function(t){return null!==this._mesh&&(this._mesh.adsumObject=null),this._mesh=t,this._mesh.adsumObject=this,this}},{key:"setDisplayMode",value:function(t){switch(t){case w.NONE:this._mesh.visible=!1;break;case w.VISIBLE:this._mesh.visible=!0,void 0!==this._mesh.material&&(this._mesh.material.visible=!0);break;case w.TRANSPARENT:if(this._mesh.visible=!0,void 0===this._mesh.material)throw new Error("AdsumWebMap.AdsumObject3D: DisplayMode transparent is not supported with the current object");this._mesh.material.visible=!1;break;default:throw new Error("Unexpected")}}},{key:"getDisplayMode",value:function(){return this._mesh.visible&&void 0!==this._mesh.material?this._mesh.material.visible?w.VISIBLE:w.TRANSPARENT:w.NONE}},{key:"moveTo",value:function(t,e,n){this._mesh.position.x=t,this._mesh.position.y=e,this._mesh.position.z=n}},{key:"moveBy",value:function(t,e,n){this._mesh.position.x+=t,this._mesh.position.y+=e,this._mesh.position.z+=n}},{key:"getSizeAndCenter",value:function(){var t=this;if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]){A.makeEmpty();var e=this._mesh.geometry.vertices,n=new u.Vector3;e.forEach(function(e){n.copy(e),n.applyMatrix4(t._mesh.matrixWorld),A.expandByPoint(n)})}else A.setFromObject(this._mesh);var i=new u.Vector3,r=new u.Vector3;return A.getCenter(i),A.getSize(r),{size:r,center:i}}},{key:"rotateZ",value:function(t){this._mesh.rotateZ(t)}},{key:"update",value:function(){this._mesh.matrixAutoUpdate||this._mesh.updateMatrix(),this._mesh.updateMatrixWorld()}},{key:"_applyLod",value:function(t){null!==this._levelOfDetails&&this._levelOfDetails.applyLod(this,t)}},{key:"_onBeforeRender",value:function(t,e,n,i,r,o){}},{key:"_raycast",value:function(t,e){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!1===this._mesh.visible)return!1;if(void 0===this._mesh.material||this._mesh.material.visible){var n=[];if(this._mesh.raycast(t,n),1===n.length){var i=n[0];e.push({object:this,distance:i.distance,position:this._mesh.worldToLocal(i.point)})}}return!0}},{key:"_addChild",value:function(t){this._mesh.add(t._mesh)}},{key:"_dispose",value:function(){var t=function(t){t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&(Object.keys(t.material).forEach(function(e){var n=t.material[e];null!==n&&"object"===n&&n.dispose&&n.dispose()}),t.material.dispose&&t.material.dispose())};this._mesh.traverse(t),t(this._mesh),null!==this._mesh.parent&&this._mesh.parent.remove(this._mesh)}}]),t}(),S=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isUser=!0,t.parent=null,t}return s(e,t),b(e,null,[{key:"createDefault",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),i=new u.RingGeometry(t/2,t/2-t/8,32);i.merge(new u.CircleGeometry(t/8,16));var r=new u.MeshBasicMaterial({color:769978,side:u.DoubleSide});r.transparent=!0;var o=new u.Mesh(i,r);return this._createFromMesh(o,e,n)}}]),b(e,[{key:"getType",value:function(){return E.UserObject}}]),e}(C),M=function(){function t(){r(this,t),this.site=null,this.buildings=new Map,this.floors=new Map,this.spaces=new Map,this.labels=new Map,this.user=null,this.pathSectionObjects=new Map}return b(t,[{key:"init",value:function(t,e){this.site=t.site,this.buildings=t.buildingsMap,this.floors=t.floorsMap,this.spaces=t.spacesMap,this.labels=t.labelsMap,this.user=S.createDefault(e.meterToAdsumDistance(3),{placeId:Symbol("UserPlace")},Symbol("UserPositionId"))}},{key:"getFloor",value:function(t){return this.floors.has(t)?this.floors.get(t):null}},{key:"getBuilding",value:function(t){return this.buildings.has(t)?this.buildings.get(t):null}},{key:"getSpace",value:function(t){return this.spaces.has(t)?this.spaces.get(t):null}},{key:"getLabel",value:function(t){return this.labels.has(t)?this.labels.get(t):null}}]),t}(),T={floor:{didChanged:"scene.floor.didChanged"}},k=function(t){function e(t){var n;return r(this,e),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.awm=t,n.scene=null,n.currentFloor=null,n}return s(e,t),b(e,[{key:"init",value:function(t){this.scene=t.scene,t.site.setDisplayMode(w.VISIBLE),t.buildingsMap.forEach(function(t){t.setDisplayMode(w.VISIBLE)}),t.floorsMap.forEach(function(t){t.setDisplayMode(w.NONE)}),this.currentFloor=null}},{key:"getCurrentFloor",value:function(){return this.currentFloor}},{key:"setCurrentFloor",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t===this.currentFloor?Promise.resolve():new Promise(function(i,r){try{n&&console.warn("AdsumWebMap.SceneManager.setCurrentFloor: animated parameter is not supported yet"),null===e.currentFloor?(e.awm.objectManager.site.setDisplayMode(w.TRANSPARENT),e.awm.objectManager.buildings.forEach(function(t){t.setDisplayMode(w.TRANSPARENT)})):e.currentFloor.setDisplayMode(w.NONE),null===t?(e.awm.objectManager.site.setDisplayMode(w.VISIBLE),e.awm.objectManager.buildings.forEach(function(t){t.setDisplayMode(w.VISIBLE)})):t.setDisplayMode(w.VISIBLE);var o=e.currentFloor;e.currentFloor=t,e.dispatchEvent({type:T.floor.didChanged,previous:o,current:t}),i()}catch(t){r(t)}})}}]),e}(u.EventDispatcher),F=function(){function t(e,n){r(this,t),this.awm=e,this.options=n,this.container=n.container,this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.renderer=new u.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:n.gpuPower,canvas:this.canvas,logarithmicDepthBuffer:!0}),this.renderer.capabilities.logarithmicDepthBuffer=null!==this.renderer.extensions.get("EXT_frag_depth"),this.container.appendChild(this.canvas),this.options.shadowEnabled&&(this.renderer.shadowMap.type=u.PCFSoftShadowMap,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.needsUpdate=!0),this.renderer.setClearColor(this.options.clearColor),this._animationFrameId=null,this._animationFrameIdTween=null}return b(t,[{key:"init",value:function(){this.options.autoCompileMaterials&&this.compileMaterials(),this._resizeCanvas()}},{key:"compileMaterials",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.renderer.compile(this.awm.sceneManager.scene,this.awm.cameraManager.camera),e&&this.renderer.domElement.addEventListener("webglcontextrestored",function(){t.compileMaterials(!1)},!1)}},{key:"start",value:function(){this._resizeCanvas(),this._animationFrameId=requestAnimationFrame(this.start.bind(this)),Object(h.update)(),this.awm.cameraManager.control.update(),this._updateLevelOfDetails(this.awm.cameraManager.camera),this.renderer.render(this.awm.sceneManager.scene,this.awm.cameraManager.camera)}},{key:"_updateLevelOfDetails",value:function(t){var e=this,n=this.awm.objectManager.site;n._applyLod(t),n.getDisplayMode()!==w.NONE&&(n.buildings.forEach(function(n){return e._updateLevelOfDetailsOnBuilding(n,t)}),n.spaces.forEach(function(n){return e._updateLevelOfDetailsOnSpace(n,t)}),n.labels.forEach(function(e){return e._applyLod(t)}))}},{key:"_updateLevelOfDetailsOnBuilding",value:function(t,e){var n=this;t._applyLod(e),t.getDisplayMode()!==w.NONE&&(t.floors.forEach(function(t){return n._updateLevelOfDetailsOnFloor(t,e)}),t.labels.forEach(function(t){return t._applyLod(e)}))}},{key:"_updateLevelOfDetailsOnFloor",value:function(t,e){var n=this;t._applyLod(e),t.getDisplayMode()!==w.NONE&&(t.spaces.forEach(function(t){return n._updateLevelOfDetailsOnSpace(t,e)}),t.labels.forEach(function(t){return t._applyLod(e)}))}},{key:"_updateLevelOfDetailsOnSpace",value:function(t,e){t._applyLod(e),t.getDisplayMode()!==w.NONE&&t.labels.forEach(function(t){return t._applyLod(e)})}},{key:"_getDevicePixelRatio",value:function(){return window.devicePixelRatio||1}},{key:"_resizeCanvas",value:function(){var t=this.renderer.getSize(),e=t.width,n=t.height,i=e!==this.container.clientWidth||n!==this.container.clientHeight,r=this.renderer.getPixelRatio()!==this._getDevicePixelRatio();if((i||r)&&(i&&this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),r&&this.renderer.setPixelRatio(this._getDevicePixelRatio()),i)){var o=this.awm.cameraManager,s=o.camera,a=o.control;s.aspect=this.container.clientWidth/this.container.clientHeight,s.updateProjectionMatrix(),a.update()}}}]),t}(),O={Vector3:u.Vector3,MOUSE:u.MOUSE,Quaternion:u.Quaternion,Spherical:u.Spherical,EventDispatcher:u.EventDispatcher,Vector2:u.Vector2};O.OrbitControls=function(t,e){function n(){return Math.pow(.95,x.zoomSpeed)}function i(t){F.theta-=t}function r(t){F.phi-=t}function o(t){x.object.isPerspectiveCamera?P/=t:x.object.isOrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom*t)),x.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function s(t){x.object.isPerspectiveCamera?P*=t:x.object.isOrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom/t)),x.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function a(t){if(!1!==x.enabled){switch(t.preventDefault(),t.button){case x.mouseButtons.ORBIT:if(!1===x.enableRotate)return;!function(t){D.set(t.clientX,t.clientY)}(t),M=S.ROTATE;break;case x.mouseButtons.ZOOM:if(!1===x.enableZoom)return;!function(t){$.set(t.clientX,t.clientY)}(t),M=S.DOLLY;break;case x.mouseButtons.PAN:if(!1===x.enablePan)return;!function(t){N.set(t.clientX,t.clientY)}(t),M=S.PAN}M!==S.NONE&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",l,!1),x.dispatchEvent(A))}}function c(t){if(!1!==x.enabled)switch(t.preventDefault(),M){case S.ROTATE:if(!1===x.enableRotate)return;!function(t){B.set(t.clientX,t.clientY),I.subVectors(B,D).multiplyScalar(x.rotateSpeed);var e=x.domElement===document?x.domElement.body:x.domElement;i(2*Math.PI*I.x/e.clientWidth),r(2*Math.PI*I.y/e.clientHeight),D.copy(B),x.update()}(t);break;case S.DOLLY:if(!1===x.enableZoom)return;!function(t){z.set(t.clientX,t.clientY),H.subVectors(z,$),H.y>0?o(n()):H.y<0&&s(n()),$.copy(z),x.update()}(t);break;case S.PAN:if(!1===x.enablePan)return;!function(t){j.set(t.clientX,t.clientY),U.subVectors(j,N).multiplyScalar(x.panSpeed),G(U.x,U.y),N.copy(j),x.update()}(t)}}function l(t){!1!==x.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",l,!1),x.dispatchEvent(C),M=S.NONE)}function u(t){!1===x.enabled||!1===x.enableZoom||M!==S.NONE&&M!==S.ROTATE||(t.preventDefault(),t.stopPropagation(),x.dispatchEvent(A),function(t){t.deltaY<0?s(n()):t.deltaY>0&&o(n()),x.update()}(t),x.dispatchEvent(C))}function h(t){!1!==x.enabled&&!1!==x.enableKeys&&!1!==x.enablePan&&function(t){switch(t.keyCode){case x.keys.UP:G(0,x.keyPanSpeed),x.update();break;case x.keys.BOTTOM:G(0,-x.keyPanSpeed),x.update();break;case x.keys.LEFT:G(x.keyPanSpeed,0),x.update();break;case x.keys.RIGHT:G(-x.keyPanSpeed,0),x.update()}}(t)}function d(t){if(!1!==x.enabled){switch(t.touches.length){case 1:if(!1===x.enableRotate)return;!function(t){D.set(t.touches[0].pageX,t.touches[0].pageY)}(t),M=S.TOUCH_ROTATE;break;case 2:if(!1===x.enableZoom)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);$.set(0,i)}(t),M=S.TOUCH_DOLLY;break;case 3:if(!1===x.enablePan)return;!function(t){N.set(t.touches[0].pageX,t.touches[0].pageY)}(t),M=S.TOUCH_PAN;break;default:M=S.NONE}M!==S.NONE&&x.dispatchEvent(A)}}function f(t){if(!1!==x.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===x.enableRotate)return;if(M!==S.TOUCH_ROTATE)return;!function(t){B.set(t.touches[0].pageX,t.touches[0].pageY),I.subVectors(B,D).multiplyScalar(x.rotateSpeed);var e=x.domElement===document?x.domElement.body:x.domElement;i(2*Math.PI*I.x/e.clientWidth),r(2*Math.PI*I.y/e.clientHeight),D.copy(B),x.update()}(t);break;case 2:if(!1===x.enableZoom)return;if(M!==S.TOUCH_DOLLY)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+i*i);z.set(0,r),H.subVectors(z,$),H.y>0?s(n()):H.y<0&&o(n()),$.copy(z),x.update()}(t);break;case 3:if(!1===x.enablePan)return;if(M!==S.TOUCH_PAN)return;!function(t){j.set(t.touches[0].pageX,t.touches[0].pageY),U.subVectors(j,N).multiplyScalar(x.panSpeed),G(U.x,U.y),N.copy(j),x.update()}(t);break;default:M=S.NONE}}function p(t){!1!==x.enabled&&(x.dispatchEvent(C),M=S.NONE)}function g(t){!1!==x.enabled&&t.preventDefault()}var m,v,y,b,w;this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new O.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.panningMode=O.ScreenSpacePanning,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:O.MOUSE.LEFT,ZOOM:O.MOUSE.MIDDLE,PAN:O.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return k.phi},this.getAzimuthalAngle=function(){return k.theta},this.saveState=function(){x.target0.copy(x.target),x.position0.copy(x.object.position),x.zoom0=x.object.zoom},this.reset=function(){x.target.copy(x.target0),x.object.position.copy(x.position0),x.object.zoom=x.zoom0,x.object.updateProjectionMatrix(),x.dispatchEvent(E),x.update(),M=S.NONE},this.update=(m=new O.Vector3,v=(new O.Quaternion).setFromUnitVectors(t.up,new O.Vector3(0,1,0)),y=v.clone().inverse(),b=new O.Vector3,w=new O.Quaternion,function(){var t=x.object.position;return m.copy(t).sub(x.target),m.applyQuaternion(v),k.setFromVector3(m),x.autoRotate&&M===S.NONE&&i(2*Math.PI/60/60*x.autoRotateSpeed),k.theta+=F.theta,k.phi+=F.phi,k.theta=Math.max(x.minAzimuthAngle,Math.min(x.maxAzimuthAngle,k.theta)),k.phi=Math.max(x.minPolarAngle,Math.min(x.maxPolarAngle,k.phi)),k.makeSafe(),k.radius*=P,k.radius=Math.max(x.minDistance,Math.min(x.maxDistance,k.radius)),x.target.add(L),m.setFromSpherical(k),m.applyQuaternion(y),t.copy(x.target).add(m),x.object.lookAt(x.target),!0===x.enableDamping?(F.theta*=1-x.dampingFactor,F.phi*=1-x.dampingFactor,L.multiplyScalar(1-x.dampingFactor)):(F.set(0,0,0),L.set(0,0,0)),P=1,!!(R||b.distanceToSquared(x.object.position)>T||8*(1-w.dot(x.object.quaternion))>T)&&(x.dispatchEvent(E),b.copy(x.object.position),w.copy(x.object.quaternion),R=!1,!0)}),this.dispose=function(){x.domElement.removeEventListener("contextmenu",g,!1),x.domElement.removeEventListener("mousedown",a,!1),x.domElement.removeEventListener("wheel",u,!1),x.domElement.removeEventListener("touchstart",d,!1),x.domElement.removeEventListener("touchend",p,!1),x.domElement.removeEventListener("touchmove",f,!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",l,!1),window.removeEventListener("keydown",h,!1)};var _,x=this,E={type:"change"},A={type:"start"},C={type:"end"},S={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},M=S.NONE,T=1e-6,k=new O.Spherical,F=new O.Spherical,P=1,L=new O.Vector3,R=!1,D=new O.Vector2,B=new O.Vector2,I=new O.Vector2,N=new O.Vector2,j=new O.Vector2,U=new O.Vector2,$=new O.Vector2,z=new O.Vector2,H=new O.Vector2,V=(_=new O.Vector3,function(t,e){_.setFromMatrixColumn(e,0),_.multiplyScalar(-t),L.add(_)}),W=function(){var t=new O.Vector3;return function(e,n){switch(x.panningMode){case O.ScreenSpacePanning:t.setFromMatrixColumn(n,1);break;case O.HorizontalPanning:t.setFromMatrixColumn(n,0),t.crossVectors(x.object.up,t)}t.multiplyScalar(e),L.add(t)}}(),G=function(){var t=new O.Vector3;return function(e,n){var i=x.domElement===document?x.domElement.body:x.domElement;if(x.object.isPerspectiveCamera){var r=x.object.position;t.copy(r).sub(x.target);var o=t.length();o*=Math.tan(x.object.fov/2*Math.PI/180),V(2*e*o/i.clientHeight,x.object.matrix),W(2*n*o/i.clientHeight,x.object.matrix)}else x.object.isOrthographicCamera?(V(e*(x.object.right-x.object.left)/x.object.zoom/i.clientWidth,x.object.matrix),W(n*(x.object.top-x.object.bottom)/x.object.zoom/i.clientHeight,x.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),x.enablePan=!1)}}();x.domElement.addEventListener("contextmenu",g,!1),x.domElement.addEventListener("mousedown",a,!1),x.domElement.addEventListener("wheel",u,!1),x.domElement.addEventListener("touchstart",d,!1),x.domElement.addEventListener("touchend",p,!1),x.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",h,!1),this.update()},O.OrbitControls.prototype=Object.create(O.EventDispatcher.prototype),O.OrbitControls.prototype.constructor=O.OrbitControls,Object.defineProperties(O.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),O.ScreenSpacePanning=0,O.HorizontalPanning=1;var P=O.OrbitControls,L={UP:new u.Vector3(0,0,1),ZOOM_MIN:25,ZOOM_MAX:2e4},R=function t(){r(this,t),this.eye=new u.Vector3,this.up=L.UP.clone(),this.target=new u.Vector3,this.zoomMin=L.ZOOM_MIN,this.zoomMax=L.ZOOM_MAX},D=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){this.zoom=!0,this.fitRatio=1.5}}]),e}(d.a),B=new x,I=function(t){function e(t,n){var i;return r(this,e),i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i.awm=t,i.options=n,i.camera=new u.PerspectiveCamera(45,1,.1,5e4),i.control=null,i.floorPlane=new u.Plane,i.floorPlane.normal.set(0,0,-1),i.ray=new u.Ray,i.cameraCalibrations=new Map,i._tween=null,i}return s(e,t),b(e,[{key:"init",value:function(t){var e=this.awm.engineManager.canvas;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.near=t.meterToAdsumDistance(1),this.camera.far=t.meterToAdsumDistance(1e4),this.camera.up.set(0,0,1),this.camera.updateProjectionMatrix(),this.control=new P(this.camera,this.awm.engineManager.canvas),this.control.enableZoom=!0,this.control.enableRotate=!0,this.control.minPolarAngle=Math.PI/20,this.control.maxPolarAngle=Math.PI/2,this.control.minDistance=t.meterToAdsumDistance(5),this.control.enableZoom=!0,this.control.enableDamping=!1,this.control.enableKeys=!1,this.control.panningMode=1,this.control.mouseButtons={PAN:u.MOUSE.LEFT,ZOOM:u.MOUSE.MIDDLE,ORBIT:u.MOUSE.RIGHT}}},{key:"centerOnFloor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.reset();try{var n=null;if(this.cameraCalibrations.has(t))n=this.cameraCalibrations.get(t);else{console.warn("AdsumWebMap.CameraManager: Missing calibration for centerOnFloor");var i=null===t?this.awm.objectManager.site:t;B.setFromObject(i._mesh);var r=new u.Sphere;B.getBoundingSphere(r);var o=new u.Vector3;i._mesh.getWorldPosition(o),r.center.z=o.z,(n=new R).target.copy(r.center),n.eye.copy(r.center);var s=1.5*r.radius*Math.sin(Math.PI/4);n.eye.setZ(n.eye.z+s),n.eye.setY(n.eye.y-s)}return this.floorPlane.constant=n.target.z,this.camera.up.copy(n.up),this.goTo(n.eye,n.target,e)}catch(t){return Promise.reject(t)}}},{key:"centerOn",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.reset();try{var i,r=null;null===n?(i=this.options,r=i.centerOnOptions):r=new D(n);var o=t.getSizeAndCenter(),s=o.size,a=o.center,c=this.control.target.clone().sub(this.camera.position),l=a.clone().sub(c);if(r.zoom){var u=this.camera,h=u.aspect,d=u.fov,f=Math.max(s.x,s.y,s.z)/(2*Math.atan(Math.PI*d/360)),p=f/h,g=r.fitRatio*Math.max(f,p);g=Math.min(Math.max(g,this.control.minDistance),this.control.maxDistance);var m=c.normalize().multiplyScalar(g);l.copy(a).sub(m)}return 0!==this.control.target.z-a.z&&(c.normalize(),this.ray.origin.copy(l),this.ray.direction.copy(c),this.ray.intersectPlane(this.floorPlane,a)),this.goTo(l,a,e)}catch(t){return Promise.reject(t)}}},{key:"setCameraCalibrations",value:function(t){var e=this;this.cameraCalibrations=new Map,t.forEach(function(t,n){var i=e.awm.objectManager,r=null===n?i.site:i.getFloor(n);if(null!==r){r._mesh.updateMatrixWorld();var o=new u.Vector3;if(r._mesh.getWorldPosition(o),t.target.z!==o.z){console.warn("AdsumWebMap: invalid calibration target of "+r.id+", it's not on the floor");var s=new u.Plane;s.normal.set(0,0,-1),s.constant=o.z;var a=new u.Vector3;a.copy(t.target).sub(t.eye),a.normalize();var c=new u.Ray;c.origin.copy(t.eye),c.direction.copy(a),c.intersectPlane(s,t.target)}e.cameraCalibrations.set(null===n?null:r,t)}})}},{key:"goTo",value:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(r,o){try{if(n.reset(),i){n.control.enabled=!1;var s={positionX:n.camera.position.x,positionY:n.camera.position.y,positionZ:n.camera.position.z,targetX:n.control.target.x,targetY:n.control.target.y,targetZ:n.control.target.z};n._tween=new h.Tween(s).to({positionX:t.x,positionY:t.y,positionZ:t.z,targetX:e.x,targetY:e.y,targetZ:e.z},700).on("update",function(){n.camera.position.set(s.positionX,s.positionY,s.positionZ),n.control.target.set(s.targetX,s.targetY,s.targetZ),n.control.update()}).on("stop",function(){n._setCameraPositionAndTarget(t,e),n.control.enabled=!0,r(!1)}).on("complete",function(){n.control.enabled=!0,r(!0)}).easing(h.Easing.Quadratic.InOut).start()}n._setCameraPositionAndTarget(t,e),i||r(!0)}catch(t){o(t)}})}},{key:"reset",value:function(){return null!==this._tween&&(this._tween.stop(),this._tween=null),this}},{key:"_setCameraPositionAndTarget",value:function(t,e){this.camera.position.copy(t),this.control.target.copy(e),this.control.update()}}]),e}(u.EventDispatcher),N={click:"click",dblClick:"dblClick"},j=function(t){function e(t){var n;return r(this,e),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.awm=t,n._dragging=!1,n._mouse=new u.Vector2,n._raycaster=new u.Raycaster,n}return s(e,t),b(e,[{key:"init",value:function(){var t=this;this.awm.engineManager.canvas.addEventListener("mousemove",this._onMouseMove.bind(this));var e=new f.Manager(this.awm.engineManager.canvas);e.add(new f.Tap({event:"doubletap",threshold:10,taps:2,posThreshold:50*window.devicePixelRatio})),e.add(new f.Tap({event:"singletap",threshold:10,time:500,interval:100})),e.get("doubletap").recognizeWith("singletap"),e.get("singletap").requireFailure("doubletap"),e.on("singletap ",this._onMouseClick.bind(this)),e.on("doubletap ",this._onMouseDblClick.bind(this)),this.awm.engineManager.canvas.addEventListener("mousedown",function(){t._dragging=!0},!1),window.document.addEventListener("mouseup",function(){t._dragging=!1},!1)}},{key:"_onMouseClick",value:function(t){this._setMouseCoordinate(t),this.dispatchEvent({type:N.click,intersects:this._raycast()})}},{key:"_onMouseDblClick",value:function(t){this._setMouseCoordinate(t),this.dispatchEvent({type:N.dblClick,intersects:this._raycast()})}},{key:"_onMouseMove",value:function(){}},{key:"_setMouseCoordinate",value:function(t){var e=0,n=0;if(void 0===t.clientX&&void 0===t.clientY){var i=t.target.getBoundingClientRect();e=t.center.x-i.left,n=t.center.y-i.top}else t.offsetX||0===t.offsetX?(e=t.offsetX,n=t.offsetY):(e=t.layerX,n=t.layerY);this._mouse.set(e/this.awm.engineManager.canvas.clientWidth*2-1,-n/this.awm.engineManager.canvas.clientHeight*2+1),this._raycaster.setFromCamera(this._mouse,this.awm.cameraManager.camera),this._raycaster.near=this.awm.cameraManager.camera.near,this._raycaster.far=this.awm.cameraManager.camera.far}},{key:"_raycast",value:function(){var t=[];return this.awm.objectManager.site._raycast(this._raycaster,t),t.sort(function(t,e){return t.distance-e.distance}),t}}]),e}(u.EventDispatcher),U=function(){function t(e,n,i,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,t),this.id=e||Symbol("PathNodeId"),this.ground=n,this.links=new Set,this.utmPosition=o,this.groundPosition=i,this.isDynamic=!1,this._isGate=s}return b(t,null,[{key:"create",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new this(t,e,n,c(e,n,i),r)}},{key:"updateFromAdsumObject",value:function(t,e,n){var i=a(e),r=i.ground,o=i.groundPosition;t.ground=r,t.groundPosition=o,t.utmPosition=c(r,o,n)}},{key:"createFromAdsumObject",value:function(t,e,n){var i=a(e),r=i.ground,o=i.groundPosition;return this.create(t,r,o,n)}}]),b(t,[{key:"getLinkTo",value:function(t){var e=null;return this.links.forEach(function(n){n.to!==t&&n.from!==t||(e=n)}),e}}]),t}(),$={STANDARD:0,ONLY_DISABLED:1,NOT_DISABLED:2,CLOSED:3},z=function(){function t(e,n,i,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];r(this,t),this.id=e,this.type=n,this.from=i,this.to=o,this.bidirectional=s,this.distance=Math.sqrt(Math.pow(i.utmPosition.N-o.utmPosition.N,2)+Math.pow(i.utmPosition.E-o.utmPosition.E,2)+Math.pow(i.utmPosition.alt-o.utmPosition.alt,2))}return b(t,[{key:"isAccessible",value:function(t){return this.type===$.STANDARD||(t?this.type===$.ONLY_DISABLED:this.type===$.NOT_DISABLED)}}]),t}(),H=function(){function t(e){r(this,t),this.pathNetwork=e,this._cache=new Map,this._computing=new Map,this._symbolStrings=new Map,this._symbolIncrement=0}return b(t,[{key:"search",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._isCached(t,e,n))return this._getFromCache(t,e,n);if(this._isComputing(t,e,n))return this._getFromComputing(t,e,n);var i=Promise.resolve().then(function(){var i=new Map,r=new Set,o=new Map;for(o.set(t.id,{d:0,parent:null}),o.set(e.id,{d:1/0,parent:null}),i.set(t.id,t);i.size>0;){var s=function(){for(var t=Array.from(i.values()),s=t[0],a=1;a<t.length;a++){var c=t[a];o.get(c.id).d<o.get(s.id).d&&(s=c)}if(s===e){for(var l=[s],u=o.get(s.id),h=u.parent;null!==h;){l.push(h);h=o.get(h.id).parent}return{v:l.reverse()}}i.delete(s.id),r.add(s.id);var d=[],f=[];s.links.forEach(function(t){t.isAccessible(n)&&(t.from===s?(d.push(t.to),f.push(t.distance)):t.to===s&&t.bidirectional&&(d.push(t.from),f.push(t.distance)))});for(var p=0;p<d.length;p++){var g=d[p];if(!r.has(g.id)){i.has(g.id)||(o.set(g.id,{d:1/0,parent:null}),i.set(g.id,g));var m=o.get(s.id).d+f[p],v=o.get(g.id);m<v.d&&(v.parent=s,v.d=m)}}}();if("object"===("undefined"===typeof s?"undefined":y(s)))return s.v}return[]});return this._addToComputing(t,e,n,i),i}},{key:"_addToCache",value:function(t,e,n,i){if(!t.isDynamic&&!e.isDynamic){var r=this._getCacheKey(t,e,n);this._cache.set(r,i.map(function(t){return t.id}))}}},{key:"_getFromCache",value:function(t,e,n){var i=this,r=this._getCacheKey(t,e,n);return Promise.resolve(this._cache.get(r).map(function(t){return i.pathNetwork.nodes.get(t)}))}},{key:"_getCacheKey",value:function(t,e,n){return this._stringifyId(t.id)+":"+this._stringifyId(e.id)+(n?":pmr":"")}},{key:"_stringifyId",value:function(t){return"symbol"!=("undefined"===typeof t?"undefined":y(t))?""+t:(this._symbolStrings.has(t)||this._symbolStrings.set(t,"s"+this._symbolIncrement++),this._symbolStrings.get(t))}},{key:"_isCached",value:function(t,e,n){return this._cache.has(this._getCacheKey(t,e,n))}},{key:"_addToComputing",value:function(t,e,n,i){var r=this,o=this._getCacheKey(t,e,n);this._computing.set(o,i),i.then(function(i){r._addToCache(t,e,n,i),r._computing.delete(o)})}},{key:"_getFromComputing",value:function(t,e,n){var i=this,r=this._getCacheKey(t,e,n);return this._computing.get(r).then(function(){return i.search(t,e,n)})}},{key:"_isComputing",value:function(t,e,n){return this._computing.has(this._getCacheKey(t,e,n))}}]),t}(),V=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];r(this,t),this.from=e,this.to=i,this.ground=n,this.nodes=o,this._distance=null,this._curve=null}return b(t,[{key:"getDistance",value:function(){if(null===this._distance){this._distance=0;for(var t=0;t<this.nodes.length-1;t++){var e=this.nodes[t].getLinkTo(this.nodes[t+1]);this._distance+=e.distance}}return this._distance}},{key:"getCurve",value:function(){if(this.nodes.length<2)return null;if(null===this._curve){this._curve=[];for(var t=0;t<this.nodes.length-1;t++)this._curve.push({from:this.nodes[t].groundPosition,to:this.nodes[t+1].groundPosition})}return this._curve}},{key:"interpolate",value:function(t,e){var n=this.getCurve();if(null===n)return[];var i=t;t>this.getDistance()/3&&(console.warn("AdsumWebMap.PathSection.interpolate: short pathSection"),i=this.getDistance()/3);var r=Math.floor(this.getDistance()/i)-1,o=this.getDistance()/(r+1),s=[],a=o,c=new u.Vector3;return n.forEach(function(t){var n=t.from,i=t.to,r=e.adsumDistanceToMeter(c.subVectors(n,i).length());if(r<a)return void(a-=r);for(var l=a/r;l<=1;)c.lerpVectors(n,i,l),s.push(c.clone()),l+=o/r;a=r*(l-1)}),s}}]),t}(),W=function(){function t(e){r(this,t),this.awm=e,this.nodes=new Map,this.spaceGatesByAdsumObjectId=new Map,this.buildingGatesByAdsumObjectId=new Map,this.aStar=new H(this)}return b(t,[{key:"init",value:function(t){var e=this;t.get("nodes").forEach(function(t){var n=e._findParentAndGround(t.location),i=n.parent,r=n.ground;if(null===i)return void console.warn("AdsumWebMap.PathNetwork: invalid node");var o=new u.Vector3(t.position.x,t.position.y,t.position.z+.1),s=U.create(t.id,r,o,e.awm.projector,t.isGate);e.nodes.set(s.id,s),t.isGate&&("STORE"===t.location.type||"SHAPE"===t.location.type?(e.spaceGatesByAdsumObjectId.has(t.location.id)||e.spaceGatesByAdsumObjectId.set(t.location.id,[]),e.spaceGatesByAdsumObjectId.get(t.location.id).push(s)):"BUILDING"===t.location.type?(e.buildingGatesByAdsumObjectId.has(t.location.id)||e.buildingGatesByAdsumObjectId.set(t.location.id,[]),e.buildingGatesByAdsumObjectId.get(t.location.id).push(s)):console.warn("AdsumWebMap.PathNetwork: Invalid node gate on "+t.type+"#"+t.id))}),t.get("links").forEach(function(t){var n=e.nodes.get(t.from),i=e.nodes.get(t.to);if(void 0===n||void 0===i)return void console.warn("AdsumWebMap.PathNetwork: invalid link");var r=new z(t.id,t.type,n,i,t.bidirectional);n.links.add(r),r.bidirectional&&i.links.add(r)})}},{key:"computePath",value:function(t){var e=this,n=t.from,i=t.to;return!n.pathNode.isDynamic&&this.nodes.has(n.pathNode.id)||this.attachNodeLocation(n),!i.pathNode.isDynamic&&this.nodes.has(i.pathNode.id)||this.attachNodeLocation(i),this.aStar.search(n.pathNode,i.pathNode,t.pmr).then(function(n){e._buildPathSections(t,n)})}},{key:"attachNodeLocation",value:function(t){var e=t.pathNode,n=e.ground,i=e.groundPosition,r=null;if(t.adsumObject&&t.adsumObject.isSpace)r=this.spaceGatesByAdsumObjectId.get(t.adsumObject.id)||[];else if(t.adsumObject&&t.adsumObject.isBuilding)r=this.buildingGatesByAdsumObjectId.get(t.adsumObject.id)||[];else{r=[];var o=1/0,s=[];if(this.nodes.forEach(function(e){if(e!==t.pathNode&&e.ground===n){var i=e.groundPosition.distanceToSquared(t.pathNode.groundPosition);i<=9*o&&s.push({squareDistance:i,node:e}),i<o&&(o=i)}}),o!==1/0){s.sort(function(t,e){return t.squareDistance-e.squareDistance});var a=new u.Raycaster(n._mesh.localToWorld(i.clone())),c=[],l=[];s.forEach(function(t){var e=t.squareDistance,i=t.node;if(!(e>9*o)){a.ray.direction=n._mesh.localToWorld(i.groundPosition.clone()),a.ray.direction.sub(a.ray.origin),a.near=0,a.far=a.ray.direction.length(),a.ray.direction.normalize();for(var s=0;s<l.length;s++)if(l[s].angleTo(a.ray.direction)<Math.PI/4)return;c.length=0;for(var u=0;u<n._mesh.children.length;u++){var h=n._mesh.children[u],d=h.adsumObject;if((!d||!d.isLabel&&!d.isUser)&&(a.intersectObject(h,!1,c),0!==c.length))return}r.push(i),l.push(a.ray.direction)}})}}t.pathNode.links.forEach(function(e){e.from.links.delete(e),e.to.links.delete(e),t.pathNode.links.delete(e)}),r.forEach(function(e){var n=new z(Symbol("PathLinkId"),$.STANDARD,t.pathNode,e);t.pathNode.links.add(n),e.links.add(n)}),this.nodes.set(t.pathNode.id,t.pathNode),t.pathNode.needsUpdate=!1}},{key:"_findParentAndGround",value:function(t){var e=null,n=null;switch(t.type){case"STORE":case"SHAPE":null!==(e=this.awm.objectManager.getSpace(t.id))&&(n=e.parent);break;case"FLOOR":null!==(e=this.awm.objectManager.getFloor(t.id))&&(n=e);break;case"BUILDING":n=(e=this.awm.objectManager.getBuilding(t.id)).site;break;case"SITE":n=e=this.awm.objectManager.site;break;default:console.warn("AdsumWebMap.WayfindingManager.PathNetwork: unknown location.type "+t.type+" ")}return null===e&&console.warn("AdsumWebMap.WayfindingManager.PathNetwork: invalid location "+t.type+"#"+t.id),{parent:e,ground:n}}},{key:"_buildPathSections",value:function(t,e){if(0===e.length)throw new Error("AdsumWebMap.PathNetwork: No path found to destination");t.clear();var n=new V(t.from,t.from.pathNode.ground);t.pathSections.push(n);for(var i=0;i<e.length;i++){var r=e[i];if(n.ground!==r.ground){n.to=null,n=new V(null,r.ground),t.pathSections.push(n)}n.nodes.push(r)}n.to=t.to}}]),t}(),G=function(){function t(e,n,i){r(this,t),this.pathSectionObject=e,this.cameraManager=n,this.projector=i,this.speed=30,this.center=!0,this.tweens=[]}return b(t,[{key:"draw",value:function(){for(var t=[],e=this.pathSectionObject._mesh.children,n=0;n<e.length;n++){var i=this.projector.adsumDistanceToMeter(this.pathSectionObject.patternSpace)/this.speed*n*1e3;t.push(this._showPattern(n,i))}return this.pathSectionObject._mesh.visible=!0,this.center&&t.push(this.cameraManager.centerOn(this.pathSectionObject)),this.pathSectionObject.animations.push(this),Promise.all(t).then(function(){})}},{key:"stop",value:function(){this.tweens.forEach(function(t){t.stop()})}},{key:"_showPattern",value:function(t,e){var n=this;return new Promise(function(i,r){var o=n.pathSectionObject._mesh.children[t];o.traverse(function(t){t.material&&(t.material.opacity=0,t.material.transparent=!0)});var s=new h.Tween({opacity:0}).to({opacity:1},1e3).delay(e).easing(h.Easing.Exponential.In).on("complete",function(){o.traverse(function(t){t.material&&(t.material.opacity=1)}),i(!0)}).on("stop",function(){r(new Error("Path was stopped"))}).start();n.tweens.push(s)})}}]),t}(),q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.isLocation=!0,this.id=e,this.pathNode=n,this.adsumObject=i}return b(t,[{key:"updateFromObjectPosition",value:function(t){U.updateFromAdsumObject(this.pathNode,this.adsumObject,t)}}]),t}(),X=function(){function t(){r(this,t),this.locations=new Map,this.locationsByAdsumObject=new Map,this.projector=null,this.objectManager=null,this.pathNetwork=null,this.userLocation=null}return b(t,[{key:"init",value:function(t,e,n){var i=this;this.projector=t,this.objectManager=n,this.pathNetwork=e,n.labels.forEach(function(t){if(!t.parent.isBuilding&&!t.parent.isSpace){var e=new q(t.placeId,U.createFromAdsumObject(null,t,i.projector),t);i.locations.set(e.id,e),i.locationsByAdsumObject.set(t,e),i.pathNetwork.attachNodeLocation(e)}}),n.spaces.forEach(function(t){var e=new q(t.placeId,U.createFromAdsumObject(null,t,i.projector),t);i.locations.set(e.id,e),i.locationsByAdsumObject.set(t,e),i.pathNetwork.attachNodeLocation(e)}),n.buildings.forEach(function(t){var e=new q(t.placeId,U.createFromAdsumObject(null,t,i.projector),t);i.locations.set(e.id,e),i.locationsByAdsumObject.set(t,e),i.pathNetwork.attachNodeLocation(e)})}},{key:"createUserLocation",value:function(){if(null!==this.userLocation)throw new Error("Unexpected");this.userLocation=new q(Symbol("UserLocation"),U.createFromAdsumObject(Symbol("UserPathNode"),this.objectManager.user,this.projector),this.objectManager.user),this.userLocation.pathNode.isDynamic=!0,this.locations.set(this.userLocation.id,this.userLocation)}},{key:"get",value:function(t){return this.locations.has(t)?this.locations.get(t):null}},{key:"getByAdsumObject",value:function(t){return this.locationsByAdsumObject.has(t)?this.locationsByAdsumObject.get(t):null}}]),t}(),K={user:{position:{didChanged:"wayfinding.user.position.didChanged"}}},Y=function(t){function e(t,n){var i;return r(this,e),i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i.awm=t,i.projector=null,i.locationRepository=new X,i.pathNetwork=new W(t),i.options=n,i}return s(e,t),b(e,[{key:"init",value:function(t){this.projector=t.projector,this.pathNetwork.init(t.paths),this.options.pathBuilder.init(this.projector,this.awm.objectManager),this.locationRepository.init(this.projector,this.pathNetwork,this.awm.objectManager)}},{key:"computePath",value:function(t){return this.removePath(t),null===t.from&&(t.from=this.locationRepository.userLocation,null===t.from)?Promise.reject(new Error("AdsumWebMap.WayfindingManager: cannot compute path because user position is not set")):null===t.to&&(t.to=this.locationRepository.userLocation,null===t.to)?Promise.reject(new Error("AdsumWebMap.WayfindingManager: cannot compute path because user position is not set")):this.pathNetwork.computePath(t)}},{key:"removePath",value:function(t){var e=this;t.pathSections.forEach(function(t){e.removePathSection(t)})}},{key:"drawPathSection",value:function(t){this.removePathSection(t);var e=this.options.pathBuilder.build(t);return new G(e,this.awm.cameraManager,this.projector).draw()}},{key:"removePathSection",value:function(t){this.awm.objectManager.pathSectionObjects.forEach(function(e){e.pathSection===t&&e._dispose()})}},{key:"getUserUtmPosition",value:function(){var t=this.locationRepository.userLocation;return null===t?null:{utm:t.pathNode.utmPosition,floor:t.adsumObject.parent.isFloor?t.adsumObject.parent:null}}},{key:"getUserGpsPosition",value:function(){if(null===this.locationRepository.userLocation)return null;var t=this.getUserUtmPosition(),e=t.utm,n=t.floor;return{gps:this.projector.utmToGps(e),floor:n}}},{key:"setUserAdsumPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.x,r=t.y,o=t.z,s=null===e?this.awm.objectManager.site:e,a=this.awm.objectManager.user;return a._mesh.position.set(i,r,o),n&&s._mesh.worldToLocal(a._mesh.position),a._mesh.position.setZ(a._mesh.position.z+.1),s._addChild(a),a.parent=s,a.update(),null===this.locationRepository.userLocation?this.locationRepository.createUserLocation():this.locationRepository.userLocation.updateFromObjectPosition(this.projector),this.dispatchEvent({type:K.user.position.didChanged,floor:e}),this}},{key:"setUserGpsPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setUserAdsumPosition(this.projector.gpsToAdsum(t),e,!0)}},{key:"setUserUtmPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setUserAdsumPosition(this.projector.utmToAdsum(t),e,!0)}},{key:"getUserDistanceFromPath",value:function(t){var e=this;return Math.min.apply(Math,i(t.pathSections.map(function(t){return e.getUserDistanceFromPathSection(t)})))}},{key:"getUserDistanceFromPathSection",value:function(t){var e=this.locationRepository.userLocation;if(null===e)throw new Error("AdsumWebMap.WayfindingManager.getUserDistanceFromPathSection: no user position set");if(t.ground!==e.pathNode.ground)return 1/0;var n=new u.Vector3,i=new u.Line3,r=t.getCurve(),o=e.pathNode.groundPosition,s=1/0;return null===r?t.nodes.length>0&&(s=o.distanceTo(t.nodes[0].groundPosition)):r.forEach(function(t){var e=t.from,r=t.to;i.set(e,r),i.closestPointToPoint(o,!0,n);var a=o.distanceTo(n);a<s&&(s=a)}),this.projector.adsumDistanceToMeter(s)}}]),e}(u.EventDispatcher),Z=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.container=null,this.gpuPower="high-performance",this.autoCompileMaterials=!0,this.clearColor=16777215,this.fogEnabled=!1,this.fogRatio=0,this.fogColor=16777215,this.backgroundImage=null,this.shadowEnabled=!1,this.shadowSize=2048}}]),e}(d.a),J=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.centerOnOptions=new D,this.force2D=!1,this.zoomEnabled=!0,this.rotationEnabled=!0,this.keepInFloorBounds=!1}}]),e}(d.a),Q=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isPathSection=!0,t.pathSection=null,t.patternSpace=null,t.animations=[],t}return s(e,t),b(e,null,[{key:"_createFromPathSection",value:function(t,e,n){var i=this._createFromMesh(e);return i.pathSection=t,i.patternSpace=n,i}}]),b(e,[{key:"getType",value:function(){return E.PathSectionObject}},{key:"_dispose",value:function(){this.animations.forEach(function(t){t.stop()}),this._mesh.traverse(function(t){t.material&&t.isMaterial&&t.material.dispose()}),null!==this._mesh.parent&&this._mesh.parent.remove(this._mesh)}}]),e}(C),tt=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.patternSpace=5,this.patternSize=1,this.patternMesh=null}}]),e}(d.a),et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.projector=null,this.objectManager=null,this.options=new tt(e)}return b(t,[{key:"init",value:function(t,e){this.projector=t,this.objectManager=e}},{key:"build",value:function(t){var e=new u.Group;e.visible=!1;for(var n=t.interpolate(this.options.patternSpace,this.projector),i=0;i<n.length-1;i++){var r=n[i],o=n[i+1],s=this._createPattern();s.position.copy(r);var a=o.clone().sub(s.position),c=0;c=0===a.y?a.x>0?Math.PI/2:-Math.PI/2:Math.atan(a.x/a.y),a.y<0&&(c+=Math.PI),s.setRotationFromAxisAngle(new u.Vector3(-0,-0,-1),c),e.add(s)}var l=Q._createFromPathSection(t,e,this.options.patternSpace);return t.ground._addChild(l),l.update(),this.objectManager.pathSectionObjects.set(l.id,l),l}},{key:"_createPattern",value:function(){null===this.options.patternMesh&&(this.options.patternMesh=this._createDefaultPattern());var t=this.options.patternMesh.clone();return t.traverse(function(t){t.material&&t.material.isMaterial&&(t.material=t.material.clone())}),t}},{key:"_createDefaultPattern",value:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=64,t.height=64;var n=.5*t.height,i=.65*t.width,r=(t.width-i)/2,o=(t.height-n)/2;e.arc(t.width/2,t.height/2,35,0,2*Math.PI),e.fillStyle="#0bbfba",e.fill(),e.beginPath(),e.moveTo(r,o+n),e.lineTo(r+i/2,o),e.lineTo(r+i,o+n),e.lineTo(r+i-10,o+n),e.lineTo(r+i/2,o+2*n*10/i),e.lineTo(r+10,o+n),e.closePath(),e.fillStyle="#ffffff",e.fill(),e.lineWidth=1,e.strokeStyle="#000000",e.stroke();var s=new u.CanvasTexture(t),a=new u.MeshBasicMaterial({color:16777215,map:s,side:u.FrontSide}),c=new u.PlaneGeometry(this.projector.meterToAdsumDistance(this.options.patternSize),this.projector.meterToAdsumDistance(this.options.patternSize));return new u.Mesh(c,a)}}]),t}(),nt=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.pathBuilder=new et}}]),e}(d.a),it=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.engine=new Z,this.camera=new J,this.wayfinding=new nt,this.loader=null}}]),e}(d.a),rt=function(){function t(e){r(this,t);var n=new it(e);this.objectManager=new M,this.sceneManager=new k(this),this.engineManager=new F(this,n.engine),this.cameraManager=new I(this,n.camera),this.mouseManager=new j(this),this.wayfindingManager=new Y(this,n.wayfinding),this.deviceId=null,this.defaultFloor=null,this.loader=n.loader}return b(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this.loader=e),this.loader.load().then(function(e){return t.projector=e.projector,t.objectManager.init(e,t.projector),t.sceneManager.init(e),t.cameraManager.init(t.projector),t.engineManager.init(e),t.mouseManager.init(),t.wayfindingManager.init(e),t.setDeviceId(e.deviceId,!1)})}},{key:"start",value:function(){this.engineManager.start()}},{key:"getDeviceId",value:function(){return this.deviceId}},{key:"setDeviceId",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.deviceId=t,this.defaultFloor=null,this.loader.loadCalibration(this.deviceId).then(function(t){var i=t.cameraCalibrations,r=t.defaultFloorId,o=t.userPosition;return null!==o&&(null===o.floorId?e.wayfindingManager.setUserAdsumPosition(o.position,null,!0):e.wayfindingManager.setUserAdsumPosition(o.position,e.objectManager.getFloor(o.floorId),!0)),e.cameraManager.setCameraCalibrations(i),null!==r&&(e.defaultFloor=e.objectManager.getFloor(r)),e.sceneManager.setCurrentFloor(e.defaultFloor,n)}).then(function(){return e.cameraManager.centerOnFloor(e.defaultFloor,n)}).then(function(){})}}]),t}(),ot=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.entityManager=null,this.shadowEnabled=!1,this.shadowMapSize=2048,this.fogEnabled=!1,this.fogRatio=0,this.fogColor=16777215,this.preferAmbientOcclusion=!0,this.shapeAmbientOcclusionTopColor=16777215,this.shapeAmbientOcclusionBottomColor=8421504,this.deviceId=null}},{key:"preferLambertMaterial",value:function(){return!1}},{key:"advancedLightingEnabled",value:function(){return!0}}]),e}(d.a),st=function(){function t(e,n){var i=this;r(this,t),this.texturesByReference=new Map;var o=[p.e.TEXTURE];n&&o.push(p.e.TEXTURE_OCCLUSION),e.findBy({context:function(t){return o.includes(t)}}).forEach(function(t){i.texturesByReference.set(t.reference,t)}),this.threeLoader=new u.TextureLoader,this.regex=/\/texture\/reference\/(?:[a-f0-9]{2,3}\/)*(.*)$/}return b(t,[{key:"load",value:function(t,e,n,i){var r=this.regex.exec(t),o=t;if(null!==r){var s,a=r[1];this.texturesByReference.has(a)&&(s=this.texturesByReference.get(a),o=s.uri)}return this.threeLoader.load(o,e,n,i)}}]),t}(),at={Group:u.Group,Matrix4:u.Matrix4,Vector3:u.Vector3,Quaternion:u.Quaternion,Vector4:u.Vector4,Math:u.Math,Object3D:u.Object3D,DoubleSide:u.DoubleSide,MeshLambertMaterial:u.MeshLambertMaterial,MeshBasicMaterial:u.MeshBasicMaterial,MeshPhongMaterial:u.MeshPhongMaterial,FrontSide:u.FrontSide,MultiMaterial:u.MultiMaterial,SkinnedMesh:u.SkinnedMesh,Mesh:u.Mesh,Line:u.Line,PerspectiveCamera:u.PerspectiveCamera,DirectionalLight:u.DirectionalLight,PointLight:u.PointLight,SpotLight:u.SpotLight,AmbientLight:u.AmbientLight,Geometry:u.Geometry,Vector2:u.Vector2,Color:u.Color,Face3:u.Face3,Loader:u.Loader,Texture:u.Texture,MirroredRepeatWrapping:u.MirroredRepeatWrapping,RepeatWrapping:u.RepeatWrapping,ClampToEdgeWrapping:u.ClampToEdgeWrapping,MixOperation:u.MixOperation,ImageLoader:u.ImageLoader,Scene:u.Scene},ct=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isSite=!0,t.buildings=new Set,t.spaces=new Set,t.labels=new Set,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.SiteObject}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(e=n,i=e.x,r=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.LabelObject#addLabel: Changing labelObject parent is not supported yet.");t.parent=this,this.labels.add(t),t.moveTo(i,r,o),this._mesh.add(t._mesh),t.update()}},{key:"_raycast",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,i)&&(i&&(this.buildings.forEach(function(e){e._raycast(t,n,i)}),this.labels.forEach(function(e){e._raycast(t,n,i)}),this.spaces.forEach(function(e){e._raycast(t,n,i)})),!0)}}]),e}(C),lt=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isBuilding=!0,t.site=null,t.floors=new Set,t.labels=new Set,t._labelGroup=new u.Group,t._initialColor=null,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.BuildingObject}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(e=n,i=e.x,r=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.SpaceObject#addLabel: Changing labelObject parent is not supported yet.");return t.parent=this,this.labels.add(t),t.moveTo(i,r,o),this._labelGroup.add(t._mesh),this.update(),this}},{key:"setColor",value:function(t){return this._mesh.material.color.set(t),this}},{key:"isInitialColor",value:function(){return this._initialColor.equals(this._mesh.material.color)}},{key:"resetColor",value:function(){return this._mesh.material.color.copy(this._initialColor),this}},{key:"_setMesh",value:function(t){return v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setMesh",this).call(this,t),this._mesh.add(this._labelGroup),this._updateLabelGroup(),this._initialColor=this._mesh.material.color.clone(),this}},{key:"_raycast",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,i)&&(i&&(this.floors.forEach(function(e){e._raycast(t,n,i)}),this.labels.forEach(function(e){e._raycast(t,n,i)})),!0)}},{key:"_updateLabelGroup",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=this.getSizeAndCenter(!1),n=t.size;this._labelGroup.position.setZ(n.z),this._labelGroup.updateMatrixWorld()}}]),e}(C),ut=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isFloor=!0,t.building=null,t.spaces=new Set,t.labels=new Set,t.altitude=null,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.FloorObject}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(e=n,i=e.x,r=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.LabelObject#addLabel: Changing labelObject parent is not supported yet.");t.parent=this,this.labels.add(t),t.moveTo(i,r,o),this._mesh.add(t._mesh),t.update()}},{key:"_raycast",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,i)&&(i&&(this.spaces.forEach(function(e){e._raycast(t,n,i)}),this.labels.forEach(function(e){e._raycast(t,n,i)})),!0)}}]),e}(C),ht=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isSpace=!0,t.parent=null,t.labels=new Set,t._labelGroup=new u.Group,t._initialColor=null,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.SpaceObject}},{key:"_setMesh",value:function(t){return v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setMesh",this).call(this,t),this._mesh.add(this._labelGroup),this._updateLabelGroup(),this._initialColor=this._mesh.material.color.clone(),this}},{key:"setColor",value:function(t){return this._mesh.material.color.set(t),this}},{key:"isInitialColor",value:function(){return this._initialColor.equals(this._mesh.material.color)}},{key:"resetColor",value:function(){return this._mesh.material.color.copy(this._initialColor),this}},{key:"isBounced",value:function(){return 1!==this._mesh.scale.z}},{key:"getBounceFactor",value:function(){return this._mesh.scale.z}},{key:"bounceUp",value:function(t){return this._mesh.scale.setZ(t),this.update(),this}},{key:"bounceDown",value:function(){return this.bounceUp(1)}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(e=n,i=e.x,r=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.SpaceObject#addLabel: Changing labelObject parent is not supported yet.");return t.parent=this,this.labels.add(t),t.moveTo(i,r,o),this._labelGroup.add(t._mesh),this.update(),this}},{key:"_raycast",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,i)&&(i&&this.labels.forEach(function(e){e._raycast(t,n,i)}),!0)}},{key:"update",value:function(){this._labelGroup.scale.z!==1/this.getBounceFactor()&&this._updateLabelGroup(),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"_updateLabelGroup",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=this.getSizeAndCenter(!1),n=t.size;this._labelGroup.scale.setZ(1/this.getBounceFactor()),this._labelGroup.position.setZ(n.z/this.getBounceFactor()),this._labelGroup.updateMatrixWorld()}}]),e}(C),dt=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,t),this.scene=null,this.site=null,this.buildingsMap=new Map,this.floorsMap=new Map,this.spacesMap=new Map,this.labelsMap=new Map,this.deviceId=e,this.projector=null,this.paths=null},ft={BILLBOARD:"BILLBOARD",STATIC:"STATIC",FLIP:"FLIP"},pt=new u.Vector3,gt=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isLabel=!0,t.parent=null,t.orientationMode=ft.BILLBOARD,t.autoScale=!1,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.LabelObject}},{key:"_onBeforeRender",value:function(t,n,i,r,o,s){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onBeforeRender",this).call(this,t,n,i,r,o,s);var a=!1;this.orientationMode===ft.BILLBOARD&&(this._mesh.quaternion.setFromRotationMatrix(this._mesh.parent.matrixWorld).inverse(),this._mesh.quaternion.multiply(i.quaternion).normalize(),a=!0);var c=new u.Vector3;this._mesh.getWorldPosition(c);var l=pt.subVectors(i.position,c).length();if(this.autoScale){var h=Math.tan(i.fov*Math.PI/180/2)*l/1e3;this.orientationMode===ft.BILLBOARD?(this._mesh.geometry.computeBoundingBox(),this._mesh.position.z-=this._mesh.geometry.boundingBox.max.y*this._mesh.scale.z,this._mesh.scale.set(h,h,h),this._mesh.position.z+=this._mesh.geometry.boundingBox.max.y*this._mesh.scale.z):this._mesh.scale.set(h,h,1)}a&&this._mesh.updateMatrixWorld()}}]),e}(C),mt=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isLabelImage=!0,t.width=null,t.height=null,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.LabelImageObject}}],[{key:"create",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Symbol("AdsumObjectId"),o=i.width,s=i.height,a=i.orientationMode,c=i.autoScale;return new Promise(function(e,i){n.load(t,function(t){e(new u.MeshBasicMaterial({color:16777215,side:u.FrontSide,map:t,transparent:!0,depthWrite:!1}))},void 0,i)}).then(function(t){var n=new u.PlaneGeometry(o,s),l=new u.Mesh(n,t),h=e._createFromMesh(l,i,r);if(a)switch(a){case ft.BILLBOARD:case ft.STATIC:h.orientationMode=a;break;default:console.warn("AdsumWebMap.LabelImageObject#create: Unsupported orientation mode "+a)}return c&&(h.autoScale=!0),h})}}]),e}(gt),vt=new Map,yt={TEXTURE_OVERSAMPLING:5,BACKGROUND_PADDING:10,LINE_HEIGHT_INTERVAL:1.25,renderOnTexture:function(t,e){var n=null;null===n&&(n=document.createElement("canvas"));var i=e.font,r=e.size,o=e.color,s=e.backgroundColor,a=r+"pt "+(void 0===i?"Arial":i),c=yt.getFontHeight(a),l=t.length*c,h=n.getContext("2d");h.textBaseline="hanging",h.textAlign="center",h.font=a;var d=0;t.forEach(function(t){d=Math.max(d,h.measureText(t).width)}),n.width=5*(d+10),n.height=5*(l+10),h.clearRect(0,0,n.width,n.height),s&&(h.fillStyle="rgba("+255*s.r+","+255*s.g+","+255*s.b+",0.7)",yt.fillRectRounded(h,0,0,n.width,n.height,20)),h.scale(5,5),h.textBaseline="hanging",h.font=a,h.textAlign="center",h.fillStyle="rgb("+255*o.r+","+255*o.g+","+255*o.b+")";for(var f=(c-c/1.25)/2,p=0;p<t.length;p++)h.fillText(t[p],Math.round(5+d/2),Math.round(p*c+(p+1)*f+5));var g=new u.CanvasTexture(n);return g.needsUpdate=!0,g},getFontHeight:function(t){if(vt.has(t))return vt.get(t);var e=null;null===e&&(e=document.createElement("canvas")),e.width=1e3,e.height=500;var n=e.getContext("2d");n.fillStyle="black",n.fillRect(0,0,e.width,e.height),n.textBaseline="top",n.fillStyle="white",n.font=t,n.fillText("gM",0,e.height/2);for(var i=n.getImageData(0,0,e.width,e.height).data,r=-1,o=-1,s=0;s<e.height;s++)for(var a=0;a<e.width;a++)if(0!==i[4*(s*e.width+a)]){-1===r&&(r=s),o=s+1;break}var c=1.25*(o-r);return vt.set(t,c),c},fillRectRounded:function(t,e,n,i,r,o){t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadraticCurveTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+r-o),t.quadraticCurveTo(e+i,n+r,e+i-o,n+r),t.lineTo(e+o,n+r),t.quadraticCurveTo(e,n+r,e,n+r-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}},bt=function(t){function e(){var t;return r(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isLabelText=!0,t}return s(e,t),b(e,[{key:"getType",value:function(){return E.LabelTextObject}}],[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),i=t.split("\n"),r=yt.renderOnTexture(i,e),o=new u.PlaneGeometry(r.image.width/yt.TEXTURE_OVERSAMPLING,r.image.height/yt.TEXTURE_OVERSAMPLING),s=new u.MeshBasicMaterial({color:16777215,map:r,side:u.FrontSide,transparent:!0,depthWrite:!1}),a=this._createFromMesh(new u.Mesh(o,s),e,n);if(e.orientationMode)switch(e.orientationMode){case ft.BILLBOARD:case ft.STATIC:a.orientationMode=e.orientationMode;break;default:console.warn("AdsumWebMap.LabelImageObject#create: Unsupported orientation mode "+e.orientationMode)}return e.autoScale&&(a.autoScale=!0),a}}]),e}(gt),wt=new u.Vector3,_t=function(){function t(){r(this,t),this.levels=new Map,this.active=!0,this.currentLevel=null,this.currentDistance=null}return b(t,[{key:"addLevelState",value:function(t,e){this.levels.set(t,e)}},{key:"applyLod",value:function(t,e){if(this.active){var n=new u.Vector3,i=new u.Vector3;e.getWorldPosition(n),t._mesh.getWorldPosition(i),wt.subVectors(n,i);var r=wt.length();if(this.currentDistance!==r){var o=null,s=null;this.levels.forEach(function(t,e){e>r||null!==s&&e<s||(o=t,s=e)}),null!==s?(this.currentDistance=r,s!==this.currentLevel&&o.apply(t)):console.warn("AdsumWebMap.LevelOfDetails: cannot find LevelState matching, make sure you have a default one which startAt 0")}}}}]),t}(),xt=function(){function t(){r(this,t)}return b(t,[{key:"apply",value:function(t){}}]),t}(),Et=function(t){function e(t){var n;return r(this,e),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.displayMode=t,n}return s(e,t),b(e,[{key:"apply",value:function(t){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"apply",this).call(this,t),t.setDisplayMode(this.displayMode)}}]),e}(xt),At=new u.Vector3,Ct=function(){function t(e,n,i){r(this,t),this.matrix=new u.Matrix4,this.inverseMatrix=null,this.matrix.set(e[0],e[1],0,n[0],e[3],e[4],0,n[1],0,0,1,0,0,0,0,1);var o=new u.Vector3;o.setFromMatrixScale(this.matrix),this.scale=(o.x+o.y)/2;var s=g.a.fromDegree(i.latitude,i.longitude,0);this.utmGridZone=new g.d(s)}return b(t,null,[{key:"createFake",value:function(){return new this([1,0,0,0,1,0],[0,0,0],{latitude:0,longitude:0})}}]),b(t,[{key:"meterToAdsumDistance",value:function(t){return t*this.scale}},{key:"adsumDistanceToMeter",value:function(t){return t/this.scale}},{key:"gpsToAdsum",value:function(t){return this.utmToAdsum(this.gpsToUtm(t))}},{key:"gpsToUtm",value:function(t){var e=t.lat,n=t.long,i=t.alt;return g.b.toUtm(g.a.fromDegree(e,n,i),this.utmGridZone)}},{key:"utmToAdsum",value:function(t){var e=t.E,n=t.N,i=t.alt,r=new u.Vector3(e,n,i);return r.applyMatrix4(this.matrix),r}},{key:"adsumToGps",value:function(t){return this.utmToGps(this.adsumToUtm(t))}},{key:"adsumToUtm",value:function(t){return null===this.inverseMatrix&&(this.inverseMatrix=new u.Matrix4,this.inverseMatrix.getInverse(this.matrix)),At.copy(t),At.applyMatrix4(this.inverseMatrix),new g.c(At.x,At.y,At.z,this.utmGridZone.hemi,this.utmGridZone.zone)}},{key:"utmToGps",value:function(t){return g.b.toGps(t)}}]),t}(),St=function(){function t(e){r(this,t),this.options=new ot(e),this.isAoMap=!0,this.result=new dt(e.deviceId),this.adsumTextureLoader=null,this._registerAdsumTextureLoader()}return b(t,[{key:"load",value:function(){var t=this;return this._startEntityManagerLoading(),this._registerAdsumTextureLoader().then(function(){return Promise.all([t._loadCollada(),t._loadProjectorTransform().then(function(){return t._loadLabels()}),t._loadPaths()])}).then(function(){return t._loadLabels()}).then(function(){return t._addLabels()}).then(function(){return t.result.scene.updateMatrixWorld(!0),t.result})}},{key:"_loadCollada",value:function(){var t=this,e=this.options.entityManager.getRepository("File"),n=this.options.entityManager.getRepository("MapFile"),i=this.options.entityManager.getRepository("Place");return Promise.all([e.load(),n.load()]).then(function(){var e=t._getColladaUri();return Promise.all([t._parseCollada(e),i.load()])}).then(function(e){var n=m(e,1),r=n[0].scene;t.result.scene=r,t._parseAndTransformAdsumScene(r,i),t._adjustSceneSettings()})}},{key:"loadCalibration",value:function(t){var e=this.options.entityManager.getRepository("SiteCalibration"),n=this.options.entityManager.getRepository("FloorCalibration");return Promise.all([e.load(),n.load()]).then(function(){var i=e.findOneBy({device:function(e){return e.is(t)}}),r=null,o=null,s=new Map;if(null!==i&&(n.getList(i.floor_calibrations).forEach(function(t){var e=new R;e.eye.copy(t.eye),e.up.copy(t.up),e.target.copy(t.target),e.zoomMin=t.zoom_min||L.ZOOM_MIN,e.zoomMax=t.zoom_max||L.ZOOM_MAX;var n=-1===t.floor_id?null:t.floor_id;s.set(n,e)}),r=-1===i.start_floor?null:i.start_floor,null!==i.start_point_floor)){var a=i.start_point_floor;o={floorId:-1!==a?a:null,position:i.start_point_position}}return{cameraCalibrations:s,defaultFloorId:r,userPosition:o}})}},{key:"_loadLabels",value:function(){var t=this,e=this.options.entityManager.getRepository("CustomObject"),n=this.options.entityManager.getRepository("File");return Promise.all([e.load(),n.load()]).then(function(){var i=[];return e.getAll().forEach(function(e){var r={orientationMode:e.orientation_mode,autoScale:e.autoscale,placeId:e.place.value};if(0!==e.priority){var o=new _t;o.addLevelState(0,new Et(w.VISIBLE)),o.addLevelState(200*e.priority,new Et(w.NONE)),r.levelOfDetails=o}if(e.type===p.b.PICTO){var s=n.get(e.file);r.width=e.width,r.height=e.height,i.push(mt.create(s.uri,t.adsumTextureLoader,r,e.id))}else{var a=e.label.replace(/<br[ ]*\/?>/gi,"\n");r.font=e.font,r.size=e.font_size,r.color=new u.Color(e.font_color),r.backgroundColor=null===e.background_color?null:new u.Color(e.background_color),i.push(Promise.resolve(bt.create(a,r,e.id)))}}),Promise.all(i).then(function(e){e.forEach(function(e){t.result.labelsMap.set(e.id,e)})})})}},{key:"_startEntityManagerLoading",value:function(){this.options.entityManager.getRepository("Site").load(),this.options.entityManager.getRepository("MapFile").load(),this.options.entityManager.getRepository("File").load(),this.options.entityManager.getRepository("Place").load(),this.options.entityManager.getRepository("CustomObject").load(),this.options.entityManager.getRepository("SiteCalibration").load(),this.options.entityManager.getRepository("FloorCalibration").load()}},{key:"_registerAdsumTextureLoader",value:function(){var t=this;return this.options.entityManager.getRepository("File").load().then(function(){t.adsumTextureLoader=new st(t.options.entityManager.getRepository("File"),t.isAoMap),u.Loader.Handlers.add(t.adsumTextureLoader.regex,t.adsumTextureLoader)})}},{key:"_getColladaUri",value:function(){var t=this.options.entityManager.getRepository("File"),e=this.options.entityManager.getRepository("MapFile"),n=e.findOneBy({type:p.f.AO_DAE,file:function(t){return null!==t.value}}),i=null;if(this.isAoMap&&null!==n)i=n.file;else{var r=e.findOneBy({type:p.f.DAE,file:function(t){return null!==t.value}});if(null===r)throw new Error("AdsumWebMap.AdsumLoader: No map found");i=r.file,this.isAoMap=!1}return t.get(i).uri}},{key:"_parseCollada",value:function(t){return new Promise(function(e,n){return(new l).load(t,e,null,n)})}},{key:"_parseAndTransformAdsumScene",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t;if(!t.geometry&&!t.material&&t.children.length>0&&("Mesh"===t.children[0].type||t.children[0].isLight)){var r=t.parent;r.remove(t);var o=t.children[0];o.isLight?(o.matrix=t.matrix,o.matrix.decompose(o.position,o.quaternion,o.scale)):o.applyMatrix(t.matrix),r.add(o);for(var s=t.children.length-1;s>=0;s--){var a=t.children[s];o.add(a)}(i=o).name=t.name,i.colladaId=t.colladaId,t.dispose&&t.dispose()}var c=i.name||"";if(i.material)if(i.material.flatShading=!0,i.material.side=u.FrontSide,i.material.isMeshPhongMaterial?(i.material.emissionMap&&!i.material.map&&(i.material.map=i.material.emissionMap,i.material.emissionMap=null,i.material.color=16777215),i.material.shininess=1e-4):i.material.isMeshLambertMaterial&&i.material.emissionMap&&!i.material.map&&(i.material.map=i.material.emissionMap,i.material.emissionMap=null),i.material.lightMap)i.material=new u.MeshPhongMaterial({aoMap:i.material.lightMap,map:i.material.map,color:i.material.color});else if(this.options.preferLambertMaterial()&&i.material.isMeshPhongMaterial){for(var l=["alphaTest","blendDst","blendDstAlpha","blendEquation","blendEquationAlpha","blending","blendSrc","blendSrcAlpha","clipIntersection","clippingPlanes","clipShadows","colorWrite","depthFunc","depthTest","depthWrite","fog","lights","name","overdraw","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","precision","premultipliedAlpha","dithering","flatShading","side","transparent","vertexColors","visible","userData","alphaMap","aoMap","aoMapIntensity","color","combine","emissive","emissiveMap","emissiveIntensity","envMap","lightMap","lightMapIntensity","map","morphNormals","morphTargets","reflectivity","refractionRatio","skinning","specularMap","wireframe","wireframeLinecap","wireframeLinejoin","wireframeLinewidth"],h={},d=0;d<l.length;d++){var f=l[d];h[f]=i.material[f]}i.material=new u.MeshLambertMaterial(h)}if(c.startsWith("SITE"))this.isAoMap&&(i.rotateX(-Math.PI/2),i.updateMatrix()),this.result.site=ct._createFromMesh(i,{},-1),n=this.result.site;else if(c.startsWith("BUILDING")){var p=c.match(/BUILDING_(\d+)_.*/),g={},m=parseInt(p[1],10),v=e.findOneBy({building_id:m});null===v?console.warn("AdsumLoader: No place associated to building "+m):g.placeId=v.id;var y=lt._createFromMesh(i,g,m);y.site=n,y.site.buildings.add(y),this.result.buildingsMap.set(y.id,y),n=y}else if(c.startsWith("FLOOR")){var b=c.match(/FLOOR_(\d+)_.*/),w=ut._createFromMesh(i,{},parseInt(b[1],10));w.altitude=i.position.z,w.building=n,w.building.floors.add(w),this.result.floorsMap.set(w.id,w),n=w}else if(c.startsWith("SHAPE")||c.startsWith("STORE")){var _=c.match(/(?:SHAPE|STORE)_(\d+)_.*/),x={},E=parseInt(_[1],10),A=e.findOneBy({shape_id:E});null===A?console.warn("AdsumLoader: No place associated to space "+E):x.placeId=A.id;var C=ht._createFromMesh(i,x,E);C.parent=n,C.parent.spaces.add(C),this.result.spacesMap.set(C.id,C),n=C}for(var S=i.children.length-1;S>=0;S--)this._parseAndTransformAdsumScene(i.children[S],e,n)}},{key:"_adjustSceneSettings",value:function(){var t=this;this.result.scene.traverse(function(e){e instanceof u.Mesh&&(e.material.shininess=1e-5,t.options.shadowEnabled&&(e!==t.result.site._mesh&&(e.castShadow=!0),e.receiveShadow=!0))}),this._createLights(),this._createFog(),this.result.site._mesh.material.emissive&&this.result.site._mesh.material.emissive.set(0),this.result.site._mesh.material.shininess&&(this.result.site._mesh.material.shininess=1e-5),this.result.buildingsMap.forEach(function(e){var n=e._mesh;if(n.material&&n.material.specular&&n.material.specular.set(0,0,0),n.geometry){var i=new u.Vector3;n.geometry.computeBoundingBox(),n.geometry.boundingBox.getCenter(i),n.geometry.center(),n.geometry.translate(0,0,i.z),i.z=0,i.multiply(n.scale),i.applyQuaternion(n.quaternion),n.position.add(i),n.children.forEach(function(t){t.position.sub(i)}),n.updateMatrix(),n.updateMatrixWorld()}t._colorShapeVertices(n)}),this.result.floorsMap.forEach(function(t){t._mesh.material.emissive&&t._mesh.material.emissive.set(0),t._mesh.material.shininess&&(t._mesh.material.shininess=1e-5)}),this.result.spacesMap.forEach(function(e){var n=e._mesh;if(t._colorShapeVertices(n),n.geometry){var i=new u.Vector3;n.geometry.computeBoundingBox(),n.geometry.boundingBox.getCenter(i),n.geometry.center(),n.geometry.translate(0,0,i.z),i.z=0,i.multiply(n.scale),i.applyQuaternion(n.quaternion),n.position.add(i),n.updateMatrix(),n.updateMatrixWorld()}})}},{key:"_colorShapeVertices",value:function(t){if(this.isAoMap){var e=t.geometry,n=new u.Color(this.options.shapeAmbientOcclusionTopColor),i=new u.Color(this.options.shapeAmbientOcclusionBottomColor);e.faces.forEach(function(t){var r=n,o=n,s=n;e.vertices[t.a]&&0===e.vertices[t.a].z&&(r=i),e.vertices[t.b]&&0===e.vertices[t.b].z&&(o=i),e.vertices[t.c]&&0===e.vertices[t.c].z&&(s=i),t.vertexColors.push(r),t.vertexColors.push(o),t.vertexColors.push(s)}),e.colorsNeedUpdate=!0,t.material.vertexColors=u.VertexColors,t.material.needsUpdate=!0}}},{key:"_createLights",value:function(){var t=this.options.advancedLightingEnabled()?.5:1,e=new u.HemisphereLight(16777215,8947848,t);if(e.position.set(0,0,1),this.result.scene.add(e),e.updateMatrixWorld(),this.options.advancedLightingEnabled()){var n=new u.DirectionalLight(16777215,.2);n.position.set(1,0,0),this.result.scene.add(n),n.updateMatrixWorld();var i=new u.Box3,r=new u.Sphere;i.setFromObject(this.result.scene).getBoundingSphere(r);var o=r.radius,s=r.center.clone();s.z+=o/2,s.y+=o/2,s.x-=o/2;var a=new u.DirectionalLight(16777215,.85);a.position.copy(s),a.target.position.copy(r.center),this.options.shadowEnabled&&(a.castShadow=!0,a.shadow.camera.near=o/4,a.shadow.camera.far=2*o,a.shadow.camera.right=o,a.shadow.camera.left=-o,a.shadow.camera.top=o,a.shadow.camera.bottom=-o,a.shadow.mapSize.width=this.options.shadowMapSize,a.shadow.mapSize.height=this.options.shadowMapSize),this.result.scene.add(a.target),this.result.scene.add(a),a.updateMatrixWorld(),a.target.updateMatrixWorld()}}},{key:"_createFog",value:function(){this.options.fogEnabled&&(this.result.scene.fog=new u.FogExp2(this.options.fogColor,this.options.fogRatio))}},{key:"_addLabels",value:function(){var t=this,e=this.options.entityManager.getRepository("Place"),n=this.options.entityManager.getRepository("CustomObject");return e.load().then(function(){t.result.labelsMap.forEach(function(i){var r=n.get(i.id),o=e.get(r.place),s={x:r.offset.x,y:r.offset.y,z:r.offset.z};if(r.orientation_mode===p.a.BILLBOARD){var a=i.getSizeAndCenter(),c=a.size;s.z+=c.y/2}else s.z+=1.1;var l=r.orientation_mode===p.a.STATIC;r.rotation&&l&&i.rotateZ(r.rotation*Math.PI/180),r.permanent_display||i.setDisplayMode(w.NONE),null!==o.shape_id?t.result.spacesMap.get(o.shape_id).addLabel(i,s):null!==o.building_id?t.result.buildingsMap.get(o.building_id).addLabel(i,s):-1===o.floor_id?t.result.site.addLabel(i,{x:s.x+o.position.x,y:s.y+o.position.y,z:s.z+o.position.z}):t.result.floorsMap.get(o.floor_id).addLabel(i,{x:s.x+o.position.x,y:s.y+o.position.y,z:s.z+o.position.z})})})}},{key:"_loadProjectorTransform",value:function(){var t=this,e=this.options.entityManager.getRepository("Site");return e.load().then(function(){var n=e.getCurrent();if(n.gps_positions.size<4||6!==n.gps_transform.size||3!==n.gps_translate.size)return console.warn("AdsumWebMap.AdsumLoader: No gps positions available, wayfinding will not be accurate (we assume world unit match meter) !!"),void(t.result.projector=Ct.createFake());t.result.projector=new Ct(Array.from(n.gps_transform),Array.from(n.gps_translate),Array.from(n.gps_positions)[0])})}},{key:"_loadPaths",value:function(){var t=this,e=this.options.entityManager.getRepository("MapFile");return e.load().then(function(){var n=e.findOneBy({type:p.f.PATH});null===n?(console.warn("AdsumWebMap.AdsumLoader: No paths found, wayfinding will not be working !"),t.result.paths=new Map,t.result.paths.set("nodes",[]),t.result.paths.set("links",[])):t.result.paths=n.paths})}}]),t}(),Mt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,t),this.from=e,this.to=n,this.pmr=i,this._distance=null,this.pathSections=[],this.computed=!1}return b(t,[{key:"getDistance",value:function(){var t=this;return this.computed?(null===this._distance&&(this._distance=0,this.pathSections.forEach(function(e){t._distance+=e.getDistance()})),this._distance):null}},{key:"clear",value:function(){this.computed=!1,this.pathSections=[],this._distance=null}}]),t}()},function(t,e,n){"use strict";function i(){}function r(t,e){this.x=t||0,this.y=e||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function a(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function c(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function l(t,e,n,i,o,s,a,u,h,d){Object.defineProperty(this,"id",{value:Fc++}),this.uuid=kc.generateUUID(),this.name="",this.image=void 0!==t?t:l.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:l.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ua,this.wrapT=void 0!==i?i:ua,this.magFilter=void 0!==o?o:ga,this.minFilter=void 0!==s?s:va,this.anisotropy=void 0!==h?h:1,this.format=void 0!==a?a:Pa,this.type=void 0!==u?u:ya,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new c,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:bc,this.version=0,this.onUpdate=null}function u(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function h(t,e,n){this.width=t,this.height=e,this.scissor=new u(0,0,t,e),this.scissorTest=!1,this.viewport=new u(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=ga),this.texture=new l(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function d(t,e,n){h.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function f(t,e,n,i,r,o,s,a,c,u,h,d){l.call(this,null,o,s,a,c,u,i,r,h,d),this.image={data:t,width:e,height:n},this.magFilter=void 0!==c?c:da,this.minFilter=void 0!==u?u:da,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function p(t,e){this.min=void 0!==t?t:new a(1/0,1/0,1/0),this.max=void 0!==e?e:new a(-1/0,-1/0,-1/0)}function g(t,e){this.center=void 0!==t?t:new a,this.radius=void 0!==e?e:0}function m(t,e){this.normal=void 0!==t?t:new a(1,0,0),this.constant=void 0!==e?e:0}function v(t,e,n,i,r,o){this.planes=[void 0!==t?t:new m,void 0!==e?e:new m,void 0!==n?n:new m,void 0!==i?i:new m,void 0!==r?r:new m,void 0!==o?o:new m]}function y(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function b(t){function e(e,n){var i=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();var s=t.FLOAT;return i instanceof Float32Array?s=t.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?s=t.UNSIGNED_SHORT:i instanceof Int16Array?s=t.SHORT:i instanceof Uint32Array?s=t.UNSIGNED_INT:i instanceof Int32Array?s=t.INT:i instanceof Int8Array?s=t.BYTE:i instanceof Uint8Array&&(s=t.UNSIGNED_BYTE),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function n(e,n,i){var r=n.array,o=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,t.STATIC_DRAW):-1===o.count?t.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(t){return t.isInterleavedBufferAttribute&&(t=t.data),s.get(t)}function r(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=s.get(e);n&&(t.deleteBuffer(n.buffer),s.delete(e))}function o(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var r=s.get(t);void 0===r?s.set(t,e(t,i)):r.version<t.version&&(n(r.buffer,t,i),r.version=t.version)}var s=new WeakMap;return{get:i,remove:r,update:o}}function w(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||w.DefaultOrder}function _(){this.mask=1}function x(){function t(){r.setFromEuler(i,!1)}function e(){i.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Bc++}),this.uuid=kc.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=x.DefaultUp.clone();var n=new a,i=new w,r=new s,l=new a(1,1,1);i.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:i},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new o},normalMatrix:{value:new c}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function E(){x.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function A(t,e,n,i,r,o){E.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function C(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new a,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new y,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function S(){Object.defineProperty(this,"id",{value:Ic+=2}),this.uuid=kc.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function M(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function T(t,e,n){M.call(this,new Int8Array(t),e,n)}function k(t,e,n){M.call(this,new Uint8Array(t),e,n)}function F(t,e,n){M.call(this,new Uint8ClampedArray(t),e,n)}function O(t,e,n){M.call(this,new Int16Array(t),e,n)}function P(t,e,n){M.call(this,new Uint16Array(t),e,n)}function L(t,e,n){M.call(this,new Int32Array(t),e,n)}function R(t,e,n){M.call(this,new Uint32Array(t),e,n)}function D(t,e,n){M.call(this,new Float32Array(t),e,n)}function B(t,e,n){M.call(this,new Float64Array(t),e,n)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function N(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function j(){Object.defineProperty(this,"id",{value:Nc+=2}),this.uuid=kc.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function U(t,e,n,i,r,o){S.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new $(t,e,n,i,r,o)),this.mergeVertices()}function $(t,e,n,i,r,o){function s(t,e,n,i,r,o,s,g,m,v,y){var b,w,_=o/m,x=s/v,E=o/2,A=s/2,C=g/2,S=m+1,M=v+1,T=0,k=0,F=new a;for(w=0;w<M;w++){var O=w*x-A;for(b=0;b<S;b++){var P=b*_-E;F[t]=P*i,F[e]=O*r,F[n]=C,u.push(F.x,F.y,F.z),F[t]=0,F[e]=0,F[n]=g>0?1:-1,h.push(F.x,F.y,F.z),d.push(b/m),d.push(1-w/v),T+=1}}for(w=0;w<v;w++)for(b=0;b<m;b++){var L=f+b+S*w,R=f+b+S*(w+1),D=f+(b+1)+S*(w+1),B=f+(b+1)+S*w;l.push(L,R,B),l.push(R,D,B),k+=6}c.addGroup(p,k,y),p+=k,f+=T}j.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var c=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var l=[],u=[],h=[],d=[],f=0,p=0;s("z","y","x",-1,-1,n,e,t,o,r,0),s("z","y","x",1,-1,n,e,-t,o,r,1),s("x","z","y",1,1,t,n,e,i,o,2),s("x","z","y",1,-1,t,n,-e,i,o,3),s("x","y","z",1,-1,t,e,n,i,r,4),s("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(d,2))}function z(t,e,n,i){S.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new H(t,e,n,i)),this.mergeVertices()}function H(t,e,n,i){j.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},t=t||1,e=e||1;var r,o,s=t/2,a=e/2,c=Math.floor(n)||1,l=Math.floor(i)||1,u=c+1,h=l+1,d=t/c,f=e/l,p=[],g=[],m=[],v=[];for(o=0;o<h;o++){var y=o*f-a;for(r=0;r<u;r++){var b=r*d-s;g.push(b,-y,0),m.push(0,0,1),v.push(r/c),v.push(1-o/l)}}for(o=0;o<l;o++)for(r=0;r<c;r++){var w=r+u*o,_=r+u*(o+1),x=r+1+u*(o+1),E=r+1+u*o;p.push(w,_,E),p.push(_,x,E)}this.setIndex(p),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(m,3)),this.addAttribute("uv",new D(v,2))}function V(){Object.defineProperty(this,"id",{value:jc++}),this.uuid=kc.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ys,this.side=ls,this.flatShading=!1,this.vertexColors=ps,this.opacity=1,this.transparent=!1,this.blendSrc=Ps,this.blendDst=Ls,this.blendEquation=Es,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zs,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(t){V.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function G(t){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function q(t,e){this.origin=void 0!==t?t:new a,this.direction=void 0!==e?e:new a}function X(t,e){this.start=void 0!==t?t:new a,this.end=void 0!==e?e:new a}function K(t,e,n){this.a=void 0!==t?t:new a,this.b=void 0!==e?e:new a,this.c=void 0!==n?n:new a}function Y(t,e){x.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new W({color:16777215*Math.random()}),this.drawMode=mc,this.updateMorphTargets()}function Z(t,e,n,i){function r(e,i,r,h){var d=i.background;null===d?o(l,u):d&&d.isColor&&(o(d,1),h=!0),(t.autoClear||h)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&d.isCubeTexture?(void 0===c&&(c=new Y(new $(1,1,1),new G({uniforms:Dc.cube.uniforms,vertexShader:Dc.cube.vertexShader,fragmentShader:Dc.cube.fragmentShader,side:us,depthTest:!0,depthWrite:!1,fog:!1})),c.geometry.removeAttribute("normal"),c.geometry.removeAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(c.geometry)),c.material.uniforms.tCube.value=d,e.push(c,c.geometry,c.material,0,null)):d&&d.isTexture&&(void 0===s&&(s=new A(-1,1,1,-1,0,1),a=new Y(new H(2,2),new W({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a.geometry)),a.material.map=d,t.renderBufferDirect(s,null,a.geometry,a.material,a,null))}function o(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var s,a,c,l=new y(0),u=0;return{getClearColor:function(){return l},setClearColor:function(t,e){l.set(t),u=void 0!==e?e:1,o(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,o(l,u)},render:r}}function J(t,e,n){function i(t){s=t}function r(e,i){t.drawArrays(s,e,i),n.update(i,s)}function o(t,i,r){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=t.attributes.position;a.isInterleavedBufferAttribute?(r=a.data.count,o.drawArraysInstancedANGLE(s,0,r,t.maxInstancedCount)):o.drawArraysInstancedANGLE(s,i,r,t.maxInstancedCount),n.update(r,s,t.maxInstancedCount)}var s;this.setMode=i,this.render=r,this.renderInstances=o}function Q(t,e,n){function i(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==n.precision?n.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var c=!0===n.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),d=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),f=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,y=!!e.get("OES_texture_float");return{getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function tt(){function t(){u.value!==i&&(u.value=i,u.needsUpdate=r>0),n.numPlanes=r,n.numIntersection=0}function e(t,e,i,r){var o=null!==t?t.length:0,s=null;if(0!==o){if(s=u.value,!0!==r||null===s){var c=i+4*o,h=e.matrixWorldInverse;l.getNormalMatrix(h),(null===s||s.length<c)&&(s=new Float32Array(c));for(var d=0,f=i;d!==o;++d,f+=4)a.copy(t[d]).applyMatrix4(h,l),a.normal.toArray(s,f),s[f+3]=a.constant}u.value=s,u.needsUpdate=!0}return n.numPlanes=o,s}var n=this,i=null,r=0,o=!1,s=!1,a=new m,l=new c,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,s){var a=0!==t.length||n||0!==r||o;return o=n,i=e(t,s,0),r=t.length,a},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,a,c,l,h,d){if(!o||null===n||0===n.length||s&&!c)s?e(null):t();else{var f=s?0:r,p=4*f,g=h.clippingState||null;u.value=g,g=e(n,l,p,d);for(var m=0;m!==p;++m)g[m]=i[m];h.clippingState=g,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function et(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function nt(t,e,n){function i(t){var r=t.target,o=a[r.id];null!==o.index&&e.remove(o.index);for(var s in o.attributes)e.remove(o.attributes[s]);r.removeEventListener("dispose",i),delete a[r.id];var l=c[r.id];l&&(e.remove(l),delete c[r.id]),l=c[o.id],l&&(e.remove(l),delete c[o.id]),n.memory.geometries--}function r(t,e){var r=a[e.id];return r||(e.addEventListener("dispose",i),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new j).setFromObject(t)),r=e._bufferGeometry),a[e.id]=r,n.memory.geometries++,r)}function o(n){var i=n.index,r=n.attributes;null!==i&&e.update(i,t.ELEMENT_ARRAY_BUFFER);for(var o in r)e.update(r[o],t.ARRAY_BUFFER);var s=n.morphAttributes;for(var o in s)for(var a=s[o],c=0,l=a.length;c<l;c++)e.update(a[c],t.ARRAY_BUFFER)}function s(n){var i=c[n.id];if(i)return i;var r=[],o=n.index,s=n.attributes;if(null!==o)for(var a=o.array,l=0,u=a.length;l<u;l+=3){var h=a[l+0],d=a[l+1],f=a[l+2];r.push(h,d,d,f,f,h)}else for(var a=s.position.array,l=0,u=a.length/3-1;l<u;l+=3){var h=l+0,d=l+1,f=l+2;r.push(h,d,d,f,f,h)}return i=new(N(r)>65535?R:P)(r,1),e.update(i,t.ELEMENT_ARRAY_BUFFER),c[n.id]=i,i}var a={},c={};return{get:r,update:o,getWireframeAttribute:s}}function it(t,e,n){function i(t){a=t}function r(t){c=t.type,l=t.bytesPerElement}function o(e,i){t.drawElements(a,i,c,e*l),n.update(i,a)}function s(t,i,r){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(a,r,c,i*l,t.maxInstancedCount),n.update(r,a,t.maxInstancedCount)}var a,c,l;this.setMode=i,this.setIndex=r,this.render=o,this.renderInstances=s}function rt(t){function e(e,n,i){switch(i=i||1,r.calls++,n){case t.TRIANGLES:r.triangles+=i*(e/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:r.triangles+=i*(e-2);break;case t.LINES:r.lines+=i*(e/2);break;case t.LINE_STRIP:r.lines+=i*(e-1);break;case t.LINE_LOOP:r.lines+=i*e;break;case t.POINTS:r.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}var i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:i,render:r,programs:null,autoReset:!0,reset:n,update:e}}function ot(t,e){return Math.abs(e[1])-Math.abs(t[1])}function st(t){function e(e,r,o,s){var a=e.morphTargetInfluences,c=a.length,l=n[r.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];n[r.id]=l}for(var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal,u=0;u<c;u++){var f=l[u];0!==f[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u))}for(var u=0;u<c;u++){var f=l[u];f[0]=u,f[1]=a[u]}l.sort(ot);for(var u=0;u<8;u++){var f=l[u];if(f){var p=f[0],g=f[1];if(g){h&&r.addAttribute("morphTarget"+u,h[p]),d&&r.addAttribute("morphNormal"+u,d[p]),i[u]=g;continue}}i[u]=0}s.getUniforms().setValue(t,"morphTargetInfluences",i)}var n={},i=new Float32Array(8);return{update:e}}function at(t,e){function n(n){var i=e.render.frame,o=n.geometry,s=t.get(n,o);return r[s.id]!==i&&(o.isGeometry&&s.updateFromObject(n),t.update(s),r[s.id]=i),s}function i(){r={}}var r={};return{update:n,dispose:i}}function ct(t,e,n,i,r,o,s,a,c,u){t=void 0!==t?t:[],e=void 0!==e?e:na,l.call(this,t,e,n,i,r,o,s,a,c,u),this.flipY=!1}function lt(){this.seq=[],this.map={}}function ut(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=zc[r];if(void 0===o&&(o=new Float32Array(r),zc[r]=o),0!==e){i.toArray(o,0);for(var s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function ht(t,e){var n=Hc[e];void 0===n&&(n=new Int32Array(e),Hc[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function dt(t,e){t.uniform1f(this.addr,e)}function ft(t,e){t.uniform1i(this.addr,e)}function pt(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function gt(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function mt(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function vt(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function yt(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(Wc.set(e.elements),t.uniformMatrix3fv(this.addr,!1,Wc))}function bt(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(Vc.set(e.elements),t.uniformMatrix4fv(this.addr,!1,Vc))}function wt(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||Uc,i)}function _t(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||$c,i)}function xt(t,e){t.uniform2iv(this.addr,e)}function Et(t,e){t.uniform3iv(this.addr,e)}function At(t,e){t.uniform4iv(this.addr,e)}function Ct(t){switch(t){case 5126:return dt;case 35664:return pt;case 35665:return gt;case 35666:return mt;case 35674:return vt;case 35675:return yt;case 35676:return bt;case 35678:case 36198:return wt;case 35680:return _t;case 5124:case 35670:return ft;case 35667:case 35671:return xt;case 35668:case 35672:return Et;case 35669:case 35673:return At}}function St(t,e){t.uniform1fv(this.addr,e)}function Mt(t,e){t.uniform1iv(this.addr,e)}function Tt(t,e){t.uniform2fv(this.addr,ut(e,this.size,2))}function kt(t,e){t.uniform3fv(this.addr,ut(e,this.size,3))}function Ft(t,e){t.uniform4fv(this.addr,ut(e,this.size,4))}function Ot(t,e){t.uniformMatrix2fv(this.addr,!1,ut(e,this.size,4))}function Pt(t,e){t.uniformMatrix3fv(this.addr,!1,ut(e,this.size,9))}function Lt(t,e){t.uniformMatrix4fv(this.addr,!1,ut(e,this.size,16))}function Rt(t,e,n){var i=e.length,r=ht(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(e[o]||Uc,r[o])}function Dt(t,e,n){var i=e.length,r=ht(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTextureCube(e[o]||$c,r[o])}function Bt(t){switch(t){case 5126:return St;case 35664:return Tt;case 35665:return kt;case 35666:return Ft;case 35674:return Ot;case 35675:return Pt;case 35676:return Lt;case 35678:return Rt;case 35680:return Dt;case 5124:case 35670:return Mt;case 35667:case 35671:return xt;case 35668:case 35672:return Et;case 35669:case 35673:return At}}function It(t,e,n){this.id=t,this.addr=n,this.setValue=Ct(e.type)}function Nt(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=Bt(e.type)}function jt(t){this.id=t,lt.call(this)}function Ut(t,e){t.seq.push(e),t.map[e.id]=e}function $t(t,e,n){var i=t.name,r=i.length;for(Gc.lastIndex=0;;){var o=Gc.exec(i),s=Gc.lastIndex,a=o[1],c="]"===o[2],l=o[3];if(c&&(a|=0),void 0===l||"["===l&&s+2===r){Ut(n,void 0===l?new It(a,t,e):new Nt(a,t,e));break}var u=n.map,h=u[a];void 0===h&&(h=new jt(a),Ut(n,h)),n=h}}function zt(t,e,n){lt.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=t.getActiveUniform(e,r),s=o.name;$t(o,t.getUniformLocation(e,s),this)}}function Ht(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Vt(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),Ht(n)),i}function Wt(t){switch(t){case bc:return["Linear","( value )"];case wc:return["sRGB","( value )"];case xc:return["RGBE","( value )"];case Ac:return["RGBM","( value, 7.0 )"];case Cc:return["RGBM","( value, 16.0 )"];case Sc:return["RGBD","( value, 256.0 )"];case _c:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Gt(t,e){var n=Wt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function qt(t,e){var n=Wt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xt(t,e){var n;switch(e){case Zs:n="Linear";break;case Js:n="Reinhard";break;case Qs:n="Uncharted2";break;case ta:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Kt(t,e,n){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jt).join("\n")}function Yt(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}function Zt(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=t.getActiveAttrib(e,r),s=o.name;n[s]=t.getAttribLocation(e,s)}return n}function Jt(t){return""!==t}function Qt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function te(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ee(t){function e(t,e){var n=Oc[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ee(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(n,e)}function ne(t){function e(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}function ie(t,e,n,i,r,o){var s=t.context,a=i.defines,c=r.vertexShader,l=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";o.shadowMapType===as?u="SHADOWMAP_TYPE_PCF":o.shadowMapType===cs&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case na:case ia:h="ENVMAP_TYPE_CUBE";break;case aa:case ca:h="ENVMAP_TYPE_CUBE_UV";break;case ra:case oa:h="ENVMAP_TYPE_EQUIREC";break;case sa:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ia:case oa:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case qs:f="ENVMAP_BLENDING_MULTIPLY";break;case Xs:f="ENVMAP_BLENDING_MIX";break;case Ks:f="ENVMAP_BLENDING_ADD"}}var p,g,m=t.gammaFactor>0?t.gammaFactor:1,v=Kt(i.extensions,o,e),y=Yt(a),b=s.createProgram();i.isRawShaderMaterial?(p=[y].filter(Jt).join("\n"),p.length>0&&(p+="\n"),g=[v,y].filter(Jt).join("\n"),g.length>0&&(g+="\n")):(p=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jt).join("\n"),g=[v,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ys?"#define TONE_MAPPING":"",o.toneMapping!==Ys?Oc.tonemapping_pars_fragment:"",o.toneMapping!==Ys?Xt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Oc.encodings_pars_fragment:"",o.mapEncoding?Gt("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Gt("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Gt("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?qt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Jt).join("\n")),c=ee(c),c=Qt(c,o),c=te(c,o),l=ee(l),l=Qt(l,o),l=te(l,o),c=ne(c),l=ne(l);var w=p+c,_=g+l,x=Vt(s,s.VERTEX_SHADER,w),E=Vt(s,s.FRAGMENT_SHADER,_);s.attachShader(b,x),s.attachShader(b,E),void 0!==i.index0AttributeName?s.bindAttribLocation(b,0,i.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(b,0,"position"),s.linkProgram(b);var A=s.getProgramInfoLog(b).trim(),C=s.getShaderInfoLog(x).trim(),S=s.getShaderInfoLog(E).trim(),M=!0,T=!0;!1===s.getProgramParameter(b,s.LINK_STATUS)?(M=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(b,s.VALIDATE_STATUS),"gl.getProgramInfoLog",A,C,S)):""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==C&&""!==S||(T=!1),T&&(this.diagnostics={runnable:M,material:i,programLog:A,vertexShader:{log:C,prefix:p},fragmentShader:{log:S,prefix:g}}),s.deleteShader(x),s.deleteShader(E);var k;this.getUniforms=function(){return void 0===k&&(k=new zt(s,b,t)),k};var F;return this.getAttributes=function(){return void 0===F&&(F=Zt(s,b)),F},this.destroy=function(){s.deleteProgram(b),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=qc++,this.code=n,this.usedTimes=1,this.program=b,this.vertexShader=x,this.fragmentShader=E,this}function re(t,e,n){function i(t){var e=t.skeleton,i=e.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,o=Math.floor((r-20)/4),s=Math.min(o,i.length);return s<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+s+"."),0):s}function r(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=bc,n===bc&&e&&(n=_c),n}var o=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(e,o,a,c,l,u,h){var d=s[e.type],f=h.isSkinnedMesh?i(h):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var g=t.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:r(g?g.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:r(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:r(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===aa||e.envMap.mapping===ca),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:r(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!c,useFog:e.fog,fogExp:c&&c.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===hs,flipSided:e.side===us,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.join()},this.acquireProgram=function(n,i,r,s){for(var a,c=0,l=o.length;c<l;c++){var u=o[c];if(u.code===s){a=u,++a.usedTimes;break}}return void 0===a&&(a=new ie(t,e,s,n,i,r),o.push(a)),a},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},this.programs=o}function oe(){function t(t){var e=r.get(t);return void 0===e&&(e={},r.set(t,e)),e}function e(t){r.delete(t)}function n(t,e,n){r.get(t)[e]=n}function i(){r=new WeakMap}var r=new WeakMap;return{get:t,remove:e,update:n,dispose:i}}function se(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ae(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ce(){function t(){r=0,o.length=0,s.length=0}function e(t,e,n,a,c){var l=i[r];void 0===l?(l={id:t.id,object:t,geometry:e,material:n,program:n.program,renderOrder:t.renderOrder,z:a,group:c},i[r]=l):(l.id=t.id,l.object=t,l.geometry=e,l.material=n,l.program=n.program,l.renderOrder=t.renderOrder,l.z=a,l.group=c),(!0===n.transparent?s:o).push(l),r++}function n(){o.length>1&&o.sort(se),s.length>1&&s.sort(ae)}var i=[],r=0,o=[],s=[];return{opaque:o,transparent:s,init:t,push:e,sort:n}}function le(){function t(t,e){var i=t.id+","+e.id,r=n[i];return void 0===r&&(r=new ce,n[i]=r),r}function e(){n={}}var n={};return{get:t,dispose:e}}function ue(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new a,color:new y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new a,direction:new a,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new a,color:new y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new a,skyColor:new y,groundColor:new y};break;case"RectAreaLight":n={color:new y,position:new a,halfWidth:new a,halfHeight:new a}}return t[e.id]=n,n}}}function he(){function t(t,o,a){for(var c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=a.matrixWorldInverse,v=0,y=t.length;v<y;v++){var b=t[v],w=b.color,_=b.intensity,x=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)c+=w.r*_,l+=w.g*_,u+=w.b*_;else if(b.isDirectionalLight){var A=e.get(b);if(A.color.copy(b.color).multiplyScalar(b.intensity),A.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(m),A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize}n.directionalShadowMap[h]=E,n.directionalShadowMatrix[h]=b.shadow.matrix,n.directional[h]=A,h++}else if(b.isSpotLight){var A=e.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),A.color.copy(w).multiplyScalar(_),A.distance=x,A.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(m),A.coneCos=Math.cos(b.angle),A.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),A.decay=0===b.distance?0:b.decay,A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize}n.spotShadowMap[f]=E,n.spotShadowMatrix[f]=b.shadow.matrix,n.spot[f]=A,f++}else if(b.isRectAreaLight){var A=e.get(b);A.color.copy(w).multiplyScalar(_),A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),s.identity(),r.copy(b.matrixWorld),r.premultiply(m),s.extractRotation(r),A.halfWidth.set(.5*b.width,0,0),A.halfHeight.set(0,.5*b.height,0),A.halfWidth.applyMatrix4(s),A.halfHeight.applyMatrix4(s),n.rectArea[p]=A,p++}else if(b.isPointLight){var A=e.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),A.color.copy(b.color).multiplyScalar(b.intensity),A.distance=b.distance,A.decay=0===b.distance?0:b.decay,A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize,A.shadowCameraNear=C.camera.near,A.shadowCameraFar=C.camera.far}n.pointShadowMap[d]=E,n.pointShadowMatrix[d]=b.shadow.matrix,n.point[d]=A,d++}else if(b.isHemisphereLight){var A=e.get(b);A.direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(m),A.direction.normalize(),A.skyColor.copy(b.color).multiplyScalar(_),A.groundColor.copy(b.groundColor).multiplyScalar(_),n.hemi[g]=A,g++}}n.ambient[0]=c,n.ambient[1]=l,n.ambient[2]=u,n.directional.length=h,n.spot.length=f,n.rectArea.length=p,n.point.length=d,n.hemi.length=g,n.hash=n.id+","+h+","+d+","+f+","+p+","+g+","+o.length}var e=new ue,n={id:Xc++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new a,r=new o,s=new o;return{setup:t,state:n}}function de(){function t(){s.length=0,a.length=0,c.length=0}function e(t){s.push(t)}function n(t){a.push(t)}function i(t){c.push(t)}function r(t){o.setup(s,a,t)}var o=new he,s=[],a=[],c=[];return{init:t,state:{lightsArray:s,shadowsArray:a,spritesArray:c,lights:o},setupLights:r,pushLight:e,pushShadow:n,pushSprite:i}}function fe(){function t(t,e){var i=t.id+","+e.id,r=n[i];return void 0===r&&(r=new de,n[i]=r),r}function e(){n={}}var n={};return{get:t,dispose:e}}function pe(t){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mc,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function ge(t){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function me(t,e,n){function i(e,n,i,r,o,s){var a=e.geometry,c=null,l=w,u=e.customDepthMaterial;if(i&&(l=_,u=e.customDistanceMaterial),u)c=u;else{var h=!1;n.morphTargets&&(a&&a.isBufferGeometry?h=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(h=a.morphTargets&&a.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var d=e.isSkinnedMesh&&n.skinning,f=0;h&&(f|=m),d&&(f|=y),c=l[f]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var p=c.uuid,g=n.uuid,v=x[p];void 0===v&&(v={},x[p]=v);var b=v[g];void 0===b&&(b=c.clone(),v[g]=b),c=b}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:E[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,i&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(r),c.nearDistance=o,c.farDistance=s),c}function s(n,r,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||c.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=e.update(n),u=n.material;if(Array.isArray(u))for(var h=l.groups,d=0,f=h.length;d<f;d++){var p=h[d],m=u[p.materialIndex];if(m&&m.visible){var v=i(n,m,a,g,o.near,o.far);t.renderBufferDirect(o,null,l,v,n,p)}}else if(u.visible){var v=i(n,u,a,g,o.near,o.far);t.renderBufferDirect(o,null,l,v,n,null)}}for(var y=n.children,b=0,w=y.length;b<w;b++)s(y[b],r,o,a)}}for(var c=new v,l=new o,d=new r,f=new r(n,n),p=new a,g=new a,m=1,y=2,b=1+(m|y),w=new Array(b),_=new Array(b),x={},E={0:us,1:ls,2:hs},A=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],C=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],S=[new u,new u,new u,new u,new u,new u],M=0;M!==b;++M){var T=0!==(M&m),k=0!==(M&y),F=new pe({depthPacking:Tc,morphTargets:T,skinning:k});w[M]=F;var O=new ge({morphTargets:T,skinning:k});_[M]=O}var P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=as,this.render=function(e,n,i){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==e.length){var r=t.context,o=t.state;o.disable(r.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var a,u=0,m=e.length;u<m;u++){var v=e[u],y=v.shadow,b=v&&v.isPointLight;if(void 0!==y){var w=y.camera;if(d.copy(y.mapSize),d.min(f),b){var _=d.x,x=d.y;S[0].set(2*_,x,_,x),S[1].set(0,x,_,x),S[2].set(3*_,x,_,x),S[3].set(_,x,_,x),S[4].set(3*_,0,_,x),S[5].set(_,0,_,x),d.x*=4,d.y*=2}if(null===y.map){var E={minFilter:da,magFilter:da,format:Pa};y.map=new h(d.x,d.y,E),y.map.texture.name=v.name+".shadowMap",w.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(v);var M=y.map,T=y.matrix;g.setFromMatrixPosition(v.matrixWorld),w.position.copy(g),b?(a=6,T.makeTranslation(-g.x,-g.y,-g.z)):(a=1,p.setFromMatrixPosition(v.target.matrixWorld),w.lookAt(p),w.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(w.projectionMatrix),T.multiply(w.matrixWorldInverse)),t.setRenderTarget(M),t.clear();for(var k=0;k<a;k++){if(b){p.copy(w.position),p.add(A[k]),w.up.copy(C[k]),w.lookAt(p),w.updateMatrixWorld();var F=S[k];o.viewport(F)}l.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),c.setFromMatrix(l),s(n,i,w,b)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}P.needsUpdate=!1}}}function ve(t,e,n,i,r,o,s,a,c){l.call(this,t,e,n,i,r,o,s,a,c),this.needsUpdate=!0}function ye(t,e,n,i,r){function o(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);u=e.createBuffer(),h=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),d=c(),f={position:e.getAttribLocation(d,"position"),uv:e.getAttribLocation(d,"uv")},p={uvOffset:e.getUniformLocation(d,"uvOffset"),uvScale:e.getUniformLocation(d,"uvScale"),rotation:e.getUniformLocation(d,"rotation"),center:e.getUniformLocation(d,"center"),scale:e.getUniformLocation(d,"scale"),color:e.getUniformLocation(d,"color"),map:e.getUniformLocation(d,"map"),opacity:e.getUniformLocation(d,"opacity"),modelViewMatrix:e.getUniformLocation(d,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(d,"projectionMatrix"),fogType:e.getUniformLocation(d,"fogType"),fogDensity:e.getUniformLocation(d,"fogDensity"),fogNear:e.getUniformLocation(d,"fogNear"),fogFar:e.getUniformLocation(d,"fogFar"),fogColor:e.getUniformLocation(d,"fogColor"),fogDepth:e.getUniformLocation(d,"fogDepth"),alphaTest:e.getUniformLocation(d,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),g=new ve(i)}function c(){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),e.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),e.compileShader(n),e.compileShader(i),e.attachShader(t,n),e.attachShader(t,i),e.linkProgram(t),t}function l(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var u,h,d,f,p,g,m=new a,v=new s,y=new a;this.render=function(r,s,a){if(0!==r.length){void 0===d&&o(),n.useProgram(d),n.initAttributes(),n.enableAttribute(f.position),n.enableAttribute(f.uv),n.disableUnusedAttributes(),n.disable(e.CULL_FACE),n.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,u),e.vertexAttribPointer(f.position,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(f.uv,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.uniformMatrix4fv(p.projectionMatrix,!1,a.projectionMatrix.elements),n.activeTexture(e.TEXTURE0),e.uniform1i(p.map,0);var c=0,b=0,w=s.fog;w?(e.uniform3f(p.fogColor,w.color.r,w.color.g,w.color.b),w.isFog?(e.uniform1f(p.fogNear,w.near),e.uniform1f(p.fogFar,w.far),e.uniform1i(p.fogType,1),c=1,b=1):w.isFogExp2&&(e.uniform1f(p.fogDensity,w.density),e.uniform1i(p.fogType,2),c=2,b=2)):(e.uniform1i(p.fogType,0),c=0,b=0);for(var _=0,x=r.length;_<x;_++){var E=r[_];E.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}r.sort(l);for(var A=[],C=[],_=0,x=r.length;_<x;_++){var E=r[_],S=E.material;if(!1!==S.visible){E.onBeforeRender(t,s,a,void 0,S,void 0),e.uniform1f(p.alphaTest,S.alphaTest),e.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(m,v,y),A[0]=y.x,A[1]=y.y,C[0]=E.center.x-.5,C[1]=E.center.y-.5;var M=0;s.fog&&S.fog&&(M=b),c!==M&&(e.uniform1i(p.fogType,M),c=M),null!==S.map?(e.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),e.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(e.uniform2f(p.uvOffset,0,0),e.uniform2f(p.uvScale,1,1)),e.uniform1f(p.opacity,S.opacity),e.uniform3f(p.color,S.color.r,S.color.g,S.color.b),e.uniform1f(p.rotation,S.rotation),e.uniform2fv(p.center,C),e.uniform2fv(p.scale,A),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),i.setTexture2D(S.map||g,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),E.onAfterRender(t,s,a,void 0,S,void 0)}}n.enable(e.CULL_FACE),n.reset()}}}function be(t,e,n){function i(){var e=!1,n=new u,i=null,r=new u(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,s,a){!0===a&&(e*=s,i*=s,o*=s),n.set(e,i,o,s),!1===r.equals(n)&&(t.clearColor(e,i,o,s),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}}function r(){var e=!1,n=null,i=null,r=null;return{setTest:function(e){e?d(t.DEPTH_TEST):f(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case js:t.depthFunc(t.NEVER);break;case Us:t.depthFunc(t.ALWAYS);break;case $s:t.depthFunc(t.LESS);break;case zs:t.depthFunc(t.LEQUAL);break;case Hs:t.depthFunc(t.EQUAL);break;case Vs:t.depthFunc(t.GEQUAL);break;case Ws:t.depthFunc(t.GREATER);break;case Gs:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function o(){var e=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null;return{setTest:function(e){e?d(t.STENCIL_TEST):f(t.STENCIL_TEST)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&o===s||(t.stencilFunc(e,n,s),i=e,r=n,o=s)},setOp:function(e,n,i){s===e&&a===n&&c===i||(t.stencilOp(e,n,i),s=e,a=n,c=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null}}}function s(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var s=0;s<i;s++)t.texImage2D(n+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}function a(){for(var t=0,e=R.length;t<e;t++)R[t]=0}function c(n){if(R[n]=1,0===D[n]&&(t.enableVertexAttribArray(n),D[n]=1),0!==B[n]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),B[n]=0}}function l(n,i){if(R[n]=1,0===D[n]&&(t.enableVertexAttribArray(n),D[n]=1),B[n]!==i){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),B[n]=i}}function h(){for(var e=0,n=D.length;e!==n;++e)D[e]!==R[e]&&(t.disableVertexAttribArray(e),D[e]=0)}function d(e){!0!==I[e]&&(t.enable(e),I[e]=!0)}function f(e){!1!==I[e]&&(t.disable(e),I[e]=!1)}function p(){if(null===N&&(N=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)N.push(n[i]);return N}function g(e){return j!==e&&(t.useProgram(e),j=e,!0)}function m(e,i,r,o,s,a,c,l){if(e!==vs?d(t.BLEND):f(t.BLEND),e!==xs){if(e!==U||l!==q)switch(e){case bs:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case ws:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case _s:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}$=null,z=null,H=null,V=null,W=null,G=null}else s=s||i,a=a||r,c=c||o,i===$&&s===V||(t.blendEquationSeparate(n.convert(i),n.convert(s)),$=i,V=s),r===z&&o===H&&a===W&&c===G||(t.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(a),n.convert(c)),z=r,H=o,W=a,G=c);U=e,q=l}function v(e,n){e.side===hs?f(t.CULL_FACE):d(t.CULL_FACE);var i=e.side===us;n&&(i=!i),y(i),!0===e.transparent?m(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):m(vs),O.setFunc(e.depthFunc),O.setTest(e.depthTest),O.setMask(e.depthWrite),F.setMask(e.colorWrite),_(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function y(e){X!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),X=e)}function b(e){e!==ts?(d(t.CULL_FACE),e!==K&&(e===es?t.cullFace(t.BACK):e===ns?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):f(t.CULL_FACE),K=e}function w(e){e!==Y&&(tt&&t.lineWidth(e),Y=e)}function _(e,n,i){e?(d(t.POLYGON_OFFSET_FILL),Z===n&&J===i||(t.polygonOffset(n,i),Z=n,J=i)):f(t.POLYGON_OFFSET_FILL)}function x(e){e?d(t.SCISSOR_TEST):f(t.SCISSOR_TEST)}function E(e){void 0===e&&(e=t.TEXTURE0+Q-1),it!==e&&(t.activeTexture(e),it=e)}function A(e,n){null===it&&E();var i=rt[it];void 0===i&&(i={type:void 0,texture:void 0},rt[it]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||at[e]),i.type=e,i.texture=n)}function C(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function S(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function M(e){!1===ot.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ot.copy(e))}function T(e){!1===st.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),st.copy(e))}function k(){for(var e=0;e<D.length;e++)1===D[e]&&(t.disableVertexAttribArray(e),D[e]=0);I={},N=null,it=null,rt={},j=null,U=null,X=null,K=null,F.reset(),O.reset(),P.reset()}var F=new i,O=new r,P=new o,L=t.getParameter(t.MAX_VERTEX_ATTRIBS),R=new Uint8Array(L),D=new Uint8Array(L),B=new Uint8Array(L),I={},N=null,j=null,U=null,$=null,z=null,H=null,V=null,W=null,G=null,q=!1,X=null,K=null,Y=null,Z=null,J=null,Q=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),tt=!1,et=0,nt=t.getParameter(t.VERSION);-1!==nt.indexOf("WebGL")?(et=parseFloat(/^WebGL\ ([0-9])/.exec(nt)[1]),tt=et>=1):-1!==nt.indexOf("OpenGL ES")&&(et=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(nt)[1]),tt=et>=2);var it=null,rt={},ot=new u,st=new u,at={};return at[t.TEXTURE_2D]=s(t.TEXTURE_2D,t.TEXTURE_2D,1),at[t.TEXTURE_CUBE_MAP]=s(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),F.setClear(0,0,0,1),O.setClear(1),P.setClear(0),d(t.DEPTH_TEST),O.setFunc(zs),y(!1),b(es),d(t.CULL_FACE),d(t.BLEND),m(ys),{buffers:{color:F,depth:O,stencil:P},initAttributes:a,enableAttribute:c,enableAttributeAndDivisor:l,disableUnusedAttributes:h,enable:d,disable:f,getCompressedTextureFormats:p,useProgram:g,setBlending:m,setMaterial:v,setFlipSided:y,setCullFace:b,setLineWidth:w,setPolygonOffset:_,setScissorTest:x,activeTexture:E,bindTexture:A,compressedTexImage2D:C,texImage2D:S,scissor:M,viewport:T,reset:k}}function we(t,e,n,i,r,o,s){function a(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n);return i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function c(t){return kc.isPowerOfTwo(t.width)&&kc.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap){void 0===F&&(F=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),F.width=kc.floorPowerOfTwo(t.width),F.height=kc.floorPowerOfTwo(t.height);return F.getContext("2d").drawImage(t,0,0,F.width,F.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+F.width+"x"+F.height,t),F}return t}function u(t){return t.wrapS!==ua||t.wrapT!==ua||t.minFilter!==da&&t.minFilter!==ga}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==da&&t.minFilter!==ga}function d(e,n,r,o){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log2(Math.max(r,o))}function f(e){return e===da||e===fa||e===pa?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),m(e),e.isVideoTexture&&delete P[e.id],s.memory.textures--}function g(t){var e=t.target;e.removeEventListener("dispose",g),v(e),s.memory.textures--}function m(e){var n=i.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}i.remove(e)}function v(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}function y(e,r){var o=i.get(e);if(e.isVideoTexture&&k(e),e.version>0&&o.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==s.complete)return void x(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function b(e,l){var u=i.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",p),u.__image__webglTextureCube=t.createTexture(),s.memory.textures++),n.activeTexture(t.TEXTURE0+l),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var f=e&&e.isCompressedTexture,g=e.image[0]&&e.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=f||g?g?e.image[v].image:e.image[v]:a(e.image[v],r.maxCubemapSize);var y=m[0],b=c(y),w=o.convert(e.format),x=o.convert(e.type);_(t.TEXTURE_CUBE_MAP,e,b);for(var v=0;v<6;v++)if(f)for(var E,A=m[v].mipmaps,C=0,S=A.length;C<S;C++)E=A[C],e.format!==Pa&&e.format!==Oa?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,C,w,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,C,w,E.width,E.height,0,w,x,E.data);else g?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,m[v].width,m[v].height,0,w,x,m[v].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,w,x,m[v]);u.__maxMipLevel=f?A.length-1:0,h(e,b)&&d(t.TEXTURE_CUBE_MAP,e,y.width,y.height),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+l),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function w(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).__webglTexture)}function _(n,s,a){var c;if(a?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(s.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(s.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(s.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),s.wrapS===ua&&s.wrapT===ua||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),t.texParameteri(n,t.TEXTURE_MAG_FILTER,f(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,f(s.minFilter)),s.minFilter!==da&&s.minFilter!==ga&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),c=e.get("EXT_texture_filter_anisotropic")){if(s.type===Aa&&null===e.get("OES_texture_float_linear"))return;if(s.type===Ca&&null===e.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function x(e,i,f){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),s.memory.textures++),n.activeTexture(t.TEXTURE0+f),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment);var g=a(i.image,r.maxTextureSize);u(i)&&!1===c(g)&&(g=l(g));var m=c(g),v=o.convert(i.format),y=o.convert(i.type);_(t.TEXTURE_2D,i,m);var b,w=i.mipmaps;if(i.isDepthTexture){var x=t.DEPTH_COMPONENT;if(i.type===Aa){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");x=t.DEPTH_COMPONENT32F}else O&&(x=t.DEPTH_COMPONENT16);i.format===Ba&&x===t.DEPTH_COMPONENT&&i.type!==_a&&i.type!==Ea&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=_a,y=o.convert(i.type)),i.format===Ia&&(x=t.DEPTH_STENCIL,i.type!==ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ka,y=o.convert(i.type))),n.texImage2D(t.TEXTURE_2D,0,x,g.width,g.height,0,v,y,null)}else if(i.isDataTexture)if(w.length>0&&m){for(var E=0,A=w.length;E<A;E++)b=w[E],n.texImage2D(t.TEXTURE_2D,E,v,b.width,b.height,0,v,y,b.data);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,g.width,g.height,0,v,y,g.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(var E=0,A=w.length;E<A;E++)b=w[E],i.format!==Pa&&i.format!==Oa?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(t.TEXTURE_2D,E,v,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,E,v,b.width,b.height,0,v,y,b.data);e.__maxMipLevel=w.length-1}else if(w.length>0&&m){for(var E=0,A=w.length;E<A;E++)b=w[E],n.texImage2D(t.TEXTURE_2D,E,v,v,y,b);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,v,y,g),e.__maxMipLevel=0;h(i,m)&&d(t.TEXTURE_2D,i,g.width,g.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function E(e,r,s,a){var c=o.convert(r.texture.format),l=o.convert(r.texture.type);n.texImage2D(a,0,c,r.width,r.height,0,c,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,s,a,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function A(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function C(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ba)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ia)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}function S(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");C(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),A(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),A(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function M(e){var r=i.get(e),o=i.get(e.texture);e.addEventListener("dispose",g),o.__webglTexture=t.createTexture(),s.memory.textures++;var a=!0===e.isWebGLRenderTargetCube,l=c(e);if(a){r.__webglFramebuffer=[];for(var u=0;u<6;u++)r.__webglFramebuffer[u]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(a){n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,l);for(var u=0;u<6;u++)E(r.__webglFramebuffer[u],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);h(e.texture,l)&&d(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),_(t.TEXTURE_2D,e.texture,l),E(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),h(e.texture,l)&&d(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function T(e){var r=e.texture;if(h(r,c(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=i.get(r).__webglTexture;n.bindTexture(o,s),d(o,r,e.width,e.height),n.bindTexture(o,null)}}function k(t){var e=t.id,n=s.render.frame;P[e]!==n&&(P[e]=n,t.update())}var F,O="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,P={};this.setTexture2D=y,this.setTextureCube=b,this.setTextureCubeDynamic=w,this.setupRenderTarget=M,this.updateRenderTargetMipmap=T}function _e(t,e){function n(n){var i;if(n===la)return t.REPEAT;if(n===ua)return t.CLAMP_TO_EDGE;if(n===ha)return t.MIRRORED_REPEAT;if(n===da)return t.NEAREST;if(n===fa)return t.NEAREST_MIPMAP_NEAREST;if(n===pa)return t.NEAREST_MIPMAP_LINEAR;if(n===ga)return t.LINEAR;if(n===ma)return t.LINEAR_MIPMAP_NEAREST;if(n===va)return t.LINEAR_MIPMAP_LINEAR;if(n===ya)return t.UNSIGNED_BYTE;if(n===Sa)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Ma)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Ta)return t.UNSIGNED_SHORT_5_6_5;if(n===ba)return t.BYTE;if(n===wa)return t.SHORT;if(n===_a)return t.UNSIGNED_SHORT;if(n===xa)return t.INT;if(n===Ea)return t.UNSIGNED_INT;if(n===Aa)return t.FLOAT;if(n===Ca&&null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===Fa)return t.ALPHA;if(n===Oa)return t.RGB;if(n===Pa)return t.RGBA;if(n===La)return t.LUMINANCE;if(n===Ra)return t.LUMINANCE_ALPHA;if(n===Ba)return t.DEPTH_COMPONENT;if(n===Ia)return t.DEPTH_STENCIL;if(n===Es)return t.FUNC_ADD;if(n===As)return t.FUNC_SUBTRACT;if(n===Cs)return t.FUNC_REVERSE_SUBTRACT;if(n===Ts)return t.ZERO;if(n===ks)return t.ONE;if(n===Fs)return t.SRC_COLOR;if(n===Os)return t.ONE_MINUS_SRC_COLOR;if(n===Ps)return t.SRC_ALPHA;if(n===Ls)return t.ONE_MINUS_SRC_ALPHA;if(n===Rs)return t.DST_ALPHA;if(n===Ds)return t.ONE_MINUS_DST_ALPHA;if(n===Bs)return t.DST_COLOR;if(n===Is)return t.ONE_MINUS_DST_COLOR;if(n===Ns)return t.SRC_ALPHA_SATURATE;if((n===Na||n===ja||n===Ua||n===$a)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(n===Na)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ja)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ua)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===$a)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===za||n===Ha||n===Va||n===Wa)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(n===za)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ha)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Va)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Wa)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ga&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===qa||n===Xa||n===Ka||n===Ya||n===Za||n===Ja||n===Qa||n===tc||n===ec||n===nc||n===ic||n===rc||n===oc||n===sc)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return n;if((n===Ss||n===Ms)&&null!==(i=e.get("EXT_blend_minmax"))){if(n===Ss)return i.MIN_EXT;if(n===Ms)return i.MAX_EXT}return n===ka&&null!==(i=e.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function xe(t,e,n,i){E.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ee(t){xe.call(this),this.cameras=t||[]}function Ae(t){function e(){if(null!==i&&i.isPresenting){var e=i.getEyeParameters("left"),r=e.renderWidth,o=e.renderHeight;b=t.getPixelRatio(),y=t.getSize(),t.setDrawingBufferSize(2*r,o,1)}else n.enabled&&t.setDrawingBufferSize(y.width,y.height,b)}var n=this,i=null,r=null,c=null,l=new o,h=new o;"undefined"!==typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData);var d=new o,f=new s,p=new a,g=new xe;g.bounds=new u(0,0,.5,1),g.layers.enable(1);var m=new xe;m.bounds=new u(.5,0,.5,1),m.layers.enable(2);var v=new Ee([g,m]);v.layers.enable(1),v.layers.enable(2);var y,b;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",e,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t)},this.setPoseTarget=function(t){void 0!==t&&(c=t)},this.getCamera=function(t){if(null===i)return t;i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(r);var e=i.stageParameters;e?l.fromArray(e.sittingToStandingTransform):l.makeTranslation(0,n.userHeight,0);var o=r.pose,s=null!==c?c:t;if(s.matrix.copy(l),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==o.orientation&&(f.fromArray(o.orientation),s.quaternion.multiply(f)),null!==o.position&&(f.setFromRotationMatrix(l),p.fromArray(o.position),p.applyQuaternion(f),s.position.add(p)),s.updateMatrixWorld(),!1===i.isPresenting)return t;g.near=t.near,m.near=t.near,g.far=t.far,m.far=t.far,v.matrixWorld.copy(t.matrixWorld),v.matrixWorldInverse.copy(t.matrixWorldInverse),g.matrixWorldInverse.fromArray(r.leftViewMatrix),m.matrixWorldInverse.fromArray(r.rightViewMatrix),h.getInverse(l),g.matrixWorldInverse.multiply(h),m.matrixWorldInverse.multiply(h);var a=s.parent;null!==a&&(d.getInverse(a.matrixWorld),g.matrixWorldInverse.multiply(d),m.matrixWorldInverse.multiply(d)),g.matrixWorld.getInverse(g.matrixWorldInverse),m.matrixWorld.getInverse(m.matrixWorldInverse),g.projectionMatrix.fromArray(r.leftProjectionMatrix),m.projectionMatrix.fromArray(r.rightProjectionMatrix),v.projectionMatrix.copy(g.projectionMatrix);var u=i.getLayers();if(u.length){var y=u[0];null!==y.leftBounds&&4===y.leftBounds.length&&g.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&m.bounds.fromArray(y.rightBounds)}return v},this.getStandingMatrix=function(){return l},this.submitFrame=function(){i&&i.isPresenting&&i.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",e)}}function Ce(t){function e(){return null===ut?xt:1}function n(){Lt=new et(ot),Lt.get("WEBGL_depth_texture"),Lt.get("OES_texture_float"),Lt.get("OES_texture_float_linear"),Lt.get("OES_texture_half_float"),Lt.get("OES_texture_half_float_linear"),Lt.get("OES_standard_derivatives"),Lt.get("OES_element_index_uint"),Lt.get("ANGLE_instanced_arrays"),Zt=new _e(ot,Lt),Rt=new Q(ot,Lt,t),Dt=new be(ot,Lt,Zt),Dt.scissor(vt.copy(At).multiplyScalar(xt)),Dt.viewport(mt.copy(Et).multiplyScalar(xt)),Bt=new rt(ot),It=new oe,Nt=new we(ot,Lt,Dt,It,Rt,Zt,Bt),jt=new b(ot),Ut=new nt(ot,jt,Bt),$t=new at(Ut,Bt),qt=new st(ot),Ht=new re(ct,Lt,Rt),Vt=new le,Wt=new fe,Gt=new Z(ct,Dt,Ut,G),Xt=new J(ot,Lt,Bt),Kt=new it(ot,Lt,Bt),Yt=new ye(ct,ot,Dt,Nt,Rt),Bt.programs=Ht.programs,ct.context=ot,ct.capabilities=Rt,ct.extensions=Lt,ct.properties=It,ct.renderLists=Vt,ct.state=Dt,ct.info=Bt}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),lt=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),lt=!1,n()}function s(t){var e=t.target;e.removeEventListener("dispose",s),c(e)}function c(t){l(t),It.remove(t)}function l(t){var e=It.get(t).program;t.program=void 0,void 0!==e&&Ht.releaseProgram(e)}function h(t,e,n){t.render(function(t){ct.renderBufferImmediate(t,e,n)})}function d(t,e,n,i){if(n&&n.isInstancedBufferGeometry&&null===Lt.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),Dt.initAttributes();var r=n.attributes,o=e.getAttributes(),s=t.defaultAttributeValues;for(var a in o){var c=o[a];if(c>=0){var l=r[a];if(void 0!==l){var u=l.normalized,h=l.itemSize,d=jt.get(l);if(void 0===d)continue;var f=d.buffer,p=d.type,g=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,v=m.stride,y=l.offset;m&&m.isInstancedInterleavedBuffer?(Dt.enableAttributeAndDivisor(c,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):Dt.enableAttribute(c),ot.bindBuffer(ot.ARRAY_BUFFER,f),ot.vertexAttribPointer(c,h,p,u,v*g,(i*v+y)*g)}else l.isInstancedBufferAttribute?(Dt.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):Dt.enableAttribute(c),ot.bindBuffer(ot.ARRAY_BUFFER,f),ot.vertexAttribPointer(c,h,p,u,0,i*h*g)}else if(void 0!==s){var b=s[a];if(void 0!==b)switch(b.length){case 2:ot.vertexAttrib2fv(c,b);break;case 3:ot.vertexAttrib3fv(c,b);break;case 4:ot.vertexAttrib4fv(c,b);break;default:ot.vertexAttrib1fv(c,b)}}}}Dt.disableUnusedAttributes()}function p(){te||(m(),te=!0)}function g(){te=!1}function m(){var t=Jt.getDevice();t&&t.isPresenting?t.requestAnimationFrame(y):window.requestAnimationFrame(y)}function y(t){!1!==te&&(ee(t),m())}function w(t,e,n){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isLight)Y.pushLight(t),t.castShadow&&Y.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!St.intersectsSprite(t)||Y.pushSprite(t);else if(t.isImmediateRenderObject)n&&Ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ft),K.push(t,null,t.material,Ot.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||St.intersectsObject(t))){n&&Ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ft);var i=$t.update(t),r=t.material;if(Array.isArray(r))for(var o=i.groups,s=0,a=o.length;s<a;s++){var c=o[s],l=r[c.materialIndex];l&&l.visible&&K.push(t,i,l,Ot.z,c)}else r.visible&&K.push(t,i,r,Ot.z,null)}for(var u=t.children,s=0,a=u.length;s<a;s++)w(u[s],e,n)}}function _(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var s=t[r],a=s.object,c=s.geometry,l=void 0===i?s.material:i,u=s.group;if(n.isArrayCamera){gt=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(a.layers.test(p.layers)){var g=p.bounds,m=g.x*wt,v=g.y*_t,y=g.z*wt,b=g.w*_t;Dt.viewport(mt.set(m,v,y,b).multiplyScalar(xt)),x(a,e,p,c,l,u)}}}else gt=null,x(a,e,n,c,l,u)}}function x(t,e,n,i,r,o){if(t.onBeforeRender(ct,e,n,i,r,o),Y=Wt.get(e,gt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var s=t.isMesh&&t.matrixWorld.determinant()<0;Dt.setMaterial(r,s);var a=A(n,e.fog,r,t);ft="",h(t,a,r)}else ct.renderBufferDirect(n,e.fog,i,r,t,o);t.onAfterRender(ct,e,n,i,r,o),Y=Wt.get(e,gt||n)}function E(t,e,n){var i=It.get(t),r=Y.state.lights,o=Y.state.shadowsArray,a=Ht.getParameters(t,r.state,o,e,Mt.numPlanes,Mt.numIntersection,n),c=Ht.getProgramCode(t,a),u=i.program,h=!0;if(void 0===u)t.addEventListener("dispose",s);else if(u.code!==c)l(t);else if(i.lightsHash!==r.state.hash)It.update(t,"lightsHash",r.state.hash),h=!1;else{if(void 0!==a.shaderID)return;h=!1}if(h){if(a.shaderID){var d=Dc[a.shaderID];i.shader={name:t.type,uniforms:Pc.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,ct),u=Ht.acquireProgram(t,i.shader,a,c),i.program=u,t.program=u}var f=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<ct.maxMorphTargets;p++)f["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<ct.maxMorphNormals;p++)f["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var g=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Mt.numPlanes,i.numIntersection=Mt.numIntersection,g.clippingPlanes=Mt.uniform),i.fog=e,i.lightsHash=r.state.hash,t.lights&&(g.ambientLightColor.value=r.state.ambient,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),v=zt.seqWithValue(m.seq,g);i.uniformsList=v}function A(t,e,n,i){bt=0;var r=It.get(n),o=Y.state.lights;if(Tt&&(kt||t!==pt)){var s=t===pt&&n.id===dt;Mt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,s)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Mt.numPlanes&&r.numIntersection===Mt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(E(n,e,i),n.needsUpdate=!1);var a=!1,c=!1,l=!1,u=r.program,h=u.getUniforms(),d=r.shader.uniforms;if(Dt.useProgram(u.program)&&(a=!0,c=!0,l=!0),n.id!==dt&&(dt=n.id,c=!0),a||t!==pt){if(h.setValue(ot,"projectionMatrix",t.projectionMatrix),Rt.logarithmicDepthBuffer&&h.setValue(ot,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),pt!==(gt||t)&&(pt=gt||t,c=!0,l=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(ot,Ot.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(ot,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){h.setOptional(ot,i,"bindMatrix"),h.setOptional(ot,i,"bindMatrixInverse");var g=i.skeleton;if(g){var m=g.bones;if(Rt.floatVertexTextures){if(void 0===g.boneTexture){var v=Math.sqrt(4*m.length);v=kc.ceilPowerOfTwo(v),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(g.boneMatrices);var b=new f(y,v,v,Pa,Aa);b.needsUpdate=!0,g.boneMatrices=y,g.boneTexture=b,g.boneTextureSize=v}h.setValue(ot,"boneTexture",g.boneTexture),h.setValue(ot,"boneTextureSize",g.boneTextureSize)}else h.setOptional(ot,g,"boneMatrices")}}return c&&(h.setValue(ot,"toneMappingExposure",ct.toneMappingExposure),h.setValue(ot,"toneMappingWhitePoint",ct.toneMappingWhitePoint),n.lights&&N(d,l),e&&n.fog&&k(d,e),n.isMeshBasicMaterial?C(d,n):n.isMeshLambertMaterial?(C(d,n),F(d,n)):n.isMeshPhongMaterial?(C(d,n),n.isMeshToonMaterial?P(d,n):O(d,n)):n.isMeshStandardMaterial?(C(d,n),n.isMeshPhysicalMaterial?R(d,n):L(d,n)):n.isMeshDepthMaterial?(C(d,n),D(d,n)):n.isMeshDistanceMaterial?(C(d,n),B(d,n)):n.isMeshNormalMaterial?(C(d,n),I(d,n)):n.isLineBasicMaterial?(S(d,n),n.isLineDashedMaterial&&M(d,n)):n.isPointsMaterial?T(d,n):n.isShadowMaterial&&(d.color.value=n.color,d.opacity.value=n.opacity),void 0!==d.ltc_1&&(d.ltc_1.value=Rc.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=Rc.LTC_2),zt.upload(ot,r.uniformsList,d,ct)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(zt.upload(ot,r.uniformsList,d,ct),n.uniformsNeedUpdate=!1),h.setValue(ot,"modelViewMatrix",i.modelViewMatrix),h.setValue(ot,"normalMatrix",i.normalMatrix),h.setValue(ot,"modelMatrix",i.matrixWorld),u}function C(t,e){t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=It.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var i=n.offset,r=n.repeat,o=n.rotation,s=n.center;n.matrix.setUvTransform(i.x,i.y,r.x,r.y,o,s.x,s.y)}t.uvTransform.value.copy(n.matrix)}}function S(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function M(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function T(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*xt,t.scale.value=.5*_t,t.map.value=e.map,null!==e.map){if(!0===e.map.matrixAutoUpdate){var n=e.map.offset,i=e.map.repeat,r=e.map.rotation,o=e.map.center;e.map.matrix.setUvTransform(n.x,n.y,i.x,i.y,r,o.x,o.y)}t.uvTransform.value.copy(e.map.matrix)}}function k(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function F(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function O(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function P(t,e){O(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function L(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function R(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,L(t,e)}function D(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function B(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function I(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function N(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function j(){var t=bt;return t>=Rt.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+Rt.maxTextures),bt+=1,t}console.log("THREE.WebGLRenderer",Jo),t=t||{};var U=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),$=void 0!==t.context?t.context:null,z=void 0!==t.alpha&&t.alpha,H=void 0===t.depth||t.depth,V=void 0===t.stencil||t.stencil,W=void 0!==t.antialias&&t.antialias,G=void 0===t.premultipliedAlpha||t.premultipliedAlpha,q=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,X=void 0!==t.powerPreference?t.powerPreference:"default",K=null,Y=null;this.domElement=U,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Zs,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ot,ct=this,lt=!1,ut=null,ht=null,dt=-1,ft="",pt=null,gt=null,mt=new u,vt=new u,yt=null,bt=0,wt=U.width,_t=U.height,xt=1,Et=new u(0,0,wt,_t),At=new u(0,0,wt,_t),Ct=!1,St=new v,Mt=new tt,Tt=!1,kt=!1,Ft=new o,Ot=new a;try{var Pt={alpha:z,depth:H,stencil:V,antialias:W,premultipliedAlpha:G,preserveDrawingBuffer:q,powerPreference:X};if(U.addEventListener("webglcontextlost",i,!1),U.addEventListener("webglcontextrestored",r,!1),null===(ot=$||U.getContext("webgl",Pt)||U.getContext("experimental-webgl",Pt)))throw null!==U.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===ot.getShaderPrecisionFormat&&(ot.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}var Lt,Rt,Dt,Bt,It,Nt,jt,Ut,$t,Ht,Vt,Wt,Gt,qt,Xt,Kt,Yt,Zt;n();var Jt=new Ae(ct);this.vr=Jt;var Qt=new me(ct,$t,Rt.maxTextureSize);this.shadowMap=Qt,this.getContext=function(){return ot},this.getContextAttributes=function(){return ot.getContextAttributes()},this.forceContextLoss=function(){var t=Lt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Lt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return xt},this.setPixelRatio=function(t){void 0!==t&&(xt=t,this.setSize(wt,_t,!1))},this.getSize=function(){return{width:wt,height:_t}},this.setSize=function(t,e,n){var i=Jt.getDevice();if(i&&i.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");wt=t,_t=e,U.width=t*xt,U.height=e*xt,!1!==n&&(U.style.width=t+"px",U.style.height=e+"px"),this.setViewport(0,0,t,e)},this.getDrawingBufferSize=function(){return{width:wt*xt,height:_t*xt}},this.setDrawingBufferSize=function(t,e,n){wt=t,_t=e,xt=n,U.width=t*n,U.height=e*n,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return mt},this.setViewport=function(t,e,n,i){Et.set(t,_t-e-i,n,i),Dt.viewport(mt.copy(Et).multiplyScalar(xt))},this.setScissor=function(t,e,n,i){At.set(t,_t-e-i,n,i),Dt.scissor(vt.copy(At).multiplyScalar(xt))},this.setScissorTest=function(t){Dt.setScissorTest(Ct=t)},this.getClearColor=function(){return Gt.getClearColor()},this.setClearColor=function(){Gt.setClearColor.apply(Gt,arguments)},this.getClearAlpha=function(){return Gt.getClearAlpha()},this.setClearAlpha=function(){Gt.setClearAlpha.apply(Gt,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=ot.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=ot.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=ot.STENCIL_BUFFER_BIT),ot.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.dispose=function(){U.removeEventListener("webglcontextlost",i,!1),U.removeEventListener("webglcontextrestored",r,!1),Vt.dispose(),Wt.dispose(),It.dispose(),$t.dispose(),Jt.dispose(),g()},this.renderBufferImmediate=function(t,e,n){Dt.initAttributes();var i=It.get(t);t.hasPositions&&!i.position&&(i.position=ot.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=ot.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=ot.createBuffer()),t.hasColors&&!i.color&&(i.color=ot.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(ot.bindBuffer(ot.ARRAY_BUFFER,i.position),ot.bufferData(ot.ARRAY_BUFFER,t.positionArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(r.position),ot.vertexAttribPointer(r.position,3,ot.FLOAT,!1,0,0)),t.hasNormals){if(ot.bindBuffer(ot.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,s=3*t.count;o<s;o+=9){var a=t.normalArray,c=(a[o+0]+a[o+3]+a[o+6])/3,l=(a[o+1]+a[o+4]+a[o+7])/3,u=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=c,a[o+1]=l,a[o+2]=u,a[o+3]=c,a[o+4]=l,a[o+5]=u,a[o+6]=c,a[o+7]=l,a[o+8]=u}ot.bufferData(ot.ARRAY_BUFFER,t.normalArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(r.normal),ot.vertexAttribPointer(r.normal,3,ot.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(ot.bindBuffer(ot.ARRAY_BUFFER,i.uv),ot.bufferData(ot.ARRAY_BUFFER,t.uvArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(r.uv),ot.vertexAttribPointer(r.uv,2,ot.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==ps&&(ot.bindBuffer(ot.ARRAY_BUFFER,i.color),ot.bufferData(ot.ARRAY_BUFFER,t.colorArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(r.color),ot.vertexAttribPointer(r.color,3,ot.FLOAT,!1,0,0)),Dt.disableUnusedAttributes(),ot.drawArrays(ot.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,i,r,o,s){var a=o.isMesh&&o.matrixWorld.determinant()<0;Dt.setMaterial(r,a);var c=A(t,n,r,o),l=i.id+"_"+c.id+"_"+(!0===r.wireframe),u=!1;l!==ft&&(ft=l,u=!0),o.morphTargetInfluences&&(qt.update(o,i,r,c),u=!0);var h=i.index,f=i.attributes.position,p=1;!0===r.wireframe&&(h=Ut.getWireframeAttribute(i),p=2);var g,m=Xt;null!==h&&(g=jt.get(h),m=Kt,m.setIndex(g)),u&&(d(r,c,i),null!==h&&ot.bindBuffer(ot.ELEMENT_ARRAY_BUFFER,g.buffer));var v=1/0;null!==h?v=h.count:void 0!==f&&(v=f.count);var y=i.drawRange.start*p,b=i.drawRange.count*p,w=null!==s?s.start*p:0,_=null!==s?s.count*p:1/0,x=Math.max(y,w),E=Math.min(v,y+b,w+_)-1,C=Math.max(0,E-x+1);if(0!==C){if(o.isMesh)if(!0===r.wireframe)Dt.setLineWidth(r.wireframeLinewidth*e()),m.setMode(ot.LINES);else switch(o.drawMode){case mc:m.setMode(ot.TRIANGLES);break;case vc:m.setMode(ot.TRIANGLE_STRIP);break;case yc:m.setMode(ot.TRIANGLE_FAN)}else if(o.isLine){var S=r.linewidth;void 0===S&&(S=1),Dt.setLineWidth(S*e()),o.isLineSegments?m.setMode(ot.LINES):o.isLineLoop?m.setMode(ot.LINE_LOOP):m.setMode(ot.LINE_STRIP)}else o.isPoints&&m.setMode(ot.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&m.renderInstances(i,x,C):m.render(x,C)}},this.compile=function(t,e){Y=Wt.get(t,e),Y.init(),t.traverse(function(t){t.isLight&&(Y.pushLight(t),t.castShadow&&Y.pushShadow(t))}),Y.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)E(e.material[n],t.fog,e);else E(e.material,t.fog,e)})};var te=!1,ee=null;this.animate=function(t){ee=t,null!==ee?p():g()},this.render=function(t,e,n,i){if(!e||!e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!lt){ft="",dt=-1,pt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Jt.enabled&&(e=Jt.getCamera(e)),Y=Wt.get(t,e),Y.init(),t.onBeforeRender(ct,t,e,n),Ft.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),St.setFromMatrix(Ft),kt=this.localClippingEnabled,Tt=Mt.init(this.clippingPlanes,kt,e),K=Vt.get(t,e),K.init(),w(t,e,ct.sortObjects),!0===ct.sortObjects&&K.sort(),Tt&&Mt.beginShadows();var r=Y.state.shadowsArray;Qt.render(r,t,e),Y.setupLights(e),Tt&&Mt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),Gt.render(K,t,e,i);var o=K.opaque,s=K.transparent;if(t.overrideMaterial){var a=t.overrideMaterial;o.length&&_(o,t,e,a),s.length&&_(s,t,e,a)}else o.length&&_(o,t,e),s.length&&_(s,t,e);var c=Y.state.spritesArray;Yt.render(c,t,e),n&&Nt.updateRenderTargetMipmap(n),Dt.buffers.depth.setTest(!0),Dt.buffers.depth.setMask(!0),Dt.buffers.color.setMask(!0),Dt.setPolygonOffset(!1),t.onAfterRender(ct,t,e),Jt.enabled&&Jt.submitFrame(),K=null,Y=null}},this.allocTextureUnit=j,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Nt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Nt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Nt.setTextureCube(e,n):Nt.setTextureCubeDynamic(e,n)}}(),this.getRenderTarget=function(){return ut},this.setRenderTarget=function(t){ut=t,t&&void 0===It.get(t).__webglFramebuffer&&Nt.setupRenderTarget(t);var e=null,n=!1;if(t){var i=It.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=i[t.activeCubeFace],n=!0):e=i,mt.copy(t.viewport),vt.copy(t.scissor),yt=t.scissorTest}else mt.copy(Et).multiplyScalar(xt),vt.copy(At).multiplyScalar(xt),yt=Ct;if(ht!==e&&(ot.bindFramebuffer(ot.FRAMEBUFFER,e),ht=e),Dt.viewport(mt),Dt.scissor(vt),Dt.setScissorTest(yt),n){var r=It.get(t.texture);ot.framebufferTexture2D(ot.FRAMEBUFFER,ot.COLOR_ATTACHMENT0,ot.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,i,r,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=It.get(t).__webglFramebuffer;if(s){var a=!1;s!==ht&&(ot.bindFramebuffer(ot.FRAMEBUFFER,s),a=!0);try{var c=t.texture,l=c.format,u=c.type;if(l!==Pa&&Zt.convert(l)!==ot.getParameter(ot.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(u!==ya&&Zt.convert(u)!==ot.getParameter(ot.IMPLEMENTATION_COLOR_READ_TYPE)&&(u!==Aa||!Lt.get("OES_texture_float")&&!Lt.get("WEBGL_color_buffer_float"))&&(u!==Ca||!Lt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ot.checkFramebufferStatus(ot.FRAMEBUFFER)===ot.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ot.readPixels(e,n,i,r,Zt.convert(l),Zt.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&ot.bindFramebuffer(ot.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,o=Zt.convert(e.format);this.setTexture2D(e,0),ot.copyTexImage2D(ot.TEXTURE_2D,n||0,o,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,o=e.image.height,s=Zt.convert(n.format),a=Zt.convert(n.type),c=e.isDataTexture?e.image.data:e.image;this.setTexture2D(n,0),ot.texSubImage2D(ot.TEXTURE_2D,i||0,t.x,t.y,r,o,s,a,c)}}function Se(t,e){this.name="",this.color=new y(t),this.density=void 0!==e?e:25e-5}function Me(t,e,n){this.name="",this.color=new y(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Te(){x.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ke(t){V.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Fe(t){x.call(this),this.type="Sprite",this.material=void 0!==t?t:new ke,this.center=new r(.5,.5)}function Oe(){x.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Pe(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new o)}}function Le(){x.call(this),this.type="Bone"}function Re(t,e){Y.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=this.initBones(),i=new Pe(n);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function De(t){V.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Be(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ie(t,e);x.call(this),this.type="Line",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new De({color:16777215*Math.random()})}function Ie(t,e){Be.call(this,t,e),this.type="LineSegments"}function Ne(t,e){Be.call(this,t,e),this.type="LineLoop"}function je(t){V.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Ue(t,e){x.call(this),this.type="Points",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new je({color:16777215*Math.random()})}function $e(){x.call(this),this.type="Group"}function ze(t,e,n,i,r,o,s,a,c){l.call(this,t,e,n,i,r,o,s,a,c),this.generateMipmaps=!1}function He(t,e,n,i,r,o,s,a,c,u,h,d){l.call(this,null,o,s,a,c,u,i,r,h,d),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ve(t,e,n,i,r,o,s,a,c,u){if((u=void 0!==u?u:Ba)!==Ba&&u!==Ia)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ba&&(n=_a),void 0===n&&u===Ia&&(n=ka),l.call(this,null,i,r,o,s,a,u,n,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:da,this.minFilter=void 0!==a?a:da,this.flipY=!1,this.generateMipmaps=!1}function We(t){j.call(this),this.type="WireframeGeometry";var e,n,i,r,o,s,c,l,u,h,d=[],f=[0,0],p={},g=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var v=m[e];for(n=0;n<3;n++)c=v[g[n]],l=v[g[(n+1)%3]],f[0]=Math.min(c,l),f[1]=Math.max(c,l),u=f[0]+","+f[1],void 0===p[u]&&(p[u]={index1:f[0],index2:f[1]})}for(u in p)s=p[u],h=t.vertices[s.index1],d.push(h.x,h.y,h.z),h=t.vertices[s.index2],d.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var y,b,w,_,x,E,A,C;if(h=new a,null!==t.index){for(y=t.attributes.position,b=t.index,w=t.groups,0===w.length&&(w=[{start:0,count:b.count,materialIndex:0}]),r=0,o=w.length;r<o;++r)for(_=w[r],x=_.start,E=_.count,e=x,i=x+E;e<i;e+=3)for(n=0;n<3;n++)c=b.getX(e+n),l=b.getX(e+(n+1)%3),f[0]=Math.min(c,l),f[1]=Math.max(c,l),u=f[0]+","+f[1],void 0===p[u]&&(p[u]={index1:f[0],index2:f[1]});for(u in p)s=p[u],h.fromBufferAttribute(y,s.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,s.index2),d.push(h.x,h.y,h.z)}else for(y=t.attributes.position,e=0,i=y.count/3;e<i;e++)for(n=0;n<3;n++)A=3*e+n,h.fromBufferAttribute(y,A),d.push(h.x,h.y,h.z),C=3*e+(n+1)%3,h.fromBufferAttribute(y,C),d.push(h.x,h.y,h.z)}this.addAttribute("position",new D(d,3))}function Ge(t,e,n){S.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new qe(t,e,n)),this.mergeVertices()}function qe(t,e,n){j.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,o=[],s=[],c=[],l=[],u=new a,h=new a,d=new a,f=new a,p=new a,g=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var v=r/e;t(v,m,h),s.push(h.x,h.y,h.z),v-1e-5>=0?(t(v-1e-5,m,d),f.subVectors(h,d)):(t(v+1e-5,m,d),f.subVectors(d,h)),m-1e-5>=0?(t(v,m-1e-5,d),p.subVectors(h,d)):(t(v,m+1e-5,d),p.subVectors(d,h)),u.crossVectors(f,p).normalize(),c.push(u.x,u.y,u.z),l.push(v,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var y=i*g+r,b=i*g+r+1,w=(i+1)*g+r+1,_=(i+1)*g+r;o.push(y,b,_),o.push(b,w,_)}this.setIndex(o),this.addAttribute("position",new D(s,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(l,2))}function Xe(t,e,n,i){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Ke(t,e,n,i)),this.mergeVertices()}function Ke(t,e,n,i){function o(t,e,n,i){var r,o,s=Math.pow(2,i),a=[];for(r=0;r<=s;r++){a[r]=[];var l=t.clone().lerp(n,r/s),u=e.clone().lerp(n,r/s),h=s-r;for(o=0;o<=h;o++)a[r][o]=0===o&&r===s?l:l.clone().lerp(u,o/h)}for(r=0;r<s;r++)for(o=0;o<2*(s-r)-1;o++){var d=Math.floor(o/2);o%2===0?(c(a[r][d+1]),c(a[r+1][d]),c(a[r][d])):(c(a[r][d+1]),c(a[r+1][d+1]),c(a[r+1][d]))}}function s(){for(var t=0;t<g.length;t+=6){var e=g[t+0],n=g[t+2],i=g[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(g[t+0]+=1),n<.2&&(g[t+2]+=1),i<.2&&(g[t+4]+=1))}}function c(t){p.push(t.x,t.y,t.z)}function l(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function u(){for(var t=new a,e=new a,n=new a,i=new a,o=new r,s=new r,c=new r,l=0,u=0;l<p.length;l+=9,u+=6){t.set(p[l+0],p[l+1],p[l+2]),e.set(p[l+3],p[l+4],p[l+5]),n.set(p[l+6],p[l+7],p[l+8]),o.set(g[u+0],g[u+1]),s.set(g[u+2],g[u+3]),c.set(g[u+4],g[u+5]),i.copy(t).add(e).add(n).divideScalar(3);var f=d(i);h(o,u+0,t,f),h(s,u+2,e,f),h(c,u+4,n,f)}}function h(t,e,n,i){i<0&&1===t.x&&(g[e]=t.x-1),0===n.x&&0===n.z&&(g[e]=i/2/Math.PI+.5)}function d(t){return Math.atan2(t.z,-t.x)}function f(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}j.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1,i=i||0;var p=[],g=[];!function(t){for(var n=new a,i=new a,r=new a,s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),o(n,i,r,t)}(i),function(t){for(var e=new a,n=0;n<p.length;n+=3)e.x=p[n+0],e.y=p[n+1],e.z=p[n+2],e.normalize().multiplyScalar(t),p[n+0]=e.x,p[n+1]=e.y,p[n+2]=e.z}(n),function(){for(var t=new a,e=0;e<p.length;e+=3){t.x=p[e+0],t.y=p[e+1],t.z=p[e+2];var n=d(t)/2/Math.PI+.5,i=f(t)/Math.PI+.5;g.push(n,1-i)}u(),s()}(),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(p.slice(),3)),this.addAttribute("uv",new D(g,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Ye(t,e){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ze(t,e)),this.mergeVertices()}function Ze(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Ke.call(this,n,i,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Je(t,e){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Qe(t,e)),this.mergeVertices()}function Qe(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ke.call(this,n,i,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function tn(t,e){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new en(t,e)),this.mergeVertices()}function en(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ke.call(this,i,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nn(t,e){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new rn(t,e)),this.mergeVertices()}function rn(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ke.call(this,r,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function on(t,e,n,i,r,o){S.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new sn(t,e,n,i,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function sn(t,e,n,i,o){function s(r){m=t.getPointAt(r/e,m);var o=u.normals[r],s=u.binormals[r];for(d=0;d<=i;d++){var a=d/i*Math.PI*2,c=Math.sin(a),l=-Math.cos(a);p.x=l*o.x+c*s.x,p.y=l*o.y+c*s.y,p.z=l*o.z+c*s.z,p.normalize(),y.push(p.x,p.y,p.z),f.x=m.x+n*p.x,f.y=m.y+n*p.y,f.z=m.z+n*p.z,v.push(f.x,f.y,f.z)}}function c(){for(d=1;d<=e;d++)for(h=1;h<=i;h++){var t=(i+1)*(d-1)+(h-1),n=(i+1)*d+(h-1),r=(i+1)*d+h,o=(i+1)*(d-1)+h;w.push(t,n,o),w.push(n,r,o)}}function l(){for(h=0;h<=e;h++)for(d=0;d<=i;d++)g.x=h/e,g.y=d/i,b.push(g.x,g.y)}j.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:o},e=e||64,n=n||1,i=i||8,o=o||!1;var u=t.computeFrenetFrames(e,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var h,d,f=new a,p=new a,g=new r,m=new a,v=[],y=[],b=[],w=[];!function(){for(h=0;h<e;h++)s(h);s(!1===o?e:0),l(),c()}(),this.setIndex(w),this.addAttribute("position",new D(v,3)),this.addAttribute("normal",new D(y,3)),this.addAttribute("uv",new D(b,2))}function an(t,e,n,i,r,o,s){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new cn(t,e,n,i,r,o)),this.mergeVertices()}function cn(t,e,n,i,r,o){function s(t,e,n,i,r){var o=Math.cos(t),s=Math.sin(t),a=n/e*t,c=Math.cos(a);r.x=i*(2+c)*.5*o,r.y=i*(2+c)*s*.5,r.z=i*Math.sin(a)*.5}j.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var c,l,u=[],h=[],d=[],f=[],p=new a,g=new a,m=new a,v=new a,y=new a,b=new a,w=new a;for(c=0;c<=n;++c){var _=c/n*r*Math.PI*2;for(s(_,r,o,t,m),s(_+.01,r,o,t,v),b.subVectors(v,m),w.addVectors(v,m),y.crossVectors(b,w),w.crossVectors(y,b),y.normalize(),w.normalize(),l=0;l<=i;++l){var x=l/i*Math.PI*2,E=-e*Math.cos(x),A=e*Math.sin(x);p.x=m.x+(E*w.x+A*y.x),p.y=m.y+(E*w.y+A*y.y),p.z=m.z+(E*w.z+A*y.z),h.push(p.x,p.y,p.z),g.subVectors(p,m).normalize(),d.push(g.x,g.y,g.z),f.push(c/n),f.push(l/i)}}for(l=1;l<=n;l++)for(c=1;c<=i;c++){var C=(i+1)*(l-1)+(c-1),S=(i+1)*l+(c-1),M=(i+1)*l+c,T=(i+1)*(l-1)+c;u.push(C,S,T),u.push(S,M,T)}this.setIndex(u),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(f,2))}function ln(t,e,n,i,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new un(t,e,n,i,r)),this.mergeVertices()}function un(t,e,n,i,r){j.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,s,c=[],l=[],u=[],h=[],d=new a,f=new a,p=new a;for(o=0;o<=n;o++)for(s=0;s<=i;s++){var g=s/i*r,m=o/n*Math.PI*2;f.x=(t+e*Math.cos(m))*Math.cos(g),f.y=(t+e*Math.cos(m))*Math.sin(g),f.z=e*Math.sin(m),l.push(f.x,f.y,f.z),d.x=t*Math.cos(g),d.y=t*Math.sin(g),p.subVectors(f,d).normalize(),u.push(p.x,p.y,p.z),h.push(s/i),h.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var v=(i+1)*o+s-1,y=(i+1)*(o-1)+s-1,b=(i+1)*(o-1)+s,w=(i+1)*o+s;c.push(v,y,w),c.push(y,b,w)}this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(h,2))}function hn(t,e,n,i,r){var o,s;if(r===Nn(t,e,n,i)>0)for(o=e;o<n;o+=i)s=Dn(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=Dn(o,t[o],t[o+1],s);return s&&kn(s,s.next)&&(Bn(s),s=s.next),s}function dn(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!kn(i,i.next)&&0!==Tn(i.prev,i,i.next))i=i.next;else{if(Bn(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function fn(t,e,n,i,r,o,s){if(t){!s&&o&&xn(t,i,r,o);for(var a,c,l=t;t.prev!==t.next;)if(a=t.prev,c=t.next,o?gn(t,i,r,o):pn(t))e.push(a.i/n),e.push(t.i/n),e.push(c.i/n),Bn(t),t=c.next,l=c.next;else if((t=c)===l){s?1===s?(t=mn(t,e,n),fn(t,e,n,i,r,o,2)):2===s&&vn(t,e,n,i,r,o):fn(dn(t),e,n,i,r,o,1);break}}}function pn(t){var e=t.prev,n=t,i=t.next;if(Tn(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Sn(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Tn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function gn(t,e,n,i){var r=t.prev,o=t,s=t.next;if(Tn(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,c=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,l=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=An(a,c,e,n,i),d=An(l,u,e,n,i),f=t.nextZ;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&Sn(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Tn(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Sn(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Tn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function mn(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!kn(r,o)&&Fn(r,i,i.next,o)&&Pn(r,o)&&Pn(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Bn(i),Bn(i.next),i=t=o),i=i.next}while(i!==t);return i}function vn(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Mn(s,a)){var c=Rn(s,a);return s=dn(s,s.next),c=dn(c,c.next),fn(s,e,n,i,r,o),void fn(c,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}function yn(t,e,n,i){var r,o,s,a,c,l=[];for(r=0,o=e.length;r<o;r++)s=e[r]*i,a=r<o-1?e[r+1]*i:t.length,c=hn(t,s,a,i,!1),c===c.next&&(c.steiner=!0),l.push(Cn(c));for(l.sort(bn),r=0;r<l.length;r++)wn(l[r],n),n=dn(n,n.next);return n}function bn(t,e){return t.x-e.x}function wn(t,e){if(e=_n(t,e)){var n=Rn(e,t);dn(n,n.next)}}function _n(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var c,l=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=u&&r!==i.x&&Sn(o<h?r:s,o,u,h,o<h?s:r,o,i.x,i.y)&&((c=Math.abs(o-i.y)/(r-i.x))<d||c===d&&i.x>n.x)&&Pn(i,t)&&(n=i,d=c),i=i.next;return n}function xn(t,e,n,i){var r=t;do{null===r.z&&(r.z=An(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,En(r)}function En(t){var e,n,i,r,o,s,a,c,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1);return t}function An(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Cn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Sn(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function Mn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!On(t,e)&&Pn(t,e)&&Pn(e,t)&&Ln(t,e)}function Tn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function kn(t,e){return t.x===e.x&&t.y===e.y}function Fn(t,e,n,i){return!!(kn(t,e)&&kn(n,i)||kn(t,i)&&kn(n,e))||Tn(t,e,n)>0!==Tn(t,e,i)>0&&Tn(n,i,t)>0!==Tn(n,i,e)>0}function On(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Fn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Pn(t,e){return Tn(t.prev,t,t.next)<0?Tn(t,e,t.next)>=0&&Tn(t,t.prev,e)>=0:Tn(t,e,t.prev)<0||Tn(t,t.next,e)<0}function Ln(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function Rn(t,e){var n=new In(t.i,t.x,t.y),i=new In(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Dn(t,e,n,i){var r=new In(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Bn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function In(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nn(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}function jn(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Un(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function $n(t,e){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new zn(t,e)),this.mergeVertices()}function zn(t,e){"undefined"!==typeof t&&(j.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function Hn(t,e){S.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Vn(t,e)),this.mergeVertices()}function Vn(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;var i=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),zn.call(this,i,e),this.type="TextBufferGeometry"}function Wn(t,e,n,i,r,o,s){S.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Gn(t,e,n,i,r,o,s)),this.mergeVertices()}function Gn(t,e,n,i,r,o,s){j.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var c,l,u=o+s,h=0,d=[],f=new a,p=new a,g=[],m=[],v=[],y=[];for(l=0;l<=n;l++){var b=[],w=l/n;for(c=0;c<=e;c++){var _=c/e;f.x=-t*Math.cos(i+_*r)*Math.sin(o+w*s),f.y=t*Math.cos(o+w*s),f.z=t*Math.sin(i+_*r)*Math.sin(o+w*s),m.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),v.push(p.x,p.y,p.z),y.push(_,1-w),b.push(h++)}d.push(b)}for(l=0;l<n;l++)for(c=0;c<e;c++){var x=d[l][c+1],E=d[l][c],A=d[l+1][c],C=d[l+1][c+1];(0!==l||o>0)&&g.push(x,E,C),(l!==n-1||u<Math.PI)&&g.push(E,A,C)}this.setIndex(g),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(y,2))}function qn(t,e,n,i,r,o){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Xn(t,e,n,i,r,o)),this.mergeVertices()}function Xn(t,e,n,i,o,s){j.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:s},t=t||.5,e=e||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var c,l,u,h=[],d=[],f=[],p=[],g=t,m=(e-t)/i,v=new a,y=new r;for(l=0;l<=i;l++){for(u=0;u<=n;u++)c=o+u/n*s,v.x=g*Math.cos(c),v.y=g*Math.sin(c),d.push(v.x,v.y,v.z),f.push(0,0,1),y.x=(v.x/e+1)/2,y.y=(v.y/e+1)/2,p.push(y.x,y.y);g+=m}for(l=0;l<i;l++){var b=l*(n+1);for(u=0;u<n;u++){c=u+b;var w=c,_=c+n+1,x=c+n+2,E=c+1;h.push(w,_,E),h.push(_,x,E)}}this.setIndex(h),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(p,2))}function Kn(t,e,n,i){S.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Yn(t,e,n,i)),this.mergeVertices()}function Yn(t,e,n,i){j.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=kc.clamp(i,0,2*Math.PI);var o,s,c,l=[],u=[],h=[],d=1/e,f=new a,p=new r;for(s=0;s<=e;s++){var g=n+s*d*i,m=Math.sin(g),v=Math.cos(g);for(c=0;c<=t.length-1;c++)f.x=t[c].x*m,f.y=t[c].y,f.z=t[c].x*v,u.push(f.x,f.y,f.z),p.x=s/e,p.y=c/(t.length-1),h.push(p.x,p.y)}for(s=0;s<e;s++)for(c=0;c<t.length-1;c++){o=c+s*t.length;var y=o,b=o+t.length,w=o+t.length+1,_=o+1;l.push(y,b,_),l.push(b,w,_)}if(this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("uv",new D(h,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,E=new a,A=new a,C=new a;for(o=e*t.length*3,s=0,c=0;s<t.length;s++,c+=3)E.x=x[c+0],E.y=x[c+1],E.z=x[c+2],A.x=x[o+c+0],A.y=x[o+c+1],A.z=x[o+c+2],C.addVectors(E,A).normalize(),x[c+0]=x[o+c+0]=C.x,x[c+1]=x[o+c+1]=C.y,x[c+2]=x[o+c+2]=C.z}}function Zn(t,e){S.call(this),this.type="ShapeGeometry","object"===("undefined"===typeof e?"undefined":Zo(e))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Jn(t,e)),this.mergeVertices()}function Jn(t,e){function n(t){var n,a,l,u=r.length/3,h=t.extractPoints(e),d=h.shape,f=h.holes;if(!1===Yc.isClockWise(d))for(d=d.reverse(),n=0,a=f.length;n<a;n++)l=f[n],!0===Yc.isClockWise(l)&&(f[n]=l.reverse());var p=Yc.triangulateShape(d,f);for(n=0,a=f.length;n<a;n++)l=f[n],d=d.concat(l);for(n=0,a=d.length;n<a;n++){var g=d[n];r.push(g.x,g.y,0),o.push(0,0,1),s.push(g.x,g.y)}for(n=0,a=p.length;n<a;n++){var m=p[n],v=m[0]+u,y=m[1]+u,b=m[2]+u;i.push(v,y,b),c+=3}}j.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],o=[],s=[],a=0,c=0;if(!1===Array.isArray(t))n(t);else for(var l=0;l<t.length;l++)n(t[l]),this.addGroup(a,c,l),a+=c,c=0;this.setIndex(i),this.addAttribute("position",new D(r,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(s,2))}function Qn(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function ti(t,e){j.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,o,s=[],a=Math.cos(kc.DEG2RAD*e),c=[0,0],l={},u=["a","b","c"];t.isBufferGeometry?(o=new S,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,f=0,p=d.length;f<p;f++)for(var g=d[f],m=0;m<3;m++)n=g[u[m]],i=g[u[(m+1)%3]],c[0]=Math.min(n,i),c[1]=Math.max(n,i),r=c[0]+","+c[1],void 0===l[r]?l[r]={index1:c[0],index2:c[1],face1:f,face2:void 0}:l[r].face2=f;for(r in l){var v=l[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=a){var y=h[v.index1];s.push(y.x,y.y,y.z),y=h[v.index2],s.push(y.x,y.y,y.z)}}this.addAttribute("position",new D(s,3))}function ei(t,e,n,i,r,o,s,a){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new ni(t,e,n,i,r,o,s,a)),this.mergeVertices()}function ni(t,e,n,i,o,s,c,l){function u(n){var o,s,u,v=new r,w=new a,_=0,x=!0===n?t:e,E=!0===n?1:-1;for(s=m,o=1;o<=i;o++)f.push(0,y*E,0),p.push(0,E,0),g.push(.5,.5),m++;for(u=m,o=0;o<=i;o++){var A=o/i,C=A*l+c,S=Math.cos(C),M=Math.sin(C);w.x=x*M,w.y=y*E,w.z=x*S,f.push(w.x,w.y,w.z),p.push(0,E,0),v.x=.5*S+.5,v.y=.5*M*E+.5,g.push(v.x,v.y),m++}for(o=0;o<i;o++){var T=s+o,k=u+o;!0===n?d.push(k,k+1,T):d.push(k+1,k,T),_+=3}h.addGroup(b,_,!0===n?1:2),b+=_}j.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:c,thetaLength:l};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,o=Math.floor(o)||1,s=void 0!==s&&s,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI;var d=[],f=[],p=[],g=[],m=0,v=[],y=n/2,b=0;!function(){var r,s,u=new a,w=new a,_=0,x=(e-t)/n;for(s=0;s<=o;s++){var E=[],A=s/o,C=A*(e-t)+t;for(r=0;r<=i;r++){var S=r/i,M=S*l+c,T=Math.sin(M),k=Math.cos(M);w.x=C*T,w.y=-A*n+y,w.z=C*k,f.push(w.x,w.y,w.z),u.set(T,x,k).normalize(),p.push(u.x,u.y,u.z),g.push(S,1-A),E.push(m++)}v.push(E)}for(r=0;r<i;r++)for(s=0;s<o;s++){var F=v[s][r],O=v[s+1][r],P=v[s+1][r+1],L=v[s][r+1];d.push(F,O,L),d.push(O,P,L),_+=6}h.addGroup(b,_,0),b+=_}(),!1===s&&(t>0&&u(!0),e>0&&u(!1)),this.setIndex(d),this.addAttribute("position",new D(f,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(g,2))}function ii(t,e,n,i,r,o,s){ei.call(this,0,t,e,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function ri(t,e,n,i,r,o,s){ni.call(this,0,t,e,n,i,r,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function oi(t,e,n,i){S.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new si(t,e,n,i)),this.mergeVertices()}function si(t,e,n,i){j.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var o,s,c=[],l=[],u=[],h=[],d=new a,f=new r;for(l.push(0,0,0),u.push(0,0,1),h.push(.5,.5),s=0,o=3;s<=e;s++,o+=3){var p=n+s/e*i;d.x=t*Math.cos(p),d.y=t*Math.sin(p),l.push(d.x,d.y,d.z),u.push(0,0,1),f.x=(l[o]/t+1)/2,f.y=(l[o+1]/t+1)/2,h.push(f.x,f.y)}for(o=1;o<=e;o++)c.push(o,o+1,0);this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(h,2))}function ai(t){V.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(t)}function ci(t){G.call(this,t),this.type="RawShaderMaterial"}function li(t){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ui(t){li.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function hi(t){V.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function di(t){hi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function fi(t){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function pi(t){V.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gi(t){De.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function mi(t,e,n){var i=this,r=!1,o=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,s),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this}}function vi(t){this.manager=void 0!==t?t:tl}function yi(t){this.manager=void 0!==t?t:tl,this._parser=null}function bi(t){this.manager=void 0!==t?t:tl,this._parser=null}function wi(t){this.manager=void 0!==t?t:tl}function _i(t){this.manager=void 0!==t?t:tl}function xi(t){this.manager=void 0!==t?t:tl}function Ei(){this.type="Curve",this.arcLengthDivisions=200}function Ai(t,e,n,i,r,o,s,a){Ei.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function Ci(t,e,n,i,r,o){Ai.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function Si(){function t(t,o,s,a){e=t,n=s,i=-3*t+3*o-2*s-a,r=2*t-2*o+s+a}var e=0,n=0,i=0,r=0;return{initCatmullRom:function(e,n,i,r,o){t(n,i,o*(i-e),o*(r-n))},initNonuniformCatmullRom:function(e,n,i,r,o,s,a){var c=(n-e)/o-(i-e)/(o+s)+(i-n)/s,l=(i-n)/s-(r-n)/(s+a)+(r-i)/a;c*=s,l*=s,t(n,i,c,l)},calc:function(t){var o=t*t;return e+n*t+i*o+r*(o*t)}}}function Mi(t,e,n,i){Ei.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Ti(t,e,n,i,r){var o=.5*(i-e),s=.5*(r-n),a=t*t;return(2*n-2*i+o+s)*(t*a)+(-3*n+3*i-2*o-s)*a+o*t+n}function ki(t,e){var n=1-t;return n*n*e}function Fi(t,e){return 2*(1-t)*t*e}function Oi(t,e){return t*t*e}function Pi(t,e,n,i){return ki(t,e)+Fi(t,n)+Oi(t,i)}function Li(t,e){var n=1-t;return n*n*n*e}function Ri(t,e){var n=1-t;return 3*n*n*t*e}function Di(t,e){return 3*(1-t)*t*t*e}function Bi(t,e){return t*t*t*e}function Ii(t,e,n,i,r){return Li(t,e)+Ri(t,n)+Di(t,i)+Bi(t,r)}function Ni(t,e,n,i){Ei.call(this),this.type="CubicBezierCurve",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r,this.v3=i||new r}function ji(t,e,n,i){Ei.call(this),this.type="CubicBezierCurve3",this.v0=t||new a,this.v1=e||new a,this.v2=n||new a,this.v3=i||new a}function Ui(t,e){Ei.call(this),this.type="LineCurve",this.v1=t||new r,this.v2=e||new r}function $i(t,e){Ei.call(this),this.type="LineCurve3",this.v1=t||new a,this.v2=e||new a}function zi(t,e,n){Ei.call(this),this.type="QuadraticBezierCurve",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r}function Hi(t,e,n){Ei.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new a,this.v1=e||new a,this.v2=n||new a}function Vi(t){Ei.call(this),this.type="SplineCurve",this.points=t||[]}function Wi(){Ei.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Gi(t){Wi.call(this),this.type="Path",this.currentPoint=new r,t&&this.setFromPoints(t)}function qi(t){Gi.call(this,t),this.uuid=kc.generateUUID(),this.type="Shape",this.holes=[]}function Xi(t,e){x.call(this),this.type="Light",this.color=new y(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ki(t,e,n){Xi.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(x.DefaultUp),this.updateMatrix(),this.groundColor=new y(e)}function Yi(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new o}function Zi(){Yi.call(this,new xe(50,1,.5,500))}function Ji(t,e,n,i,r,o){Xi.call(this,t,e),this.type="SpotLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Zi}function Qi(t,e,n,i){Xi.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Yi(new xe(90,1,.5,500))}function tr(){Yi.call(this,new A(-5,5,5,-5,.5,500))}function er(t,e){Xi.call(this,t,e),this.type="DirectionalLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,this.shadow=new tr}function nr(t,e){Xi.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ir(t,e,n,i){Xi.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function rr(t,e,n,i){pr.call(this,t,e,n,i)}function or(t,e,n){pr.call(this,t,e,n)}function sr(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function ar(t,e,n,i){sr.call(this,t,e,n,i)}function cr(t,e,n,i){pr.call(this,t,e,n,i)}function lr(t,e,n,i){pr.call(this,t,e,n,i)}function ur(t,e,n,i){pr.call(this,t,e,n,i)}function hr(t,e,n,i){sr.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function dr(t,e,n,i){sr.call(this,t,e,n,i)}function fr(t,e,n,i){sr.call(this,t,e,n,i)}function pr(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=al.convertArray(e,this.TimeBufferType),this.values=al.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function gr(t,e,n,i){pr.call(this,t,e,n,i)}function mr(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=kc.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function vr(t){this.manager=void 0!==t?t:tl,this.textures={}}function yr(t){this.manager=void 0!==t?t:tl}function br(){}function wr(t){"boolean"===typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:tl,this.withCredentials=!1}function _r(t){this.manager=void 0!==t?t:tl,this.texturePath=""}function xr(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:tl,this.options=void 0}function Er(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Ar(t){this.type="Font",this.data=t}function Cr(t,e,n,i){for(var r=String(t).split(""),o=e/i.resolution,s=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,a=[],c=0,l=0,u=0;u<r.length;u++){var h=r[u];if("\n"===h)c=0,l-=s;else{var d=Sr(h,n,o,c,l,i);c+=d.offsetX,a.push(d.path)}}return a}function Sr(t,e,n,i,r,o){var s=o.glyphs[t]||o.glyphs["?"];if(s){var a,c,l,u,h,d,f,p,g=new Er;if(s.o)for(var m=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),v=0,y=m.length;v<y;){var b=m[v++];switch(b){case"m":a=m[v++]*n+i,c=m[v++]*n+r,g.moveTo(a,c);break;case"l":a=m[v++]*n+i,c=m[v++]*n+r,g.lineTo(a,c);break;case"q":l=m[v++]*n+i,u=m[v++]*n+r,h=m[v++]*n+i,d=m[v++]*n+r,g.quadraticCurveTo(h,d,l,u);break;case"b":l=m[v++]*n+i,u=m[v++]*n+r,h=m[v++]*n+i,d=m[v++]*n+r,f=m[v++]*n+i,p=m[v++]*n+r,g.bezierCurveTo(h,d,f,p,l,u)}}return{offsetX:s.ha*n,path:g}}}function Mr(t){this.manager=void 0!==t?t:tl}function Tr(t){this.manager=void 0!==t?t:tl}function kr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Fr(t,e,n){x.call(this),this.type="CubeCamera";var i=new xe(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new a(1,0,0)),this.add(i);var r=new xe(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new a(-1,0,0)),this.add(r);var o=new xe(90,1,t,e);o.up.set(0,0,1),o.lookAt(new a(0,1,0)),this.add(o);var s=new xe(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new a(0,-1,0)),this.add(s);var c=new xe(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new a(0,0,1)),this.add(c);var l=new xe(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new a(0,0,-1)),this.add(l);var u={format:Oa,magFilter:ga,minFilter:ga};this.renderTarget=new d(n,n,u),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,r,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,s,n),n.activeCubeFace=4,t.render(e,c,n),n.texture.generateMipmaps=a,n.activeCubeFace=5,t.render(e,l,n),t.setRenderTarget(null)},this.clear=function(t,e,n,i){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,t.setRenderTarget(r),t.clear(e,n,i);t.setRenderTarget(null)}}function Or(){x.call(this),this.type="AudioListener",this.context=pl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Pr(t){x.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Lr(t){Pr.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Rr(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Dr(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Br(t,e,n){var i=n||Ir.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Ir(t,e,n){this.path=e,this.parsedPath=n||Ir.parseTrackName(e),this.node=Ir.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Nr(){this.uuid=kc.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function jr(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,o=new Array(r),s={endingStart:fc,endingEnd:fc},a=0;a!==r;++a){var c=i[a].createInterpolant(null);o[a]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cc,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ur(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function $r(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function zr(){j.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Hr(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Vr(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wr(t,e,n){Vr.call(this,t,e),this.meshPerAttribute=n||1}function Gr(t,e,n){M.call(this,t,e),this.meshPerAttribute=n||1}function qr(t,e,n,i){this.ray=new q(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Xr(t,e){return t.distance-e.distance}function Kr(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,o=0,s=r.length;o<s;o++)Kr(r[o],e,n,!0)}function Yr(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Zr(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Jr(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Qr(t,e){this.min=void 0!==t?t:new r(1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0)}function to(t){x.call(this),this.material=t,this.render=function(){}}function eo(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var c=new j,l=new D(2*s*3,3);c.addAttribute("position",l),Ie.call(this,c,new De({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function no(t,e){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new j,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var s=r/32*Math.PI*2,a=o/32*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}n.addAttribute("position",new D(i,3));var c=new De({fog:!1});this.cone=new Ie(n,c),this.add(this.cone),this.update()}function io(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,io(t.children[n]));return e}function ro(t){for(var e=io(t),n=new j,i=[],r=[],o=new y(0,0,1),s=new y(0,1,0),a=0;a<e.length;a++){var c=e[a];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}n.addAttribute("position",new D(i,3)),n.addAttribute("color",new D(r,3));var l=new De({vertexColors:ms,depthTest:!1,depthWrite:!1,transparent:!0});Ie.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function oo(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new Gn(e,4,2),r=new W({wireframe:!0,fog:!1});Y.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function so(t,e){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new De({fog:!1}),i=new j;i.addAttribute("position",new M(new Float32Array(15),3)),this.line=new Be(i,n),this.add(this.line),this.update()}function ao(t,e,n){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Qe(e);i.rotateY(.5*Math.PI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ms);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new M(o,3)),this.add(new Y(i,this.material)),this.update()}function co(t,e,n,i){t=t||10,e=e||10,n=new y(void 0!==n?n:4473924),i=new y(void 0!==i?i:8947848);for(var r=e/2,o=t/e,s=t/2,a=[],c=[],l=0,u=0,h=-s;l<=e;l++,h+=o){a.push(-s,0,h,s,0,h),a.push(h,0,-s,h,0,s);var d=l===r?n:i;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var f=new j;f.addAttribute("position",new D(a,3)),f.addAttribute("color",new D(c,3));var p=new De({vertexColors:ms});Ie.call(this,f,p)}function lo(t,e,n,i,r,o){t=t||10,e=e||16,n=n||8,i=i||64,r=new y(void 0!==r?r:4473924),o=new y(void 0!==o?o:8947848);var s,a,c,l,u,h,d,f=[],p=[];for(l=0;l<=e;l++)c=l/e*(2*Math.PI),s=Math.sin(c)*t,a=Math.cos(c)*t,f.push(0,0,0),f.push(s,0,a),d=1&l?r:o,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?r:o,h=t-t/n*l,u=0;u<i;u++)c=u/i*(2*Math.PI),s=Math.sin(c)*h,a=Math.cos(c)*h,f.push(s,0,a),p.push(d.r,d.g,d.b),c=(u+1)/i*(2*Math.PI),s=Math.sin(c)*h,a=Math.cos(c)*h,f.push(s,0,a),p.push(d.r,d.g,d.b);var g=new j;g.addAttribute("position",new D(f,3)),g.addAttribute("color",new D(p,3));var m=new De({vertexColors:ms});Ie.call(this,g,m)}function uo(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new j,l=new D(2*s*3,3);c.addAttribute("position",l),Ie.call(this,c,new De({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ho(t,e,n){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new j;i.addAttribute("position",new D([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new De({fog:!1});this.lightPlane=new Be(i,r),this.add(this.lightPlane),i=new j,i.addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new Be(i,r),this.add(this.targetLine),this.update()}function fo(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(o.length/3-1)}var i=new j,r=new De({color:16777215,vertexColors:gs}),o=[],s=[],a={},c=new y(16755200),l=new y(16711680),u=new y(43775),h=new y(16777215),d=new y(3355443);e("n1","n2",c),e("n2","n4",c),e("n4","n3",c),e("n3","n1",c),e("f1","f2",c),e("f2","f4",c),e("f4","f3",c),e("f3","f1",c),e("n1","f1",c),e("n2","f2",c),e("n3","f3",c),e("n4","f4",c),e("p","n1",l),e("p","n2",l),e("p","n3",l),e("p","n4",l),e("u1","u2",u),e("u2","u3",u),e("u3","u1",u),e("c","t",h),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),i.addAttribute("position",new D(o,3)),i.addAttribute("color",new D(s,3)),Ie.call(this,i,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function po(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new j;r.setIndex(new M(n,1)),r.addAttribute("position",new M(i,3)),Ie.call(this,r,new De({color:e})),this.matrixAutoUpdate=!1,this.update()}function go(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new j;o.setIndex(new M(i,1)),o.addAttribute("position",new D(r,3)),Ie.call(this,o,new De({color:n})),this.geometry.computeBoundingSphere()}function mo(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new j;o.addAttribute("position",new D(r,3)),o.computeBoundingSphere(),Be.call(this,o,new De({color:i}));var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],a=new j;a.addAttribute("position",new D(s,3)),a.computeBoundingSphere(),this.add(new Y(a,new W({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function vo(t,e,n,i,r,o){x.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===ml&&(ml=new j,ml.addAttribute("position",new D([0,0,0,0,1,0],3)),vl=new ni(0,.5,1,5,1),vl.translate(0,-.5,0)),this.position.copy(e),this.line=new Be(ml,new De({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Y(vl,new W({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}function yo(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new j;i.addAttribute("position",new D(e,3)),i.addAttribute("color",new D(n,3));var r=new De({vertexColors:ms});Ie.call(this,i,r)}function bo(t,e,n,i,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new C(t,e,n,r,o,s)}function wo(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function _o(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function xo(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ue(t,e)}function Eo(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Fe(t)}function Ao(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ue(t,e)}function Co(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function So(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function Mo(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function To(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(t,e,n)}function ko(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new M(t,e).setDynamic(!0)}function Fo(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new T(t,e)}function Oo(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new k(t,e)}function Po(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new F(t,e)}function Lo(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new O(t,e)}function Ro(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new P(t,e)}function Do(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new L(t,e)}function Bo(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(t,e)}function Io(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new D(t,e)}function No(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new B(t,e)}function jo(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mi.call(this,t),this.type="catmullrom",this.closed=!0}function Uo(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mi.call(this,t),this.type="catmullrom"}function $o(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Mi.call(this,t),this.type="catmullrom"}function zo(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yo(t)}function Ho(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new po(t,e)}function Vo(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ie(new ti(t.geometry),new De({color:void 0!==e?e:16777215}))}function Wo(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ie(new We(t.geometry),new De({color:void 0!==e?e:16777215}))}function Go(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new vi(t)}function qo(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new bi(t)}function Xo(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Ko(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function Yo(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"WebGLRenderTargetCube",function(){return d}),n.d(e,"WebGLRenderTarget",function(){return h}),n.d(e,"WebGLRenderer",function(){return Ce}),n.d(e,"ShaderLib",function(){return Dc}),n.d(e,"UniformsLib",function(){return Rc}),n.d(e,"UniformsUtils",function(){return Pc}),n.d(e,"ShaderChunk",function(){return Oc}),n.d(e,"FogExp2",function(){return Se}),n.d(e,"Fog",function(){return Me}),n.d(e,"Scene",function(){return Te}),n.d(e,"Sprite",function(){return Fe}),n.d(e,"LOD",function(){return Oe}),n.d(e,"SkinnedMesh",function(){return Re}),n.d(e,"Skeleton",function(){return Pe}),n.d(e,"Bone",function(){return Le}),n.d(e,"Mesh",function(){return Y}),n.d(e,"LineSegments",function(){return Ie}),n.d(e,"LineLoop",function(){return Ne}),n.d(e,"Line",function(){return Be}),n.d(e,"Points",function(){return Ue}),n.d(e,"Group",function(){return $e}),n.d(e,"VideoTexture",function(){return ze}),n.d(e,"DataTexture",function(){return f}),n.d(e,"CompressedTexture",function(){return He}),n.d(e,"CubeTexture",function(){return ct}),n.d(e,"CanvasTexture",function(){return ve}),n.d(e,"DepthTexture",function(){return Ve}),n.d(e,"Texture",function(){return l}),n.d(e,"CompressedTextureLoader",function(){return yi}),n.d(e,"DataTextureLoader",function(){return bi}),n.d(e,"CubeTextureLoader",function(){return _i}),n.d(e,"TextureLoader",function(){return xi}),n.d(e,"ObjectLoader",function(){return _r}),n.d(e,"MaterialLoader",function(){return vr}),n.d(e,"BufferGeometryLoader",function(){return yr}),n.d(e,"DefaultLoadingManager",function(){return tl}),n.d(e,"LoadingManager",function(){return mi}),n.d(e,"JSONLoader",function(){return wr}),n.d(e,"ImageLoader",function(){return wi}),n.d(e,"ImageBitmapLoader",function(){return xr}),n.d(e,"FontLoader",function(){return Mr}),n.d(e,"FileLoader",function(){return vi}),n.d(e,"Loader",function(){return br}),n.d(e,"LoaderUtils",function(){return ll}),n.d(e,"Cache",function(){return Qc}),n.d(e,"AudioLoader",function(){return Tr}),n.d(e,"SpotLightShadow",function(){return Zi}),n.d(e,"SpotLight",function(){return Ji}),n.d(e,"PointLight",function(){return Qi}),n.d(e,"RectAreaLight",function(){return ir}),n.d(e,"HemisphereLight",function(){return Ki}),n.d(e,"DirectionalLightShadow",function(){return tr}),n.d(e,"DirectionalLight",function(){return er}),n.d(e,"AmbientLight",function(){return nr}),n.d(e,"LightShadow",function(){return Yi}),n.d(e,"Light",function(){return Xi}),n.d(e,"StereoCamera",function(){return kr}),n.d(e,"PerspectiveCamera",function(){return xe}),n.d(e,"OrthographicCamera",function(){return A}),n.d(e,"CubeCamera",function(){return Fr}),n.d(e,"ArrayCamera",function(){return Ee}),n.d(e,"Camera",function(){return E}),n.d(e,"AudioListener",function(){return Or}),n.d(e,"PositionalAudio",function(){return Lr}),n.d(e,"AudioContext",function(){return pl}),n.d(e,"AudioAnalyser",function(){return Rr}),n.d(e,"Audio",function(){return Pr}),n.d(e,"VectorKeyframeTrack",function(){return gr}),n.d(e,"StringKeyframeTrack",function(){return rr}),n.d(e,"QuaternionKeyframeTrack",function(){return cr}),n.d(e,"NumberKeyframeTrack",function(){return ur}),n.d(e,"ColorKeyframeTrack",function(){return lr}),n.d(e,"BooleanKeyframeTrack",function(){return or}),n.d(e,"PropertyMixer",function(){return Dr}),n.d(e,"PropertyBinding",function(){return Ir}),n.d(e,"KeyframeTrack",function(){return pr}),n.d(e,"AnimationUtils",function(){return al}),n.d(e,"AnimationObjectGroup",function(){return Nr}),n.d(e,"AnimationMixer",function(){return Ur}),n.d(e,"AnimationClip",function(){return mr}),n.d(e,"Uniform",function(){return $r}),n.d(e,"InstancedBufferGeometry",function(){return zr}),n.d(e,"BufferGeometry",function(){return j}),n.d(e,"Geometry",function(){return S}),n.d(e,"InterleavedBufferAttribute",function(){return Hr}),n.d(e,"InstancedInterleavedBuffer",function(){return Wr}),n.d(e,"InterleavedBuffer",function(){return Vr}),n.d(e,"InstancedBufferAttribute",function(){return Gr}),n.d(e,"Face3",function(){return C}),n.d(e,"Object3D",function(){return x}),n.d(e,"Raycaster",function(){return qr}),n.d(e,"Layers",function(){return _}),n.d(e,"EventDispatcher",function(){return i}),n.d(e,"Clock",function(){return Yr}),n.d(e,"QuaternionLinearInterpolant",function(){return ar}),n.d(e,"LinearInterpolant",function(){return dr}),n.d(e,"DiscreteInterpolant",function(){return fr}),n.d(e,"CubicInterpolant",function(){return hr}),n.d(e,"Interpolant",function(){return sr}),n.d(e,"Triangle",function(){return K}),n.d(e,"Math",function(){return kc}),n.d(e,"Spherical",function(){return Zr}),n.d(e,"Cylindrical",function(){return Jr}),n.d(e,"Plane",function(){return m}),n.d(e,"Frustum",function(){return v}),n.d(e,"Sphere",function(){return g}),n.d(e,"Ray",function(){return q}),n.d(e,"Matrix4",function(){return o}),n.d(e,"Matrix3",function(){return c}),n.d(e,"Box3",function(){return p}),n.d(e,"Box2",function(){return Qr}),n.d(e,"Line3",function(){return X}),n.d(e,"Euler",function(){return w}),n.d(e,"Vector4",function(){return u}),n.d(e,"Vector3",function(){return a}),n.d(e,"Vector2",function(){return r}),n.d(e,"Quaternion",function(){return s}),n.d(e,"Color",function(){return y}),n.d(e,"ImmediateRenderObject",function(){return to}),n.d(e,"VertexNormalsHelper",function(){return eo}),n.d(e,"SpotLightHelper",function(){return no}),n.d(e,"SkeletonHelper",function(){return ro}),n.d(e,"PointLightHelper",function(){return oo}),n.d(e,"RectAreaLightHelper",function(){return so}),n.d(e,"HemisphereLightHelper",function(){return ao}),n.d(e,"GridHelper",function(){return co}),n.d(e,"PolarGridHelper",function(){return lo}),n.d(e,"FaceNormalsHelper",function(){return uo}),n.d(e,"DirectionalLightHelper",function(){return ho}),n.d(e,"CameraHelper",function(){return fo}),n.d(e,"BoxHelper",function(){return po}),n.d(e,"Box3Helper",function(){return go}),n.d(e,"PlaneHelper",function(){return mo}),n.d(e,"ArrowHelper",function(){return vo}),n.d(e,"AxesHelper",function(){return yo}),n.d(e,"Shape",function(){return qi}),n.d(e,"Path",function(){return Gi}),n.d(e,"ShapePath",function(){return Er}),n.d(e,"Font",function(){return Ar}),n.d(e,"CurvePath",function(){return Wi}),n.d(e,"Curve",function(){return Ei}),n.d(e,"ShapeUtils",function(){return Yc}),n.d(e,"WebGLUtils",function(){return _e}),n.d(e,"WireframeGeometry",function(){return We}),n.d(e,"ParametricGeometry",function(){return Ge}),n.d(e,"ParametricBufferGeometry",function(){return qe}),n.d(e,"TetrahedronGeometry",function(){return Ye}),n.d(e,"TetrahedronBufferGeometry",function(){return Ze}),n.d(e,"OctahedronGeometry",function(){return Je}),n.d(e,"OctahedronBufferGeometry",function(){return Qe}),n.d(e,"IcosahedronGeometry",function(){return tn}),n.d(e,"IcosahedronBufferGeometry",function(){return en}),n.d(e,"DodecahedronGeometry",function(){return nn}),n.d(e,"DodecahedronBufferGeometry",function(){return rn}),n.d(e,"PolyhedronGeometry",function(){return Xe}),n.d(e,"PolyhedronBufferGeometry",function(){return Ke}),n.d(e,"TubeGeometry",function(){return on}),n.d(e,"TubeBufferGeometry",function(){return sn}),n.d(e,"TorusKnotGeometry",function(){return an}),n.d(e,"TorusKnotBufferGeometry",function(){return cn}),n.d(e,"TorusGeometry",function(){return ln}),n.d(e,"TorusBufferGeometry",function(){return un}),n.d(e,"TextGeometry",function(){return Hn}),n.d(e,"TextBufferGeometry",function(){return Vn}),n.d(e,"SphereGeometry",function(){return Wn}),n.d(e,"SphereBufferGeometry",function(){return Gn}),n.d(e,"RingGeometry",function(){return qn}),n.d(e,"RingBufferGeometry",function(){return Xn}),n.d(e,"PlaneGeometry",function(){return z}),n.d(e,"PlaneBufferGeometry",function(){return H}),n.d(e,"LatheGeometry",function(){return Kn}),n.d(e,"LatheBufferGeometry",function(){return Yn}),n.d(e,"ShapeGeometry",function(){return Zn}),n.d(e,"ShapeBufferGeometry",function(){return Jn}),n.d(e,"ExtrudeGeometry",function(){return $n}),n.d(e,"ExtrudeBufferGeometry",function(){return zn}),n.d(e,"EdgesGeometry",function(){return ti}),n.d(e,"ConeGeometry",function(){return ii}),n.d(e,"ConeBufferGeometry",function(){return ri}),n.d(e,"CylinderGeometry",function(){return ei}),n.d(e,"CylinderBufferGeometry",function(){return ni}),n.d(e,"CircleGeometry",function(){return oi}),n.d(e,"CircleBufferGeometry",function(){return si}),n.d(e,"BoxGeometry",function(){return U}),n.d(e,"BoxBufferGeometry",function(){return $}),n.d(e,"ShadowMaterial",function(){return ai}),n.d(e,"SpriteMaterial",function(){return ke}),n.d(e,"RawShaderMaterial",function(){return ci}),n.d(e,"ShaderMaterial",function(){return G}),n.d(e,"PointsMaterial",function(){return je}),n.d(e,"MeshPhysicalMaterial",function(){return ui}),n.d(e,"MeshStandardMaterial",function(){return li}),n.d(e,"MeshPhongMaterial",function(){return hi}),n.d(e,"MeshToonMaterial",function(){return di}),n.d(e,"MeshNormalMaterial",function(){return fi}),n.d(e,"MeshLambertMaterial",function(){return pi}),n.d(e,"MeshDepthMaterial",function(){return pe}),n.d(e,"MeshDistanceMaterial",function(){return ge}),n.d(e,"MeshBasicMaterial",function(){return W});n.d(e,"LineDashedMaterial",function(){return gi}),n.d(e,"LineBasicMaterial",function(){return De}),n.d(e,"Material",function(){return V}),n.d(e,"Float64BufferAttribute",function(){return B}),n.d(e,"Float32BufferAttribute",function(){return D}),n.d(e,"Uint32BufferAttribute",function(){return R}),n.d(e,"Int32BufferAttribute",function(){return L}),n.d(e,"Uint16BufferAttribute",function(){return P}),n.d(e,"Int16BufferAttribute",function(){return O}),n.d(e,"Uint8ClampedBufferAttribute",function(){return F}),n.d(e,"Uint8BufferAttribute",function(){return k}),n.d(e,"Int8BufferAttribute",function(){return T}),n.d(e,"BufferAttribute",function(){return M}),n.d(e,"ArcCurve",function(){return Ci}),n.d(e,"CatmullRomCurve3",function(){return Mi}),n.d(e,"CubicBezierCurve",function(){return Ni}),n.d(e,"CubicBezierCurve3",function(){return ji}),n.d(e,"EllipseCurve",function(){return Ai}),n.d(e,"LineCurve",function(){return Ui}),n.d(e,"LineCurve3",function(){return $i}),n.d(e,"QuadraticBezierCurve",function(){return zi}),n.d(e,"QuadraticBezierCurve3",function(){return Hi}),n.d(e,"SplineCurve",function(){return Vi}),n.d(e,"REVISION",function(){return Jo}),n.d(e,"MOUSE",function(){return Qo}),n.d(e,"CullFaceNone",function(){return ts}),n.d(e,"CullFaceBack",function(){return es}),n.d(e,"CullFaceFront",function(){return ns}),n.d(e,"CullFaceFrontBack",function(){return is}),n.d(e,"FrontFaceDirectionCW",function(){return rs}),n.d(e,"FrontFaceDirectionCCW",function(){return os}),n.d(e,"BasicShadowMap",function(){return ss}),n.d(e,"PCFShadowMap",function(){return as}),n.d(e,"PCFSoftShadowMap",function(){return cs}),n.d(e,"FrontSide",function(){return ls}),n.d(e,"BackSide",function(){return us}),n.d(e,"DoubleSide",function(){return hs}),n.d(e,"FlatShading",function(){return ds}),n.d(e,"SmoothShading",function(){return fs}),n.d(e,"NoColors",function(){return ps}),n.d(e,"FaceColors",function(){return gs}),n.d(e,"VertexColors",function(){return ms}),n.d(e,"NoBlending",function(){return vs}),n.d(e,"NormalBlending",function(){return ys}),n.d(e,"AdditiveBlending",function(){return bs}),n.d(e,"SubtractiveBlending",function(){return ws}),n.d(e,"MultiplyBlending",function(){return _s}),n.d(e,"CustomBlending",function(){return xs}),n.d(e,"AddEquation",function(){return Es}),n.d(e,"SubtractEquation",function(){return As}),n.d(e,"ReverseSubtractEquation",function(){return Cs}),n.d(e,"MinEquation",function(){return Ss}),n.d(e,"MaxEquation",function(){return Ms}),n.d(e,"ZeroFactor",function(){return Ts}),n.d(e,"OneFactor",function(){return ks}),n.d(e,"SrcColorFactor",function(){return Fs}),n.d(e,"OneMinusSrcColorFactor",function(){return Os}),n.d(e,"SrcAlphaFactor",function(){return Ps}),n.d(e,"OneMinusSrcAlphaFactor",function(){return Ls}),n.d(e,"DstAlphaFactor",function(){return Rs}),n.d(e,"OneMinusDstAlphaFactor",function(){return Ds}),n.d(e,"DstColorFactor",function(){return Bs}),n.d(e,"OneMinusDstColorFactor",function(){return Is}),n.d(e,"SrcAlphaSaturateFactor",function(){return Ns}),n.d(e,"NeverDepth",function(){return js}),n.d(e,"AlwaysDepth",function(){return Us}),n.d(e,"LessDepth",function(){return $s}),n.d(e,"LessEqualDepth",function(){return zs}),n.d(e,"EqualDepth",function(){return Hs}),n.d(e,"GreaterEqualDepth",function(){return Vs}),n.d(e,"GreaterDepth",function(){return Ws}),n.d(e,"NotEqualDepth",function(){return Gs}),n.d(e,"MultiplyOperation",function(){return qs}),n.d(e,"MixOperation",function(){return Xs}),n.d(e,"AddOperation",function(){return Ks}),n.d(e,"NoToneMapping",function(){return Ys}),n.d(e,"LinearToneMapping",function(){return Zs}),n.d(e,"ReinhardToneMapping",function(){return Js}),n.d(e,"Uncharted2ToneMapping",function(){return Qs}),n.d(e,"CineonToneMapping",function(){return ta}),n.d(e,"UVMapping",function(){return ea}),n.d(e,"CubeReflectionMapping",function(){return na}),n.d(e,"CubeRefractionMapping",function(){return ia}),n.d(e,"EquirectangularReflectionMapping",function(){return ra}),n.d(e,"EquirectangularRefractionMapping",function(){return oa}),n.d(e,"SphericalReflectionMapping",function(){return sa}),n.d(e,"CubeUVReflectionMapping",function(){return aa}),n.d(e,"CubeUVRefractionMapping",function(){return ca}),n.d(e,"RepeatWrapping",function(){return la}),n.d(e,"ClampToEdgeWrapping",function(){return ua}),n.d(e,"MirroredRepeatWrapping",function(){return ha}),n.d(e,"NearestFilter",function(){return da}),n.d(e,"NearestMipMapNearestFilter",function(){return fa}),n.d(e,"NearestMipMapLinearFilter",function(){return pa}),n.d(e,"LinearFilter",function(){return ga}),n.d(e,"LinearMipMapNearestFilter",function(){return ma}),n.d(e,"LinearMipMapLinearFilter",function(){return va}),n.d(e,"UnsignedByteType",function(){return ya}),n.d(e,"ByteType",function(){return ba}),n.d(e,"ShortType",function(){return wa}),n.d(e,"UnsignedShortType",function(){return _a}),n.d(e,"IntType",function(){return xa}),n.d(e,"UnsignedIntType",function(){return Ea}),n.d(e,"FloatType",function(){return Aa}),n.d(e,"HalfFloatType",function(){return Ca}),n.d(e,"UnsignedShort4444Type",function(){return Sa}),n.d(e,"UnsignedShort5551Type",function(){return Ma}),n.d(e,"UnsignedShort565Type",function(){return Ta}),n.d(e,"UnsignedInt248Type",function(){return ka}),n.d(e,"AlphaFormat",function(){return Fa}),n.d(e,"RGBFormat",function(){return Oa}),n.d(e,"RGBAFormat",function(){return Pa}),n.d(e,"LuminanceFormat",function(){return La}),n.d(e,"LuminanceAlphaFormat",function(){return Ra}),n.d(e,"RGBEFormat",function(){return Da}),n.d(e,"DepthFormat",function(){return Ba}),n.d(e,"DepthStencilFormat",function(){return Ia}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return Na}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return ja}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return Ua}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return $a}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return za}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return Ha}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return Va}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return Wa}),n.d(e,"RGB_ETC1_Format",function(){return Ga}),n.d(e,"RGBA_ASTC_4x4_Format",function(){return qa}),n.d(e,"RGBA_ASTC_5x4_Format",function(){return Xa}),n.d(e,"RGBA_ASTC_5x5_Format",function(){return Ka}),n.d(e,"RGBA_ASTC_6x5_Format",function(){return Ya}),n.d(e,"RGBA_ASTC_6x6_Format",function(){return Za}),n.d(e,"RGBA_ASTC_8x5_Format",function(){return Ja}),n.d(e,"RGBA_ASTC_8x6_Format",function(){return Qa}),n.d(e,"RGBA_ASTC_8x8_Format",function(){return tc}),n.d(e,"RGBA_ASTC_10x5_Format",function(){return ec}),n.d(e,"RGBA_ASTC_10x6_Format",function(){return nc}),n.d(e,"RGBA_ASTC_10x8_Format",function(){return ic}),n.d(e,"RGBA_ASTC_10x10_Format",function(){return rc}),n.d(e,"RGBA_ASTC_12x10_Format",function(){return oc}),n.d(e,"RGBA_ASTC_12x12_Format",function(){return sc}),n.d(e,"LoopOnce",function(){return ac}),n.d(e,"LoopRepeat",function(){return cc}),n.d(e,"LoopPingPong",function(){return lc}),n.d(e,"InterpolateDiscrete",function(){return uc}),n.d(e,"InterpolateLinear",function(){return hc}),n.d(e,"InterpolateSmooth",function(){return dc}),n.d(e,"ZeroCurvatureEnding",function(){return fc}),n.d(e,"ZeroSlopeEnding",function(){return pc}),n.d(e,"WrapAroundEnding",function(){return gc}),n.d(e,"TrianglesDrawMode",function(){return mc}),n.d(e,"TriangleStripDrawMode",function(){return vc}),n.d(e,"TriangleFanDrawMode",function(){return yc}),n.d(e,"LinearEncoding",function(){return bc}),n.d(e,"sRGBEncoding",function(){return wc}),n.d(e,"GammaEncoding",function(){return _c}),n.d(e,"RGBEEncoding",function(){return xc}),n.d(e,"LogLuvEncoding",function(){return Ec}),n.d(e,"RGBM7Encoding",function(){return Ac}),n.d(e,"RGBM16Encoding",function(){return Cc}),n.d(e,"RGBDEncoding",function(){return Sc}),n.d(e,"BasicDepthPacking",function(){return Mc}),n.d(e,"RGBADepthPacking",function(){return Tc}),n.d(e,"CubeGeometry",function(){return U}),n.d(e,"Face4",function(){return bo}),n.d(e,"LineStrip",function(){return yl}),n.d(e,"LinePieces",function(){return bl}),n.d(e,"MeshFaceMaterial",function(){return wo}),n.d(e,"MultiMaterial",function(){return _o}),n.d(e,"PointCloud",function(){return xo}),n.d(e,"Particle",function(){return Eo}),n.d(e,"ParticleSystem",function(){return Ao}),n.d(e,"PointCloudMaterial",function(){return Co}),n.d(e,"ParticleBasicMaterial",function(){return So}),n.d(e,"ParticleSystemMaterial",function(){return Mo}),n.d(e,"Vertex",function(){return To}),n.d(e,"DynamicBufferAttribute",function(){return ko}),n.d(e,"Int8Attribute",function(){return Fo}),n.d(e,"Uint8Attribute",function(){return Oo}),n.d(e,"Uint8ClampedAttribute",function(){return Po}),n.d(e,"Int16Attribute",function(){return Lo}),n.d(e,"Uint16Attribute",function(){return Ro}),n.d(e,"Int32Attribute",function(){return Do}),n.d(e,"Uint32Attribute",function(){return Bo}),n.d(e,"Float32Attribute",function(){return Io}),n.d(e,"Float64Attribute",function(){return No}),n.d(e,"ClosedSplineCurve3",function(){return jo}),n.d(e,"SplineCurve3",function(){return Uo}),n.d(e,"Spline",function(){return $o}),n.d(e,"AxisHelper",function(){return zo}),n.d(e,"BoundingBoxHelper",function(){return Ho}),n.d(e,"EdgesHelper",function(){return Vo}),n.d(e,"WireframeHelper",function(){return Wo}),n.d(e,"XHRLoader",function(){return Go}),n.d(e,"BinaryTextureLoader",function(){return qo}),n.d(e,"GeometryUtils",function(){return wl}),n.d(e,"ImageUtils",function(){return _l}),n.d(e,"Projector",function(){return Xo}),n.d(e,"CanvasRenderer",function(){return Ko}),n.d(e,"SceneUtils",function(){return xl}),n.d(e,"LensFlare",function(){return Yo});var Zo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}}(),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var i=n.slice(0),r=0,o=i.length;r<o;r++)i[r].call(this,t)}}}});var Jo="91",Qo={LEFT:0,MIDDLE:1,RIGHT:2},ts=0,es=1,ns=2,is=3,rs=0,os=1,ss=0,as=1,cs=2,ls=0,us=1,hs=2,ds=1,fs=2,ps=0,gs=1,ms=2,vs=0,ys=1,bs=2,ws=3,_s=4,xs=5,Es=100,As=101,Cs=102,Ss=103,Ms=104,Ts=200,ks=201,Fs=202,Os=203,Ps=204,Ls=205,Rs=206,Ds=207,Bs=208,Is=209,Ns=210,js=0,Us=1,$s=2,zs=3,Hs=4,Vs=5,Ws=6,Gs=7,qs=0,Xs=1,Ks=2,Ys=0,Zs=1,Js=2,Qs=3,ta=4,ea=300,na=301,ia=302,ra=303,oa=304,sa=305,aa=306,ca=307,la=1e3,ua=1001,ha=1002,da=1003,fa=1004,pa=1005,ga=1006,ma=1007,va=1008,ya=1009,ba=1010,wa=1011,_a=1012,xa=1013,Ea=1014,Aa=1015,Ca=1016,Sa=1017,Ma=1018,Ta=1019,ka=1020,Fa=1021,Oa=1022,Pa=1023,La=1024,Ra=1025,Da=Pa,Ba=1026,Ia=1027,Na=33776,ja=33777,Ua=33778,$a=33779,za=35840,Ha=35841,Va=35842,Wa=35843,Ga=36196,qa=37808,Xa=37809,Ka=37810,Ya=37811,Za=37812,Ja=37813,Qa=37814,tc=37815,ec=37816,nc=37817,ic=37818,rc=37819,oc=37820,sc=37821,ac=2200,cc=2201,lc=2202,uc=2300,hc=2301,dc=2302,fc=2400,pc=2401,gc=2402,mc=0,vc=1,yc=2,bc=3e3,wc=3001,_c=3007,xc=3002,Ec=3003,Ac=3004,Cc=3005,Sc=3006,Mc=3200,Tc=3201,kc={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16).toUpperCase();return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*kc.DEG2RAD},radToDeg:function(t){return t*kc.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new r,e=new r;return function(n,i){return t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}}),Object.assign(o.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,o,s,a,c,l,u,h,d,f,p,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=c,m[6]=l,m[10]=u,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new a;return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=o*l,d=o*u,f=s*l,p=s*u;e[0]=a*l,e[4]=-a*u,e[8]=c,e[1]=d+f*c,e[5]=h-p*c,e[9]=-s*a,e[2]=p-h*c,e[6]=f+d*c,e[10]=o*a}else if("YXZ"===t.order){var g=a*l,m=a*u,v=c*l,y=c*u;e[0]=g+y*s,e[4]=v*s-m,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-s,e[2]=m*s-v,e[6]=y+g*s,e[10]=o*a}else if("ZXY"===t.order){var g=a*l,m=a*u,v=c*l,y=c*u;e[0]=g-y*s,e[4]=-o*u,e[8]=v+m*s,e[1]=m+v*s,e[5]=o*l,e[9]=y-g*s,e[2]=-o*c,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var h=o*l,d=o*u,f=s*l,p=s*u;e[0]=a*l,e[4]=f*c-d,e[8]=h*c+p,e[1]=a*u,e[5]=p*c+h,e[9]=d*c-f,e[2]=-c,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var b=o*a,w=o*c,_=s*a,x=s*c;e[0]=a*l,e[4]=x-b*u,e[8]=_*u+w,e[1]=u,e[5]=o*l,e[9]=-s*l,e[2]=-c*l,e[6]=w*u+_,e[10]=b-x*u}else if("XZY"===t.order){var b=o*a,w=o*c,_=s*a,x=s*c;e[0]=a*l,e[4]=-u,e[8]=c*l,e[1]=b*u+x,e[5]=o*l,e[9]=w*u-_,e[2]=_*u-w,e[6]=s*l,e[10]=x*u+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,i=t._y,r=t._z,o=t._w,s=n+n,a=i+i,c=r+r,l=n*s,u=n*a,h=n*c,d=i*a,f=i*c,p=r*c,g=o*s,m=o*a,v=o*c;return e[0]=1-(d+p),e[4]=u-v,e[8]=h+m,e[1]=u+v,e[5]=1-(l+p),e[9]=f-g,e[2]=h-m,e[6]=f+g,e[10]=1-(l+d),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new a,e=new a,n=new a;return function(i,r,o){var s=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],s=n[4],a=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],b=n[11],w=n[15],_=i[0],x=i[4],E=i[8],A=i[12],C=i[1],S=i[5],M=i[9],T=i[13],k=i[2],F=i[6],O=i[10],P=i[14],L=i[3],R=i[7],D=i[11],B=i[15];return r[0]=o*_+s*C+a*k+c*L,r[4]=o*x+s*S+a*F+c*R,r[8]=o*E+s*M+a*O+c*D,r[12]=o*A+s*T+a*P+c*B,r[1]=l*_+u*C+h*k+d*L,r[5]=l*x+u*S+h*F+d*R,r[9]=l*E+u*M+h*O+d*D,r[13]=l*A+u*T+h*P+d*B,r[2]=f*_+p*C+g*k+m*L,r[6]=f*x+p*S+g*F+m*R,r[10]=f*E+p*M+g*O+m*D,r[14]=f*A+p*T+g*P+m*B,r[3]=v*_+y*C+b*k+w*L,r[7]=v*x+y*S+b*F+w*R,r[11]=v*E+y*M+b*O+w*D,r[15]=v*A+y*T+b*P+w*B,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new a;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],s=t[5],a=t[9],c=t[13],l=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*a*u-i*c*u-r*s*h+n*c*h+i*s*d-n*a*d)+t[7]*(+e*a*d-e*c*h+r*o*h-i*o*d+i*c*l-r*a*l)+t[11]*(+e*c*u-e*s*d-r*o*u+n*o*d+r*s*l-n*c*l)+t[15]*(-i*s*l-e*a*u+e*s*h+i*o*u-n*o*h+n*a*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],s=i[2],a=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],g=i[11],m=i[12],v=i[13],y=i[14],b=i[15],w=f*y*h-v*p*h+v*u*g-l*y*g-f*u*b+l*p*b,_=m*p*h-d*y*h-m*u*g+c*y*g+d*u*b-c*p*b,x=d*v*h-m*f*h+m*l*g-c*v*g-d*l*b+c*f*b,E=m*f*u-d*v*u-m*l*p+c*v*p+d*l*y-c*f*y,A=r*w+o*_+s*x+a*E;if(0===A){var C="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(C);return console.warn(C),this.identity()}var S=1/A;return n[0]=w*S,n[1]=(v*p*a-f*y*a-v*s*g+o*y*g+f*s*b-o*p*b)*S,n[2]=(l*y*a-v*u*a+v*s*h-o*y*h-l*s*b+o*u*b)*S,n[3]=(f*u*a-l*p*a-f*s*h+o*p*h+l*s*g-o*u*g)*S,n[4]=_*S,n[5]=(d*y*a-m*p*a+m*s*g-r*y*g-d*s*b+r*p*b)*S,n[6]=(m*u*a-c*y*a-m*s*h+r*y*h+c*s*b-r*u*b)*S,n[7]=(c*p*a-d*u*a+d*s*h-r*p*h-c*s*g+r*u*g)*S,n[8]=x*S,n[9]=(m*f*a-d*v*a-m*o*g+r*v*g+d*o*b-r*f*b)*S,n[10]=(c*v*a-m*l*a+m*o*h-r*v*h-c*o*b+r*l*b)*S,n[11]=(d*l*a-c*f*a-d*o*h+r*f*h+c*o*g-r*l*g)*S,n[12]=E*S,n[13]=(d*v*s-m*f*s+m*o*p-r*v*p-d*o*y+r*f*y)*S,n[14]=(m*l*s-c*v*s-m*o*u+r*v*u+c*o*y-r*l*y)*S,n[15]=(c*f*s-d*l*s+d*o*u-r*f*u-c*o*p+r*l*p)*S,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,s=t.y,a=t.z,c=r*o,l=r*s;return this.set(c*o+n,c*s-i*a,c*a+i*s,0,c*s+i*a,l*s+n,l*a-i*o,0,c*a-i*s,l*a+i*o,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new a,e=new o;return function(n,i,r){var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),c=t.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var l=1/s,u=1/a,h=1/c;return e.elements[0]*=l,e.elements[1]*=l,e.elements[2]*=l,e.elements[4]*=u,e.elements[5]*=u,e.elements[6]*=u,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,i.setFromRotationMatrix(e),r.x=s,r.y=a,r.z=c,this}}(),makePerspective:function(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(e-t),c=2*r/(n-i),l=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=c,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,n,i,r,o){var s=this.elements,a=1/(e-t),c=1/(n-i),l=1/(o-r),u=(e+t)*a,h=(n+i)*c,d=(o+r)*l;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(s,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,o,s){var a=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],f=r[o+2],p=r[o+3];if(u!==p||a!==h||c!==d||l!==f){var g=1-s,m=a*h+c*d+l*f+u*p,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),w=Math.atan2(b,m*v);g=Math.sin(g*w)/b,s=Math.sin(s*w)/b}var _=s*v;if(a=a*g+h*_,c=c*g+d*_,l=l*g+f*_,u=u*g+p*_,g===1-s){var x=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=x,c*=x,l*=x,u*=x}}t[e]=a,t[e+1]=c,t[e+2]=l,t[e+3]=u}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(s.prototype,{set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,s=Math.cos,a=Math.sin,c=s(n/2),l=s(i/2),u=s(r/2),h=a(n/2),d=a(i/2),f=a(r/2);return"XYZ"===o?(this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f):"YXZ"===o?(this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f):"ZXY"===o?(this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f):"ZYX"===o?(this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f):"YZX"===o?(this._x=h*l*u+c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u-h*d*f):"XZY"===o&&(this._x=h*l*u-c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u+h*d*f),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],c=n[9],l=n[2],u=n[6],h=n[10],d=i+a+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(u-c)*e,this._y=(o-l)*e,this._z=(s-r)*e):i>a&&i>h?(e=2*Math.sqrt(1+i-a-h),this._w=(u-c)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+l)/e):a>h?(e=2*Math.sqrt(1+a-i-h),this._w=(o-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+h-i-a),this._w=(s-r)/e,this._x=(o+l)/e,this._y=(c+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new a;return function(n,i){return void 0===e&&(e=new a),t=n.dot(i)+1,t<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,s=e._x,a=e._y,c=e._z,l=e._w;return this._x=n*l+o*s+i*c-r*a,this._y=i*l+o*a+r*s-n*c,this._z=r*l+o*c+n*a-i*s,this._w=o*l-n*s-i*a-r*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,s=o*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(a,s),l=Math.sin((1-e)*c)/a,u=Math.sin(e*c)/a;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new s;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new s;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,s=t.z,a=t.w,c=a*e+o*i-s*n,l=a*n+s*e-r*i,u=a*i+r*n-o*e,h=-r*e-o*n-s*i;return this.x=c*a+h*-r+l*-s-u*-o,this.y=l*a+h*-o+u*-r-c*-s,this.z=u*a+h*-s+c*-o-l*-r,this},project:function(){var t=new o;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new o;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new a,e=new a;return function(n,i){return t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new a;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new a;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(kc.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(c.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,o,s,a,c){var l=this.elements;return l[0]=t,l[1]=i,l[2]=s,l[3]=e,l[4]=r,l[5]=a,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new a;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],s=n[3],a=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],g=i[3],m=i[6],v=i[1],y=i[4],b=i[7],w=i[2],_=i[5],x=i[8];return r[0]=o*p+s*v+a*w,r[3]=o*g+s*y+a*_,r[6]=o*m+s*b+a*x,r[1]=c*p+l*v+u*w,r[4]=c*g+l*y+u*_,r[7]=c*m+l*b+u*x,r[2]=h*p+d*v+f*w,r[5]=h*g+d*y+f*_,r[8]=h*m+d*b+f*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return e*o*l-e*s*c-n*r*l+n*s*a+i*r*c-i*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],f=d*c-l*h,p=l*u-d*a,g=h*a-c*u,m=r*f+o*p+s*g;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return i[0]=f*y,i[1]=(s*h-d*o)*y,i[2]=(l*o-s*c)*y,i[3]=p*y,i[4]=(d*r-s*u)*y,i[5]=(s*a-l*r)*y,i[6]=g*y,i[7]=(o*u-h*r)*y,i[8]=(c*r-o*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,o,s){var a=Math.cos(r),c=Math.sin(r);this.set(n*a,n*c,-n*(a*o+c*s)+o+t,-i*c,i*a,-i*(-c*o+a*s)+s+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],s=i[6],a=i[1],c=i[4],l=i[7];return i[0]=e*r+n*a,i[3]=e*o+n*c,i[6]=e*s+n*l,i[1]=-n*r+e*a,i[4]=-n*o+e*c,i[7]=-n*s+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Fc=0;l.DEFAULT_IMAGE=void 0,l.DEFAULT_MAPPING=ea,l.prototype=Object.assign(Object.create(i.prototype),{constructor:l,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=kc.generateUUID()),e||void 0!==t.images[i.uuid]||(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height;var n=e.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===ea){if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case la:t.x=t.x-Math.floor(t.x);break;case ua:t.x=t.x<0?0:1;break;case ha:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case la:t.y=t.y-Math.floor(t.y);break;case ua:t.y=t.y<0?0:1;break;case ha:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(l.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(u.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,o=t.elements,s=o[0],a=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(a-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(a+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(s+u+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var g=(s+1)/2,m=(u+1)/2,v=(p+1)/2,y=(a+l)/4,b=(c+d)/4,w=(h+f)/4;return g>m&&g>v?g<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=y/n,r=b/n):m>v?m<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(m),n=y/i,r=w/i):v<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=b/r,i=w/r),this.set(n,i,r,e),this}var _=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(l-a)*(l-a));return Math.abs(_)<.001&&(_=1),this.x=(f-h)/_,this.y=(c-d)/_,this.z=(l-a)/_,this.w=Math.acos((s+u+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new u,e=new u),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),h.prototype=Object.assign(Object.create(i.prototype),{constructor:h,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.isWebGLRenderTargetCube=!0,f.prototype=Object.create(l.prototype),f.prototype.constructor=f,f.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,c=t.length;a<c;a+=3){var l=t[a],u=t[a+1],h=t[a+2];l<e&&(e=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,c=t.count;a<c;a++){var l=t.getX(a),u=t.getY(a),h=t.getZ(a);l<e&&(e=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new a;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new a),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new a),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,i=s.length;n<i;n++)r.copy(s[n]),r.applyMatrix4(t.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var a=o.attributes.position;if(void 0!==a)for(n=0,i=a.count;n<i;n++)r.fromBufferAttribute(a,n).applyMatrix4(t.matrixWorld),e.expandByPoint(r)}}var e,n,i,r=new a;return function(n){return e=this,n.updateMatrixWorld(!0),n.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new a),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new a;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){function t(t){var r,o;for(r=0,o=t.length-3;r<=o;r+=3){c.fromArray(t,r);var s=u.x*Math.abs(c.x)+u.y*Math.abs(c.y)+u.z*Math.abs(c.z),a=e.dot(c),l=n.dot(c),h=i.dot(c);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>s)return!1}return!0}var e=new a,n=new a,i=new a,r=new a,o=new a,s=new a,c=new a,l=new a,u=new a,h=new a;return function(a){if(this.isEmpty())return!1;this.getCenter(l),u.subVectors(this.max,l),e.subVectors(a.a,l),n.subVectors(a.b,l),i.subVectors(a.c,l),r.subVectors(n,e),o.subVectors(i,n),s.subVectors(e,i);var c=[0,-r.z,r.y,0,-o.z,o.y,0,-s.z,s.y,r.z,0,-r.x,o.z,0,-o.x,s.z,0,-s.x,-r.y,r.x,0,-o.y,o.x,0,-s.y,s.x,0];return!!t(c)&&(c=[1,0,0,0,1,0,0,0,1],!!t(c)&&(h.crossVectors(r,o),c=[h.x,h.y,h.z],t(c)))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new a),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new a;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new a;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new g),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new a,new a,new a,new a,new a,new a,new a,new a];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(g.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new p;return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new a),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new p),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(m.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new a,e=new a;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new a;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new a);var i=e.delta(t),r=this.normal.dot(i);if(0!==r){var o=-(e.start.dot(this.normal)+this.constant)/r;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new a,e=new c;return function(n,i){var r=i||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),s=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(s),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(v.prototype,{set:function(t,e,n,i,r,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return e[0].setComponents(s-i,u-a,p-h,y-g).normalize(),e[1].setComponents(s+i,u+a,p+h,y+g).normalize(),e[2].setComponents(s+r,u+c,p+d,y+m).normalize(),e[3].setComponents(s-r,u-c,p-d,y-m).normalize(),e[4].setComponents(s-o,u-l,p-f,y-v).normalize(),e[5].setComponents(s+o,u+l,p+f,y+v).normalize(),this},intersectsObject:function(){var t=new g;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new g;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var t=new a,e=new a;return function(n){for(var i=this.planes,r=0;r<6;r++){var o=i[r];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var s=o.distanceToPoint(t),a=o.distanceToPoint(e);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Oc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Pc={merge:function(t){for(var e={},n=0;n<t.length;n++){var i=this.clone(t[n]);for(var r in i)e[r]=i[r]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}},Lc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=kc.euclideanModulo(e,1),n=kc.clamp(n,0,1),i=kc.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,a=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(s,a,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=n[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=Lc[t];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,o=this.b,s=Math.max(i,r,o),a=Math.min(i,r,o),c=(a+s)/2;if(a===s)e=0,n=0;else{var l=s-a;switch(n=c<=.5?l/(s+a):l/(2-s-a),s){case i:e=(r-o)/l+(r<o?6:0);break;case r:e=(o-i)/l+2;break;case o:e=(i-r)/l+4}e/=6}return t.h=e,t.s=n,t.l=c,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,i){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=i,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Rc={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new c},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new c}}},Dc={basic:{uniforms:Pc.merge([Rc.common,Rc.specularmap,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.fog]),vertexShader:Oc.meshbasic_vert,fragmentShader:Oc.meshbasic_frag},lambert:{uniforms:Pc.merge([Rc.common,Rc.specularmap,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.emissivemap,Rc.fog,Rc.lights,{emissive:{value:new y(0)}}]),vertexShader:Oc.meshlambert_vert,fragmentShader:Oc.meshlambert_frag},phong:{uniforms:Pc.merge([Rc.common,Rc.specularmap,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.emissivemap,Rc.bumpmap,Rc.normalmap,Rc.displacementmap,Rc.gradientmap,Rc.fog,Rc.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:Oc.meshphong_vert,fragmentShader:Oc.meshphong_frag},standard:{uniforms:Pc.merge([Rc.common,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.emissivemap,Rc.bumpmap,Rc.normalmap,Rc.displacementmap,Rc.roughnessmap,Rc.metalnessmap,Rc.fog,Rc.lights,{emissive:{value:new y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Oc.meshphysical_vert,fragmentShader:Oc.meshphysical_frag},points:{uniforms:Pc.merge([Rc.points,Rc.fog]),vertexShader:Oc.points_vert,fragmentShader:Oc.points_frag},dashed:{uniforms:Pc.merge([Rc.common,Rc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Oc.linedashed_vert,fragmentShader:Oc.linedashed_frag},depth:{uniforms:Pc.merge([Rc.common,Rc.displacementmap]),vertexShader:Oc.depth_vert,fragmentShader:Oc.depth_frag},normal:{uniforms:Pc.merge([Rc.common,Rc.bumpmap,Rc.normalmap,Rc.displacementmap,{opacity:{value:1}}]),vertexShader:Oc.normal_vert,fragmentShader:Oc.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Oc.cube_vert,fragmentShader:Oc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Oc.equirect_vert,fragmentShader:Oc.equirect_frag},distanceRGBA:{uniforms:Pc.merge([Rc.common,Rc.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Oc.distanceRGBA_vert,fragmentShader:Oc.distanceRGBA_frag},shadow:{uniforms:Pc.merge([Rc.lights,Rc.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:Oc.shadow_vert,fragmentShader:Oc.shadow_frag}};Dc.physical={uniforms:Pc.merge([Dc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Oc.meshphysical_vert,fragmentShader:Oc.meshphysical_frag},w.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],w.DefaultOrder="XYZ",Object.defineProperties(w.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(w.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=kc.clamp,r=t.elements,o=r[0],s=r[4],a=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],f=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===e?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===e?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new o;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new s;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var Bc=0;x.DefaultUp=new a(0,1,0),x.DefaultMatrixAutoUpdate=!0,x.prototype=Object.assign(Object.create(i.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new s;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new s;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new a(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new a(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new a(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new a;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new a(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new a(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new a(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o,e=new a;return function(n,i,r){n.isVector3?e.copy(n):e.set(n,i,r),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new a),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new a,e=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new a,e=new s;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new s;return function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new a),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var i=void 0===t||"string"===typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),void 0!==this.geometry){o.geometry=e(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var c=0,l=a.length;c<l;c++){var u=a[c];e(t.shapes,u)}else e(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],c=0,l=this.material.length;c<l;c++)h.push(e(t.materials,this.material[c]));o.material=h}else o.material=e(t.materials,this.material);if(this.children.length>0){o.children=[];for(var c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(t).object)}if(i){var d=n(t.geometries),f=n(t.materials),p=n(t.textures),g=n(t.images),a=n(t.shapes);d.length>0&&(r.geometries=d),f.length>0&&(r.materials=f),p.length>0&&(r.textures=p),g.length>0&&(r.images=g),a.length>0&&(r.shapes=a)}return r.object=o,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),E.prototype=Object.assign(Object.create(x.prototype),{constructor:E,isCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new s;return function(e){return void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new a),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){x.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),A.prototype=Object.assign(Object.create(E.prototype),{constructor:A,isOrthographicCamera:!0,copy:function(t,e){return E.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,s=i+e,a=i-e;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/c),o=r+u*(this.view.width/c),s-=h*(this.view.offsetY/l),a=s-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far)},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(C.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ic=0;S.prototype=Object.assign(Object.create(i.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(t){for(var e=(new c).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(t)}for(var n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var o=0,s=r.vertexNormals.length;o<s;o++)r.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new o;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new o;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new o;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new o;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new o;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new x;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,r){var o=void 0!==c?[d[t].clone(),d[e].clone(),d[i].clone()]:[],s=void 0!==l?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],a=new C(t,e,i,o,s,r);n.faces.push(a),void 0!==u&&n.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[i].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[i].clone()])}var n=this,i=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,c=void 0!==o.normal?o.normal.array:void 0,l=void 0!==o.color?o.color.array:void 0,u=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],f=[],p=[],g=0,m=0;g<s.length;g+=3,m+=2)n.vertices.push(new a(s[g],s[g+1],s[g+2])),void 0!==c&&d.push(new a(c[g],c[g+1],c[g+2])),void 0!==l&&n.colors.push(new y(l[g],l[g+1],l[g+2])),void 0!==u&&f.push(new r(u[m],u[m+1])),void 0!==h&&p.push(new r(h[m],h[m+1]));var v=t.groups;if(v.length>0)for(var g=0;g<v.length;g++)for(var b=v[g],w=b.start,_=b.count,m=w,x=w+_;m<x;m+=3)void 0!==i?e(i[m],i[m+1],i[m+2],b.materialIndex):e(m,m+1,m+2,b.materialIndex);else if(void 0!==i)for(var g=0;g<i.length;g+=3)e(i[g],i[g+1],i[g+2]);else for(var g=0;g<s.length/3;g+=3)e(g,g+1,g+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new o;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new a,e=new a,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b],c=this.vertices[r.c];t.subVectors(c,s),e.subVectors(o,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,i,r,o,s;for(s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new a;if(t){var c,l,u,h=new a,d=new a;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],c=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],h.subVectors(u,l),d.subVectors(c,l),h.cross(d),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var f=o.vertexNormals;3===f.length?(f[0].copy(s[o.a]),f[1].copy(s[o.b]),f[2].copy(s[o.c])):(f[0]=s[o.a].clone(),f[1]=s[o.b].clone(),f[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new S;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,c,l=this.morphNormals[t].faceNormals,u=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)s=new a,c={a:new a,b:new a,c:new a},l.push(s),u.push(c)}var h=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,c;for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],s=h.faceNormals[n],c=h.vertexNormals[n],s.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var i,r=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,l=t.faces,u=this.faceVertexUvs[0],h=t.faceVertexUvs[0],d=this.colors,f=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new c).getNormalMatrix(e));for(var p=0,g=s.length;p<g;p++){var m=s[p],v=m.clone();void 0!==e&&v.applyMatrix4(e),o.push(v)}for(var p=0,g=f.length;p<g;p++)d.push(f[p].clone());for(p=0,g=l.length;p<g;p++){var y,b,w,_=l[p],x=_.vertexNormals,E=_.vertexColors;y=new C(_.a+r,_.b+r,_.c+r),y.normal.copy(_.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var A=0,S=x.length;A<S;A++)b=x[A].clone(),void 0!==i&&b.applyMatrix3(i).normalize(),y.vertexNormals.push(b);y.color.copy(_.color);for(var A=0,S=E.length;A<S;A++)w=E[A],y.vertexColors.push(w.clone());y.materialIndex=_.materialIndex+n,a.push(y)}for(p=0,g=h.length;p<g;p++){var M=h[p],T=[];if(void 0!==M){for(var A=0,S=M.length;A<S;A++)T.push(M[A].clone());u.push(T)}}},mergeMesh:function(t){if(!t||!t.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t,e,n,i,r,o,s,a,c={},l=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h),void 0===c[e]?(c[e]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(p,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new a(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,i=0;i<n;i++)e[i]._id=i;e.sort(t);var r,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===n&&(r=[]),a&&a.length===n&&(o=[]);for(var i=0;i<n;i++){var c=e[i]._id;r&&r.push(s[c]),o&&o.push(a[c])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==d[e]?d[e]:(d[e]=h.length/3,h.push(t.x,t.y,t.z),d[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=f.length,f.push(t.getHex()),p[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==m[e]?m[e]:(m[e]=g.length/2,g.push(t.x,t.y),m[e])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(r[s]=o[s]);return r}for(var a=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];a.push(l.x,l.y,l.z)}for(var u=[],h=[],d={},f=[],p={},g=[],m={},c=0;c<this.faces.length;c++){var v=this.faces[c],y=void 0!==this.faceVertexUvs[0][c],b=v.normal.length()>0,w=v.vertexNormals.length>0,_=1!==v.color.r||1!==v.color.g||1!==v.color.b,x=v.vertexColors.length>0,E=0;if(E=t(E,0,0),E=t(E,1,!0),E=t(E,2,!1),E=t(E,3,y),E=t(E,4,b),E=t(E,5,w),E=t(E,6,_),E=t(E,7,x),u.push(E),u.push(v.a,v.b,v.c),u.push(v.materialIndex),y){var A=this.faceVertexUvs[0][c];u.push(i(A[0]),i(A[1]),i(A[2]))}if(b&&u.push(e(v.normal)),w){var C=v.vertexNormals;u.push(e(C[0]),e(C[1]),e(C[2]))}if(_&&u.push(n(v.color)),x){var S=v.vertexColors;u.push(n(S[0]),n(S[1]),n(S[2]))}}return r.data={},r.data.vertices=a,r.data.normals=h,f.length>0&&(r.data.colors=f),g.length>0&&(r.data.uvs=[g]),r.data.faces=u,r},clone:function(){return(new S).copy(this)},copy:function(t){var e,n,i,r,o,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var a=t.vertices;for(e=0,n=a.length;e<n;e++)this.vertices.push(a[e].clone());var c=t.colors;for(e=0,n=c.length;e<n;e++)this.colors.push(c[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var u=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(o=0,s=h.length;o<s;o++){var f=h[o];d.push(f.clone())}this.faceVertexUvs[e].push(d)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var g={};if(g.name=p[e].name,void 0!==p[e].vertices)for(g.vertices=[],i=0,r=p[e].vertices.length;i<r;i++)g.vertices.push(p[e].vertices[i].clone());if(void 0!==p[e].normals)for(g.normals=[],i=0,r=p[e].normals.length;i<r;i++)g.normals.push(p[e].normals[i].clone());this.morphTargets.push(g)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var v={};if(void 0!==m[e].vertexNormals)for(v.vertexNormals=[],i=0,r=m[e].vertexNormals.length;i<r;i++){var y=m[e].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==m[e].faceNormals)for(v.faceNormals=[],i=0,r=m[e].faceNormals.length;i<r;i++)v.faceNormals.push(m[e].faceNormals[i].clone());this.morphNormals.push(v)}var w=t.skinWeights;for(e=0,n=w.length;e<n;e++)this.skinWeights.push(w[e].clone());var _=t.skinIndices;for(e=0,n=_.length;e<n;e++)this.skinIndices.push(_[e].clone());var x=t.lineDistances;for(e=0,n=x.length;e<n;e++)this.lineDistances.push(x[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var A=t.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(M.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(M.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new y),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,o=t.length;i<o;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new r),e[n++]=s.x,e[n++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new u),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),T.prototype=Object.create(M.prototype),T.prototype.constructor=T,k.prototype=Object.create(M.prototype),k.prototype.constructor=k,F.prototype=Object.create(M.prototype),F.prototype.constructor=F,O.prototype=Object.create(M.prototype),O.prototype.constructor=O,P.prototype=Object.create(M.prototype),P.prototype.constructor=P,L.prototype=Object.create(M.prototype),L.prototype.constructor=L,R.prototype=Object.create(M.prototype),R.prototype.constructor=R,D.prototype=Object.create(M.prototype),D.prototype.constructor=D,B.prototype=Object.create(M.prototype),B.prototype.constructor=B,Object.assign(I.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,o=0;o<r.length;o++){var s=r[o];s.materialIndex!==i&&(i=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,o=t.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var h,d=t.morphNormals,f=d.length;if(f>0){h=[];for(var u=0;u<f;u++)h[u]=[];this.morphTargets.normal=h}for(var p=t.skinIndices,g=t.skinWeights,m=p.length===i.length,v=g.length===i.length,u=0;u<n.length;u++){var y=n[u];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var w=y.normal;this.normals.push(w,w,w)}var _=y.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===s){var E=o[0][u];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new r,new r,new r))}if(!0===a){var E=o[1][u];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new r,new r,new r))}for(var A=0;A<l;A++){var C=c[A].vertices;e[A].push(C[y.a],C[y.b],C[y.c])}for(var A=0;A<f;A++){var S=d[A].vertexNormals[u];h[A].push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(g[y.a],g[y.b],g[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Nc=1;j.prototype=Object.assign(Object.create(i.prototype),{constructor:j,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(N(t)>65535?R:P)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new M(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){(new c).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new o;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new o;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new o;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new o;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new o;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new x;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new D(3*e.vertices.length,3),i=new D(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new D(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new D(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var i;return!0===e.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new I).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new M(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new M(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new M(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new M(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new M(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var s in t.morphTargets){for(var a=[],c=t.morphTargets[s],l=0,u=c.length;l<u;l++){var h=c[l],d=new D(3*h.length,3);a.push(d.copyVector3sArray(h))}this.morphAttributes[s]=a}if(t.skinIndices.length>0){var f=new D(4*t.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new D(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new p,e=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new g);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(i);for(var r=0,o=0,s=n.count;o<s;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new M(new Float32Array(i.length),3));else for(var r=e.normal.array,o=0,s=r.length;o<s;o++)r[o]=0;var c,l,u,h=e.normal.array,d=new a,f=new a,p=new a,g=new a,m=new a;if(t){var v=t.array;0===n.length&&this.addGroup(0,v.length);for(var y=0,b=n.length;y<b;++y)for(var w=n[y],_=w.start,x=w.count,o=_,s=_+x;o<s;o+=3)c=3*v[o+0],l=3*v[o+1],u=3*v[o+2],d.fromArray(i,c),f.fromArray(i,l),p.fromArray(i,u),g.subVectors(p,f),m.subVectors(d,f),g.cross(m),h[c]+=g.x,h[c+1]+=g.y,h[c+2]+=g.z,h[l]+=g.x,h[l+1]+=g.y,h[l+2]+=g.z,h[u]+=g.x,h[u+1]+=g.y,h[u+2]+=g.z}else for(var o=0,s=i.length;o<s;o+=9)d.fromArray(i,o),f.fromArray(i,o+3),p.fromArray(i,o+6),g.subVectors(p,f),m.subVectors(d,f),g.cross(m),h[o]=g.x,h[o+1]=g.y,h[o+2]=g.z,h[o+3]=g.x,h[o+4]=g.y,h[o+5]=g.z,h[o+6]=g.x,h[o+7]=g.y,h[o+8]=g.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],o=r.array,s=t.attributes[i],a=s.array,c=s.itemSize,l=0,u=c*e;l<a.length;l++,u++)o[u]=a[l];return this},normalizeNormals:function(){var t=new a;return function(){for(var e=this.attributes.normal,n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new j,e=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,s=r.itemSize,a=new o.constructor(e.length*s),c=0,l=0,u=0,h=e.length;u<h;u++){c=e[u]*s;for(var d=0;d<s;d++)a[l++]=o[c++]}t.addAttribute(i,new M(a,s))}for(var f=this.groups,u=0,h=f.length;u<h;u++){var p=f[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var s=o[n],r=Array.prototype.slice.call(s.array);t.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new j).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var s=o[e];this.addAttribute(e,s.clone())}var a=t.morphAttributes;for(e in a){var c=[],l=a[e];for(n=0,i=l.length;n<i;n++)c.push(l[n].clone());this.morphAttributes[e]=c}var u=t.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=t.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=t.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(S.prototype),U.prototype.constructor=U,$.prototype=Object.create(j.prototype),$.prototype.constructor=$,z.prototype=Object.create(S.prototype),z.prototype.constructor=z,H.prototype=Object.create(j.prototype),H.prototype.constructor=H;var jc=0;V.prototype=Object.assign(Object.create(i.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]="overdraw"===e?Number(n):n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===ds;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||"string"===typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ys&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==ls&&(i.side=this.side),this.vertexColors!==ps&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=e(t.textures),o=e(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},G.prototype=Object.create(V.prototype),G.prototype.constructor=G,G.prototype.isShaderMaterial=!0,G.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Pc.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},G.prototype.toJSON=function(t){var e=V.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(q.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new a),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new a;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new a),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new a;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new a,e=new a,n=new a;return function(i,r,o,s){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var a,c,l,u,h=.5*i.distanceTo(r),d=-this.direction.dot(e),f=n.dot(this.direction),p=-n.dot(e),g=n.lengthSq(),m=Math.abs(1-d*d);if(m>0)if(a=d*p-f,c=d*f-p,u=h*m,a>=0)if(c>=-u)if(c<=u){var v=1/m;a*=v,c*=v,l=a*(a+d*c+2*f)+c*(d*a+c+2*p)+g}else c=h,a=Math.max(0,-(d*c+f)),l=-a*a+c*(c+2*p)+g;else c=-h,a=Math.max(0,-(d*c+f)),l=-a*a+c*(c+2*p)+g;else c<=-u?(a=Math.max(0,-(-d*h+f)),c=a>0?-h:Math.min(Math.max(-h,-p),h),l=-a*a+c*(c+2*p)+g):c<=u?(a=0,c=Math.min(Math.max(-h,-p),h),l=c*(c+2*p)+g):(a=Math.max(0,-(d*h+f)),c=a>0?h:Math.min(Math.max(-h,-p),h),l=-a*a+c*(c+2*p)+g);else c=d>0?-h:h,a=Math.max(0,-(d*c+f)),l=-a*a+c*(c+2*p)+g;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(e).multiplyScalar(c).add(t),l}}(),intersectSphere:function(){var t=new a;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var s=Math.sqrt(o-r),a=i-s,c=i+s;return a<0&&c<0?null:a<0?this.at(c,n):this.at(a,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,o,s,a,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,i=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,i=(t.min.x-h.x)*c),l>=0?(r=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(r=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),u>=0?(s=(t.min.z-h.z)*u,a=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,a=(t.min.z-h.z)*u),n>a||s>i?null:((s>n||n!==n)&&(n=s),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(){var t=new a;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new a,e=new a,n=new a,i=new a;return function(r,o,s,a,c){e.subVectors(o,r),n.subVectors(s,r),i.crossVectors(e,n);var l,u=this.direction.dot(i);if(u>0){if(a)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var d=l*this.direction.dot(e.cross(t));if(d<0)return null;if(h+d>u)return null;var f=-l*t.dot(i);return f<0?null:this.at(f/u,c)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(X.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new a),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new a),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new a),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new a,e=new a;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),s=o/r;return i&&(s=kc.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new a),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(K,{getNormal:function(){var t=new a;return function(e,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new a),r.subVectors(i,n),t.subVectors(e,n),r.cross(t);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var t=new a,e=new a,n=new a;return function(i,r,o,s,c){t.subVectors(s,r),e.subVectors(o,r),n.subVectors(i,r);var l=t.dot(t),u=t.dot(e),h=t.dot(n),d=e.dot(e),f=e.dot(n),p=l*d-u*u;if(void 0===c&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),c=new a),0===p)return c.set(-2,-1,-1);var g=1/p,m=(d*h-u*f)*g,v=(l*f-u*h)*g;return c.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new a;return function(e,n,i,r){return K.getBarycoord(e,n,i,r,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}()}),Object.assign(K.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new a,e=new a;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new a),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return K.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new a),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return K.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return K.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new m,e=[new X,new X,new X],n=new a,i=new a;return function(r,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new a);var s=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,n),!0===this.containsPoint(n))o.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var c=0;c<e.length;c++){e[c].closestPointToPoint(n,!0,i);var l=n.distanceToSquared(i);l<s&&(s=l,o.copy(i))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Y.prototype=Object.assign(Object.create(x.prototype),{constructor:Y,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return x.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var s=r[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var a=i.morphTargets;if(void 0!==a&&a.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){function t(t,e,n,i,r,o,s){return K.getBarycoord(t,e,n,i,b),r.multiplyScalar(b.x),o.multiplyScalar(b.y),s.multiplyScalar(b.z),r.add(o).add(s),r.clone()}function e(t,e,n,i,r,o,s,a){if(null===(e.side===us?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,e.side!==hs,a)))return null;_.copy(a),_.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(_);return c<n.near||c>n.far?null:{distance:c,point:_.clone(),object:t}}function n(n,i,r,o,s,a,c,d){l.fromBufferAttribute(o,a),u.fromBufferAttribute(o,c),h.fromBufferAttribute(o,d);var f=e(n,n.material,i,r,l,u,h,w);if(f){s&&(m.fromBufferAttribute(s,a),v.fromBufferAttribute(s,c),y.fromBufferAttribute(s,d),f.uv=t(w,l,u,h,m,v,y));var p=new C(a,c,d);K.getNormal(l,u,h,p.normal),f.face=p,f.faceIndex=a}return f}var i=new o,s=new q,c=new g,l=new a,u=new a,h=new a,d=new a,f=new a,p=new a,m=new r,v=new r,y=new r,b=new a,w=new a,_=new a;return function(r,o){var a=this.geometry,g=this.material,b=this.matrixWorld;if(void 0!==g&&(null===a.boundingSphere&&a.computeBoundingSphere(),c.copy(a.boundingSphere),c.applyMatrix4(b),!1!==r.ray.intersectsSphere(c)&&(i.getInverse(b),s.copy(r.ray).applyMatrix4(i),null===a.boundingBox||!1!==s.intersectsBox(a.boundingBox)))){var _;if(a.isBufferGeometry){var x,E,A,C,S,M=a.index,T=a.attributes.position,k=a.attributes.uv;if(null!==M)for(C=0,S=M.count;C<S;C+=3)x=M.getX(C),E=M.getX(C+1),A=M.getX(C+2),(_=n(this,r,s,T,k,x,E,A))&&(_.faceIndex=Math.floor(C/3),o.push(_));else if(void 0!==T)for(C=0,S=T.count;C<S;C+=3)x=C,E=C+1,A=C+2,(_=n(this,r,s,T,k,x,E,A))&&(_.index=x,o.push(_))}else if(a.isGeometry){var F,O,P,L,R=Array.isArray(g),D=a.vertices,B=a.faces,I=a.faceVertexUvs[0];I.length>0&&(L=I);for(var N=0,j=B.length;N<j;N++){var U=B[N],$=R?g[U.materialIndex]:g;if(void 0!==$){if(F=D[U.a],O=D[U.b],P=D[U.c],!0===$.morphTargets){var z=a.morphTargets,H=this.morphTargetInfluences;l.set(0,0,0),u.set(0,0,0),h.set(0,0,0);for(var V=0,W=z.length;V<W;V++){var G=H[V];if(0!==G){var q=z[V].vertices;l.addScaledVector(d.subVectors(q[U.a],F),G),u.addScaledVector(f.subVectors(q[U.b],O),G),h.addScaledVector(p.subVectors(q[U.c],P),G)}}l.add(F),u.add(O),h.add(P),F=l,O=u,P=h}if(_=e(this,$,r,s,F,O,P,w)){if(L&&L[N]){var X=L[N];m.copy(X[0]),v.copy(X[1]),y.copy(X[2]),_.uv=t(w,F,O,P,m,v,y)}_.face=U,_.faceIndex=N,o.push(_)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ct.prototype=Object.create(l.prototype),ct.prototype.constructor=ct,ct.prototype.isCubeTexture=!0,Object.defineProperty(ct.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Uc=new l,$c=new ct,zc=[],Hc=[],Vc=new Float32Array(16),Wc=new Float32Array(9);jt.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(t,e[o.id])}};var Gc=/([\w\d_]+)(\])?(\[|\.)?/g;zt.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer)},zt.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},zt.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var s=e[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,i)}},zt.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n};var qc=0,Xc=0;pe.prototype=Object.create(V.prototype),pe.prototype.constructor=pe,pe.prototype.isMeshDepthMaterial=!0,pe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},ge.prototype=Object.create(V.prototype),ge.prototype.constructor=ge,ge.prototype.isMeshDistanceMaterial=!0,ge.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},ve.prototype=Object.create(l.prototype),ve.prototype.constructor=ve,xe.prototype=Object.assign(Object.create(E.prototype),{constructor:xe,isPerspectiveCamera:!0,copy:function(t,e){return E.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*kc.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*kc.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*kc.RAD2DEG*Math.atan(Math.tan(.5*kc.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*kc.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/s,e-=o.offsetY*n/a,i*=o.width/s,n*=o.height/a}var c=this.filmOffset;0!==c&&(r+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far)},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Ee.prototype=Object.assign(Object.create(xe.prototype),{constructor:Ee,isArrayCamera:!0}),Se.prototype.isFogExp2=!0,Se.prototype.clone=function(){return new Se(this.color.getHex(),this.density)},Se.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Me.prototype.isFog=!0,Me.prototype.clone=function(){return new Me(this.color.getHex(),this.near,this.far)},Me.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Te.prototype=Object.assign(Object.create(x.prototype),{constructor:Te,copy:function(t,e){return x.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),ke.prototype=Object.create(V.prototype),ke.prototype.constructor=ke,ke.prototype.isSpriteMaterial=!0,ke.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Fe.prototype=Object.assign(Object.create(x.prototype),{constructor:Fe,isSprite:!0,raycast:function(){var t=new a,e=new a,n=new a;return function(i,r){e.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(e,t),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(e.distanceToSquared(t)>o)){var s=i.ray.origin.distanceTo(t);s<i.near||s>i.far||r.push({distance:s,point:t.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return x.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Oe.prototype=Object.assign(Object.create(x.prototype),{constructor:Oe,copy:function(t){x.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new a;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new a,e=new a;return function(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var o=1,s=i.length;o<s&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<s;o++)i[o].object.visible=!1}}}(),toJSON:function(t){var e=x.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(Pe.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new o;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new o,e=new o;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,s=0,a=n.length;s<a;s++){var c=n[s]?n[s].matrixWorld:e;t.multiplyMatrices(c,i[s]),t.toArray(r,16*s)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Pe(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),Le.prototype=Object.assign(Object.create(x.prototype),{constructor:Le,isBone:!0}),Re.prototype=Object.assign(Object.create(Y.prototype),{constructor:Re,isSkinnedMesh:!0,initBones:function(){var t,e,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)e=this.geometry.bones[n],t=new Le,r.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)e=this.geometry.bones[n],-1!==e.parent&&null!==e.parent&&void 0!==r[e.parent]?r[e.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];t=1/n.manhattanLength(),t!==1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new u,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++)i.x=r.getX(e),i.y=r.getY(e),i.z=r.getZ(e),i.w=r.getW(e),t=1/i.manhattanLength(),t!==1/0?i.multiplyScalar(t):i.set(1,0,0,0),r.setXYZW(e,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(t){Y.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),De.prototype=Object.create(V.prototype),De.prototype.constructor=De,De.prototype.isLineBasicMaterial=!0,De.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Be.prototype=Object.assign(Object.create(x.prototype),{constructor:Be,isLine:!0,computeLineDistances:function(){var t=new a,e=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,s=i.count;o<s;o++)t.fromBufferAttribute(i,o-1),e.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var a=n.vertices,r=n.lineDistances;r[0]=0;for(var o=1,s=a.length;o<s;o++)r[o]=r[o-1],r[o]+=a[o-1].distanceTo(a[o])}return this}}(),raycast:function(){var t=new o,e=new q,n=new g;return function(i,r){var o=i.linePrecision,s=o*o,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)){t.getInverse(l),e.copy(i.ray).applyMatrix4(t);var u=new a,h=new a,d=new a,f=new a,p=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var g=c.index,m=c.attributes,v=m.position.array;if(null!==g)for(var y=g.array,b=0,w=y.length-1;b<w;b+=p){var _=y[b],x=y[b+1];u.fromArray(v,3*_),h.fromArray(v,3*x);var E=e.distanceSqToSegment(u,h,f,d);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var A=i.ray.origin.distanceTo(f);A<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,w=v.length/3-1;b<w;b+=p){u.fromArray(v,3*b),h.fromArray(v,3*b+3);var E=e.distanceSqToSegment(u,h,f,d);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var A=i.ray.origin.distanceTo(f);A<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var C=c.vertices,S=C.length,b=0;b<S-1;b+=p){var E=e.distanceSqToSegment(C[b],C[b+1],f,d);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var A=i.ray.origin.distanceTo(f);A<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ie.prototype=Object.assign(Object.create(Be.prototype),{constructor:Ie,isLineSegments:!0,computeLineDistances:function(){var t=new a,e=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],o=0,s=i.count;o<s;o+=2)t.fromBufferAttribute(i,o),e.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var a=n.vertices,r=n.lineDistances,o=0,s=a.length;o<s;o+=2)t.copy(a[o]),e.copy(a[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e);return this}}()}),Ne.prototype=Object.assign(Object.create(Be.prototype),{constructor:Ne,isLineLoop:!0}),je.prototype=Object.create(V.prototype),je.prototype.constructor=je,je.prototype.isPointsMaterial=!0,je.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Ue.prototype=Object.assign(Object.create(x.prototype),{constructor:Ue,isPoints:!0,raycast:function(){var t=new o,e=new q,n=new g;return function(i,r){function o(t,n){var o=e.distanceSqToPoint(t);if(o<d){e.closestPointToPoint(t,p),p.applyMatrix4(l);var a=i.ray.origin.distanceTo(p);if(a<i.near||a>i.far)return;r.push({distance:a,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:s})}}var s=this,c=this.geometry,l=this.matrixWorld,u=i.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),n.radius+=u,!1!==i.ray.intersectsSphere(n)){t.getInverse(l),e.copy(i.ray).applyMatrix4(t);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,f=new a,p=new a;if(c.isBufferGeometry){var g=c.index,m=c.attributes,v=m.position.array;if(null!==g)for(var y=g.array,b=0,w=y.length;b<w;b++){var _=y[b];f.fromArray(v,3*_),o(f,_)}else for(var b=0,x=v.length/3;b<x;b++)f.fromArray(v,3*b),o(f,b)}else for(var E=c.vertices,b=0,x=E.length;b<x;b++)o(E[b],b)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),$e.prototype=Object.assign(Object.create(x.prototype),{constructor:$e,isGroup:!0}),ze.prototype=Object.assign(Object.create(l.prototype),{constructor:ze,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),He.prototype=Object.create(l.prototype),He.prototype.constructor=He,He.prototype.isCompressedTexture=!0,Ve.prototype=Object.create(l.prototype),Ve.prototype.constructor=Ve,Ve.prototype.isDepthTexture=!0,We.prototype=Object.create(j.prototype),We.prototype.constructor=We,Ge.prototype=Object.create(S.prototype),Ge.prototype.constructor=Ge,qe.prototype=Object.create(j.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(S.prototype),Xe.prototype.constructor=Xe,Ke.prototype=Object.create(j.prototype),Ke.prototype.constructor=Ke,Ye.prototype=Object.create(S.prototype),Ye.prototype.constructor=Ye,Ze.prototype=Object.create(Ke.prototype),Ze.prototype.constructor=Ze,Je.prototype=Object.create(S.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Ke.prototype),Qe.prototype.constructor=Qe,tn.prototype=Object.create(S.prototype),tn.prototype.constructor=tn,en.prototype=Object.create(Ke.prototype),en.prototype.constructor=en,nn.prototype=Object.create(S.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Ke.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(S.prototype),on.prototype.constructor=on,sn.prototype=Object.create(j.prototype),sn.prototype.constructor=sn,an.prototype=Object.create(S.prototype),an.prototype.constructor=an,cn.prototype=Object.create(j.prototype),cn.prototype.constructor=cn,ln.prototype=Object.create(S.prototype),ln.prototype.constructor=ln,un.prototype=Object.create(j.prototype),un.prototype.constructor=un;var Kc={triangulate:function(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,o=hn(t,0,r,n,!0),s=[];if(!o)return s;var a,c,l,u,h,d,f;if(i&&(o=yn(t,e,o,n)),t.length>80*n){a=l=t[0],c=u=t[1];for(var p=n;p<r;p+=n)h=t[p],d=t[p+1],h<a&&(a=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);f=Math.max(l-a,u-c),f=0!==f?1/f:0}return fn(o,s,n,a,c,f),s}},Yc={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return Yc.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];jn(t),Un(n,t);var o=t.length;e.forEach(jn);for(var s=0;s<e.length;s++)i.push(o),o+=e[s].length,Un(n,e[s]);for(var a=Kc.triangulate(n,i),s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}};$n.prototype=Object.create(S.prototype),$n.prototype.constructor=$n,zn.prototype=Object.create(j.prototype),zn.prototype.constructor=zn,zn.prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:e,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},zn.prototype.addShapeList=function(t,e){var n=t.length;e.arrays=this.getArrays();for(var i=0;i<n;i++){var r=t[i];this.addShape(r,e)}this.setIndex(e.arrays.index),this.addAttribute("position",new D(e.arrays.position,3)),this.addAttribute("uv",new D(e.arrays.uv,2))},zn.prototype.addShape=function(t,e){function n(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function i(t,e,n){var i,o,s,a=t.x-e.x,c=t.y-e.y,l=n.x-t.x,u=n.y-t.y,h=a*a+c*c,d=a*u-c*l;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(l*l+u*u),g=e.x-c/f,m=e.y+a/f,v=n.x-u/p,y=n.y+l/p,b=((v-g)*u-(y-m)*l)/(a*u-c*l);i=g+a*b-t.x,o=m+c*b-t.y;var w=i*i+o*o;if(w<=2)return new r(i,o);s=Math.sqrt(w/2)}else{var _=!1;a>Number.EPSILON?l>Number.EPSILON&&(_=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(_=!0):Math.sign(c)===Math.sign(u)&&(_=!0),_?(i=-c,o=a,s=Math.sqrt(h)):(i=a,o=c,s=Math.sqrt(h/2))}return new r(i/s,o/s)}function o(t,e){var n,i;for(Z=t.length;--Z>=0;){n=Z,i=Z-1,i<0&&(i=t.length-1);var r=0,o=T+2*C;for(r=0;r<o;r++){var s=X*r,a=X*(r+1);l(e+n+s,e+i+s,e+i+a,e+n+a)}}}function s(t,e,n){_.push(t),_.push(e),_.push(n)}function c(t,e,n){u(t),u(e),u(n);var i=y.length/3,r=O.generateTopUV(B,y,i-3,i-2,i-1);h(r[0]),h(r[1]),h(r[2])}function l(t,e,n,i){u(t),u(e),u(i),u(e),u(n),u(i);var r=y.length/3,o=O.generateSideWallUV(B,y,r-6,r-3,r-2,r-1);h(o[0]),h(o[1]),h(o[3]),h(o[1]),h(o[2]),h(o[3])}function u(t){b.push(y.length/3),y.push(_[3*t+0]),y.push(_[3*t+1]),y.push(_[3*t+2])}function h(t){w.push(t.x),w.push(t.y)}var d,f,p,g,m,v=e.arrays?e.arrays:this.getArrays(),y=v.position,b=v.index,w=v.uv,_=[],x=void 0!==e.amount?e.amount:100,E=void 0!==e.bevelThickness?e.bevelThickness:6,A=void 0!==e.bevelSize?e.bevelSize:E-2,C=void 0!==e.bevelSegments?e.bevelSegments:3,S=void 0===e.bevelEnabled||e.bevelEnabled,M=void 0!==e.curveSegments?e.curveSegments:12,T=void 0!==e.steps?e.steps:1,k=e.extrudePath,F=!1,O=void 0!==e.UVGenerator?e.UVGenerator:$n.WorldUVGenerator;k&&(d=k.getSpacedPoints(T),F=!0,S=!1,f=void 0!==e.frames?e.frames:k.computeFrenetFrames(T,!1),p=new a,g=new a,m=new a),S||(C=0,E=0,A=0);var P,L,R,B=this,I=t.extractPoints(M),N=I.shape,j=I.holes;if(!Yc.isClockWise(N))for(N=N.reverse(),L=0,R=j.length;L<R;L++)P=j[L],Yc.isClockWise(P)&&(j[L]=P.reverse());var U=Yc.triangulateShape(N,j),$=N;for(L=0,R=j.length;L<R;L++)P=j[L],N=N.concat(P);for(var z,H,V,W,G,q,X=N.length,K=U.length,Y=[],Z=0,J=$.length,Q=J-1,tt=Z+1;Z<J;Z++,Q++,tt++)Q===J&&(Q=0),tt===J&&(tt=0),Y[Z]=i($[Z],$[Q],$[tt]);var et,nt=[],it=Y.concat();for(L=0,R=j.length;L<R;L++){for(P=j[L],et=[],Z=0,J=P.length,Q=J-1,tt=Z+1;Z<J;Z++,Q++,tt++)Q===J&&(Q=0),tt===J&&(tt=0),et[Z]=i(P[Z],P[Q],P[tt]);nt.push(et),it=it.concat(et)}for(z=0;z<C;z++){for(V=z/C,W=E*Math.cos(V*Math.PI/2),H=A*Math.sin(V*Math.PI/2),Z=0,J=$.length;Z<J;Z++)G=n($[Z],Y[Z],H),s(G.x,G.y,-W);for(L=0,R=j.length;L<R;L++)for(P=j[L],et=nt[L],Z=0,J=P.length;Z<J;Z++)G=n(P[Z],et[Z],H),s(G.x,G.y,-W)}for(H=A,Z=0;Z<X;Z++)G=S?n(N[Z],it[Z],H):N[Z],F?(g.copy(f.normals[0]).multiplyScalar(G.x),p.copy(f.binormals[0]).multiplyScalar(G.y),m.copy(d[0]).add(g).add(p),s(m.x,m.y,m.z)):s(G.x,G.y,0);var rt;for(rt=1;rt<=T;rt++)for(Z=0;Z<X;Z++)G=S?n(N[Z],it[Z],H):N[Z],F?(g.copy(f.normals[rt]).multiplyScalar(G.x),p.copy(f.binormals[rt]).multiplyScalar(G.y),m.copy(d[rt]).add(g).add(p),s(m.x,m.y,m.z)):s(G.x,G.y,x/T*rt);for(z=C-1;z>=0;z--){for(V=z/C,W=E*Math.cos(V*Math.PI/2),H=A*Math.sin(V*Math.PI/2),Z=0,J=$.length;Z<J;Z++)G=n($[Z],Y[Z],H),s(G.x,G.y,x+W);for(L=0,R=j.length;L<R;L++)for(P=j[L],et=nt[L],Z=0,J=P.length;Z<J;Z++)G=n(P[Z],et[Z],H),F?s(G.x,G.y+d[T-1].y,d[T-1].x+W):s(G.x,G.y,x+W)}!function(){var t=y.length/3;if(S){var e=0,n=X*e;for(Z=0;Z<K;Z++)q=U[Z],c(q[2]+n,q[1]+n,q[0]+n);for(e=T+2*C,n=X*e,Z=0;Z<K;Z++)q=U[Z],c(q[0]+n,q[1]+n,q[2]+n)}else{for(Z=0;Z<K;Z++)q=U[Z],c(q[2],q[1],q[0]);for(Z=0;Z<K;Z++)q=U[Z],c(q[0]+X*T,q[1]+X*T,q[2]+X*T)}B.addGroup(t,y.length/3-t,0)}(),function(){var t=y.length/3,e=0;for(o($,e),e+=$.length,L=0,R=j.length;L<R;L++)P=j[L],o(P,e),e+=P.length;B.addGroup(t,y.length/3-t,1)}(),e.arrays||(this.setIndex(b),this.addAttribute("position",new D(y,3)),this.addAttribute("uv",new D(w,2)))},$n.WorldUVGenerator={generateTopUV:function(t,e,n,i,o){var s=e[3*n],a=e[3*n+1],c=e[3*i],l=e[3*i+1],u=e[3*o],h=e[3*o+1];return[new r(s,a),new r(c,l),new r(u,h)]},generateSideWallUV:function(t,e,n,i,o,s){var a=e[3*n],c=e[3*n+1],l=e[3*n+2],u=e[3*i],h=e[3*i+1],d=e[3*i+2],f=e[3*o],p=e[3*o+1],g=e[3*o+2],m=e[3*s],v=e[3*s+1],y=e[3*s+2];return Math.abs(c-h)<.01?[new r(a,1-l),new r(u,1-d),new r(f,1-g),new r(m,1-y)]:[new r(c,1-l),new r(h,1-d),new r(p,1-g),new r(v,1-y)]}},Hn.prototype=Object.create(S.prototype),Hn.prototype.constructor=Hn,Vn.prototype=Object.create(zn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(S.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Object.create(j.prototype),Gn.prototype.constructor=Gn,qn.prototype=Object.create(S.prototype),qn.prototype.constructor=qn,Xn.prototype=Object.create(j.prototype),Xn.prototype.constructor=Xn,Kn.prototype=Object.create(S.prototype),Kn.prototype.constructor=Kn,Yn.prototype=Object.create(j.prototype),Yn.prototype.constructor=Yn,Zn.prototype=Object.create(S.prototype),Zn.prototype.constructor=Zn,Zn.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return Qn(this.parameters.shapes,t)},Jn.prototype=Object.create(j.prototype),Jn.prototype.constructor=Jn,Jn.prototype.toJSON=function(){var t=j.prototype.toJSON.call(this);return Qn(this.parameters.shapes,t)},ti.prototype=Object.create(j.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(S.prototype),ei.prototype.constructor=ei,ni.prototype=Object.create(j.prototype),ni.prototype.constructor=ni,ii.prototype=Object.create(ei.prototype),ii.prototype.constructor=ii,ri.prototype=Object.create(ni.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(S.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(j.prototype),si.prototype.constructor=si;var Zc=Object.freeze({WireframeGeometry:We,ParametricGeometry:Ge,ParametricBufferGeometry:qe,TetrahedronGeometry:Ye,TetrahedronBufferGeometry:Ze,OctahedronGeometry:Je,OctahedronBufferGeometry:Qe,IcosahedronGeometry:tn,IcosahedronBufferGeometry:en,DodecahedronGeometry:nn,DodecahedronBufferGeometry:rn,PolyhedronGeometry:Xe,PolyhedronBufferGeometry:Ke,TubeGeometry:on,TubeBufferGeometry:sn,TorusKnotGeometry:an,TorusKnotBufferGeometry:cn,TorusGeometry:ln,TorusBufferGeometry:un,TextGeometry:Hn,TextBufferGeometry:Vn,SphereGeometry:Wn,SphereBufferGeometry:Gn,RingGeometry:qn,RingBufferGeometry:Xn,PlaneGeometry:z,PlaneBufferGeometry:H,LatheGeometry:Kn,LatheBufferGeometry:Yn,ShapeGeometry:Zn,ShapeBufferGeometry:Jn,ExtrudeGeometry:$n,ExtrudeBufferGeometry:zn,EdgesGeometry:ti,ConeGeometry:ii,ConeBufferGeometry:ri,CylinderGeometry:ei,CylinderBufferGeometry:ni,CircleGeometry:oi,CircleBufferGeometry:si,BoxGeometry:U,BoxBufferGeometry:$});ai.prototype=Object.create(V.prototype),ai.prototype.constructor=ai,ai.prototype.isShadowMaterial=!0,ai.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},ci.prototype=Object.create(G.prototype),ci.prototype.constructor=ci,ci.prototype.isRawShaderMaterial=!0,li.prototype=Object.create(V.prototype),li.prototype.constructor=li,li.prototype.isMeshStandardMaterial=!0,li.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ui.prototype=Object.create(li.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshPhysicalMaterial=!0,ui.prototype.copy=function(t){return li.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},hi.prototype=Object.create(V.prototype),hi.prototype.constructor=hi,hi.prototype.isMeshPhongMaterial=!0,hi.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},di.prototype=Object.create(hi.prototype),di.prototype.constructor=di,di.prototype.isMeshToonMaterial=!0,di.prototype.copy=function(t){return hi.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},fi.prototype=Object.create(V.prototype),fi.prototype.constructor=fi,fi.prototype.isMeshNormalMaterial=!0,fi.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},pi.prototype=Object.create(V.prototype),pi.prototype.constructor=pi,pi.prototype.isMeshLambertMaterial=!0,pi.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gi.prototype=Object.create(De.prototype),gi.prototype.constructor=gi,gi.prototype.isLineDashedMaterial=!0,gi.prototype.copy=function(t){return De.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Jc=Object.freeze({ShadowMaterial:ai,SpriteMaterial:ke,RawShaderMaterial:ci,ShaderMaterial:G,PointsMaterial:je,MeshPhysicalMaterial:ui,MeshStandardMaterial:li,MeshPhongMaterial:hi,MeshToonMaterial:di,MeshNormalMaterial:fi,MeshLambertMaterial:pi,MeshDepthMaterial:pe,MeshDistanceMaterial:ge,MeshBasicMaterial:W,LineDashedMaterial:gi,LineBasicMaterial:De,Material:V}),Qc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},tl=new mi,el={};Object.assign(vi.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Qc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0!==el[t])return void el[t].push({onLoad:e,onProgress:n,onError:i});var s=/^data:(.*?)(;base64)?,(.*)$/,a=t.match(s);if(a){var c=a[1],l=!!a[2],u=a[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(u.length),p=0;p<u.length;p++)f[p]=u.charCodeAt(p);h="blob"===d?new Blob([f.buffer],{type:c}):f.buffer;break;case"document":var g=new DOMParser;h=g.parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u}window.setTimeout(function(){e&&e(h),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},0)}}else{el[t]=[],el[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;Qc.add(t,n);var i=el[t];if(delete el[t],200===this.status){for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onLoad&&a.onLoad(n)}r.manager.itemEnd(t)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onLoad&&a.onLoad(n)}r.manager.itemEnd(t)}else{for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onError&&a.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)}},!1),m.addEventListener("progress",function(e){for(var n=el[t],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=el[t];delete el[t];for(var i=0,o=n.length;i<o;i++){var s=n[i];s.onError&&s.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(t),m},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(yi.prototype,{load:function(t,e,n,i){var r=this,o=[],s=new He;s.image=o;var a=new vi(this.manager);if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,u=t.length;l<u;++l)!function(l){a.load(t[l],function(t){var n=r._parser(t,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(s.minFilter=ga),s.format=n.format,s.needsUpdate=!0,e&&e(s))},n,i)}(l);else a.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){o[a]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+c]),o[a].format=n.format,o[a].width=n.width,o[a].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=ga),s.format=n.format,s.needsUpdate=!0,e&&e(s)},n,i);return s},setPath:function(t){return this.path=t,this}}),Object.assign(bi.prototype,{load:function(t,e,n,i){var r=this,o=new f,s=new vi(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ua,o.wrapT=void 0!==n.wrapT?n.wrapT:ua,o.magFilter=void 0!==n.magFilter?n.magFilter:ga,o.minFilter=void 0!==n.minFilter?n.minFilter:va,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=ga),o.needsUpdate=!0,e&&e(o,n))},n,i),o}}),Object.assign(wi.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Qc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Qc.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),s.addEventListener("error",function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_i.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,i){var r=new ct,o=new wi(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,a=0;a<t.length;++a)!function(n){o.load(t[n],function(t){r.images[n]=t,6===++s&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}(a);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(xi.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,i){var r=new l,o=new wi(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;var i=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Oa:Pa,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ei.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(r),i.push(o),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var s,a=0,c=o-1;a<=c;)if(r=Math.floor(a+(c-a)/2),(s=i[r]-n)<0)a=r+1;else{if(!(s>0)){c=r;break}c=r-1}if(r=c,i[r]===n)return r/(o-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,s=new a,c=[],l=[],u=[],h=new a,d=new o;for(n=0;n<=t;n++)i=n/t,c[n]=this.getTangentAt(i),c[n].normalize();l[0]=new a,u[0]=new a;var f=Number.MAX_VALUE,p=Math.abs(c[0].x),g=Math.abs(c[0].y),m=Math.abs(c[0].z);for(p<=f&&(f=p,s.set(1,0,0)),g<=f&&(f=g,s.set(0,1,0)),m<=f&&s.set(0,0,1),h.crossVectors(c[0],s).normalize(),l[0].crossVectors(c[0],h),u[0].crossVectors(c[0],l[0]),n=1;n<=t;n++)l[n]=l[n-1].clone(),u[n]=u[n-1].clone(),h.crossVectors(c[n-1],c[n]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(kc.clamp(c[n-1].dot(c[n]),-1,1)),l[n].applyMatrix4(d.makeRotationAxis(h,r))),u[n].crossVectors(c[n],l[n]);if(!0===e)for(r=Math.acos(kc.clamp(l[0].dot(l[t]),-1,1)),r/=t,c[0].dot(h.crossVectors(l[0],l[t]))>0&&(r=-r),n=1;n<=t;n++)l[n].applyMatrix4(d.makeRotationAxis(c[n],r*n)),u[n].crossVectors(c[n],l[n]);return{tangents:c,normals:l,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ai.prototype=Object.create(Ei.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isEllipseCurve=!0,Ai.prototype.getPoint=function(t,e){for(var n=e||new r,i=2*Math.PI,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=s?0:i),!0!==this.aClockwise||s||(o===i?o=-i:o-=i);var a=this.aStartAngle+t*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=c-this.aX,f=l-this.aY;c=d*u-f*h+this.aX,l=d*h+f*u+this.aY}return n.set(c,l)},Ai.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ai.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ai.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ci.prototype=Object.create(Ai.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isArcCurve=!0;var nl=new a,il=new Si,rl=new Si,ol=new Si;Mi.prototype=Object.create(Ei.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isCatmullRomCurve3=!0,Mi.prototype.getPoint=function(t,e){var n=e||new a,i=this.points,r=i.length,o=(r-(this.closed?0:1))*t,s=Math.floor(o),c=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i.length)+1)*i.length:0===c&&s===r-1&&(s=r-2,c=1);var l,u,h,d;if(this.closed||s>0?l=i[(s-1)%r]:(nl.subVectors(i[0],i[1]).add(i[0]),l=nl),u=i[s%r],h=i[(s+1)%r],this.closed||s+2<r?d=i[(s+2)%r]:(nl.subVectors(i[r-1],i[r-2]).add(i[r-1]),d=nl),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(l.distanceToSquared(u),f),g=Math.pow(u.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),il.initNonuniformCatmullRom(l.x,u.x,h.x,d.x,p,g,m),rl.initNonuniformCatmullRom(l.y,u.y,h.y,d.y,p,g,m),ol.initNonuniformCatmullRom(l.z,u.z,h.z,d.z,p,g,m)}else"catmullrom"===this.curveType&&(il.initCatmullRom(l.x,u.x,h.x,d.x,this.tension),rl.initCatmullRom(l.y,u.y,h.y,d.y,this.tension),ol.initCatmullRom(l.z,u.z,h.z,d.z,this.tension));return n.set(il.calc(c),rl.calc(c),ol.calc(c)),n},Mi.prototype.copy=function(t){Ei.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Mi.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Mi.prototype.fromJSON=function(t){Ei.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new a).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ni.prototype=Object.create(Ei.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isCubicBezierCurve=!0,Ni.prototype.getPoint=function(t,e){var n=e||new r,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(Ii(t,i.x,o.x,s.x,a.x),Ii(t,i.y,o.y,s.y,a.y)),n},Ni.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ni.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ni.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},ji.prototype=Object.create(Ei.prototype),ji.prototype.constructor=ji,ji.prototype.isCubicBezierCurve3=!0,ji.prototype.getPoint=function(t,e){var n=e||new a,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ii(t,i.x,r.x,o.x,s.x),Ii(t,i.y,r.y,o.y,s.y),Ii(t,i.z,r.z,o.z,s.z)),n},ji.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ji.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ji.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ui.prototype=Object.create(Ei.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isLineCurve=!0,Ui.prototype.getPoint=function(t,e){var n=e||new r;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ui.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ui.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ui.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ui.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ui.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},$i.prototype=Object.create(Ei.prototype),$i.prototype.constructor=$i,$i.prototype.isLineCurve3=!0,$i.prototype.getPoint=function(t,e){var n=e||new a;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},$i.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},$i.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},$i.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},$i.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},zi.prototype=Object.create(Ei.prototype),zi.prototype.constructor=zi,zi.prototype.isQuadraticBezierCurve=!0,zi.prototype.getPoint=function(t,e){var n=e||new r,i=this.v0,o=this.v1,s=this.v2;return n.set(Pi(t,i.x,o.x,s.x),Pi(t,i.y,o.y,s.y)),n},zi.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},zi.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},zi.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hi.prototype=Object.create(Ei.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isQuadraticBezierCurve3=!0,Hi.prototype.getPoint=function(t,e){var n=e||new a,i=this.v0,r=this.v1,o=this.v2;return n.set(Pi(t,i.x,r.x,o.x),Pi(t,i.y,r.y,o.y),Pi(t,i.z,r.z,o.z)),n},Hi.prototype.copy=function(t){return Ei.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hi.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hi.prototype.fromJSON=function(t){return Ei.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Vi.prototype=Object.create(Ei.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isSplineCurve=!0,Vi.prototype.getPoint=function(t,e){var n=e||new r,i=this.points,o=(i.length-1)*t,s=Math.floor(o),a=o-s,c=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(Ti(a,c.x,l.x,u.x,h.x),Ti(a,c.y,l.y,u.y,h.y)),n},Vi.prototype.copy=function(t){Ei.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},Vi.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},Vi.prototype.fromJSON=function(t){Ei.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new r).fromArray(i))}return this};var sl=Object.freeze({ArcCurve:Ci,CatmullRomCurve3:Mi,CubicBezierCurve:Ni,CubicBezierCurve3:ji,EllipseCurve:Ai,LineCurve:Ui,LineCurve3:$i,QuadraticBezierCurve:zi,QuadraticBezierCurve3:Hi,SplineCurve:Vi});Wi.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Wi,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ui(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],s=o.getLength(),a=0===s?0:1-r/s;return o.getPointAt(a)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],s=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s),c=0;c<a.length;c++){var l=a[c];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Ei.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ei.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Ei.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new sl[i.type]).fromJSON(i))}return this}}),Gi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Gi,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Ui(this.currentPoint.clone(),new r(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var o=new zi(this.currentPoint.clone(),new r(t,e),new r(n,i));this.curves.push(o),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,o,s){var a=new Ni(this.currentPoint.clone(),new r(t,e),new r(n,i),new r(o,s));this.curves.push(a),this.currentPoint.set(o,s)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Vi(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+s,e+a,n,i,r,o)},absarc:function(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},ellipse:function(t,e,n,i,r,o,s,a){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+c,e+l,n,i,r,o,s,a)},absellipse:function(t,e,n,i,r,o,s,a){var c=new Ai(t,e,n,i,r,o,s,a);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)},copy:function(t){return Wi.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Wi.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Wi.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),qi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:qi,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Gi.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Gi.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Gi.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Gi).fromJSON(i))}return this}}),Xi.prototype=Object.assign(Object.create(x.prototype),{constructor:Xi,isLight:!0,copy:function(t){return x.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Ki.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ki,isHemisphereLight:!0,copy:function(t){return Xi.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Yi.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Zi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Zi,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*kc.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),Ji.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ji,isSpotLight:!0,copy:function(t){return Xi.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Qi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Qi,isPointLight:!0,copy:function(t){return Xi.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),tr.prototype=Object.assign(Object.create(Yi.prototype),{constructor:tr}),er.prototype=Object.assign(Object.create(Xi.prototype),{constructor:er,isDirectionalLight:!0,copy:function(t){return Xi.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),nr.prototype=Object.assign(Object.create(Xi.prototype),{constructor:nr,isAmbientLight:!0}),ir.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ir,isRectAreaLight:!0,copy:function(t){return Xi.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Xi.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),rr.prototype=Object.assign(Object.create(pr.prototype),{constructor:rr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:uc,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),or.prototype=Object.assign(Object.create(pr.prototype),{constructor:or,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:uc,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(sr.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}{if(t>=r)break t;var a=e[1];t<a&&(n=2,r=a);for(var s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}}for(;n<o;){var c=n+o>>>1;t<e[c]?o=c:n=c+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(sr.prototype,{beforeStart_:sr.prototype.copySampleValue_,afterEnd_:sr.prototype.copySampleValue_}),ar.prototype=Object.assign(Object.create(sr.prototype),{constructor:ar,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=t*a,l=(n-e)/(i-e),u=c+a;c!==u;c+=4)s.slerpFlat(r,0,o,c-a,o,c,l);return r}}),cr.prototype=Object.assign(Object.create(pr.prototype),{constructor:cr,ValueTypeName:"quaternion",DefaultInterpolation:hc,InterpolantFactoryMethodLinear:function(t){return new ar(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),lr.prototype=Object.assign(Object.create(pr.prototype),{constructor:lr,ValueTypeName:"color"}),ur.prototype=Object.assign(Object.create(pr.prototype),{constructor:ur,ValueTypeName:"number"}),hr.prototype=Object.assign(Object.create(sr.prototype),{constructor:hr,DefaultSettings_:{endingStart:fc,endingEnd:fc},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case pc:r=t,s=2*e-n;break;case gc:r=i.length-2,s=e+i[r]-i[r+1];break;default:r=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case pc:o=t,a=2*n-e;break;case gc:o=1,a=n+i[1]-i[0];break;default:o=t-1,a=e}var c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-s),this._weightNext=c/(a-n),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(i-e),p=f*f,g=p*f,m=-h*g+2*h*p-h*f,v=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*g+(1.5+d)*p+.5*f,b=d*g-d*p,w=0;w!==s;++w)r[w]=m*o[l+w]+v*o[c+w]+y*o[a+w]+b*o[u+w];return r}}),dr.prototype=Object.assign(Object.create(sr.prototype),{constructor:dr,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=(n-e)/(i-e),u=1-l,h=0;h!==s;++h)r[h]=o[c+h]*u+o[a+h]*l;return r}}),fr.prototype=Object.assign(Object.create(sr.prototype),{constructor:fr,interpolate_:function(t){return this.copySampleValue_(t-1)}});var al={arraySlice:function(t,e,n){return al.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,s=0;s!==i;++o)for(var a=n[o]*e,c=0;c!==e;++c)r[s++]=t[a+c];return r},flattenJSON:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(e.push(o.time),n.push.apply(n,s)),o=t[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(e.push(o.time),s.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(e.push(o.time),n.push(s)),o=t[r++]}while(void 0!==o)}}};Object.assign(pr,{parse:function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=pr._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];al.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:al.convertArray(t.times,Array),values:al.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ur;case"vector":case"vector2":case"vector3":case"vector4":return gr;case"color":return lr;case"quaternion":return cr;case"bool":case"boolean":return or;case"string":return rr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(pr.prototype,{constructor:pr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:hc,InterpolantFactoryMethodDiscrete:function(t){return new fr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new dr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new hr(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case uc:e=this.InterpolantFactoryMethodDiscrete;break;case hc:e=this.InterpolantFactoryMethodLinear;break;case dc:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uc;case this.InterpolantFactoryMethodLinear:return hc;case this.InterpolantFactoryMethodSmooth:return dc}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var s=this.getValueSize();this.times=al.arraySlice(n,r,o),this.values=al.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,s=0;s!==r;s++){var a=n[s];if("number"===typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),t=!1;break}if(null!==o&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),t=!1;break}o=a}if(void 0!==i&&al.isTypedArray(i))for(var s=0,c=i.length;s!==c;++s){var l=i[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=this.getInterpolation()===dc,r=1,o=t.length-1,s=1;s<o;++s){var a=!1,c=t[s];if(c!==t[s+1]&&(1!==s||c!==c[0]))if(i)a=!0;else for(var l=s*n,u=l-n,h=l+n,d=0;d!==n;++d){var f=e[l+d];if(f!==e[u+d]||f!==e[h+d]){a=!0;break}}if(a){if(s!==r){t[r]=t[s];for(var p=s*n,g=r*n,d=0;d!==n;++d)e[g+d]=e[p+d]}++r}}if(o>0){t[r]=t[o];for(var p=o*n,g=r*n,d=0;d!==n;++d)e[g+d]=e[p+d];++r}return r!==t.length&&(this.times=al.arraySlice(t,0,r),this.values=al.arraySlice(e,0,r*n)),this}}),gr.prototype=Object.assign(Object.create(pr.prototype),{constructor:gr,ValueTypeName:"vector"}),Object.assign(mr,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(pr.parse(n[r]).scale(i));return new mr(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e},r=0,o=n.length;r!==o;++r)e.push(pr.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,o=[],s=0;s<r;s++){var a=[],c=[];a.push((s+r-1)%r,s,(s+1)%r),c.push(0,1,0);var l=al.getKeyframeOrder(a);a=al.sortedArray(a,1,l),c=al.sortedArray(c,1,l),i||0!==a[0]||(a.push(r),c.push(c[0])),o.push(new ur(".morphTargetInfluences["+e[s].name+"]",a,c).scale(1/n))}return new mr(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],c=a.name.match(r);if(c&&c.length>1){var l=c[1],u=i[l];u||(i[l]=u=[]),u.push(a)}}var h=[];for(var l in i)h.push(mr.CreateFromMorphTargetSequence(l,i[l],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var o=[],s=[];al.flattenJSON(n,o,s,i),0!==o.length&&r.push(new t(e,o,s))}},i=[],r=t.name||"default",o=t.length||-1,s=t.fps||30,a=t.hierarchy||[],c=0;c<a.length;c++){var l=a[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var f in u){for(var p=[],g=[],d=0;d!==l[h].morphTargets.length;++d){var m=l[h];p.push(m.time),g.push(m.morphTarget===f?1:0)}i.push(new ur(".morphTargetInfluence["+f+"]",p,g))}o=u.length*(s||1)}else{var v=".bones["+e[c].name+"]";n(gr,v+".position",l,"pos",i),n(cr,v+".quaternion",l,"rot",i),n(gr,v+".scale",l,"scl",i)}}return 0===i.length?null:new mr(r,o,i)}}),Object.assign(mr.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(vr.prototype,{load:function(t,e,n,i){var r=this;new vi(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,i=new Jc[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new r).fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),i}}),Object.assign(yr.prototype,{load:function(t,e,n,i){var r=this;new vi(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new j,n=t.data.index;if(void 0!==n){var i=new cl[n.type](n.array);e.setIndex(new M(i,1))}var r=t.data.attributes;for(var o in r){var s=r[o],i=new cl[s.type](s.array);e.addAttribute(o,new M(i,s.itemSize,s.normalized))}var c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(var l=0,u=c.length;l!==u;++l){var h=c[l];e.addGroup(h.start,h.count,h.materialIndex)}var d=t.data.boundingSphere;if(void 0!==d){var f=new a;void 0!==d.center&&f.fromArray(d.center),e.boundingSphere=new g(f,d.radius)}return e}});var cl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};br.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}},Object.assign(br.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:function(){var t={NoBlending:vs,NormalBlending:ys,AdditiveBlending:bs,SubtractiveBlending:ws,MultiplyBlending:_s,CustomBlending:xs},e=new y,n=new xi,i=new vr;return function(r,o,s){function a(t,e,i,r,a){var l,u=o+t,h=br.Handlers.get(u);null!==h?l=h.load(u):(n.setCrossOrigin(s),l=n.load(u)),void 0!==e&&(l.repeat.fromArray(e),1!==e[0]&&(l.wrapS=la),1!==e[1]&&(l.wrapT=la)),void 0!==i&&l.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(l.wrapS=la),"mirror"===r[0]&&(l.wrapS=ha),"repeat"===r[1]&&(l.wrapT=la),"mirror"===r[1]&&(l.wrapT=ha)),void 0!==a&&(l.anisotropy=a);var d=kc.generateUUID();return c[d]=l,d}var c={},l={uuid:kc.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(h).getHex();break;case"colorSpecular":l.specular=e.fromArray(h).getHex();break;case"colorEmissive":l.emissive=e.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=us;break;case"doubleSided":l.side=hs;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":!0===h&&(l.vertexColors=ms),"face"===h&&(l.vertexColors=gs);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(c),i.parse(l)}}()});var ll={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")}};Object.assign(wr.prototype,{load:function(t,e,n,i){var r=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:ll.extractUrlBase(t),s=new vi(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(n){var i=JSON.parse(n),s=i.metadata;if(void 0!==s){var a=s.type;if(void 0!==a&&"object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var c=r.parse(i,o);e(c.geometry,c.materials)},n,i)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(t,e){function n(t,e){return t&1<<e}var i,o,s,c,l,u,h,d,f,p,g,m,v,b,w,_,x,E,A,S,M,T,k,F,O,P,L,R=t.faces,D=t.vertices,B=t.normals,I=t.colors,N=t.scale,j=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++)t.uvs[i].length&&j++;for(i=0;i<j;i++)e.faceVertexUvs[i]=[]}for(c=0,l=D.length;c<l;)E=new a,E.x=D[c++]*N,E.y=D[c++]*N,E.z=D[c++]*N,e.vertices.push(E);for(c=0,l=R.length;c<l;)if(p=R[c++],g=n(p,0),m=n(p,1),v=n(p,3),b=n(p,4),w=n(p,5),_=n(p,6),x=n(p,7),g){if(S=new C,S.a=R[c],S.b=R[c+1],S.c=R[c+3],M=new C,M.a=R[c+1],M.b=R[c+2],M.c=R[c+3],c+=4,m&&(f=R[c++],S.materialIndex=f,M.materialIndex=f),s=e.faces.length,v)for(i=0;i<j;i++)for(F=t.uvs[i],e.faceVertexUvs[i][s]=[],e.faceVertexUvs[i][s+1]=[],o=0;o<4;o++)d=R[c++],P=F[2*d],L=F[2*d+1],O=new r(P,L),2!==o&&e.faceVertexUvs[i][s].push(O),0!==o&&e.faceVertexUvs[i][s+1].push(O);if(b&&(h=3*R[c++],S.normal.set(B[h++],B[h++],B[h]),M.normal.copy(S.normal)),w)for(i=0;i<4;i++)h=3*R[c++],k=new a(B[h++],B[h++],B[h]),2!==i&&S.vertexNormals.push(k),0!==i&&M.vertexNormals.push(k);if(_&&(u=R[c++],T=I[u],S.color.setHex(T),M.color.setHex(T)),x)for(i=0;i<4;i++)u=R[c++],T=I[u],2!==i&&S.vertexColors.push(new y(T)),0!==i&&M.vertexColors.push(new y(T));e.faces.push(S),e.faces.push(M)}else{if(A=new C,A.a=R[c++],A.b=R[c++],A.c=R[c++],m&&(f=R[c++],A.materialIndex=f),s=e.faces.length,v)for(i=0;i<j;i++)for(F=t.uvs[i],e.faceVertexUvs[i][s]=[],o=0;o<3;o++)d=R[c++],P=F[2*d],L=F[2*d+1],O=new r(P,L),e.faceVertexUvs[i][s].push(O);if(b&&(h=3*R[c++],A.normal.set(B[h++],B[h++],B[h])),w)for(i=0;i<3;i++)h=3*R[c++],k=new a(B[h++],B[h++],B[h]),A.vertexNormals.push(k);if(_&&(u=R[c++],A.color.setHex(I[u])),x)for(i=0;i<3;i++)u=R[c++],A.vertexColors.push(new y(I[u]));e.faces.push(A)}}function e(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,r=t.skinWeights.length;i<r;i+=n){var o=t.skinWeights[i],s=n>1?t.skinWeights[i+1]:0,a=n>2?t.skinWeights[i+2]:0,c=n>3?t.skinWeights[i+3]:0;e.skinWeights.push(new u(o,s,a,c))}if(t.skinIndices)for(var i=0,r=t.skinIndices.length;i<r;i+=n){var l=t.skinIndices[i],h=n>1?t.skinIndices[i+1]:0,d=n>2?t.skinIndices[i+2]:0,f=n>3?t.skinIndices[i+3]:0;e.skinIndices.push(new u(l,h,d,f))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}function n(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){e.morphTargets[i]={},e.morphTargets[i].name=t.morphTargets[i].name,e.morphTargets[i].vertices=[];for(var o=e.morphTargets[i].vertices,s=t.morphTargets[i].vertices,c=0,l=s.length;c<l;c+=3){var u=new a;u.x=s[c]*n,u.y=s[c+1]*n,u.z=s[c+2]*n,o.push(u)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=e.faces,d=t.morphColors[0].colors,i=0,r=h.length;i<r;i++)h[i].color.fromArray(d,3*i)}}function i(t,e){var n=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var o=mr.parseAnimation(i[r],e.bones);o&&n.push(o)}if(e.morphTargets){var s=mr.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(s)}n.length>0&&(e.animations=n)}return function(r,o){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var s=new S;return t(r,s),e(r,s),n(r,s),i(r,s),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:s}:{geometry:s,materials:br.prototype.initMaterials(r.materials,o,this.crossOrigin)}}}()}),Object.assign(_r.prototype,{load:function(t,e,n,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new vi(r.manager).load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.");r.parse(o,e)},n,i)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(a)}),o=this.parseTextures(t.textures,r),s=this.parseMaterials(t.materials,o),a=this.parseObject(t.object,i,s);return t.animations&&(a.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(a),a},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new qi).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new wr,r=new yr,o=0,s=t.length;o<s;o++){var a,c=t[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Zc[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Zc[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Zc[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Zc[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Zc[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Zc[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Zc[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Zc[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Zc[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Zc[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Zc[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Zc[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],o=0,s=c.shapes.length;o<s;o++){var u=e[c.shapes[o]];l.push(u)}a=new Zc[c.type](l,c.curveSegments);break;case"BufferGeometry":a=r.parse(c);break;case"Geometry":a=i.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}a.uuid=c.uuid,void 0!==c.name&&(a.name=c.name),n[c.uuid]=a}return n},parseMaterials:function(t,e){var n={};if(void 0!==t){var i=new vr;i.setTextures(e);for(var r=0,o=t.length;r<o;r++){var s=t[r];if("MultiMaterial"===s.type){for(var a=[],c=0;c<s.materials.length;c++)a.push(i.parse(s.materials[c]));n[s.uuid]=a}else n[s.uuid]=i.parse(s)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=mr.parse(t[n]);e.push(i)}return e},parseImages:function(t,e){var n=this,i={};if(void 0!==t&&t.length>0){var r=new mi(e),o=new wi(r);o.setCrossOrigin(this.crossOrigin);for(var s=0,a=t.length;s<a;s++){var c=t[s],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;i[c.uuid]=function(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}(l)}}return i},parseTextures:function(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var a=new l(e[s.image]);a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,ul)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],hl),a.wrapT=n(s.wrap[1],hl)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,dl)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,dl)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),i[s.uuid]=a}return i},parseObject:function(t,e,n){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}var o;switch(t.type){case"Scene":o=new Te,void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new y(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Me(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Se(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new xe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new A(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new nr(t.color,t.intensity);break;case"DirectionalLight":o=new er(t.color,t.intensity);break;case"PointLight":o=new Qi(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new ir(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Ji(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Ki(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=i(t.geometry),a=r(t.material);o=s.bones&&s.bones.length>0?new Re(s,a):new Y(s,a);break;case"LOD":o=new Oe;break;case"Line":o=new Be(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":o=new Ne(i(t.geometry),r(t.material));break;case"LineSegments":o=new Ie(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":o=new Ue(i(t.geometry),r(t.material));break;case"Sprite":o=new Fe(r(t.material));break;case"Group":o=new $e;break;default:o=new x}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var c=t.children,l=0;l<c.length;l++)o.add(this.parseObject(c[l],e,n));if("LOD"===t.type)for(var u=t.levels,h=0;h<u.length;h++){var d=u[h],f=o.getObjectByProperty("uuid",d.object);void 0!==f&&o.addLevel(f,d.distance)}return o}});var ul={UVMapping:ea,CubeReflectionMapping:na,CubeRefractionMapping:ia,EquirectangularReflectionMapping:ra,EquirectangularRefractionMapping:oa,SphericalReflectionMapping:sa,CubeUVReflectionMapping:aa,CubeUVRefractionMapping:ca},hl={RepeatWrapping:la,ClampToEdgeWrapping:ua,MirroredRepeatWrapping:ha},dl={NearestFilter:da,NearestMipMapNearestFilter:fa,NearestMipMapLinearFilter:pa,LinearFilter:ga,LinearMipMapNearestFilter:ma,LinearMipMapLinearFilter:va};xr.prototype={constructor:xr,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=Qc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){Qc.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Er.prototype,{moveTo:function(t,e){this.currentPath=new Gi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new qi;o.curves=r.curves,e.push(o)}return e}var i=Yc.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return n(r);var o,s,a,c=[];if(1===r.length)return s=r[0],a=new qi,a.curves=s.curves,c.push(a),c;var l=!i(r[0].getPoints());l=t?!l:l;var u,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var g=0,m=r.length;g<m;g++)s=r[g],u=s.getPoints(),o=i(u),o=t?!o:o,o?(!l&&d[p]&&p++,d[p]={s:new qi,p:u},d[p].s.curves=s.curves,l&&p++,f[p]=[]):f[p].push({h:s,p:u[0]});if(!d[0])return n(r);if(d.length>1){for(var v=!1,y=[],b=0,w=d.length;b<w;b++)h[b]=[];for(var b=0,w=d.length;b<w;b++)for(var _=f[b],x=0;x<_.length;x++){for(var E=_[x],A=!0,C=0;C<d.length;C++)(function(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var s=e[r],a=e[o],c=a.x-s.x,l=a.y-s.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(s=e[o],c=-c,a=e[r],l=-l),t.y<s.y||t.y>a.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{var u=l*(t.x-s.x)-c*(t.y-s.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==s.y)continue;if(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x)return!0}}return i})(E.p,d[C].p)&&(b!==C&&y.push({froms:b,tos:C,hole:x}),A?(A=!1,h[C].push(E)):v=!0);A&&h[b].push(E)}y.length>0&&(v||(f=h))}for(var S,g=0,M=d.length;g<M;g++){a=d[g].s,c.push(a),S=f[g];for(var T=0,k=S.length;T<k;T++)a.holes.push(S[T].h)}return c}}),Object.assign(Ar.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);for(var i=[],r=Cr(t,e,n,this.data),o=0,s=r.length;o<s;o++)Array.prototype.push.apply(i,r[o].toShapes());return i}}),Object.assign(Mr.prototype,{load:function(t,e,n,i){var r=this,o=new vi(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new Ar(t)},setPath:function(t){return this.path=t,this}});var fl,pl={getContext:function(){return void 0===fl&&(fl=new(window.AudioContext||window.webkitAudioContext)),fl},setContext:function(t){fl=t}};Object.assign(Tr.prototype,{load:function(t,e,n,i){var r=new vi(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){pl.getContext().decodeAudioData(t,function(t){e(t)})},n,i)}}),Object.assign(kr.prototype,{update:function(){var t,e,n,i,r,s,a,c,l=new o,u=new o;return function(o){if(t!==this||e!==o.focus||n!==o.fov||i!==o.aspect*this.aspect||r!==o.near||s!==o.far||a!==o.zoom||c!==this.eyeSep){t=this,e=o.focus,n=o.fov,i=o.aspect*this.aspect,r=o.near,s=o.far,a=o.zoom;var h=o.projectionMatrix.clone();c=this.eyeSep/2;var d,f,p=c*r/e,g=r*Math.tan(kc.DEG2RAD*n*.5)/a;u.elements[12]=-c,l.elements[12]=c,d=-g*i+p,f=g*i+p,h.elements[0]=2*r/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(h),d=-g*i-p,f=g*i-p,h.elements[0]=2*r/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(l)}}()}),Fr.prototype=Object.create(x.prototype),Fr.prototype.constructor=Fr,Or.prototype=Object.assign(Object.create(x.prototype),{constructor:Or,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new a,e=new s,n=new a,i=new a;return function(r){x.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(s.x,this.context.currentTime),o.upY.setValueAtTime(s.y,this.context.currentTime),o.upZ.setValueAtTime(s.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z))}}()}),Pr.prototype=Object.assign(Object.create(x.prototype),{constructor:Pr,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),Lr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Lr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new a;return function(e){x.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Rr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Dr.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==i;++s)n[r+s]=n[s];o=e}else{o+=e;var a=e/o;this._mixBufferRegion(n,r,0,a,i)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*e;this._mixBufferRegion(n,i,s,1-r,e)}for(var a=e,c=e+e;a!==c;++a)if(n[a]!==n[a+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){s.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var o=1-i,s=0;s!==r;++s){var a=e+s;t[a]=t[a]*o+t[n+s]*i}}});var gl="\\[\\]\\.:\\/";Object.assign(Br.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Ir,{Composite:Br,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Ir.Composite(t,e,n):new Ir(t,e,n)},sanitizeNodeName:function(){var t=new RegExp("["+gl+"]","g");return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+gl+"]",e="[^"+gl.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),i=/(WCOD+)?/.source.replace("WCOD",e),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),s=new RegExp("^"+n+i+r+o+"$"),a=["material","materials","bones"];return function(t){var e=s.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==a.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function t(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===e||r.uuid===e)return r;var o=t(r.children);if(o)return o}return null}(t.children);if(i)return i}return null}}),Object.assign(Ir.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Ir.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var a=t[i];if(void 0===a){var c=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",t)}var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(t.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===r){r=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ir.prototype,{_getValue_unbound:Ir.prototype.getValue,_setValue_unbound:Ir.prototype.setValue}),Object.assign(Nr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],d=h.uuid,f=i[d];if(void 0===f){f=e++,i[d]=f,t.push(h);for(var p=0,g=a;p!==g;++p)s[p].push(new Ir(h,r[p],o[p]))}else if(f<n){c=t[f];var m=--n,v=t[m];i[v.uuid]=f,t[f]=v,i[d]=m,t[m]=h;for(var p=0,g=a;p!==g;++p){var y=s[p],b=y[m],w=y[f];y[f]=b,void 0===w&&(w=new Ir(h,r[p],o[p])),y[m]=w}}else t[f]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,s=arguments.length;o!==s;++o){var a=arguments[o],c=a.uuid,l=n[c];if(void 0!==l&&l>=e){var u=e++,h=t[u];n[h.uuid]=l,t[l]=h,n[c]=u,t[u]=a;for(var d=0,f=r;d!==f;++d){var p=i[d],g=p[u],m=p[l];p[l]=g,p[u]=m}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,s=0,a=arguments.length;s!==a;++s){var c=arguments[s],l=c.uuid,u=i[l];if(void 0!==u)if(delete i[l],u<n){var h=--n,d=t[h],f=--e,p=t[f];i[d.uuid]=u,t[u]=d,i[p.uuid]=h,t[h]=p,t.pop();for(var g=0,m=o;g!==m;++g){var v=r[g],y=v[h],b=v[f];v[u]=y,v[h]=b,v.pop()}}else{var f=--e,p=t[f];i[p.uuid]=u,t[u]=p,t.pop();for(var g=0,m=o;g!==m;++g){var v=r[g];v[u]=v[f],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,s=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[t]=i,o.push(t),s.push(e),r.push(u);for(var h=l,d=a.length;h!==d;++h){var f=a[h];u[h]=new Ir(f,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];e[t[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}),Object.assign(jr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=r/i,s=i/r;t.warp(1,o,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,c=o.sampleValues;return a[0]=r,a[1]=r+n,c[0]=t/s,c[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var s=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(s),l[u].accumulate(i,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===ac){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=i===lc;if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){var c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&r))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=pc,i.endingEnd=pc):(i.endingStart=t?this.zeroSlopeAtStart?pc:fc:gc,i.endingEnd=e?this.zeroSlopeAtEnd?pc:fc:gc)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=e,s[1]=r+t,a[1]=n,this}}),Ur.prototype=Object.assign(Object.create(i.prototype),{constructor:Ur,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,s=t._interpolants,a=n.uuid,c=this._bindingsByRootAndName,l=c[a];void 0===l&&(l={},c[a]=l);for(var u=0;u!==r;++u){var h=i[u],d=h.name,f=l[d];if(void 0!==f)o[u]=f;else{if(void 0!==(f=o[u])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,a,d));continue}var p=e&&e._propertyBindings[u].binding.parsedPath;f=new Dr(Ir.create(n,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,d),o[u]=f}s[u].resultBuffer=f.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,s=r.length;o!==s;++o){var a=r[o];0===a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,c=a[a.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],o=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=e[e.length-1],c=t._cacheIndex;a._cacheIndex=c,e[c]=a,e.pop(),delete s[r];t:{for(var l in s)break t;delete o[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new dr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"===typeof t?mr.findByName(n,t):t,o=null!==r?r.uuid:t,s=this._actionsByClip[o],a=null;if(void 0!==s){var c=s.actionByRoot[i];if(void 0!==c)return c;a=s.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var l=new jr(this,r,e);return this._bindAction(l,a),this._addInactiveAction(l,o,i),l},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"===typeof t?mr.findByName(n,t):t,o=r?r.uuid:t,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[i]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,s=0;s!==n;++s){e[s]._update(i,t,r,o)}for(var a=this._bindings,c=this._nActiveBindings,s=0;s!==c;++s)a[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,s=0,a=o.length;s!==a;++s){var c=o[s];this._deactivateAction(c);var l=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,o=r[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var s=this._bindingsByRootAndName,a=s[e];if(void 0!==a)for(var c in a){var l=a[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),$r.prototype.clone=function(){return new $r(void 0===this.value.clone?this.value:this.value.clone())},zr.prototype=Object.assign(Object.create(j.prototype),{constructor:zr,isInstancedBufferGeometry:!0,copy:function(t){return j.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Hr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Hr.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),Object.defineProperty(Vr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Vr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Wr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Wr,isInstancedInterleavedBuffer:!0,copy:function(t){return Vr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Gr.prototype=Object.assign(Object.create(M.prototype),{constructor:Gr,isInstancedBufferAttribute:!0,copy:function(t){return M.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(qr.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return Kr(t,this,i,e),i.sort(Xr),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=t.length;r<o;r++)Kr(t[r],this,i,e);return i.sort(Xr),i}}),Object.assign(Yr.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Zr.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(kc.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(Jr.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(Qr.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),to.prototype=Object.create(x.prototype),to.prototype.constructor=to,to.prototype.isImmediateRenderObject=!0,eo.prototype=Object.create(Ie.prototype),eo.prototype.constructor=eo,eo.prototype.update=function(){var t=new a,e=new a,n=new c;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,c=s.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],f=0,p=d.vertexNormals.length;f<p;f++){var g=a[d[i[f]]],m=d.vertexNormals[f];t.copy(g).applyMatrix4(r),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}else if(s&&s.isBufferGeometry)for(var v=s.attributes.position,y=s.attributes.normal,l=0,f=0,p=v.count;f<p;f++)t.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(r),e.set(y.getX(f),y.getY(f),y.getZ(f)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1;o.needsUpdate=!0}}(),no.prototype=Object.create(x.prototype),no.prototype.constructor=no,no.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},no.prototype.update=function(){var t=new a,e=new a;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),ro.prototype=Object.create(Ie.prototype),ro.prototype.constructor=ro,ro.prototype.updateMatrixWorld=function(){var t=new a,e=new o,n=new o;return function(i){var r=this.bones,o=this.geometry,s=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var a=0,c=0;a<r.length;a++){var l=r[a];l.parent&&l.parent.isBone&&(e.multiplyMatrices(n,l.matrixWorld),t.setFromMatrixPosition(e),s.setXYZ(c,t.x,t.y,t.z),e.multiplyMatrices(n,l.parent.matrixWorld),t.setFromMatrixPosition(e),s.setXYZ(c+1,t.x,t.y,t.z),c+=2)}o.getAttribute("position").needsUpdate=!0,x.prototype.updateMatrixWorld.call(this,i)}}(),oo.prototype=Object.create(Y.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},oo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},so.prototype=Object.create(x.prototype),so.prototype.constructor=so,so.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},so.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=t,i[1]=-e,i[2]=0,i[3]=t,i[4]=e,i[5]=0,i[6]=-t,i[7]=e,i[8]=0,i[9]=-t,i[10]=-e,i[11]=0,i[12]=t,i[13]=-e,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ao.prototype=Object.create(x.prototype),ao.prototype.constructor=ao,ao.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ao.prototype.update=function(){var t=new a,e=new y,n=new y;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,s=r.count;o<s;o++){var a=o<s/2?e:n;r.setXYZ(o,a.r,a.g,a.b)}r.needsUpdate=!0}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),co.prototype=Object.create(Ie.prototype),co.prototype.constructor=co,lo.prototype=Object.create(Ie.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(Ie.prototype),uo.prototype.constructor=uo,uo.prototype.update=function(){var t=new a,e=new a,n=new c;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=o.faces,c=0,l=0,u=a.length;l<u;l++){var h=a[l],d=h.normal;t.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(i),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(c,t.x,t.y,t.z),c+=1,r.setXYZ(c,e.x,e.y,e.z),c+=1}r.needsUpdate=!0}}(),ho.prototype=Object.create(x.prototype),ho.prototype.constructor=ho,ho.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ho.prototype.update=function(){var t=new a,e=new a,n=new a;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),fo.prototype=Object.create(Ie.prototype),fo.prototype.constructor=fo,fo.prototype.update=function(){function t(t,o,s,a){i.set(o,s,a).unproject(r);var c=n[t];if(void 0!==c)for(var l=e.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],i.x,i.y,i.z)}var e,n,i=new a,r=new E;return function(){e=this.geometry,n=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),po.prototype=Object.create(Ie.prototype),po.prototype.constructor=po,po.prototype.update=function(){var t=new p;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),po.prototype.setFromObject=function(t){return this.object=t,this.update(),this},go.prototype=Object.create(Ie.prototype),go.prototype.constructor=go,go.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,t))},mo.prototype=Object.create(Be.prototype),mo.prototype.constructor=mo,mo.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),x.prototype.updateMatrixWorld.call(this,t)};var ml,vl;vo.prototype=Object.create(x.prototype),vo.prototype.constructor=vo,vo.prototype.setDirection=function(){var t,e=new a;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),vo.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},vo.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},yo.prototype=Object.create(Ie.prototype),yo.prototype.constructor=yo;var yl=0,bl=1;Ei.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ei.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Wi.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new S,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new a(r.x,r.y,r.z||0))}return e}}),Object.assign(Gi.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),jo.prototype=Object.create(Mi.prototype),Uo.prototype=Object.create(Mi.prototype),$o.prototype=Object.create(Mi.prototype),Object.assign($o.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),co.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ro.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(br.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ll.extractUrlBase(t)}}),Object.assign(Qr.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(p.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),X.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(kc,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),kc.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),kc.ceilPowerOfTwo(t)}}),Object.assign(c.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(o.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)}}),m.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},s.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(q.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(K.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(K,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),K.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),K.getNormal(t,e,n,i)}}),Object.assign(qi.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new $n(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zn(this,t)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(u.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(x.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(x.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Oe.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Pe.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ei.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),xe.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Xi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(M.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(j.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(j.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($r.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new y}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===ds}}}),Object.defineProperties(hi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(G.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ce.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Ce.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(me.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(h.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ae.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Pr.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Tr).load(t,function(t){e.setBuffer(t)}),this},Rr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Fr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var wl={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},_l={crossOrigin:void 0,loadTexture:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new xi;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new _i;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},xl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}}},function(t,e,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,a){"object"===s(e)?t.exports=e=a():(r=[],i=a,void 0!==(o="function"===typeof i?i.apply(e,r):i)&&(t.exports=o))}(0,function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},o=r.Base=function(){return{extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var o=0;o<r;o+=4)e[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=0;r<e;r+=4){var o=function(e){var e=e,n=987654321,i=4294967295;return function(){n=36969*(65535&n)+(n>>16)&i,e=18e3*(65535&e)+(e>>16)&i;var r=(n<<16)+e&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}}(4294967296*(n||t.random()));n=987654071*o(),i.push(4294967296*o()|0)}return new s.init(i,e)}}),a=i.enc={},c=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new s.init(n,e/2)}},l=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new s.init(n,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=4*o,c=r/a;c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);var l=c*o,u=t.min(4*l,r);if(l){for(var h=0;h<l;h+=o)this._doProcessBlock(i,h);var d=i.splice(0,l);n.sigBytes-=u}return new s.init(d,u)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math);return t})},function(t,e,n){"use strict";var i=n(47),r=n(129),o=n(130),s=n(131),a=n(50);n(49);n.d(e,"e",function(){return i.b}),n.d(e,"c",function(){return r.a}),n.d(e,"b",function(){return o.a}),n.d(e,"a",function(){return s.a}),n.d(e,"d",function(){return a.a})},function(t,e,n){"use strict";e.__esModule=!0;var i=(e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t},e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)});e.stripBasename=function(t,e){return i(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",i="",r=e.indexOf("#");-1!==r&&(i=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===i?"":i}},e.createPath=function(t){var e=t.pathname,n=t.search,i=t.hash,r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"f",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"d",function(){return c}),n.d(e,"b",function(){return l});var i=function(t){return"/"===t.charAt(0)?t:"/"+t},r=function(t){return"/"===t.charAt(0)?t.substr(1):t},o=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)},s=function(t,e){return o(t,e)?t.substr(e.length):t},a=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},c=function(t){var e=t||"/",n="",i="",r=e.indexOf("#");-1!==r&&(i=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===i?"":i}},l=function(t){var e=t.pathname,n=t.search,i=t.hash,r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}},function(t,e,n){"use strict";var i=n(136);n.d(e,"a",function(){return i.a});var r=(n(144),n(63));n.d(e,"d",function(){return r.b});var o=n(64);n.d(e,"b",function(){return o.b});var s=n(145);n.d(e,"c",function(){return s.a})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":p(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":p(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),c=n(3),l=n.n(c),u=n(0),h=n.n(u),d=n(1),f=n.n(d),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},m=function(t){function e(){var n,o,s;i(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,t.call.apply(t,[this].concat(c))),o.state={match:o.computeMatch(o.props.history.location.pathname)},s=n,r(o,s)}return o(e,t),e.prototype.getChildContext=function(){return{router:g({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},e.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.children,i=e.history;l()(null==n||1===h.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=i.listen(function(){t.setState({match:t.computeMatch(i.location.pathname)})})},e.prototype.componentWillReceiveProps=function(t){a()(this.props.history===t.history,"You cannot change <Router history>")},e.prototype.componentWillUnmount=function(){this.unlisten()},e.prototype.render=function(){var t=this.props.children;return t?h.a.Children.only(t):null},e}(h.a.Component);m.propTypes={history:f.a.object.isRequired,children:f.a.node},m.contextTypes={router:f.a.object},m.childContextTypes={router:f.a.object.isRequired},e.a=m},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c});var i=n(55),r=n(56),o=n(14),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(t,e,n,r){var a=void 0;"string"===typeof t?(a=Object(o.d)(t),a.state=e):(a=s({},t),void 0===a.pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==e&&void 0===a.state&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=Object(i.default)(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a},c=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Object(r.default)(t.state,e.state)}},function(t,e,n){"use strict";var i=n(142),r=n.n(i),o={},s=0,a=function(t,e){var n=""+e.end+e.strict+e.sensitive,i=o[n]||(o[n]={});if(i[t])return i[t];var a=[],c=r()(t,a,e),l={re:c,keys:a};return s<1e4&&(i[t]=l,s++),l},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof e&&(e={path:e});var n=e,i=n.path,r=void 0===i?"/":i,o=n.exact,s=void 0!==o&&o,c=n.strict,l=void 0!==c&&c,u=n.sensitive,h=void 0!==u&&u,d=a(r,{end:s,strict:l,sensitive:h}),f=d.re,p=d.keys,g=f.exec(t);if(!g)return null;var m=g[0],v=g.slice(1),y=t===m;return s&&!y?null:{path:r,url:"/"===r&&""===m?"/":m,isExact:y,params:p.reduce(function(t,e,n){return t[e.name]=v[n],t},{})}};e.a=c},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments[1],n=new Array(t),i=0,r=0,l=0,u=function(e){n[r]=e,r=(r+1)%t,i++},h=function(){if(0!=i){var e=n[l];return n[l]=null,i--,l=(l+1)%t,e}},d=function(){for(var t=[];i;)t.push(h());return t};return{isEmpty:function(){return 0==i},put:function(h){if(i<t)u(h);else{var f=void 0;switch(e){case s:throw new Error(o);case a:n[r]=h,r=(r+1)%t,l=r;break;case c:f=2*t,n=d(),i=n.length,r=n.length,l=0,n.length=f,t=f,u(h)}}},take:h,flush:d}}n.d(e,"a",function(){return u});var r=n(4),o="Channel's Buffer overflow!",s=1,a=3,c=4,l={isEmpty:r.o,put:r.r,take:r.r},u={none:function(){return l},fixed:function(t){return i(t,s)},dropping:function(t){return i(t,2)},sliding:function(t){return i(t,a)},expanding:function(t){return i(t,c)}}},function(t,e,n){t.exports=n(181)},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,c=i(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(c[u]=n[u]);if(r){a=r(n);for(var h=0;h<a.length;h++)s.call(n,a[h])&&(c[a[h]]=n[a[h]])}}return c}},function(t,e,n){"use strict";function i(t,e,n,i,o,s,a,c){if(r(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,o,s,a,c],h=0;l=new Error(e.replace(/%s/g,function(){return u[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(t){};t.exports=i},function(t,e,n){"use strict";function i(t){return function(){return t}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";var i=n(111),r=(n(45),n(115));n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a})},function(t,e,n){"use strict";function i(t){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.a=i},function(t,e,n){"use strict";function i(t){if(!Object(s.a)(t)||Object(r.a)(t)!=a)return!1;var e=Object(o.a)(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d}var r=n(118),o=n(123),s=n(125),a="[object Object]",c=Function.prototype,l=Object.prototype,u=c.toString,h=l.hasOwnProperty,d=u.call(Object);e.a=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=n(55),s=i(o),a=n(56),c=i(a),l=n(13);e.createLocation=function(t,e,n,i){var o=void 0;"string"===typeof t?(o=(0,l.parsePath)(t),o.state=e):(o=r({},t),void 0===o.pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=(0,s.default)(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,c.default)(t.state,e.state)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(2),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function(){var t=null,e=function(e){return(0,r.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,i,o){if(null!=t){var s="function"===typeof t?t(e,n):t;"string"===typeof s?"function"===typeof i?i(s,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)},i=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return i.push(n),function(){e=!1,i=i.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];i.forEach(function(t){return t.apply(void 0,e)})}}};e.default=o},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=function(){var t=null,e=function(e){return r()(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,i,o){if(null!=t){var s="function"===typeof t?t(e,n):t;"string"===typeof s?"function"===typeof i?i(s,o):(r()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)},i=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return i.push(n),function(){e=!1,i=i.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];i.forEach(function(t){return t.apply(void 0,e)})}}};e.a=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),c=n(3),l=n.n(c),u=n(0),h=n.n(u),d=n(1),f=n.n(d),p=n(18),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v=function(t){return 0===h.a.Children.count(t)},y=function(t){function e(){var n,o,s;i(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,t.call.apply(t,[this].concat(c))),o.state={match:o.computeMatch(o.props,o.context.router)},s=n,r(o,s)}return o(e,t),e.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},e.prototype.computeMatch=function(t,e){var n=t.computedMatch,i=t.location,r=t.path,o=t.strict,s=t.exact,a=t.sensitive;if(n)return n;l()(e,"You should not use <Route> or withRouter() outside a <Router>");var c=e.route,u=(i||c.location).pathname;return r?Object(p.a)(u,{path:r,strict:o,exact:s,sensitive:a}):c.match},e.prototype.componentWillMount=function(){a()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),a()(!(this.props.component&&this.props.children&&!v(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),a()(!(this.props.render&&this.props.children&&!v(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},e.prototype.componentWillReceiveProps=function(t,e){a()(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),a()(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},e.prototype.render=function(){var t=this.state.match,e=this.props,n=e.children,i=e.component,r=e.render,o=this.context.router,s=o.history,a=o.route,c=o.staticContext,l=this.props.location||a.location,u={match:t,location:l,history:s,staticContext:c};return i?t?h.a.createElement(i,u):null:r?t?r(u):null:n?"function"===typeof n?n(u):v(n)?null:h.a.Children.only(n):null},e}(h.a.Component);y.propTypes={computedMatch:f.a.object,path:f.a.string,exact:f.a.bool,strict:f.a.bool,sensitive:f.a.bool,component:f.a.func,render:f.a.func,children:f.a.oneOfType([f.a.func,f.a.node]),location:f.a.object},y.contextTypes={router:f.a.shape({history:f.a.object.isRequired,route:f.a.object.isRequired,staticContext:f.a.object})},y.childContextTypes={router:f.a.object.isRequired},e.a=y},function(t,e,n){"use strict";function i(t){return o.n.channel(t)?"channel":Array.isArray(t)?String(t.map(function(t){return String(t)})):String(t)}function r(t,e){function n(e,n){if(c===a)return s;if(n)throw c=a,n;r&&r(e);var i=t[c](),o=i[0],l=i[1],u=i[2];return c=o,r=u,c===a?s:l}var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",r=void 0,c=e;return Object(o.q)(n,function(t){return n(null,t)},i,!0)}n.d(e,"b",function(){return a}),e.c=i,e.a=r;var o=n(4),s={done:!0,value:void 0},a={}},function(t,e,n){"use strict";var i=n(6);n.d(e,"c",function(){return i.g}),n.d(e,"a",function(){return i.b}),n.d(e,"b",function(){return i.d}),n.d(e,"d",function(){return i.i})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"types",function(){return r}),n.d(e,"init",function(){return o}),n.d(e,"switchMode",function(){return a}),n.d(e,"didInit",function(){return c}),n.d(e,"changeFloor",function(){return l}),n.d(e,"floorDidChanged",function(){return u}),n.d(e,"onClick",function(){return h});var i=n(34),r={WILL_INIT:"map/WILL_INIT",DID_INIT:"map/DID_INIT",SWITCH_MODE:"map/SWITCH_MODE",FLOOR_WILL_CHANGE:"map/FLOOR_WILL_CHANGE",FLOOR_DID_CHANGE:"map/FLOOR_DID_CHANGE",ON_CLICK:"map/ON_CLICK"},o=function(){return{type:r.WILL_INIT}},s="3D",a=function(){return s="3D"===s?"2D":"3D",{type:r.SWITCH_MODE,mode:s}},c=function(){return{type:r.DID_INIT}},l=function(t){return{type:r.FLOOR_WILL_CHANGE,floorID:t}},u=function(t,e){return{type:r.FLOOR_DID_CHANGE,currentFloor:t,previousFloor:e}},h=function(t){return i.a.onClick(),{type:r.ON_CLICK,currentClickedEvent:t}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(71),o=(n(82),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),s=function(){function t(){i(this,t),this.awm=null,this.onClickEvent=null,this.current=null,this.locked=!1}return o(t,[{key:"init",value:function(t){return this.awm=t,this}},{key:"setEvent",value:function(t){this.onClickEvent=t}},{key:"getEvent",value:function(){return this.onClickEvent}},{key:"onClick",value:function(){var t=this.onClickEvent.intersects;if(0===t.length)return void this.updateSelection(null);var e=t[0];if(e.object.isBuilding||e.object.isSpace)this.updateSelection(e.object);else if(e.object.isLabel){var n=e.object.parent;n.isBuilding||n.isSpace?this.updateSelection(n):this.updateSelection(e.object)}else this.updateSelection(null)}},{key:"updateSelection",value:function(t){var e=this;this.locked||t===this.current||(null!==this.current&&this.current.isBuilding?this.resetBuilding(this.current):null!==this.current&&this.current.isSpace&&this.resetSpace(this.current),this.current=t,null!==this.current&&this.current.isBuilding?(this.locked=!0,this.highlightBuilding(this.current).then(function(){e.locked=!1})):null!==this.current&&this.current.isSpace?(this.locked=!0,this.highlightSpace(this.current).then(function(){return r.a.goTo(e.current)}).then(function(){e.locked=!1})):null!==this.current&&this.current.isLabel&&(this.locked=!0,this.highlightLabel(this.current).then(function(){return r.a.goTo(e.current)}).then(function(){e.locked=!1})))}},{key:"highlightBuilding",value:function(t){return this.awm.cameraManager.centerOn(t).then(function(){t.setColor(7921807)})}},{key:"resetBuilding",value:function(t){t.resetColor()}},{key:"highlightSpace",value:function(t){return Promise.resolve().then(function(){t.setColor(7921807),t.bounceUp(3)})}},{key:"highlightLabel",value:function(t){return this.awm.cameraManager.centerOn(t)}},{key:"resetSpace",value:function(t){t.resetColor(),t.bounceDown()}}]),t}(),a=new s;e.a=a},function(t,e,n){(function(n,i){var r,o,s,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,i){"object"==a(e)&&"undefined"!=typeof t?i(e):(o=[e],r=i,void 0!==(s="function"===typeof r?r.apply(e,o):r)&&(t.exports=s))}(0,function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":a(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,r,o;i=t,o=n[r=e],r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})}return t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t){if(t&&t.nodeType||void 0===t||"object"!==e(t))return t;if(Array.isArray(t))return[].concat(t);if("object"===e(t)){var n={};for(var i in t)n[i]=l(t[i]);return n}return t}function u(t){return"string"!=typeof t?t:t.replace(B,I).match(R).map(function(t){return D(t)?t:+t})}function h(t,n,i,r,o){var s=i[t],a=r[t];if("string"==typeof s||"string"==typeof a){for(var c=Array.isArray(s)&&s[0]===L?s:u(s),l=Array.isArray(a)&&a[0]===L?a:u(a),d=1;d<c.length;)c[d]===l[d]&&"string"==typeof c[d-1]?(c.splice(d-1,2,c[d-1]+c[d]),l.splice(d-1,2,l[d-1]+l[d])):d++;c[d=0]===L&&c.shift(),l[0]===L&&l.shift();for(var f={isString:!0,length:c.length},p={isString:!0,length:l.length};d<f.length;)f[d]=c[d],p[d]=l[d],d++;return i[t]=f,r[t]=p,!0}if("object"===e(s)&&"object"===e(a)){if(Array.isArray(s))return s.map(function(e,i){return h(i,n[t],s,a)});for(var g in a)h(g,n[t],s,a);return!0}return!1}function d(t,n,i,r,o,s,a){var c=a?i:i[t],l=a?r:r[t];if(void 0===l)return c;if(void 0===c||"string"==typeof c||c===l)return l;if("object"===e(c)&&"object"===e(l)){if(!c||!l)return n[t];if("object"===e(c)&&c&&c.isString){for(var u="",h=0,f=c.length;h<f;h++){var p="number"==typeof c[h]&&"string"==typeof l[h]&&"="===l[h][1],g="number"!=typeof c[h]?c[h]:((p?c[h]+parseFloat(l[h][0]+l[h].substr(2))*o:c[h]+(l[h]-c[h])*o)*N|0)/N;(U(c,h)||U(c,h,j))&&(g|=0),u+=g,p&&1===s&&(c[h]=c[h]+parseFloat(l[h][0]+l[h].substr(2)))}return a||(n[t]=u),u}if(Array.isArray(c)&&c[0]!==L)for(var m=0,v=c.length;m<v;m++)c[m]!==l[m]&&d(m,n[t],c,l,o,s);else if("object"===e(c)&&c&&!c.isString)for(var y in c)c[y]!==l[y]&&d(y,n[t],c,l,o,s)}else if("number"==typeof c){var b="string"==typeof l;n[t]=((b?c+parseFloat(l[0]+l.substr(2))*o:c+(l-c)*o)*N|0)/N,b&&1===s&&(i[t]=n[t])}else"function"==typeof l&&(n[t]=l(o));return n[t]}"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var f,p,g="undefined"!=typeof window?window:"undefined"!=typeof n?n:this,m=g.requestAnimationFrame||function(t){return g.setTimeout(t,16)},v=g.cancelAnimationFrame||function(t){return g.clearTimeout(t)},y=function(){if("undefined"==typeof i||void 0===i.hrtime||i.versions&&void 0!==i.versions.electron){if(void 0!==g.performance&&void 0!==g.performance.now)return g.performance.now.bind(g.performance);var t=g.performance&&g.performance.timing&&g.performance.timing.navigationStart?g.performance.timing.navigationStart:Date.now();return function(){return Date.now()-t}}return function(){var t=i.hrtime();return 1e3*t[0]+t[1]/1e6}}(),b=[],w=!1,_=!1,x=m,E=v,A=0,C=function(t){var e=b.indexOf(t);-1<e&&b.splice(e,1),b.push(t),A=0,_&&!w&&(f=x(T),w=!0)},S=function(t){for(var e=0;e<b.length;e++)if(t===b[e])return b[e];return null},M=function(t){var e=b.indexOf(t);-1!==e&&b.splice(e,1)},T=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y(),n=1<arguments.length?arguments[1]:void 0;if(_&&w&&(f=x(t)),b.length||A++,120<A)return E(f),A=0,w=!1;for(var i=0;i<b.length;)b[i++].update(e,n);return!0},k={},F={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-F.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*F.Bounce.In(2*t):.5*F.Bounce.Out(2*t-1)+.5}},Stepped:{steps:function(t){return function(e){return(e*t|0)/t}}}},O="_chainedTweens",P="Callback",L="STRING_PROP",R=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g,D=function(t){return isNaN(+t)||("+"===t[0]||"-"===t[0])&&"="===t[1]||""===t||" "===t},B=/^#([0-9a-f]{6}|[0-9a-f]{3})$/i,I=function(t,e){var n,i,r;3===e.length&&(e=(n=e[0])+n+(i=e[1])+i+(r=e[2])+r);var o=parseInt(e,16);return"rgb("+(n=o>>16&255)+","+(i=o>>8&255)+","+(r=255&o)+")"},N=Math.pow(10,4),j="rgba(",U=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgb(";return"number"==typeof t[e]&&(t[e-1]===n||t[e-3]===n||t[e-5]===n)},$=/([.[])/g,z=/\]/g,H=function(t,n){var i=t[n],r=n.replace(z,"").split($),o=r.length-1,s=Array.isArray(t),a="object"===e(t)&&!s;return a?(t[n]=null,delete t[n]):s&&t.splice(n,1),r.reduce(function(t,e,n){s&&"."!==e&&"["!==e&&(e*=1);var c="["===r[n+1];if("."===e||"["===e)return"."===e?s=!(a=!0):"["===e&&(s=!(a=!1)),t;if(void 0===t[e]){if(s||a)return t[e]=n===o?i:s||c?[]:a?{}:null,a=s=!1,t[e]}else if(void 0!==t[e])return n===o&&(t[e]=i),t[e];return t},t)},V=function(t){if("object"===e(t)&&t)for(var n in t)if(-1!==n.indexOf(".")||-1!==n.indexOf("["))H(t,n);else if("object"===e(t[n])&&t[n]){var i=t[n];for(var r in i)if(-1!==r.indexOf(".")||-1!==r.indexOf("["))H(i,r);else if("object"===e(i[r])&&i[r]){var o=i[r];for(var s in o)-1===s.indexOf(".")&&-1===s.indexOf("[")||H(o,s)}}return t},W={Linear:function(t,e,n){var i=t.length-1,r=i*e,o=Math.floor(r),s=W.Utils.Linear;return e<0?s(t[0],t[1],r,n):1<e?s(t[i],t[i-1],i-r,n):s(t[o],t[i<o+1?i:o+1],r-o,n)},Bezier:function(t,n,i){for(var r=W.Utils.Reset(i),o=t.length-1,s=Math.pow,a=W.Utils.Bernstein,c=Array.isArray(r),l=0;l<=o;l++)if("number"==typeof r)r+=s(1-n,o-l)*s(n,l)*t[l]*a(o,l);else if(c)for(var u=0,h=r.length;u<h;u++)"number"==typeof r[u]?r[u]+=s(1-n,o-l)*s(n,l)*t[l][u]*a(o,l):r[u]=t[l][u];else if("object"===e(r))for(var d in r)"number"==typeof r[d]?r[d]+=s(1-n,o-l)*s(n,l)*t[l][d]*a(o,l):r[d]=t[l][d];else if("string"==typeof r){for(var f="",p=t[Math.round(o*n)],g=1,m=p.length;g<m;g++)f+=p[g];return f}return r},CatmullRom:function(t,e,n){var i=t.length-1,r=i*e,o=Math.floor(r),s=W.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(o=Math.floor(r=i*(1+e))),s(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],r-o,n)):e<0?s(t[1],t[1],t[0],t[0],-e,n):1<e?s(t[i-1],t[i-1],t[i],t[i],(0|e)-e,n):s(t[o?o-1:0],t[o],t[i<o+1?i:o+1],t[i<o+2?i:o+2],r-o,n)},Utils:{Linear:function(t,n,i,r){if("string"==typeof t)return n;if("number"==typeof t)return"function"==typeof t?t(i):t+(n-t)*i;if("object"===e(t)){if(void 0!==t.length){if(t[0]===L){for(var o="",s=1,a=t.length;s<a;s++){var c="number"==typeof t[s]?t[s]+(n[s]-t[s])*i:n[s];(U(t,s)||U(t,s,j))&&(c|=0),o+=c}return o}for(var l=0,u=r.length;l<u;l++)r[l]=W.Utils.Linear(t[l],n[l],i,r[l])}else for(var h in r)r[h]=W.Utils.Linear(t[h],n[h],i,r[h]);return r}},Reset:function(t){if(Array.isArray(t)){for(var n=0,i=t.length;n<i;n++)t[n]=W.Utils.Reset(t[n]);return t}if("object"===e(t)){for(var r in t)t[r]=W.Utils.Reset(t[r]);return t}return"number"==typeof t?0:t},Bernstein:function(t,e){var n=W.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(p=[1],function(t){var e=1;if(p[t])return p[t];for(var n=t;1<n;n--)e*=n;return p[t]=e}),CatmullRom:function(t,n,i,r,o,s){if("string"==typeof t)return n;if("number"==typeof t){var a=.5*(i-t),c=.5*(r-n),l=o*o;return(2*n-2*i+a+c)*(o*l)+(-3*n+3*i-2*a-c)*l+a*o+n}if("object"===e(t)){if(void 0!==t.length){if(t[0]===L){for(var u="",h=1,d=t.length;h<d;h++){var f="number"==typeof t[h]?W.Utils.CatmullRom(t[h],n[h],i[h],r[h],o):r[h];(U(t,h)||U(t,h,j))&&(f|=0),u+=f}return u}for(var p=0,g=s.length;p<g;p++)s[p]=W.Utils.CatmullRom(t[p],n[p],i[p],r[p],o,s[p])}else for(var m in s)s[m]=W.Utils.CatmullRom(t[m],n[m],i[m],r[m],o,s[m]);return s}}}},G={},q=function(t,n,i){if(!t||!t.nodeType)return n;var r=t.queueID||"q_"+Date.now();t.queueID||(t.queueID=r);var o=G[r];if(o){if(o.object===n&&t===o.tween.node&&i._startTime===o.tween._startTime)M(o.tween);else if("object"===e(n)&&n&&o.object){for(var a in n)a in o.object&&(i._startTime===o.tween._startTime?delete o.object[a]:o.propNormaliseRequired=!0);o.object=s({},o.object,n)}return o.object}return"object"===e(n)&&n?(G[r]={tween:i,object:n,propNormaliseRequired:!1},G[r].object):n},X=function(t,e){return e?t?t===window||t===document?[t]:"string"==typeof t?!!document.querySelectorAll&&document.querySelectorAll(t):Array.isArray(t)?t:t.nodeType?[t]:[]:null:t?t===window||t===document?t:"string"==typeof t?!!document.querySelector&&document.querySelector(t):Array.isArray(t)?t[0]:t.nodeType?t:null:null},K=0,Y=F.Linear.None,Z=function(){function t(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=K++,!n||"object"!==e(n)||i||n.nodeType?n&&(n.nodeType||n.length||"string"==typeof n)&&(n=this.node=X(n),i=this.object=q(n,i,this)):(i=this.object=n,n=null),this._valuesEnd=null,this._valuesStart={},this._duration=1e3,this._easingFunction=Y,this._easingReverse=Y,this._interpolationFunction=W.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return o(t,null,[{key:"fromTo",value:function(e,n,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};r.quickRender=r.quickRender?r.quickRender:!i;var o=new t(e,n).to(i,r);return r.quickRender&&(o.render().update(o._startTime),o._rendered=!1,o._onStartCallbackFired=!1),o}},{key:"to",value:function(e,n,i){return t.fromTo(e,null,n,i)}},{key:"from",value:function(e,n,i){return t.fromTo(e,n,null,i)}}]),o(t,[{key:"setMaxListener",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:15;return this._maxListener=t,this}},{key:"on",value:function(t,e){for(var n=this._maxListener,i=t+P,r=0;r<n;r++){var o=i+r;if(!this[o]){this[o]=e;break}}return this}},{key:"once",value:function(t,e){return this}},{key:"off",value:function(t,e){for(var n=this._maxListener,i=t+P,r=0;r<n;r++){var o=i+r;this[o]===e&&(this[o]=null)}return this}},{key:"emit",value:function(t,e,n,i,r){var o=this._maxListener,s=t+P;if(!this[s+0])return this;for(var a=0;a<o;a++){var c=s+a;this[c]&&this[c](e,n,i,r)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(t){var e=this._reversed;return this._reversed=void 0!==t?t:!e,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,M(this),this._pausedTime=y(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=y()-this._pausedTime,this._initTime=this._startTime,C(this),this._pausedTime=y(),this.emit("play",this.object))}},{key:"restart",value:function(t){return this._repeat=this._r,this.reassignValues(),C(this),this.emit("restart",this.object)}},{key:"seek",value:function(t,e){var n=this._duration,i=this._initTime,r=this._startTime,o=this._reversed,s=i+t;return this._isPlaying=!0,s<r&&i<=r&&(this._startTime-=n,this._reversed=!o),this.update(t,!1),this.emit("seek",t,this.object),e?this:this.pause()}},{key:"duration",value:function(t){return this._duration="function"==typeof t?t(this._duration):t,this}},{key:"to",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;if(this._valuesEnd=t,"number"==typeof n||"function"==typeof n)this._duration="function"==typeof n?n(this._duration):n;else if("object"===e(n))for(var i in n)if("function"==typeof this[i]){var r=c(Array.isArray(n[i])?n[i]:[n[i]],4),o=r[0],s=void 0===o?null:o,a=r[1],l=void 0===a?null:a,u=r[2],h=void 0===u?null:u,d=r[3],f=void 0===d?null:d;this[i](s,l,h,f)}return this}},{key:"render",value:function(){if(this._rendered)return this;var e=this._valuesStart,n=this._valuesEnd,i=this.object,r=this.node,o=this.InitialValues;if(V(i),V(n),r&&r.queueID&&G[r.queueID]){var s=G[r.queueID];s.propNormaliseRequired&&s.tween!==this&&(s.normalisedProp=!0,s.propNormaliseRequired=!1)}for(var a in r&&o&&(i&&0!==Object.keys(i).length?n&&0!==Object.keys(n).length||(n=this._valuesEnd=o(r,i)):i=this.object=q(r,o(r,n),this)),n){var c=i&&i[a]&&l(i[a]),d=n[a];if(!(k[a]&&k[a].init&&(k[a].init.call(this,c,d,a,i),void 0===c&&e[a]&&(c=e[a]),k[a].skipProcess))&&!("number"==typeof c&&isNaN(c)||null===c||null===d||!1===c||!1===d||void 0===c||void 0===d||c===d)){if(Array.isArray(d)&&!Array.isArray(c)){d.unshift(c);for(var f=0,p=d.length;f<p;f++)if("string"==typeof d[f]){for(var g=u(d[f]),m={length:g.length,isString:!0},v=0,y=g.length;v<y;v++)m[v]=g[v];d[f]=m}}"number"==typeof(e[a]=c)&&"string"==typeof d&&"="===d[1]||h(a,i,e,n)}}return t.Renderer&&this.node&&t.Renderer.init&&(t.Renderer.init.call(this,i,e,n),this.__render=!0),this}},{key:"start",value:function(t){return this._startTime=void 0!==t?"string"==typeof t?y()+parseFloat(t):t:y(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,C(this),this}},{key:"stop",value:function(){var t=this._isPlaying,e=this._isFinite,n=this.object,i=this._startTime,r=this._duration,o=this._r,s=this._yoyo,a=this._reversed;if(!t)return this;var c=e?(o+1)%2==1:!a;return this._reversed=!1,s&&c?this.update(i):this.update(i+r),M(this),this.emit("stop",n)}},{key:"delay",value:function(t){return this._delayTime="function"==typeof t?t(this._delayTime):t,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var t=0,e=this._chainedTweensCount;t<e;t++)this[O+t]=arguments[t];return this}},{key:"repeat",value:function(t){return this._repeat=this._duration?"function"==typeof t?t(this._repeat):t:0,this._r=this._repeat,this._isFinite=isFinite(t),this}},{key:"reverseDelay",value:function(t){return this._reverseDelayTime="function"==typeof t?t(this._reverseDelayTime):t,this}},{key:"yoyo",value:function(t,e){return this._yoyo="function"==typeof t?t(this._yoyo):null===t?this._yoyo:t,t||(this._reversed=!1),this._easingReverse=e||null,this}},{key:"easing",value:function(t){return this._easingFunction=t,this}},{key:"interpolation",value:function(t){return"function"==typeof t&&(this._interpolationFunction=t),this}},{key:"reassignValues",value:function(t){var e=this._valuesStart,n=this.object,i=this._delayTime;for(var r in this._isPlaying=!0,this._startTime=void 0!==t?t:y(),this._startTime+=i,this._reversed=!1,C(this),e){var o=e[r];n[r]=o}return this}},{key:"update",value:function(e,n,i){var r,o,s,a=this._onStartCallbackFired,c=this._easingFunction,l=this._interpolationFunction,u=this._easingReverse,h=this._repeat,f=this._delayTime,p=this._reverseDelayTime,g=this._yoyo,m=this._reversed,v=this._startTime,b=this._prevTime,w=this._duration,_=this._valuesStart,x=this._valuesEnd,E=this.object,A=this._isFinite,C=this._isPlaying,S=this.__render,T=this._chainedTweensCount,F=0;if(w){var P=(e=void 0!==e?e:y())-b;if(this._prevTime=e,250<P&&(e-=P-50/3),!C||e<v&&!i)return!0;r=1<(r=(e-v)/w)?1:r,r=m?1-r:r}else r=1,h=0;if(a||(this._rendered||(this.render(),this._rendered=!0),this.emit("start",E),this._onStartCallbackFired=!0),o=m&&u||c,!E)return!0;for(s in x){var L=_[s];if(null!=L||k[s]&&k[s].update){var R=x[s],D=o[s]?o[s](r):"function"==typeof o?o(r):Y(r),B=l[s]?l[s]:"function"==typeof l?l:W.Linear;"number"==typeof R?E[s]=((L+(R-L)*D)*N|0)/N:Array.isArray(R)&&!Array.isArray(L)?E[s]=B(R,D,E[s]):R&&R.update?R.update(D):"function"==typeof R?E[s]=R(D):"string"==typeof R&&"number"==typeof L?E[s]=L+parseFloat(R[0]+R.substr(2))*D:d(s,E,_,x,D,r),k[s]&&k[s].update&&k[s].update.call(this,E[s],L,R,D,r,s),F++}}if(!F)return M(this),!1;if(S&&t.Renderer&&t.Renderer.update&&t.Renderer.update.call(this,E,r),this.emit("update",E,r,e),1===r||m&&0===r){if(0<h&&0<w){if(A&&this._repeat--,g)this._reversed=!m;else for(s in x){var I=x[s];"string"==typeof I&&"number"==typeof _[s]&&(_[s]+=parseFloat(I[0]+I.substr(2)))}return this.emit(g&&!m?"reverse":"repeat",E),this._startTime=m&&p?e-p:e+f,!0}if(n||(this._isPlaying=!1,M(this),K--),this.emit("complete",E),this._repeat=this._r,T)for(var j=0;j<T;j++)this[O+j].start(e+w);return!1}return!0}}]),t}();t.Plugins=k,t.Selector=X,t.Interpolator=function(t,n){var i=Array.isArray(t),r="string"==typeof t?t:i?t.slice():s({},t);if(i)for(var o=0,a=t.length;o<a;o++)h(o,r,t,n);else if("object"===e(t))for(var c in t)h(c,r,t,n);else if("string"==typeof t){t=u(t),n=u(n);for(var l=1;l<t.length;)t[l]===n[l]&&"string"==typeof t[l-1]?(t.splice(l-1,2,t[l-1]+t[l]),n.splice(l-1,2,n[l-1]+n[l])):l++;for(var f={isString:!0,length:t.length};l<f.length;)f[l]=t[l],l++}return function(o){if(i)for(var s=0,a=t.length;s<a;s++)d(s,r,t,n,o);else if("object"===e(r))for(var c in t)d(c,r,t,n,o);else"string"==typeof r&&(r=d(0,0,t,n,o,o,!0));return r}},t.onTick=function(t){return b.push({update:t})},t.has=function(t){return null!==S(t)},t.get=S,t.getAll=function(){return b},t.removeAll=function(){b.length=0},t.remove=M,t.add=C,t.now=y,t.update=T,t.autoPlay=function(t){_=t},t.isRunning=function(){return w},t.Tween=Z,t.Easing=F,t.Interpolation=W,Object.defineProperty(t,"__esModule",{value:!0})})}).call(e,n(7),n(72))},function(t,e,n){"use strict";(function(e){function i(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=n(5),o=n(162),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!==typeof XMLHttpRequest?t=n(76):"undefined"!==typeof e&&(t=n(76)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(i(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(i(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){a.headers[t]={}}),r.forEach(["post","put","patch"],function(t){a.headers[t]=r.merge(s)}),t.exports=a}).call(e,n(72))},function(t,e,n){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function i(r,o){try{var s=e[r](o),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}return i("next")})}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(20),s=n.n(o),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function(){function t(){r(this,t),this.config=null}return a(t,[{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=i(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:9001/deviceConfig");case 2:return e=t.sent,t.next=5,e.json();case 5:this.config=t.sent;case 6:case"end":return t.stop()}},t,this)}));return t}()}]),t}(),l=new c;e.a=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=(n(9),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),o=function(){function t(){i(this,t),this.awm=null}return r(t,[{key:"init",value:function(t){return this.awm=t,this}},{key:"getAllFloors",value:function(){return this.awm.objectManager.floors}},{key:"getAllBuildings",value:function(){return this.awm.objectManager.buildings}},{key:"getCurrentFloor",value:function(){return this.awm.sceneManager.getCurrentFloor()}},{key:"setCurrentFloor",value:function(t){var e=null===t?null:this.awm.objectManager.floors.get(t);return this.awm.sceneManager.setCurrentFloor(e)}}]),t}(),s=new o;e.a=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(10),o=n(184),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.awm=e}return s(t,[{key:"createJSON3DObj",value:function(t){return new Promise(function(e,n){var i=new r.ObjectLoader;i.setCrossOrigin("anonymous"),i.load(t,e,function(){},n)})}},{key:"createOBJ3DObj",value:function(t){return new Promise(function(e,n){(new o.a).load(t,e,function(){},n)})}},{key:"add3DObjectOnFloor",value:function(t,e,n){var i=null;if(i=t?this.awm.objectManager.floors.get(t)._mesh:this.awm.objectManager.site._mesh,e=i.worldToLocal(e.clone()),n)return n.visible=!0,n.position.copy(e),i.add(n),n}}]),t}();e.a=a},function(t,e,n){"use strict";var i=n(16);e.a=i.a},function(t,e,n){var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t=function(){return this}();t||"undefined"==typeof window||(t=window);var e=function t(e,n,i){if("string"!==typeof e)return void(t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace()));2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)};e.modules={},e.payloads={};var n=function(t,e,n){if("string"===typeof e){var r=o(t,e);if(void 0!=r)return n&&n(),r}else if("[object Array]"===Object.prototype.toString.call(e)){for(var s=[],a=0,c=e.length;a<c;++a){var l=o(t,e[a]);if(void 0==l&&i.original)return;s.push(l)}return n&&n.apply(null,s)||!0}},i=function t(e,i){var r=n("",e,i);return void 0==r&&t.original?t.original.apply(this,arguments):r},r=function t(e,n){if(-1!==n.indexOf("!")){var i=n.split("!");return t(e,i[0])+"!"+t(e,i[1])}if("."==n.charAt(0)){var r=e.split("/").slice(0,-1).join("/");for(n=r+"/"+n;-1!==n.indexOf(".")&&o!=n;){var o=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},o=function(t,i){i=r(t,i);var o=e.modules[i];if(!o){if("function"===typeof(o=e.payloads[i])){var s={},a={id:i,uri:"",exports:s,packaged:!0};s=o(function(t,e){return n(i,t,e)},s,a)||a.exports,e.modules[i]=s,delete e.payloads[i]}o=e.modules[i]=s||o}return o};!function(n){var r=t;n&&(t[n]||(t[n]={}),r=t[n]),r.define&&r.define.packaged||(e.original=r.define,r.define=e,r.define.packaged=!0),r.acequire&&r.acequire.packaged||(i.original=r.acequire,r.acequire=i,r.acequire.packaged=!0)}("ace")}(),ace.define("ace/lib/regexp",["require","exports","module"],function(t,e,n){"use strict";function i(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function r(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n);for(var i=n||0;i<t.length;i++)if(t[i]===e)return i;return-1}var o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s=void 0===o.exec.call(/()??/,"")[1],a=function(){var t=/^/g;return o.test.call(t,""),!t.lastIndex}();a&&s||(RegExp.prototype.exec=function(t){var e,n,c=o.exec.apply(this,arguments);if("string"==typeof t&&c){if(!s&&c.length>1&&r(c,"")>-1&&(n=RegExp(this.source,o.replace.call(i(this),"g","")),o.replace.call(t.slice(c.index),n,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(c[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<c.length;l++)(e=this._xregexp.captureNames[l-1])&&(c[e]=c[l]);!a&&this.global&&!c[0].length&&this.lastIndex>c.index&&this.lastIndex--}return c},a||(RegExp.prototype.test=function(t){var e=o.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(t,e,n){function r(){}function o(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(t){}}function s(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=g.call(arguments,1),i=function i(){if(this instanceof i){var r=e.apply(this,n.concat(g.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(g.call(arguments)))};return e.prototype&&(r.prototype=e.prototype,i.prototype=new r,r.prototype=null),i});var a,c,l,u,h,d=Function.prototype.call,f=Array.prototype,p=Object.prototype,g=f.slice,m=d.bind(p.toString),v=d.bind(p.hasOwnProperty);if((h=v(p,"__defineGetter__"))&&(a=d.bind(p.__defineGetter__),c=d.bind(p.__defineSetter__),l=d.bind(p.__lookupGetter__),u=d.bind(p.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,n=[];if(n.splice.apply(n,t(20)),n.splice.apply(n,t(26)),e=n.length,n.splice(5,0,"XXX"),n.length,e+1==n.length)return!0}()){var y=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?y.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(g.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var n=this.length;t>0?t>n&&(t=n):void 0==t?t=0:t<0&&(t=Math.max(n+t,0)),t+e<n||(e=n-t);var i=this.slice(t,t+e),r=g.call(arguments,2),o=r.length;if(t===n)o&&this.push.apply(this,r);else{var s=Math.min(e,n-t),a=t+s,c=a+o-s,l=n-a,u=n-s;if(c<a)for(var h=0;h<l;++h)this[c+h]=this[a+h];else if(c>a)for(h=l;h--;)this[c+h]=this[a+h];if(o&&t===u)this.length=u,this.push.apply(this,r);else for(this.length=u+o,h=0;h<o;++h)this[t+h]=r[h]}return i};Array.isArray||(Array.isArray=function(t){return"[object Array]"==m(t)});var b=Object("a"),w="a"!=b[0]||!(0 in b);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,i=arguments[1],r=-1,o=n.length>>>0;if("[object Function]"!=m(t))throw new TypeError;for(;++r<o;)r in n&&t.call(i,n[r],r,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,i=n.length>>>0,r=Array(i),o=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var s=0;s<i;s++)s in n&&(r[s]=t.call(o,n[s],s,e));return r}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=P(this),i=w&&"[object String]"==m(this)?this.split(""):n,r=i.length>>>0,o=[],s=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var a=0;a<r;a++)a in i&&(e=i[a],t.call(s,e,a,n)&&o.push(e));return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&!t.call(r,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&t.call(r,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;o<i;o++)o in n&&(r=t.call(void 0,r,n[o],o,e));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,o=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(r=t.call(void 0,r,n[o],o,e))}while(o--);return r}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=w&&"[object String]"==m(this)?this.split(""):P(this),n=e.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=s(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=w&&"[object String]"==m(this)?this.split(""):P(this),n=e.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,s(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in e&&t===e[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:p)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(t,e){if("object"!=("undefined"===typeof t?"undefined":i(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(v(t,e)){var n,r,o;if(n={enumerable:!0,configurable:!0},h){var s=t.__proto__;t.__proto__=p;var r=l(t,e),o=u(t,e);if(t.__proto__=s,r||o)return r&&(n.get=r),o&&(n.set=o),n}return n.value=t[e],n}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var _;_=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var n;if(null===t)n=_();else{if("object"!=("undefined"===typeof t?"undefined":i(t)))throw new TypeError("typeof prototype["+("undefined"===typeof t?"undefined":i(t))+"] != 'object'");var r=function(){};r.prototype=t,n=new r,n.__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}}if(Object.defineProperty){var x=o({}),E="undefined"==typeof document||o(document.createElement("div"));if(!x||!E)var A=Object.defineProperty}if(!Object.defineProperty||A){Object.defineProperty=function(t,e,n){if("object"!=("undefined"===typeof t?"undefined":i(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=("undefined"===typeof n?"undefined":i(n))&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(A)try{return A.call(Object,t,e,n)}catch(t){}if(v(n,"value"))if(h&&(l(t,e)||u(t,e))){var r=t.__proto__;t.__proto__=p,delete t[e],t[e]=n.value,t.__proto__=r}else t[e]=n.value;else{if(!h)throw new TypeError("getters & setters can not be defined on this javascript engine");v(n,"get")&&a(t,e,n.get),v(n,"set")&&c(t,e,n.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var n in e)v(e,n)&&Object.defineProperty(t,n,e[n]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(t){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";v(t,e);)e+="?";t[e]=!0;var n=v(t,e);return delete t[e],n}),!Object.keys){var C=!0,S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=S.length;for(var T in{toString:null})C=!1;Object.keys=function(t){if("object"!=("undefined"===typeof t?"undefined":i(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e=[];for(var n in t)v(t,n)&&e.push(n);if(C)for(var r=0,o=M;r<o;r++){var s=S[r];v(t,s)&&e.push(s)}return e}}Date.now||(Date.now=function(){return(new Date).getTime()});var k="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||k.trim()){k="["+k+"]";var F=new RegExp("^"+k+k+"*"),O=new RegExp(k+k+"*$");String.prototype.trim=function(){return String(this).replace(F,"").replace(O,"")}}var P=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(t,e,n){"use strict";t("./regexp"),t("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(t,e,n){"use strict";if(e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var i=n.indexOf(e);if(-1==i)break;n.splice(i,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),i=!0;;){var r=n.indexOf(e);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(e),t.className=n.join(" "),i},e.setCssClass=function(t,n,i){i?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,i=0;if(e=e||document,e.createStyleSheet&&(n=e.styleSheets)){for(;i<n.length;)if(n[i++].owningElement.id===t)return!0}else if(n=e.getElementsByTagName("style"))for(;i<n.length;)if(n[i++].id===t)return!0;return!1},e.importCssString=function(t,n,i){if(i=i||document,n&&e.hasCssString(n,i))return null;var r;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */"),i.createStyleSheet?(r=i.createStyleSheet(),r.cssText=t,n&&(r.owningElement.id=n)):(r=e.createElement("style"),r.appendChild(i.createTextNode(t)),n&&(r.id=n),e.getDocumentHead(i).appendChild(r))},e.importCssStylsheet=function(t,n){if(n.createStyleSheet)n.createStyleSheet(t);else{var i=e.createElement("link");i.rel="stylesheet",i.href=t,e.getDocumentHead(n).appendChild(i)}},e.getInnerWidth=function(t){return parseInt(e.computedStyle(t,"paddingLeft"),10)+parseInt(e.computedStyle(t,"paddingRight"),10)+t.clientWidth},e.getInnerHeight=function(t){return parseInt(e.computedStyle(t,"paddingTop"),10)+parseInt(e.computedStyle(t,"paddingBottom"),10)+t.clientHeight},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=e.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=t.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},"undefined"==typeof document)return void(e.importCssString=function(){});void 0!==window.pageYOffset?(e.getPageScrollTop=function(){return window.pageYOffset},e.getPageScrollLeft=function(){return window.pageXOffset}):(e.getPageScrollTop=function(){return document.body.scrollTop},e.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?e.computedStyle=function(t,e){return e?(window.getComputedStyle(t,"")||{})[e]||"":window.getComputedStyle(t,"")||{}}:e.computedStyle=function(t,e){return e?t.currentStyle[e]:t.currentStyle},e.setInnerHtml=function(t,e){var n=t.cloneNode(!1);return n.innerHTML=e,t.parentNode.replaceChild(n,t),n},"textContent"in document.documentElement?(e.setInnerText=function(t,e){t.textContent=e},e.getInnerText=function(t){return t.textContent}):(e.setInnerText=function(t,e){t.innerText=e},e.getInnerText=function(t){return t.innerText}),e.getParentWindow=function(t){return t.defaultView||t.parentWindow}}),ace.define("ace/lib/oop",["require","exports","module"],function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(t,e,n){"use strict";t("./fixoldbrowsers");var i=t("./oop"),r=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter(function(t){return e&n.KEY_MODS[t]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(e,r),e.keyCodeToString=function(t){var e=r[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,e,n){"use strict";if(e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS},"object"==("undefined"===typeof navigator?"undefined":i(navigator))){var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),o=navigator.userAgent;e.isWin="win"==r,e.isMac="mac"==r,e.isLinux="linux"==r,e.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,e.isOldGecko=e.isGecko&&parseInt((o.match(/rv:(\d+)/)||[])[1],10)<4,e.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,e.isAIR=o.indexOf("AdobeAIR")>=0,e.isIPad=o.indexOf("iPad")>=0,e.isChromeOS=o.indexOf(" CrOS ")>=0,e.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,e.isIOS&&(e.isMac=!0)}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,n){"use strict";function r(t,e,n){var i=u(e);if(!a.isMac&&c){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(i|=8),c.altGr){if(3==(3&i))return;c.altGr=0}if(18===n||17===n){var r="location"in e?e.location:e.keyLocation;if(17===n&&1===r)1==c[n]&&(l=e.timeStamp);else if(18===n&&3===i&&2===r){var o=e.timeStamp-l;o<50&&(c.altGr=!0)}}}if(n in s.MODIFIER_KEYS&&(n=-1),8&i&&n>=91&&n<=93&&(n=-1),!i&&13===n){var r="location"in e?e.location:e.keyLocation;if(3===r&&(t(e,i,-n),e.defaultPrevented))return}if(a.isChromeOS&&8&i){if(t(e,i,n),e.defaultPrevented)return;i&=-9}return!!(i||n in s.FUNCTION_KEYS||n in s.PRINTABLE_KEYS)&&t(e,i,n)}function o(){c=Object.create(null)}var s=t("./keys"),a=t("./useragent"),c=null,l=0;e.addListener=function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1);if(t.attachEvent){var i=function(){n.call(t,window.event)};n._wrapper=i,t.attachEvent("on"+e,i)}},e.removeListener=function(t,e,n){if(t.removeEventListener)return t.removeEventListener(e,n,!1);t.detachEvent&&t.detachEvent("on"+e,n._wrapper||n)},e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||a.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},e.capture=function(t,n,i){function r(t){n&&n(t),i&&i(t),e.removeListener(document,"mousemove",n,!0),e.removeListener(document,"mouseup",r,!0),e.removeListener(document,"dragstart",r,!0)}return e.addListener(document,"mousemove",n,!0),e.addListener(document,"mouseup",r,!0),e.addListener(document,"dragstart",r,!0),r},e.addTouchMoveListener=function(t,n){var i,r;e.addListener(t,"touchstart",function(t){var e=t.touches,n=e[0];i=n.clientX,r=n.clientY}),e.addListener(t,"touchmove",function(t){var e=t.touches;if(!(e.length>1)){var o=e[0];t.wheelX=i-o.clientX,t.wheelY=r-o.clientY,i=o.clientX,r=o.clientY,n(t)}})},e.addMouseWheelListener=function(t,n){"onmousewheel"in t?e.addListener(t,"mousewheel",function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),n(t)}):"onwheel"in t?e.addListener(t,"wheel",function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}n(t)}):e.addListener(t,"DOMMouseScroll",function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),n(t)})},e.addMultiMouseDownListener=function(t,n,i,r){function o(t){if(0!==e.getButton(t)?h=0:t.detail>1?++h>4&&(h=1):h=1,a.isIE){var o=Math.abs(t.clientX-c)>5||Math.abs(t.clientY-l)>5;u&&!o||(h=1),u&&clearTimeout(u),u=setTimeout(function(){u=null},n[h-1]||600),1==h&&(c=t.clientX,l=t.clientY)}if(t._clicks=h,i[r]("mousedown",t),h>4)h=0;else if(h>1)return i[r](d[h],t)}function s(t){h=2,u&&clearTimeout(u),u=setTimeout(function(){u=null},n[h-1]||600),i[r]("mousedown",t),i[r](d[h],t)}var c,l,u,h=0,d={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(t)||(t=[t]),t.forEach(function(t){e.addListener(t,"mousedown",o),a.isOldIE&&e.addListener(t,"dblclick",s)})};var u=!a.isMac||!a.isOpera||"KeyboardEvent"in window?function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)}:function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)};if(e.getModifierString=function(t){return s.KEY_MODS[u(t)]},e.addCommandKeyListener=function(t,n){var i=e.addListener;if(a.isOldGecko||a.isOpera&&!("KeyboardEvent"in window)){var s=null;i(t,"keydown",function(t){s=t.keyCode}),i(t,"keypress",function(t){return r(n,t,s)})}else{var l=null;i(t,"keydown",function(t){c[t.keyCode]=(c[t.keyCode]||0)+1;var e=r(n,t,t.keyCode);return l=t.defaultPrevented,e}),i(t,"keypress",function(t){l&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),l=null)}),i(t,"keyup",function(t){c[t.keyCode]=null}),c||(o(),i(window,"focus",o))}},"object"==("undefined"===typeof window?"undefined":i(window))&&window.postMessage&&!a.isOldIE){e.nextTick=function(t,n){n=n||window;e.addListener(n,"message",function i(r){"zero-timeout-message-1"==r.data&&(e.stopPropagation(r),e.removeListener(n,"message",i),t())}),n.postMessage("zero-timeout-message-1","*")}}e.nextFrame="object"==("undefined"===typeof window?"undefined":i(window))&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var r=/^\s\s*/,o=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(r,"")},e.stringTrimRight=function(t){return t.replace(o,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,r=t.length;n<r;n++)t[n]&&"object"==i(t[n])?e[n]=this.copyObject(t[n]):e[n]=t[n];return e},e.deepCopy=function t(e){if("object"!==("undefined"===typeof e?"undefined":i(e))||!e)return e;var n;if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r]);return n}if("[object Object]"!==Object.prototype.toString.call(e))return e;n={};for(var r in e)n[r]=t(e[r]);return n},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return t.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,function(t){n.push({offset:arguments[arguments.length-2],length:t.length})}),n},e.deferredCall=function(t){var e=null,n=function(){e=null,t()},i=function t(i){return t.cancel(),e=setTimeout(n,i||0),t};return i.schedule=i,i.call=function(){return this.cancel(),t(),i},i.cancel=function(){return clearTimeout(e),e=null,i},i.isPending=function(){return e},i},e.delayedCall=function(t,e){var n=null,i=function(){n=null,t()},r=function(t){null==n&&(n=setTimeout(i,t||e))};return r.delay=function(t){n&&clearTimeout(n),n=setTimeout(i,t||e)},r.schedule=r,r.call=function(){this.cancel(),t()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}}),ace.define("ace/keyboard/textinput_ios",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("../lib/dom"),s=t("../lib/lang"),a=t("../lib/keys"),c=a.KEY_MODS,l=r.isChrome<18,u=r.isIE,h=function(t,e){function n(t){if(!y){if(y=!0,S)e=0,n=t?0:f.value.length-1;else var e=4,n=5;try{f.setSelectionRange(e,n)}catch(t){}y=!1}}function h(){y||(f.value=p,r.isWebKit&&E.schedule())}function d(){clearTimeout(j),j=setTimeout(function(){b&&(f.style.cssText=b,b=""),null==e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=!0,e.renderer.$moveTextAreaToCursor())},0)}var f=o.createElement("textarea");f.className=r.isIOS?"ace_text-input ace_text-input-ios":"ace_text-input",r.isTouchPad&&f.setAttribute("x-palm-disable-auto-cap",!0),f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck",!1),f.style.opacity="0",t.insertBefore(f,t.firstChild);var p="\n aaaa a\n",g=!1,m=!1,v=!1,y=!1,b="",w=!0;try{var _=document.activeElement===f}catch(t){}i.addListener(f,"blur",function(t){e.onBlur(t),_=!1}),i.addListener(f,"focus",function(t){_=!0,e.onFocus(t),n()}),this.focus=function(){if(b)return f.focus();f.style.position="fixed",f.focus()},this.blur=function(){f.blur()},this.isFocused=function(){return _};var x=s.delayedCall(function(){_&&n(w)}),E=s.delayedCall(function(){y||(f.value=p,_&&n())});r.isWebKit||e.addEventListener("changeSelection",function(){e.selection.isEmpty()!=w&&(w=!w,x.schedule())}),h(),_&&e.onFocus();var A=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length},C=function(t){A(f)?(e.selectAll(),n()):S&&n(e.selection.isEmpty())},S=null;this.setInputHandler=function(t){S=t},this.getInputHandler=function(){return S};var M=!1,T=function(t){4===f.selectionStart&&5===f.selectionEnd||(S&&(t=S(t),S=null),v?(n(),t&&e.onPaste(t),v=!1):t==p.substr(0)&&4===f.selectionStart?M?e.execCommand("del",{source:"ace"}):e.execCommand("backspace",{source:"ace"}):g||(t.substring(0,9)==p&&t.length>p.length?t=t.substr(9):t.substr(0,4)==p.substr(0,4)?t=t.substr(4,t.length-p.length+1):t.charAt(t.length-1)==p.charAt(0)&&(t=t.slice(0,-1)),t==p.charAt(0)||t.charAt(t.length-1)==p.charAt(0)&&(t=t.slice(0,-1)),t&&e.onTextInput(t)),g&&(g=!1),M&&(M=!1))},k=function(t){if(!y){var e=f.value;T(e),h()}},F=function t(e,n,i){var r=e.clipboardData||window.clipboardData;if(r&&!l){var o=u||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(e){if(!i)return t(e,n,!0)}}},O=function(t,o){var s=e.getCopyText();if(!s)return i.preventDefault(t);F(t,s)?(r.isIOS&&(m=o,f.value="\n aa"+s+"a a\n",f.setSelectionRange(4,4+s.length),g={value:s}),o?e.onCut():e.onCopy(),r.isIOS||i.preventDefault(t)):(g=!0,f.value=s,f.select(),setTimeout(function(){g=!1,h(),n(),o?e.onCut():e.onCopy()}))},P=function(t){O(t,!0)},L=function(t){O(t,!1)},R=function(t){var o=F(t);"string"==typeof o?(o&&e.onPaste(o,t),r.isIE&&setTimeout(n),i.preventDefault(t)):(f.value="",v=!0)};i.addCommandKeyListener(f,e.onCommandKey.bind(e)),i.addListener(f,"select",C),i.addListener(f,"input",k),i.addListener(f,"cut",P),i.addListener(f,"copy",L),i.addListener(f,"paste",R);var D=function(t){y||!e.onCompositionStart||e.$readOnly||(y={},y.canUndo=e.session.$undoManager,e.onCompositionStart(),setTimeout(B,0),e.on("mousedown",I),y.canUndo&&!e.selection.isEmpty()&&(e.insert(""),e.session.markUndoGroup(),e.selection.clearSelection()),e.session.markUndoGroup())},B=function(){if(y&&e.onCompositionUpdate&&!e.$readOnly){var t=f.value.replace(/\x01/g,"");if(y.lastValue!==t&&(e.onCompositionUpdate(t),y.lastValue&&e.undo(),y.canUndo&&(y.lastValue=t),y.lastValue)){var n=e.selection.getRange();e.insert(y.lastValue),e.session.markUndoGroup(),y.range=e.selection.getRange(),e.selection.setRange(n),e.selection.clearSelection()}}},I=function t(n){if(e.onCompositionEnd&&!e.$readOnly){var i=y;y=!1;var o=setTimeout(function(){o=null;var t=f.value.replace(/\x01/g,"");y||(t==i.lastValue?h():!i.lastValue&&t&&(h(),T(t)))});S=function(t){return o&&clearTimeout(o),(t=t.replace(/\x01/g,""))==i.lastValue?"":(i.lastValue&&o&&e.undo(),t)},e.onCompositionEnd(),e.removeListener("mousedown",t),"compositionend"==n.type&&i.range&&e.selection.setRange(i.range);(!!r.isChrome&&r.isChrome>=53||!!r.isWebKit&&r.isWebKit>=603)&&k()}},N=s.delayedCall(B,50);i.addListener(f,"compositionstart",D),r.isGecko?i.addListener(f,"text",function(){N.schedule()}):(i.addListener(f,"keyup",function(){N.schedule()}),i.addListener(f,"keydown",function(){N.schedule()})),i.addListener(f,"compositionend",I),this.getElement=function(){return f},this.setReadOnly=function(t){f.readOnly=t},this.onContextMenu=function(t){M=!0,n(e.selection.isEmpty()),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,n){b||(b=f.style.cssText),f.style.cssText=(n?"z-index:100000;":"")+"height:"+f.style.height+";"+(r.isIE?"opacity:0.1;":"");var s=e.container.getBoundingClientRect(),a=o.computedStyle(e.container),c=s.top+(parseInt(a.borderTopWidth)||0),l=s.left+(parseInt(s.borderLeftWidth)||0),u=s.bottom-c-f.clientHeight-2,h=function(t){f.style.left=t.clientX-l-2+"px",f.style.top=Math.min(t.clientY-c-2,u)+"px"};h(t),"mousedown"==t.type&&(e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=null),clearTimeout(j),r.isWin&&i.capture(e.container,h,d))},this.onContextMenuClose=d;var j,U=function(t){e.textInput.onContextMenu(t),d()};if(i.addListener(f,"mouseup",U),i.addListener(f,"mousedown",function(t){t.preventDefault(),d()}),i.addListener(e.renderer.scroller,"contextmenu",U),i.addListener(f,"contextmenu",U),r.isIOS){var $=null,z=!1;t.addEventListener("keydown",function(t){$&&clearTimeout($),z=!0}),t.addEventListener("keyup",function(t){$=setTimeout(function(){z=!1},100)});var H=function(t){if(document.activeElement===f&&!z){if(m)return setTimeout(function(){m=!1},100);var n=f.selectionStart,i=f.selectionEnd;if(f.setSelectionRange(4,5),n==i)switch(n){case 0:e.onCommandKey(null,0,a.up);break;case 1:e.onCommandKey(null,0,a.home);break;case 2:e.onCommandKey(null,c.option,a.left);break;case 4:e.onCommandKey(null,0,a.left);break;case 5:e.onCommandKey(null,0,a.right);break;case 7:e.onCommandKey(null,c.option,a.right);break;case 8:e.onCommandKey(null,0,a.end);break;case 9:e.onCommandKey(null,0,a.down)}else{switch(i){case 6:e.onCommandKey(null,c.shift,a.right);break;case 7:e.onCommandKey(null,c.shift|c.option,a.right);break;case 8:e.onCommandKey(null,c.shift,a.end);break;case 9:e.onCommandKey(null,c.shift,a.down)}switch(n){case 0:e.onCommandKey(null,c.shift,a.up);break;case 1:e.onCommandKey(null,c.shift,a.home);break;case 2:e.onCommandKey(null,c.shift|c.option,a.left);break;case 3:e.onCommandKey(null,c.shift,a.left)}}}};document.addEventListener("selectionchange",H),e.on("destroy",function(){document.removeEventListener("selectionchange",H)})}};e.TextInput=h}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/keyboard/textinput_ios"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("../lib/dom"),s=t("../lib/lang"),a=r.isChrome<18,c=r.isIE,l=t("./textinput_ios").TextInput,u=function(t,e){function n(t){if(!m){if(m=!0,A)var e=0,n=t?0:d.value.length-1;else var e=t?2:1,n=2;try{d.setSelectionRange(e,n)}catch(t){}m=!1}}function u(){m||(d.value=f,r.isWebKit&&_.schedule())}function h(){clearTimeout(I),I=setTimeout(function(){v&&(d.style.cssText=v,v=""),null==e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=!0,e.renderer.$moveTextAreaToCursor())},0)}if(r.isIOS)return l.call(this,t,e);var d=o.createElement("textarea");d.className="ace_text-input",d.setAttribute("wrap","off"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck",!1),d.style.opacity="0",t.insertBefore(d,t.firstChild);var f="\u2028\u2028",p=!1,g=!1,m=!1,v="",y=!0;try{var b=document.activeElement===d}catch(t){}i.addListener(d,"blur",function(t){e.onBlur(t),b=!1}),i.addListener(d,"focus",function(t){b=!0,e.onFocus(t),n()}),this.focus=function(){if(v)return d.focus();var t=d.style.top;d.style.position="fixed",d.style.top="0px",d.focus(),setTimeout(function(){d.style.position="","0px"==d.style.top&&(d.style.top=t)},0)},this.blur=function(){d.blur()},this.isFocused=function(){return b};var w=s.delayedCall(function(){b&&n(y)}),_=s.delayedCall(function(){m||(d.value=f,b&&n())});r.isWebKit||e.addEventListener("changeSelection",function(){e.selection.isEmpty()!=y&&(y=!y,w.schedule())}),u(),b&&e.onFocus();var x=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length},E=function(t){p?p=!1:x(d)?(e.selectAll(),n()):A&&n(e.selection.isEmpty())},A=null;this.setInputHandler=function(t){A=t},this.getInputHandler=function(){return A};var C=!1,S=function(t){A&&(t=A(t),A=null),g?(n(),t&&e.onPaste(t),g=!1):t==f.charAt(0)?C?e.execCommand("del",{source:"ace"}):e.execCommand("backspace",{source:"ace"}):(t.substring(0,2)==f?t=t.substr(2):t.charAt(0)==f.charAt(0)?t=t.substr(1):t.charAt(t.length-1)==f.charAt(0)&&(t=t.slice(0,-1)),t.charAt(t.length-1)==f.charAt(0)&&(t=t.slice(0,-1)),t&&e.onTextInput(t)),C&&(C=!1)},M=function(t){if(!m){var e=d.value;S(e),u()}},T=function t(e,n,i){var r=e.clipboardData||window.clipboardData;if(r&&!a){var o=c||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(e){if(!i)return t(e,n,!0)}}},k=function(t,r){var o=e.getCopyText();if(!o)return i.preventDefault(t);T(t,o)?(r?e.onCut():e.onCopy(),i.preventDefault(t)):(p=!0,d.value=o,d.select(),setTimeout(function(){p=!1,u(),n(),r?e.onCut():e.onCopy()}))},F=function(t){k(t,!0)},O=function(t){k(t,!1)},P=function(t){var o=T(t);"string"==typeof o?(o&&e.onPaste(o,t),r.isIE&&setTimeout(n),i.preventDefault(t)):(d.value="",g=!0)};i.addCommandKeyListener(d,e.onCommandKey.bind(e)),i.addListener(d,"select",E),i.addListener(d,"input",M),i.addListener(d,"cut",F),i.addListener(d,"copy",O),i.addListener(d,"paste",P),"oncut"in d&&"oncopy"in d&&"onpaste"in d||i.addListener(t,"keydown",function(t){if((!r.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:O(t);break;case 86:P(t);break;case 88:F(t)}});var L=function(t){m||!e.onCompositionStart||e.$readOnly||(m={},m.canUndo=e.session.$undoManager,e.onCompositionStart(),setTimeout(R,0),e.on("mousedown",D),m.canUndo&&!e.selection.isEmpty()&&(e.insert(""),e.session.markUndoGroup(),e.selection.clearSelection()),e.session.markUndoGroup())},R=function(){if(m&&e.onCompositionUpdate&&!e.$readOnly){var t=d.value.replace(/\u2028/g,"");if(m.lastValue!==t&&(e.onCompositionUpdate(t),m.lastValue&&e.undo(),m.canUndo&&(m.lastValue=t),m.lastValue)){var n=e.selection.getRange();e.insert(m.lastValue),e.session.markUndoGroup(),m.range=e.selection.getRange(),e.selection.setRange(n),e.selection.clearSelection()}}},D=function t(n){if(e.onCompositionEnd&&!e.$readOnly){var i=m;m=!1;var o=setTimeout(function(){o=null;var t=d.value.replace(/\u2028/g,"");m||(t==i.lastValue?u():!i.lastValue&&t&&(u(),S(t)))});A=function(t){return o&&clearTimeout(o),(t=t.replace(/\u2028/g,""))==i.lastValue?"":(i.lastValue&&o&&e.undo(),t)},e.onCompositionEnd(),e.removeListener("mousedown",t),"compositionend"==n.type&&i.range&&e.selection.setRange(i.range);(!!r.isChrome&&r.isChrome>=53||!!r.isWebKit&&r.isWebKit>=603)&&M()}},B=s.delayedCall(R,50);i.addListener(d,"compositionstart",L),r.isGecko?i.addListener(d,"text",function(){B.schedule()}):(i.addListener(d,"keyup",function(){B.schedule()}),i.addListener(d,"keydown",function(){B.schedule()})),i.addListener(d,"compositionend",D),this.getElement=function(){return d},this.setReadOnly=function(t){d.readOnly=t},this.onContextMenu=function(t){C=!0,n(e.selection.isEmpty()),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,n){v||(v=d.style.cssText),d.style.cssText=(n?"z-index:100000;":"")+"height:"+d.style.height+";"+(r.isIE?"opacity:0.1;":"");var s=e.container.getBoundingClientRect(),a=o.computedStyle(e.container),c=s.top+(parseInt(a.borderTopWidth)||0),l=s.left+(parseInt(s.borderLeftWidth)||0),u=s.bottom-c-d.clientHeight-2,f=function(t){d.style.left=t.clientX-l-2+"px",d.style.top=Math.min(t.clientY-c-2,u)+"px"};f(t),"mousedown"==t.type&&(e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=null),clearTimeout(I),r.isWin&&i.capture(e.container,f,h))},this.onContextMenuClose=h;var I,N=function(t){e.textInput.onContextMenu(t),h()};i.addListener(d,"mouseup",N),i.addListener(d,"mousedown",function(t){t.preventDefault(),h()}),i.addListener(e.renderer.scroller,"contextmenu",N),i.addListener(d,"contextmenu",N)};e.TextInput=u}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";function i(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t)),e.setDefaultHandler("touchmove",this.onTouchMove.bind(t)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function r(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}function o(t,e){if(t.start.row==t.end.row)var n=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)var n=2*e.row-t.start.row-t.end.row;else var n=e.column-4;return n<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}var s=(t("../lib/dom"),t("../lib/event"),t("../lib/useragent"));(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var i=this.editor,r=t.getButton();if(0!==r){var o=i.getSelectionRange(),a=o.isEmpty();return i.$blockScrolling++,(a||1==r)&&i.selection.moveToPosition(n),i.$blockScrolling--,void(2==r&&(i.textInput.onContextMenu(t.domEvent),s.isMozilla||t.preventDefault()))}return this.mousedownEvent.time=Date.now(),!e||i.isFocused()||(i.focus(),!this.$focusTimout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;n.$blockScrolling++,this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"),n.$blockScrolling--},this.select=function(){var t,e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y);if(e.$blockScrolling++,this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)t=this.$clickSelection.end;else if(1==i)t=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,t=r.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(n),e.$blockScrolling--,e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[t](i.row,i.column);if(n.$blockScrolling++,this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(-1==s&&a<=0)e=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==a&&s>=0)e=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(-1==s&&1==a)i=r.end,e=r.start;else{var c=o(this.$clickSelection,i);i=c.cursor,e=c.anchor}n.selection.setSelectionAnchor(e.row,e.column)}n.selection.selectToPosition(i),n.$blockScrolling--,n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),e=Date.now();(t>0||e-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,i=n.session,r=i.getBracketRange(e);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=t.domEvent.timeStamp,r=i-n.t,o=t.wheelX/r,s=t.wheelY/r;r<250&&(o=(o+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(o/s),c=!1;if(a>=1&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(c=!0),a<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(c=!0),c)n.allowed=i;else if(i-n.allowed<250){var l=Math.abs(o)<=1.1*Math.abs(n.vx)&&Math.abs(s)<=1.1*Math.abs(n.vy);l?(c=!0,n.allowed=i):n.allowed=0}return n.t=i,n.vx=o,n.vy=s,c?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}},this.onTouchMove=function(t){this.editor._emit("mousewheel",t)}}).call(i.prototype),e.DefaultHandlers=i}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(t,e,n){"use strict";function i(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}var r=(t("./lib/oop"),t("./lib/dom"));(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){r.setInnerText(this.getElement(),t)},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){r.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(i.prototype),e.Tooltip=i}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(t,e,n){"use strict";function i(t){function e(){var e=h.getDocumentPosition().row,r=c.$annotations[e];if(!r)return n();if(e==s.session.getLength()){var o=s.renderer.pixelToScreenCoordinates(0,h.y).row,a=h.$pos;if(o>s.session.documentToScreenRow(a.row,a.column))return n()}if(d!=r)if(d=r.text.join("<br/>"),l.setHtml(d),l.show(),s._signal("showGutterTooltip",l),s.on("mousewheel",n),t.$tooltipFollowsMouse)i(h);else{var u=h.domEvent.target,f=u.getBoundingClientRect(),p=l.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px"}}function n(){u&&(u=clearTimeout(u)),d&&(l.hide(),d=null,s._signal("hideGutterTooltip",l),s.removeEventListener("mousewheel",n))}function i(t){l.setPosition(t.x,t.y)}var s=t.editor,c=s.renderer.$gutterLayer,l=new r(s.container);t.editor.setDefaultHandler("guttermousedown",function(e){if(s.isFocused()&&0==e.getButton()){if("foldWidgets"!=c.getRegion(e)){var n=e.getDocumentPosition().row,i=s.session.selection;if(e.getShiftKey())i.selectTo(n,0);else{if(2==e.domEvent.detail)return s.selectAll(),e.preventDefault();t.$clickSelection=s.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}}});var u,h,d;t.editor.setDefaultHandler("guttermousemove",function(r){var s=r.domEvent.target||r.domEvent.srcElement;if(o.hasCssClass(s,"ace_fold-widget"))return n();d&&t.$tooltipFollowsMouse&&i(r),h=r,u||(u=setTimeout(function(){u=null,h&&!t.isMousePressed?e():n()},50))}),a.addListener(s.renderer.$gutter,"mouseout",function(t){h=null,d&&!u&&(u=setTimeout(function(){u=null,n()},50))}),s.on("changeSession",n)}function r(t){c.call(this,t)}var o=t("../lib/dom"),s=t("../lib/oop"),a=t("../lib/event"),c=t("../tooltip").Tooltip;s.inherits(r,c),function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();t+=15,e+=15,t+r>n&&(t-=t+r-n),e+o>i&&(e-=20+o),c.prototype.setPosition.call(this,t,e)}}.call(r.prototype),e.GutterHandler=i}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor,e=t.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=e.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";function i(t){function e(t,e){var n=Date.now(),i=!e||t.row!=e.row,o=!e||t.column!=e.column;if(!M||i||o)m.$blockScrolling+=1,m.moveCursorToPosition(t),m.$blockScrolling-=1,M=n,T={x:b,y:w};else{r(T.x,T.y,b,w)>u?M=null:n-M>=l&&(m.renderer.scrollCursorIntoView(),M=null)}}function n(t,e){var n=Date.now(),i=m.renderer.layerConfig.lineHeight,r=m.renderer.layerConfig.characterWidth,o=m.renderer.scroller.getBoundingClientRect(),s={x:{left:b-o.left,right:o.right-b},y:{top:w-o.top,bottom:o.bottom-w}},a=Math.min(s.x.left,s.x.right),l=Math.min(s.y.top,s.y.bottom),u={row:t.row,column:t.column};a/r<=2&&(u.column+=s.x.left<s.x.right?-3:2),l/i<=1&&(u.row+=s.y.top<s.y.bottom?-1:1);var h=t.row!=u.row,d=t.column!=u.column,f=!e||t.row!=e.row;h||d&&!f?S?n-S>=c&&m.renderer.scrollCursorIntoView(u):S=n:S=null}function i(){var t=E;E=m.renderer.screenToTextCoordinates(b,w),e(E,t),n(E,t)}function h(){x=m.selection.toOrientedRange(),y=m.session.addMarker(x,"ace_selection",m.getSelectionStyle()),m.clearSelection(),m.isFocused()&&m.renderer.$cursorLayer.setBlinking(!1),clearInterval(_),i(),_=setInterval(i,20),F=0,s.addListener(document,"mousemove",f)}function d(){clearInterval(_),m.session.removeMarker(y),y=null,m.$blockScrolling+=1,m.selection.fromOrientedRange(x),m.$blockScrolling-=1,m.isFocused()&&!C&&m.renderer.$cursorLayer.setBlinking(!m.getReadOnly()),x=null,E=null,F=0,S=null,M=null,s.removeListener(document,"mousemove",f)}function f(){null==O&&(O=setTimeout(function(){null!=O&&y&&d()},20))}function p(t){var e=t.types;return!e||Array.prototype.some.call(e,function(t){return"text/plain"==t||"Text"==t})}function g(t){var e=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],i=a.isMac?t.altKey:t.ctrlKey,r="uninitialized";try{r=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var o="none";return i&&e.indexOf(r)>=0?o="copy":n.indexOf(r)>=0?o="move":e.indexOf(r)>=0&&(o="copy"),o}var m=t.editor,v=o.createElement("img");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(v.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(e){t[e]=this[e]},this),m.addEventListener("mousedown",this.onMouseDown.bind(t));var y,b,w,_,x,E,A,C,S,M,T,k=m.container,F=0;this.onDragStart=function(t){if(this.cancelDrag||!k.draggable){var e=this;return setTimeout(function(){e.startSelect(),e.captureMouse(t)},0),t.preventDefault()}x=m.getSelectionRange();var n=t.dataTransfer;n.effectAllowed=m.getReadOnly()?"copy":"copyMove",a.isOpera&&(m.container.appendChild(v),v.scrollTop=0),n.setDragImage&&n.setDragImage(v,0,0),a.isOpera&&m.container.removeChild(v),n.clearData(),n.setData("Text",m.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(t){if(k.draggable=!1,C=!1,this.setState(null),!m.getReadOnly()){var e=t.dataTransfer.dropEffect;A||"move"!=e||m.session.remove(m.getSelectionRange()),m.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!m.getReadOnly()&&p(t.dataTransfer))return b=t.clientX,w=t.clientY,y||h(),F++,t.dataTransfer.dropEffect=A=g(t),s.preventDefault(t)},this.onDragOver=function(t){if(!m.getReadOnly()&&p(t.dataTransfer))return b=t.clientX,w=t.clientY,y||(h(),F++),null!==O&&(O=null),t.dataTransfer.dropEffect=A=g(t),s.preventDefault(t)},this.onDragLeave=function(t){if(--F<=0&&y)return d(),A=null,s.preventDefault(t)},this.onDrop=function(t){if(E){var e=t.dataTransfer;if(C)switch(A){case"move":x=x.contains(E.row,E.column)?{start:E,end:E}:m.moveText(x,E);break;case"copy":x=m.moveText(x,E,!0)}else{var n=e.getData("Text");x={start:E,end:m.session.insert(E,n)},m.focus(),A=null}return d(),s.preventDefault(t)}},s.addListener(k,"dragstart",this.onDragStart.bind(t)),s.addListener(k,"dragend",this.onDragEnd.bind(t)),s.addListener(k,"dragenter",this.onDragEnter.bind(t)),s.addListener(k,"dragover",this.onDragOver.bind(t)),s.addListener(k,"dragleave",this.onDragLeave.bind(t)),s.addListener(k,"drop",this.onDrop.bind(t));var O=null}function r(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}var o=t("../lib/dom"),s=t("../lib/event"),a=t("../lib/useragent"),c=200,l=200,u=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var e=a.isWin?"default":"move";t.renderer.setCursorStyle(e),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;if(a.isIE&&"dragReady"==this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&e.dragDrop()}if("dragWait"===this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),i=t.getButton();if(1===(t.domEvent.detail||1)&&0===i&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var r=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in r&&(r.unselectable="on"),e.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;e.container.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(i.prototype),e.DragdropHandler=i}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";var i=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=i.getDocumentHead(),r=document.createElement("script");r.src=t,n.appendChild(r),r.onload=r.onreadystatechange=function(t,n){!n&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r=r.onload=r.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,e,n){"use strict";var r={},o=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],r=this._defaultHandlers[t];if(n.length||r){"object"==("undefined"===typeof e?"undefined":i(e))&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=o),e.preventDefault||(e.preventDefault=s),n=n.slice();for(var a=0;a<n.length&&(n[a](e,this),!e.propagationStopped);a++);return r&&!e.defaultPrevented?r(e,this):void 0}},r._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](e,this)}},r.once=function(t,e){var n=this;e&&this.addEventListener(t,function i(){n.removeEventListener(t,i),e.apply(null,arguments)})},r.setDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[t]){var i=n[t],r=n._disabled_[t];r||(n._disabled_[t]=r=[]),r.push(i);var o=r.indexOf(e);-1!=o&&r.splice(o,1)}n[t]=e},r.removeDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n){var i=n._disabled_[t];if(n[t]==e){n[t];i&&this.setDefaultHandler(t,i.pop())}else if(i){var r=i.indexOf(e);-1!=r&&i.splice(r,1)}}},r.on=r.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];return i||(i=this._eventRegistry[t]=[]),-1==i.indexOf(e)&&i[n?"unshift":"push"](e),e},r.off=r.removeListener=r.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];if(n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}},r.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=r}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"no use strict";function r(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function o(t,e){var n=new Error(t);n.data=e,"object"==("undefined"===typeof console?"undefined":i(console))&&console.error&&console.error(n),setTimeout(function(){throw n})}var s=t("./oop"),a=t("./event_emitter").EventEmitter,c={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(t){var e={};return t?Array.isArray(t)||(e=t,t=Object.keys(e)):t=Object.keys(this.$options),t.forEach(function(t){e[t]=this.getOption(t)},this),e},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return r('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:r('misspelled option "'+t+'"')}},l=function(){this.$defaultOptions={}};(function(){s.implement(this,a),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach(function(e){var i=n[e];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=e),t.$options[i.name]=i,"initialValue"in i&&(t["$"+i.name]=i.initialValue)}),s.implement(t,c),this},this.resetOptions=function(t){Object.keys(t.$options).forEach(function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)})},this.setDefaultValue=function(t,e,n){var i=this.$defaultOptions[t]||(this.$defaultOptions[t]={});i[e]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,e,n):i[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach(function(n){this.setDefaultValue(t,n,e[n])},this)},this.warn=r,this.reportError=o}).call(l.prototype),e.AppConfig=l}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(t,e,i){"no use strict";function r(r){if(l&&l.document){u.packaged=r||t.packaged||i.packaged||l.define&&n(91).packaged;for(var s={},a="",c=document.currentScript||document._currentScript,h=c&&c.ownerDocument||document,d=h.getElementsByTagName("script"),f=0;f<d.length;f++){var p=d[f],g=p.src||p.getAttribute("src");if(g){for(var m=p.attributes,v=0,y=m.length;v<y;v++){var b=m[v];0===b.name.indexOf("data-ace-")&&(s[o(b.name.replace(/^data-ace-/,""))]=b.value)}var w=g.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);w&&(a=w[1])}}a&&(s.base=s.base||a,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base;for(var _ in s)"undefined"!==typeof s[_]&&e.set(_,s[_])}}function o(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}var s=t("./lib/lang"),a=(t("./lib/oop"),t("./lib/net")),c=t("./lib/app_config").AppConfig;i.exports=e=new c;var l=function(){return this||"undefined"!=typeof window&&window}(),u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};e.get=function(t){if(!u.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return u[t]},e.set=function(t,e){if(!u.hasOwnProperty(t))throw new Error("Unknown config key: "+t);u[t]=e},e.all=function(){return s.copyObject(u)},e.moduleUrl=function(t,e){if(u.$moduleUrls[t])return u.$moduleUrls[t];var n=t.split("/");e=e||n[n.length-2]||"";var i="snippets"==e?"/":"-",r=n[n.length-1];if("worker"==e&&"-"==i){var o=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");r=r.replace(o,"")}(!r||r==e)&&n.length>1&&(r=n[n.length-2]);var s=u[e+"Path"];return null==s?s=u.basePath:"/"==i&&(e=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+e+i+r+this.get("suffix")},e.setModuleUrl=function(t,e){return u.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,i){var r,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{r=t(n)}catch(t){}if(r&&!e.$loading[n])return i&&i(r);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(i),!(e.$loading[n].length>1)){var s=function(){t([n],function(t){e._emit("load.module",{name:n,module:t});var i=e.$loading[n];e.$loading[n]=null,i.forEach(function(e){e&&e(t)})})};if(!e.get("packaged"))return s();a.loadScript(e.moduleUrl(n,o),s)}},r(!0),e.init=r}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("./default_handlers").DefaultHandlers,s=t("./default_gutter_handler").GutterHandler,a=t("./mouse_event").MouseEvent,c=t("./dragdrop_handler").DragdropHandler,l=t("../config"),u=function(t){var e=this;this.editor=t,new o(this),new s(this),new c(this);var n=function(e){(!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement()))&&window.focus(),t.focus()},a=t.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click")),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener([a,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),i.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel")),i.addTouchMoveListener(t.container,this.onTouchMove.bind(this,"touchmove"));var l=t.renderer.$gutter;i.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(a,"mousedown",n),i.addListener(l,"mousedown",n),r.isIE&&t.renderer.scrollBarV&&(i.addListener(t.renderer.scrollBarV.element,"mousedown",n),i.addListener(t.renderer.scrollBarH.element,"mousedown",n)),t.on("mousemove",function(n){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var i=t.renderer.screenToTextCoordinates(n.x,n.y),r=t.session.selection.getRange(),o=t.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}})};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new a(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new a(e,this.editor))},this.onMouseWheel=function(t,e){var n=new a(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.onTouchMove=function(t,e){var n=new a(e,this.editor);n.speed=1,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var o=this,s=function(t){if(t){if(r.isWebKit&&!t.which&&o.releaseMouse)return o.releaseMouse();o.x=t.clientX,o.y=t.clientY,e&&e(t),o.mouseEvent=new a(t,o.editor),o.$mouseMoved=!0}},c=function(t){clearInterval(u),l(),o[o.state+"End"]&&o[o.state+"End"](t),o.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,t&&o.onMouseEvent("mouseup",t)},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout(function(){c(t)});o.$onCaptureMouseMove=s,o.releaseMouse=i.capture(this.editor.container,s,c);var u=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&i.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(u.prototype),l.defineOptions(u.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=u}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(t,e,n){"use strict";function i(t){t.on("click",function(e){var n=e.getDocumentPosition(),i=t.session,r=i.getFoldAt(n.row,n.column,1);r&&(e.getAccelKey()?i.removeFold(r):i.expandFold(r),e.stop())}),t.on("gutterclick",function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,i=t.session;i.foldWidgets&&i.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop()}}),t.on("gutterdblclick",function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,i=t.session,r=i.getParentFoldRangeData(n,!0),o=r.range||r.firstRange;if(o){n=o.start.row;var s=i.getFoldAt(n,i.getLine(n).length,1);s?i.removeFold(s):(i.addFold("...",o),t.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}e.stop()}})}e.FoldHandler=i}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,e,n){"use strict";var i=t("../lib/keys"),r=t("../lib/event"),o=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);-1!=n&&this.$handlers.splice(n,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(e,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,i){for(var o,s=!1,a=this.$editor.commands,c=this.$handlers.length;c--&&!((o=this.$handlers[c].handleKeyboard(this.$data,t,e,n,i))&&o.command&&(s="null"==o.command||a.exec(o.command,this.$editor,o.args,i),s&&i&&-1!=t&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),s)););return s||-1!=t||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,e)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(t,e,n){var r=i.keyCodeToString(n);this.$callKeyboardHandlers(e,r,n,t)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(o.prototype),e.KeyBinding=o}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(t,e,n){"use strict";function i(t,e,n,i){var r=a?p:f,g=null,m=null,v=null,y=0,b=null,w=-1,E=null,C=null,S=[];if(!i)for(E=0,i=[];E<n;E++)i[E]=s(t[E]);for(c=a,l=!1,u=!1,h=!1,d=!1,C=0;C<n;C++){if(g=y,S[C]=m=o(t,i,S,C),y=r[g][m],b=240&y,y&=15,e[C]=v=r[y][5],b>0)if(16==b){for(E=w;E<C;E++)e[E]=1;w=-1}else w=-1;if(r[y][6])-1==w&&(w=C);else if(w>-1){for(E=w;E<C;E++)e[E]=v;w=-1}i[C]==_&&(e[C]=0),c|=v}if(d)for(E=0;E<n;E++)if(i[E]==x){e[E]=a;for(var M=E-1;M>=0&&i[M]==A;M--)e[M]=a}}function r(t,e,n){if(!(c<t)){if(1==t&&a==g&&!h)return void n.reverse();for(var i,r,o,s,l=n.length,u=0;u<l;){if(e[u]>=t){for(i=u+1;i<l&&e[i]>=t;)i++;for(r=u,o=i-1;r<o;r++,o--)s=n[r],n[r]=n[o],n[o]=s;u=i}u++}}}function o(t,e,n,i){var r,o,s,c,f=e[i];switch(f){case m:case v:l=!1;case w:case b:return f;case y:return l?b:y;case E:return l=!0,u=!0,v;case A:return w;case C:return i<1||i+1>=e.length||(r=n[i-1])!=y&&r!=b||(o=e[i+1])!=y&&o!=b?w:(l&&(o=b),o==r?o:w);case S:return r=i>0?n[i-1]:_,r==y&&i+1<e.length&&e[i+1]==y?y:w;case M:if(i>0&&n[i-1]==y)return y;if(l)return w;for(c=i+1,s=e.length;c<s&&e[c]==M;)c++;return c<s&&e[c]==y?y:w;case T:for(s=e.length,c=i+1;c<s&&e[c]==T;)c++;if(c<s){var p=t[i],g=p>=1425&&p<=2303||64286==p;if(r=e[c],g&&(r==v||r==E))return v}return i<1||(r=e[i-1])==_?w:n[i-1];case _:return l=!1,h=!0,a;case x:return d=!0,w;case k:case F:case P:case L:case O:l=!1;case R:return w}}function s(t){var e=t.charCodeAt(0),n=e>>8;return 0==n?e>191?m:D[e]:5==n?/[\u0591-\u05f4]/.test(t)?v:m:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?T:/[\u0660-\u0669\u066b-\u066c]/.test(t)?b:1642==e?M:/[\u06f0-\u06f9]/.test(t)?y:E:32==n&&e<=8287?B[255&e]:254==n&&e>=65136?E:w}var a=0,c=0,l=!1,u=!1,h=!1,d=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g=1,m=0,v=1,y=2,b=3,w=4,_=5,x=6,E=7,A=8,C=9,S=10,M=11,T=12,k=13,F=14,O=15,P=16,L=17,R=18,D=[R,R,R,R,R,R,R,R,R,x,_,x,A,_,R,R,R,R,R,R,R,R,R,R,R,R,R,R,_,_,_,x,A,w,w,M,M,M,w,w,w,w,w,S,C,S,C,C,y,y,y,y,y,y,y,y,y,y,C,w,w,w,w,w,w,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,w,w,w,w,w,w,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,w,w,w,w,R,R,R,R,R,R,_,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,C,w,M,M,M,M,w,w,w,w,m,w,w,R,w,w,M,M,y,y,w,m,w,w,w,y,m,w,w,w,w,w],B=[A,A,A,A,A,A,A,A,A,A,A,R,R,R,m,v,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,A,_,k,F,O,P,L,C,M,M,M,M,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,C,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,A];e.L=m,e.R=v,e.EN=y,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.DOT="\xb7",e.doBidiReorder=function(t,n,o){if(t.length<2)return{};var s=t.split(""),c=new Array(s.length),l=new Array(s.length),u=[];a=o?g:0,i(s,u,s.length,n);for(var h=0;h<c.length;c[h]=h,h++);r(2,u,c),r(1,u,c);for(var h=0;h<c.length-1;h++)n[h]===b?u[h]=e.AN:u[h]===v&&(n[h]>E&&n[h]<k||n[h]===w||n[h]===R)?u[h]=e.ON_R:h>0&&"\u0644"===s[h-1]&&/\u0622|\u0623|\u0625|\u0627/.test(s[h])&&(u[h-1]=u[h]=e.R_H,h++);s[s.length-1]===e.DOT&&(u[s.length-1]=e.B);for(var h=0;h<c.length;h++)l[h]=u[c[h]];return{logicalFromVisual:c,bidiLevels:l}},e.hasBidiCharacters=function(t,e){for(var n=!1,i=0;i<t.length;i++)e[i]=s(t.charAt(i)),n||e[i]!=v&&e[i]!=E||(n=!0);return n},e.getVisualFromLogicalIdx=function(t,e){for(var n=0;n<e.logicalFromVisual.length;n++)if(e.logicalFromVisual[n]==t)return n;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang","ace/lib/useragent"],function(t,e,n){"use strict";var i=t("./lib/bidiutil"),r=t("./lib/lang"),o=t("./lib/useragent"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=function(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.line="",this.wrapIndent=0,this.isLastRow=!1,this.EOF="\xb6",this.seenBidi=!1};(function(){this.isBidiRow=function(t,e,n){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&s.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t=0,e=this.session.$screenRowCache;if(e.length){var n=this.session.$getRowCacheIndex(e,this.currentRow);n>=0&&(t=this.session.$docRowCache[n])}return t},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var n,i=this.session.$getRowCacheIndex(e,this.currentRow);this.currentRow-t>0&&(n=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===i;)i=n,t++;return t},this.updateRowLine=function(t,e){if(void 0===t&&(t=this.getDocumentRow()),this.wrapIndent=0,this.isLastRow=t===this.session.getLength()-1,this.line=this.session.getLine(t),this.session.$useWrapMode){var n=this.session.$wrapData[t];n&&(void 0===e&&(e=this.getSplitIndex()),e>0&&n.length?(this.wrapIndent=n.indent,this.line=e<n.length?this.line.substring(n[e-1],n[n.length-1]):this.line.substring(n[n.length-1])):this.line=this.line.substring(0,n[e]))}var o,s=this.session,a=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(t,e){return"\t"===t||s.isFullWidth(t.charCodeAt(0))?(o="\t"===t?s.getScreenTabSize(e+a):2,a+=o-1,r.stringRepeat(i.DOT,o)):t})},this.updateBidiMap=function(){var t=[],e=this.isLastRow?this.EOF:this.EOL,n=this.line+(this.showInvisibles?e:i.DOT);i.hasBidiCharacters(n,t)?this.bidiMap=i.doBidiReorder(n,t,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){if(this.seenBidi&&this.characterWidth!==t.$characterSize.width){var e=this.characterWidth=t.$characterSize.width,n=t.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=e,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=o.isChrome?n:.45*n,this.charWidths[i.B]=0,this.currentRow=null}},this.getShowInvisibles=function(){return this.showInvisibles},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setTextDir=function(t){this.isRtlDir=t},this.getPosLeft=function(t){t-=this.wrapIndent;var e=i.getVisualFromLogicalIdx(t>0?t-1:0,this.bidiMap),n=this.bidiMap.bidiLevels,r=0;0===t&&n[e]%2!==0&&e++;for(var o=0;o<e;o++)r+=this.charWidths[n[o]];return 0!==t&&n[e]%2===0&&(r+=this.charWidths[n[e]]),this.wrapIndent&&(r+=this.wrapIndent*this.charWidths[i.L]),r},this.getSelections=function(t,e){for(var n,r,o=this.bidiMap,s=o.bidiLevels,a=this.wrapIndent*this.charWidths[i.L],c=[],l=Math.min(t,e)-this.wrapIndent,u=Math.max(t,e)-this.wrapIndent,h=!1,d=!1,f=0,p=0;p<s.length;p++)r=o.logicalFromVisual[p],n=s[p],h=r>=l&&r<u,h&&!d?f=a:!h&&d&&c.push({left:f,width:a-f}),a+=this.charWidths[n],d=h;return h&&p===s.length&&c.push({left:f,width:a-f}),c},this.offsetToCol=function(t){var e=0,t=Math.max(t,0),n=0,r=0,o=this.bidiMap.bidiLevels,s=this.charWidths[o[r]];for(this.wrapIndent&&(t-=this.wrapIndent*this.charWidths[i.L]);t>n+s/2;){if(n+=s,r===o.length-1){s=0;break}s=this.charWidths[o[++r]]}return r>0&&o[r-1]%2!==0&&o[r]%2===0?(t<n&&r--,e=this.bidiMap.logicalFromVisual[r]):r>0&&o[r-1]%2===0&&o[r]%2!==0?e=1+(t>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===o.length-1&&0===s&&o[r-1]%2===0||!this.isRtlDir&&0===r&&o[r]%2!==0?e=1+this.bidiMap.logicalFromVisual[r]:(r>0&&o[r-1]%2!==0&&0!==s&&r--,e=this.bidiMap.logicalFromVisual[r]),e+this.wrapIndent}}).call(a.prototype),e.BidiHandler=a}),ace.define("ace/range",["require","exports","module"],function(t,e,n){"use strict";var r=function(t,e){return t.row-e.row||t.column-e.column},o=function(t,e,n,i){this.start={row:t,column:e},this.end={row:n,column:i}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,n=t.end,i=t.start;return e=this.compare(n.row,n.column),1==e?(e=this.compare(i.row,i.column),1==e?2:0==e?1:0):-1==e?-2:(e=this.compare(i.row,i.column),-1==e?-1:1==e?42:0)},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==("undefined"===typeof t?"undefined":i(t))?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==("undefined"===typeof t?"undefined":i(t))?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var n={row:e+1,column:0};else if(this.end.row<t)var n={row:t,column:0};if(this.start.row>e)var i={row:e+1,column:0};else if(this.start.row<t)var i={row:t,column:0};return o.fromPoints(i||this.start,n||this.end)},this.extend=function(t,e){var n=this.compare(t,e);if(0==n)return this;if(-1==n)var i={row:t,column:e};else var r={row:t,column:e};return o.fromPoints(i||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return o.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new o(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new o(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(o.prototype),o.fromPoints=function(t,e){return new o(t.row,t.column,e.row,e.column)},o.comparePoints=r,o.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var e=this;this.lead.on("change",function(t){e._emit("changeCursor"),e.$isEmpty||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){e.$isEmpty||e._emit("changeSelection")})};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.anchor.setPosition(t,e),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(t){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+t);var e=this.getSelectionAnchor(),n=this.getSelectionLead(),i=this.isBackwards();i&&0===e.column||this.setSelectionAnchor(e.row,e.column+t),(i||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+t)})},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.isEmpty()?s.fromPoints(e,e):this.isBackwards()?s.fromPoints(e,t):s.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var t=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(t,this.doc.getLine(t).length)},this.setRange=this.setSelectionRange=function(t,e){e?(this.setSelectionAnchor(t.end.row,t.end.column),this.selectTo(t.start.row,t.start.column)):(this.setSelectionAnchor(t.start.row,t.start.column),this.selectTo(t.end.row,t.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection(function(){this.moveCursorTo(t,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if("undefined"==typeof e){var n=t||this.lead;t=n.row,e=n.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n,i="number"==typeof t?t:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,!0===e?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,n){var i=t.column,r=t.column+e;return n<0&&(i=t.column-e,r=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(i,r).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(t,null,i.row,i.column),o=r.match(/^\s*/);o[0].length==e||this.session.$useEmacsStyleLineStart||(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var n=this.session.getLine(e.row);if(e.column==n.length){var i=n.search(/\s+$/);i>0&&(e.column=i)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var r=this.session.getFoldAt(t,e,1);return r?void this.moveCursorTo(r.end.row,r.end.column):(this.session.nonTokenRe.exec(i)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(e)),e>=n.length?(this.moveCursorTo(t,n.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight())):(this.session.tokenRe.exec(i)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(t,e)))},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return void this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getFoldStringAt(e,n,-1);null==i&&(i=this.doc.getLine(e).substring(0,n));var o=r.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,n)},this.$shortWordEndIndex=function(t){var e,n=0,i=/\s/,r=this.session.tokenRe;if(r.lastIndex=0,this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(e=t[n])&&i.test(e);)n++;if(n<1)for(r.lastIndex=0;(e=t[n])&&!r.test(e);)if(r.lastIndex=0,n++,i.test(e)){if(n>2){n--;break}for(;(e=t[n])&&i.test(e);)n++;if(n>2)break}}return r.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e),r=this.session.getFoldAt(t,e,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(e==n.length){var o=this.doc.getLength();do{t++,i=this.doc.getLine(t)}while(t<o&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),e=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(t,e+s)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getLine(e).substring(0,n);if(0===n){do{e--,i=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),s=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var r=this.session.screenToDocumentPosition(i.row+t,i.column,n);0!==t&&0===e&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&(r.row>0||t>0)&&r.row++,this.moveCursorTo(r.row,r.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var i=this.session.getFoldAt(t,e,1);i&&(t=i.start.row,e=i.start.column),this.$keepDesiredColumnOnChange=!0;var r=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(r.charAt(e))&&r.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e-=1:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var i=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return s.fromPoints(e,n)}catch(t){return s.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},this.fromJSON=function(t){if(void 0==t.start){if(this.rangeList){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=s.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(a.prototype),e.Selection=a}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(t,e,n){"use strict";var i=t("./config"),r=2e3,o=function(t){this.states=t,this.regExps={},this.matchMappings={};for(var e in this.states){for(var n=this.states[e],i=[],r=0,o=this.matchMappings[e]={defaultToken:"text"},s="g",a=[],c=0;c<n.length;c++){var l=n[c];if(l.defaultToken&&(o.defaultToken=l.defaultToken),l.caseInsensitive&&(s="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var u=l.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==h?l.token=l.token[0]:h-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:h-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"!=typeof l.token||l.onMatch||(l.onMatch=h>1?this.$applyToken:l.token),h>1&&(/\\\d/.test(l.regex)?u=l.regex.replace(/\\([0-9]+)/g,function(t,e){return"\\"+(parseInt(e,10)+r+1)}):(h=1,u=this.removeCapturingGroups(l.regex)),l.splitRegex||"string"==typeof l.token||a.push(l)),o[r]=c,r+=h,i.push(u),l.onMatch||(l.onMatch=null)}}i.length||(o[0]=0,i.push("$")),a.forEach(function(t){t.splitRegex=this.createSplitterRegexp(t.regex,s)},this),this.regExps[e]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(t){r=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"===typeof n)return[{type:n,value:t}];for(var i=[],r=0,o=n.length;r<o;r++)e[r]&&(i[i.length]={type:n[r],value:e[r]});return i},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;r<o;r++)e[r+1]&&(n[n.length]={type:i[r],value:e[r+1]});return n},this.removeCapturingGroups=function(t){return t.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(t,e){return e?"(?:":t})},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){var n=0,i=!1,r={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(t,e,o,s,a,c){return i?i="]"!=a:a?i=!0:s?(n==r.stack&&(r.end=c+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=c)),t}),null!=r.end&&/^\)*$/.test(t.substr(r.end))&&(t=t.substring(0,r.start)+t.substr(r.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var n=e.slice(0);e=n[0],"#tmp"===e&&(n.shift(),e=n.shift())}else var n=[];var i=e||"start",o=this.states[i];o||(i="start",o=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var c,l=[],u=0,h=0,d={type:null,value:""};c=a.exec(t);){var f=s.defaultToken,p=null,g=c[0],m=a.lastIndex;if(m-g.length>u){var v=t.substring(u,m-g.length);d.type==f?d.value+=v:(d.type&&l.push(d),d={type:f,value:v})}for(var y=0;y<c.length-2;y++)if(void 0!==c[y+1]){p=o[s[y]],f=p.onMatch?p.onMatch(g,i,n,t):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),o=this.states[i],o||(this.reportError("state doesn't exist",i),i="start",o=this.states[i]),s=this.matchMappings[i],u=m,a=this.regExps[i],a.lastIndex=m),p.consumeLineEnd&&(u=m);break}if(g)if("string"===typeof f)p&&!1===p.merge||d.type!==f?(d.type&&l.push(d),d={type:f,value:g}):d.value+=g;else if(f){d.type&&l.push(d),d={type:null,value:""};for(var y=0;y<f.length;y++)l.push(f[y])}if(u==t.length)break;if(u=m,h++>r){for(h>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});u<t.length;)d.type&&l.push(d),d={value:t.substring(u,u+=2e3),type:"overflow"};i="start",n=[];break}}return d.type&&l.push(d),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:l,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),e.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(t,e,n){"use strict";var i=t("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var n in t){for(var i=t[n],r=0;r<i.length;r++){var o=i[r];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(e)&&(o.next=e+o.next),o.nextState&&0!==o.nextState.indexOf(e)&&(o.nextState=e+o.nextState))}this.$rules[e+n]=i}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,r,o){var s="function"==typeof t?(new t).getRules():t;if(r)for(var a=0;a<r.length;a++)r[a]=e+r[a];else{r=[];for(var c in s)r.push(e+c)}if(this.addRules(s,e),n)for(var l=Array.prototype[o?"push":"unshift"],a=0;a<r.length;a++)l.apply(this.$rules[r[a]],i.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){function n(o){var s=r[o];s.processed=!0;for(var a=0;a<s.length;a++){var c=s[a],l=null;Array.isArray(c)&&(l=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var u=c.next||c.push;if(u&&Array.isArray(u)){var h=c.stateName;h||(h=c.token,"string"!=typeof h&&(h=h[0]||""),r[h]&&(h+=i++)),r[h]=u,c.next=h,n(h)}else"pop"==u&&(c.next=e);if(c.push&&(c.nextState=c.next||c.push,c.next=t,delete c.push),c.rules)for(var d in c.rules)r[d]?r[d].push&&r[d].push.apply(r[d],c.rules[d]):r[d]=c.rules[d];var f="string"==typeof c?c:c.include;if(f&&(l=Array.isArray(f)?f.map(function(t){return r[t]}):r[f]),l){var p=[a,1].concat(l);c.noEscape&&(p=p.filter(function(t){return!t.next})),s.splice.apply(s,p),a--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}var i=0,r=this.$rules;Object.keys(r).forEach(n,this)},this.createKeywordMapper=function(t,e,n,i){var r=Object.create(null);return Object.keys(t).forEach(function(e){var o=t[e];n&&(o=o.toLowerCase());for(var s=o.split(i||"|"),a=s.length;a--;)r[s[a]]=e}),Object.getPrototypeOf(r)&&(r.__proto__=null),this.$keywordList=Object.keys(r),t=null,n?function(t){return r[t.toLowerCase()]||e}:function(t){return r[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),e.TextHighlightRules=r}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,e,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"===typeof t)var n=(new t).getBehaviours(e);else var n=t.getBehaviours(e);this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(i.prototype),e.Behaviour=i}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("./range").Range,r=function(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var i=t.getTokenAt(e,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var t;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;e>0;)e-=1,n+=t[e].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new i(this.$row,e,this.$row,e+t.value.length)}}).call(r.prototype),e.TokenIterator=r}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,e,n){"use strict";var i,r=t("../../lib/oop"),o=t("../behaviour").Behaviour,s=t("../../token_iterator").TokenIterator,a=t("../../lib/lang"),c=["text","paren.rparen","punctuation.operator"],l=["text","paren.rparen","punctuation.operator","comment"],u={},h={'"':'"',"'":"'"},d=function(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,u.rangeCount!=t.multiSelect.rangeCount&&(u={rangeCount:t.multiSelect.rangeCount})),u[e])return i=u[e];i=u[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},f=function(t,e,n,i){var r=t.end.row-t.start.row;return{text:n+e+i,selection:[0,t.start.column+1,r,t.end.column+(r?0:1)]}},p=function t(e){this.add("braces","insertion",function(n,r,o,s,c){var l=o.getCursorPosition(),u=s.doc.getLine(l.row);if("{"==c){d(o);var h=o.getSelectionRange(),p=s.doc.getTextRange(h);if(""!==p&&"{"!==p&&o.getWrapBehavioursEnabled())return f(h,p,"{","}");if(t.isSaneInsertion(o,s))return/[\]\}\)]/.test(u[l.column])||o.inMultiSelectMode||e&&e.braces?(t.recordAutoInsert(o,s,"}"),{text:"{}",selection:[1,1]}):(t.recordMaybeInsert(o,s,"{"),{text:"{",selection:[1,1]})}else if("}"==c){d(o);var g=u.substring(l.column,l.column+1);if("}"==g){var m=s.$findOpeningBracket("}",{column:l.column+1,row:l.row});if(null!==m&&t.isAutoInsertedClosing(l,u,c))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==c||"\r\n"==c){d(o);var v="";t.isMaybeInsertedClosing(l,u)&&(v=a.stringRepeat("}",i.maybeInsertedBrackets),t.clearMaybeInsertedClosing());var g=u.substring(l.column,l.column+1);if("}"===g){var y=s.findMatchingBracket({row:l.row,column:l.column+1},"}");if(!y)return null;var b=this.$getIndent(s.getLine(y.row))}else{if(!v)return void t.clearMaybeInsertedClosing();var b=this.$getIndent(u)}var w=b+s.getTabString();return{text:"\n"+w+"\n"+b+v,selection:[1,w.length,1,w.length]}}t.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(t,e,n,r,o){var s=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){d(n);if("}"==r.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,n,i,r,o){if("("==o){d(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return f(s,a,"(",")");if(t.isSaneInsertion(i,r))return t.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(")"==o){d(i);var c=i.getCursorPosition(),l=r.doc.getLine(c.row),u=l.substring(c.column,c.column+1);if(")"==u){var h=r.$findOpeningBracket(")",{column:c.column+1,row:c.row});if(null!==h&&t.isAutoInsertedClosing(c,l,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o){d(n);if(")"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r}}),this.add("brackets","insertion",function(e,n,i,r,o){if("["==o){d(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return f(s,a,"[","]");if(t.isSaneInsertion(i,r))return t.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){d(i);var c=i.getCursorPosition(),l=r.doc.getLine(c.row),u=l.substring(c.column,c.column+1);if("]"==u){var h=r.$findOpeningBracket("]",{column:c.column+1,row:c.row});if(null!==h&&t.isAutoInsertedClosing(c,l,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o){d(n);if("]"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r}}),this.add("string_dquotes","insertion",function(t,e,n,i,r){var o=i.$mode.$quotes||h;if(1==r.length&&o[r]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(r))return;d(n);var s=r,a=n.getSelectionRange(),c=i.doc.getTextRange(a);if(!(""===c||1==c.length&&o[c])&&n.getWrapBehavioursEnabled())return f(a,c,s,s);if(!c){var l=n.getCursorPosition(),u=i.doc.getLine(l.row),p=u.substring(l.column-1,l.column),g=u.substring(l.column,l.column+1),m=i.getTokenAt(l.row,l.column),v=i.getTokenAt(l.row,l.column+1);if("\\"==p&&m&&/escape/.test(m.type))return null;var y,b=m&&/string|escape/.test(m.type),w=!v||/string|escape/.test(v.type);if(g==s)(y=b!==w)&&/string\.end/.test(v.type)&&(y=!1);else{if(b&&!w)return null;if(b&&w)return null;var _=i.$mode.tokenRe;_.lastIndex=0;var x=_.test(p);_.lastIndex=0;var E=_.test(p);if(x||E)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;y=!0}return{text:y?s+s:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==o||"'"==o)){d(n);if(i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==o)return r.end.column++,r}})};p.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),i=new s(e,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",c)){var r=new s(e,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",c))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",l)},p.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},p.recordAutoInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},p.recordMaybeInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(t,e,n){return i.autoInsertedBrackets>0&&t.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&e.substr(t.column)===i.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(t,e){return i.maybeInsertedBrackets>0&&t.row===i.maybeInsertedRow&&e.substr(t.column)===i.maybeInsertedLineEnd&&e.substr(0,t.column)==i.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(p,o),e.CstyleBehaviour=p}),ace.define("ace/unicode",["require","exports","module"],function(t,e,n){"use strict";e.packages={},function(t){var n=/\w{4}/g;for(var i in t)e.packages[i]=t[i].replace(n,"\\u$&")}({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,e,n){"use strict";var r=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,s=t("./behaviour/cstyle").CstyleBehaviour,a=t("../unicode"),c=t("../lib/lang"),l=t("../token_iterator").TokenIterator,u=t("../range").Range,h=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,i){function r(t){for(var e=n;e<=i;e++)t(o.getLine(e),e)}var o=e.doc,s=!0,a=!0,l=1/0,u=e.getTabSize(),h=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var d=this.lineCommentStart.map(c.escapeRegExp).join("|"),f=this.lineCommentStart[0];else var d=c.escapeRegExp(this.lineCommentStart),f=this.lineCommentStart;d=new RegExp("^(\\s*)(?:"+d+") ?"),h=e.getUseSoftTabs();var p=function(t,e){var n=t.match(d);if(n){var i=n[1].length,r=n[0].length;y(t,i,r)||" "!=n[0][r-1]||r--,o.removeInLine(e,i,r)}},g=f+" ",m=function(t,e){s&&!/\S/.test(t)||(y(t,l,l)?o.insertInLine({row:e,column:l},g):o.insertInLine({row:e,column:l},f))},v=function(t,e){return d.test(t)},y=function(t,e,n){for(var i=0;e--&&" "==t.charAt(e);)i++;if(i%u!=0)return!1;for(var i=0;" "==t.charAt(n++);)i++;return u>2?i%u!=u-1:i%u==0}}else{if(!this.blockComment)return!1;var f=this.blockComment.start,b=this.blockComment.end,d=new RegExp("^(\\s*)(?:"+c.escapeRegExp(f)+")"),w=new RegExp("(?:"+c.escapeRegExp(b)+")\\s*$"),m=function(t,e){v(t,e)||s&&!/\S/.test(t)||(o.insertInLine({row:e,column:t.length},b),o.insertInLine({row:e,column:l},f))},p=function(t,e){var n;(n=t.match(w))&&o.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(d))&&o.removeInLine(e,n[1].length,n[0].length)},v=function(t,n){if(d.test(t))return!0;for(var i=e.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}var _=1/0;r(function(t,e){var n=t.search(/\S/);-1!==n?(n<l&&(l=n),a&&!v(t,e)&&(a=!1)):_>t.length&&(_=t.length)}),l==1/0&&(l=_,s=!1,a=!1),h&&l%u!=0&&(l=Math.floor(l/u)*u),r(a?p:m)},this.toggleBlockComment=function(t,e,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,s,a=new l(e,i.row,i.column),c=a.getCurrentToken(),h=(e.selection,e.selection.toOrientedRange());if(c&&/comment/.test(c.type)){for(var d,f;c&&/comment/.test(c.type);){var p=c.value.indexOf(r.start);if(-1!=p){var g=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+p;d=new u(g,m,g,m+r.start.length);break}c=a.stepBackward()}for(var a=new l(e,i.row,i.column),c=a.getCurrentToken();c&&/comment/.test(c.type);){var p=c.value.indexOf(r.end);if(-1!=p){var g=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+p;f=new u(g,m,g,m+r.end.length);break}c=a.stepForward()}f&&e.remove(f),d&&(e.remove(d),o=d.start.row,s=-r.start.length)}else s=r.start.length,o=n.start.row,e.insert(n.end,r.end),e.insert(n.start,r.start);h.start.row==o&&(h.start.column+=s),h.end.row==o&&(h.end.column+=s),e.selection.fromOrientedRange(h)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){this.$embeds=[],this.$modes={};for(var e in t)t[e]&&(this.$embeds.push(e),this.$modes[e]=new t[e]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],e=0;e<n.length;e++)!function(t){var i=n[e],r=t[i];t[n[e]]=function(){return this.$delegator(i,arguments,r)}}(this)},this.$delegator=function(t,e,n){var i=e[0];"string"!=typeof i&&(i=i[0]);for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o=i.split(this.$embeds[r]);if(!o[0]&&o[1]){e[0]=o[1];var s=this.$modes[this.$embeds[r]];return s[t].apply(s,e)}}var a=n.apply(this,e);return n?a:void 0},this.transformAction=function(t,e,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][e]){var a=o[s][e].apply(this,arguments);if(a)return a}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var r in e)for(var o=e[r],s=0,a=o.length;s<a;s++)if("string"===typeof o[s].token)/keyword|support|storage/.test(o[s].token)&&n.push(o[s].regex);else if("object"===i(o[s].token))for(var c=0,l=o[s].token.length;c<l;c++)if(/keyword|support|storage/.test(o[s].token[c])){var r=o[s].regex.match(/\(.+?\)/g)[c];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,i){return(this.$keywordList||this.$createKeywordList()).map(function(t){return{name:t,value:t,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),e.Mode=h}),ace.define("ace/apply_delta",["require","exports","module"],function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var i=e.start.row,r=e.start.column,o=t[i]||"";switch(e.action){case"insert":if(1===e.lines.length)t[i]=o.substring(0,r)+e.lines[0]+o.substring(r);else{var s=[i,1].concat(e.lines);t.splice.apply(t,s),t[i]=o.substring(0,r)+t[i],t[i+e.lines.length-1]+=o.substring(r)}break;case"remove":var a=e.end.column,c=e.end.row;i===c?t[i]=o.substring(0,r)+o.substring(a):t.splice(i,c-i+1,o.substring(0,r)+t[c].substring(a))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),"undefined"==typeof n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){var i=n?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&i}function e(e,n,i){var r="insert"==e.action,o=(r?1:-1)*(e.end.row-e.start.row),s=(r?1:-1)*(e.end.column-e.start.column),a=e.start,c=r?a:e.end;return t(n,a,i)?{row:n.row,column:n.column}:t(c,n,!i)?{row:n.row+o,column:n.column+(n.row==c.row?s:0)}:{row:a.row,column:a.column}}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if((t.start.row!=t.end.row||t.start.row==this.row)&&!(t.start.row>this.row)){var n=e(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(t,e,n){var i;if(i=n?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(o.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./apply_delta").applyDelta,o=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=t("./anchor").Anchor,c=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){i.implement(this,o),this.setValue=function(t){var e=this.getLength()-1;this.remove(new s(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new a(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{e=this.getLines(t.start.row,t.end.row),e[0]=(e[0]||"").substring(t.start.column);var n=e.length-1;t.end.row-t.start.row==n&&(e[n]=e[n].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),i=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[e]},!0),this.clonePos(i)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:t>=n&&(t=n-1,e=void 0);var i=this.getLine(t);return void 0==e&&(e=i.length),e=Math.min(Math.max(e,0),i.length),{row:t,column:e}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){t=Math.min(Math.max(t,0),this.getLength());var n=0;t<this.getLength()?(e=e.concat([""]),n=0):(e=[""].concat(e),t--,n=this.$lines[t].length),this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),i={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:e}),this.clonePos(i)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var i=this.clippedPos(t,e),r=this.clippedPos(t,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1),e=Math.min(Math.max(0,e),this.getLength()-1);var n=e==this.getLength()-1&&t>0,i=e<this.getLength()-1,r=n?t-1:t,o=n?this.getLine(r).length:0,a=i?e+1:e,c=i?0:this.getLine(a).length,l=new s(r,o,a,c),u=this.$lines.slice(t,e+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),u},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){if(t instanceof s||(t=s.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty())return t.start;if(e==this.getTextRange(t))return t.end;this.remove(t);return e?this.insert(t.start,e):t.start},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!s.comparePoints(t.start,t.end))||(n&&t.lines.length>2e4&&this.$splitAndapplyLargeDelta(t,2e4),r(this.$lines,t,e),this._signal("change",t))},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,i=n.length,r=t.start.row,o=t.start.column,s=0,a=0;;){s=a,a+=e-1;var c=n.slice(s,a);if(a>i){t.lines=c,t.start.row=r+s,t.start.column=o;break}c.push(""),this.applyDelta({start:this.pos(r+s,o),end:this.pos(r+a,o=0),action:t.action,lines:c},!0)}},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=e||0,o=n.length;r<o;r++)if((t-=n[r].length+i)<0)return{row:r,column:t+n[r].length+i};return{row:o-1,column:n[o-1].length}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(t.row,n.length),s=e||0;s<o;++s)r+=n[s].length+i;return r+t.column}}).call(c.prototype),e.Document=c}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,i=-1,r=n.doc,o=e;n.lines[e];)e++;var s=r.getLength(),a=0;for(n.running=!1;e<s;){n.$tokenizeRow(e),i=e;do{e++}while(n.lines[e]);if(++a%5===0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,-1==i&&(i=e),o<=i&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var n={first:t,last:e};this._signal("update",{data:n})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,n+1,null),this.states.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.states[t-1],i=this.tokenizer.getLineTokens(e,n,t);return this.states[t]+""!==i.state+""?(this.states[t]=i.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=i.tokens}}).call(o.prototype),e.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,n){"use strict";var i=t("./lib/lang"),r=(t("./lib/oop"),t("./range").Range),o=function(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,c=s;c<=a;c++){var l=this.cache[c];null==l&&(l=i.getMatchOffsets(n.getLine(c),this.regExp),l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map(function(t){return new r(c,t.offset,c,t.offset+t.length)}),this.cache[c]=l.length?l:"");for(var u=l.length;u--;)e.drawSingleLineMarker(t,l[u].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),e.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,e,n){"use strict";function i(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new r(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}var r=t("../range").Range;(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort(function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)}),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var i,r,o,s=0,a=this.folds,c=!0;null==e&&(e=this.end.row,n=this.end.column);for(var l=0;l<a.length;l++){if(i=a[l],-1==(r=i.range.compareStart(e,n)))return void t(null,e,n,s,c);if(o=t(null,i.start.row,i.start.column,s,c),(o=!o&&t(i.placeholder,i.start.row,i.start.column,s))||0===r)return;c=!i.sameRow,s=i.end.column}t(null,e,n,s,c)},this.getNextFoldTo=function(t,e){for(var n,i,r=0;r<this.folds.length;r++){if(n=this.folds[r],-1==(i=n.range.compareEnd(t,e)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var i,r,o=this.getNextFoldTo(t,e);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=e&&i.start.row!=t)window.console&&window.console.log(t,e,i);else if(i.start.row==t){r=this.folds;var s=r.indexOf(i);for(0===s&&(this.start.column+=n),s;s<r.length;s++){if(i=r[s],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var r=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(r),c=o[a-1];this.end.row=c.end.row,this.end.column=c.end.column,o=o.splice(a,o.length-a);var l=new i(s,o);return s.splice(s.indexOf(this)+1,0,l),l},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var i=this.foldData;i.splice(i.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((t-=i.start.column-e)<0)return{row:i.start.row,column:i.start.column+t};if((t-=i.placeholder.length)<0)return i.start;e=i.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(i.prototype),e.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("./range").Range,r=i.comparePoints,o=function(){this.ranges=[]};(function(){this.comparePoints=r,this.pointIndex=function(t,e,n){for(var i=this.ranges,o=n||0;o<i.length;o++){var s=i[o],a=r(t,s.end);if(!(a>0)){var c=r(t,s.start);return 0===a?e&&0!==c?-o-2:o:c>0||0===c&&!e?o:-o-1}}return-o-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var i=this.pointIndex(t.end,e,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){var t=[],e=this.ranges;e=e.sort(function(t,e){return r(t.start,e.start)});for(var n,i=e[0],o=1;o<e.length;o++){n=i,i=e[o];var s=r(n.end,i.start);s<0||(0!=s||n.isEmpty()||i.isEmpty())&&(r(n.end,i.end)<0&&(n.end.row=i.end.row,n.end.column=i.end.column),e.splice(o,1),t.push(i),i=n,o--)}return this.ranges=e,t},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var i=this.pointIndex({row:t,column:0});i<0&&(i=-i-1);var r=this.pointIndex({row:e,column:0},i);r<0&&(r=-r-1);for(var o=[],s=i;s<r;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){if("insert"==t.action)var e=t.start,n=t.end;else var n=t.start,e=t.end;for(var i=e.row,r=n.row,o=r-i,s=-e.column+n.column,a=this.ranges,c=0,l=a.length;c<l;c++){var u=a[c];if(!(u.end.row<i)){if(u.start.row>i)break;if(u.start.row==i&&u.start.column>=e.column&&(u.start.column==e.column&&this.$insertRight||(u.start.column+=s,u.start.row+=o)),u.end.row==i&&u.end.column>=e.column){if(u.end.column==e.column&&this.$insertRight)continue;u.end.column==e.column&&s>0&&c<l-1&&u.end.column>u.start.column&&u.end.column==a[c+1].start.column&&(u.end.column-=s),u.end.column+=s,u.end.row+=o}}}if(0!=o&&c<l)for(;c<l;c++){var u=a[c];u.start.row+=o,u.end.row+=o}}}).call(o.prototype),e.RangeList=o}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(t,e,n){"use strict";function i(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function r(t,e){i(t.start,e),i(t.end,e)}function o(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}function s(t,e){o(t.start,e),o(t.end,e)}var a=(t("../range").Range,t("../range_list").RangeList),c=t("../lib/oop"),l=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};c.inherits(l,a),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var t=this.range.clone(),e=new l(t,this.placeholder);return this.subFolds.forEach(function(t){e.subFolds.push(t.clone())}),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){if(!this.range.containsRange(t))throw new Error("A fold can't intersect already existing fold"+t.range+this.range);r(t,this.start);for(var e=t.start.row,n=t.start.column,i=0,o=-1;i<this.subFolds.length&&1==(o=this.subFolds[i].range.compare(e,n));i++);var s=this.subFolds[i];if(0==o)return s.addSubFold(t);for(var e=t.range.end.row,n=t.range.end.column,a=i,o=-1;a<this.subFolds.length&&1==(o=this.subFolds[a].range.compare(e,n));a++);this.subFolds[a];if(0==o)throw new Error("A fold can't intersect already existing fold"+t.range+this.range);this.subFolds.splice(i,a-i,t);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return s(t,this.start)}}.call(l.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(t,e,n){"use strict";function i(){this.getFoldAt=function(t,e,n){var i=this.getFoldLine(t);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o];if(s.range.contains(t,e)){if(1==n&&s.range.isEnd(t,e))continue;if(-1==n&&s.range.isStart(t,e))continue;return s}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,i=this.$foldData,r=[];e.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(t);if(2!=s){if(-2==s)break;for(var a=i[o].folds,c=0;c<a.length;c++){var l=a[c];if(-2==(s=l.range.compareRange(t)))break;if(2!=s){if(42==s)break;r.push(l)}}}}return e.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach(function(t){e=e.concat(this.getFoldsInRange(t))},this)}else var e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var i=0;i<e[n].folds.length;i++)t.push(e[n].folds[i]);return t},this.getFoldStringAt=function(t,e,n,i){if(!(i=i||this.getFoldLine(t)))return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){o=i.folds[a];var c=o.range.compareEnd(t,e);if(-1==c){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===c)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),-1==n?r.substring(0,e-s.end.column):1==n?r.substring(e-s.end.column):r},this.getFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.start.row<=t&&r.end.row>=t)return r;if(r.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.end.row>=t)return r}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,i=e-t+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=e){a<e&&(a>=t?i-=e-a:i=0);break}s>=t&&(i-=a>=t?s-a:s-t+1)}return i},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(t,e){return t.start.row-e.start.row}),t},this.addFold=function(t,e){var n,i=this.$foldData,r=!1;t instanceof s?n=t:(n=new s(e,t),n.collapseChildren=e.collapseChildren),this.$clipRangeToDocument(n.range);var a=n.start.row,c=n.start.column,l=n.end.row,u=n.end.column;if(!(a<l||a==l&&c<=u-2))throw new Error("The range has to be at least 2 characters width");var h=this.getFoldAt(a,c,1),d=this.getFoldAt(l,u,-1);if(h&&d==h)return h.addSubFold(n);h&&!h.range.isStart(a,c)&&this.removeFold(h),d&&!d.range.isEnd(l,u)&&this.removeFold(d);var f=this.getFoldsInRange(n.range);f.length>0&&(this.removeFolds(f),f.forEach(function(t){n.addSubFold(t)}));for(var p=0;p<i.length;p++){var g=i[p];if(l==g.start.row){g.addFold(n),r=!0;break}if(a==g.end.row){if(g.addFold(n),r=!0,!n.sameRow){var m=i[p+1];if(m&&m.start.row==l){g.merge(m);break}}break}if(l<=g.start.row)break}return r||(g=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(t){var e=t.foldLine,n=e.start.row,i=e.end.row,r=this.$foldData,o=e.folds;if(1==o.length)r.splice(r.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var s=e.split(t.start.row,t.start.column);o=s.folds,o.shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach(function(t){this.removeFold(t)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(t,e){var n,i;if(null==t?(n=new r(0,0,this.getLength(),0),e=!0):n="number"==typeof t?new r(t,0,t,this.getLine(t).length):"row"in t?r.fromPoints(t,t):t,i=this.getFoldsInRangeList(n),e)this.removeFolds(i);else for(var o=i;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);if(i.length)return i},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,i,r){null==i&&(i=t.start.row),null==r&&(r=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var o=this.doc,s="";return t.walk(function(t,e,n,a){if(!(e<i)){if(e==i){if(n<r)return;a=Math.max(r,a)}s+=null!=t?t:o.getLine(e).substring(a,n)}},e,n),s},this.getDisplayLine=function(t,e,n,i){var r=this.getFoldLine(t);if(r)return this.getFoldDisplayLine(r,t,e,n,i);var o;return o=this.doc.getLine(t),o.substring(i||0,e||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){var n=e.folds.map(function(t){return t.clone()});return new o(t,n)})},this.toggleFold=function(t){var e,n,i=this.selection,r=i.getRange();if(r.isEmpty()){var o=r.start;if(e=this.getFoldAt(o.row,o.column))return void this.expandFold(e);(n=this.findMatchingBracket(o))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(o.row,o.column)||r}else{var s=this.getFoldsInRange(r);if(t&&s.length)return void this.expandFolds(s);1==s.length&&(e=s[0])}if(e||(e=this.getFoldAt(r.start.row,r.start.column)),e&&e.range.toString()==r.toString())return void this.expandFold(e);var a="...";if(!r.isMultiLine()){if(a=this.getTextRange(r),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,r)},this.getCommentFoldRange=function(t,e,n){var i=new a(this,t,e),o=i.getCurrentToken(),s=o.type;if(o&&/^comment|string/.test(s)){s=s.match(/comment|string/)[0],"comment"==s&&(s+="|doc-start");var c=new RegExp(s),l=new r;if(1!=n){do{o=i.stepBackward()}while(o&&c.test(o.type));i.stepForward()}if(l.start.row=i.getCurrentTokenRow(),l.start.column=i.getCurrentTokenColumn()+2,i=new a(this,t,e),-1!=n){var u=-1;do{if(o=i.stepForward(),-1==u){var h=this.getState(i.$row);c.test(h)||(u=i.$row)}else if(i.$row>u)break}while(o&&c.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return l.end.row=i.getCurrentTokenRow(),l.end.column=i.getCurrentTokenColumn()+o.value.length-2,l}},this.foldAll=function(t,e,n){void 0==n&&(n=1e5);var i=this.foldWidgets;if(i){e=e||this.getLength(),t=t||0;for(var r=t;r<e;r++)if(null==i[r]&&(i[r]=this.getFoldWidget(r)),"start"==i[r]){var o=this.getFoldWidgetRange(r);if(o&&o.isMultiLine()&&o.end.row<=e&&o.start.row>=t){r=o.end.row;try{var s=this.addFold("...",o);s&&(s.collapseChildren=n)}catch(t){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!t||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var i,r=t-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var s=this.getFoldWidgetRange(r);if(i||(i=s),s&&s.end.row>=t)break}r--}return{range:-1!==r&&s,firstRange:i}},this.onFoldWidgetClick=function(t,e){e=e.domEvent;var n={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(t,n)){var i=e.target||e.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var n=this.getFoldWidget(t),i=this.getLine(t),r="end"===n?-1:1,o=this.getFoldAt(t,-1===r?0:i.length,r);if(o)return e.children||e.all?this.removeFold(o):this.expandFold(o),o;var s=this.getFoldWidgetRange(t,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(o.range))return this.removeFold(o),o;if(e.siblings){var a=this.getParentFoldRangeData(t);if(a.range)var c=a.range.start.row+1,l=a.range.end.row;this.foldAll(c,l,e.all?1e4:0)}else e.children?(l=s?s.end.row:this.getLength(),this.foldAll(t+1,l,e.all?1e4:0)):s&&(e.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var n=this.$toggleFoldWidget(e,{});if(!n){var i=this.getParentFoldRangeData(e,!0);if(n=i.range||i.firstRange){e=n.start.row;var r=this.getFoldAt(e,this.getLine(e).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}var r=t("../range").Range,o=t("./fold_line").FoldLine,s=t("./fold").Fold,a=t("../token_iterator").TokenIterator;e.Folding=i}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,e,n){"use strict";function i(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t):null},this.getBracketRange=function(t){var e,n=this.getLine(t.row),i=!0,r=n.charAt(t.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(t.column),t={row:t.row,column:t.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){var a=this.$findClosingBracket(s[1],t);if(!a)return null;e=o.fromPoints(t,a),i||(e.end.column++,e.start.column--),e.cursor=e.end}else{var a=this.$findOpeningBracket(s[2],t);if(!a)return null;e=o.fromPoints(a,t),i||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(t,e,n){var i=this.$brackets[t],o=1,s=new r(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var c=e.column-s.getCurrentTokenColumn()-2,l=a.value;;){for(;c>=0;){var u=l.charAt(c);if(u==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else u==t&&(o+=1);c-=1}do{a=s.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=a.value,c=l.length-1}return null}},this.$findClosingBracket=function(t,e,n){var i=this.$brackets[t],o=1,s=new r(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var c=e.column-s.getCurrentTokenColumn();;){for(var l=a.value,u=l.length;c<u;){var h=l.charAt(c);if(h==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else h==t&&(o+=1);c+=1}do{a=s.stepForward()}while(a&&!n.test(a.type));if(null==a)break;c=0}return null}}}var r=t("../token_iterator").TokenIterator,o=t("../range").Range;e.BracketMatch=i}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,e,n){"use strict";var r=t("./lib/oop"),o=t("./lib/lang"),s=t("./bidihandler").BidiHandler,a=t("./config"),c=t("./lib/event_emitter").EventEmitter,l=t("./selection").Selection,u=t("./mode/text").Mode,h=t("./range").Range,d=t("./document").Document,f=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,g=function t(e,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++t.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==("undefined"===typeof e?"undefined":i(e))&&e.getLine||(e=new d(e)),this.$bidiHandler=new s(this),this.setDocument(e),this.selection=new l(this),a.resetOptions(this),this.setMode(n),a._signal("session",this)};g.$uid=0,function(){function t(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}r.implement(this,c),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>n&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,i=t.length-1;n<=i;){var r=n+i>>1,o=t[r];if(e>o)n=r+1;else{if(!(e<o))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);this.$fromUndo||!this.$undoManager||t.ignore||(this.$deltasDoc.push(t),e&&0!=e.length&&this.$deltasFold.push({action:"removeFolds",folds:e}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,i=this.bgTokenizer.getTokens(t),r=0;if(null==e){var o=i.length-1;r=this.getLine(t).length}else for(var o=0;o<i.length&&!((r+=i[o].value.length)>=e);o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.$deltasFold.length&&(e.$deltas.push({group:"fold",deltas:e.$deltasFold}),e.$deltasFold=[]),e.$deltasDoc.length&&(e.$deltas.push({group:"doc",deltas:e.$deltasDoc}),e.$deltasDoc=[]),e.$deltas.length>0&&t.execute({action:"aceupdate",args:[e.$deltas,e],merge:e.mergeUndoDeltas}),e.mergeUndoDeltas=!1,e.$deltas=[]},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,i){var r=this.$markerId++,o={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];if(e){var n=e.inFront?this.$frontMarkers:this.$backMarkers;e&&(delete n[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,i){"number"!=typeof e&&(n=e,e=t),n||(n="ace_step");var r=new h(t,0,e,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var n=this.getLine(t),i=!1;if(e>0&&(i=!!n.charAt(e-1).match(this.tokenRe)),i||(i=!!n.charAt(e).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(e-1,e+1)))var r=/\s/;else var r=this.nonTokenRe;var o=e;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(r));o++}for(var s=e;s<n.length&&n.charAt(s).match(r);)s++;return new h(t,o,t,s)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"===("undefined"===typeof t?"undefined":i(t))){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,r=n.path}else r=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new u),this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]),void(e&&e());this.$modeId=r,a.loadModule(["mode",r],function(t){if(this.$modeId!==r)return e&&e();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):t&&t.Mode&&(t=new t.Mode(n),n||(this.$modes[r]=t,t.$id=r),this.$onChangeMode(t)),e&&e()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=t.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new f(n);var r=this;this.bgTokenizer.addEventListener("update",function(t){r._signal("tokenizerUpdate",t)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){a.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=e.length,c=0;c<a;c++){if(c>s){if((c=o.end.row+1)>=a)break;o=this.$foldData[r++],s=o?o.start.row:1/0}null==n[c]&&(n[c]=this.$getStringScreenWidth(e[c])[0]),n[c]>i&&(i=n[c])}this.screenWidth=i}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=null,i=t.length-1;-1!=i;i--){var r=t[i];"doc"==r.group?(this.doc.revertDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!0,n)):r.deltas.forEach(function(t){this.addFolds(t.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!e&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=null,i=0;i<t.length;i++){var r=t[i];"doc"==r.group&&(this.doc.applyDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!e&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e,n){function i(t){return e?"insert"!==t.action:"insert"===t.action}var r,o,s=t[0];i(s)?r=h.fromPoints(s.start,s.end):r=h.fromPoints(s.start,s.start);for(var a=1;a<t.length;a++)s=t[a],i(s)?(o=s.start,-1==r.compare(o.row,o.column)&&r.setStart(o),o=s.end,1==r.compare(o.row,o.column)&&r.setEnd(o),!0):(o=s.start,-1==r.compare(o.row,o.column)&&(r=h.fromPoints(s.start,s.start)),!1);if(null!=n){0===h.comparePoints(n.start,r.start)&&(n.start.column+=r.end.column-r.start.column,n.end.column+=r.end.column-r.start.column);var c=n.compareRange(r);1==c?r.setStart(n.start):-1==c&&r.setEnd(n.end)}return r},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var i=this.getTextRange(t),r=this.getFoldsInRange(t),o=h.fromPoints(e,e);if(!n){this.remove(t);var s=t.start.row-t.end.row,a=s?-t.end.column:t.start.column-t.end.column;a&&(o.start.row==t.end.row&&o.start.column>t.end.column&&(o.start.column+=a),o.end.row==t.end.row&&o.end.column>t.end.column&&(o.end.column+=a)),s&&o.start.row>=t.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,i),r.length){var c=t.start,l=o.start,s=l.row-c.row,a=l.column-c.column;this.addFolds(r.map(function(t){return t=t.clone(),t.start.row==c.row&&(t.start.column+=a),t.end.row==c.row&&(t.end.column+=a),t.start.row+=s,t.end.row+=s,t}))}return o},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var i=t;i<=e;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new h(0,0,0,0),i=this.getTabSize(),r=e.start.row;r<=e.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;s<i&&" "==o.charAt(s);++s);s<i&&"\t"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){var i=this.getRowFoldStart(t+n);if(i<0)return 0;var r=i-t}else if(n>0){var i=this.getRowFoldEnd(e+n);if(i>this.doc.getLength()-1)return 0;var r=i-e}else{t=this.$clipRowToDocument(t),e=this.$clipRowToDocument(e);var r=e-t+1}var o=new h(t,0,e,Number.MAX_VALUE),s=this.getFoldsInRange(o).map(function(t){return t=t.clone(),t.start.row+=r,t.end.row+=r,t}),a=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+r,a),s.length&&this.addFolds(s),r},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var n=this.doc.getLength();t>=n?(t=n-1,e=this.doc.getLine(n-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var i=this.$constrainWrapLimit(t,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,n=t.action,i=t.start,r=t.end,o=i.row,s=r.row,a=s-o,c=null;if(this.$updating=!0,0!=a)if("remove"===n){this[e?"$wrapData":"$rowLengthCache"].splice(o,a);var l=this.$foldData;c=this.getFoldsInRange(t),this.removeFolds(c);var u=this.getFoldLine(r.row),h=0;if(u){u.addRemoveChars(r.row,r.column,i.column-r.column),u.shiftRow(-a);var d=this.getFoldLine(o);d&&d!==u&&(d.merge(u),u=d),h=l.indexOf(u)+1}for(h;h<l.length;h++){var u=l[h];u.start.row>=r.row&&u.shiftRow(-a)}s=o}else{var f=Array(a);f.unshift(o,0);var p=e?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,f);var l=this.$foldData,u=this.getFoldLine(o),h=0;if(u){var g=u.range.compareInside(i.row,i.column);0==g?(u=u.split(i.row,i.column))&&(u.shiftRow(a),u.addRemoveChars(s,0,r.column-i.column)):-1==g&&(u.addRemoveChars(o,0,r.column-i.column),u.shiftRow(a)),h=l.indexOf(u)+1}for(h;h<l.length;h++){var u=l[h];u.start.row>=o&&u.shiftRow(a)}}else{a=Math.abs(t.start.column-t.end.column),"remove"===n&&(c=this.getFoldsInRange(t),this.removeFolds(c),a=-a);var u=this.getFoldLine(o);u&&u.addRemoveChars(o,i.column,a)}return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),c},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,i){var r,o,s=this.doc.getAllLines(),a=this.getTabSize(),c=this.$wrapData,l=this.$wrapLimit,u=t;for(i=Math.min(i,s.length-1);u<=i;)o=this.getFoldLine(u,o),o?(r=[],o.walk(function(t,i,o,a){var c;if(null!=t){c=this.$getDisplayTokens(t,r.length),c[0]=e;for(var l=1;l<c.length;l++)c[l]=n}else c=this.$getDisplayTokens(s[i].substring(a,o),r.length);r=r.concat(c)}.bind(this),o.end.row,s[o.end.row].length+1),c[o.start.row]=this.$computeWrapSplits(r,l,a),u=o.end.row+1):(r=this.$getDisplayTokens(s[u]),c[u]=this.$computeWrapSplits(r,l,a),u++)};var e=3,n=4,s=10,l=11,d=12;this.$computeWrapSplits=function(t,i,r){function o(){var e=0;if(0===m)return e;if(g)for(var n=0;n<t.length;n++){var i=t[n];if(i==s)e+=1;else{if(i!=l){if(i==d)continue;break}e+=r}}return p&&!1!==g&&(e+=r),Math.min(e,m)}function a(e){var n=t.slice(h,e),i=n.length;n.join("").replace(/12/g,function(){i-=1}).replace(/2/g,function(){i-=1}),c.length||(v=o(),c.indent=v),f+=i,c.push(f),h=e}if(0==t.length)return[];for(var c=[],u=t.length,h=0,f=0,p=this.$wrapAsCode,g=this.$indentedSoftWrap,m=i<=Math.max(2*r,8)||!1===g?0:Math.floor(i/2),v=0;u-h>i-v;){var y=h+i-v;if(t[y-1]>=s&&t[y]>=s)a(y);else if(t[y]!=e&&t[y]!=n){for(var b=Math.max(y-(i-(i>>2)),h-1);y>b&&t[y]<e;)y--;if(p){for(;y>b&&t[y]<e;)y--;for(;y>b&&9==t[y];)y--}else for(;y>b&&t[y]<s;)y--;y>b?a(++y):(y=h+i,2==t[y]&&y--,a(y-v))}else{for(y;y!=h-1&&t[y]!=e;y--);if(y>h){a(y);continue}for(y=h+i;y<t.length&&t[y]==n;y++);if(y==t.length)break;a(y)}}return c},this.$getDisplayTokens=function(e,n){var i,r=[];n=n||0;for(var o=0;o<e.length;o++){var a=e.charCodeAt(o);if(9==a){i=this.getScreenTabSize(r.length+n),r.push(l);for(var c=1;c<i;c++)r.push(d)}else 32==a?r.push(s):a>39&&a<48||a>57&&a<64?r.push(9):a>=4352&&t(a)?r.push(1,2):r.push(1)}return r},this.$getStringScreenWidth=function(e,n,i){if(0==n)return[0,0];null==n&&(n=1/0),i=i||0;var r,o;for(o=0;o<e.length&&(r=e.charCodeAt(o),9==r?i+=this.getScreenTabSize(i):r>=4352&&t(r)?i+=2:i+=1,!(i>n));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(t){if(this.lineWidgets)var e=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-t%this.$tabSize},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,n){if(t<0)return{row:0,column:0};var i,r,o=0,s=0,a=0,c=0,l=this.$screenRowCache,u=this.$getRowCacheIndex(l,t),h=l.length;if(h&&u>=0)var a=l[u],o=this.$docRowCache[u],d=t>l[h-1];else var d=!h;for(var f=this.getLength()-1,p=this.getNextFoldLine(o),g=p?p.start.row:1/0;a<=t&&(c=this.getRowLength(o),!(a+c>t||o>=f));)a+=c,++o>g&&(o=p.end.row+1,p=this.getNextFoldLine(o,p),g=p?p.start.row:1/0),d&&(this.$docRowCache.push(o),this.$screenRowCache.push(a));if(p&&p.start.row<=o)i=this.getFoldDisplayLine(p),o=p.start.row;else{if(a+c<=t||o>f)return{row:f,column:this.getLine(f).length};i=this.getLine(o),p=null}var m=0,v=Math.floor(t-a);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(r=y[v],v>0&&y.length&&(m=y.indent,s=y[v-1]||y[y.length-1],i=i.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+v,o,v)&&(e=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(i,e-m)[1],this.$useWrapMode&&s>=r&&(s=r-1),p?p.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(t,e){if("undefined"===typeof e)var n=this.$clipPositionToDocument(t.row,t.column);else n=this.$clipPositionToDocument(t,e);t=n.row,e=n.column;var i=0,r=null,o=null;(o=this.getFoldAt(t,e,1))&&(t=o.start.row,e=o.start.column);var s,a=0,c=this.$docRowCache,l=this.$getRowCacheIndex(c,t),u=c.length;if(u&&l>=0)var a=c[l],i=this.$screenRowCache[l],h=t>c[u-1];else var h=!u;for(var d=this.getNextFoldLine(a),f=d?d.start.row:1/0;a<t;){if(a>=f){if((s=d.end.row+1)>t)break;d=this.getNextFoldLine(s,d),f=d?d.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var p="";d&&a>=f?(p=this.getFoldDisplayLine(d,t,e),r=d.start.row):(p=this.getLine(t).substring(0,e),r=t);var g=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){for(var v=0;p.length>=m[v];)i++,v++;p=p.substring(m[v-1]||0,p.length),g=v>0?m.indent:0}}return{row:i,column:g+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=0,e=this.$foldData[r++],o=e?e.start.row:1/0;i<n;){var s=this.$wrapData[i];t+=s?s.length+1:1,i++,i>o&&(i=e.end.row+1,e=this.$foldData[r++],o=e?e.start.row:1/0)}else{t=this.getLength();for(var a=this.$foldData,r=0;r<a.length;r++)e=a[r],t-=e.end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,i){if(0===n)return[0,0];n||(n=1/0),i=i||0;var r,o;for(o=0;o<e.length&&(r=e.charAt(o),!((i+="\t"===r?this.getScreenTabSize(i):t.getCharacterWidth(r))>n));o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=t}.call(g.prototype),t("./edit_session/folding").Folding.call(g.prototype),t("./edit_session/bracket_match").BracketMatch.call(g.prototype),a.defineOptions(g.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){isNaN(t)||this.$tabSize===t||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId}}}),e.EditSession=g}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,n){"use strict";function i(t,e){function n(t){return/\w/.test(t)||e.regExp?"\\b":""}return n(t[0])+t+n(t[t.length-1])}var r=t("./lib/lang"),o=t("./lib/oop"),s=t("./range").Range,a=function(){this.$options={}};(function(){this.set=function(t){return o.mixin(this.$options,t),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var i=null;return n.forEach(function(t,n,r,o){return i=new s(t,n,r,o),!(n==o&&e.start&&e.start.start&&0!=e.skipCurrent&&i.isEqual(e.start))||(i=null,!1)}),i},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,i=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),o=[],a=e.re;if(e.$isMultiLine){var c,l=a.length,u=i.length-l;t:for(var h=a.offset||0;h<=u;h++){for(var d=0;d<l;d++)if(-1==i[h+d].search(a[d]))continue t;var f=i[h],p=i[h+l-1],g=f.length-f.match(a[0])[0].length,m=p.match(a[l-1])[0].length;c&&c.end.row===h&&c.end.column>g||(o.push(c=new s(h,g,h+l-1,m)),l>2&&(h=h+l-2))}}else for(var v=0;v<i.length;v++)for(var y=r.getMatchOffsets(i[v],a),d=0;d<y.length;d++){var b=y[d];o.push(new s(v,b.offset,v,b.offset+b.length))}if(n){for(var w=n.start.column,_=n.start.column,v=0,d=o.length-1;v<d&&o[v].start.column<w&&o[v].start.row==n.start.row;)v++;for(;v<d&&o[d].end.column>_&&o[d].end.row==n.end.row;)d--;for(o=o.slice(v,d+1),v=0,d=o.length;v<d;v++)o[v].start.row+=n.start.row,o[v].end.row+=n.start.row}return o},this.replace=function(t,e){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(i){var r=i.exec(t);if(!r||r[0].length!=t.length)return null;if(e=t.replace(i,e),n.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var s=t[o];s&&s.toLowerCase()!=s?e[o]=e[o].toUpperCase():e[o]=e[o].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n=t.needle;if(!t.needle)return t.re=!1;t.regExp||(n=r.escapeRegExp(n)),t.wholeWord&&(n=i(n,t));var o=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(n),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(n,o);try{var s=new RegExp(n,o)}catch(t){s=!1}return t.re=s},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],e))}catch(t){return!1}return i},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var i=1==e.backwards,r=0!=e.skipCurrent,o=e.range,s=e.start;s||(s=o?o[i?"end":"start"]:t.selection.getRange()),s.start&&(s=s[r!=i?"end":"start"]);var a=o?o.start.row:0,c=o?o.end.row:t.getLength()-1;if(i)var l=function(t){var n=s.row;if(!h(n,s.column,t)){for(n--;n>=a;n--)if(h(n,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(n=c,a=s.row;n>=a;n--)if(h(n,Number.MAX_VALUE,t))return}};else var l=function(t){var n=s.row;if(!h(n,s.column,t)){for(n+=1;n<=c;n++)if(h(n,0,t))return;if(0!=e.wrap)for(n=a,c=s.row;n<=c;n++)if(h(n,0,t))return}};if(e.$isMultiLine)var u=n.length,h=function(e,r,o){var s=i?e-u+1:e;if(!(s<0)){var a=t.getLine(s),c=a.search(n[0]);if(!(!i&&c<r||-1===c)){for(var l=1;l<u;l++)if(a=t.getLine(s+l),-1==a.search(n[l]))return;var h=a.match(n[u-1])[0].length;if(!(i&&h>r))return!!o(s,c,s+u-1,h)||void 0}}};else if(i)var h=function(e,i,r){var o,s=t.getLine(e),a=[],c=0;for(n.lastIndex=0;o=n.exec(s);){var l=o[0].length;if(c=o.index,!l){if(c>=s.length)break;n.lastIndex=c+=1}if(o.index+l>i)break;a.push(o.index,l)}for(var u=a.length-1;u>=0;u-=2){var h=a[u-1],l=a[u];if(r(e,h,e,h+l))return!0}};else var h=function(e,i,r){var o,s=t.getLine(e),a=i;for(n.lastIndex=i;o=n.exec(s);){var c=o[0].length;if(a=o.index,r(e,a,e,a+c))return!0;if(!c&&(n.lastIndex=a+=1,a>=s.length))return!1}};return{forEach:l}}}).call(a.prototype),e.Search=a}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,n){"use strict";function r(t,e){this.platform=e||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function o(t,e){r.call(this,t,e),this.$singleCommand=!1}var s=t("../lib/keys"),a=t("../lib/useragent"),c=s.KEY_MODS;o.prototype=r.prototype,function(){function t(t){return"object"==("undefined"===typeof t?"undefined":i(t))&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"===typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==t)delete i[r];else if(Array.isArray(o)){var s=o.indexOf(t);-1!=s&&(o.splice(s,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(t,e,n){if("object"==("undefined"===typeof t?"undefined":i(t))&&t&&(void 0==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach(function(t){var i="";if(-1!=t.indexOf(" ")){var r=t.split(/\s+/);t=r.pop(),r.forEach(function(t){var e=this.parseKeys(t),n=c[e.hashId]+e.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")},this),i+=" "}var o=this.parseKeys(t),s=c[o.hashId]+o.key;this._addCommandToBinding(i+s,e,n)},this)},this._addCommandToBinding=function(e,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?-1!=(r=o[e].indexOf(n))&&o[e].splice(r,1):o[e]=[o[e]],"number"!=typeof i&&(i=t(n));var s=o[e];for(r=0;r<s.length;r++){var a=s[r],c=t(a);if(c>i)break}s.splice(r,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach(function(e){var n=t[e];if(n){if("string"===typeof n)return this.bindKey(n,e);"function"===typeof n&&(n={exec:n}),"object"===("undefined"===typeof n?"undefined":i(n))&&(n.name||(n.name=e),this.addCommand(n))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(t){return t}),n=e.pop(),i=s[n];if(s.FUNCTION_KEYS[i])n=s.FUNCTION_KEYS[i].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,o=e.length;o--;){var a=s.KEY_MODS[e[o]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+e[o]+" in "+t),!1;r|=a}return{key:n,hashId:r}},this.findKeyCommand=function(t,e){var n=c[t]+e;return this.commandKeyBinding[n]},this.handleKeyboard=function(t,e,n,i){if(!(i<0)){var r=c[e]+n,o=this.commandKeyBinding[r];return t.$keyChain&&(t.$keyChain+=" "+r,o=this.commandKeyBinding[t.$keyChain]||o),!o||"chainKeys"!=o&&"chainKeys"!=o[o.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(-1==e||i>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-r.length-1)),{command:o}):(t.$keyChain=t.$keyChain||r,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(r.prototype),e.HashHandler=r,e.MultiHashHandler=o}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,s=function(t,e){r.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",function(t){return t.command.exec(t.editor,t.args||{})})};i.inherits(s,r),function(){i.implement(this,o),this.exec=function(t,e,n){if(Array.isArray(t)){for(var i=t.length;i--;)if(this.exec(t[i],e,n))return!0;return!1}if("string"===typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(t.isAvailable&&!t.isAvailable(e))return!1;var r={editor:e,command:t,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),!1!==r.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map(function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}.call(s.prototype),e.CommandManager=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,e,n){"use strict";function i(t,e){return{win:t,mac:e}}var r=t("../lib/lang"),o=t("../config"),s=t("../range").Range;e.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(t){o.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","F4"),exec:function(t){o.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Shift-F4"),exec:function(t){o.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(t){var e=parseInt(prompt("Enter line number:"),10);isNaN(e)||t.gotoLine(e)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:i("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(t){o.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-P"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:i("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(t){},readOnly:!0},{name:"cut",exec:function(t){var e=t.getSelectionRange();t._emit("cut",e),t.selection.isEmpty()||(t.session.remove(e),t.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(t){o.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",bindKey:i("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",bindKey:i("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(t,e){t.insert(r.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:i("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:i(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),i=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),o=t.session.doc.getLine(n.row).length,a=t.session.doc.getTextRange(t.selection.getRange()),c=a.replace(/\n\s*/," ").length,l=t.session.doc.getLine(n.row),u=n.row+1;u<=i.row+1;u++){var h=r.stringTrimLeft(r.stringTrimRight(t.session.doc.getLine(u)));0!==h.length&&(h=" "+h),l+=h}i.row+1<t.session.doc.getLength()-1&&(l+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new s(n.row,0,i.row+2,0),l),c>0?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+c)):(o=t.session.doc.getLine(n.row).length>o?o+1:o,t.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:i(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,i=t.selection.rangeList.ranges,r=[];i.length<1&&(i=[t.selection.getRange()]);for(var o=0;o<i.length;o++)o==i.length-1&&(i[o].end.row===e&&i[o].end.column===n||r.push(new s(i[o].end.row,i[o].end.column,e,n))),0===o?0===i[o].start.row&&0===i[o].start.column||r.push(new s(0,0,i[o].start.row,i[o].start.column)):r.push(new s(i[o-1].end.row,i[o-1].end.column,i[o].start.row,i[o].start.column));t.exitMultiSelectMode(),t.clearSelection();for(var o=0;o<r.length;o++)t.selection.addRange(r[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var r=t("./lib/oop"),o=t("./lib/dom"),s=t("./lib/lang"),a=t("./lib/useragent"),c=t("./keyboard/textinput").TextInput,l=t("./mouse/mouse_handler").MouseHandler,u=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,d=t("./edit_session").EditSession,f=t("./search").Search,p=t("./range").Range,g=t("./lib/event_emitter").EventEmitter,m=t("./commands/command_manager").CommandManager,v=t("./commands/default_commands").commands,y=t("./config"),b=t("./token_iterator").TokenIterator,w=function t(e,n){var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++t.$uid,this.commands=new m(a.isMac?"mac":"win",v),"object"==("undefined"===typeof document?"undefined":i(document))&&(this.textInput=new c(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new u(this)),this.keyBinding=new h(this),this.$blockScrolling=0,this.$search=(new f).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(t,e){e._$emitInputEvent.schedule(31)}),this.setSession(n||new d("")),y.resetOptions(this),y._signal("editor",this)};w.$uid=0,function(){r.implement(this,g),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(t){if(this.curOp){if(t&&!1===t.returnValue)return this.curOp=null;this._signal("beforeEndOperation");var e=this.curOp.command;e.name&&this.$blockScrolling>0&&this.$blockScrolling--;var n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,n=this.$mergeableCommands,i=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var r=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(e.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"===typeof t){this.$keybindingId=t;var n=this;y.loadModule(["keybinding",t],function(i){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(i&&i.handler),e&&e()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container,"fontSize")},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout(function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=e.findMatchingBracket(t.getCursorPosition());if(n)var i=new p(n.row,n.column,n.row,n.column+1);else if(e.$mode.getMatching)var i=e.$mode.getMatching(t.session);i&&(e.$bracketHighlight=e.addMarker(i,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout(function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),i=new b(t.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==r.type.indexOf("tag-open")||(r=i.stepForward())){var o=r.value,s=0,a=i.stepBackward();if("<"==a.value)do{a=r,(r=i.stepForward())&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(r&&s>=0);else{do{r=a,a=i.stepBackward(),r&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(a&&s<=0);i.stepForward()}if(!r)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var c=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),u=new p(c,l,c,l+r.value.length),h=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&void 0!=h&&0!==u.compareRange(h.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),u&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(u,"ace_bracket","text"))}}},50)}},this.focus=function(){var t=this;setTimeout(function(){t.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,n=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,n,e),this._signal("change",t),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(y.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();e.$selectionMarker=e.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column-1,i=e.end.column+1,r=t.getLine(e.start.row),o=r.length,s=r.substring(Math.max(n,0),Math.min(i,o));if(!(n>=0&&/^[\w\d]/.test(s)||i<=o&&/[\w\d]$/.test(s))&&(s=r.substring(e.start.column,e.end.column),/^[\w\d]+$/.test(s))){return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s})}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText();return this._signal("copy",t),t},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var n={text:t,event:e};this.commands.exec("paste",this,n)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(e);else{var n=e.split(/\r\n|\r|\n/),i=this.selection.rangeList.ranges;if(n.length>i.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var r=i.length;r--;){var o=i[r];o.isEmpty()||this.session.remove(o),this.session.insert(o.start,n[r])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var o=i.transformAction(n.getState(r.row),"insertion",this,n,t);o&&(t!==o.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),t=o.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==t.indexOf("\n")){var s=new p.fromPoints(r,r);s.end.column+=t.length,this.session.remove(s)}}else{var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}if("\n"==t||"\r\n"==t){var a=n.getLine(r.row);if(r.column>a.search(/\S|$/)){var c=a.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+c)}}this.clearSelection();var l=r.column,u=n.getState(r.row),a=n.getLine(r.row),h=i.checkOutdent(u,a,t);n.insert(r,t);if(o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new p(r.row,l+o.selection[0],r.row,l+o.selection[1])):this.selection.setSelectionRange(new p(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))),n.getDocument().isNewLine(t)){var d=i.getNextLineIndent(u,a.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},d)}h&&i.autoOutdent(u,n,r.row)},this.onTextInput=function(t){this.keyBinding.onTextInput(t)},this.onCommandKey=function(t,e,n){this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(e.start.row),r=n.getMode().transformAction(i,"deletion",this,n,e);if(0===e.end.column){var o=n.getTextRange(e);if("\n"==o[o.length-1]){var s=n.getLine(e.end.row);/^\s+$/.test(s)&&(e.end.column=s.length)}}r&&(e=r)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var n,i,r=this.session.getLine(t.row);e<r.length?(n=r.charAt(e)+r.charAt(e-1),i=new p(t.row,e-1,t.row,e+1)):(n=r.charAt(e-1)+r.charAt(e-2),i=new p(t.row,e-2,t.row,e)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(e.start.row<e.end.row){var n=this.$getSelectedRows();return void t.indentRows(n.first,n.last,"\t")}if(e.start.column<e.end.column){if(!/^\s+$/.test(t.getTextRange(e))){var n=this.$getSelectedRows();return void t.indentRows(n.first,n.last,"\t")}}var i=t.getLine(e.start.row),r=e.start,o=t.getTabSize(),a=t.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var c=o-a%o,l=s.stringRepeat(" ",c);else{for(var c=a%o;" "==i[e.start.column-1]&&c;)e.start.column--,c--;this.selection.setSelectionRange(e),l="\t"}return this.insert(l)},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,n=[],i=t.first;i<=t.last;i++)n.push(e.getLine(i));n.sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0});for(var r=new p(0,0,0,0),i=t.first;i<=t.last;i++){var o=e.getLine(i);r.start.row=i,r.end.row=i,r.end.column=o.length,e.replace(r,n[i-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(t);n.lastIndex<e;){var r=n.exec(i);if(r.index<=e&&r.index+r[0].length>=e){return{value:r[0],start:r.index,end:r.index+r[0].length}}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new p(e,n-1,e,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(e,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,c=parseFloat(o.value);c*=Math.pow(10,a),s!==o.end&&n<s?t*=Math.pow(10,o.end-n-1):t*=Math.pow(10,o.end-n),c+=t,c/=Math.pow(10,a);var l=c.toFixed(a),u=new p(e,o.start,e,o.end);this.session.replace(u,l),this.moveCursorTo(e,Math.max(o.start+1,n+l.length-o.value.length))}}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,n=t.getRange(),i=t.isBackwards();if(n.isEmpty()){var r=n.start.row;e.duplicateLines(r,r)}else{var o=i?n.start:n.end,s=e.insert(o,e.getTextRange(n),!1);n.start=o,n.end=s,t.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,e?0:t),e&&-1==t&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var s=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,c=0,l=s.length,u=0;u<l;u++){var h=u;s[u].moveBy(a,0),n=this.$getSelectedRows(s[u]);for(var d=n.first,f=n.last;++u<l;){c&&s[u].moveBy(c,0);var p=this.$getSelectedRows(s[u]);if(e&&p.first!=f)break;if(!e&&p.first>f+1)break;f=p.last}for(u--,a=this.session.$moveLines(d,f,e?0:t),e&&-1==t&&(h=u+1);h<=u;)s[h].moveBy(a,0),h++;e||(a=0),c+=a}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,i=this.renderer.layerConfig,r=t*Math.floor(i.height/i.lineHeight);this.$blockScrolling++,!0===e?this.selection.$moveSelection(function(){this.moveCursorBy(r,0)}):!1===e&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection()),this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,i){this.renderer.scrollToLine(t,e,n,i)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),i=new b(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var s,a,c=!1,l={},u=n.column-o.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!c;u++)if(h[o.value[u]])switch(a=h[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(l[a])&&(l[a]=0),o.value[u]){case"(":case"[":case"{":l[a]++;break;case")":case"]":case"}":l[a]--,-1===l[a]&&(s="bracket",c=!0)}}else o&&-1!==o.type.indexOf("tag-name")&&(isNaN(l[o.value])&&(l[o.value]=0),"<"===r.value?l[o.value]++:"</"===r.value&&l[o.value]--,-1===l[o.value]&&(s="tag",c=!0));c||(r=o,o=i.stepForward(),u=0)}while(o&&!c);if(s){var d,f;if("bracket"===s)(d=this.session.getBracketRange(n))||(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1),f=d.start,(e||f.row===n.row&&Math.abs(f.column-n.column)<2)&&(d=this.session.getBracketRange(f)));else if("tag"===s){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2),0===d.compare(n.row,n.column)){c=!1;do{o=r,(r=i.stepBackward())&&(-1!==r.type.indexOf("tag-close")&&d.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===r.value?l[g]++:"</"===r.value&&l[g]--,0===l[g]&&(c=!0)))}while(r&&!c)}o&&o.type.indexOf("tag-name")&&(f=d.start,f.row==n.row&&Math.abs(f.column-n.column)<2&&(f=d.end))}f=d&&d.cursor||f,f&&(t?d&&e?this.selection.setRange(d):d&&d.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.$blockScrolling-=1,this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,t)&&(i=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),i):i},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;this.$blockScrolling+=1;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],t)&&i++;return this.selection.setSelectionRange(r),this.$blockScrolling-=1,i},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return e=this.$search.replace(n,e),null!==e?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==("undefined"===typeof t?"undefined":i(t))&&r.mixin(e,t);var o=this.selection.getRange();null==e.needle&&(t=this.session.getTextRange(o)||this.$search.$options.needle,t||(o=this.session.getWordRange(o.start.row,o.start.column),t=this.session.getTextRange(o)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:o});var s=this.$search.find(this.session);return e.preventScroll?s:s?(this.revealRange(s,n),s):(e.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.$blockScrolling+=1,this.session.unfold(t),this.selection.setSelectionRange(t),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",function(){i=!0}),s=this.renderer.on("beforeRender",function(){i&&(e=n.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(i&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var t=n.renderer,o=t.$cursorLayer.$pixelPos,s=t.layerConfig,a=o.top-s.offset;i=o.top>=0&&a+e.top<0||!(o.top<s.height&&o.top+e.top+s.lineHeight>window.innerHeight)&&null,null!=i&&(r.style.top=a+"px",r.style.left=o.left+"px",r.style.height=s.lineHeight+"px",r.scrollIntoView(i)),i=e=null}});this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,o.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))}}.call(w.prototype),y.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),e.Editor=w}),ace.define("ace/undomanager",["require","exports","module"],function(t,e,n){"use strict";var i=function(){this.reset()};(function(){function t(t){return{action:t.action,start:t.start,end:t.end,lines:1==t.lines.length?null:t.lines,text:1==t.lines.length?t.lines[0]:null}}function e(t){return{action:t.action,start:t.start,end:t.end,lines:t.lines||[t.text]}}function n(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++){for(var r=t[i],o={group:r.group,deltas:new Array(r.length)},s=0;s<r.deltas.length;s++){var a=r.deltas[s];o.deltas[s]=e(a)}n[i]=o}return n}this.execute=function(t){var e=t.args[0];this.$doc=t.args[1],t.merge&&this.hasUndo()&&(this.dirtyCounter--,e=this.$undoStack.pop().concat(e)),this.$undoStack.push(e),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(t){var e=this.$undoStack.pop(),n=null;return e&&(n=this.$doc.undoChanges(e,t),this.$redoStack.push(e),this.dirtyCounter--),n},this.redo=function(t){var e=this.$redoStack.pop(),n=null;return e&&(n=this.$doc.redoChanges(this.$deserializeDeltas(e),t),this.$undoStack.push(e),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(e){return n(e,t)},this.$deserializeDeltas=function(t){return n(t,e)}}).call(i.prototype),e.UndoManager=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/oop"),o=t("../lib/lang"),s=t("../lib/event_emitter").EventEmitter,a=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){r.implement(this,s),this.setSession=function(t){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",-1===r.text.indexOf(s)&&r.text.push(s);var a=n.type;"error"==a?r.className=" ace_error":"warning"==a&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=a||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,n=t.end.row-e;if(0===n);else if("remove"==t.action)this.$annotations.splice(e,n+1,null);else{var i=new Array(n+1);i.unshift(e,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(t){for(var e=this.session,n=t.firstRow,r=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1),o=e.getNextFoldLine(n),s=o?o.start.row:1/0,a=this.$showFoldWidgets&&e.foldWidgets,c=e.$breakpoints,l=e.$decorations,u=e.$firstLineNumber,h=0,d=e.gutterRenderer||this.$renderer,f=null,p=-1,g=n;;){if(g>s&&(g=o.end.row+1,o=e.getNextFoldLine(g,o),s=o?o.start.row:1/0),g>r){for(;this.$cells.length>p+1;)f=this.$cells.pop(),this.element.removeChild(f.element);break}f=this.$cells[++p],f||(f={element:null,textNode:null,foldWidget:null},f.element=i.createElement("div"),f.textNode=document.createTextNode(""),f.element.appendChild(f.textNode),this.element.appendChild(f.element),this.$cells[p]=f);var m="ace_gutter-cell ";c[g]&&(m+=c[g]),l[g]&&(m+=l[g]),this.$annotations[g]&&(m+=this.$annotations[g].className),f.element.className!=m&&(f.element.className=m);var v=e.getRowLength(g)*t.lineHeight+"px";if(v!=f.element.style.height&&(f.element.style.height=v),a){var y=a[g];null==y&&(y=a[g]=e.getFoldWidget(g))}if(y){f.foldWidget||(f.foldWidget=i.createElement("span"),f.element.appendChild(f.foldWidget));var m="ace_fold-widget ace_"+y;"start"==y&&g==s&&g<o.end.row?m+=" ace_closed":m+=" ace_open",f.foldWidget.className!=m&&(f.foldWidget.className=m);var v=t.lineHeight+"px";f.foldWidget.style.height!=v&&(f.foldWidget.style.height=v)}else f.foldWidget&&(f.element.removeChild(f.foldWidget),f.foldWidget=null);var b=h=d?d.getText(e,g):g+u;b!==f.textNode.data&&(f.textNode.data=b),g++}this.element.style.height=t.minHeight+"px",(this.$fixedWidth||e.$useWrapMode)&&(h=e.getLength()+u);var w=d?d.getWidth(e,h,t):h.toString().length*t.characterWidth,_=this.$padding||this.$computePadding();(w+=_.left+_.right)===this.gutterWidth||isNaN(w)||(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(t.paddingLeft)+1||0,this.$padding.right=parseInt(t.paddingRight)||0,this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(a.prototype),e.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,e,n){"use strict";var i=t("../range").Range,r=t("../lib/dom"),o=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){function t(t,e,n,i){return(t?1:0)|(e?2:0)|(n?4:0)|(i?8:0)}this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.update=function(t){if(t){this.config=t;var e=[];for(var n in this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(t.firstRow,t.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,t),s=this.$padding+(this.session.$bidiHandler.isBidiRow(r.start.row)?this.session.$bidiHandler.getPosLeft(r.start.column):r.start.column*t.characterWidth);i.renderer(e,r,s,o,t)}else"fullLine"==i.type?this.drawFullLineMarker(e,r,i.clazz,t):"screenLine"==i.type?this.drawScreenLineMarker(e,r,i.clazz,t):r.isMultiLine()?"text"==i.type?this.drawTextMarker(e,r,i.clazz,t):this.drawMultiLineMarker(e,r,i.clazz,t):this.session.$bidiHandler.isBidiRow(r.start.row)?this.drawBidiSingleLineMarker(e,r,i.clazz+" ace_start ace_br15",t):this.drawSingleLineMarker(e,r,i.clazz+" ace_start ace_br15",t)}else i.update(e,this,this.session,t)}this.element.innerHTML=e.join("")}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(e,n,r,o,s){for(var a=this.session,c=n.start.row,l=n.end.row,u=c,h=0,d=0,f=a.getScreenLastRowColumn(u),p=null,g=new i(u,n.start.column,u,d);u<=l;u++)g.start.row=g.end.row=u,g.start.column=u==c?n.start.column:a.getRowWrapIndent(u),g.end.column=f,h=d,d=f,f=u+1<l?a.getScreenLastRowColumn(u+1):u==l?0:n.end.column,p=r+(u==c?" ace_start":"")+" ace_br"+t(u==c||u==c+1&&n.start.column,h<d,d>f,u==l),this.session.$bidiHandler.isBidiRow(u)?this.drawBidiSingleLineMarker(e,g,p,o,u==l?0:1,s):this.drawSingleLineMarker(e,g,p,o,u==l?0:1,s)},this.drawMultiLineMarker=function(t,e,n,i,r){var o,s,a,c=this.$padding;if(r=r||"",this.session.$bidiHandler.isBidiRow(e.start.row)){var l=e.clone();l.end.row=l.start.row,l.end.column=this.session.getLine(l.start.row).length,this.drawBidiSingleLineMarker(t,l,n+" ace_br1 ace_start",i,null,r)}else o=i.lineHeight,s=this.$getTop(e.start.row,i),a=c+e.start.column*i.characterWidth,t.push("<div class='",n," ace_br1 ace_start' style='","height:",o,"px;","right:0;","top:",s,"px;","left:",a,"px;",r,"'></div>");if(this.session.$bidiHandler.isBidiRow(e.end.row)){var l=e.clone();l.start.row=l.end.row,l.start.column=0,this.drawBidiSingleLineMarker(t,l,n+" ace_br12",i,null,r)}else{var u=e.end.column*i.characterWidth;o=i.lineHeight,s=this.$getTop(e.end.row,i),t.push("<div class='",n," ace_br12' style='","height:",o,"px;","width:",u,"px;","top:",s,"px;","left:",c,"px;",r,"'></div>")}if(!((o=(e.end.row-e.start.row-1)*i.lineHeight)<=0)){s=this.$getTop(e.start.row+1,i);var h=(e.start.column?1:0)|(e.end.column?0:8);t.push("<div class='",n,h?" ace_br"+h:"","' style='","height:",o,"px;","right:0;","top:",s,"px;","left:",c,"px;",r,"'></div>")}},this.drawSingleLineMarker=function(t,e,n,i,r,o){var s=i.lineHeight,a=(e.end.column+(r||0)-e.start.column)*i.characterWidth,c=this.$getTop(e.start.row,i),l=this.$padding+e.start.column*i.characterWidth;t.push("<div class='",n,"' style='","height:",s,"px;","width:",a,"px;","top:",c,"px;","left:",l,"px;",o||"","'></div>")},this.drawBidiSingleLineMarker=function(t,e,n,i,r,o){var s=i.lineHeight,a=this.$getTop(e.start.row,i),c=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach(function(e){t.push("<div class='",n,"' style='","height:",s,"px;","width:",e.width+(r||0),"px;","top:",a,"px;","left:",c+e.left,"px;",o||"","'></div>")})},this.drawFullLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),s=i.lineHeight;e.start.row!=e.end.row&&(s+=this.$getTop(e.end.row,i)-o),t.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")},this.drawScreenLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),s=i.lineHeight;t.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")}}).call(o.prototype),e.Marker=o}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),s=(t("../lib/useragent"),t("../lib/event_emitter").EventEmitter),a=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){i.implement(this,s),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.$updateEolChar=function(){var t="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(t){this.$padding=t,this.element.style.padding="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],n=1;n<t+1;n++)this.showInvisibles?e.push("<span class='ace_invisible ace_invisible_tab'>"+o.stringRepeat(this.TAB_CHAR,n)+"</span>"):e.push(o.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",r="",s="";if(this.showInvisibles){i+=" ace_invisible",r=" ace_invisible_space",s=" ace_invisible_tab";var a=o.stringRepeat(this.SPACE_CHAR,this.tabSize),c=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else var a=o.stringRepeat(" ",this.tabSize),c=a;this.$tabStrings[" "]="<span class='"+i+r+"'>"+a+"</span>",this.$tabStrings["\t"]="<span class='"+i+s+"'>"+c+"</span>"}},this.updateLines=function(t,e,n){this.config.lastRow==t.lastRow&&this.config.firstRow==t.firstRow||this.scrollLines(t),this.config=t;for(var i=Math.max(e,t.firstRow),r=Math.min(n,t.lastRow),o=this.element.childNodes,s=0,a=t.firstRow;a<i;a++){var c=this.session.getFoldLine(a);if(c){if(c.containsRow(i)){i=c.start.row;break}a=c.end.row}s++}for(var a=i,c=this.session.getNextFoldLine(a),l=c?c.start.row:1/0;;){if(a>l&&(a=c.end.row+1,c=this.session.getNextFoldLine(a,c),l=c?c.start.row:1/0),a>r)break;var u=o[s++];if(u){var h=[];this.$renderLine(h,a,!this.$useLineGroups(),a==l&&c),u.style.height=t.lineHeight*this.session.getRowLength(a)+"px",u.innerHTML=h.join("")}a++}},this.scrollLines=function(t){var e=this.config;if(this.config=t,!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);var n=this.element;if(e.firstRow<t.firstRow)for(var i=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);i>0;i--)n.removeChild(n.firstChild);if(e.lastRow>t.lastRow)for(var i=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);i>0;i--)n.removeChild(n.lastChild);if(t.firstRow<e.firstRow){var r=this.$renderLinesFragment(t,t.firstRow,e.firstRow-1);n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}if(t.lastRow>e.lastRow){var r=this.$renderLinesFragment(t,e.lastRow+1,t.lastRow);n.appendChild(r)}},this.$renderLinesFragment=function(t,e,n){for(var i=this.element.ownerDocument.createDocumentFragment(),o=e,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;;){if(o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),o>n)break;var c=r.createElement("div"),l=[];if(this.$renderLine(l,o,!1,o==a&&s),c.innerHTML=l.join(""),this.$useLineGroups())c.className="ace_line_group",i.appendChild(c),c.style.height=t.lineHeight*this.session.getRowLength(o)+"px";else for(;c.firstChild;)i.appendChild(c.firstChild);o++}return i},this.update=function(t){this.config=t;for(var e=[],n=t.firstRow,i=t.lastRow,r=n,o=this.session.getNextFoldLine(r),s=o?o.start.row:1/0;;){if(r>s&&(r=o.end.row+1,o=this.session.getNextFoldLine(r,o),s=o?o.start.row:1/0),r>i)break;this.$useLineGroups()&&e.push("<div class='ace_line_group' style='height:",t.lineHeight*this.session.getRowLength(r),"px'>"),this.$renderLine(e,r,!1,r==s&&o),this.$useLineGroups()&&e.push("</div>"),r++}this.element.innerHTML=e.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,i){var r=this,s=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=function(t,n,i,s,a){if(n)return r.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+o.stringRepeat(r.SPACE_CHAR,t.length)+"</span>":t;if("&"==t)return"&#38;";if("<"==t)return"&#60;";if(">"==t)return"&#62;";if("\t"==t){var c=r.session.getScreenTabSize(e+s);return e+=c-1,r.$tabStrings[c]}if("\u3000"==t){var l=r.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",u=r.showInvisibles?r.SPACE_CHAR:"";return e+=1,"<span class='"+l+"' style='width:"+2*r.config.characterWidth+"px'>"+u+"</span>"}return i?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+r.SPACE_CHAR+"</span>":(e+=1,"<span class='ace_cjk' style='width:"+2*r.config.characterWidth+"px'>"+t+"</span>")},c=i.replace(s,a);if(this.$textToken[n.type])t.push(c);else{var l="ace_"+n.type.replace(/\./g," ace_"),u="";"fold"==n.type&&(u=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),t.push("<span class='",l,"'",u,">",c,"</span>")}return e+i.length},this.renderIndentGuide=function(t,e,n){var i=e.search(this.$indentGuideRe);return i<=0||i>=n?e:" "==e[0]?(i-=i%this.tabSize,t.push(o.stringRepeat(this.$tabStrings[" "],i/this.tabSize)),e.substr(i)):"\t"==e[0]?(t.push(o.stringRepeat(this.$tabStrings["\t"],i)),e.substr(i)):e},this.$renderWrappedLine=function(t,e,n,i){for(var r=0,s=0,a=n[0],c=0,l=0;l<e.length;l++){var u=e[l],h=u.value;if(0==l&&this.displayIndentGuides){if(r=h.length,!(h=this.renderIndentGuide(t,h,a)))continue;r-=h.length}if(r+h.length<a)c=this.$renderToken(t,c,u,h),r+=h.length;else{for(;r+h.length>=a;)c=this.$renderToken(t,c,u,h.substring(0,a-r)),h=h.substring(a-r),r=a,i||t.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),t.push(o.stringRepeat("\xa0",n.indent)),s++,c=0,a=n[s]||Number.MAX_VALUE;0!=h.length&&(r+=h.length,c=this.$renderToken(t,c,u,h))}}},this.$renderSimpleLine=function(t,e){var n=0,i=e[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(t,r)),r&&(n=this.$renderToken(t,n,i,r));for(var o=1;o<e.length;o++)i=e[o],r=i.value,n=this.$renderToken(t,n,i,r)},this.$renderLine=function(t,e,n,i){if(i||0==i||(i=this.session.getFoldLine(e)),i)var r=this.$getFoldLineTokens(e,i);else var r=this.session.getTokens(e);if(n||t.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(e)),"px'>"),r.length){var o=this.session.getRowSplitData(e);o&&o.length?this.$renderWrappedLine(t,r,o,n):this.$renderSimpleLine(t,r)}this.showInvisibles&&(i&&(e=i.end.row),t.push("<span class='ace_invisible ace_invisible_eol'>",e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||t.push("</div>")},this.$getFoldLineTokens=function(t,e){function n(t,e,n){for(var i=0,o=0;o+t[i].value.length<e;)if(o+=t[i].value.length,++i==t.length)return;if(o!=e){var s=t[i].value.substring(e-o);s.length>n-e&&(s=s.substring(0,n-e)),r.push({type:t[i].type,value:s}),o=e+s.length,i+=1}for(;o<n&&i<t.length;){var s=t[i].value;s.length+o>n?r.push({type:t[i].type,value:s.substring(0,n-o)}):r.push(t[i]),o+=s.length,i+=1}}var i=this.session,r=[],o=i.getTokens(t);return e.walk(function(t,e,s,a,c){null!=t?r.push({type:"fold",value:t}):(c&&(o=i.getTokens(e)),o.length&&n(o,a,s))},e.end.row,this.session.getLine(e.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),e.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";var i,r=t("../lib/dom"),o=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),void 0===i&&(i=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(i?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(t){for(var e=this.cursors,n=e.length;n--;)e[n].style.visibility=t?"":"hidden"},this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)e[n].style.opacity=t?"":"0"},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t==this.smoothBlinking||i||(this.smoothBlinking=t,r.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var t=r.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var e=function(){this.timeoutId=setTimeout(function(){t(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){t(!0),e()},this.blinkInterval),e()}},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,i=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);for(var n=0,r=e.length;n<r;n++){var o=this.getPixelPosition(e[n].cursor,!0);if(!((o.top>t.height+t.offset||o.top<0)&&n>1)){var s=(this.cursors[i++]||this.addCursor()).style;this.drawCursor?this.drawCursor(s,o,t,e[n],this.session):(s.left=o.left+"px",s.top=o.top+"px",s.width=t.characterWidth+"px",s.height=t.lineHeight+"px")}}for(;this.cursors.length>i;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),e.Cursor=o}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/event"),s=t("./lib/event_emitter").EventEmitter,a=function(t){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(a.prototype);var c=function(t,e){a.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=r.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(c,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,t>32768?(this.coeff=32768/t,t=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(c.prototype);var l=function(t,e){a.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(l.prototype),e.ScrollBar=c,e.ScrollBarV=c,e.ScrollBarH=l,e.VScrollBar=c,e.HScrollBar=l}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,e,n){"use strict";var i=t("./lib/event"),r=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.window=e||window};(function(){this.schedule=function(t){if(this.changes=this.changes|t,!this.pending&&this.changes){this.pending=!0;var e=this;i.nextFrame(function(){e.pending=!1;for(var t;t=e.changes;)e.changes=0,e.onRender(t)},this.window)}}}).call(r.prototype),e.RenderLoop=r}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,n){var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),s=t("../lib/useragent"),a=t("../lib/event_emitter").EventEmitter,c=0,l=e.FontMetrics=function(t){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),c||this.$testFractionalRect(),this.$measureNode.innerHTML=o.stringRepeat("X",c),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){i.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var t=r.createElement("div");this.$setMeasureNodeStyles(t.style),t.style.width="0.2px",document.documentElement.appendChild(t);var e=t.getBoundingClientRect().width;c=e>0&&e<1?50:100,t.parentNode.removeChild(t)},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",s.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(){var t=this.$measureSizes();if(t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=setInterval(function(){t.checkForSizeChanges()},500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===c){var t=null;try{t=this.$measureNode.getBoundingClientRect()}catch(e){t={width:0,height:0}}var e={height:t.height,width:t.width/c}}else var e={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/c};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.innerHTML=o.stringRepeat(t,c),this.$main.getBoundingClientRect().width/c},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(l.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./config"),s=t("./lib/useragent"),a=t("./layer/gutter").Gutter,c=t("./layer/marker").Marker,l=t("./layer/text").Text,u=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,d=t("./scrollbar").VScrollBar,f=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,g=t("./lib/event_emitter").EventEmitter;r.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}',"ace_editor.css");var m=function(t,e){var n=this;this.container=t||r.createElement("div"),this.$keepTextAreaAtCursor=!s.isOldIE,r.addCssClass(this.container,"ace_editor"),this.setTheme(e),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new c(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new c(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(t,e,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,i){i-=this.$extraHeight||0;var r=0,o=this.$size,s={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return i&&(t||o.height!=i)&&(o.height=i,r|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),n&&(t||o.width!=n)&&(r|=this.CHANGE_SIZE,o.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,this.scrollBarH.element.style.left=this.scroller.style.left=e+"px",o.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(r|=this.CHANGE_FULL)),o.$dirty=!n||!i,r&&this._signal("resize",s),r},this.onGutterResize=function(){var t=this.$showGutter?this.$gutter.offsetWidth:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var t=this.$cursorLayer.$pixelPos,e=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,t=this.$cursorLayer.getPixelPosition(n,!0),e*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=t.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=e+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=r.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var t=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;e-=t.offset;var i=this.textarea.style,r=this.lineHeight;if(e<0||e>t.height-r)return void(i.top=i.left="0");var o=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");o*=this.session.$getStringScreenWidth(s)[0]+2,r+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-o&&(n=this.$size.scrollerWidth-o),n+=this.gutterWidth,i.height=r+"px",i.width=o+"px",i.left=Math.min(n,this.$size.scrollerWidth-o)+"px",i.top=Math.min(e,this.$size.height-r)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,i){var r=this.scrollMargin;r.top=0|t,r.bottom=0|e,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!t&&!e)return void(this.$changes|=t);if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}return t&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):t&this.CHANGE_SCROLL?(t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(t&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),void this._signal("afterRender"))},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=t>e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,i=this.session.getScreenLength(),r=i*this.lineHeight,o=this.$getLongestLine(),s=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==s;a&&(this.$horizScroll=s,this.scrollBarH.setVisible(s));var c=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=this.scrollTop%this.lineHeight,u=e.scrollerHeight+this.lineHeight,h=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=h;var d=this.scrollMargin;this.session.setScrollTop(Math.max(-d.top,Math.min(this.scrollTop,r-e.scrollerHeight+d.bottom))),this.session.setScrollLeft(Math.max(-d.left,Math.min(this.scrollLeft,o+2*this.$padding-e.scrollerWidth+d.right)));var f=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-r+h<0||this.scrollTop>d.top),p=c!==f;p&&(this.$vScroll=f,this.scrollBarV.setVisible(f));var g,m,v=Math.ceil(u/this.lineHeight)-1,y=Math.max(0,Math.round((this.scrollTop-l)/this.lineHeight)),b=y+v,w=this.lineHeight;y=t.screenToDocumentRow(y,0);var _=t.getFoldLine(y);_&&(y=_.start.row),g=t.documentToScreenRow(y,0),m=t.getRowLength(y)*w,b=Math.min(t.screenToDocumentRow(b,0),t.getLength()-1),u=e.scrollerHeight+t.getRowLength(b)*w+m,l=this.scrollTop-g*w;var x=0;return this.layerConfig.width!=o&&(x=this.CHANGE_H_SCROLL),(a||p)&&(x=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),p&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:y,firstRowScreen:g,lastRow:b,lineHeight:w,characterWidth:this.characterWidth,minHeight:u,maxHeight:r,offset:l,gutterOffset:w?Math.max(0,Math.ceil((l+e.height-e.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},x},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1)&&!(e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(t),r=i.left,o=i.top,s=n&&n.top||0,a=n&&n.bottom||0,c=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;c+s>o?(e&&c+s>o+this.lineHeight&&(o-=e*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):c+this.$size.scrollerHeight-a<o+this.lineHeight&&(e&&c+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=e*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight));var l=this.scrollLeft;l>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):l+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&r-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(e||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(t,e){var n=0,i=this.STEPS,r=[];for(n=0;n<i;++n)r.push(function(t,e,n){return n*(Math.pow(t-1,3)+1)+e}(n/this.STEPS,t,e-t));return r},this.scrollToLine=function(t,e,n,i){var r=this.$cursorLayer.getPixelPosition({row:t,column:0}),o=r.top;e&&(o-=this.$size.scrollerHeight/2);var s=this.scrollTop;this.session.setScrollTop(o),!1!==n&&this.animateScrolling(s,i)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(t!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(t=r[0])==n)return}var o=i.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval(function(){o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,e&&e())},10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=t+this.scrollLeft-n.left-this.$padding,r=i/this.characterWidth,o=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:o,column:s,side:r-s>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=t+this.scrollLeft-n.left-this.$padding,r=Math.round(i/this.characterWidth),o=(e+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(o,Math.max(r,0),i)},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(t,e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,t)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth)),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(t){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(r.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(t,e){function n(n){if(i.$themeId!=t)return e&&e();if(!n||!n.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");r.importCssString(n.cssText,n.cssClass,i.container.ownerDocument),i.theme&&r.removeCssClass(i.container,i.theme.cssClass);var o="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&o!=i.$padding&&i.setPadding(o),i.$theme=n.cssClass,i.theme=n,r.addCssClass(i.container,n.cssClass),r.setCssClass(i.container,"ace_dark",n.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:n}),e&&e()}var i=this;if(this.$themeId=t,i._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)n(t);else{var s=t||this.$options.theme.initialValue;o.loadModule(["theme",s],n)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){r.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){r.removeCssClass(this.container,t)},this.setCursorStyle=function(t){this.scroller.style.cursor!=t&&(this.scroller.style.cursor=t)},this.setMouseCursor=function(t){this.scroller.style.cursor=t},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),o.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t)},initialValue:!0},showLineNumbers:{set:function(t){this.$gutterLayer.setShowLineNumbers(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){if(!this.$gutterLineHighlight)return this.$gutterLineHighlight=r.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight);this.$gutterLineHighlight.style.display=t?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),e.VirtualRenderer=m}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,e,n){"use strict";function i(t,e){var n=e.src;s.qualifyURL(t);try{return new Blob([n],{type:"application/javascript"})}catch(t){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new i;return r.append(n),r.getBlob("application/javascript")}}function r(t,e){var n=i(t,e),r=window.URL||window.webkitURL,o=r.createObjectURL(n);return new Worker(o)}var o=t("../lib/oop"),s=t("../lib/net"),a=t("../lib/event_emitter").EventEmitter,c=t("../config"),l=function(e,n,i,o,s){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),c.get("packaged")||!t.toUrl)o=o||c.moduleUrl(n.id,"worker");else{var a=this.$normalizePath;o=o||a(t.toUrl("ace/worker/worker.js",null,"_"));var l={};e.forEach(function(e){l[e]=a(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}this.$worker=r(o,n),s&&this.send("importScripts",s),this.$worker.postMessage({init:!0,tlns:l,module:n.id,classname:i}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,a),this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return s.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,e.push(i)}this.send(t,e)},this.emit=function(t,e){try{this.$worker.postMessage({event:t,data:{data:e.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(l.prototype);var u=function(t,e,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var i=null,r=!1,o=Object.create(a),s=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(t){s.messageBuffer.push(t),i&&(r?setTimeout(l):l())},this.setEmitSync=function(t){r=t};var l=function(){var t=s.messageBuffer.shift();t.command?i[t.command].apply(i,t.args):t.event&&o._signal(t.event,t.data)};o.postMessage=function(t){s.onMessage({data:t})},o.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},o.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},c.loadModule(["worker",e],function(t){for(i=new t[n](o);s.messageBuffer.length;)l()})};u.prototype=l.prototype,e.UIWorkerClient=u,e.WorkerClient=l,e.createWorker=r}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,e,n){"use strict";var i=t("./range").Range,r=t("./lib/event_emitter").EventEmitter,o=t("./lib/oop"),s=function(t,e,n,i,r,o){var s=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;var a=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var i=e.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),t.others.push(i)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,r=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,o=e.start.column-this.pos.column;if(this.updateAnchors(t),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],c={row:a.row,column:a.column+o};this.doc.insertMergedLines(c,t.lines)}else if("remove"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],c={row:a.row,column:a.column+o};this.doc.remove(new i(c.row,c.column,c.row,c.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,r){e.removeMarker(n.markerId),n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),e.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,n){function i(t,e){return t.row==e.row&&t.column==e.column}function r(t){var e=t.domEvent,n=e.altKey,r=e.shiftKey,a=e.ctrlKey,c=t.getAccelKey(),l=t.getButton();if(a&&s.isMac&&(l=e.button),t.editor.inMultiSelectMode&&2==l)return void t.editor.textInput.onContextMenu(t.domEvent);if(!a&&!n&&!c)return void(0===l&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode());if(0===l){var u,h=t.editor,d=h.selection,f=h.inMultiSelectMode,p=t.getDocumentPosition(),g=d.getCursor(),m=t.inSelection()||d.isEmpty()&&i(p,g),v=t.x,y=t.y,b=function(t){v=t.clientX,y=t.clientY},w=h.session,_=h.renderer.pixelToScreenCoordinates(v,y),x=_;if(h.$mouseHandler.$enableJumpToDef)a&&n||c&&n?u=r?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(c&&!n){if(u="add",!f&&r)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&s.isMac&&e.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!f&&m)return;if(!f){var E=d.toOrientedRange();h.addSelectionMarker(E)}var A=d.rangeList.rangeAtPoint(p);h.$blockScrolling++,h.inVirtualSelectionMode=!0,r&&(A=null,E=d.ranges[0]||E,h.removeSelectionMarker(E)),h.once("mouseup",function(){var t=d.toOrientedRange();A&&t.isEmpty()&&i(A.cursor,t.cursor)?d.substractPoint(t.cursor):(r?d.substractPoint(E.cursor):E&&(h.removeSelectionMarker(E),d.addRange(E)),d.addRange(t)),h.$blockScrolling--,h.inVirtualSelectionMode=!1})}else if("block"==u){t.stop(),h.inVirtualSelectionMode=!0;var C,S=[],M=function(){var t=h.renderer.pixelToScreenCoordinates(v,y),e=w.screenToDocumentPosition(t.row,t.column,t.offsetX);i(x,t)&&i(e,d.lead)||(x=t,h.$blockScrolling++,h.selection.moveToPosition(e),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(S),S=d.rectangularRangeBlock(x,_),h.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=h.$mouseHandler.$clickSelection.clone()),S.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers(),h.$blockScrolling--)};h.$blockScrolling++,f&&!c?d.toSingleRange():!f&&c&&(C=d.toOrientedRange(),h.addSelectionMarker(C)),r?_=w.documentToScreenPosition(d.lead):d.moveToPosition(p),h.$blockScrolling--,x={row:-1,column:-1};var T=function(t){clearInterval(F),h.removeSelectionMarkers(S),S.length||(S=[d.toOrientedRange()]),h.$blockScrolling++,C&&(h.removeSelectionMarker(C),d.toSingleRange(C));for(var e=0;e<S.length;e++)d.addRange(S[e]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null,h.$blockScrolling--},k=M;o.capture(h.container,b,T);var F=setInterval(function(){k()},20);return t.preventDefault()}}}var o=t("../lib/event"),s=t("../lib/useragent");e.onMouseDown=r}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var i=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new i(e.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,e,n){function i(t,e,n){return g.$options.wrap=!0,g.$options.needle=e,g.$options.backwards=-1==n,g.find(t)}function r(t,e){return t.row==e.row&&t.column==e.column}function o(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",u),t.commands.addCommands(f.defaultCommands),s(t))}function s(t){function e(e){i&&(t.renderer.setMouseCursor(""),i=!1)}var n=t.textInput.getElement(),i=!1;h.addListener(n,"keydown",function(n){var r=18==n.keyCode&&!(n.ctrlKey||n.shiftKey||n.metaKey);t.$blockSelectEnabled&&r?i||(t.renderer.setMouseCursor("crosshair"),i=!0):i&&e()}),h.addListener(n,"keyup",e),h.addListener(n,"blur",e)}var a=t("./range_list").RangeList,c=t("./range").Range,l=t("./selection").Selection,u=t("./mouse/multi_select_handler").onMouseDown,h=t("./lib/event"),d=t("./lib/lang"),f=t("./commands/multi_select_commands");e.commands=f.defaultCommands.concat(f.multiSelectCommands);var p=t("./search").Search,g=new p,m=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var i=this.rangeList.add(t);return this.$onAddRange(t),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length?this.$onRemoveRange(t):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var n=t.length;n--;){var i=this.ranges.indexOf(t[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=c.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var n=this.getRange(),i=this.isBackwards(),r=n.start.row,o=n.end.row;if(r==o){if(i)var s=n.end,a=n.start;else var s=n.start,a=n.end;return this.addRange(c.fromPoints(a,a)),void this.addRange(c.fromPoints(s,s))}var l=[],u=this.getLineRange(r,!0);u.start.column=n.start.column,l.push(u);for(var h=r+1;h<o;h++)l.push(this.getLineRange(h,!0));u=this.getLineRange(o,!0),u.end.column=n.end.column,l.push(u),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=c.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var i=this.session.documentToScreenPosition(this.selectionLead),r=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(i,r).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,n){var i=[],o=t.column<e.column;if(o)var s=t.column,a=e.column,l=t.offsetX,u=e.offsetX;else var s=e.column,a=t.column,l=e.offsetX,u=t.offsetX;var h=t.row<e.row;if(h)var d=t.row,f=e.row;else var d=e.row,f=t.row;s<0&&(s=0),d<0&&(d=0),d==f&&(n=!0);for(var p=d;p<=f;p++){var g=c.fromPoints(this.session.screenToDocumentPosition(p,s,l),this.session.screenToDocumentPosition(p,a,u));if(g.isEmpty()){if(m&&r(g.end,m))break;var m=g.end}g.cursor=o?g.start:g.end,i.push(g)}if(h&&i.reverse(),!n){for(var v=i.length-1;i[v].isEmpty()&&v>0;)v--;if(v>0)for(var y=0;i[y].isEmpty();)y++;for(var b=v;b>=y;b--)i[b].isEmpty()&&i.splice(b,1)}return i}}.call(l.prototype);var v=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var i=t[n];if(i.marker){this.session.removeMarker(i.marker);var r=e.indexOf(i);-1!=r&&e.splice(r,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,n=t.editor;if(n.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?i=n.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?i=n.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(n.exitMultiSelectMode(),i=e.exec(n,t.args||{})):i=e.multiSelectAction(n,t.args||{});else{var i=e.exec(n,t.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var i,r=n&&n.keepOrder,o=1==n||n&&n.$byLines,s=this.session,a=this.selection,c=a.rangeList,u=(r?a:c).ranges;if(!u.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var h=a._eventRegistry;a._eventRegistry={};var d=new l(s);this.inVirtualSelectionMode=!0;for(var f=u.length;f--;){if(o)for(;f>0&&u[f].start.row==u[f-1].end.row;)f--;d.fromOrientedRange(u[f]),d.index=f,this.selection=s.selection=d;var p=t.exec?t.exec(this,e||{}):t(this,e||{});i||void 0===p||(i=p),d.toOrientedRange(u[f])}d.detach(),this.selection=s.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=h,a.mergeOverlappingRanges();var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],i=0;i<e.length;i++)n.push(this.session.getTextRange(e[i]));var r=this.session.getDocument().getNewLineCharacter();t=n.join(r),t.length==(n.length-1)*r.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var i=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row==e.row&&this.session.$clipPositionToDocument(i.row,i.column).column==e.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(t,e,n){if(e=e||{},e.needle=t||e.needle,void 0==e.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(i)}this.$search.set(e);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var s=r.length;s--;)o.addRange(r[s],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),this.$blockScrolling-=1,r.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(r.row+t,r.column);if(n.isEmpty())var s=o;else var a=this.session.documentToScreenPosition(i?n.end:n.start),s=this.session.screenToDocumentPosition(a.row+t,a.column);if(i){var l=c.fromPoints(o,s);l.cursor=l.start}else{var l=c.fromPoints(s,o);l.cursor=l.end}if(l.desiredColumn=r.column,this.selection.inMultiSelectMode){if(e)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(l),u&&this.selection.substractPoint(u)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,i=n.ranges,r=i.length;r--;){var o=i[r];if(o.isEmpty()){var s=e.getWordRange(o.start.row,o.start.column);o.start.row=s.start.row,o.start.column=s.start.column,o.end.row=s.end.row,o.end.column=s.end.column}}n.mergeOverlappingRanges();for(var a=[],r=i.length;r--;){var o=i[r];a.unshift(e.getTextRange(o))}t<0?a.unshift(a.pop()):a.push(a.shift());for(var r=i.length;r--;){var o=i[r],s=o.clone();e.replace(o,a[r]),o.start.row=s.start.row,o.start.column=s.start.column}},this.selectMore=function(t,e,n){var r=this.session,o=r.multiSelect,s=o.toOrientedRange();if(!s.isEmpty()||(s=r.getWordRange(s.start.row,s.start.column),s.cursor=-1==t?s.start:s.end,this.multiSelect.addRange(s),!n)){var a=r.getTextRange(s),c=i(r,a,t);c&&(c.cursor=-1==t?c.start:c.end,this.$blockScrolling+=1,this.session.unfold(c),this.multiSelect.addRange(c),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(s.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,i=-1,r=n.filter(function(t){if(t.cursor.row==i)return!0;i=t.cursor.row});if(n.length&&r.length!=n.length-1){r.forEach(function(t){e.substractPoint(t.cursor)});var o=0,s=1/0,a=n.map(function(e){var n=e.cursor,i=t.getLine(n.row),r=i.substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>o&&(o=n.column),r<s&&(s=r),r});n.forEach(function(e,n){var i=e.cursor,r=o-i.column,l=a[n]-s;r>l?t.insert(i,d.stringRepeat(" ",r-l)):t.remove(new c(i.row,i.column,i.row,i.column-r+l)),e.start.column=e.end.column=o,e.start.row=e.end.row=i.row,e.cursor=e.end}),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),u=l.start.row,h=l.end.row,f=u==h;if(f){var p,g=this.session.getLength();do{p=this.session.getLine(h)}while(/[=:]/.test(p)&&++h<g);do{p=this.session.getLine(u)}while(/[=:]/.test(p)&&--u>0);u<0&&(u=0),h>=g&&(h=g-1)}var m=this.session.removeFullLines(u,h);m=this.$reAlignText(m,f),this.session.insert({row:u,column:0},m.join("\n")+"\n"),f||(l.start.column=0,l.end.column=m[m.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(t,e){function n(t){return d.stringRepeat(" ",t)}function i(t){return t[2]?n(s)+t[2]+n(a-t[2].length+c)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function r(t){return t[2]?n(s+a-t[2].length)+t[2]+n(c," ")+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function o(t){return t[2]?n(s)+t[2]+n(c)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}var s,a,c,l=!0,u=!0;return t.map(function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==s?(s=e[1].length,a=e[2].length,c=e[3].length,e):(s+a+c!=e[1].length+e[2].length+e[3].length&&(u=!1),s!=e[1].length&&(l=!1),s>e[1].length&&(s=e[1].length),a<e[2].length&&(a=e[2].length),c>e[3].length&&(c=e[3].length),e):[t]}).map(e?i:l?u?r:i:o)}}).call(v.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=o,t("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(t){o(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",u)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",u))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("../../range").Range,r=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var r=/\S/,o=t.getLine(e),s=o.search(r);if(-1!=s){for(var a=n||o.length,c=t.getLength(),l=e,u=e;++e<c;){var h=t.getLine(e).search(r);if(-1!=h){if(h<=s)break;u=e}}if(u>l){var d=t.getLine(u).length;return new i(l,a,u,d)}}},this.openingBracketBlock=function(t,e,n,r,o){var s={row:n,column:r+1},a=t.$findClosingBracket(e,s,o);if(a){var c=t.foldWidgets[a.row];return null==c&&(c=t.getFoldWidget(a.row)),"start"==c&&a.row>s.row&&(a.row--,a.column=t.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(t,e,n,r,o){var s={row:n,column:r},a=t.$findOpeningBracket(e,s);if(a)return a.column++,s.column--,i.fromPoints(a,s)}}).call(r.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t("../lib/dom").importCssString(e.cssText,e.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(t,e,n){"use strict";function i(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=(t("./lib/oop"),t("./lib/dom"));t("./range").Range;(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets?this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0:0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var i=t.data,r=i.start.row,o=i.end.row,s="add"==t.action,a=r+1;a<o;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[r]?n[o].hidden=s:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=s))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var n=t.start.row,i=t.end.row-n;if(0===i);else if("remove"==t.action){var r=e.splice(n+1,i);r.forEach(function(t){t&&this.removeLineWidget(t)},this),this.$updateRows()}else{var o=new Array(i);o.unshift(n,0),e.splice.apply(e,o),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach(function(t,n){if(t)for(e=!1,t.row=n;t.$oldWidget;)t.$oldWidget.row=n,t=t.$oldWidget}),e&&(this.session.lineWidgets=null)}},this.addLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t.session=this.session;var n=this.editor.renderer;t.html&&!t.el&&(t.el=r.createElement("div"),t.el.innerHTML=t.html),t.el&&(r.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,n.container.appendChild(t.el),t._inDocument=!0),t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight),null==t.rowCount&&(t.rowCount=t.pixelHeight/n.layerConfig.lineHeight);var i=this.session.getFoldAt(t.row,0);if(t.$fold=i,i){var o=this.session.lineWidgets;t.row!=i.end.row||o[i.start.row]?t.hidden=!0:o[i.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(t){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,i=e.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,e.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<r&&(r=s.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var s=r;s<=o;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,e.container.appendChild(a.el));var c=e.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(c+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=c-n.offset+"px";var l=a.coverGutter?0:e.gutterWidth;a.fixedWidth||(l-=e.scrollLeft),a.el.style.left=l+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=e.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),e.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(t,e,n){"use strict";function i(t,e,n){for(var i=0,r=t.length-1;i<=r;){var o=i+r>>1,s=n(e,t[o]);if(s>0)i=o+1;else{if(!(s<0))return o;r=o-1}}return-(i+1)}function r(t,e,n){var r=t.getAnnotations().sort(a.comparePoints);if(r.length){var o=i(r,{row:e,column:-1},a.comparePoints);o<0&&(o=-o-1),o>=r.length?o=n>0?0:r.length-1:0===o&&n<0&&(o=r.length-1);var s=r[o];if(s&&n){if(s.row===e){do{s=r[o+=n]}while(s&&s.row===e);if(!s)return r.slice()}var c=[];e=s.row;do{c[n<0?"unshift":"push"](s),s=r[o+=n]}while(s&&s.row==e);return c.length&&c}}}var o=t("../line_widgets").LineWidgets,s=t("../lib/dom"),a=t("../range").Range;e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new o(n),n.widgetManager.attach(t));var i=t.getCursorPosition(),a=i.row,c=n.widgetManager.getWidgetsAtRow(a).filter(function(t){return"errorMarker"==t.type})[0];c?c.destroy():a-=e;var l,u=r(n,a,e);if(u){var h=u[0];i.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,i.row=h.row,l=t.renderer.$gutterLayer.$annotations[i.row]}else{if(c)return;l={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(i.row),t.selection.moveToPosition(i);var d={row:i.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},f=d.el.appendChild(s.createElement("div")),p=d.el.appendChild(s.createElement("div"));p.className="error_widget_arrow "+l.className;var g=t.renderer.$cursorLayer.getPixelPosition(i).left;p.style.left=g+t.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",f.className="error_widget "+l.className,f.innerHTML=l.text.join("<br>"),f.appendChild(s.createElement("div"));var m=function(t,e,n){if(0===e&&("esc"===n||"return"===n))return d.destroy(),{command:"null"}};d.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(d),t.off("changeSelection",d.destroy),t.off("changeSession",d.destroy),t.off("mouseup",d.destroy),t.off("change",d.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",d.destroy),t.on("changeSession",d.destroy),t.on("mouseup",d.destroy),t.on("change",d.destroy),t.session.widgetManager.addLineWidget(d),d.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},s.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var r=t("./lib/dom"),o=t("./lib/event"),s=t("./editor").Editor,a=t("./edit_session").EditSession,c=t("./undomanager").UndoManager,l=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.acequire=t,e.define=n(91),e.edit=function(t){if("string"==typeof t){var n=t;if(!(t=document.getElementById(n)))throw new Error("ace.edit can't find div #"+n)}if(t&&t.env&&t.env.editor instanceof s)return t.env.editor;var i="";if(t&&/input|textarea/i.test(t.tagName)){var a=t;i=a.value,t=r.createElement("pre"),a.parentNode.replaceChild(t,a)}else t&&(i=r.getInnerText(t),t.innerHTML="");var c=e.createEditSession(i),u=new s(new l(t));u.setSession(c);var h={document:c,editor:u,onResize:u.resize.bind(u,null)};return a&&(h.textarea=a),o.addListener(window,"resize",h.onResize),u.on("destroy",function(){o.removeListener(window,"resize",h.onResize),h.editor.container.env=null}),u.container.env=u.env=h,u},e.createEditSession=function(t,e){var n=new a(t,e);return n.setUndoManager(new c),n},e.EditSession=a,e.UndoManager=c,e.version="1.2.9"}),function(){ace.acequire(["ace/ace"],function(t){t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t);for(var e in t)t.hasOwnProperty(e)&&(window.ace[e]=t[e])})}(),t.exports=window.ace.acequire("ace/ace")},function(t,e,n){"use strict";function i(){}function r(t){try{return t.then}catch(t){return y=t,b}}function o(t,e){try{return t(e)}catch(t){return y=t,b}}function s(t,e,n){try{t(e,n)}catch(t){return y=t,b}}function a(t){if("object"!==m(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==i&&g(t,this)}function c(t,e,n){return new t.constructor(function(r,o){var s=new a(i);s.then(r,o),l(t,new p(e,n,s))})}function l(t,e){for(;3===t._83;)t=t._18;if(a._47&&a._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);u(t,e)}function u(t,e){v(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?h(e.promise,t._18):d(e.promise,t._18));var i=o(n,t._18);i===b?d(e.promise,y):h(e.promise,i)})}function h(t,e){if(e===t)return d(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===("undefined"===typeof e?"undefined":m(e))||"function"===typeof e)){var n=r(e);if(n===b)return d(t,y);if(n===t.then&&e instanceof a)return t._83=3,t._18=e,void f(t);if("function"===typeof n)return void g(n.bind(e),t)}t._83=1,t._18=e,f(t)}function d(t,e){t._83=2,t._18=e,a._71&&a._71(t,e),f(t)}function f(t){if(1===t._75&&(l(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)l(t,t._38[e]);t._38=null}}function p(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function g(t,e){var n=!1,i=s(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,d(e,t))});n||i!==b||(n=!0,d(e,y))}var m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=n(98),y=null,b={};t.exports=a,a._47=null,a._71=null,a._44=i,a.prototype.then=function(t,e){if(this.constructor!==a)return c(this,t,e);var n=new a(i);return l(this,new p(t,e,n)),n}},function(t,e,n){"use strict";var i={};t.exports=i},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});var i=n(1),r=n.n(i),o=r.a.shape({trySubscribe:r.a.func.isRequired,tryUnsubscribe:r.a.func.isRequired,notifyNestedSubs:r.a.func.isRequired,isSubscribed:r.a.func.isRequired}),s=r.a.shape({subscribe:r.a.func.isRequired,dispatch:r.a.func.isRequired,getState:r.a.func.isRequired})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":v(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":v(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function a(){}function c(t,e){var n={run:function(i){try{var r=t(e.getState(),i);(r!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=r,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function l(t){var e,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=l.getDisplayName,d=void 0===u?function(t){return"ConnectAdvanced("+t+")"}:u,v=l.methodName,_=void 0===v?"connectAdvanced":v,x=l.renderCountProp,E=void 0===x?void 0:x,A=l.shouldHandleStateChanges,C=void 0===A||A,S=l.storeKey,M=void 0===S?"store":S,T=l.withRef,k=void 0!==T&&T,F=s(l,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=M+"Subscription",P=b++,L=(e={},e[M]=m.a,e[O]=m.b,e),R=(n={},n[O]=m.b,n);return function(e){f()("function"==typeof e,"You must pass a component to the function returned by "+_+". Instead received "+JSON.stringify(e));var n=e.displayName||e.name||"Component",s=d(n),l=y({},F,{getDisplayName:d,methodName:_,renderCountProp:E,shouldHandleStateChanges:C,storeKey:M,withRef:k,displayName:s,wrappedComponentName:n,WrappedComponent:e}),u=function(n){function u(t,e){i(this,u);var o=r(this,n.call(this,t,e));return o.version=P,o.state={},o.renderCount=0,o.store=t[M]||e[M],o.propsMode=Boolean(t[M]),o.setWrappedInstance=o.setWrappedInstance.bind(o),f()(o.store,'Could not find "'+M+'" in either the context or props of "'+s+'". Either wrap the root component in a <Provider>, or explicitly pass "'+M+'" as a prop to "'+s+'".'),o.initSelector(),o.initSubscription(),o}return o(u,n),u.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[O]=e||this.context[O],t},u.prototype.componentDidMount=function(){C&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},u.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},u.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},u.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=a,this.store=null,this.selector.run=a,this.selector.shouldComponentUpdate=!1},u.prototype.getWrappedInstance=function(){return f()(k,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+_+"() call."),this.wrappedInstance},u.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},u.prototype.initSelector=function(){var e=t(this.store.dispatch,l);this.selector=c(e,this.store),this.selector.run(this.props)},u.prototype.initSubscription=function(){if(C){var t=(this.propsMode?this.props:this.context)[O];this.subscription=new g.a(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},u.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(w)):this.notifyNestedSubs()},u.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},u.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},u.prototype.addExtraProps=function(t){if(!k&&!E&&(!this.propsMode||!this.subscription))return t;var e=y({},t);return k&&(e.ref=this.setWrappedInstance),E&&(e[E]=this.renderCount++),this.propsMode&&this.subscription&&(e[O]=this.subscription),e},u.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return Object(p.createElement)(e,this.addExtraProps(t.props))},u}(p.Component);return u.WrappedComponent=e,u.displayName=s,u.childContextTypes=R,u.contextTypes=L,u.propTypes=L,h()(u,e)}}e.a=l;var u=n(46),h=n.n(u),d=n(3),f=n.n(d),p=n(0),g=(n.n(p),n(114)),m=n(44),v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},b=0,w={}},function(t,e,n){var i,r,o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,a){"object"===o(e)&&"undefined"!==typeof t?t.exports=a():(i=a,void 0!==(r="function"===typeof i?i.call(e,n,e,t):i)&&(t.exports=r))}(0,function(){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,i=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,o=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,a=s&&s(Object);return function c(l,u,h){if("string"!==typeof u){if(a){var d=s(u);d&&d!==a&&c(l,d,h)}var f=i(u);r&&(f=f.concat(r(u)));for(var p=0;p<f.length;++p){var g=f[p];if(!t[g]&&!e[g]&&(!h||!h[g])){var m=o(u,g);try{n(l,g,m)}catch(t){}}}return l}return l}})},function(t,e,n){"use strict";function i(t,e,n){function c(){y===v&&(y=v.slice())}function l(){return m}function u(t){if("function"!==typeof t)throw new Error("Expected listener to be a function.");var e=!0;return c(),y.push(t),function(){if(e){e=!1,c();var n=y.indexOf(t);y.splice(n,1)}}}function h(t){if(!Object(r.a)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,m=g(m,t)}finally{b=!1}for(var e=v=y,n=0;n<e.length;n++){(0,e[n])()}return t}function d(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");g=t,h({type:a.INIT})}function f(){var t,e=u;return t={subscribe:function(t){function n(){t.next&&t.next(l())}if("object"!==("undefined"===typeof t?"undefined":s(t)))throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:e(n)}}},t[o.a]=function(){return this},t}var p;if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var g=t,m=e,v=[],y=v,b=!1;return h({type:a.INIT}),p={dispatch:h,subscribe:u,getState:l,replaceReducer:d},p[o.a]=f,p}n.d(e,"a",function(){return a}),e.b=i;var r=n(26),o=n(126),s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a={INIT:"@@redux/INIT"}},function(t,e,n){"use strict";var i=n(119),r=i.a.Symbol;e.a=r},function(t,e,n){"use strict"},function(t,e,n){"use strict";function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}e.a=i},function(t,e,n){"use strict";function i(t){return function(e,n){function i(){return r}var r=t(e,n);return i.dependsOnOwnProps=!1,i}}function r(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function o(t,e){return function(e,n){var i=(n.displayName,function(t,e){return i.dependsOnOwnProps?i.mapToProps(t,e):i.mapToProps(t)});return i.dependsOnOwnProps=!0,i.mapToProps=function(e,n){i.mapToProps=t,i.dependsOnOwnProps=r(t);var o=i(e,n);return"function"===typeof o&&(i.mapToProps=o,i.dependsOnOwnProps=r(o),o=i(e,n)),o},i}}e.a=i,e.b=o;n(52)},function(t,e,n){"use strict";n(26),n(25)},function(t,e,n){"use strict";var i=(n(54),n(57),n(58),n(30),n(16));n.d(e,"a",function(){return i.a});var r=(n(60),n(61),n(18));n.d(e,"b",function(){return r.a});n(62)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),c=n(0),l=n.n(c),u=n(1),h=n.n(u),d=n(137),f=n.n(d),p=n(16),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){var n,o,s;i(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,t.call.apply(t,[this].concat(c))),o.history=f()(o.props),s=n,r(o,s)}return o(e,t),e.prototype.componentWillMount=function(){a()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},e.prototype.render=function(){return l.a.createElement(p.a,{history:this.history,children:this.props.children})},e}(l.a.Component);m.propTypes={initialEntries:h.a.array,initialIndex:h.a.number,getUserConfirmation:h.a.func,keyLength:h.a.number,children:h.a.node},e.a=m},function(t,e,n){"use strict";function i(t){return"/"===t.charAt(0)}function r(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],s=t&&i(t),a=e&&i(e),c=s||a;if(t&&i(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var l=void 0;if(o.length){var u=o[o.length-1];l="."===u||".."===u||""===u}else l=!1;for(var h=0,d=o.length;d>=0;d--){var f=o[d];"."===f?r(o,d):".."===f?(r(o,d),h++):h&&(r(o,d),h--)}if(!c)for(;h--;h)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return l&&"/"!==p.substr(-1)&&(p+="/"),p}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){"use strict";function i(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return i(t,e[n])});var n="undefined"===typeof t?"undefined":o(t);if(n!==("undefined"===typeof e?"undefined":o(e)))return!1;if("object"===n){var r=t.valueOf(),s=e.valueOf();if(r!==t||s!==e)return i(r,s);var a=Object.keys(t),c=Object.keys(e);return a.length===c.length&&a.every(function(n){return i(t[n],e[n])})}return!1}Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":r(t)};e.default=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":d(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(3),h=n.n(u),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(a.a.Component);f.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},f.defaultProps={when:!0},f.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired},e.a=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(2),h=n.n(u),d=n(3),f=n.n(d),p=n(138),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=Object(p.a)(t.to),n=Object(p.a)(this.props.to);if(Object(p.b)(e,n))return void h()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},e.prototype.perform=function(){var t=this.context.router.history,e=this.props,n=e.push,i=e.to;n?t.push(i):t.replace(i)},e.prototype.render=function(){return null},e}(a.a.Component);m.propTypes={push:l.a.bool,from:l.a.string,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired}).isRequired,staticContext:l.a.object}).isRequired},e.a=m},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return u});var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},o=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},s=function(t,e){return e(window.confirm(t))},a=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},c=function(){return-1===window.navigator.userAgent.indexOf("Trident")},l=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},u=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":v(e))&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":v(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),c=n.n(a),l=n(3),u=n.n(l),h=n(0),d=n.n(h),f=n(1),p=n.n(f),g=n(13),m=(n.n(g),n(16)),v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},b=function(t){var e=t.pathname,n=void 0===e?"/":e,i=t.search,r=void 0===i?"":i,o=t.hash,s=void 0===o?"":o;return{pathname:n,search:"?"===r?"":r,hash:"#"===s?"":s}},w=function(t,e){return t?y({},e,{pathname:Object(g.addLeadingSlash)(t)+e.pathname}):e},_=function(t,e){if(!t)return e;var n=Object(g.addLeadingSlash)(t);return 0!==e.pathname.indexOf(n)?e:y({},e,{pathname:e.pathname.substr(n.length)})},x=function(t){return"string"===typeof t?Object(g.parsePath)(t):b(t)},E=function(t){return"string"===typeof t?t:Object(g.createPath)(t)},A=function(t){return function(){u()(!1,"You cannot %s with <StaticRouter>",t)}},C=function(){},S=function(t){function e(){var n,i,s;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=i=o(this,t.call.apply(t,[this].concat(c))),i.createHref=function(t){return Object(g.addLeadingSlash)(i.props.basename+E(t))},i.handlePush=function(t){var e=i.props,n=e.basename,r=e.context;r.action="PUSH",r.location=w(n,x(t)),r.url=E(r.location)},i.handleReplace=function(t){var e=i.props,n=e.basename,r=e.context;r.action="REPLACE",r.location=w(n,x(t)),r.url=E(r.location)},i.handleListen=function(){return C},i.handleBlock=function(){return C},s=n,o(i,s)}return s(e,t),e.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},e.prototype.componentWillMount=function(){c()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},e.prototype.render=function(){var t=this.props,e=t.basename,n=(t.context,t.location),r=i(t,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:_(e,x(n)),push:this.handlePush,replace:this.handleReplace,go:A("go"),goBack:A("goBack"),goForward:A("goForward"),listen:this.handleListen,block:this.handleBlock};return d.a.createElement(m.a,y({},r,{history:o}))},e}(d.a.Component);S.propTypes={basename:p.a.string,context:p.a.object.isRequired,location:p.a.oneOfType([p.a.string,p.a.object])},S.defaultProps={basename:"",location:"/"},S.childContextTypes={router:p.a.object.isRequired},e.a=S},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(2),h=n.n(u),d=n(3),f=n.n(d),p=n(18),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Switch> outside a <Router>")},e.prototype.componentWillReceiveProps=function(t){h()(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),h()(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},e.prototype.render=function(){var t=this.context.router.route,e=this.props.children,n=this.props.location||t.location,i=void 0,r=void 0;return a.a.Children.forEach(e,function(e){if(a.a.isValidElement(e)){var o=e.props,s=o.path,c=o.exact,l=o.strict,u=o.sensitive,h=o.from,d=s||h;null==i&&(r=e,i=d?Object(p.a)(n.pathname,{path:d,exact:c,strict:l,sensitive:u}):t.match)}}),i?a.a.cloneElement(r,{location:n,computedMatch:i}):null},e}(a.a.Component);m.contextTypes={router:l.a.shape({route:l.a.object.isRequired}).isRequired},m.propTypes={children:l.a.node,location:l.a.object},e.a=m},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var r=n(0),o=n.n(r),s=n(1),a=n.n(s),c=n(46),l=n.n(c),u=n(30),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},d=function(t){var e=function(e){var n=e.wrappedComponentRef,r=i(e,["wrappedComponentRef"]);return o.a.createElement(u.a,{render:function(e){return o.a.createElement(t,h({},r,e,{ref:n}))}})};return e.displayName="withRouter("+(t.displayName||t.name)+")",e.WrappedComponent=t,e.propTypes={wrappedComponentRef:a.a.func},l()(e,t)};e.a=d},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,i=e.payload;return n===o?r({},t,{location:i}):t}n.d(e,"a",function(){return o}),e.b=i;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o="@@router/LOCATION_CHANGE",s={location:null}},function(t,e,n){"use strict";function i(t){return function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return{type:r,payload:{method:t,args:n}}}}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r="@@router/CALL_HISTORY_METHOD",o=i("push");i("replace"),i("go"),i("goBack"),i("goForward")},function(t,e,n){"use strict";var i=n(12),r=n(147),o=n.n(r),s=n(66),a=n(153),c=n(189),l=n(84),u=Object(s.a)(),h={},d=[],f=[u,o.a,l.b],p=i.d.apply(void 0,[i.a.apply(void 0,f)].concat(d))(i.e),g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=p(a.a,t);return e.runSaga=u.run(c.a),e}();e.a=g},function(t,e,n){"use strict";var i=n(148),r=(n(68),n(8),n(19),n(70),n(4));n.d(e,"b",function(){return r.j});n(6),n(32),n(152);e.a=i.a},function(t,e,n){"use strict";function i(t){try{o(),t()}finally{s()}}function r(t){c.push(t),l||(o(),a())}function o(){l++}function s(){l--}function a(){s();for(var t=void 0;!l&&void 0!==(t=c.shift());)i(t)}e.a=r,e.c=o,e.b=a;var c=[],l=0},function(t,e,n){"use strict";function i(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var c=void 0;r.n.iterator(t)?(c=t,t=e):(Object(r.g)(e,r.n.func,a),c=e.apply(void 0,i),Object(r.g)(c,r.n.iterator,a));var l=t,u=l.subscribe,h=l.dispatch,d=l.getState,f=l.context,p=l.sagaMonitor,g=l.logger,m=l.onError,v=Object(r.v)();p&&(p.effectTriggered=p.effectTriggered||r.r,p.effectResolved=p.effectResolved||r.r,p.effectRejected=p.effectRejected||r.r,p.effectCancelled=p.effectCancelled||r.r,p.actionDispatched=p.actionDispatched||r.r,p.effectTriggered({effectId:v,root:!0,parentEffectId:0,effect:{root:!0,saga:e,args:i}}));var y=Object(o.a)(c,u,Object(r.x)(h),d,f,{sagaMonitor:p,logger:g,onError:m},v,e.name);return p&&p.effectResolved(v,y),y}e.a=i;var r=n(4),o=n(69),s="runSaga(storeInterface, saga, ...args)",a=s+": saga argument must be a Generator function!"},function(t,e,n){"use strict";function i(t,e){for(var n in e){var i=e[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n,i)}return t}function r(t){return("*"===t?b.wildcard:c.n.array(t)?b.array:c.n.stringableFunc(t)?b.default:c.n.func(t)?b.predicate:b.default)(t)}function o(t,e,n){function i(t){o(),n(t,!0)}function r(t){s.push(t),t.cont=function(r,o){l||(Object(c.t)(s,t),t.cont=c.r,o?i(r):(t===e&&(a=r),s.length||(l=!0,n(a))))}}function o(){l||(l=!0,s.forEach(function(t){t.cont=c.r,t.cancel()}),s=[])}var s=[],a=void 0,l=!1;return r(e),{addTask:r,cancelAll:o,abort:i,getTasks:function(){return s},taskNames:function(){return s.map(function(t){return t.name})}}}function s(t){var e=t.context,n=t.fn,i=t.args;if(c.n.iterator(n))return n;var r=void 0,o=void 0;try{r=n.apply(e,i)}catch(t){o=t}return c.n.iterator(r)?r:o?Object(c.q)(function(){throw o}):Object(c.q)(function(){var t=void 0,e={done:!1,value:r},n=function(t){return{done:!0,value:t}};return function(i){return t?n(i):(t=!0,e)}}())}function a(t){function e(){et.isRunning&&!et.isCancelled&&(et.isCancelled=!0,f(y))}function n(){t._isRunning&&!t._isCancelled&&(t._isCancelled=!0,nt.cancelAll(),g(y))}function f(e,n){if(!et.isRunning)throw new Error("Trying to resume an already finished generator");try{var i=void 0;n?i=t.throw(e):e===y?(et.isCancelled=!0,f.cancel(),i=c.n.func(t.return)?t.return(y):{done:!0,value:y}):i=e===v?c.n.func(t.return)?t.return():{done:!0}:t.next(e),i.done?(et.isMainRunning=!1,et.cont&&et.cont(i.value)):b(i.value,H,"",f)}catch(t){et.isCancelled&&Z(t),et.isMainRunning=!1,et.cont(t,!0)}}function g(e,n){t._isRunning=!1,J.close(),n?(e instanceof Error&&Object.defineProperty(e,"sagaStack",{value:"at "+V+" \n "+(e.sagaStack||e.stack),configurable:!0}),tt.cont||(e instanceof Error&&K?K(e):Z(e)),t._error=e,t._isAborted=!0,t._deferredEnd&&t._deferredEnd.reject(e)):(t._result=e,t._deferredEnd&&t._deferredEnd.resolve(e)),tt.cont&&tt.cont(e,n),tt.joiners.forEach(function(t){return t.cb(e,n)}),tt.joiners=null}function b(t,e){function n(t,e){s||(s=!0,r.cancel=c.r,q&&(e?q.effectRejected(o,t):q.effectResolved(o,t)),r(t,e))}var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],o=Object(c.v)();q&&q.effectTriggered({effectId:o,parentEffectId:e,label:i,effect:t});var s=void 0;n.cancel=c.r,r.cancel=function(){if(!s){s=!0;try{n.cancel()}catch(t){Z(t)}n.cancel=c.r,q&&q.effectCancelled(o)}};var a=void 0;return c.n.promise(t)?_(t,n):c.n.helper(t)?M(w(t),o,n):c.n.iterator(t)?x(t,o,V,n):c.n.array(t)?G(t,o,n):(a=u.c.take(t))?E(a,n):(a=u.c.put(t))?A(a,n):(a=u.c.all(t))?F(a,o,n):(a=u.c.race(t))?O(a,o,n):(a=u.c.call(t))?C(a,o,n):(a=u.c.cps(t))?S(a,n):(a=u.c.fork(t))?M(a,o,n):(a=u.c.join(t))?T(a,n):(a=u.c.cancel(t))?k(a,n):(a=u.c.select(t))?P(a,n):(a=u.c.actionChannel(t))?L(a,n):(a=u.c.flush(t))?D(a,n):(a=u.c.cancelled(t))?R(a,n):(a=u.c.getContext(t))?B(a,n):(a=u.c.setContext(t))?I(a,n):n(t)}function _(t,e){var n=t[c.a];c.n.func(n)?e.cancel=n:c.n.func(t.abort)&&(e.cancel=function(){return t.abort()}),t.then(e,function(t){return e(t,!0)})}function x(t,e,n,i){a(t,N,j,U,Q,z,e,n,i)}function E(t,e){var n=t.channel,i=t.pattern,o=t.maybe;n=n||J;var s=function(t){return t instanceof Error?e(t,!0):e(Object(h.d)(t)&&!o?v:t)};try{n.take(s,r(i))}catch(t){return e(t,!0)}e.cancel=s.cancel}function A(t,e){var n=t.channel,i=t.action,r=t.resolve;Object(l.a)(function(){var t=void 0;try{t=(n?n.put:j)(i)}catch(t){if(n||r)return e(t,!0);Z(t)}if(!r||!c.n.promise(t))return e(t);_(t,e)})}function C(t,e,n){var i=t.context,r=t.fn,o=t.args,s=void 0;try{s=r.apply(i,o)}catch(t){return n(t,!0)}return c.n.promise(s)?_(s,n):c.n.iterator(s)?x(s,e,r.name,n):n(s)}function S(t,e){var n=t.context,i=t.fn,r=t.args;try{var o=function(t,n){return c.n.undef(t)?e(n):e(t,!0)};i.apply(n,r.concat(o)),o.cancel&&(e.cancel=function(){return o.cancel()})}catch(t){return e(t,!0)}}function M(t,e,n){var i=t.context,r=t.fn,o=t.args,u=t.detached,h=s({context:i,fn:r,args:o});try{Object(l.c)();var d=a(h,N,j,U,Q,z,e,r.name,u?null:c.r);u?n(d):h._isRunning?(nt.addTask(d),n(d)):h._error?nt.abort(h._error):n(d)}finally{Object(l.b)()}}function T(t,e){if(t.isRunning()){var n={task:tt,cb:e};e.cancel=function(){return Object(c.t)(t.joiners,n)},t.joiners.push(n)}else t.isAborted()?e(t.error(),!0):e(t.result())}function k(t,e){t===c.d&&(t=tt),t.isRunning()&&t.cancel(),e()}function F(t,e,n){function i(){o===r.length&&(s=!0,n(c.n.array(t)?c.f.from(p({},a,{length:r.length})):a))}var r=Object.keys(t);if(!r.length)return n(c.n.array(t)?[]:{});var o=0,s=void 0,a={},l={};r.forEach(function(t){var e=function(e,r){s||(r||Object(h.d)(e)||e===v||e===y?(n.cancel(),n(e,r)):(a[t]=e,o++,i()))};e.cancel=c.r,l[t]=e}),n.cancel=function(){s||(s=!0,r.forEach(function(t){return l[t].cancel()}))},r.forEach(function(n){return b(t[n],e,n,l[n])})}function O(t,e,n){var i=void 0,r=Object.keys(t),o={};r.forEach(function(e){var s=function(o,s){if(!i)if(s)n.cancel(),n(o,!0);else if(!Object(h.d)(o)&&o!==v&&o!==y){var a;n.cancel(),i=!0;var l=(a={},a[e]=o,a);n(c.n.array(t)?[].slice.call(p({},l,{length:r.length})):l)}};s.cancel=c.r,o[e]=s}),n.cancel=function(){i||(i=!0,r.forEach(function(t){return o[t].cancel()}))},r.forEach(function(n){i||b(t[n],e,n,o[n])})}function P(t,e){var n=t.selector,i=t.args;try{var r=n.apply(void 0,[U()].concat(i));e(r)}catch(t){e(t,!0)}}function L(t,e){var n=t.pattern,i=t.buffer,o=r(n);o.pattern=n,e(Object(h.c)(N,i||d.a.fixed(),o))}function R(t,e){e(!!et.isCancelled)}function D(t,e){t.flush(e)}function B(t,e){e(Q[t])}function I(t,e){c.s.assign(Q,t),e()}var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return c.r},j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.r,U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.r,$=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,V=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",W=arguments[8];Object(c.g)(t,c.n.iterator,m);var G=Object(c.k)(F,Object(c.w)("[...effects]","all([...effects])")),q=z.sagaMonitor,X=z.logger,K=z.onError,Y=X||c.p,Z=function(t){var e=t.sagaStack;!e&&t.stack&&(e=-1!==t.stack.split("\n")[0].indexOf(t.message)?t.stack:"Error: "+t.message+"\n"+t.stack),Y("error","uncaught at "+V,e||t.message||t)},J=Object(h.e)(N),Q=Object.create($);f.cancel=c.r;var tt=function(t,e,r,o){var s,a,l;return r._deferredEnd=null,a={},a[c.e]=!0,a.id=t,a.name=e,s="done",l={},l[s]=l[s]||{},l[s].get=function(){if(r._deferredEnd)return r._deferredEnd.promise;var t=Object(c.i)();return r._deferredEnd=t,r._isRunning||(r._error?t.reject(r._error):t.resolve(r._result)),t.promise},a.cont=o,a.joiners=[],a.cancel=n,a.isRunning=function(){return r._isRunning},a.isCancelled=function(){return r._isCancelled},a.isAborted=function(){return r._isAborted},a.result=function(){return r._result},a.error=function(){return r._error},a.setContext=function(t){Object(c.g)(t,c.n.object,Object(c.h)("task",t)),c.s.assign(Q,t)},i(a,l),a}(H,V,t,W),et={name:V,cancel:e,isRunning:!0},nt=o(V,et,g);return W&&(W.cancel=n),t._isRunning=!0,f(),tt}e.a=a;var c=n(4),l=n(67),u=n(6),h=n(8),d=n(19),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},g="function"===typeof Symbol&&"symbol"===f(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":f(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":f(t)},m="proc first argument (Saga function result) must be an iterator",v={toString:function(){return"@@redux-saga/CHANNEL_END"}},y={toString:function(){return"@@redux-saga/TASK_CANCEL"}},b={wildcard:function(){return c.o},default:function(t){return"symbol"===("undefined"===typeof t?"undefined":g(t))?function(e){return e.type===t}:function(e){return e.type===String(t)}},array:function(t){return function(e){return t.some(function(t){return r(t)(e)})}},predicate:function(t){return function(e){return t(e)}}},w=function(t){return{fn:t}}},function(t,e,n){"use strict";var i=n(149),r=n(150),o=n(151),s=n(4);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a}),n.d(e,"c",function(){return o.a});var a=function(t){return"import { "+t+" } from 'redux-saga' has been deprecated in favor of import { "+t+" } from 'redux-saga/effects'.\nThe latter will not work with yield*, as helper effects are wrapped automatically for you in fork effect.\nTherefore yield "+t+" will return task descriptor to your saga and execute next lines of code."};i.a,r.a,o.a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(9),o=n(37),s=n(38),a=n(183),c=n(185),l=n(81),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(){function t(){i(this,t),this.awm=null,this.current=null,this.locked=!1}return u(t,[{key:"init",value:function(t){var e=this;return this.awm=t,l.a.initer(t).then(function(){return e.loadUserObject()})}},{key:"loadUserObject",value:function(){var t=this,e=new a.a(this.awm);return this.awm.objectManager.user._dispose(),e.createDefault(this.awm.projector.meterToAdsumDistance(3),{placeId:Symbol("UserPlace")},Symbol("UserPositionId")).then(function(e){var n=o.a.config.device;return t.awm.objectManager.user=e,t.awm.setDeviceId(n,!1)})}},{key:"goTo",value:function(t){var e=this;null!==this.current&&this.awm.wayfindingManager.removePath(this.current);var n=this.awm.wayfindingManager.locationRepository.get(t.placeId);return this.current=new r.d(null,n),this.awm.wayfindingManager.computePath(this.current).then(function(){l.a.buildMerged(e.current.pathSections);var t=Promise.resolve(),n=!0,i=!1,r=void 0;try{for(var o,a=e.current.pathSections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;!function(n){var i=n.ground.isFloor?n.ground:null;t=t.then(function(){return s.a.setCurrentFloor(null===i?null:i.id)}),t=t.then(function(){return e.awm.cameraManager.centerOnFloor(i)}),t=t.then(function(){return e.drawPathSection(n)}),t=t.then(function(){return new Promise(function(t){setTimeout(t,1e3)})})}(c)}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t})}},{key:"drawPathSection",value:function(t){this.awm.wayfindingManager.removePathSection(t);var e=l.a.build(t);return new c.a(e,this.awm.cameraManager,this.awm.wayfindingManager.projector).draw()}}]),t}(),d=new h;e.a=d},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){g&&f&&(g=!1,f.length?p=f.concat(p):m=-1,p.length&&a())}function a(){if(!g){var t=r(s);g=!0;for(var e=p.length;e;){for(f=p,p=[];++m<e;)f&&f[m].run();m=-1,e=p.length}f=null,g=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var u,h,d=t.exports={};!function(){try{u="function"===typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"===typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,p=[],g=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new c(t,e)),1!==p.length||g||r(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return o});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.fromJSON(e)}return r(t,[{key:"reset",value:function(){}},{key:"fromJSON",value:function(e){var n=this;this.reset(),Object.keys(e).forEach(function(i){n.hasOwnProperty(i)&&(n[i]instanceof t?n[i].fromJSON(e[i]):n[i]=e[i])})}},{key:"toJSON",value:function(){var e=this,n={};return Object.keys(this).forEach(function(i){e.hasOwnProperty(i)&&(e[i]instanceof t?n[i]=e[i].toJSON():n[i]=e[i])}),n}}]),t}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"d",function(){return cn}),n.d(e,"e",function(){return tt}),n.d(e,"a",function(){return mt}),n.d(e,"b",function(){return yt}),n.d(e,"f",function(){return It}),n.d(e,"c",function(){return hn});var c=n(73),l=n(156),u=n(157),h=n.n(u),d=n(158),f=n.n(d),p=n(177),g=n.n(p),m=n(178),v=n.n(m),y=n(179),b=n.n(y),w=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},_=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),A={DRAFT:"DRAFT",PUBLISHED:"PUBLISHED"},C=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"reset",value:function(){this.endpoint=null,this.username=null,this.key=null,this.site=null,this.locale=null,this.state=A.PUBLISHED,this.logger=new l.c,this.cacheManager=null}},{key:"getEndpoint",value:function(){return this.constructor.formatApiEndpoint(this.endpoint)}},{key:"validate",value:function(){if("string"!=typeof this.endpoint)throw new TypeError("AdsumClientApi.Options.endpoint: Should be a string");if("string"!=typeof this.username)throw new TypeError("AdsumClientApi.Options.username: Should be a string");if("string"!=typeof this.key)throw new TypeError("AdsumClientApi.Options.key: Should be a string");if(!Number.isInteger(this.site))throw new TypeError("AdsumClientApi.Options.site: Should be an integer");if(this.site<=0)throw new TypeError("AdsumClientApi.Options.site: Should be positive");var t=l.a.isValidLogger(this.logger),e=t.isValid,n=t.reasons;if(!e)throw new TypeError(n.join(", "))}}],[{key:"getApiVersion",value:function(){return"2.3"}},{key:"formatApiEndpoint",value:function(t){return"/"!==t.charAt(t.length-1)?t+"/2.3":t+"2.3"}}]),e}(c.a),S=function(){var t=0;return function(){return++t}}(),M=new WeakMap,T=new h.a,k=function(){function t(){throw o(this,t),new Error("EventDispatcher couldn't be instantiated")}return E(t,null,[{key:"_getObjectId",value:function(t){return M.has(t)||M.set(t,S()),M.get(t)}},{key:"_getUniversalEventName",value:function(t,e){return t.constructor.name+e+this._getObjectId(t)}},{key:"subscribe",value:function(t,e,n){var i=this._getUniversalEventName(t,e);T.on(i,n)}},{key:"unsubscribe",value:function(t,e,n){var i=this._getUniversalEventName(t,e);T.removeListener(i,n)}},{key:"publish",value:function(t,e,n){T.emit(this._getUniversalEventName(t,e),n)}}]),t}(),F={CREATE:"CREATE",UPDATE:"UPDATE",REMOVE:"REMOVE",IDENTIFIER_WILL_CHANGE:"IDENTIFIER_WILL_CHANGE",IDENTIFIER_DID_CHANGE:"IDENTIFIER_DID_CHANGE"},O={INITIAL:"INITIAL",LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"},P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t),this.x=e,this.y=n,this.z=i}return E(t,null,[{key:"fromJSON",value:function(e){var n=new t;return n.set(e),n}}]),E(t,[{key:"set",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,z:this.z}}}]),t}(),L={INVALID:"Must be valid",SYMBOL:"Must be a Symbol"},R=function(){function t(){if(o(this,t),this.constructor===t)throw new TypeError("AbstractValidator is abstract");if(void 0===this.isValid)throw new TypeError("#isValid is abstract")}return E(t,null,[{key:"message",get:function(){return L.INVALID}}]),t}(),D=function(t){function e(t){var n;return o(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.validators=t,n}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){for(var i=0;i<this.validators.length;i++)if(this.validators[i].isValid(t,e,n))return!0;return!1}}]),e}(R),B=function(t){function e(t){var n;return o(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.validators=t,n}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){for(var i=0;i<this.validators.length;i++)if(!this.validators[i].isValid(t,e,n))return!1;return!0}}]),e}(R),I=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return null===e[n]}}]),e}(R),N=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"symbol"==x(e[n])}}],[{key:"message",get:function(){return L.SYMBOL}}]),e}(R),j=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isInteger(e[n])}}]),e}(R),U=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isFinite(e[n])&&e[n]<0}}]),e}(R),$=function(t){function e(t){var n;return o(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.validator=t,n}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return!this.validator.isValid(t,e,n)}}]),e}(R),z=function(){function t(){o(this,t)}return E(t,null,[{key:"toJSON",value:function(t){for(var e=Array.from(t.values()),n=0;n<e.length;n++)"object"==x(e[n])&&null!==e[n]&&"function"==typeof e[n].toJSON&&(e[n]=e[n].toJSON());return e}},{key:"set",value:function(t,e){t.clear(),e.forEach(function(e){t.add(e)})}}]),t}(),H=function(){function t(){o(this,t)}return E(t,null,[{key:"toJSON",value:function(t){var e=Object.create(null);return t.forEach(function(t,n){e[n]=t}),e}},{key:"set",value:function(t,e){t.clear(),"object"==("undefined"===typeof e?"undefined":x(e))?Object.keys(e).forEach(function(n){t.set(n,e[n])}):e.forEach(function(e){var n=_(e,2),i=n[0],r=n[1];t.set(i,r)})}}]),t}(),V=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this.classOf=e,this.value=null,this.set(n)}return E(t,null,[{key:"cast",value:function(e,n){if(null===n||"symbol"==("undefined"===typeof n?"undefined":x(n))||Number.isInteger(n))return n;if("object"!=("undefined"===typeof n?"undefined":x(n)))throw new TypeError("Expected integer, null, "+e+" or Reference<"+e+"> but got "+("undefined"===typeof n?"undefined":x(n)));if(n instanceof t){if(n.classOf!==e)throw new TypeError("Expected reference of "+e+" but got reference of "+n.classOf);return n.value}var i=null;switch(n.constructor.getName()){case"Label":case"Picto":i="CustomObject";break;case"Kiosk":case"Mobile":case"Web":i="Device";break;case"MapAoDae":case"MapConfig":case"MapDae":case"MapHelper":case"MapLight":case"MapPath":i="MapFile";break;case"MediaImage":case"MediaPdf":case"MediaText":case"MediaUrl":case"MediaVideo":case"Movie":i="Media";break;case"Exhibitor":case"Person":case"Product":case"Room":case"Service":case"Store":i="Poi";break;default:i=n.constructor.name}if(!n._isEntity)throw new TypeError("Expected integer, null or "+e+" or Reference<"+e+">");if(i!==e)throw new TypeError("Expected integer, null or "+e+" or Reference<"+e+"> but got "+n.constructor.getName());return n.id}}]),E(t,[{key:"set",value:function(t){return this.value=this.constructor.cast(this.classOf,t),this}},{key:"toJSON",value:function(){return this.value}},{key:"is",value:function(t){return this.constructor.cast(this.classOf,t)===this.value}}]),t}(),W=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this.classOf=e,this.values=new Set,n&&this.set(n)}return E(t,[{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(t){return this.values.forEach(t),this}},{key:"set",value:function(t){var e=this;return this.clear(),t.forEach(function(t){e.add(t)}),this}},{key:"at",value:function(t){var e=0,n=null;return this.values.forEach(function(i){e===t&&(n=i),e++}),n}},{key:"add",value:function(t){return this.has(t)?this:(this.values.add(new V(this.classOf,t)),this)}},{key:"remove",value:function(t){var e=this;return this.forEach(function(n){n.is(t)&&e.values.delete(n)}),this}},{key:"has",value:function(t){var e=!1;return this.forEach(function(n){!e&&n.is(t)&&(e=!0)}),e}},{key:"indexOf",value:function(t){var e=-1,n=0;return this.forEach(function(i){-1===e&&i.is(t)&&(e=n),n++}),e}},{key:"clear",value:function(){return this.values.clear()}},{key:"toJSON",value:function(){var t=[];return this.forEach(function(e){t.push(e.toJSON())}),t}},{key:"size",get:function(){return this.values.size}}]),t}(),G=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this.classOf=e,this.values=[],n&&this.set(n)}return E(t,null,[{key:"castPosition",value:function(t,e){var n=t;if(null===t||void 0===t)return null;if("string"==typeof t&&(n=Number.isNaN(Number(t))?t:parseInt(t,10)),!Number.isInteger(n))throw new TypeError("Position has to be an integer.");return n>=e?null:n}},{key:"order",value:function(t){var e=-1;return t.map(function(t){if(e++,null===t)throw new TypeError("OrderedCollection should not have null value");return"object"!=("undefined"===typeof t?"undefined":x(t))?{id:t,position:e}:t instanceof V||t._isEntity?{id:t,position:e}:t}).sort(function(e,n){return n.position!==e.position?n.position-e.position:"symbol"==x(e.id)&&"symbol"==x(n.id)?t.indexOf(e)-t.indexOf(n):"symbol"==x(e.id)?1:"symbol"==x(n.id)?-1:e.id-n.id}).map(function(t){return t.id})}}]),E(t,[{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(t){this.values.forEach(function(e){t(e)})}},{key:"set",value:function(t){var e=this;return this.clear(),this.constructor.order(t).forEach(function(t){e.values.push(new V(e.classOf,t))}),this}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.constructor.castPosition(e,this.size),i=this.indexOf(t);return-1!==i&&this.removeAt(i),null===n?this.values.push(new V(this.classOf,t)):this.values.splice(n,0,new V(this.classOf,t)),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return e>-1&&this.removeAt(e),this}},{key:"removeAt",value:function(t){return this.values.splice(t,1),this}},{key:"has",value:function(t){var e=!1;return this.forEach(function(n){!e&&n.is(t)&&(e=!0)}),e}},{key:"indexOf",value:function(t){var e=-1,n=0;return this.forEach(function(i){-1===e&&i.is(t)&&(e=n),n++}),e}},{key:"at",value:function(t){var e=0,n=null;return this.values.forEach(function(i){e===t&&(n=i),e++}),n}},{key:"clear",value:function(){return this.values.length=0,this}},{key:"toJSON",value:function(){var t=this.size;return this.values.map(function(e){return{id:e.toJSON(),position:--t}})}},{key:"size",get:function(){return this.values.length}}]),t}(),q=new Map,X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t),this.constructor._isAbstract()&&this._throwIsAbstract(),this._isEntity=!0,this._reset(),null!==e&&this.fromJSON(e)}return E(t,[{key:"set",value:function(t,e){return this[t]instanceof Set?z.set(this[t],e):this[t]instanceof Map?H.set(this[t],e):this[t]instanceof V||this[t]instanceof W||this[t]instanceof G||this[t]instanceof P?this[t].set(e):this[t]=e,this}}],[{key:"getName",value:function(){return"AbstractEntity"}},{key:"create",value:function(){return new this(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}},{key:"keys",get:function(){var t=[];return t.push("id"),t}}]),E(t,[{key:"toJSON",value:function(){var t=this,e={};return this.constructor.keys.forEach(function(n){t[n]instanceof Date||t[n]instanceof V||t[n]instanceof W||t[n]instanceof G||t[n]instanceof P?e[n]=t[n].toJSON():t[n]instanceof Set?e[n]=z.toJSON(t[n]):t[n]instanceof Map?e[n]=H.toJSON(t[n]):e[n]=t[n]}),e}},{key:"fromJSON",value:function(t){var e=this;return this.constructor.keys.forEach(function(n){t.hasOwnProperty(n)&&e.set(n,t[n])}),this}},{key:"clone",value:function(){return this.constructor.create(this.constructor._deepClone(this.toJSON()))}},{key:"_reset",value:function(){this.id=null}},{key:"_throwIsAbstract",value:function(){throw new TypeError(this.constructor.getName()+" is abstract")}}],[{key:"_deepClone",value:function(t){if(null===t||"object"!=("undefined"===typeof t?"undefined":x(t)))return t;if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(this._deepClone(t[n]));return e}for(var i={},r=Object.keys(t),o=0;o<r.length;o++){var s=r[o];i[s]=this._deepClone(t[s])}return i}},{key:"_setPropertyValidator",value:function(t,e){q.get(this.getName()).set(t,e)}},{key:"_isAbstract",value:function(){return!0}},{key:"_buildValidators",value:function(){q.set(this.getName(),new Map),this._setPropertyValidator("id",new D([new I,new N,new B([new j,new $(new U)])]))}},{key:"_validators",get:function(){return q.has(this.getName())||this._buildValidators(),q.get(this.getName())}}]),t}(),K=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.site=new V("Site",null)}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("site"),t}}]),e}(t)},Y=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"string"==typeof e[n]&&e[n].length>0&&e[n].length<=255}}]),e}(R),Z=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.name=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("name",new Y)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("name"),t}}]),e}(t)},J=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.metadata=new Map}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("metadata"),t}}]),e}(t)},Q=function(t){function e(t){var n;return o(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.enum=t,n.enumKeys=Object.keys(n.enum),n.enumValues=[],n.enumKeys.forEach(function(t){n.enumValues.push(n.enum[t])}),n}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return this.enumValues.includes(e[n])}}]),e}(R),tt={DEFAULT:"default",TEXTURE:"texture",TEXTURE_MODEL:"texture_model",MEDIA:"media",MEDIA_FILE:"media_file",MEDIA_PREVIEW:"media_preview",MAP:"map",PICTO:"picto",CATEGORY:"category",SITE:"site",POI:"poi",TEXTURE_LOW:"texture_low",TEXTURE_OCCLUSION:"texture_occlusion",TEXTURE_HELPER:"texture_helper"},et=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"fromBlob",value:function(t){throw new Error("File#fromBlob is available in Browser environment")}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.reference=null,this.content_hash=null,this.file_type=null,this.uri=null,this.context=tt.DEFAULT}}],[{key:"getName",value:function(){return"File"}},{key:"_isAbstract",value:function(){return!1}},{key:"fromFileEntity",value:function(t){if(!(t instanceof this))throw new TypeError("Expected an instance of File");var e=new this;return e.name=t.name,e.uri=t.uri,e.file_type=t.file_type,e.content_hash=t.content_hash,e.site=t.site,e}},{key:"fromBlob",value:function(t){var e=new this;return e.fromBlob(t),e}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("uri",new Y),this._setPropertyValidator("context",new Q(tt))}},{key:"_getBlobFromUri",value:function(t){throw new Error("File#_getBlobFromUri is available in Browser environment")}},{key:"_addBlobUri",value:function(t,e){throw new Error("File#_addBlobUri is available in Browser environment")}},{key:"_getBufferFromUri",value:function(t){throw new Error("File#_getBufferFromUri is available in Node environment")}},{key:"_addBufferUri",value:function(t,e){throw new Error("File#_addBufferUri is available in Node environment")}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("reference"),t.push("context"),t.push("file_type"),t.push("content_hash"),t.push("uri"),t}}]),e}(Z(K(J(X)))),nt=new Map,it=new Map,rt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"fromBlob",value:function(t){if(!(t instanceof Blob))throw new TypeError("Expected an instance of Blob");this.name="blob",this.file_type=t.type,this.uri=nt.has(t)?nt.get(t):URL.createObjectURL(t),it.set(this.uri,t),nt.set(t,this.uri),t instanceof window.File&&(this.name=t.name)}}],[{key:"_getBlobFromUri",value:function(t){return null===t?null:it.has(t)?it.get(t):null}},{key:"_addBlobUri",value:function(t,e){it.set(t,e)}}]),e}(et),ot=new WeakMap,st=f.a.create({timeout:0,maxContentLength:-1}),at=function(){function t(){o(this,t),this.parameters={},this.headers={},this.method="GET",this.url=null,this.data=null,this.responseType="json"}return E(t,null,[{key:"sendRequest",value:function(t){if(!(t instanceof this))throw new Error("Request instance expected");return st.request({headers:t.headers,method:t.method,url:t.url,params:t.parameters,data:t.data,responseType:t.responseType}).then(function(e){return"document"===t.responseType&&(e.responseXML=e.data),e})}},{key:"getUriContentHash",value:function(t){var e=this;return this._getBufferFromUri(t).then(function(t){return e.getBufferContentHash(t)})}},{key:"getBufferContentHash",value:function(t){throw new Error("This is abstract")}},{key:"_getBufferFromUri",value:function(t){var e=rt._getBufferFromUri(t);if(null!==e)return Promise.resolve(e);var n=new this;return n.method="get",n.responseType="arraybuffer",n.url=t,this.sendRequest(n).then(function(n){return e=n.data,rt._addBufferUri(t,e),e})}},{key:"formatRequestContext",value:function(t){return{request:{headers:t.headers,method:t.method,url:t.url,params:t.parameters,data:t.data,responseType:t.responseType}}}},{key:"formatApiError",value:function(t,e){var n=this.formatRequestContext(e),i=null,r=null;if(t.response){var o=t.response,s=o.status,a=o.data,c=o.headers;s>=400&&s<500?(i=403===s?"Authentication failed; check your credentials, clock and authorizations":"Request failed due to invalid request",r={response:{data:a,headers:c},request:n}):503===s?(i="Server is busy",r={response:{data:a,headers:c},request:n}):(i="Server error",r={response:{data:a,headers:c},request:n})}else t.request?(i="No response from Server",r={request:n}):(i="No response from Server",r=t);return{message:i,context:r}}}]),E(t,[{key:"addParameter",value:function(t,e){return this.parameters[t]=e,this}},{key:"addParameters",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n];this.addParameter(i,t[i])}return this}},{key:"formattedParameters",value:function(){for(var t=[],e=Object.keys(this.parameters),n=0;n<e.length;n++){var i=e[n],r=this.parameters[i];t.push(i+"="+r)}return t.join("&")}},{key:"addHeader",value:function(t,e){return this.headers[t]=e,this}},{key:"addHeaders",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n];this.addHeader(i,t[i])}return this}},{key:"formattedUrl",value:function(){return this.url+"?"+this.formattedParameters()}},{key:"url",get:function(){return ot.get(this)},set:function(t){var e=t;if(null!==t&&-1!==t.indexOf("?")){var n=t.split("?"),i=n.splice(0,1);e=_(i,1)[0];for(var r=n.join("?").split("&"),o=0;o<r.length;o++){var s=r[o].split("="),a=s.splice(0,1)[0],c=s.join("=");this.addParameter(a,c)}}return ot.set(this,e),this}}]),t}(),ct=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getBufferContentHash",value:function(t){return g()(v.a.create(t,t.length)).toString()}},{key:"formatRequestContext",value:function(t){var n=w(e.__proto__||Object.getPrototypeOf(e),"formatRequestContext",this).call(this,t);if(n.data instanceof FormData){var i={};n.data.entries().forEach(function(t){var e=_(t,2),n=e[0],r=e[1];i[n]=r instanceof Blob?"Blob":r}),n.data=i}return n}}]),e}(at),lt=function(){function t(){o(this,t),this._idToEntityMap=new Map,this._entityList=null}return E(t,[{key:Symbol.iterator,value:function(){return this.getAll()[Symbol.iterator]()}},{key:"store",value:function(t){return this._idToEntityMap.set(t.id,t),this._entityList=null,t}},{key:"remove",value:function(t){this.has(t.id)&&(this._idToEntityMap.delete(t.id),this._entityList=null)}},{key:"getAll",value:function(){var t=this;return null===this._entityList&&(this._entityList=[],this._idToEntityMap.forEach(function(e){t._entityList.push(e)})),this._entityList}},{key:"get",value:function(t){return this.has(t)?this._idToEntityMap.get(t):null}},{key:"has",value:function(t){return this._idToEntityMap.has(t)}},{key:"clone",value:function(){var e=new t;return this.getAll().forEach(function(t){e._idToEntityMap.set(t.id,t.clone())}),e}}]),t}(),ut=function(){function t(e){o(this,t),this._expectedClassOf=this.constructor.getEntityClass().getName(),this._logger=new l.b(e.options.logger,this._expectedClassOf),this._init(e)}return E(t,[{key:"isLoaded",value:function(){return this._status===O.LOADED}},{key:"isLoading",value:function(){return this._status===O.LOADING}},{key:"load",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isLoading()||this.isLoaded())return this.isLoading()?this._task:Promise.resolve();this._logger.info("loading start"),this._status=O.LOADING;var n=this._loadIntoNewStorage(e).then(function(e){t._logger.debug("loading storing data"),t._storage=e,t._status=O.LOADED,t._logger.info("loading success")}).catch(function(e){return t._logger.error("loading fail",{error:e}),t._status=O.ERROR,Promise.reject(e)});return this._task=n,n}},{key:"loadFromCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isLoading()||this.isLoaded())return this.isLoading()?this._task:Promise.resolve();this._logger.info("loading start"),this._status=O.LOADING;var n=this._loadFromCacheIntoNewStorage(e).then(function(e){t._logger.debug("loading storing data"),t._storage=e,t._status=O.LOADED,t._logger.info("loading success")}).catch(function(e){return t._logger.error("loading fail",{error:e}),t._status=O.ERROR,Promise.reject(e)});return this._task=n,n}},{key:"getAll",value:function(){return this._assertIsLoaded(),this._storage.getAll()}},{key:"get",value:function(t){switch(this._assertIsLoaded(),!0){case t instanceof V:if(t.classOf!==this._expectedClassOf)throw new TypeError("Expected a Reference<"+this._expectedClassOf+"> but got Reference<"+t.classOf+">");return this._storage.get(t.value);case"object"==("undefined"===typeof t?"undefined":x(t))&&null!==t:return this._storage.get(t.id);case"string"==typeof t:return this._storage.get(parseInt(t,10));default:return this._storage.get(t)}}},{key:"getList",value:function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.get(t))}),n}},{key:"findBy",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t)))throw new Error("Filters need to be specified");var e=Object.keys(t);return this.getAll().filter(function(n){for(var i=0;i<e.length;i++){var r=e[i],o=t[r],s=!1;switch("undefined"===typeof o?"undefined":x(o)){case"function":s=o(n[r]);break;default:s=n[r]===o}if(!s)return!1}return!0})}},{key:"findOneBy",value:function(t){var e=this.findBy(t);if(e.length>1)throw new Error("Result isn't unique, please use #findBy method instead");return 0===e.length?null:e[0]}},{key:"persist",value:function(t){this._logger.info("persist entity",{entity:t}),this.em._assertIsNotLocked(),this._persist(t)}},{key:"remove",value:function(t){this._logger.info("remove entity",{id:t}),this.em._assertIsNotLocked(),this._remove(t)}},{key:"validate",value:function(t){return this._logger.info("validate entity",{entity:t}),this.constructor._throwExceptionIfNotSupported(t),this._assertIsLoaded(),this._validate(t)}},{key:"validateProperty",value:function(t,e){return this._logger.info("validate entity",{entity:t}),this.constructor._throwExceptionIfNotSupported(t),this._assertIsLoaded(),this._validateProperty(t,e)}},{key:"isValid",value:function(t){return 0===this.validate(t).size}},{key:"_init",value:function(t){this._logger.debug("initialisation"),this.em=t,this._eventDispatcher=k,this._storage=new lt,this._status=O.INITIAL,this._task=null}},{key:"_loadFromCacheIntoNewStorage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.em.options.cacheManager;return null===n?Promise.reject(new Error("AbstractRepository.loadFromCache: no CacheManager")):n.get(this.constructor.getName(),this.em.options,e).then(function(e){return t._putResultIntoNewStorage(e)})}},{key:"_validateProperty",value:function(t,e){var n=t.constructor._validators;if(!n.has(e))return null;var i=n.get(e);return i.isValid(this.em,t,e)?null:i.constructor.message}},{key:"_getLoadRequest",value:function(t){var e=new ct;return e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint,e.parameters.start=t||0,e}},{key:"_getCreateRequest",value:function(t){var e=new ct,n=t.toJSON();return delete n.id,this.constructor._readOnlyKeys.forEach(function(t){delete n[t]}),e.method="POST",e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint,e.data=JSON.stringify(n),e.addHeader("Content-Type","application/json"),e}},{key:"_getUpdateRequest",value:function(t,e){var n=new ct,i=t.toJSON(),r=this.constructor._readOnlyKeys;return Object.keys(i).forEach(function(t){-1!==e.indexOf(t)&&-1===r.indexOf(t)||delete i[t]}),n.method="POST",n.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+t.id,n.data=JSON.stringify(i),n.addHeader("Content-Type","application/json"),n}},{key:"_getRemoveRequest",value:function(t){var e=new ct;e.method="DELETE",e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint;var n=t.map(function(t){return t.id}).join(",");return e.addParameter("id",n),e}},{key:"_assertIsLoaded",value:function(){if(!this.isLoaded())throw this._logger.error("is not loaded"),new Error("The repository "+this.constructor.getName()+" must be loaded but it's in "+this._status+" state for now !")}},{key:"_loadIntoNewStorage",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._logger.verbose("loading first page"),this._loadFromCacheIntoNewStorage(!1).catch(function(){return t._loadFromApiIntoNewStorage()}).catch(function(n){return e?(t._logger.error("loading failed, fallback to outdated cache",{error:n}),t._loadFromCacheIntoNewStorage(!0).catch(function(){return Promise.reject(n)})):Promise.reject(n)})}},{key:"_loadFromApiIntoNewStorage",value:function(){var t=this;return this.em._xhr(this._getLoadRequest(),200).then(function(e){t._logger.verbose("loading first page success");var n=[],i=e.headers["content-range"];if(!i)throw new Error("Content-Range is not present");var r=i.match(/^(-?[0-9]+)-(-?[0-9]+)\/([0-9]+)$/);if(!r)throw new Error("Content-Range invalid");var o=parseInt(r[1],10),s=parseInt(r[2],10),a=parseInt(r[3],10),c=s-o;for(n.push(Promise.resolve(e));s+1<a;)t._logger.verbose("loading next page"),s=(o=s+1)+c,n.push(t.em._xhr(t._getLoadRequest(o),200));return Promise.all(n).then(function(e){t._logger.verbose("loading all pages success");for(var n=[],i=0;i<e.length;i++){var r=e[i].data;if(!Array.isArray(r)){var o="Return format expected to be an array while loading "+t.constructor.getName();throw new Error(o)}n=n.concat(r)}if(n.length!==a)throw new Error('"Expected '+a+" results for but got "+n.length);return n})}).then(function(e){return t._putResultIntoNewStorage(e)})}},{key:"_putResultIntoNewStorage",value:function(t){for(var e=new lt,n=0;n<t.length;n++){var i=this.constructor.fromJSON(t[n]);null!==i&&e.store(i)}return e}},{key:"_replaceStorage",value:function(t){var e,n=this,i=this._storage;this._storage=t;var o=(e={},r(e,F.CREATE,[]),r(e,F.UPDATE,[]),r(e,F.REMOVE,[]),e);return i.getAll().forEach(function(t){null===n.get(t.id)&&o[F.REMOVE].push(t)}),this.getAll().forEach(function(t){if(!i.has(t.id))return void(o[F.CREATE]=t);var e=i.get(t.id),r=n.constructor._compare(e,t);0!==r.length&&(o[F.UPDATE]={current:t,previous:e,changes:r})}),o}},{key:"_persist",value:function(t,e){this._logger.debug("persist",{entity:t,internal:e}),this._assertIsLoaded(),this.constructor._throwExceptionIfNotSupported(t),this._assertIsValid(t),null===t.id?this._create(t,e):this._update(t,e)}},{key:"_remove",value:function(t,e){this._logger.debug("remove",{id:t,internal:e}),this._assertIsLoaded();var n=this.get(t);if(null!==n&&(this._storage.remove(n),this._eventDispatcher.publish(this,F.REMOVE,n),!e)){var i=[this,F.REMOVE,[n.clone()]];this._logger.debug("commit",{commit:i}),this.em._uow.commits.add(i)}}},{key:"_validate",value:function(t){var e=this,n=t.constructor._validators,i=new Map;return n.forEach(function(n){var r=_(n,2),o=r[0],s=r[1];s.isValid(e.em,t,o)||i.set(o,s.constructor.message)}),i}},{key:"_assertIsValid",value:function(t){if(!this.isValid(t)){var e="Given "+t.constructor.getName()+" is not valid";throw this.validate(t).forEach(function(t){var n=_(t,2),i=n[0],r=n[1];e+="\n\t"+i+": "+r}),new TypeError(e)}}},{key:"_create",value:function(t,e){if(null===t.id&&(t.id=Symbol("AdsumClientApi_entity_id")),this._overrideSiteEntity(t),this._storage.store(t),this._logger.debug("create",{entity:t,internal:e}),this._eventDispatcher.publish(this,F.CREATE,t),!e){var n=[this,F.CREATE,t.clone()];this._logger.debug("commit",{commit:n}),this.em._uow.commits.add(n)}}},{key:"_update",value:function(t,e){var n=this.get(t.id);if(null===n)throw new TypeError("Provided entity has id set but is not found, are you sure the entity is not remove ?");if(n.constructor!==t.constructor)return void this._switchType(t,n,e);var i=this.constructor._compare(n,t);if(0!==i.length&&(this._logger.debug("update",{entity:t,previous:n,changes:i,internal:e}),this._storage.store(t),this._eventDispatcher.publish(this,F.UPDATE,{current:t,previous:n,changes:i}),!e)){var r=[this,F.UPDATE,{current:t.clone(),previous:n,changes:i}];this._logger.debug("commit",{commit:r}),this.em._uow.commits.add(r)}}},{key:"_overrideSiteEntity",value:function(t){-1!==t.constructor.keys.indexOf("site")&&(t.site=this.em.options.site)}},{key:"_switchType",value:function(t,e,n){this._logger.debug("switch type",{entity:t,previous:e,internal:n}),t.id=null,this._create(t,n),this._remove(e,n)}}],[{key:"getName",value:function(){return this.getEntityClass().getName()}},{key:"getEntityClass",value:function(){throw new Error("You must implements #getEntityClass")}},{key:"fromJSON",value:function(t){return this.getEntityClass().create(t)}},{key:"_compare",value:function(t,e){var n=this;if(this._throwExceptionIfNotSupported(t),this._throwExceptionIfNotSupported(e),e.constructor!==t.constructor)throw new TypeError("Cannot compare two entity of different classes");var i=t.toJSON(),r=e.toJSON(),o=[];return Object.keys(i).forEach(function(t){var e=i[t],s=r[t];n._areDeepEqual(e,s)||o.push(t)}),o}},{key:"_areDeepEqual",value:function(t,e){if(t===e)return!0;if("object"!=("undefined"===typeof t?"undefined":x(t))||("undefined"===typeof t?"undefined":x(t))!=("undefined"===typeof e?"undefined":x(e)))return!1;if(null===t||null===e)return!1;if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(var n=new Set,i=0;i<t.length;i++){for(var r=t[i],o=!1,s=0;s<e.length;s++)if(!n.has(s)&&this._areDeepEqual(r,e[s])){n.add(s),o=!0;break}if(!o)return!1}return!0}var a=Object.keys(t);if(!this._areDeepEqual(a,Object.keys(e)))return!1;for(var c=0;c<a.length;c++){var l=a[c];if(!this._areDeepEqual(t[l],e[l]))return!1}return!0}},{key:"_throwExceptionIfNotSupported",value:function(t){if(!(t instanceof this.getEntityClass()))throw new TypeError("Unsupported entity")}},{key:"_readOnlyKeys",get:function(){return[]}},{key:"_endpoint",get:function(){return this.getEntityClass().getName().toLowerCase()}}]),t}(),ht=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return this.constructor.isReference(t,e[n])}}],[{key:"isReference",value:function(t,e){if(!(e instanceof V))return!1;var n=t.getRepository(e.classOf);return null!==n&&(e.is(null)||null!==n.get(e))}}]),e}(R),dt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,n,i){return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isValid",this).call(this,t,n,i)&&!n[i].is(null)}}]),e}(ht),ft=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){var i=e[n];return i instanceof P&&Number.isFinite(i.x)&&Number.isFinite(i.y)&&Number.isFinite(i.z)}}]),e}(R),pt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isFinite(e[n])}}]),e}(R),gt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"boolean"==typeof e[n]}}]),e}(R),mt={BILLBOARD:"BILLBOARD",STATIC:"STATIC",FLIP:"FLIP"},vt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null,this.place=new V("Place",null),this.poi=new V("Poi",null),this.offset=new P,this.autoscale=!1,this.rotation=0,this.priority=0,this.orientation_mode=mt.BILLBOARD,this.permanent_display=!0}}],[{key:"getName",value:function(){return"CustomObject"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("place",new dt),this._setPropertyValidator("poi",new ht),this._setPropertyValidator("offset",new ft),this._setPropertyValidator("autoscale",new gt),this._setPropertyValidator("rotation",new pt),this._setPropertyValidator("priority",new j),this._setPropertyValidator("orientation_mode",new Q(mt)),this._setPropertyValidator("permanent_display",new gt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("place"),t.push("poi"),t.push("offset"),t.push("autoscale"),t.push("rotation"),t.push("priority"),t.push("orientation_mode"),t.push("permanent_display"),t}}]),e}(K(J(X))),yt={PICTO:"picto",LABEL:"label"},bt={LEFT:"left",RIGHT:"right",CENTER:"center"},wt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isFinite(e[n])&&e[n]>0}}]),e}(R),_t=function(t){function e(t){var n;return o(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.constant=t,n}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return e[n]===this.constant}}]),e}(R),xt=function(t){function e(t){var n;return o(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.regex=t,n}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"string"==typeof e[n]&&null!==e[n].match(this.regex)}}]),e}(R),Et=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=yt.LABEL,this.alignment=bt.CENTER,this.font="Arial",this.font_size=5,this.font_color="#000000",this.background_color=null,this.label=null}}],[{key:"getName",value:function(){return"Label"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(yt.LABEL)),this._setPropertyValidator("font",new D([new I,new Y])),this._setPropertyValidator("alignment",new Q(bt)),this._setPropertyValidator("font_size",new B([new j,new wt])),this._setPropertyValidator("background_color",new D([new I,new xt(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])),this._setPropertyValidator("font_color",new xt(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)),this._setPropertyValidator("label",new Y)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("font"),t.push("alignment"),t.push("font_size"),t.push("font_color"),t.push("background_color"),t.push("label"),t}}]),e}(vt),At=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.file=new V("File",null)}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("file",new dt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("file"),t}}]),e}(t)},Ct=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=yt.PICTO,this.width=null,this.height=null,this.original_md5=null}}],[{key:"getName",value:function(){return"Picto"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(yt.PICTO)),this._setPropertyValidator("width",new wt),this._setPropertyValidator("height",new wt),this._setPropertyValidator("original_md5",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("width"),t.push("height"),t.push("original_md5"),t}}]),e}(At(vt)),St=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return vt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"label":return new Et(t);case"picto":return new Ct(t);default:throw new Error("Unable to parse CustomObject "+t.type)}}}]),e}(ut),Mt=function(){function t(){o(this,t)}return E(t,null,[{key:"fromJSON",value:function(t){if(null===t||void 0===t)return null;if(t instanceof Date)return Number.isFinite(t.getTime())?t:null;if("string"!=typeof t&&!Number.isFinite(t))return null;var e=new Date;return e.setTime("string"==typeof t?Date.parse(t):t),Number.isFinite(e.getTime())?e:null}}]),t}(),Tt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return e[n]instanceof Date&&Number.isFinite(e[n].getTime())}}]),e}(R),kt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"set",value:function(t,n){return"validate_at"===t?(this[t]=Mt.fromJSON(n),this):w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n)}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null,this.core_version=null,this.width=null,this.height=null,this.validate_at=null,this.site_calibration=new V("SiteCalibration",null)}}],[{key:"getName",value:function(){return"Device"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("site_calibration",new ht),this._setPropertyValidator("core_version",new D([new I,new Y])),this._setPropertyValidator("width",new D([new I,new j])),this._setPropertyValidator("height",new D([new I,new j])),this._setPropertyValidator("validate_at",new D([new I,new Tt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("site_calibration"),t.push("core_version"),t.push("width"),t.push("height"),t.push("validate_at"),t}}]),e}(Z(K(J(X)))),Ft={KIOSK:"kiosk",MOBILE:"mobile",WEB:"web"},Ot=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Ft.KIOSK,this.position=new P,this.os=null,this.location=null}}],[{key:"getName",value:function(){return"Kiosk"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Ft.KIOSK)),this._setPropertyValidator("position",new ft),this._setPropertyValidator("os",new D([new Y,new I])),this._setPropertyValidator("location",new D([new Y,new I]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("position"),t.push("os"),t.push("location"),t}}]),e}(kt),Pt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Ft.MOBILE}}],[{key:"getName",value:function(){return"Mobile"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Ft.MOBILE))}}]),e}(kt),Lt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Ft.WEB}}],[{key:"getName",value:function(){return"Web"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Ft.WEB))}}]),e}(kt),Rt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return kt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"kiosk":return new Ot(t);case"mobile":return new Pt(t);case"web":return new Lt(t);default:throw new Error("Unable to parse Device "+t.type)}}}]),e}(ut),Dt=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"set",value:function(t,n){return"created_at"===t||"updated_at"===t?(this[t]=Mt.fromJSON(n),this):w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n)}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.version=null,this.created_at=null,this.updated_at=null}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("version"),t.push("created_at"),t.push("updated_at"),t}}]),e}(t)},Bt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null}}],[{key:"getName",value:function(){return"MapFile"}},{key:"_isAbstract",value:function(){return!0}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t}}]),e}(Z(Dt(K(At(J(X)))))),It={AO_DAE:"aoDae",CONFIG:"config",DAE:"dae",HELPER:"helper",IVE:"ive",LIGHT:"light",OSG:"osg",PATH:"path"},Nt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.CONFIG}}],[{key:"getName",value:function(){return"MapConfig"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.CONFIG))}}]),e}(Bt),jt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.DAE}}],[{key:"getName",value:function(){return"MapDae"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.DAE))}}]),e}(Bt),Ut=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.AO_DAE}}],[{key:"getName",value:function(){return"MapAoDae"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.AO_DAE))}}]),e}(Bt),$t=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.LIGHT}}],[{key:"getName",value:function(){return"MapLight"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.LIGHT))}}]),e}(Bt),zt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.HELPER}}],[{key:"getName",value:function(){return"MapHelper"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.HELPER))}}]),e}(Bt),Ht=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.PATH,this.paths=new Map}}],[{key:"getName",value:function(){return"MapPath"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.PATH))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("paths"),t}}]),e}(Bt),Vt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Bt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"config":return new Nt(t);case"dae":return new jt(t);case"aoDae":return new Ut(t);case"light":return new $t(t);case"helper":return new zt(t);case"path":return new Ht(t);case"ive":case"osg":case"model":case"aoOsg":return null;default:throw new Error("Unable to parse MapFile "+t.type)}}},{key:"_endpoint",get:function(){return"map"}}]),e}(ut),Wt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"string"==typeof e[n]}}]),e}(R),Gt=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.description=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("description",new D([new I,new Wt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("description"),t}}]),e}(t)},qt=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.signature=null}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("signature"),t}}]),e}(t)},Xt=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.client_id=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("client_id",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("client_id"),t}}]),e}(t)},Kt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){var i=e[n];if(!(i instanceof W))return!1;var r=!0;return i.forEach(function(e){if(null===e)return void(r=!1);var n=new V(i.classOf,e);ht.isReference(t,n)&&!n.is(null)||(r=!1)}),r}}]),e}(R),Yt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){var i=e[n];if(!(i instanceof G))return!1;var r=!0;return i.forEach(function(e){if(null===e)return void(r=!1);var n=new V(i.classOf,e);ht.isReference(t,n)&&!n.is(null)||(r=!1)}),r}}]),e}(R),Zt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"set",value:function(t,n){return"start_at"!==t&&"end_at"!==t?w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n):(this[t]=Mt.fromJSON(n),this)}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null,this.start_at=null,this.end_at=null,this.tags=new W("Tag"),this.playlists=new G("Playlist"),this.pois=new W("Poi"),this.preview=new V("File",null)}}],[{key:"getName",value:function(){return"Media"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("tags",new Kt),this._setPropertyValidator("playlists",new Yt),this._setPropertyValidator("pois",new Kt),this._setPropertyValidator("preview",new ht),this._setPropertyValidator("start_at",new D([new I,new Tt])),this._setPropertyValidator("end_at",new D([new I,new Tt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("tags"),t.push("playlists"),t.push("pois"),t.push("preview"),t.push("start_at"),t.push("end_at"),t}}]),e}(Xt(qt(Dt(Gt(Z(K(J(X)))))))),Jt={IMAGE:"image",PDF:"pdf",TEXT:"text",URL:"url",VIDEO:"video",MOVIE:"movie"},Qt=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.TEXT,this.format=null,this.identifier=null,this.content=null}}],[{key:"getName",value:function(){return"MediaText"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.TEXT)),this._setPropertyValidator("format",new D([new I,new Y])),this._setPropertyValidator("identifier",new D([new I,new Y])),this._setPropertyValidator("content",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("format"),t.push("identifier"),t.push("content"),t}}]),e}(Zt),te=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.IMAGE}}],[{key:"getName",value:function(){return"MediaImage"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.IMAGE))}}]),e}(At(Zt)),ee=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.PDF}}],[{key:"getName",value:function(){return"MediaPdf"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.PDF))}}]),e}(At(Zt)),ne=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.URL,this.link=null}}],[{key:"getName",value:function(){return"MediaUrl"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.URL)),this._setPropertyValidator("link",new Y)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("link"),t}}]),e}(Zt),ie=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.VIDEO}}],[{key:"getName",value:function(){return"MediaVideo"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.VIDEO))}}]),e}(At(Zt)),re=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.validator=n,t}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){if(null===this.validator)return!0;if(!(e[n]instanceof Set))return!1;for(var i=Array.from(e[n]),r=0;r<i.length;r++)if(!this.validator.isValid(t,i,r))return!1;return!0}}]),e}(R),oe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"set",value:function(t,n){if("coming_sessions"!==t)return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n);var i=[];return n.forEach(function(t){var e=Mt.fromJSON(t);i.push(e)}),z.set(this.coming_sessions,i),this}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.MOVIE,this.actors=new Set,this.coming_sessions=new Set,this.director=null,this.certification=null,this.duration=null}}],[{key:"getName",value:function(){return"Movie"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.MOVIE)),this._setPropertyValidator("actors",new re(new Wt)),this._setPropertyValidator("coming_sessions",new re(new Tt)),this._setPropertyValidator("director",new D([new I,new Y])),this._setPropertyValidator("certification",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("actors"),t.push("coming_sessions"),t.push("director"),t.push("certification"),t.push("duration"),t}}]),e}(At(Zt)),se=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Zt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"text":return new Qt(t);case"image":return new te(t);case"pdf":return new ee(t);case"url":return new ne(t);case"video":return new ie(t);case"movie":return new oe(t);default:throw new Error("Unable to parse Media "+t.type)}}}]),e}(ut),ae=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.categories=new W("Category"),this.children=new G("Poi"),this.custom_objects=new W("CustomObject"),this.logos=new G("File"),this.medias=new G("Media"),this.new=!0,this.parents=new W("Poi"),this.pictures=new G("File"),this.places=new W("Place"),this.tags=new W("Tag"),this.type=null}}],[{key:"getName",value:function(){return"Poi"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("new",new gt),this._setPropertyValidator("categories",new Kt),this._setPropertyValidator("custom_objects",new Kt),this._setPropertyValidator("places",new Kt),this._setPropertyValidator("tags",new Kt),this._setPropertyValidator("parents",new Kt),this._setPropertyValidator("children",new Yt),this._setPropertyValidator("logos",new Yt),this._setPropertyValidator("pictures",new Yt),this._setPropertyValidator("medias",new Yt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("new"),t.push("categories"),t.push("custom_objects"),t.push("places"),t.push("tags"),t.push("parents"),t.push("children"),t.push("logos"),t.push("pictures"),t.push("medias"),t}}]),e}(Gt(Z(Dt(J(qt(Xt(K(X)))))))),ce={EXHIBITOR:"exhibitor",PERSON:"person",PRODUCT:"product",ROOM:"room",SERVICE:"service",STORE:"store"},le=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ce.EXHIBITOR,this.phone=null,this.url=null}}],[{key:"getName",value:function(){return"Exhibitor"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ce.EXHIBITOR)),this._setPropertyValidator("phone",new D([new I,new Y])),this._setPropertyValidator("url",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("phone"),t.push("url"),t}}]),e}(ae),ue=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ce.PERSON,this.firstname=null,this.lastname=null,this.desk_phone=null,this.mobile_phone=null}}],[{key:"getName",value:function(){return"Person"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ce.PERSON)),this._setPropertyValidator("firstname",new D([new I,new Y])),this._setPropertyValidator("lastname",new D([new I,new Y])),this._setPropertyValidator("desk_phone",new D([new I,new Y])),this._setPropertyValidator("mobile_phone",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("firstname"),t.push("lastname"),t.push("desk_phone"),t.push("mobile_phone"),t}}]),e}(ae),he=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ce.PRODUCT,this.brand_name=null,this.currency=null,this.description1=null,this.description2=null,this.discount_value=null,this.ean=null,this.full_description=null,this.full_name=null,this.price=null,this.priority=null,this.rating=null,this.rating_count=null,this.reference=null,this.remaining_quantity=null,this.status=null,this.url=null,this.values=new W("FeatureValue")}}],[{key:"getName",value:function(){return"Product"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ce.PRODUCT)),this._setPropertyValidator("priority",new D([new I,new j])),this._setPropertyValidator("reference",new D([new I,new Y])),this._setPropertyValidator("full_name",new D([new I,new Y])),this._setPropertyValidator("description1",new D([new I,new Wt])),this._setPropertyValidator("description2",new D([new I,new Wt])),this._setPropertyValidator("full_description",new D([new I,new Wt])),this._setPropertyValidator("brand_name",new D([new I,new Y])),this._setPropertyValidator("url",new D([new I,new Y])),this._setPropertyValidator("status",new D([new I,new Y])),this._setPropertyValidator("price",new D([new I,new pt])),this._setPropertyValidator("currency",new D([new I,new Y])),this._setPropertyValidator("rating",new D([new I,new pt])),this._setPropertyValidator("rating_count",new D([new I,new j])),this._setPropertyValidator("remaining_quantity",new D([new I,new j])),this._setPropertyValidator("discount_value",new D([new I,new j])),this._setPropertyValidator("ean",new D([new I,new xt(/^[0-9]{8,13}$/)])),this._setPropertyValidator("values",new Kt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("priority"),t.push("reference"),t.push("full_name"),t.push("description1"),t.push("description2"),t.push("full_description"),t.push("brand_name"),t.push("url"),t.push("status"),t.push("price"),t.push("currency"),t.push("rating"),t.push("rating_count"),t.push("remaining_quantity"),t.push("discount_value"),t.push("ean"),t.push("values"),t}}]),e}(ae),de=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ce.ROOM,this.reference=null,this.kind=null,this.capacity=null,this.phone=null}}],[{key:"getName",value:function(){return"Room"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ce.ROOM)),this._setPropertyValidator("reference",new D([new I,new Y])),this._setPropertyValidator("kind",new D([new I,new Y])),this._setPropertyValidator("capacity",new D([new I,new j])),this._setPropertyValidator("phone",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("reference"),t.push("kind"),t.push("capacity"),t.push("phone"),t}}]),e}(ae),fe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ce.SERVICE,this.schedule=new Map}}],[{key:"getName",value:function(){return"Service"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ce.SERVICE))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("schedule"),t}}]),e}(ae),pe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ce.STORE,this.priority=0,this.opening_time=null,this.phone=null,this.url=null}}],[{key:"getName",value:function(){return"Store"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ce.STORE)),this._setPropertyValidator("priority",new j),this._setPropertyValidator("opening_time",new D([new I,new Wt])),this._setPropertyValidator("phone",new D([new I,new Y])),this._setPropertyValidator("url",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("priority"),t.push("opening_time"),t.push("phone"),t.push("url"),t}}]),e}(ae),ge=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_switchType",value:function(t,n,i){if(null!==n.signature){var r=n.clone();r.signature=null,this._persist(r,i)}w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_switchType",this).call(this,t,n,i)}}],[{key:"getEntityClass",value:function(){return ae}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"exhibitor":return new le(t);case"person":return new ue(t);case"product":return new he(t);case"room":return new de(t);case"service":return new fe(t);case"store":return new pe(t);default:throw new Error("Unable to parse Poi "+t.type)}}}]),e}(ut),me=function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.logo=new V("File",null)}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("logo",new ht)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("logo"),t}}]),e}(t)},ve=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.color=null,this.rank=0,this.type=null,this.parameters=new Set,this.parents=new W("Category"),this.children=new G("Category"),this.pois=new W("Poi"),this.tags=new W("Tag")}}],[{key:"getName",value:function(){return"Category"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("color",new D([new I,new xt(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])),this._setPropertyValidator("parameters",new re(new Wt)),this._setPropertyValidator("parents",new Kt),this._setPropertyValidator("children",new Yt),this._setPropertyValidator("pois",new Kt),this._setPropertyValidator("tags",new Kt),this._setPropertyValidator("rank",new j),this._setPropertyValidator("type",new D([new Y,new I]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("children"),t.push("color"),t.push("parameters"),t.push("parents"),t.push("pois"),t.push("rank"),t.push("type"),t.push("tags"),t}}]),e}(K(Dt(J(me(Xt(qt(Z(X)))))))),ye=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return ve}}]),e}(ut),be=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.values=new W("FeatureValue"),this.parents=new W("Feature"),this.children=new G("Feature")}}],[{key:"getName",value:function(){return"Feature"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("values",new Kt),this._setPropertyValidator("parents",new Kt),this._setPropertyValidator("children",new Yt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("values"),t.push("parents"),t.push("children"),t}}]),e}(K(J(qt(Xt(Z(X)))))),we=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return be}}]),e}(ut),_e=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.rank=0,this.unit=null,this.feature=new V("Feature",null),this.products=new W("Product")}}],[{key:"getName",value:function(){return"FeatureValue"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("feature",new ht),this._setPropertyValidator("products",new Kt),this._setPropertyValidator("rank",new j),this._setPropertyValidator("unit",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("feature"),t.push("products"),t.push("rank"),t.push("unit"),t}}]),e}(qt(Xt(Z(K(J(X)))))),xe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return _e}},{key:"_endpoint",get:function(){return"feature-value"}}]),e}(ut),Ee=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return rt}}]),e}(ut),Ae=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_getCreateRequest",value:function(t){if(null===t.uri.match(/^blob/))return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getCreateRequest",this).call(this,t);var n=new FormData;n.set("name",t.name),n.set("context",t.context);var i=rt._getBlobFromUri(t.uri);n.set("file",i,i instanceof File?i.name:"blob"),n.set("site",t.site.value);var r=new ct;return r.method="POST",r.url=this.options.getEndpoint()+"/"+this.constructor._endpoint,r.data=n,r}},{key:"_getUpdateRequest",value:function(t,n){if(-1===n.indexOf("uri")||null===rt._getBlobFromUri(t.uri))return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getUpdateRequest",this).call(this,t,n);var i=new FormData;-1!==n.indexOf("name")&&i.set("name",t.name),-1!==n.indexOf("context")&&i.set("context",t.context),i.set("file",rt._getBlobFromUri(t.uri)),-1!==n.indexOf("site")&&i.set("site",t.site.value);var r=new ct;return r.method="POST",r.url=this.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+t.id,r.data=i,r}}]),e}(Ee),Ce=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.floor_id=null,this.eye=new P,this.target=new P,this.up=new P,this.zoom_max=null,this.zoom_min=null,this.site_calibration=new V("SiteCalibration",null)}}],[{key:"getName",value:function(){return"FloorCalibration"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("site_calibration",new dt),this._setPropertyValidator("floor_id",new j),this._setPropertyValidator("eye",new ft),this._setPropertyValidator("target",new ft),this._setPropertyValidator("up",new ft),this._setPropertyValidator("zoom_min",new D([new I,new pt])),this._setPropertyValidator("zoom_max",new D([new I,new pt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("site_calibration"),t.push("floor_id"),t.push("eye"),t.push("target"),t.push("up"),t.push("zoom_min"),t.push("zoom_max"),t}}]),e}(K(J(X))),Se=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Ce}}]),e}(ut),Me=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.building_id=null,this.floor_id=null,this.shape_id=null,this.position=new P,this.pois=new W("Poi"),this.custom_objects=new W("CustomObject")}}],[{key:"getName",value:function(){return"Place"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("pois",new Kt),this._setPropertyValidator("custom_objects",new Kt),this._setPropertyValidator("building_id",new D([new I,new j])),this._setPropertyValidator("floor_id",new D([new I,new j])),this._setPropertyValidator("shape_id",new D([new I,new j])),this._setPropertyValidator("position",new ft)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("pois"),t.push("custom_objects"),t.push("building_id"),t.push("floor_id"),t.push("shape_id"),t.push("position"),t}}]),e}(Dt(qt(Z(K(J(X)))))),Te=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Me}}]),e}(ut),ke=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.tags=new W("Tag"),this.medias=new G("Media"),this.parameters=new Set}}],[{key:"getName",value:function(){return"Playlist"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("tags",new Kt),this._setPropertyValidator("medias",new Yt),this._setPropertyValidator("parameters",new re(new Wt))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("tags"),t.push("medias"),t.push("parameters"),t}}]),e}(K(Dt(qt(Xt(Gt(Z(J(X)))))))),Fe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return ke}}]),e}(ut),Oe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.device=new V("Device",null),this.floor_calibrations=new W("FloorCalibration"),this.start_floor=null,this.start_point_floor=null,this.start_point_position=new P}}],[{key:"getName",value:function(){return"SiteCalibration"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("device",new dt),this._setPropertyValidator("floor_calibrations",new Kt),this._setPropertyValidator("start_floor",new j),this._setPropertyValidator("start_point_floor",new D([new j,new I])),this._setPropertyValidator("start_point_position",new D([new ft,new I]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("device"),t.push("floor_calibrations"),t.push("start_floor"),t.push("start_point_floor"),t.push("start_point_position"),t}}]),e}(K(J(X))),Pe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Oe}}]),e}(ut),Le=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"isValid",value:function(t,e,n){var i=e[n];return"object"==("undefined"===typeof i?"undefined":x(i))&&null!==i&&Number.isFinite(i.x)&&Number.isFinite(i.y)&&Number.isFinite(i.z)&&Number.isFinite(i.latitude)&&Number.isFinite(i.longitude)&&Number.isFinite(i.altitude)}}]),e}(R),Re=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.opening=null,this.direction=null,this.city=null,this.cp=null,this.address=null,this.phone=null,this.locale=null,this.languages=new Set,this.gps_positions=new Set,this.gps_transform=new Set,this.gps_translate=new Set,this.target_platforms=new Set}}],[{key:"getName",value:function(){return"Site"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("opening",new D([new I,new Wt])),this._setPropertyValidator("direction",new D([new I,new Wt])),this._setPropertyValidator("city",new D([new I,new Y])),this._setPropertyValidator("cp",new D([new I,new Y])),this._setPropertyValidator("address",new D([new I,new Y])),this._setPropertyValidator("phone",new D([new I,new Y])),this._setPropertyValidator("locale",new D([new I,new Y])),this._setPropertyValidator("languages",new re(new Wt)),this._setPropertyValidator("gps_positions",new re(new Le)),this._setPropertyValidator("gps_transform",new re(new pt)),this._setPropertyValidator("gps_translate",new re(new pt)),this._setPropertyValidator("target_platforms",new re(new Wt))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("opening"),t.push("direction"),t.push("city"),t.push("cp"),t.push("address"),t.push("phone"),t.push("locale"),t.push("languages"),t.push("gps_positions"),t.push("gps_transform"),t.push("gps_translate"),t.push("target_platforms"),t}}]),e}(J(Dt(me(qt(Xt(function(t){return function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.email=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("email",new D([new I,new Y]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("email"),t}}]),e}(t)}(Gt(Z(X))))))))),De=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"getCurrent",value:function(){return this.get(this.em.options.site)}},{key:"_getLoadRequest",value:function(){var t=new ct;return t.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+this.em.options.site,t}},{key:"_loadFromApiIntoNewStorage",value:function(){var t=this;return this.em._xhr(this._getLoadRequest(),200).then(function(e){var n=new lt;return n.store(t.constructor.fromJSON(e.data)),n})}}],[{key:"getEntityClass",value:function(){return Re}}]),e}(ut),Be=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.categories=new W("Category"),this.medias=new W("Media"),this.pois=new W("Poi"),this.playlists=new W("Playlist")}}],[{key:"getName",value:function(){return"Tag"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("categories",new Kt),this._setPropertyValidator("medias",new Kt),this._setPropertyValidator("pois",new Kt),this._setPropertyValidator("playlists",new Kt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("categories"),t.push("medias"),t.push("pois"),t.push("playlists"),t}}]),e}(Dt(qt(Z(K(J(X)))))),Ie=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Be}}]),e}(ut),Ne=function(){function t(e){o(this,t),this._init(e)}return E(t,[{key:"_init",value:function(e){if(this.em=e,this.eventDispatcher=k,this.constructor===t)throw new TypeError("Cannot construct AbstractListener instances directly");this._subscribe()}},{key:"_subscribe",value:function(){var t=this.constructor.getEntityClass().getName(),e=this.em.getRepository(t);this.eventDispatcher.subscribe(e,F.CREATE,this.onCreate.bind(this)),this.eventDispatcher.subscribe(e,F.UPDATE,this.onUpdate.bind(this)),this.eventDispatcher.subscribe(e,F.REMOVE,this.onRemove.bind(this))}},{key:"onCreate",value:function(t){}},{key:"onUpdate",value:function(t){}},{key:"onRemove",value:function(t){}},{key:"_cascadeRemove",value:function(t,e,n){var i=this,r=this.em.getRepository(t[e].classOf);if(t[e]instanceof V){var o=r.get(t[e]);this.constructor._isAssociatedTo(t,o,n)&&r._remove(o,!0)}t[e]instanceof W&&t[e].forEach(function(e){var o=r.get(e);i.constructor._isAssociatedTo(t,o,n)&&r._remove(o,!0)}),t[e]instanceof G&&t[e].forEach(function(e){var o=e.id,s=r.get(o);i.constructor._isAssociatedTo(t,s,n)&&r._remove(s,!0)})}},{key:"_unsetFromInversed",value:function(t,e,n){var i=this.em.getRepository(t[e].classOf);if(t[e]instanceof V&&null!==t[e].value){var r=i.get(t[e]);if(null!==r){var o=r.clone();o[n]=null,i._persist(o,!0)}}t[e]instanceof W&&t[e].forEach(function(t){var e=i.get(t);if(null!==e){var r=e.clone();r[n]=null,i._persist(r,!0)}})}},{key:"_removeFromInversed",value:function(t,e,n){var i=this.em.getRepository(t[e].classOf);if(t[e]instanceof V&&null!==t[e].value){var r=i.get(t[e]);if(null!==r){var o=r.clone();o[n].remove(t),i._persist(o,!0)}}t[e]instanceof W&&t[e].forEach(function(e){var r=i.get(e);if(null!==r){var o=r.clone();o[n].remove(t),i._persist(o,!0)}}),t[e]instanceof G&&t[e].forEach(function(e){var r=e.id,o=i.get(r);if(null!==o){var s=o.clone();s[n].remove(t),i._persist(s,!0)}})}},{key:"_onManyToManyOrToLinkPropertyChange",value:function(t,e,n,i,r,o){var s=this,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=this.em.getRepository(t[n].classOf);t[n].forEach(function(r){null!==e&&e[n].has(r)||s.constructor._addToNewlyInversed(t,null,c,r,i,o)}),null!==e&&e[n].forEach(function(e){t[n].has(e)||(null!==a&&a(c.get(e),t),s.constructor._removeFromFormerInversed(t,c,e,i,r))})}},{key:"_onLinkToManyOrToLinkPropertyChange",value:function(t,e,n,i,r,o){var s=this,a=this.em.getRepository(t[n].classOf);t[n].forEach(function(r){var c=r.id,l=r.position;null!==e&&e[n].has(c)&&e[n].getPositionOf(c)===l||s.constructor._addToNewlyInversed(t,l,a,c,i,o)}),null!==e&&e[n].forEach(function(e){var o=e.id;t[n].has(o)||s.constructor._removeFromFormerInversed(t,a,o,i,r)})}},{key:"_onOneToManyPropertyChange",value:function(t,e,n,i,r,o){var s=this,a=this.em.getRepository(t[n].classOf);t[n].forEach(function(r){null!==e&&e[n].has(r)||s.constructor._setToNewlyInversed(t,a,r,i,o)}),null!==e&&e[n].forEach(function(e){!t[n].has(e)&&s.constructor._isAssociatedTo(t,a.get(e),i)&&s.constructor._unsetFromFormerInversed(t,a,e,i,r)})}},{key:"_onManyToOnePropertyChange",value:function(t,e,n,i,r,o){var s=this.em.getRepository(t[n].classOf);this.constructor._addToNewlyInversed(t,null,s,t[n],i,o),null!==e&&this.constructor._removeFromFormerInversed(t,s,e[n],i,r)}},{key:"_onOneToOnePropertyChange",value:function(t,e,n,i,r,o){var s=this.em.getRepository(t[n].classOf);i&&this.constructor._setToNewlyInversed(t,s,t[n],i,o),null!==e&&this.constructor._unsetFromFormerInversed(t,s,e[n],i,r)}}],[{key:"getEntityClass",value:function(){throw new TypeError("You need to implement static getEntityClass in AbstractListener inheritance")}},{key:"_isAssociatedTo",value:function(t,e,n){return null===n||null===e?Boolean(e):e[n]instanceof V&&e[n].is(t)?e[n].is(t):(e[n]instanceof W||e[n]instanceof G)&&e[n].has(t)}},{key:"_isPropertyChanged",value:function(t,e,n,i){return!!e.constructor.keys.includes(t)&&(null===n||-1!==i.indexOf(t))}},{key:"_addToNewlyInversed",value:function(t,e,n,i,r,o){if(r||o){var s=n.get(i);if(null!==s){var a=s.clone();r&&a[r].add(t,e),o&&o(a),n._persist(a,!0)}}}},{key:"_removeFromFormerInversed",value:function(t,e,n,i,r){if(i){var o=e.get(n);if(null!==o&&this._isAssociatedTo(t,o,i)){var s=o.clone();s[i].remove(t),r&&0===s[i].size?e._remove(s,!0):e._persist(s,!0)}}}},{key:"_setToNewlyInversed",value:function(t,e,n,i,r){if(i||r){var o=e.get(n);if(null!==o){var s=o.clone();i&&(s[i]=t),r&&r(s),e._persist(s,!0)}}}},{key:"_unsetFromFormerInversed",value:function(t,e,n,i,r){if(i||r){var o=e.get(n);if(null!==o&&this._isAssociatedTo(t,o,i)){var s=o.clone();r?e._remove(s,!0):(s[i]=null,e._persist(s,!0))}}}}]),t}(),je=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"place","custom_objects"),this._removeFromInversed(t,"poi","custom_objects"),t instanceof Ct&&this._cascadeRemove(t,"file",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("place",t,e,n)&&this._onManyToOnePropertyChange(t,e,"place","custom_objects"),this.constructor._isPropertyChanged("poi",t,e,n)&&this._onManyToOnePropertyChange(t,e,"poi","custom_objects"),this.constructor._isPropertyChanged("file",t,e,n)&&this._onManyToOnePropertyChange(t,e,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return vt}},{key:"_onNewFile",value:function(t){t.context=tt.PICTO}}]),e}(Ne),Ue=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._cascadeRemove(t,"site_calibration","device")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("site_calibration",t,e,n)&&this._onOneToOnePropertyChange(t,e,"site_calibration","device",!0)}}],[{key:"getEntityClass",value:function(){return kt}}]),e}(Ne),$e=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._cascadeRemove(t,"file",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("file",t,e,n)&&this._onManyToOnePropertyChange(t,e,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return Bt}},{key:"_onNewFile",value:function(t){null!==t&&(t.context="map")}}]),e}(Ne),ze=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"tags","medias"),this._removeFromInversed(t,"playlists","medias"),this._removeFromInversed(t,"pois","medias"),(t instanceof te||t instanceof ie||t instanceof ee||t instanceof oe)&&this._cascadeRemove(t,"file",null),this._cascadeRemove(t,"preview",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","medias"),this.constructor._isPropertyChanged("playlists",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"playlists","medias"),this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","medias"),this.constructor._isPropertyChanged("preview",t,e,n)&&this._onManyToOnePropertyChange(t,e,"preview",null,!0,this.constructor._onNewPreview),this.constructor._isPropertyChanged("file",t,e,n)&&this._onManyToOnePropertyChange(t,e,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return Zt}},{key:"_onNewPreview",value:function(t){t.context="media_preview"}},{key:"_onNewFile",value:function(t){t.context="media_file"}}]),e}(Ne),He=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"parents","children"),this._removeFromInversed(t,"children","parents"),this._removeFromInversed(t,"categories","pois"),this._removeFromInversed(t,"tags","pois"),this._removeFromInversed(t,"medias","pois"),this._removeFromInversed(t,"places","pois"),this._cascadeRemove(t,"custom_objects","poi"),t instanceof he&&this._removeFromInversed(t,"values","products")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("name",t,e,n)&&this._onNameUpdated(t),this.constructor._isPropertyChanged("parents",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"parents","children"),this.constructor._isPropertyChanged("children",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"children","parents"),this.constructor._isPropertyChanged("categories",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"categories","pois"),this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","pois"),this.constructor._isPropertyChanged("medias",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"medias","pois"),this.constructor._isPropertyChanged("places",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"places","pois",!1,null,this._onPlaceRemoved.bind(this)),this.constructor._isPropertyChanged("custom_objects",t,e,n)&&this._onOneToManyPropertyChange(t,e,"custom_objects","poi",!1,this._onNewCustomObject.bind(this)),this.constructor._isPropertyChanged("logos",t,e,n)&&(this._onLinkToManyOrToLinkPropertyChange(t,e,"logos",null,!0,this.constructor._onNewLogo),this.constructor._onLogoUpdated(t,this.em)),this.constructor._isPropertyChanged("pictures",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"pictures",null,!0,this.constructor._onNewPicture),this.constructor._isPropertyChanged("values",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"values","products")}},{key:"_onNameUpdated",value:function(t){var e=this;this.em.getRepository(t.custom_objects.classOf).getList(t.custom_objects).forEach(function(n){n instanceof Et&&e._updateLabelNameFromPoi(n,t)})}},{key:"_onPlaceRemoved",value:function(t,e){var n=this.em.getRepository(e.custom_objects.classOf);n.getList(e.custom_objects).forEach(function(e){null!==e&&e.place.is(t)&&n._remove(e,!0)})}},{key:"_onNewCustomObject",value:function(t){var e=this.em.getRepository("Poi").get(t.poi);if(t instanceof Et&&this._updateLabelNameFromPoi(t,e),t instanceof Ct){var n=this.constructor._getFirstPoiLogo(e,this.em);this.constructor._updatePictoFileFromPoiLogo(t,n,this.em)}}},{key:"_updateLabelNameFromPoi",value:function(t,e){if(t.label!==e.name){var n=t.clone();n.label=e.name,this.em.getRepository("CustomObject")._persist(n,!0)}}}],[{key:"getEntityClass",value:function(){return ae}},{key:"_onNewLogo",value:function(t){t.context="poi"}},{key:"_onNewPicture",value:function(t){t.context="poi"}},{key:"_onLogoUpdated",value:function(t,e){var n=this,i=e.getRepository(t.custom_objects.classOf).getList(t.custom_objects),r=this._getFirstPoiLogo(t,e);i.forEach(function(t){t instanceof Ct&&n._updatePictoFileFromPoiLogo(t,r,e)})}},{key:"_isFirstLogo",value:function(t,e){return t.logos.size>0&&t.logos.values[0].id===e.id}},{key:"_getFirstPoiLogo",value:function(t,e){var n=e.getRepository(t.logos.classOf).getList(t.logos);return 0===n.length?null:n[0]}},{key:"_updatePictoFileFromPoiLogo",value:function(t,e,n){return null===e?(n.getRepository("CustomObject")._remove(t,!0),!1):null===e.content_hash?(n.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: logo content hash is not computed, skipping"),!1):t.original_md5!==e.content_hash}}]),e}(Ne),Ve=function(){function t(e){o(this,t),this.src={uri:e,image:null,width:null,height:null},this.target={uri:null,image:null,width:null,height:null,offset:{x:0,y:0}}}return E(t,[{key:"init",value:function(){return Promise.reject(new Error("ImageResizer is not available on NodeJS"))}},{key:"isSrcPowerOfTwo",value:function(){return this.isPowerOfTwoNumber(this.src.width)&&this.isPowerOfTwoNumber(this.src.height)}},{key:"isTargetPowerOfTwo",value:function(){return this.isPowerOfTwoNumber(this.target.width)&&this.isPowerOfTwoNumber(this.target.height)}},{key:"isPowerOfTwoNumber",value:function(t){return t>1&&0==(t&t-1)}},{key:"getNextPowerOfTwoNumber",value:function(t){for(var e=2;e<t;)e*=2;return e}},{key:"getWidthStretching",value:function(){return this.target.width/(this.target.width-2*this.target.offset.x)}},{key:"getHeightStretching",value:function(){return this.target.height/(this.target.height-2*this.target.offset.y)}},{key:"makePowerOfTwo",value:function(){if(!this.isTargetPowerOfTwo()){var t=this.isPowerOfTwoNumber(this.target.width),e=this.isPowerOfTwoNumber(this.target.height),n=this.getNextPowerOfTwoNumber(this.target.width),i=this.getNextPowerOfTwoNumber(this.target.height);if(!e&&!t)return this.resize(Math.max(n,i),!0),void this.makePowerOfTwo();e?(this.target.offset.x=Math.round((n-this.target.width)/2),this.target.width=n):(this.target.offset.y=Math.round((i-this.target.height)/2),this.target.height=i),this.resize()}}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512;if(!(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.target.width<t&&this.target.height<t)){var e=void 0;e=this.target.height>this.target.width?t/this.target.height:t/this.target.width,this.target.width=Math.round(this.target.width*e),this.target.height=Math.round(this.target.height*e),this.target.offset.x=Math.round(this.target.offset.x*e),this.target.offset.y=Math.round(this.target.offset.y*e)}}},{key:"save",value:function(){return Promise.reject(new Error("ImageResizer is not available on NodeJS"))}}]),t}(),We=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"init",value:function(){var t=this;return new Promise(function(e,n){try{var i=new Image;i.onload=function(){t.src.image=i,t.src.width=i.width,t.src.height=i.height,t.target.width=i.width,t.target.height=i.height,e()},i.onerror=function(t){n(t)},i.src=t.src.uri}catch(e){n(e)}})}},{key:"save",value:function(){var t=this;return new Promise(function(e,n){try{var i=document.createElement("canvas");i.width=t.target.width,i.height=t.target.height,i.getContext("2d").drawImage(t.src.image,t.target.offset.x,t.target.offset.y,t.target.width/t.getWidthStretching(),t.target.height/t.getHeightStretching()),i.toBlob(function(n){var i=URL.createObjectURL(n);rt._addBlobUri(i,n),t.target.uri=i,e(i)})}catch(e){n(e)}})}}]),e}(Ve),Ge=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,null,[{key:"_updatePictoFileFromPoiLogo",value:function(t,n,i){var r=this;if(!w(e.__proto__||Object.getPrototypeOf(e),"_updatePictoFileFromPoiLogo",this).call(this,t,n,i)){var o=i.getRepository("Poi"),s=i.getRepository("CustomObject"),a=i.getRepository("File"),c=a.get(n);if(null!==c){var l=new We(c.uri),u=l.init().then(function(){return l.makePowerOfTwo(),l.save()}).then(function(e){var u=s.get(t),h=o.get(u.poi);c=a.get(c);var d=a.get(u.file);if(null!==u&&null!==h&&null!==c&&r._isFirstLogo(h,c)){var f=u.clone();l.target.height/l.getHeightStretching()>l.target.width/l.getWidthStretching()?(f.height=Math.round(u.height*l.getHeightStretching()),f.width=Math.round(u.height*l.target.width/l.target.height)):(f.width=Math.round(u.width*l.getWidthStretching()),f.height=Math.round(u.width*l.target.height/l.target.width));var p=d.clone();p.uri=e,p.file_type=c.file_type,p.site=c.site;var g={resizer:{src:{width:l.src.width,height:l.src.height},target:{width:l.target.width,height:l.target.height}},picto:{src:{width:t.width,height:t.height},target:{width:f.width,height:f.height}}};i.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: updating picto file",g),i.getRepository("File")._persist(p,!0),f.file=p,f.original_md5=n.content_hash,i.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: updating picto",g),i.getRepository("CustomObject")._persist(f,!0)}}).catch(function(t){throw i.logger.warn("PoiListener#_updatePictoFileFromPoiLogo: Failed",{error:t}),t});i._waitFor(u)}}}}]),e}(He),qe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"parents","children"),this._removeFromInversed(t,"children","parents"),this._removeFromInversed(t,"pois","categories"),this._removeFromInversed(t,"tags","categories"),this._cascadeRemove(t,"logo",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("parents",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"parents","children"),this.constructor._isPropertyChanged("children",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"children","parents"),this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","categories"),this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","categories"),this.constructor._isPropertyChanged("logo",t,e,n)&&this._onManyToOnePropertyChange(t,e,"logo",null,!0,this.constructor._onNewLogo)}}],[{key:"getEntityClass",value:function(){return ve}},{key:"_onNewLogo",value:function(t){null!==t&&(t.context=tt.CATEGORY)}}]),e}(Ne),Xe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"parents","children"),this._removeFromInversed(t,"children","parents"),this._cascadeRemove(t,"values","feature")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("parents",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"parents","children"),this.constructor._isPropertyChanged("children",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"children","parents"),this.constructor._isPropertyChanged("values",t,e,n)&&this._onManyToOnePropertyChange(t,e,"values","feature",!0)}}],[{key:"getEntityClass",value:function(){return be}}]),e}(Ne),Ke=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"products","values"),this._removeFromInversed(t,"feature","values")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("feature",t,e,n)&&this._onManyToOnePropertyChange(t,e,"feature","values"),this.constructor._isPropertyChanged("products",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"products","values")}}],[{key:"getEntityClass",value:function(){return _e}}]),e}(Ne),Ye=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("uri",t,e,n)&&this._onUriUpdated(t),this.constructor._isPropertyChanged("context",t,e,n)&&this._onContextUpdated(t),this.constructor._isPropertyChanged("content_hash",t,e,n)&&this._onContentHashUpdated(t)}},{key:"_onUriUpdated",value:function(t){t.context===tt.PICTO&&(this.em.logger.debug("FileListener#_onUriUpdated: make picto file pow2"),this._makePictoFilePow2(t)),this.em.logger.debug("FileListener#_onUriUpdated: force update content hash"),this._updateContentHash(t,!0)}},{key:"_onContentHashUpdated",value:function(t){if(t.context===tt.POI){var e=this.constructor._getPoiFromFile(t,this.em);null!==e&&Ge._getFirstPoiLogo(e,this.em)===t&&(this.em.logger.debug("FileListener#_onContentHashUpdated: update associated picto"),Ge._onLogoUpdated(e,this.em))}}},{key:"_onContextUpdated",value:function(t){t.context===tt.PICTO&&(this.em.logger.debug("FileListener#_onContextUpdated: make picto pow2"),this._makePictoFilePow2(t))}},{key:"_updateContentHash",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===t.content_hash||n){var i=ct.getUriContentHash(t.uri).then(function(n){var i=e.em.getRepository("File"),r=i.get(t);if(null===r||r.uri!==t.uri)return void e.em.logger.debug("FileListener#_updateContentHash: File has been removed or binary has been updated while computing ==> Skip");var o=r.clone();o.content_hash=n,i._persist(o,!0)}).catch(function(t){throw t});this.em._waitFor(i)}}},{key:"_makePictoFilePow2",value:function(t){return this.em.logger.warn("Cannot make an image Pow2 yet"),Promise.resolve(!1)}}],[{key:"getEntityClass",value:function(){return rt}},{key:"_getPictoFromFile",value:function(t,e){var n=e.getRepository("CustomObject").findBy({type:yt.PICTO,file:function(e){return e.is(t)}});return 0===n.length?null:n[0]}},{key:"_getPoiFromFile",value:function(t,e){var n=e.getRepository("Poi").findBy({logos:function(e){return e.has(t)}});return 0===n.length?null:n[0]}}]),e}(Ne),Ze=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"_makePictoFilePow2",value:function(t){var e=this,n=new We(t.uri),i=n.init().then(function(){return n.isSrcPowerOfTwo()?Promise.resolve(!0):(n.makePowerOfTwo(),n.save().then(function(i){var r=e.em.getRepository("File"),o=r.get(t);if(null!==o&&o.uri===t.uri&&o.context===tt.PICTO){var s=o.clone(),a=e.constructor._getPictoFromFile(o,e.em);if(null!==a){s.uri=i,s.content_hash=null;var c=a.clone();c.width=Math.round(a.width*n.getWidthStretching()),c.height=Math.round(a.height*n.getHeightStretching()),e.em.logger.debug("FileListener#_makePictoFilePow2: updating picto to fit new image",{src_picto:{width:a.width,height:a.height},target_picto:{width:c.width,height:c.height},src_file:{width:n.src.width,height:n.src.height},target_file:{width:n.target.width,height:n.target.height}}),e.em.getRepository("CustomObject")._persist(c,!0)}else s.context=tt.DEFAULT;e.em.logger.debug("FileListener#_makePictoFilePow2: updating picto file",{src_file:{width:n.src.width,height:n.src.height},target_file:{width:n.target.width,height:n.target.height}}),r._persist(s,!0)}}))}).catch(function(t){throw e.em.logger.warn("FileListener#_makePictoFilePow2: Failed",{error:t}),t});return this.em._waitFor(i),i}}],[{key:"_getPictoFromFile",value:function(t,e){var n=e.getRepository("CustomObject").findBy({type:yt.PICTO,file:function(e){return e.is(t)}});return 0===n.length?null:n[0]}},{key:"_getPoiFromFile",value:function(t,e){var n=e.getRepository("Poi").findBy({logos:function(e){return e.has(t)}});return 0===n.length?null:n[0]}}]),e}(Ye),Je=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"site_calibration","floor_calibrations")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("site_calibration",t,e,n)&&this._onManyToOnePropertyChange(t,e,"site_calibration","floor_calibrations")}}],[{key:"getEntityClass",value:function(){return Ce}}]),e}(Ne),Qe=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"pois","places"),this._cascadeRemove(t,"custom_objects","place")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","places"),this.constructor._isPropertyChanged("custom_objects",t,e,n)&&this._onOneToManyPropertyChange(t,e,"custom_objects","place",!0)}}],[{key:"getEntityClass",value:function(){return Me}}]),e}(Ne),tn=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"medias","playlists"),this._removeFromInversed(t,"tags","playlists")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("medias",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"medias","playlists"),this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","playlists")}}],[{key:"getEntityClass",value:function(){return ke}}]),e}(Ne),en=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._unsetFromInversed(t,"device","site_calibration"),this._cascadeRemove(t,"floor_calibrations","site_calibration")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("floor_calibrations",t,e,n)&&this._onOneToManyPropertyChange(t,e,"floor_calibrations","site_calibration",!0),this.constructor._isPropertyChanged("device",t,e,n)&&this._onOneToOnePropertyChange(t,e,"device","site_calibration")}}],[{key:"getEntityClass",value:function(){return Oe}}]),e}(Ne),nn=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){throw new TypeError("You cannot remove the Site !")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("logo",t,e,n)&&this._onManyToOnePropertyChange(t,e,"logo",null,!0,this.constructor._onNewLogo)}}],[{key:"getEntityClass",value:function(){return Re}},{key:"_onNewLogo",value:function(t){null!==t&&(t.context="site")}}]),e}(Ne),rn=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"categories","tags"),this._removeFromInversed(t,"pois","tags"),this._removeFromInversed(t,"playlists","tags"),this._removeFromInversed(t,"medias","tags")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","tags"),this.constructor._isPropertyChanged("categories",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"categories","tags"),this.constructor._isPropertyChanged("medias",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"medias","tags"),this.constructor._isPropertyChanged("playlists",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"playlists","tags")}}],[{key:"getEntityClass",value:function(){return Be}}]),e}(Ne),on=function(){function t(e){o(this,t),this.em=e,this.em.logger.debug("UnitOfWork: instantiate"),this._reset()}return E(t,[{key:"flush",value:function(){var t=this;this.em.logger.debug("UnitOfWork: flush start"),this._prepare();var e=new Set(this.commits)[Symbol.iterator]();return this._flushCommits(e).then(function(){return t._finish()})}},{key:"_reset",value:function(){this.em.logger.debug("UnitOfWork: reset"),this.commits=new Set,this._symbolToId=new Map,this._symbolToRepository=new Map}},{key:"_prepare",value:function(){this.em.logger.debug("UnitOfWork: prepare"),this._mergeConsecutiveCommits()}},{key:"_mergeConsecutiveCommits",value:function(){var t=this;this.em.logger.debug("UnitOfWork: merge commits");var e=new Set,n=null;this.commits.forEach(function(i){var r,o,s=t.constructor._mergeTwoConsecutiveCommits(n,i);switch(t.em.logger.debug("UnitOfWork: merge two consecutive commits",{previous:n,commit:i,merged:s}),s.length){case 0:n=null;break;case 1:var a=_(s,1);n=a[0];break;case 2:e.add(s[0]),r=s,o=_(r,2),n=o[1];break;default:throw new Error("Unexpected")}}),null!==n&&e.add(n),this.commits=e}},{key:"_finish",value:function(){var t=this;this.em.logger.debug("UnitOfWork: finish");var e=new Set;return this._symbolToId.entries().forEach(function(n){var i=_(n,2),r=i[0],o=i[1],s=t._symbolToRepository.get(r);e.add({id:o,symbol:r,repository:s})}),this._reset(),e}},{key:"_replaceFileReferenceSymbolToId",value:function(t){"symbol"==x(t.value)&&(t.value=this._symbolToId.get(t.value))}},{key:"_replaceFileCollectionSymbolToId",value:function(t){var e=this;t.forEach(function(n){"symbol"==("undefined"===typeof n?"undefined":x(n))&&(t.add(e._symbolToId.get(n)),t.remove(n))})}},{key:"_replaceFileOrderedCollectionSymbolToId",value:function(t){var e=this;t.forEach(function(n){var i=_(n,2),r=i[0],o=i[1];"symbol"==("undefined"===typeof r?"undefined":x(r))&&(t.add(e._symbolToId.get(r),o),t.remove(r))})}},{key:"_flushCommits",value:function(t){var e=this,n=t.next(),i=n.value;return n.done?Promise.resolve():(this.em.logger.info("UnitOfWork: "+this.commits.size+" request to send"),this.em.logger.debug("UnitOfWork: flush commits start",{commit:i}),this._flushCommit(i).then(function(){return e.em.logger.debug("UnitOfWork: flush commits next",{commit:i}),e.commits.delete(i),e._flushCommits(t)}))}},{key:"_flushCommit",value:function(t){var e=_(t,3),n=e[0],i=e[1],r=e[2];switch(i){case F.CREATE:return this._flushCreateCommit(n,r);case F.UPDATE:return this._flushUpdateCommit(n,r.current,r.changes);case F.REMOVE:return this._flushRemoveCommit(n,r);default:return Promise.reject(new Error("UOW: Unhandled event "+i))}}},{key:"_flushCreateCommit",value:function(t,e){var n=this;this._replaceAssociatedSymbolToId(e);var i=t._getCreateRequest(e);return this.em._xhr(i,200).then(function(i){var r=i.data;return n._symbolToId.set(e.id,r.id),n._symbolToRepository.set(e.id,t),n.em.logger.debug("UnitOfWork: retrieved identifier",{symbol:e.id,id:r.id}),r.id})}},{key:"_flushUpdateCommit",value:function(t,e,n){this._replaceAssociatedSymbolToId(e);var i=t._getUpdateRequest(e,n);return this.em._xhr(i,204)}},{key:"_flushRemoveCommit",value:function(t,e){var n=this;e.forEach(function(t){n._replaceAssociatedSymbolToId(t)});for(var i=[],r=0;r<e.length;r+=50)!function(r){var o=e.slice(r,r+50),s=t._getRemoveRequest(o);i.push(n.em._xhr(s,204).catch(function(e){if(e instanceof Error)return Promise.reject(e);var i=e.data;if(!i.hasOwnProperty("errors"))return Promise.reject(new Error("Server error"));var r=i.errors;if(e.status>=500)return Promise.reject(r);n.em.logger.warn("UnitOfWork: flush remove commit invalid data supplied",{json:i});var s=Object.keys(r);if(1!==s.length||!s.includes("id"))return Promise.reject(r);for(var a=Object.keys(r.id).map(function(t){return parseInt(t.replace("#",""),10)}),c=[],l=0;l<o.length;l++)a.includes(l)||c.push(o[l]);return 0===c.length?Promise.resolve():n._flushRemoveCommit(t,c)}))}(r);return Promise.all(i)}},{key:"_replaceAssociatedSymbolToId",value:function(t){var e=this;this.em.logger.debug("UnitOfWork: replace associated symbol to id",{entity:t}),"symbol"==x(t.id)&&this._symbolToId.has(t.id)&&(t.id=this._symbolToId.get(t.id),this.em.logger.debug("UnitOfWork: replace associated symbol to id (own id replaced)",{entity:t})),t.constructor.keys.forEach(function(n){t[n]instanceof V&&e._replaceReferenceAssociatedSymbol(n,t),t[n]instanceof W&&e._replaceCollectionAssociatedSymbol(n,t),t[n]instanceof G&&e._replaceOrderedCollectionAssociatedSymbol(n,t)})}},{key:"_replaceReferenceAssociatedSymbol",value:function(t,e){var n=e[t].value;if("symbol"==("undefined"===typeof n?"undefined":x(n))){if(!this._symbolToId.has(n))throw this.em.logger.error("UnitOfWork: replace associated symbol to id (reference id not found)",{key:t}),new Error("Unable to find Symbol <--\x3e Id matching");this.em.logger.debug("UnitOfWork: replace associated symbol to id (reference id replaced)",{key:t}),e[t]=this._symbolToId.get(n)}}},{key:"_replaceCollectionAssociatedSymbol",value:function(t,e){var n=this,i=[];e[t].forEach(function(e){if("symbol"!=("undefined"===typeof e?"undefined":x(e)))i.push(e);else{if(!n._symbolToId.has(e))throw n.em.logger.error("UnitOfWork: replace associated symbol to id (collection item id not found)",{key:t}),new Error("Unable to find Symbol <--\x3e Id matching");n.em.logger.debug("UnitOfWork: replace associated symbol to id (collection item id replaced)",{key:t}),i.push(n._symbolToId.get(e))}}),e[t]=i}},{key:"_replaceOrderedCollectionAssociatedSymbol",value:function(t,e){var n=this,i=[];e[t].forEach(function(e){var r=e.id,o=e.position;if("symbol"!=("undefined"===typeof r?"undefined":x(r)))i.push({id:r,position:o});else{if(!n._symbolToId.has(r))throw n.em.logger.error("UnitOfWork: replace associated symbol to id (ordered collection item id not found)",{key:t}),new Error("Unable to find Symbol <--\x3e Id matching");n.em.logger.debug("UnitOfWork: replace associated symbol to id (ordered collection item id replaced)",{key:t}),i.push({id:n._symbolToId.get(r),position:o})}}),e[t]=i}},{key:"_hasPendingChanges",get:function(){return this._mergeConsecutiveCommits(),0!==this.commits.size}}],[{key:"_mergeTwoConsecutiveCommits",value:function(t,e){if(null===t)return[e];var n=_(t,3),r=n[0],o=n[1],s=n[2],a=_(e,3),c=a[0],l=a[1],u=a[2];if(r!==c)return[t,e];switch(o){case F.UPDATE:if(l===F.UPDATE&&s.current===u.previous){var h=s.previous,d=u.current,f=r.constructor._compare(h,d);return 0===f.length?[]:[[r,F.UPDATE,{current:d,previous:h,changes:f}]]}break;case F.CREATE:if(l===F.REMOVE&&u.includes(s))return[];if(l===F.UPDATE&&s===u.previous)return[[r,F.CREATE,u.current]];break;case F.REMOVE:if(l===F.REMOVE&&r===c)return[[r,F.REMOVE,[].concat(i(s),i(u))]];break;default:throw new Error("Unexpected")}return[t,e]}}]),t}(),sn=[De,Vt,Ae,ye,ge,we,xe,Te,St,Fe,se,Rt,Pe,Se,Ie],an=[nn,$e,Ze,qe,Ge,Xe,Ke,Qe,je,tn,ze,Ue,en,Je,rn],cn=function(){function t(e){o(this,t),this.options=null,this.logger=null,this._repositories=new Map,this._listeners=new Map,this.locale=null,this._uow=null,this.locked=!1,this._waiting=new Set,this._init(new C(e))}return E(t,null,[{key:"generateNonce",value:function(){var t=Date.now()*Math.random();return g()(t.toString(),1)}},{key:"now",value:function(){return Math.round(Date.now()/1e3).toString()}}]),E(t,[{key:"_init",value:function(t){t.validate(),this.options=t,this.logger=this.options.logger,this.logger.info("EntityManager: instantiate",{options:t}),this._uow=new on(this);for(var e=0;e<sn.length;e++)this._repositories.set(sn[e].getName(),new sn[e](this));for(var n=0;n<an.length;n++)this._listeners.set(an[n].getEntityClass().getName(),new an[n](this));this.locale=this.options.locale}},{key:"_lock",value:function(){this.logger.info("EntityManager: locked"),this.locked=!0}},{key:"_unlock",value:function(){this.logger.info("EntityManager: unlocked"),this.locked=!1}},{key:"hasPendingChanges",value:function(){return this._uow._hasPendingChanges}},{key:"isFullyLoaded",value:function(){for(var t=this.getRepositories(),e=0;e<t.length;e++)if(t[e]._status!==O.LOADED)return!1;return!0}},{key:"getRepository",value:function(t){return this._repositories.has(t)?this._repositories.get(t):null}},{key:"getRepositoryNames",value:function(){return Array.from(this._repositories.keys())}},{key:"getRepositories",value:function(){return Array.from(this._repositories.values())}},{key:"load",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise(function(n,i){t.logger.info("EntityManager: loading start");var r=[];t.getRepositories().forEach(function(t){r.push(t.load(e))}),Promise.all(r).then(function(){t.logger.info("EntityManager: loading success"),n()},function(e){t.logger.error("EntityManager: loading failed",{error:e}),i(e)})})}},{key:"loadFromCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(n,i){t.logger.info("EntityManager: loading start");var r=[];t.getRepositories().forEach(function(t){r.push(t.loadFromCache(e))}),Promise.all(r).then(function(){t.logger.info("EntityManager: loading success"),n()},function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.logger.error("EntityManager: loading failed",{error:n}),i.apply(void 0,n)})})}},{key:"flush",value:function(){var t=this;return new Promise(function(e,n){t.options.state===A.PUBLISHED&&t.logger.warn("EntityManager: your are about to flush into PUBLISHED state"),t.logger.info("EntityManager: flush start"),t._assertIsNotLocked(),t._assertIsFullyLoaded(),t.logger.info("EntityManager: waiting listeners to be completed before send data"),t._wait().then(e,n)}).then(function(){return t._lock(),t._uow.flush()}).then(function(e){return t._unlock(),e.forEach(function(t){k.publish(t.repository,F.IDENTIFIER_WILL_CHANGE,[t.id,t.symbol])}),t.pull().then(function(){e.forEach(function(t){k.publish(t.repository,F.IDENTIFIER_DID_CHANGE,[t.id,t.symbol])})})}).catch(function(e){throw t.logger.error("EntityManager: flush failed",{error:e}),t._unlock(),e})}},{key:"pull",value:function(){var t=this;if(this.logger.info("EntityManager: pull start"),this.hasPendingChanges())throw this.logger.error("EntityManager: pull failed (pending changes)."),new Error("You cannot pull while there is unsaved modifications");this._lock();var e=[];return this.getRepositories().forEach(function(t){e.push(t._loadIntoNewStorage(!1).then(function(e){var n=t._replaceStorage(e);return[t,n]}))}),Promise.all(e).then(function(t){t.forEach(function(t){var e=_(t,2),n=e[0];e[1][F.REMOVE].forEach(function(t){k.publish(n,F.REMOVE,t)})}),t.forEach(function(t){var e=_(t,2),n=e[0];e[1][F.CREATE].forEach(function(t){k.publish(n,F.CREATE,t)})}),t.forEach(function(t){var e=_(t,2),n=e[0];e[1][F.UPDATE].forEach(function(t){k.publish(n,F.UPDATE,t)})})}).then(function(){t._unlock()}).catch(function(e){return t._unlock(),Promise.reject(e)})}},{key:"_assertIsFullyLoaded",value:function(){if(!this.isFullyLoaded())throw this.logger.error("EntityManager: not fully failed."),new TypeError("You need to fully load EntityManager to use write features")}},{key:"_assertIsNotLocked",value:function(){if(this.locked)throw this.logger.error("EntityManager: locked."),new Error("The EntityManager is locked, readonly operations are permitted")}},{key:"_xhr",value:function(t,e){var n=this;return t.addParameter("site",this.options.site),t.addHeaders(this.constructor.getHeaders(this.options.username,this.options.key,this.options.locale,this.options.state)),t.validateStatus=function(t){return t===e},ct.sendRequest(t).then(function(i){if(i.status!==e){var r="Unexpected status while requesting API\n\n                Got "+i.status+" instead of "+e+" on route "+t.formattedUrl();return n.logger.error(r,{response:i,request:t,expectedStatus:e}),Promise.reject(i)}return i}).catch(function(e){return n._onRequestError(e,t)})}},{key:"_onRequestError",value:function(t,e){var n=ct.formatApiError(t,e),i=n.message,r=n.context;return this.logger.error(i,r),Promise.reject(new Error(i))}},{key:"_waitFor",value:function(t){this._waiting.add(t.catch(function(){}))}},{key:"_wait",value:function(){var t=this,e=this._waiting;return this._waiting=new Set,0===e.size?Promise.resolve():Promise.all(e).then(function(){return t._wait()})}},{key:"wait",value:function(){return this._wait()}}],[{key:"getHeaders",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={Authorization:'WSSE profile="UsernameToken"',"X-WSSE":this.getWsseHeader(t,e),"X-API-MODE":"get"};return null!==i&&(r["X-API-STATE"]=i),null!==n&&(r["X-API-LOCALE"]=n),r}},{key:"getWsseHeader",value:function(t,e){var n=this.generateNonce(),i=this.now();return'UsernameToken Username="'+t+'", PasswordDigest="'+b()(n+i+e,1)+'", Nonce="'+n+'", Created="'+i+'"'}}]),t}(),ln=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),E(e,[{key:"reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.endpoint=null,this.username=null,this.key=null,this.additionalLocales=null,this.state=A.PUBLISHED,this.binDownloadPolicy={ignoredContexts:[tt.TEXTURE_LOW,tt.TEXTURE_HELPER,tt.TEXTURE_MODEL],ignoredIds:[],ignoredFileType:[]}}},{key:"areSameAdditionalLocales",value:function(t){return t===this.additionalLocales||null!==t&&null!==this.additionalLocales&&this.constructor._areSameArrays(t,this.additionalLocales)}},{key:"areSameBinDownloadPolicy",value:function(t){return!!t&&(!!this.constructor._areSameArrays(t.ignoredContexts,this.binDownloadPolicy.ignoredContexts)&&!!this.constructor._areSameArrays(t.ignoredIds,this.binDownloadPolicy.ignoredIds)&&this.constructor._areSameArrays(t.ignoredFileType,this.binDownloadPolicy.ignoredFileType))}}],[{key:"_areSameArrays",value:function(t,e){if(t.length!==e.length)return!1;var n=!0;return t.forEach(function(t){n&&!e.includes(t)&&(n=!1)}),n}}]),e}(c.a),un=function(){function t(e){o(this,t),this.directory=e,this.runningUpdates=new Map,this.runningClean=null}return E(t,null,[{key:"getTranslatableRepositories",value:function(){return[Re.getName(),ve.getName(),vt.getName(),be.getName(),_e.getName(),Zt.getName(),ke.getName(),ae.getName(),Be.getName()]}}]),E(t,[{key:"getLastPublishDate",value:function(t,e){if(e.state!==A.PUBLISHED)return Promise.resolve(new Date);var n=C.formatApiEndpoint(e.endpoint),i=new ct;return i.url=n+"/published-version/last/"+t,i.addHeaders(cn.getHeaders(e.username,e.key)),ct.sendRequest(i).then(function(t){var e=t.data;return new Date(e.date)}).catch(function(t){if(!t.response)return null;if(t.response)switch(t.response.status){case 404:return new Date;case 503:return null}var e=ct.formatApiError(t,i),n=e.message;return Promise.reject(new Error(n))})}},{key:"getCacheMetadata",value:function(t){return this._readFile(this._getSiteCacheDirector(t)+"/metadata.json").then(function(t){return JSON.parse(t)}).catch(function(){return null})}},{key:"clean",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return null!==this.runningClean?this.runningClean:e&&this.runningUpdates.size>0?Promise.all(Array.from(this.runningUpdates.values())).then(function(){return t.clean()}):(this.runningClean=Promise.all([this._getBinRegistry(),this._readdir(this._getBinCacheDirector())]).then(function(e){var n=_(e,2),i=n[0],r=n[1],o=[];Object.keys(i).forEach(function(t){i[t].forEach(function(t){o.includes(t)||o.push(t)})});var s=[];return r.forEach(function(e){o.includes(e)||s.push(t._rmrf(t._getBinCacheDirector()+"/"+e))}),Promise.all(s).then(function(){t.runningClean=null})}),this.runningClean)}},{key:"_cleanUnusedBins",value:function(t,e){var n=this;return this._getBinRegistry().then(function(i){return i[t]=e,n._writeFile(n.directory+"/binRegistry.json",JSON.stringify(i))}).then(function(){return n.clean(!1)})}},{key:"_getBinRegistry",value:function(){return this._readFile(this.directory+"/binRegistry.json").then(function(t){return JSON.parse(t)}).catch(function(){return{}})}},{key:"update",value:function(t,e){var n=this;if(this.runningUpdates.has(t))return this.runningUpdates.get(t);if(null!==this.runningClean)return this.runningClean.then(function(){return n.update(t,e)});var i=new ln(e),r=this.needsUpdate(t,i).then(function(e){var r=e.needsUpdate,o=e.hasCache;return e.hasInternetConnexion?r?(console.log("Will update"),n._doUpdate(t,i)):(console.log("Skip update as it's valid"),!0):o?(console.warn("No Internet connexion"),!1):Promise.reject(new Error("No Internet connexion and no cache"))});return this.runningUpdates.set(t,r),r.then(function(){n.runningUpdates.delete(t)}),r}},{key:"needsUpdate",value:function(t,e){var n=new ln(e);return Promise.all([this.getCacheMetadata(t),this.getLastPublishDate(t,n)]).then(function(t){var e=_(t,2),i=e[0],r=e[1],o=null!==i,s=null!==r,a=o?new Date(i.date):null;if(!s)return{needsUpdate:!o,lastPublishedDate:r,hasCache:o,hasInternetConnexion:s,lastCacheUpdateDate:a};var c=!1;return o?i.apiVersion!==C.getApiVersion()?c=!0:i.endpoint!==n.endpoint?c=!0:i.state!==n.state?c=!0:a<=r?c=!0:n.areSameAdditionalLocales(i.additionalLocales)&&n.areSameBinDownloadPolicy(i.binDownloadPolicy)||(c=!0):c=!0,{needsUpdate:c,lastPublishedDate:r,hasCache:o,hasInternetConnexion:s,lastCacheUpdateDate:a}})}},{key:"_getSiteCacheDirector",value:function(t){return this.directory+"/"+t}},{key:"_getBinCacheDirector",value:function(){return this.directory+"/bin"}},{key:"get",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new C(e);return this.getCacheMetadata(r.site).then(function(t){if(null===t)return Promise.reject(new Error("CacheManager: no cache"));if(t.apiVersion!==C.getApiVersion())return Promise.reject(new Error("CacheManager: cache was created from another api version, please update it"));if(t.endpoint!==r.endpoint)return Promise.reject(new Error("CacheManager: cache was created from another endpoint, please update it"));if(t.state!==r.state)return Promise.reject(new Error("CacheManager: cache was created from state, please update it"));var e=null===r.locale||r===t.defaultLocale;return e||t.availableLocales.includes(r.locale)?i?e:n.getLastPublishDate(r.site,r).then(function(n){return null===n||n>new Date(t.date)?Promise.reject(new Error("CacheManger: is outdated")):e}):Promise.reject(new Error("CacheManager: requested locale is not in the cache"))}).then(function(e){var i=null;i=e||!n.constructor.getTranslatableRepositories().includes(t)?n._getSiteCacheDirector(r.site)+"/"+t+".json":n._getSiteCacheDirector(r.site)+"/"+r.locale+"/"+t+".json";var o=null;return t===rt.getName()&&(o=n._getBinRegistry()),Promise.all([n._readFile(i).then(function(t){return JSON.parse(t)}),o])}).then(function(e){var i=_(e,2),o=i[0],s=i[1];if(t===rt.getName()){var a=s[r.site];o.forEach(function(t){a.includes(t.reference)&&(t.uri=n._getBinCacheDirector()+"/"+t.reference)})}return o})}},{key:"_doUpdate",value:function(t,e){var n=this,r=this._createEm(t,null,e),o=[],s=this._getSiteCacheDirector(t);return r.load().then(function(){var i,s=r.getRepository("Site").getCurrent();null===r.locale&&(r.locale=s.locale);var a=null;null===e.additionalLocales?(a=[],s.languages.forEach(function(t){t!==s.locale&&a.push(t)})):(i=e,a=i.additionalLocales);var c=[];return a.forEach(function(i){var r=n._createEm(t,i,e);o.push(r),n.constructor.getTranslatableRepositories().forEach(function(t){c.push(r.getRepository(t).load())})}),Promise.all(c)}).then(function(){return console.log("Cleaning"),n._rmrf(s)}).then(function(){console.log("Creating dirs");var t=[n._mkdirp(s),n._mkdirp(n._getBinCacheDirector())];return o.forEach(function(e){t.push(n._mkdirp(s+"/"+e.locale))}),console.log("Creating dir"),Promise.all(t)}).then(function(){var t,o={ignoredContexts:e.binDownloadPolicy.ignoredContexts,ignoredIds:[].concat(i(e.binDownloadPolicy.ignoredIds)),ignoredFileType:e.binDownloadPolicy.ignoredFileType},s=r.getRepository("MapFile").findBy({type:function(t){return[It.PATH,It.CONFIG,It.HELPER,It.IVE,It.LIGHT,It.OSG].includes(t)}}).map(function(t){return t.file.value});return(t=o.ignoredIds).push.apply(t,i(s)),n._downloadFiles(r,o)}).then(function(t){console.log("Saving");var e=[];return r.getRepositories().forEach(function(t){t.isLoaded()&&e.push(n._writeFile(s+"/"+t.constructor.getName()+".json",JSON.stringify(t.getAll())))}),o.forEach(function(t){t.getRepositories().forEach(function(i){i.isLoaded()&&e.push(n._writeFile(s+"/"+t.locale+"/"+i.constructor.getName()+".json",JSON.stringify(i.getAll())))})}),Promise.all(e).then(function(){return t})}).then(function(e){return n._cleanUnusedBins(t,e)}).then(function(){var t=r.getRepository("Site").getCurrent(),i={endpoint:e.endpoint,state:e.state,date:new Date,additionalLocales:e.additionalLocales,defaultLocale:t.default,availableLocales:Array.from(t.languages),binDownloadPolicy:e.binDownloadPolicy,apiVersion:C.getApiVersion()};return n._writeFile(s+"/metadata.json",JSON.stringify(i))})}},{key:"_downloadFiles",value:function(t,e){var n=this,i=[];if(t.getRepository("File").getAll().forEach(function(t){e.ignoredContexts.includes(t.context)||e.ignoredIds.includes(t.id)||e.ignoredFileType.includes(t.file_type)||i.push(t)}),0===i.length)return Promise.resolve([]);var r=[];i.forEach(function(t){r.includes(t.reference)||r.push(t.reference)});for(var o=[],s=0;s<10;s++)o.push(Promise.resolve());for(var a=0;a<i.length;a++)!function(t){var e=t%10;o[e]=o[e].then(function(){return n._downloadFile(i[t])})}(a);return Promise.all(o).then(function(){return r})}},{key:"_createEm",value:function(t,e,n){return new cn(new C({site:t,endpoint:n.endpoint,username:n.username,key:n.key,state:n.state,locale:e}))}},{key:"_downloadFile",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_exists",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_mkdirp",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_readFile",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_writeFile",value:function(t,e){return Promise.reject(new Error("Not implemented"))}},{key:"_rmrf",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_readdir",value:function(t){return Promise.reject(new Error("Not implemented"))}}]),t}(),hn=(function(t){function e(){throw o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"")),new Error("Not supported in browser")}a(e,t)}(un),function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//localhost:8080/adsum/cache";return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),E(e,[{key:"update",value:function(t,e){return Promise.reject(new Error("Not supported"))}},{key:"clean",value:function(t,e){return Promise.reject(new Error("Not supported"))}},{key:"_readFile",value:function(t){return f.a.get(t).then(function(t){return"object"==x(t.data)?JSON.stringify(t.data):t.data})}}]),e}(un))},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){"use strict";var i=n(5),r=n(163),o=n(165),s=n(166),a=n(167),c=n(77),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(168);t.exports=function(t){return new Promise(function(e,u){var h=t.data,d=t.headers;i.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",g=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||a(t.url)||(f=new window.XDomainRequest,p="onload",g=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";d.Authorization="Basic "+l(m+":"+v)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[p]=function(){if(f&&(4===f.readyState||g)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,i=t.responseType&&"text"!==t.responseType?f.response:f.responseText,o={data:i,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};r(e,u,o),f=null}},f.onerror=function(){u(c("Network Error",t,null,f)),f=null},f.ontimeout=function(){u(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var y=n(169),b=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;b&&(d[t.xsrfHeaderName]=b)}if("setRequestHeader"in f&&i.forEach(d,function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete d[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),u(t),f=null)}),void 0===h&&(h=null),f.send(h)})}},function(t,e,n){"use strict";var i=n(164);t.exports=function(t,e,n,r,o){var s=new Error(t);return i(s,e,n,r,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(10),s=n(9),a=n(186),c=n(39),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(){function t(){r(this,t),this.projector=null,this.objectManager=null,this.options=null,this.awm=null,this.mergePathSectionObject=[],this.mergePathSections=null,this.objectsLoader=null,this.pathPattern=null}return l(t,[{key:"init",value:function(t,e){this.projector=t,this.objectManager=e}},{key:"initer",value:function(t){return this.awm=t,this.objectsLoader=new c.a(this.awm),this.options={patternSpace:1,patternSize:1},this.loadPathPattern()}},{key:"loadPathPattern",value:function(){var t=this;return new Promise(function(e,n){t.objectsLoader.createJSON3DObj("assets/3dModels/path_default.json").then(function(n){if(n instanceof o.Scene&&1===n.children.length){var i=new o.Group;i.add(n.children[0]),n=i}n.scale.multiplyScalar(t.projector.meterToAdsumDistance(t.options.patternSize)),n.traverse(function(t){"outline"===t.name&&t.position.set(.05,.68,-.33),t.updateMatrixWorld()}),t.pathPattern=n,e()})})}},{key:"buildMerged",value:function(t){this.pathSections=t;var e=[];this.pathSections.forEach(function(t){e=[].concat(i(e),i(t.nodes))});var n=this.pathSections[0],r=this.pathSections[this.pathSections.length-1],c=new a.a(n.from,n.ground,r.to,e);this.mergePathSections=c;for(var l=new o.Group,u=c.interpolate(this.projector.meterToAdsumDistance(this.options.patternSpace),this.projector),h=0;h<u.length-1;h++){var d=u[h].position,f=u[h+1].position,p=u[h].ground,g=this.pathPattern.clone();g.position.copy(d);var m=f.clone().sub(g.position),v=0;v=0===m.y?m.x>0?Math.PI/2:-Math.PI/2:Math.atan(m.x/m.y),m.y<0&&(v+=Math.PI),g.setRotationFromAxisAngle(new o.Vector3(-0,-0,-1),v),g.ground=p,l.add(g),l.visible=!1}var y=s.e._createFromPathSection(c,l,this.options.patternSpace);c.ground._addChild(y),y.update(),this.objectManager.pathSectionObjects.set(y.id,y),this.mergePathSectionObject=y}},{key:"build",value:function(t){for(var e=new o.Group,n=this.mergePathSectionObject._mesh.children,i=0;i<n.length;i++){var r=n[i];if(r.up.set(0,0,1),i<n.length-1){var a=n[i+1];r.lookAt(new o.Vector3(a.position.x,a.position.y,0))}else if(this.mergePathSectionObject.pathSection.to){var c=this.projector.utmToAdsum(this.mergePathSectionObject.pathSection.to.pathNode.utmPosition);r.lookAt(new o.Vector3(c.x,c.y,0))}}this.mergePathSectionObject._mesh.children.forEach(function(n,i){n.ground.id===t.ground.id&&e.add(n.clone())});var l=s.e._createFromPathSection(t,e,this.options.patternSpace);return t.ground._addChild(l),l.update(),this.objectManager.pathSectionObjects.set(l.id,l),l}}]),t}(),h=new u;e.a=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(9),o=n(10),s=n(83),a=n(37),c=n(38),l=n(34),u=n(71),h=n(187),d=n(39),f=n(81),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g=function(){function t(){i(this,t),this.awm=null,this.objectsLoader=null}return p(t,[{key:"init",value:function(){var t=this,e=a.a.config.device;return this.adsumLoader=new r.a({entityManager:s.a.entityManager,deviceId:e}),this.awm=new r.b({loader:this.adsumLoader,engine:{container:document.getElementById("adsum-web-map-container")},wayfinding:{pathBuilder:f.a}}),window.awm=this.awm,window.three=o,window.THREE=o,this.awm.init().then(function(){return c.a.init(t.awm),l.a.init(t.awm),h.a.init(t.awm),t.objectsLoader=new d.a(t.awm),u.a.init(t.awm)}).then(function(){console.log("AdsumWebMap is ready to start");var e=new o.TextureLoader;e.crossOrigin="";var n=e.load("assets/textures/background.png");return n.wrapS=o.RepeatWrapping,n.wrapT=o.RepeatWrapping,n.repeat.set(1,1),t.awm.sceneManager.scene.background=n,t.awm.start()})}},{key:"switchMode",value:function(t){}}]),t}(),m=new g;e.a=m},function(t,e,n){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function i(r,o){try{var s=e[r](o),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}return i("next")})}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(20),s=n.n(o),a=n(74),c=n(37),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(){function t(){r(this,t),this.entityManager=null}return l(t,[{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=i(s.a.mark(function t(){var e,n,i,r,o,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.init();case 2:e=c.a.config,n=e.endpoint,i=e.key,r=e.site,o=e.username,l=new a.c("//localhost:9001/local"),this.entityManager=new a.d({endpoint:n,site:r,username:o,key:i,cacheManager:l});case 5:case"end":return t.stop()}},t,this)}));return t}()}]),t}(),h=new u;e.a=h},function(t,e,n){"use strict";var i=n(85),r=n(191);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a})},function(t,e,n){"use strict";var i=n(86),r=n.n(i);e.a=r()()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":r(t)},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(2),c=i(a),l=n(3),u=i(l),h=n(27),d=n(13),f=n(28),p=i(f),g=n(87),m=function(){try{return window.history.state||{}}catch(t){return{}}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(g.canUseDOM,"Browser history needs a DOM");var e=window.history,n=(0,g.supportsHistory)(),i=!(0,g.supportsPopStateOnHashChange)(),r=t.forceRefresh,a=void 0!==r&&r,l=t.getUserConfirmation,f=void 0===l?g.getConfirmation:l,v=t.keyLength,y=void 0===v?6:v,b=t.basename?(0,d.stripTrailingSlash)((0,d.addLeadingSlash)(t.basename)):"",w=function(t){var e=t||{},n=e.key,i=e.state,r=window.location,o=r.pathname,s=r.search,a=r.hash,l=o+s+a;return(0,c.default)(!b||(0,d.hasBasename)(l,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+l+'" to begin with "'+b+'".'),b&&(l=(0,d.stripBasename)(l,b)),(0,h.createLocation)(l,i,n)},_=function(){return Math.random().toString(36).substr(2,y)},x=(0,p.default)(),E=function(t){s(z,t),z.length=e.length,x.notifyListeners(z.location,z.action)},A=function(t){(0,g.isExtraneousPopstateEvent)(t)||M(w(t.state))},C=function(){M(w(m()))},S=!1,M=function(t){if(S)S=!1,E();else{x.confirmTransitionTo(t,"POP",f,function(e){e?E({action:"POP",location:t}):T(t)})}},T=function(t){var e=z.location,n=F.indexOf(e.key);-1===n&&(n=0);var i=F.indexOf(t.key);-1===i&&(i=0);var r=n-i;r&&(S=!0,R(r))},k=w(m()),F=[k.key],O=function(t){return b+(0,d.createPath)(t)},P=function(t,i){(0,c.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==i),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,h.createLocation)(t,i,_(),z.location);x.confirmTransitionTo(r,"PUSH",f,function(t){if(t){var i=O(r),o=r.key,s=r.state;if(n)if(e.pushState({key:o,state:s},null,i),a)window.location.href=i;else{var l=F.indexOf(z.location.key),u=F.slice(0,-1===l?0:l+1);u.push(r.key),F=u,E({action:"PUSH",location:r})}else(0,c.default)(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=i}})},L=function(t,i){(0,c.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==i),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,h.createLocation)(t,i,_(),z.location);x.confirmTransitionTo(r,"REPLACE",f,function(t){if(t){var i=O(r),o=r.key,s=r.state;if(n)if(e.replaceState({key:o,state:s},null,i),a)window.location.replace(i);else{var l=F.indexOf(z.location.key);-1!==l&&(F[l]=r.key),E({action:"REPLACE",location:r})}else(0,c.default)(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(i)}})},R=function(t){e.go(t)},D=function(){return R(-1)},B=function(){return R(1)},I=0,N=function(t){I+=t,1===I?((0,g.addEventListener)(window,"popstate",A),i&&(0,g.addEventListener)(window,"hashchange",C)):0===I&&((0,g.removeEventListener)(window,"popstate",A),i&&(0,g.removeEventListener)(window,"hashchange",C))},j=!1,U=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=x.setPrompt(t);return j||(N(1),j=!0),function(){return j&&(j=!1,N(-1)),e()}},$=function(t){var e=x.appendListener(t);return N(1),function(){N(-1),e()}},z={length:e.length,action:"POP",location:k,createHref:O,push:P,replace:L,go:R,goBack:D,goForward:B,block:U,listen:$};return z};e.default=v},function(t,e,n){"use strict";e.__esModule=!0;e.canUseDOM=!("undefined"===typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":f(e))&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":f(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),c=n.n(a),l=n(1),u=n.n(l),h=n(3),d=n.n(h),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},g=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},m=function(t){function e(){var n,i,s;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=i=o(this,t.call.apply(t,[this].concat(c))),i.handleClick=function(t){if(i.props.onClick&&i.props.onClick(t),!t.defaultPrevented&&0===t.button&&!i.props.target&&!g(t)){t.preventDefault();var e=i.context.router.history,n=i.props,r=n.replace,o=n.to;r?e.replace(o):e.push(o)}},s=n,o(i,s)}return s(e,t),e.prototype.render=function(){var t=this.props,e=(t.replace,t.to),n=t.innerRef,r=i(t,["replace","to","innerRef"]);d()(this.context.router,"You should not use <Link> outside a <Router>");var o=this.context.router.history.createHref("string"===typeof e?{pathname:e}:e);return c.a.createElement("a",p({},r,{onClick:this.handleClick,href:o,ref:n}))},e}(c.a.Component);m.propTypes={onClick:u.a.func,target:u.a.string,replace:u.a.bool,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired,innerRef:u.a.oneOfType([u.a.string,u.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired,createHref:u.a.func.isRequired}).isRequired}).isRequired},e.a=m},function(t,e,n){"use strict";var i=n(30);e.a=i.a},function(t,e,n){"use strict";var i=(n(210),n(33));n.d(e,"a",function(){return i})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function r(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function o(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function s(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function a(t,e){return t.has(e)}function c(t,e){return null==t?void 0:t[e]}function l(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function u(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function d(){this.__data__=Ce?Ce(null):{},this.size=0}function f(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function p(t){var e=this.__data__;if(Ce){var n=e[t];return n===bt?void 0:n}return ae.call(e,t)?e[t]:void 0}function g(t){var e=this.__data__;return Ce?void 0!==e[t]:ae.call(e,t)}function m(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ce&&void 0===e?bt:e,this}function v(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function y(){this.__data__=[],this.size=0}function b(t){var e=this.__data__,n=j(e,t);return!(n<0)&&(n==e.length-1?e.pop():ge.call(e,n,1),--this.size,!0)}function w(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]}function _(t){return j(this.__data__,t)>-1}function x(t,e){var n=this.__data__,i=j(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function E(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function A(){this.size=0,this.__data__={hash:new h,map:new(_e||v),string:new h}}function C(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e}function S(t){return J(this,t).get(t)}function M(t){return J(this,t).has(t)}function T(t,e){var n=J(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function k(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new E;++e<n;)this.add(t[e])}function F(t){return this.__data__.set(t,bt),this}function O(t){return this.__data__.has(t)}function P(t){var e=this.__data__=new v(t);this.size=e.size}function L(){this.__data__=new v,this.size=0}function R(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function D(t){return this.__data__.get(t)}function B(t){return this.__data__.has(t)}function I(t,e){var n=this.__data__;if(n instanceof v){var i=n.__data__;if(!_e||i.length<yt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new E(i)}return n.set(t,e),this.size=n.size,this}function N(t,e){var n=Be(t),i=!n&&De(t),r=!n&&!i&&Ie(t),o=!n&&!i&&!r&&Ne(t),a=n||i||r||o,c=a?s(t.length,String):[],l=c.length;for(var u in t)!e&&!ae.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||et(u,l))||c.push(u);return c}function j(t,e){for(var n=t.length;n--;)if(at(t[n][0],e))return n;return-1}function U(t,e,n){var i=e(t);return Be(t)?i:r(i,n(t))}function $(t){return null==t?void 0===t?Ut:Lt:me&&me in Object(t)?tt(t):ot(t)}function z(t){return ft(t)&&$(t)==Et}function H(t,e,n,i,r){return t===e||(null==t||null==e||!ft(t)&&!ft(e)?t!==t&&e!==e:V(t,e,n,i,H,r))}function V(t,e,n,i,r,o){var s=Be(t),a=Be(e),c=s?At:Re(t),l=a?At:Re(e);c=c==Et?Rt:c,l=l==Et?Rt:l;var u=c==Rt,h=l==Rt,d=c==l;if(d&&Ie(t)){if(!Ie(e))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new P),s||Ne(t)?X(t,e,n,i,r,o):K(t,e,c,n,i,r,o);if(!(n&wt)){var f=u&&ae.call(t,"__wrapped__"),p=h&&ae.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return o||(o=new P),r(g,m,n,i,o)}}return!!d&&(o||(o=new P),Y(t,e,n,i,r,o))}function W(t){return!(!dt(t)||it(t))&&(ut(t)?ue:Vt).test(st(t))}function G(t){return ft(t)&&ht(t.length)&&!!Gt[$(t)]}function q(t){if(!rt(t))return be(t);var e=[];for(var n in Object(t))ae.call(t,n)&&"constructor"!=n&&e.push(n);return e}function X(t,e,n,i,r,s){var c=n&wt,l=t.length,u=e.length;if(l!=u&&!(c&&u>l))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var d=-1,f=!0,p=n&_t?new k:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var g=t[d],m=e[d];if(i)var v=c?i(m,g,d,e,t,s):i(g,m,d,t,e,s);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!o(e,function(t,e){if(!a(p,e)&&(g===t||r(g,t,n,i,s)))return p.push(e)})){f=!1;break}}else if(g!==m&&!r(g,m,n,i,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function K(t,e,n,i,r,o,s){switch(n){case zt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $t:return!(t.byteLength!=e.byteLength||!o(new fe(t),new fe(e)));case St:case Mt:case Pt:return at(+t,+e);case Tt:return t.name==e.name&&t.message==e.message;case Bt:case Nt:return t==e+"";case Ot:var a=l;case It:var c=i&wt;if(a||(a=u),t.size!=e.size&&!c)return!1;var h=s.get(t);if(h)return h==e;i|=_t,s.set(t,e);var d=X(a(t),a(e),i,r,o,s);return s.delete(t),d;case jt:if(Pe)return Pe.call(t)==Pe.call(e)}return!1}function Y(t,e,n,i,r,o){var s=n&wt,a=Z(t),c=a.length;if(c!=Z(e).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in e:ae.call(e,u)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);for(var f=s;++l<c;){u=a[l];var p=t[u],g=e[u];if(i)var m=s?i(g,p,u,e,t,o):i(p,g,u,t,e,o);if(!(void 0===m?p===g||r(p,g,n,i,o):m)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(t),o.delete(e),d}function Z(t){return U(t,pt,Le)}function J(t,e){var n=t.__data__;return nt(e)?n["string"==typeof e?"string":"hash"]:n.map}function Q(t,e){var n=c(t,e);return W(n)?n:void 0}function tt(t){var e=ae.call(t,me),n=t[me];try{t[me]=void 0;var i=!0}catch(t){}var r=le.call(t);return i&&(e?t[me]=n:delete t[me]),r}function et(t,e){return!!(e=null==e?xt:e)&&("number"==typeof t||Wt.test(t))&&t>-1&&t%1==0&&t<e}function nt(t){var e="undefined"===typeof t?"undefined":vt(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function it(t){return!!ce&&ce in t}function rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||re)}function ot(t){return le.call(t)}function st(t){if(null!=t){try{return se.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function at(t,e){return t===e||t!==t&&e!==e}function ct(t){return null!=t&&ht(t.length)&&!ut(t)}function lt(t,e){return H(t,e)}function ut(t){if(!dt(t))return!1;var e=$(t);return e==kt||e==Ft||e==Ct||e==Dt}function ht(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=xt}function dt(t){var e="undefined"===typeof t?"undefined":vt(t);return null!=t&&("object"==e||"function"==e)}function ft(t){return null!=t&&"object"==("undefined"===typeof t?"undefined":vt(t))}function pt(t){return ct(t)?N(t):q(t)}function gt(){return[]}function mt(){return!1}var vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt=200,bt="__lodash_hash_undefined__",wt=1,_t=2,xt=9007199254740991,Et="[object Arguments]",At="[object Array]",Ct="[object AsyncFunction]",St="[object Boolean]",Mt="[object Date]",Tt="[object Error]",kt="[object Function]",Ft="[object GeneratorFunction]",Ot="[object Map]",Pt="[object Number]",Lt="[object Null]",Rt="[object Object]",Dt="[object Proxy]",Bt="[object RegExp]",It="[object Set]",Nt="[object String]",jt="[object Symbol]",Ut="[object Undefined]",$t="[object ArrayBuffer]",zt="[object DataView]",Ht=/[\\^$.*+?()[\]{}|]/g,Vt=/^\[object .+?Constructor\]$/,Wt=/^(?:0|[1-9]\d*)$/,Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt[Et]=Gt[At]=Gt[$t]=Gt[St]=Gt[zt]=Gt[Mt]=Gt[Tt]=Gt[kt]=Gt[Ot]=Gt[Pt]=Gt[Rt]=Gt[Bt]=Gt[It]=Gt[Nt]=Gt["[object WeakMap]"]=!1;var qt="object"==("undefined"===typeof t?"undefined":vt(t))&&t&&t.Object===Object&&t,Xt="object"==("undefined"===typeof self?"undefined":vt(self))&&self&&self.Object===Object&&self,Kt=qt||Xt||Function("return this")(),Yt="object"==vt(e)&&e&&!e.nodeType&&e,Zt=Yt&&"object"==vt(n)&&n&&!n.nodeType&&n,Jt=Zt&&Zt.exports===Yt,Qt=Jt&&qt.process,te=function(){try{return Qt&&Qt.binding&&Qt.binding("util")}catch(t){}}(),ee=te&&te.isTypedArray,ne=Array.prototype,ie=Function.prototype,re=Object.prototype,oe=Kt["__core-js_shared__"],se=ie.toString,ae=re.hasOwnProperty,ce=function(){var t=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),le=re.toString,ue=RegExp("^"+se.call(ae).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=Jt?Kt.Buffer:void 0,de=Kt.Symbol,fe=Kt.Uint8Array,pe=re.propertyIsEnumerable,ge=ne.splice,me=de?de.toStringTag:void 0,ve=Object.getOwnPropertySymbols,ye=he?he.isBuffer:void 0,be=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),we=Q(Kt,"DataView"),_e=Q(Kt,"Map"),xe=Q(Kt,"Promise"),Ee=Q(Kt,"Set"),Ae=Q(Kt,"WeakMap"),Ce=Q(Object,"create"),Se=st(we),Me=st(_e),Te=st(xe),ke=st(Ee),Fe=st(Ae),Oe=de?de.prototype:void 0,Pe=Oe?Oe.valueOf:void 0;h.prototype.clear=d,h.prototype.delete=f,h.prototype.get=p,h.prototype.has=g,h.prototype.set=m,v.prototype.clear=y,v.prototype.delete=b,v.prototype.get=w,v.prototype.has=_,v.prototype.set=x,E.prototype.clear=A,E.prototype.delete=C,E.prototype.get=S,E.prototype.has=M,E.prototype.set=T,k.prototype.add=k.prototype.push=F,k.prototype.has=O,P.prototype.clear=L,P.prototype.delete=R,P.prototype.get=D,P.prototype.has=B,P.prototype.set=I;var Le=ve?function(t){return null==t?[]:(t=Object(t),i(ve(t),function(e){return pe.call(t,e)}))}:gt,Re=$;(we&&Re(new we(new ArrayBuffer(1)))!=zt||_e&&Re(new _e)!=Ot||xe&&"[object Promise]"!=Re(xe.resolve())||Ee&&Re(new Ee)!=It||Ae&&"[object WeakMap]"!=Re(new Ae))&&(Re=function(t){var e=$(t),n=e==Rt?t.constructor:void 0,i=n?st(n):"";if(i)switch(i){case Se:return zt;case Me:return Ot;case Te:return"[object Promise]";case ke:return It;case Fe:return"[object WeakMap]"}return e});var De=z(function(){return arguments}())?z:function(t){return ft(t)&&ae.call(t,"callee")&&!pe.call(t,"callee")},Be=Array.isArray,Ie=ye||mt,Ne=ee?function(t){return function(e){return t(e)}}(ee):G;n.exports=lt}).call(e,n(7),n(80)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],r=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"],o=function(t,e){var n=null;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(i,r)},e)}};e.editorOptions=i,e.editorEvents=r,e.debounce=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":a(e))&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(41),h=i(u),d=n(0),f=i(d),p=n(1),g=i(p),m=n(92),v=i(m),y=n(222),b=i(y),w=n(93);n(223);var _=h.default.acequire("ace/range"),x=_.Range,E=h.default.acequire("ace/split"),A=E.Split,C=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return w.editorEvents.forEach(function(t){n[t]=n[t].bind(n)}),n.debounce=w.debounce,n}return s(e,t),l(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.className,i=e.onBeforeLoad,r=e.mode,o=e.focus,s=e.theme,a=e.fontSize,c=e.value,l=e.defaultValue,d=e.cursorStart,f=e.showGutter,p=e.wrapEnabled,g=e.showPrintMargin,m=e.scrollMargin,v=void 0===m?[0,0,0,0]:m,y=e.keyboardHandler,_=e.onLoad,x=e.commands,E=e.annotations,C=e.markers,S=e.splits;this.editor=h.default.edit(this.refEditor),i&&i(h.default);var M=Object.keys(this.props.editorProps),T=new A(this.editor.container,"ace/theme/"+s,S);this.editor.env.split=T,this.splitEditor=T.getEditor(0),this.split=T,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var k=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),T.forEach(function(e,n){for(var i=0;i<M.length;i++)e[M[i]]=t.props.editorProps[M[i]];var o=(0,b.default)(l,n),h=(0,b.default)(c,n,"");e.session.setUndoManager(new u.UndoManager),e.setTheme("ace/theme/"+s),e.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),e.getSession().setMode("ace/mode/"+r),e.setFontSize(a),e.renderer.setShowGutter(f),e.getSession().setUseWrapMode(p),e.setShowPrintMargin(g),e.on("focus",t.onFocus),e.on("blur",t.onBlur),e.on("input",t.onInput),e.on("copy",t.onCopy),e.on("paste",t.onPaste),e.on("change",t.onChange),e.getSession().selection.on("changeSelection",t.onSelectionChange),e.getSession().selection.on("changeCursor",t.onCursorChange),e.session.on("changeScrollTop",t.onScroll),e.setValue(void 0===o?h:o,d);var m=(0,b.default)(E,n,[]),_=(0,b.default)(C,n,[]);e.getSession().setAnnotations(m),_&&_.length>0&&t.handleMarkers(_,e);for(var A=0;A<w.editorOptions.length;A++){var S=w.editorOptions[A];k.hasOwnProperty(S)?e.setOption(S,t.props[S]):t.props[S]&&console.warn("ReaceAce: editor option "+S+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}t.handleOptions(t.props,e),Array.isArray(x)&&x.forEach(function(t){"string"==typeof t.exec?e.commands.bindKey(t.bindKey,t.exec):e.commands.addCommand(t)}),y&&e.setKeyboardHandler("ace/keyboard/"+y)}),n&&(this.refEditor.className+=" "+n),o&&this.splitEditor.focus();var F=this.editor.env.split;F.setOrientation("below"===this.props.orientation?F.BELOW:F.BESIDE),F.resize(!0),_&&_(F)}},{key:"componentWillReceiveProps",value:function(t){var e=this,n=this.props,i=this.editor.env.split;if(t.splits!==n.splits&&i.setSplits(t.splits),t.orientation!==n.orientation&&i.setOrientation("below"===t.orientation?i.BELOW:i.BESIDE),i.forEach(function(i,r){t.mode!==n.mode&&i.getSession().setMode("ace/mode/"+t.mode),t.keyboardHandler!==n.keyboardHandler&&(t.keyboardHandler?i.setKeyboardHandler("ace/keyboard/"+t.keyboardHandler):i.setKeyboardHandler(null)),t.fontSize!==n.fontSize&&i.setFontSize(t.fontSize),t.wrapEnabled!==n.wrapEnabled&&i.getSession().setUseWrapMode(t.wrapEnabled),t.showPrintMargin!==n.showPrintMargin&&i.setShowPrintMargin(t.showPrintMargin),t.showGutter!==n.showGutter&&i.renderer.setShowGutter(t.showGutter);for(var o=0;o<w.editorOptions.length;o++){var s=w.editorOptions[o];t[s]!==n[s]&&i.setOption(s,t[s])}(0,v.default)(t.setOptions,n.setOptions)||e.handleOptions(t,i);var a=(0,b.default)(t.value,r,"");if(i.getValue()!==a){e.silent=!0;var c=i.session.selection.toJSON();i.setValue(a,t.cursorStart),i.session.selection.fromJSON(c),e.silent=!1}var l=(0,b.default)(t.annotations,r,[]),u=(0,b.default)(n.annotations,r,[]);(0,v.default)(l,u)||i.getSession().setAnnotations(l);var h=(0,b.default)(t.markers,r,[]),d=(0,b.default)(n.markers,r,[]);!(0,v.default)(h,d)&&Array.isArray(h)&&e.handleMarkers(h,i)}),t.className!==n.className){var r=this.refEditor.className,o=r.trim().split(" ");n.className.trim().split(" ").forEach(function(t){var e=o.indexOf(t);o.splice(e,1)}),this.refEditor.className=" "+t.className+" "+o.join(" ")}t.theme!==n.theme&&i.setTheme("ace/theme/"+t.theme),t.focus&&!n.focus&&this.splitEditor.focus(),t.height===this.props.height&&t.width===this.props.width||this.editor.resize()}},{key:"componentWillUnmount",value:function(){this.editor.destroy(),this.editor=null}},{key:"onChange",value:function(t){if(this.props.onChange&&!this.silent){var e=[];this.editor.env.split.forEach(function(t){e.push(t.getValue())}),this.props.onChange(e,t)}}},{key:"onSelectionChange",value:function(t){if(this.props.onSelectionChange){var e=[];this.editor.env.split.forEach(function(t){e.push(t.getSelection())}),this.props.onSelectionChange(e,t)}}},{key:"onCursorChange",value:function(t){if(this.props.onCursorChange){var e=[];this.editor.env.split.forEach(function(t){e.push(t.getSelection())}),this.props.onCursorChange(e,t)}}},{key:"onFocus",value:function(t){this.props.onFocus&&this.props.onFocus(t)}},{key:"onInput",value:function(t){this.props.onInput&&this.props.onInput(t)}},{key:"onBlur",value:function(t){this.props.onBlur&&this.props.onBlur(t)}},{key:"onCopy",value:function(t){this.props.onCopy&&this.props.onCopy(t)}},{key:"onPaste",value:function(t){this.props.onPaste&&this.props.onPaste(t)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(t,e){for(var n=Object.keys(t.setOptions),i=0;i<n.length;i++)e.setOption(n[i],t.setOptions[n[i]])}},{key:"handleMarkers",value:function(t,e){var n=e.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&e.getSession().removeMarker(n[i].id);n=e.getSession().getMarkers(!1);for(var r in n)n.hasOwnProperty(r)&&e.getSession().removeMarker(n[r].id);t.forEach(function(t){var n=t.startRow,i=t.startCol,r=t.endRow,o=t.endCol,s=t.className,a=t.type,c=t.inFront,l=void 0!==c&&c,u=new x(n,i,r,o);e.getSession().addMarker(u,s,a,l)})}},{key:"updateRef",value:function(t){this.refEditor=t}},{key:"render",value:function(){var t=this.props,e=t.name,n=t.width,i=t.height,r=t.style,o=c({width:n,height:i},r);return f.default.createElement("div",{ref:this.updateRef,id:e,style:o})}}]),e}(d.Component);e.default=C,C.propTypes={mode:g.default.string,splits:g.default.number,orientation:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.oneOfType([g.default.number,g.default.string]),showGutter:g.default.bool,onChange:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onInput:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.arrayOf(g.default.string),defaultValue:g.default.arrayOf(g.default.string),debounceChangePeriod:g.default.number,onLoad:g.default.func,onSelectionChange:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,editorProps:g.default.object,setOptions:g.default.object,style:g.default.object,scrollMargin:g.default.array,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array},C.defaultProps={name:"brace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}},function(t,e,n){n(96),t.exports=n(101)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(97).enable(),window.Promise=n(99)),n(100),Object.assign=n(21)},function(t,e,n){"use strict";function i(){l=!1,a._47=null,a._71=null}function r(t){function e(e){(t.allRejections||s(h[e].error,t.whitelist||c))&&(h[e].displayId=u++,t.onUnhandled?(h[e].logged=!0,t.onUnhandled(h[e].displayId,h[e].error)):(h[e].logged=!0,o(h[e].displayId,h[e].error)))}function n(e){h[e].logged&&(t.onHandled?t.onHandled(h[e].displayId,h[e].error):h[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[e].displayId+".")))}t=t||{},l&&i(),l=!0;var r=0,u=0,h={};a._47=function(t){2===t._83&&h[t._56]&&(h[t._56].logged?n(t._56):clearTimeout(h[t._56].timeout),delete h[t._56])},a._71=function(t,n){0===t._75&&(t._56=r++,h[t._56]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._56),s(n,c)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function s(t,e){return e.some(function(e){return t instanceof e})}var a=n(42),c=[ReferenceError,TypeError,RangeError],l=!1;e.disable=i,e.enable=r},function(t,e,n){"use strict";(function(e){function n(t){s.length||(o(),a=!0),s[s.length]=t}function i(){for(;c<s.length;){var t=c;if(c+=1,s[t].call(),c>l){for(var e=0,n=s.length-c;e<n;e++)s[e]=s[e+c];s.length-=c,c=0}}s.length=0,c=0,a=!1}function r(t){return function(){function e(){clearTimeout(n),clearInterval(i),t()}var n=setTimeout(e,0),i=setInterval(e,50)}}t.exports=n;var o,s=[],a=!1,c=0,l=1024,u="undefined"!==typeof e?e:self,h=u.MutationObserver||u.WebKitMutationObserver;o="function"===typeof h?function(t){var e=1,n=new h(t),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}(i):r(i),n.requestFlush=o,n.makeRequestCallFromTimer=r}).call(e,n(7))},function(t,e,n){"use strict";function i(t){var e=new o(o._44);return e._83=1,e._18=t,e}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(42);t.exports=o;var s=i(!0),a=i(!1),c=i(null),l=i(void 0),u=i(0),h=i("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return c;if(void 0===t)return l;if(!0===t)return s;if(!1===t)return a;if(0===t)return u;if(""===t)return h;if("object"===("undefined"===typeof t?"undefined":r(t))||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,n){n(t)})}return i(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function i(a,c){if(c&&("object"===("undefined"===typeof c?"undefined":r(c))||"function"===typeof c)){if(c instanceof o&&c.then===o.prototype.then){for(;3===c._83;)c=c._18;return 1===c._83?i(a,c._18):(2===c._83&&n(c._18),void c.then(function(t){i(a,t)},n))}var l=c.then;if("function"===typeof l){return void new o(l.bind(c)).then(function(t){i(a,t)},n)}}e[a]=c,0===--s&&t(e)}if(0===e.length)return t([]);for(var s=e.length,a=0;a<e.length;a++)i(a,e[a])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!==typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function c(t){var e=new FileReader,n=s(e);return e.readAsText(t),n}function l(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}function u(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&b(t))this._bodyArrayBuffer=u(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=d(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function g(t){var e=new r;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};r.prototype.append=function(t,i){t=e(t),i=n(i);var r=this.map[t];this.map[t]=r?r+","+i:i},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,i){this.map[e(t)]=n(i)},r.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i(t)},v.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=f,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,i){var r=new f(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),r.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(103),s=n.n(o),a=n(24),c=n(15),l=n(146),u=n(65),h=n(84),d=(n(83),n(192)),f=n(229),p=(n.n(f),document.getElementById("root")),g=r.a.createElement(a.a,{store:u.a},r.a.createElement(c.a,{history:h.a},r.a.createElement("div",null,r.a.createElement(d.a,null))));p&&(s.a.render(g,p),Object(l.a)())},function(t,e,n){"use strict";function i(t){for(var e=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);b(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function r(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||P}function o(){}function s(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||P}function a(t,e,n){var i=void 0,r={},o=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)D.call(e,i)&&!B.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];r.children=c}if(t&&t.defaultProps)for(i in a=t.defaultProps)void 0===r[i]&&(r[i]=a[i]);return{$$typeof:E,type:t,key:o,ref:s,props:r,_owner:R.current}}function c(t){return"object"===("undefined"===typeof t?"undefined":v(t))&&null!==t&&t.$$typeof===E}function l(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function u(t,e,n,i){if(N.length){var r=N.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function h(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>N.length&&N.push(t)}function d(t,e,n,r){var o="undefined"===typeof t?"undefined":v(t);"undefined"!==o&&"boolean"!==o||(t=null);var s=!1;if(null===t)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case E:case A:s=!0}}if(s)return n(r,t,""===e?"."+f(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){o=t[a];var c=e+f(o,a);s+=d(o,c,n,r)}else if(null===t||"undefined"===typeof t?c=null:(c=O&&t[O]||t["@@iterator"],c="function"===typeof c?c:null),"function"===typeof c)for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=e+f(o,a++),s+=d(o,c,n,r);else"object"===o&&(n=""+t,i("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return s}function f(t,e){return"object"===("undefined"===typeof t?"undefined":v(t))&&null!==t&&null!=t.key?l(t.key):e.toString(36)}function p(t,e){t.func.call(t.context,e,t.count++)}function g(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?m(t,i,n,_.thatReturnsArgument):null!=t&&(c(t)&&(e=r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+n,t={$$typeof:E,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),i.push(t))}function m(t,e,n,i,r){var o="";null!=n&&(o=(""+n).replace(I,"$&/")+"/"),e=u(e,o,i,r),null==t||d(t,"",g,e),h(e)}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=n(21),b=n(22),w=n(43),_=n(23),x="function"===typeof Symbol&&Symbol.for,E=x?Symbol.for("react.element"):60103,A=x?Symbol.for("react.portal"):60106,C=x?Symbol.for("react.fragment"):60107,S=x?Symbol.for("react.strict_mode"):60108,M=x?Symbol.for("react.provider"):60109,T=x?Symbol.for("react.context"):60110,k=x?Symbol.for("react.async_mode"):60111,F=x?Symbol.for("react.forward_ref"):60112,O="function"===typeof Symbol&&Symbol.iterator,P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!==("undefined"===typeof t?"undefined":v(t))&&"function"!==typeof t&&null!=t&&i("85"),this.updater.enqueueSetState(this,t,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=r.prototype;var L=s.prototype=new o;L.constructor=s,y(L,r.prototype),L.isPureReactComponent=!0;var R={current:null},D=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0},I=/\/+/g,N=[],j={Children:{map:function(t,e,n){if(null==t)return t;var i=[];return m(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;e=u(null,null,e,n),null==t||d(t,"",p,e),h(e)},count:function(t){return null==t?0:d(t,"",_.thatReturnsNull,null)},toArray:function(t){var e=[];return m(t,e,null,_.thatReturnsArgument),e},only:function(t){return c(t)||i("143"),t}},createRef:function(){return{current:null}},Component:r,PureComponent:s,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:T,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_changedBits:0,Provider:null,Consumer:null},t.Provider={$$typeof:M,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:F,render:t}},Fragment:C,StrictMode:S,unstable_AsyncMode:k,createElement:a,cloneElement:function(t,e,n){(null===t||void 0===t)&&i("267",t);var r=void 0,o=y({},t.props),s=t.key,a=t.ref,c=t._owner;if(null!=e){void 0!==e.ref&&(a=e.ref,c=R.current),void 0!==e.key&&(s=""+e.key);var l=void 0;t.type&&t.type.defaultProps&&(l=t.type.defaultProps);for(r in e)D.call(e,r)&&!B.hasOwnProperty(r)&&(o[r]=void 0===e[r]&&void 0!==l?l[r]:e[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){l=Array(r);for(var u=0;u<r;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:E,type:t.type,key:s,ref:a,props:o,_owner:c}},createFactory:function(t){var e=a.bind(null,t);return e.type=t,e},isValidElement:c,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:y}},U=Object.freeze({default:j}),$=U&&j||U;t.exports=$.default?$.default:$},function(t,e,n){"use strict";function i(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}i(),t.exports=n(104)},function(t,e,n){"use strict";function i(t){for(var e=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);un(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function r(t,e,n,i,r,o,s,a,c){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this._caughtError=t,this._hasCaughtError=!0}}function o(){if(bn._hasRethrowError){var t=bn._rethrowError;throw bn._rethrowError=null,bn._hasRethrowError=!1,t}}function s(){if(wn)for(var t in _n){var e=_n[t],n=wn.indexOf(t);if(-1<n||i("96",t),!xn[n]){e.extractEvents||i("97",t),xn[n]=e,n=e.eventTypes;for(var r in n){var o=void 0,s=n[r],c=e,l=r;En.hasOwnProperty(l)&&i("99",l),En[l]=s;var u=s.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&a(u[o],c,l);o=!0}else s.registrationName?(a(s.registrationName,c,l),o=!0):o=!1;o||i("98",r,t)}}}}function a(t,e,n){An[t]&&i("100",t),An[t]=e,Cn[t]=e.eventTypes[n].dependencies}function c(t){wn&&i("101"),wn=Array.prototype.slice.call(t),s()}function l(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];_n.hasOwnProperty(e)&&_n[e]===r||(_n[e]&&i("102",e),_n[e]=r,n=!0)}n&&s()}function u(t,e,n,i){e=t.type||"unknown-event",t.currentTarget=kn(i),bn.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function h(t,e){return null==e&&i("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function d(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}function f(t,e){if(t){var n=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!t.isPropagationStopped();r++)u(t,e,n[r],i[r]);else n&&u(t,e,n,i);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function p(t){return f(t,!0)}function g(t){return f(t,!1)}function m(t,e){var n=t.stateNode;if(!n)return null;var r=Mn(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(t=t.type,r=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&i("231",e,"undefined"===typeof n?"undefined":ln(n)),n)}function v(t,e){null!==t&&(Fn=h(Fn,t)),t=Fn,Fn=null,t&&(e?d(t,p):d(t,g),Fn&&i("95"),bn.rethrowCaughtError())}function y(t,e,n,i){for(var r=null,o=0;o<xn.length;o++){var s=xn[o];s&&(s=s.extractEvents(t,e,n,i))&&(r=h(r,s))}v(r,!1)}function b(t){if(t[Rn])return t[Rn];for(;!t[Rn];){if(!t.parentNode)return null;t=t.parentNode}return t=t[Rn],5===t.tag||6===t.tag?t:null}function w(t){if(5===t.tag||6===t.tag)return t.stateNode;i("33")}function _(t){return t[Dn]||null}function x(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function E(t,e,n){for(var i=[];t;)i.push(t),t=x(t);for(t=i.length;0<t--;)e(i[t],"captured",n);for(t=0;t<i.length;t++)e(i[t],"bubbled",n)}function A(t,e,n){(e=m(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=h(n._dispatchListeners,e),n._dispatchInstances=h(n._dispatchInstances,t))}function C(t){t&&t.dispatchConfig.phasedRegistrationNames&&E(t._targetInst,A,t)}function S(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;e=e?x(e):null,E(e,A,t)}}function M(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=m(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,e),n._dispatchInstances=h(n._dispatchInstances,t))}function T(t){t&&t.dispatchConfig.registrationName&&M(t._targetInst,null,t)}function k(t){d(t,C)}function F(t,e,n,i){if(n&&i)t:{for(var r=n,o=i,s=0,a=r;a;a=x(a))s++;a=0;for(var c=o;c;c=x(c))a++;for(;0<s-a;)r=x(r),s--;for(;0<a-s;)o=x(o),a--;for(;s--;){if(r===o||r===o.alternate)break t;r=x(r),o=x(o)}r=null}else r=null;for(o=r,r=[];n&&n!==o&&(null===(s=n.alternate)||s!==o);)r.push(n),n=x(n);for(n=[];i&&i!==o&&(null===(s=i.alternate)||s!==o);)n.push(i),i=x(i);for(i=0;i<r.length;i++)M(r[i],"bubbled",t);for(t=n.length;0<t--;)M(n[t],"captured",e)}function O(){return!Nn&&dn.canUseDOM&&(Nn="textContent"in document.documentElement?"textContent":"innerText"),Nn}function P(){if(jn._fallbackText)return jn._fallbackText;var t,e,n=jn._startText,i=n.length,r=L(),o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return jn._fallbackText=r.slice(t,1<e?1-e:void 0),jn._fallbackText}function L(){return"value"in jn._root?jn._root.value:jn._root[O()]}function R(t,e,n,i){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var r in t)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?pn.thatReturnsTrue:pn.thatReturnsFalse,this.isPropagationStopped=pn.thatReturnsFalse,this}function D(t,e,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,n,i),r}return new this(t,e,n,i)}function B(t){t instanceof this||i("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function I(t){t.eventPool=[],t.getPooled=D,t.release=B}function N(t,e){switch(t){case"topKeyUp":return-1!==Vn.indexOf(e.keyCode);case"topKeyDown":return 229!==e.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function j(t){return t=t.detail,"object"===("undefined"===typeof t?"undefined":ln(t))&&"data"in t?t.data:null}function U(t,e){switch(t){case"topCompositionEnd":return j(e);case"topKeyPress":return 32!==e.which?null:(Zn=!0,Kn);case"topTextInput":return t=e.data,t===Kn&&Zn?null:t;default:return null}}function $(t,e){if(Jn)return"topCompositionEnd"===t||!Wn&&N(t,e)?(t=P(),jn._root=null,jn._startText=null,jn._fallbackText=null,Jn=!1,t):null;switch(t){case"topPaste":return null;case"topKeyPress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"topCompositionEnd":return Xn?null:e.data;default:return null}}function z(t){if(t=Tn(t)){ti&&"function"===typeof ti.restoreControlledState||i("194");var e=Mn(t.stateNode);ti.restoreControlledState(t.stateNode,t.type,e)}}function H(t){ni?ii?ii.push(t):ii=[t]:ni=t}function V(){return null!==ni||null!==ii}function W(){if(ni){var t=ni,e=ii;if(ii=ni=null,z(t),e)for(t=0;t<e.length;t++)z(e[t])}}function G(t,e){return t(e)}function q(t,e,n){return t(e,n)}function X(){}function K(t,e){if(oi)return t(e);oi=!0;try{return G(t,e)}finally{oi=!1,V()&&(X(),W())}}function Y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!si[t.type]:"textarea"===e}function Z(t){return t=t.target||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function J(t,e){return!(!dn.canUseDOM||e&&!("addEventListener"in document))&&(t="on"+t,e=t in document,e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e)}function Q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function tt(t){var e=Q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.get.call(this)},set:function(t){i=""+t,n.set.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}function et(t){t._valueTracker||(t._valueTracker=tt(t))}function nt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Q(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function it(t){return null===t||"undefined"===typeof t?null:(t=bi&&t[bi]||t["@@iterator"],"function"===typeof t?t:null)}function rt(t){if("function"===typeof(t=t.type))return t.displayName||t.name;if("string"===typeof t)return t;switch(t){case fi:return"ReactFragment";case di:return"ReactPortal";case ui:return"ReactCall";case hi:return"ReactReturn"}if("object"===("undefined"===typeof t?"undefined":ln(t))&&null!==t)switch(t.$$typeof){case yi:return t=t.render.displayName||t.render.name||"",""!==t?"ForwardRef("+t+")":"ForwardRef"}return null}function ot(t){var e="";do{t:switch(t.tag){case 0:case 1:case 2:case 5:var n=t._debugOwner,i=t._debugSource,r=rt(t),o=null;n&&(o=rt(n)),n=i,r="\n    in "+(r||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break t;default:r=""}e+=r,t=t.return}while(t);return e}function st(t){return!!xi.hasOwnProperty(t)||!_i.hasOwnProperty(t)&&(wi.test(t)?xi[t]=!0:(_i[t]=!0,!1))}function at(t,e,n,i){if(null!==n&&0===n.type)return!1;switch("undefined"===typeof e?"undefined":ln(e)){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}function ct(t,e,n,i){if(null===e||"undefined"===typeof e||at(t,e,n,i))return!0;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,i,r){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e}function ut(t){return t[1].toUpperCase()}function ht(t,e,n,i){var r=Ei.hasOwnProperty(e)?Ei[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(ct(e,n,r,i)&&(n=null),i||null===r?st(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(r=r.type,n=3===r||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}function dt(t,e){var n=e.checked;return fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function ft(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=yt(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function pt(t,e){null!=(e=e.checked)&&ht(t,"checked",e,!1)}function gt(t,e){pt(t,e);var n=yt(e.value);null!=n&&("number"===e.type?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n)),e.hasOwnProperty("value")?vt(t,e.type,n):e.hasOwnProperty("defaultValue")&&vt(t,e.type,yt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function mt(t,e){(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue"))&&(""===t.value&&(t.value=""+t._wrapperState.initialValue),t.defaultValue=""+t._wrapperState.initialValue),e=t.name,""!==e&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==e&&(t.name=e)}function vt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function yt(t){switch("undefined"===typeof t?"undefined":ln(t)){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t,e,n){return t=R.getPooled(Ci.change,t,e,n),t.type="change",H(n),k(t),t}function wt(t){v(t,!1)}function _t(t){if(nt(w(t)))return t}function xt(t,e){if("topChange"===t)return e}function Et(){Si&&(Si.detachEvent("onpropertychange",At),Mi=Si=null)}function At(t){"value"===t.propertyName&&_t(Mi)&&(t=bt(Mi,t,Z(t)),K(wt,t))}function Ct(t,e,n){"topFocus"===t?(Et(),Si=e,Mi=n,Si.attachEvent("onpropertychange",At)):"topBlur"===t&&Et()}function St(t){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return _t(Mi)}function Mt(t,e){if("topClick"===t)return _t(e)}function Tt(t,e){if("topInput"===t||"topChange"===t)return _t(e)}function kt(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Oi[t])&&!!e[t]}function Ft(){return kt}function Ot(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(e=e.return,0!==(2&e.effectTag))return 1}return 3===e.tag?2:3}function Pt(t){return!!(t=t._reactInternalFiber)&&2===Ot(t)}function Lt(t){2!==Ot(t)&&i("188")}function Rt(t){var e=t.alternate;if(!e)return e=Ot(t),3===e&&i("188"),1===e?null:t;for(var n=t,r=e;;){var o=n.return,s=o?o.alternate:null;if(!o||!s)break;if(o.child===s.child){for(var a=o.child;a;){if(a===n)return Lt(o),t;if(a===r)return Lt(o),e;a=a.sibling}i("188")}if(n.return!==r.return)n=o,r=s;else{a=!1;for(var c=o.child;c;){if(c===n){a=!0,n=o,r=s;break}if(c===r){a=!0,r=o,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=o;break}if(c===r){a=!0,r=s,n=o;break}c=c.sibling}a||i("189")}}n.alternate!==r&&i("190")}return 3!==n.tag&&i("188"),n.stateNode.current===n?t:e}function Dt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Bt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function It(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Nt(t,e){var n=t[0].toUpperCase()+t.slice(1),i="on"+n;n="top"+n,e={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:e},Wi[t]=e,Gi[n]=e}function jt(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n;for(n=e;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(e),e=b(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],y(t.topLevelType,e,t.nativeEvent,Z(t.nativeEvent))}function Ut(t){Yi=!!t}function $t(t,e,n){if(!n)return null;t=(Xi(t)?Ht:Vt).bind(null,t),n.addEventListener(e,t,!1)}function zt(t,e,n){if(!n)return null;t=(Xi(t)?Ht:Vt).bind(null,t),n.addEventListener(e,t,!0)}function Ht(t,e){q(Vt,t,e)}function Vt(t,e){if(Yi){var n=Z(e);if(n=b(n),null!==n&&"number"===typeof n.tag&&2!==Ot(n)&&(n=null),Ki.length){var i=Ki.pop();i.topLevelType=t,i.nativeEvent=e,i.targetInst=n,t=i}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{K(jt,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Ki.length&&Ki.push(t)}}}function Wt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function Gt(t){if(Qi[t])return Qi[t];if(!Ji[t])return t;var e,n=Ji[t];for(e in n)if(n.hasOwnProperty(e)&&e in tr)return Qi[t]=n[e];return t}function qt(t){return Object.prototype.hasOwnProperty.call(t,or)||(t[or]=rr++,ir[t[or]]={}),ir[t[or]]}function Xt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kt(t,e){var n=Xt(t);t=0;for(var i;n;){if(3===n.nodeType){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Xt(n)}}function Yt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)}function Zt(t,e){if(hr||null==cr||cr!==gn())return null;var n=cr;return"selectionStart"in n&&Yt(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,ur&&mn(ur,n)?null:(ur=n,t=R.getPooled(ar.select,lr,t,e),t.type="select",t.target=cr,k(t),t)}function Jt(t,e,n,i){this.tag=t,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=e,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Qt(t,e,n){var i=t.alternate;return null===i?(i=new Jt(t.tag,e,t.key,t.mode),i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.expirationTime=n,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function te(t,e,n){var r=t.type,o=t.key;t=t.props;var s=void 0;if("function"===typeof r)s=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"===typeof r)s=5;else switch(r){case fi:return ee(t.children,e,n,o);case vi:s=11,e|=3;break;case pi:s=11,e|=2;break;case ui:s=7;break;case hi:s=9;break;default:if("object"===("undefined"===typeof r?"undefined":ln(r))&&null!==r)switch(r.$$typeof){case gi:s=13;break;case mi:s=12;break;case yi:s=14;break;default:if("number"===typeof r.tag)return e=r,e.pendingProps=t,e.expirationTime=n,e;i("130",null==r?r:"undefined"===typeof r?"undefined":ln(r),"")}else i("130",null==r?r:"undefined"===typeof r?"undefined":ln(r),"")}return e=new Jt(s,t,o,e),e.type=r,e.expirationTime=n,e}function ee(t,e,n,i){return t=new Jt(10,t,i,e),t.expirationTime=n,t}function ne(t,e,n){return t=new Jt(6,t,null,e),t.expirationTime=n,t}function ie(t,e,n){return e=new Jt(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function re(t){return function(e){try{return t(e)}catch(t){}}}function oe(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);fr=re(function(t){return e.onCommitFiberRoot(n,t)}),pr=re(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0}function se(t){"function"===typeof fr&&fr(t)}function ae(t){"function"===typeof pr&&pr(t)}function ce(t){return{baseState:t,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function le(t,e){null===t.last?t.first=t.last=e:(t.last.next=e,t.last=e),(0===t.expirationTime||t.expirationTime>e.expirationTime)&&(t.expirationTime=e.expirationTime)}function ue(t){gr=mr=null;var e=t.alternate,n=t.updateQueue;null===n&&(n=t.updateQueue=ce(null)),null!==e?null===(t=e.updateQueue)&&(t=e.updateQueue=ce(null)):t=null,gr=n,mr=t!==n?t:null}function he(t,e){ue(t),t=gr;var n=mr;null===n?le(t,e):null===t.last||null===n.last?(le(t,e),le(n,e)):(le(t,e),n.last=e)}function de(t,e,n,i){return t=t.partialState,"function"===typeof t?t.call(e,n,i):t}function fe(t,e,n,i,r,o){null!==t&&t.updateQueue===n&&(n=e.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?t=n.baseState:(t=n.baseState=e.memoizedState,n.isInitialized=!0);for(var s=!0,a=n.first,c=!1;null!==a;){var l=a.expirationTime;if(l>o){var u=n.expirationTime;(0===u||u>l)&&(n.expirationTime=l),c||(c=!0,n.baseState=t)}else c||(n.first=a.next,null===n.first&&(n.last=null)),a.isReplace?(t=de(a,i,t,r),s=!0):(l=de(a,i,t,r))&&(t=s?fn({},t,l):fn(t,l),s=!1),a.isForced&&(n.hasForceUpdate=!0),null!==a.callback&&(l=n.callbackList,null===l&&(l=n.callbackList=[]),l.push(a)),null!==a.capturedValue&&(l=n.capturedValues,null===l?n.capturedValues=[a.capturedValue]:l.push(a.capturedValue));a=a.next}return null!==n.callbackList?e.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(e.updateQueue=null),c||(n.baseState=t),t}function pe(t,e){var n=t.callbackList;if(null!==n)for(t.callbackList=null,t=0;t<n.length;t++){var r=n[t],o=r.callback;r.callback=null,"function"!==typeof o&&i("191",o),o.call(e)}}function ge(t,e,n,i,r){function o(t,e,n,i,r,o){if(null===e||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)return!0;var s=t.stateNode;return t=t.type,"function"===typeof s.shouldComponentUpdate?s.shouldComponentUpdate(n,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!mn(e,n)||!mn(i,r))}function s(t,e){e.updater=p,t.stateNode=e,e._reactInternalFiber=t}function a(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&p.enqueueReplaceState(e,e.state,null)}function c(t,e,n,i){if(t=t.type,"function"===typeof t.getDerivedStateFromProps)return t.getDerivedStateFromProps.call(null,n,i)}var l=t.cacheContext,u=t.getMaskedContext,h=t.getUnmaskedContext,d=t.isContextConsumer,f=t.hasContextChanged,p={isMounted:Pt,enqueueSetState:function(t,i,r){t=t._reactInternalFiber,r=void 0===r?null:r;var o=n(t);he(t,{expirationTime:o,partialState:i,callback:r,isReplace:!1,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueReplaceState:function(t,i,r){t=t._reactInternalFiber,r=void 0===r?null:r;var o=n(t);he(t,{expirationTime:o,partialState:i,callback:r,isReplace:!0,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueForceUpdate:function(t,i){t=t._reactInternalFiber,i=void 0===i?null:i;var r=n(t);he(t,{expirationTime:r,partialState:null,callback:i,isReplace:!1,isForced:!0,capturedValue:null,next:null}),e(t,r)}};return{adoptClassInstance:s,callGetDerivedStateFromProps:c,constructClassInstance:function(t,e){var n=t.type,i=h(t),r=d(t),o=r?u(t,i):yn;n=new n(e,o);var a=null!==n.state&&void 0!==n.state?n.state:null;return s(t,n),t.memoizedState=a,e=c(t,n,e,a),null!==e&&void 0!==e&&(t.memoizedState=fn({},t.memoizedState,e)),r&&l(t,i,o),n},mountClassInstance:function(t,e){var n=t.type,i=t.alternate,r=t.stateNode,o=t.pendingProps,s=h(t);r.props=o,r.state=t.memoizedState,r.refs=yn,r.context=u(t,s),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(n=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&p.enqueueReplaceState(r,r.state,null),null!==(n=t.updateQueue)&&(r.state=fe(i,t,n,r,o,e))),"function"===typeof r.componentDidMount&&(t.effectTag|=4)},resumeMountClassInstance:function(t,e){var n=t.type,s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var l=t.memoizedProps,d=t.pendingProps,p=s.context,g=h(t);g=u(t,g),(n="function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(l!==d||p!==g)&&a(t,s,d,g),p=t.memoizedState,e=null!==t.updateQueue?fe(null,t,t.updateQueue,s,d,e):p;var m=void 0;if(l!==d&&(m=c(t,s,d,e)),null!==m&&void 0!==m){e=null===e||void 0===e?m:fn({},e,m);var v=t.updateQueue;null!==v&&(v.baseState=fn({},v.baseState,m))}return l!==d||p!==e||f()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((l=o(t,l,d,p,e,g))?(n||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),i(t,d),r(t,e)),s.props=d,s.state=e,s.context=g,l):("function"===typeof s.componentDidMount&&(t.effectTag|=4),!1)},updateClassInstance:function(t,e,n){var s=e.type,l=e.stateNode;l.props=e.memoizedProps,l.state=e.memoizedState;var d=e.memoizedProps,p=e.pendingProps,g=l.context,m=h(e);m=u(e,m),(s="function"===typeof s.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(d!==p||g!==m)&&a(e,l,p,m),g=e.memoizedState,n=null!==e.updateQueue?fe(t,e,e.updateQueue,l,p,n):g;var v=void 0;if(d!==p&&(v=c(e,l,p,n)),null!==v&&void 0!==v){n=null===n||void 0===n?v:fn({},n,v);var y=e.updateQueue;null!==y&&(y.baseState=fn({},y.baseState,v))}return d!==p||g!==n||f()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((v=o(e,d,p,g,n,m))?(s||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(p,n,m),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(p,n,m)),"function"===typeof l.componentDidUpdate&&(e.effectTag|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(e.effectTag|=2048)):("function"!==typeof l.componentDidUpdate||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=4),"function"!==typeof l.getSnapshotBeforeUpdate||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=2048),i(e,p),r(e,n)),l.props=p,l.state=n,l.context=m,v):("function"!==typeof l.componentDidUpdate||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=4),"function"!==typeof l.getSnapshotBeforeUpdate||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=2048),!1)}}}function me(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==("undefined"===typeof t?"undefined":ln(t))){if(n._owner){n=n._owner;var r=void 0;n&&(2!==n.tag&&i("110"),r=n.stateNode),r||i("147",t);var o=""+t;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs===yn?r.refs={}:r.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}"string"!==typeof t&&i("148"),n._owner||i("254",t)}return t}function ve(t,e){"textarea"!==t.type&&i("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function ye(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,n){return t=Qt(t,e,n),t.index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index,i<n?(e.effectTag=2,n):i):(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function c(t,e,n,i){return null===e||6!==e.tag?(e=ne(n,t.mode,i),e.return=t,e):(e=o(e,n,i),e.return=t,e)}function l(t,e,n,i){return null!==e&&e.type===n.type?(i=o(e,n.props,i),i.ref=me(t,e,n),i.return=t,i):(i=te(n,t.mode,i),i.ref=me(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=ie(n,t.mode,i),e.return=t,e):(e=o(e,n.children||[],i),e.return=t,e)}function h(t,e,n,i,r){return null===e||10!==e.tag?(e=ee(n,t.mode,i,r),e.return=t,e):(e=o(e,n,i),e.return=t,e)}function d(t,e,n){if("string"===typeof e||"number"===typeof e)return e=ne(""+e,t.mode,n),e.return=t,e;if("object"===("undefined"===typeof e?"undefined":ln(e))&&null!==e){switch(e.$$typeof){case li:return n=te(e,t.mode,n),n.ref=me(t,null,e),n.return=t,n;case di:return e=ie(e,t.mode,n),e.return=t,e}if(vr(e)||it(e))return e=ee(e,t.mode,n,null),e.return=t,e;ve(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:c(t,e,""+n,i);if("object"===("undefined"===typeof n?"undefined":ln(n))&&null!==n){switch(n.$$typeof){case li:return n.key===r?n.type===fi?h(t,e,n.props.children,i,r):l(t,e,n,i):null;case di:return n.key===r?u(t,e,n,i):null}if(vr(n)||it(n))return null!==r?null:h(t,e,n,i,null);ve(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i||"number"===typeof i)return t=t.get(n)||null,c(e,t,""+i,r);if("object"===("undefined"===typeof i?"undefined":ln(i))&&null!==i){switch(i.$$typeof){case li:return t=t.get(null===i.key?n:i.key)||null,i.type===fi?h(e,t,i.props.children,r,i.key):l(e,t,i,r);case di:return t=t.get(null===i.key?n:i.key)||null,u(e,t,i,r)}if(vr(i)||it(i))return t=t.get(n)||null,h(e,t,i,r,null);ve(e,i)}return null}function g(i,o,a,c){for(var l=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],c);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(i,h),o=s(v,o,g),null===u?l=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),l;if(null===h){for(;g<a.length;g++)(h=d(i,a[g],c))&&(o=s(h,o,g),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);g<a.length;g++)(m=p(h,i,g,a[g],c))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?l=m:u.sibling=m,u=m);return t&&h.forEach(function(t){return e(i,t)}),l}function m(o,a,c,l){var u=it(c);"function"!==typeof u&&i("150"),null==(c=u.call(c))&&i("151");for(var h=u=null,g=a,m=a=0,v=null,y=c.next();null!==g&&!y.done;m++,y=c.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(o,g,y.value,l);if(null===b){g||(g=v);break}t&&g&&null===b.alternate&&e(o,g),a=s(b,a,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(o,g),u;if(null===g){for(;!y.done;m++,y=c.next())null!==(y=d(o,y.value,l))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return u}for(g=r(o,g);!y.done;m++,y=c.next())null!==(y=p(g,o,m,y.value,l))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach(function(t){return e(o,t)}),u}return function(t,r,s,c){"object"===("undefined"===typeof s?"undefined":ln(s))&&null!==s&&s.type===fi&&null===s.key&&(s=s.props.children);var l="object"===("undefined"===typeof s?"undefined":ln(s))&&null!==s;if(l)switch(s.$$typeof){case li:t:{var u=s.key;for(l=r;null!==l;){if(l.key===u){if(10===l.tag?s.type===fi:l.type===s.type){n(t,l.sibling),r=o(l,s.type===fi?s.props.children:s.props,c),r.ref=me(t,l,s),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}s.type===fi?(r=ee(s.props.children,t.mode,c,s.key),r.return=t,t=r):(c=te(s,t.mode,c),c.ref=me(t,r,s),c.return=t,t=c)}return a(t);case di:t:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(t,r.sibling),r=o(r,s.children||[],c),r.return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}r=ie(s,t.mode,c),r.return=t,t=r}return a(t)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(t,r.sibling),r=o(r,s,c),r.return=t,t=r):(n(t,r),r=ne(s,t.mode,c),r.return=t,t=r),a(t);if(vr(s))return g(t,r,s,c);if(it(s))return m(t,r,s,c);if(l&&ve(t,s),"undefined"===typeof s)switch(t.tag){case 2:case 1:c=t.type,i("152",c.displayName||c.name||"Component")}return n(t,r)}}function be(t,e,n,r,o,s,a){function c(t,e,n){l(t,e,n,e.expirationTime)}function l(t,e,n,i){e.child=null===t?br(e,null,n,i):yr(e,t.child,n,i)}function u(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function h(t,e,n,i,r,o){if(u(t,e),!n&&!r)return i&&S(e,!1),g(t,e);n=e.stateNode,ai.current=e;var s=r?null:n.render();return e.effectTag|=1,r&&(l(t,e,null,o),e.child=null),l(t,e,s,o),e.memoizedState=n.state,e.memoizedProps=n.props,i&&S(e,!0),e.child}function d(t){var e=t.stateNode;e.pendingContext?C(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C(t,e.context,!1),b(t,e.containerInfo)}function f(t,e,n,i){var r=t.child;for(null!==r&&(r.return=t);null!==r;){switch(r.tag){case 12:var o=0|r.stateNode;if(r.type===e&&0!==(o&n)){for(o=r;null!==o;){var s=o.alternate;if(0===o.expirationTime||o.expirationTime>i)o.expirationTime=i,null!==s&&(0===s.expirationTime||s.expirationTime>i)&&(s.expirationTime=i);else{if(null===s||!(0===s.expirationTime||s.expirationTime>i))break;s.expirationTime=i}o=o.return}o=null}else o=r.child;break;case 13:o=r.type===t.type?null:r.child;break;default:o=r.child}if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===t){o=null;break}if(null!==(r=o.sibling)){o=r;break}o=o.return}r=o}}function p(t,e,n){var i=e.type._context,r=e.pendingProps,o=e.memoizedProps;if(!E()&&o===r)return e.stateNode=0,w(e),g(t,e);var s=r.value;if(e.memoizedProps=r,null===o)s=1073741823;else if(o.value===r.value){if(o.children===r.children)return e.stateNode=0,w(e),g(t,e);s=0}else{var a=o.value;if(a===s&&(0!==a||1/a===1/s)||a!==a&&s!==s){if(o.children===r.children)return e.stateNode=0,w(e),g(t,e);s=0}else if(s="function"===typeof i._calculateChangedBits?i._calculateChangedBits(a,s):1073741823,0===(s|=0)){if(o.children===r.children)return e.stateNode=0,w(e),g(t,e)}else f(e,i,s,n)}return e.stateNode=s,w(e),c(t,e,r.children),e.child}function g(t,e){if(null!==t&&e.child!==t.child&&i("153"),null!==e.child){t=e.child;var n=Qt(t,t.pendingProps,t.expirationTime);for(e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=Qt(t,t.pendingProps,t.expirationTime),n.return=e;n.sibling=null}return e.child}var m=t.shouldSetTextContent,v=t.shouldDeprioritizeSubtree,y=e.pushHostContext,b=e.pushHostContainer,w=r.pushProvider,_=n.getMaskedContext,x=n.getUnmaskedContext,E=n.hasContextChanged,A=n.pushContextProvider,C=n.pushTopLevelContextObject,S=n.invalidateContextProvider,M=o.enterHydrationState,T=o.resetHydrationState,k=o.tryToClaimNextHydratableInstance;t=ge(n,s,a,function(t,e){t.memoizedProps=e},function(t,e){t.memoizedState=e});var F=t.adoptClassInstance,O=t.callGetDerivedStateFromProps,P=t.constructClassInstance,L=t.mountClassInstance,R=t.resumeMountClassInstance,D=t.updateClassInstance;return{beginWork:function(t,e,n){if(0===e.expirationTime||e.expirationTime>n){switch(e.tag){case 3:d(e);break;case 2:A(e);break;case 4:b(e,e.stateNode.containerInfo);break;case 13:w(e)}return null}switch(e.tag){case 0:null!==t&&i("155");var r=e.type,o=e.pendingProps,s=x(e);return s=_(e,s),r=r(o,s),e.effectTag|=1,"object"===("undefined"===typeof r?"undefined":ln(r))&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(s=e.type,e.tag=2,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"===typeof s.getDerivedStateFromProps&&null!==(o=O(e,r,o,e.memoizedState))&&void 0!==o&&(e.memoizedState=fn({},e.memoizedState,o)),o=A(e),F(e,r),L(e,n),t=h(t,e,!0,o,!1,n)):(e.tag=1,c(t,e,r),e.memoizedProps=o,t=e.child),t;case 1:return o=e.type,n=e.pendingProps,E()||e.memoizedProps!==n?(r=x(e),r=_(e,r),o=o(n,r),e.effectTag|=1,c(t,e,o),e.memoizedProps=n,t=e.child):t=g(t,e),t;case 2:o=A(e),null===t?null===e.stateNode?(P(e,e.pendingProps),L(e,n),r=!0):r=R(e,n):r=D(t,e,n),s=!1;var a=e.updateQueue;return null!==a&&null!==a.capturedValues&&(s=r=!0),h(t,e,r,o,s,n);case 3:t:if(d(e),null!==(r=e.updateQueue)){if(s=e.memoizedState,o=fe(t,e,r,null,null,n),e.memoizedState=o,null!==(r=e.updateQueue)&&null!==r.capturedValues)r=null;else{if(s===o){T(),t=g(t,e);break t}r=o.element}s=e.stateNode,(null===t||null===t.child)&&s.hydrate&&M(e)?(e.effectTag|=2,e.child=br(e,null,r,n)):(T(),c(t,e,r)),e.memoizedState=o,t=e.child}else T(),t=g(t,e);return t;case 5:return y(e),null===t&&k(e),o=e.type,a=e.memoizedProps,r=e.pendingProps,s=null!==t?t.memoizedProps:null,E()||a!==r||((a=1&e.mode&&v(o,r))&&(e.expirationTime=1073741823),a&&1073741823===n)?(a=r.children,m(o,r)?a=null:s&&m(o,s)&&(e.effectTag|=16),u(t,e),1073741823!==n&&1&e.mode&&v(o,r)?(e.expirationTime=1073741823,e.memoizedProps=r,t=null):(c(t,e,a),e.memoizedProps=r,t=e.child)):t=g(t,e),t;case 6:return null===t&&k(e),e.memoizedProps=e.pendingProps,null;case 8:e.tag=7;case 7:return o=e.pendingProps,E()||e.memoizedProps!==o||(o=e.memoizedProps),r=o.children,e.stateNode=null===t?br(e,e.stateNode,r,n):yr(e,t.stateNode,r,n),e.memoizedProps=o,e.stateNode;case 9:return null;case 4:return b(e,e.stateNode.containerInfo),o=e.pendingProps,E()||e.memoizedProps!==o?(null===t?e.child=yr(e,null,o,n):c(t,e,o),e.memoizedProps=o,t=e.child):t=g(t,e),t;case 14:return n=e.type.render,n=n(e.pendingProps,e.ref),c(t,e,n),e.memoizedProps=n,e.child;case 10:return n=e.pendingProps,E()||e.memoizedProps!==n?(c(t,e,n),e.memoizedProps=n,t=e.child):t=g(t,e),t;case 11:return n=e.pendingProps.children,E()||null!==n&&e.memoizedProps!==n?(c(t,e,n),e.memoizedProps=n,t=e.child):t=g(t,e),t;case 13:return p(t,e,n);case 12:t:{r=e.type,s=e.pendingProps,a=e.memoizedProps,o=r._currentValue;var l=r._changedBits;if(E()||0!==l||a!==s){e.memoizedProps=s;var C=s.unstable_observedBits;if(void 0!==C&&null!==C||(C=1073741823),e.stateNode=C,0!==(l&C))f(e,r,l,n);else if(a===s){t=g(t,e);break t}n=s.children,n=n(o),c(t,e,n),t=e.child}else t=g(t,e)}return t;default:i("156")}}}}function we(t,e,n,r,o){function s(t){t.effectTag|=4}var a=t.createInstance,c=t.createTextInstance,l=t.appendInitialChild,u=t.finalizeInitialChildren,h=t.prepareUpdate,d=t.persistence,f=e.getRootHostContainer,p=e.popHostContext,g=e.getHostContext,m=e.popHostContainer,v=n.popContextProvider,y=n.popTopLevelContextObject,b=r.popProvider,w=o.prepareToHydrateHostInstance,_=o.prepareToHydrateHostTextInstance,x=o.popHydrationState,E=void 0,A=void 0,C=void 0;return t.mutation?(E=function(){},A=function(t,e,n){(e.updateQueue=n)&&s(e)},C=function(t,e,n,i){n!==i&&s(e)}):i(d?"235":"236"),{completeWork:function(t,e,n){var r=e.pendingProps;switch(e.tag){case 1:return null;case 2:return v(e),t=e.stateNode,r=e.updateQueue,null!==r&&null!==r.capturedValues&&(e.effectTag&=-65,"function"===typeof t.componentDidCatch?e.effectTag|=256:r.capturedValues=null),null;case 3:return m(e),y(e),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(x(e),e.effectTag&=-3),E(e),t=e.updateQueue,null!==t&&null!==t.capturedValues&&(e.effectTag|=256),null;case 5:p(e),n=f();var o=e.type;if(null!==t&&null!=e.stateNode){var d=t.memoizedProps,S=e.stateNode,M=g();S=h(S,o,d,r,n,M),A(t,e,S,o,d,r,n,M),t.ref!==e.ref&&(e.effectTag|=128)}else{if(!r)return null===e.stateNode&&i("166"),null;if(t=g(),x(e))w(e,n,t)&&s(e);else{d=a(o,r,n,t,e);t:for(M=e.child;null!==M;){if(5===M.tag||6===M.tag)l(d,M.stateNode);else if(4!==M.tag&&null!==M.child){M.child.return=M,M=M.child;continue}if(M===e)break;for(;null===M.sibling;){if(null===M.return||M.return===e)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}u(d,o,r,n,t)&&s(e),e.stateNode=d}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)C(t,e,t.memoizedProps,r);else{if("string"!==typeof r)return null===e.stateNode&&i("166"),null;t=f(),n=g(),x(e)?_(e)&&s(e):e.stateNode=c(r,t,n,e)}return null;case 7:(r=e.memoizedProps)||i("165"),e.tag=8,o=[];t:for((d=e.stateNode)&&(d.return=e);null!==d;){if(5===d.tag||6===d.tag||4===d.tag)i("247");else if(9===d.tag)o.push(d.pendingProps.value);else if(null!==d.child){d.child.return=d,d=d.child;continue}for(;null===d.sibling;){if(null===d.return||d.return===e)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}return d=r.handler,r=d(r.props,o),e.child=yr(e,null!==t?t.child:null,r,n),e.child;case 8:return e.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return m(e),E(e),null;case 13:return b(e),null;case 12:return null;case 0:i("167");default:i("156")}}}}function _e(t,e,n,i,r){var o=t.popHostContainer,s=t.popHostContext,a=e.popContextProvider,c=e.popTopLevelContextObject,l=n.popProvider;return{throwException:function(t,e,n){e.effectTag|=512,e.firstEffect=e.lastEffect=null,e={value:n,source:e,stack:ot(e)};do{switch(t.tag){case 3:return ue(t),t.updateQueue.capturedValues=[e],void(t.effectTag|=1024);case 2:if(n=t.stateNode,0===(64&t.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&!r(n)){ue(t),n=t.updateQueue;var i=n.capturedValues;return null===i?n.capturedValues=[e]:i.push(e),void(t.effectTag|=1024)}}t=t.return}while(null!==t)},unwindWork:function(t){switch(t.tag){case 2:a(t);var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return o(t),c(t),e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 5:return s(t),null;case 4:return o(t),null;case 13:return l(t),null;default:return null}},unwindInterruptedWork:function(t){switch(t.tag){case 2:a(t);break;case 3:o(t),c(t);break;case 5:s(t);break;case 4:o(t);break;case 13:l(t)}}}}function xe(t,e){var n=e.source;null===e.stack&&ot(n),null!==n&&rt(n),e=e.value,null!==t&&2===t.tag&&rt(t);try{e&&e.suppressReactErrorLogging||console.error(e)}catch(t){t&&t.suppressReactErrorLogging||console.error(t)}}function Ee(t,e,n,r,o){function s(t){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(n){e(t,n)}else n.current=null}function a(t){switch("function"===typeof ae&&ae(t),t.tag){case 2:s(t);var n=t.stateNode;if("function"===typeof n.componentWillUnmount)try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(n){e(t,n)}break;case 5:s(t);break;case 7:c(t.stateNode);break;case 4:d&&u(t)}}function c(t){for(var e=t;;)if(a(e),null===e.child||d&&4===e.tag){if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}else e.child.return=e,e=e.child}function l(t){return 5===t.tag||3===t.tag||4===t.tag}function u(t){for(var e=t,n=!1,r=void 0,o=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&i("160"),n.tag){case 5:r=n.stateNode,o=!1;break t;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag)c(e),o?x(r,e.stateNode):_(r,e.stateNode);else if(4===e.tag?r=e.stateNode.containerInfo:a(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return,4===e.tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}var h=t.getPublicInstance,d=t.mutation;t=t.persistence,d||i(t?"235":"236");var f=d.commitMount,p=d.commitUpdate,g=d.resetTextContent,m=d.commitTextUpdate,v=d.appendChild,y=d.appendChildToContainer,b=d.insertBefore,w=d.insertInContainerBefore,_=d.removeChild,x=d.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(t,e){switch(e.tag){case 2:if(2048&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,t.props=e.memoizedProps,t.state=e.memoizedState,e=t.getSnapshotBeforeUpdate(n,r),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:break;default:i("163")}},commitResetTextContent:function(t){g(t.stateNode)},commitPlacement:function(t){t:{for(var e=t.return;null!==e;){if(l(e)){var n=e;break t}e=e.return}i("160"),n=void 0}var r=e=void 0;switch(n.tag){case 5:e=n.stateNode,r=!1;break;case 3:case 4:e=n.stateNode.containerInfo,r=!0;break;default:i("161")}16&n.effectTag&&(g(e),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||l(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var o=t;;){if(5===o.tag||6===o.tag)n?r?w(e,o.stateNode,n):b(e,o.stateNode,n):r?y(e,o.stateNode):v(e,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(t){u(t),t.return=null,t.child=null,t.alternate&&(t.alternate.child=null,t.alternate.return=null)},commitWork:function(t,e){switch(e.tag){case 2:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var o=e.type,s=e.updateQueue;e.updateQueue=null,null!==s&&p(n,s,o,t,r,e)}break;case 6:null===e.stateNode&&i("162"),n=e.memoizedProps,m(e.stateNode,null!==t?t.memoizedProps:n,n);break;case 3:break;default:i("163")}},commitLifeCycles:function(t,e,n){switch(n.tag){case 2:if(t=n.stateNode,4&n.effectTag)if(null===e)t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidMount();else{var r=e.memoizedProps;e=e.memoizedState,t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}n=n.updateQueue,null!==n&&pe(n,t);break;case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=h(n.child.stateNode);break;case 2:t=n.child.stateNode}pe(e,t)}break;case 5:t=n.stateNode,null===e&&4&n.effectTag&&f(t,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:i("163")}},commitErrorLogging:function(t,e){switch(t.tag){case 2:var n=t.type;e=t.stateNode;var r=t.updateQueue;(null===r||null===r.capturedValues)&&i("264");var s=r.capturedValues;for(r.capturedValues=null,"function"!==typeof n.getDerivedStateFromCatch&&o(e),e.props=t.memoizedProps,e.state=t.memoizedState,n=0;n<s.length;n++){r=s[n];var a=r.value,c=r.stack;xe(t,r),e.componentDidCatch(a,{componentStack:null!==c?c:""})}break;case 3:for(n=t.updateQueue,(null===n||null===n.capturedValues)&&i("264"),s=n.capturedValues,n.capturedValues=null,n=0;n<s.length;n++)r=s[n],xe(t,r),e(r.value);break;default:i("265")}},commitAttachRef:function(t){var e=t.ref;if(null!==e){var n=t.stateNode;switch(t.tag){case 5:t=h(n);break;default:t=n}"function"===typeof e?e(t):e.current=t}},commitDetachRef:function(t){null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null)}}}function Ae(t,e){function n(t){return t===wr&&i("174"),t}var r=t.getChildHostContext,o=t.getRootHostContext;t=e.createCursor;var s=e.push,a=e.pop,c=t(wr),l=t(wr),u=t(wr);return{getHostContext:function(){return n(c.current)},getRootHostContainer:function(){return n(u.current)},popHostContainer:function(t){a(c,t),a(l,t),a(u,t)},popHostContext:function(t){l.current===t&&(a(c,t),a(l,t))},pushHostContainer:function(t,e){s(u,e,t),s(l,t,t),s(c,wr,t),e=o(e),a(c,t),s(c,e,t)},pushHostContext:function(t){var e=n(u.current),i=n(c.current);e=r(i,t.type,e),i!==e&&(s(l,t,t),s(c,e,t))}}}function Ce(t){function e(t,e){var n=new Jt(5,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function n(t,e){switch(t.tag){case 5:return null!==(e=s(e,t.type,t.pendingProps))&&(t.stateNode=e,!0);case 6:return null!==(e=a(e,t.pendingProps))&&(t.stateNode=e,!0);default:return!1}}function r(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;d=t}var o=t.shouldSetTextContent;if(!(t=t.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){i("175")},prepareToHydrateHostTextInstance:function(){i("176")},popHydrationState:function(){return!1}};var s=t.canHydrateInstance,a=t.canHydrateTextInstance,c=t.getNextHydratableSibling,l=t.getFirstHydratableChild,u=t.hydrateInstance,h=t.hydrateTextInstance,d=null,f=null,p=!1;return{enterHydrationState:function(t){return f=l(t.stateNode.containerInfo),d=t,p=!0},resetHydrationState:function(){f=d=null,p=!1},tryToClaimNextHydratableInstance:function(t){if(p){var i=f;if(i){if(!n(t,i)){if(!(i=c(i))||!n(t,i))return t.effectTag|=2,p=!1,void(d=t);e(d,f)}d=t,f=l(i)}else t.effectTag|=2,p=!1,d=t}},prepareToHydrateHostInstance:function(t,e,n){return e=u(t.stateNode,t.type,t.memoizedProps,e,n,t),t.updateQueue=e,null!==e},prepareToHydrateHostTextInstance:function(t){return h(t.stateNode,t.memoizedProps,t)},popHydrationState:function(t){if(t!==d)return!1;if(!p)return r(t),p=!0,!1;var n=t.type;if(5!==t.tag||"head"!==n&&"body"!==n&&!o(n,t.memoizedProps))for(n=f;n;)e(t,n),n=c(n);return r(t),f=d?c(t.stateNode):null,!0}}}function Se(t){function e(t,e,n){t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n}function n(t){return 2===t.tag&&null!=t.type.childContextTypes}function r(t,e){var n=t.stateNode,r=t.type.childContextTypes;if("function"!==typeof n.getChildContext)return e;n=n.getChildContext();for(var o in n)o in r||i("108",rt(t)||"Unknown",o);return fn({},e,n)}var o=t.createCursor,s=t.push,a=t.pop,c=o(yn),l=o(!1),u=yn;return{getUnmaskedContext:function(t){return n(t)?u:c.current},cacheContext:e,getMaskedContext:function(t,n){var i=t.type.contextTypes;if(!i)return yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var o,s={};for(o in i)s[o]=n[o];return r&&e(t,n,s),s},hasContextChanged:function(){return l.current},isContextConsumer:function(t){return 2===t.tag&&null!=t.type.contextTypes},isContextProvider:n,popContextProvider:function(t){n(t)&&(a(l,t),a(c,t))},popTopLevelContextObject:function(t){a(l,t),a(c,t)},pushTopLevelContextObject:function(t,e,n){null!=c.cursor&&i("168"),s(c,e,t),s(l,n,t)},processChildContext:r,pushContextProvider:function(t){if(!n(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||yn,u=c.current,s(c,e,t),s(l,l.current,t),!0},invalidateContextProvider:function(t,e){var n=t.stateNode;if(n||i("169"),e){var o=r(t,u);n.__reactInternalMemoizedMergedChildContext=o,a(l,t),a(c,t),s(c,o,t)}else a(l,t);s(l,e,t)},findCurrentUnmaskedContext:function(t){for(2!==Ot(t)||2!==t.tag?i("170"):void 0;3!==t.tag;){if(n(t))return t.stateNode.__reactInternalMemoizedMergedChildContext;(t=t.return)||i("171")}return t.stateNode.context}}}function Me(t){var e=t.createCursor,n=t.push,i=t.pop,r=e(null),o=e(null),s=e(0);return{pushProvider:function(t){var e=t.type._context;n(s,e._changedBits,t),n(o,e._currentValue,t),n(r,t,t),e._currentValue=t.pendingProps.value,e._changedBits=t.stateNode},popProvider:function(t){var e=s.current,n=o.current;i(r,t),i(o,t),i(s,t),t=t.type._context,t._currentValue=n,t._changedBits=e}}}function Te(){var t=[],e=-1;return{createCursor:function(t){return{current:t}},isEmpty:function(){return-1===e},pop:function(n){0>e||(n.current=t[e],t[e]=null,e--)},push:function(n,i){e++,t[e]=n.current,n.current=i},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}function ke(t){function e(){if(null!==Q)for(var t=Q.return;null!==t;)P(t),t=t.return;tt=null,et=0,Q=null,rt=!1}function n(t){return null!==st&&st.has(t)}function r(t){for(;;){var e=t.alternate,n=t.return,i=t.sibling;if(0===(512&t.effectTag)){e=k(e,t,et);var r=t;if(1073741823===et||1073741823!==r.expirationTime){t:switch(r.tag){case 3:case 2:var o=r.updateQueue;o=null===o?0:o.expirationTime;break t;default:o=0}for(var s=r.child;null!==s;)0!==s.expirationTime&&(0===o||o>s.expirationTime)&&(o=s.expirationTime),s=s.sibling;r.expirationTime=o}if(null!==e)return e;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==i)return i;if(null===n){rt=!0;break}t=n}else{if(null!==(t=O(t)))return t.effectTag&=2559,t;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==i)return i;if(null===n)break;t=n}}return null}function o(t){var e=T(t.alternate,t,et);return null===e&&(e=r(t)),ai.current=null,e}function s(t,n,s){J&&i("243"),J=!0,n===et&&t===tt&&null!==Q||(e(),tt=t,et=n,Q=Qt(tt.current,null,et),t.pendingCommitExpirationTime=0);for(var a=!1;;){try{if(s)for(;null!==Q&&!x();)Q=o(Q);else for(;null!==Q;)Q=o(Q)}catch(t){if(null===Q){a=!0,E(t);break}s=Q;var c=s.return;if(null===c){a=!0,E(t);break}F(c,s,t),Q=r(s)}break}return J=!1,a||null!==Q?null:rt?(t.pendingCommitExpirationTime=n,t.current.alternate):void i("262")}function a(t,e,n,i){t={value:n,source:t,stack:ot(t)},he(e,{expirationTime:i,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:t,next:null}),u(e,i)}function c(t,e){t:{J&&!it&&i("263");for(var r=t.return;null!==r;){switch(r.tag){case 2:var o=r.stateNode;if("function"===typeof r.type.getDerivedStateFromCatch||"function"===typeof o.componentDidCatch&&!n(o)){a(t,r,e,1),t=void 0;break t}break;case 3:a(t,r,e,1),t=void 0;break t}r=r.return}3===t.tag&&a(t,t,e,1),t=void 0}return t}function l(t){return t=0!==Z?Z:J?it?1:et:1&t.mode?_t?10*(1+((h()+15)/10|0)):25*(1+((h()+500)/25|0)):1,_t&&(0===pt||t>pt)&&(pt=t),t}function u(t,n){t:{for(;null!==t;){if((0===t.expirationTime||t.expirationTime>n)&&(t.expirationTime=n),null!==t.alternate&&(0===t.alternate.expirationTime||t.alternate.expirationTime>n)&&(t.alternate.expirationTime=n),null===t.return){if(3!==t.tag){n=void 0;break t}var r=t.stateNode;!J&&0!==et&&n<et&&e(),J&&!it&&tt===r||p(r,n),At>Et&&i("185")}t=t.return}n=void 0}return n}function h(){return K=z()-q,X=2+(K/10|0)}function d(t,e,n,i,r){var o=Z;Z=1;try{return t(e,n,i,r)}finally{Z=o}}function f(t){if(0!==lt){if(t>lt)return;V(ut)}var e=z()-q;lt=t,ut=H(m,{timeout:10*(t-2)-e})}function p(t,e){if(null===t.nextScheduledRoot)t.remainingExpirationTime=e,null===ct?(at=ct=t,t.nextScheduledRoot=t):(ct=ct.nextScheduledRoot=t,ct.nextScheduledRoot=at);else{var n=t.remainingExpirationTime;(0===n||e<n)&&(t.remainingExpirationTime=e)}ht||(bt?wt&&(dt=t,ft=1,w(t,1,!1)):1===e?v():f(e))}function g(){var t=0,e=null;if(null!==ct)for(var n=ct,r=at;null!==r;){var o=r.remainingExpirationTime;if(0===o){if((null===n||null===ct)&&i("244"),r===r.nextScheduledRoot){at=ct=r.nextScheduledRoot=null;break}if(r===at)at=o=r.nextScheduledRoot,ct.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===ct){ct=n,ct.nextScheduledRoot=at,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===t||o<t)&&(t=o,e=r),r===ct)break;n=r,r=r.nextScheduledRoot}}n=dt,null!==n&&n===e&&1===t?At++:At=0,dt=e,ft=t}function m(t){y(0,!0,t)}function v(){y(1,!1,null)}function y(t,e,n){if(yt=n,g(),e)for(;null!==dt&&0!==ft&&(0===t||t>=ft)&&(!gt||h()>=ft);)w(dt,ft,!gt),g();else for(;null!==dt&&0!==ft&&(0===t||t>=ft);)w(dt,ft,!1),g();null!==yt&&(lt=0,ut=-1),0!==ft&&f(ft),yt=null,gt=!1,b()}function b(){if(At=0,null!==xt){var t=xt;xt=null;for(var e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){mt||(mt=!0,vt=t)}}}if(mt)throw t=vt,vt=null,mt=!1,t}function w(t,e,n){ht&&i("245"),ht=!0,n?(n=t.finishedWork,null!==n?_(t,n,e):(t.finishedWork=null,null!==(n=s(t,e,!0))&&(x()?t.finishedWork=n:_(t,n,e)))):(n=t.finishedWork,null!==n?_(t,n,e):(t.finishedWork=null,null!==(n=s(t,e,!1))&&_(t,n,e))),ht=!1}function _(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===xt?xt=[r]:xt.push(r),r._defer))return t.finishedWork=e,void(t.remainingExpirationTime=0);t.finishedWork=null,it=J=!0,n=e.stateNode,n.current===e&&i("177"),r=n.pendingCommitExpirationTime,0===r&&i("261"),n.pendingCommitExpirationTime=0;var o=h();if(ai.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var s=e.firstEffect}else s=e;else s=e.firstEffect;for(W(n.containerInfo),nt=s;null!==nt;){var a=!1,l=void 0;try{for(;null!==nt;)2048&nt.effectTag&&L(nt.alternate,nt),nt=nt.nextEffect}catch(t){a=!0,l=t}a&&(null===nt&&i("178"),c(nt,l),null!==nt&&(nt=nt.nextEffect))}for(nt=s;null!==nt;){a=!1,l=void 0;try{for(;null!==nt;){var u=nt.effectTag;if(16&u&&R(nt),128&u){var d=nt.alternate;null!==d&&$(d)}switch(14&u){case 2:D(nt),nt.effectTag&=-3;break;case 6:D(nt),nt.effectTag&=-3,I(nt.alternate,nt);break;case 4:I(nt.alternate,nt);break;case 8:B(nt)}nt=nt.nextEffect}}catch(t){a=!0,l=t}a&&(null===nt&&i("178"),c(nt,l),null!==nt&&(nt=nt.nextEffect))}for(G(n.containerInfo),n.current=e,nt=s;null!==nt;){u=!1,d=void 0;try{for(s=n,a=o,l=r;null!==nt;){var f=nt.effectTag;36&f&&N(s,nt.alternate,nt,a,l),256&f&&j(nt,E),128&f&&U(nt);var p=nt.nextEffect;nt.nextEffect=null,nt=p}}catch(t){u=!0,d=t}u&&(null===nt&&i("178"),c(nt,d),null!==nt&&(nt=nt.nextEffect))}J=it=!1,"function"===typeof se&&se(e.stateNode),e=n.current.expirationTime,0===e&&(st=null),t.remainingExpirationTime=e}function x(){return!(null===yt||yt.timeRemaining()>Ct)&&(gt=!0)}function E(t){null===dt&&i("246"),dt.remainingExpirationTime=0,mt||(mt=!0,vt=t)}var A=Te(),C=Ae(t,A),S=Se(A);A=Me(A);var M=Ce(t),T=be(t,C,S,A,M,u,l).beginWork,k=we(t,C,S,A,M).completeWork;C=_e(C,S,A,u,n);var F=C.throwException,O=C.unwindWork,P=C.unwindInterruptedWork;C=Ee(t,c,u,l,function(t){null===st?st=new Set([t]):st.add(t)},h);var L=C.commitBeforeMutationLifeCycles,R=C.commitResetTextContent,D=C.commitPlacement,B=C.commitDeletion,I=C.commitWork,N=C.commitLifeCycles,j=C.commitErrorLogging,U=C.commitAttachRef,$=C.commitDetachRef,z=t.now,H=t.scheduleDeferredCallback,V=t.cancelDeferredCallback,W=t.prepareForCommit,G=t.resetAfterCommit,q=z(),X=2,K=q,Y=0,Z=0,J=!1,Q=null,tt=null,et=0,nt=null,it=!1,rt=!1,st=null,at=null,ct=null,lt=0,ut=-1,ht=!1,dt=null,ft=0,pt=0,gt=!1,mt=!1,vt=null,yt=null,bt=!1,wt=!1,_t=!1,xt=null,Et=1e3,At=0,Ct=1;return{recalculateCurrentTime:h,computeExpirationForFiber:l,scheduleWork:u,requestWork:p,flushRoot:function(t,e){ht&&i("253"),dt=t,ft=e,w(t,e,!1),v(),b()},batchedUpdates:function(t,e){var n=bt;bt=!0;try{return t(e)}finally{(bt=n)||ht||v()}},unbatchedUpdates:function(t,e){if(bt&&!wt){wt=!0;try{return t(e)}finally{wt=!1}}return t(e)},flushSync:function(t,e){ht&&i("187");var n=bt;bt=!0;try{return d(t,e)}finally{bt=n,v()}},flushControlled:function(t){var e=bt;bt=!0;try{d(t)}finally{(bt=e)||ht||y(1,!1,null)}},deferredUpdates:function(t){var e=Z;Z=25*(1+((h()+500)/25|0));try{return t()}finally{Z=e}},syncUpdates:d,interactiveUpdates:function(t,e,n){if(_t)return t(e,n);bt||ht||0===pt||(y(pt,!1,null),pt=0);var i=_t,r=bt;bt=_t=!0;try{return t(e,n)}finally{_t=i,(bt=r)||ht||v()}},flushInteractiveUpdates:function(){ht||0===pt||(y(pt,!1,null),pt=0)},computeUniqueAsyncExpiration:function(){var t=25*(1+((h()+500)/25|0));return t<=Y&&(t=Y+1),Y=t},legacyContext:S}}function Fe(t){function e(t,e,n,i,r,o){if(i=e.current,n){n=n._reactInternalFiber;var a=c(n);n=l(n)?u(n,a):a}else n=yn;return null===e.context?e.context=n:e.pendingContext=n,e=o,he(i,{expirationTime:r,partialState:{element:t},callback:void 0===e?null:e,isReplace:!1,isForced:!1,capturedValue:null,next:null}),s(i,r),r}var n=t.getPublicInstance;t=ke(t);var r=t.recalculateCurrentTime,o=t.computeExpirationForFiber,s=t.scheduleWork,a=t.legacyContext,c=a.findCurrentUnmaskedContext,l=a.isContextProvider,u=a.processChildContext;return{createContainer:function(t,e,n){return e=new Jt(3,null,null,e?3:0),t={current:e,containerInfo:t,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},e.stateNode=t},updateContainer:function(t,n,i,s){var a=n.current,c=r();return a=o(a),e(t,n,i,c,a,s)},updateContainerAtExpirationTime:function(t,n,i,o,s){return e(t,n,i,r(),o,s)},flushRoot:t.flushRoot,requestWork:t.requestWork,computeUniqueAsyncExpiration:t.computeUniqueAsyncExpiration,batchedUpdates:t.batchedUpdates,unbatchedUpdates:t.unbatchedUpdates,deferredUpdates:t.deferredUpdates,syncUpdates:t.syncUpdates,interactiveUpdates:t.interactiveUpdates,flushInteractiveUpdates:t.flushInteractiveUpdates,flushControlled:t.flushControlled,flushSync:t.flushSync,getPublicRootInstance:function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return n(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:function(t){var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?i("188"):i("268",Object.keys(t))),t=Dt(e),null===t?null:t.stateNode},findHostInstanceWithNoPortals:function(t){return t=Bt(t),null===t?null:t.stateNode},injectIntoDevTools:function(t){var e=t.findFiberByHostInstance;return oe(fn({},t,{findHostInstanceByFiber:function(t){return t=Dt(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}}}function Oe(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:di,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}function Pe(t){var e="";return hn.Children.forEach(t,function(t){null==t||"string"!==typeof t&&"number"!==typeof t||(e+=t)}),e}function Le(t,e){return t=fn({children:void 0},e),(e=Pe(e.children))&&(t.children=e),t}function Re(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+n,e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function De(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}}function Be(t,e){return null!=e.dangerouslySetInnerHTML&&i("91"),fn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ie(t,e){var n=e.value;null==n&&(n=e.defaultValue,e=e.children,null!=e&&(null!=n&&i("92"),Array.isArray(e)&&(1>=e.length||i("93"),e=e[0]),n=""+e),null==n&&(n="")),t._wrapperState={initialValue:""+n}}function Ne(t,e){var n=e.value;null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)}function je(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function Ue(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Ue(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function ze(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function He(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=n,o=e[n];r=null==o||"boolean"===typeof o||""===o?"":i||"number"!==typeof o||0===o||$r.hasOwnProperty(r)&&$r[r]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}function Ve(t,e,n){e&&(Hr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&i("137",t,n()),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&i("60"),"object"===ln(e.dangerouslySetInnerHTML)&&"__html"in e.dangerouslySetInnerHTML||i("61")),null!=e.style&&"object"!==ln(e.style)&&i("62",n()))}function We(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ge(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=qt(t);e=Cn[e];for(var i=0;i<e.length;i++){var r=e[i];n.hasOwnProperty(r)&&n[r]||("topScroll"===r?zt("topScroll","scroll",t):"topFocus"===r||"topBlur"===r?(zt("topFocus","focus",t),zt("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===r?(J("cancel",!0)&&zt("topCancel","cancel",t),n.topCancel=!0):"topClose"===r?(J("close",!0)&&zt("topClose","close",t),n.topClose=!0):er.hasOwnProperty(r)&&$t(r,er[r],t),n[r]=!0)}}function qe(t,e,n,i){return n=9===n.nodeType?n:n.ownerDocument,i===Nr.html&&(i=Ue(t)),i===Nr.html?"script"===t?(t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):t="string"===typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(i,t),t}function Xe(t,e){return(9===e.nodeType?e:e.ownerDocument).createTextNode(t)}function Ke(t,e,n,i){var r=We(e,n);switch(e){case"iframe":case"object":$t("topLoad","load",t);var o=n;break;case"video":case"audio":for(o in nr)nr.hasOwnProperty(o)&&$t(o,nr[o],t);o=n;break;case"source":$t("topError","error",t),o=n;break;case"img":case"image":case"link":$t("topError","error",t),$t("topLoad","load",t),o=n;break;case"form":$t("topReset","reset",t),$t("topSubmit","submit",t),o=n;break;case"details":$t("topToggle","toggle",t),o=n;break;case"input":ft(t,n),o=dt(t,n),$t("topInvalid","invalid",t),Ge(i,"onChange");break;case"option":o=Le(t,n);break;case"select":De(t,n),o=fn({},n,{value:void 0}),$t("topInvalid","invalid",t),Ge(i,"onChange");break;case"textarea":Ie(t,n),o=Be(t,n),$t("topInvalid","invalid",t),Ge(i,"onChange");break;default:o=n}Ve(e,o,Vr);var s,a=o;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];"style"===s?He(t,c,Vr):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&Ur(t,c):"children"===s?"string"===typeof c?("textarea"!==e||""!==c)&&ze(t,c):"number"===typeof c&&ze(t,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(An.hasOwnProperty(s)?null!=c&&Ge(i,s):null!=c&&ht(t,s,c,r))}switch(e){case"input":et(t),mt(t,n);break;case"textarea":et(t),je(t,n);break;case"option":null!=n.value&&t.setAttribute("value",n.value);break;case"select":t.multiple=!!n.multiple,e=n.value,null!=e?Re(t,!!n.multiple,e,!1):null!=n.defaultValue&&Re(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=pn)}}function Ye(t,e,n,i,r){var o=null;switch(e){case"input":n=dt(t,n),i=dt(t,i),o=[];break;case"option":n=Le(t,n),i=Le(t,i),o=[];break;case"select":n=fn({},n,{value:void 0}),i=fn({},i,{value:void 0}),o=[];break;case"textarea":n=Be(t,n),i=Be(t,i),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof i.onClick&&(t.onclick=pn)}Ve(e,i,Vr),e=t=void 0;var s=null;for(t in n)if(!i.hasOwnProperty(t)&&n.hasOwnProperty(t)&&null!=n[t])if("style"===t){var a=n[t];for(e in a)a.hasOwnProperty(e)&&(s||(s={}),s[e]="")}else"dangerouslySetInnerHTML"!==t&&"children"!==t&&"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&"autoFocus"!==t&&(An.hasOwnProperty(t)?o||(o=[]):(o=o||[]).push(t,null));for(t in i){var c=i[t];if(a=null!=n?n[t]:void 0,i.hasOwnProperty(t)&&c!==a&&(null!=c||null!=a))if("style"===t)if(a){for(e in a)!a.hasOwnProperty(e)||c&&c.hasOwnProperty(e)||(s||(s={}),s[e]="");for(e in c)c.hasOwnProperty(e)&&a[e]!==c[e]&&(s||(s={}),s[e]=c[e])}else s||(o||(o=[]),o.push(t,s)),s=c;else"dangerouslySetInnerHTML"===t?(c=c?c.__html:void 0,a=a?a.__html:void 0,null!=c&&a!==c&&(o=o||[]).push(t,""+c)):"children"===t?a===c||"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(t,""+c):"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&(An.hasOwnProperty(t)?(null!=c&&Ge(r,t),o||a===c||(o=[])):(o=o||[]).push(t,c))}return s&&(o=o||[]).push("style",s),o}function Ze(t,e,n,i,r){"input"===n&&"radio"===r.type&&null!=r.name&&pt(t,r),We(n,i),i=We(n,r);for(var o=0;o<e.length;o+=2){var s=e[o],a=e[o+1];"style"===s?He(t,a,Vr):"dangerouslySetInnerHTML"===s?Ur(t,a):"children"===s?ze(t,a):ht(t,s,a,i)}switch(n){case"input":gt(t,r);break;case"textarea":Ne(t,r);break;case"select":t._wrapperState.initialValue=void 0,e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,n=r.value,null!=n?Re(t,!!r.multiple,n,!1):e!==!!r.multiple&&(null!=r.defaultValue?Re(t,!!r.multiple,r.defaultValue,!0):Re(t,!!r.multiple,r.multiple?[]:"",!1))}}function Je(t,e,n,i,r){switch(e){case"iframe":case"object":$t("topLoad","load",t);break;case"video":case"audio":for(var o in nr)nr.hasOwnProperty(o)&&$t(o,nr[o],t);break;case"source":$t("topError","error",t);break;case"img":case"image":case"link":$t("topError","error",t),$t("topLoad","load",t);break;case"form":$t("topReset","reset",t),$t("topSubmit","submit",t);break;case"details":$t("topToggle","toggle",t);break;case"input":ft(t,n),$t("topInvalid","invalid",t),Ge(r,"onChange");break;case"select":De(t,n),$t("topInvalid","invalid",t),Ge(r,"onChange");break;case"textarea":Ie(t,n),$t("topInvalid","invalid",t),Ge(r,"onChange")}Ve(e,n,Vr),i=null;for(var s in n)n.hasOwnProperty(s)&&(o=n[s],"children"===s?"string"===typeof o?t.textContent!==o&&(i=["children",o]):"number"===typeof o&&t.textContent!==""+o&&(i=["children",""+o]):An.hasOwnProperty(s)&&null!=o&&Ge(r,s));switch(e){case"input":et(t),mt(t,n);break;case"textarea":et(t),je(t,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(t.onclick=pn)}return i}function Qe(t,e){return t.nodeValue!==e}function tn(t){this._expirationTime=Xr.computeUniqueAsyncExpiration(),this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function en(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function nn(t,e,n){this._internalRoot=Xr.createContainer(t,e,n)}function rn(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function on(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function sn(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new nn(t,!1,e)}function an(t,e,n,r,o){rn(n)||i("200");var s=n._reactRootContainer;if(s){if("function"===typeof o){var a=o;o=function(){var t=Xr.getPublicRootInstance(s._internalRoot);a.call(t)}}null!=t?s.legacy_renderSubtreeIntoContainer(t,e,o):s.render(e,o)}else{if(s=n._reactRootContainer=sn(n,r),"function"===typeof o){var c=o;o=function(){var t=Xr.getPublicRootInstance(s._internalRoot);c.call(t)}}Xr.unbatchedUpdates(function(){null!=t?s.legacy_renderSubtreeIntoContainer(t,e,o):s.render(e,o)})}return Xr.getPublicRootInstance(s._internalRoot)}function cn(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return rn(e)||i("200"),Oe(t,e,null,n)}var ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un=n(22),hn=n(0),dn=n(105),fn=n(21),pn=n(23),gn=n(106),mn=n(107),vn=n(108),yn=n(43);hn||i("227");var bn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(t,e,n,i,o,s,a,c,l){r.apply(bn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,i,r,o,s,a,c){if(bn.invokeGuardedCallback.apply(this,arguments),bn.hasCaughtError()){var l=bn.clearCaughtError();bn._hasRethrowError||(bn._hasRethrowError=!0,bn._rethrowError=l)}},rethrowCaughtError:function(){return o.apply(bn,arguments)},hasCaughtError:function(){return bn._hasCaughtError},clearCaughtError:function(){if(bn._hasCaughtError){var t=bn._caughtError;return bn._caughtError=null,bn._hasCaughtError=!1,t}i("198")}},wn=null,_n={},xn=[],En={},An={},Cn={},Sn=Object.freeze({plugins:xn,eventNameDispatchConfigs:En,registrationNameModules:An,registrationNameDependencies:Cn,possibleRegistrationNames:null,injectEventPluginOrder:c,injectEventPluginsByName:l}),Mn=null,Tn=null,kn=null,Fn=null,On={injectEventPluginOrder:c,injectEventPluginsByName:l},Pn=Object.freeze({injection:On,getListener:m,runEventsInBatch:v,runExtractedEventsInBatch:y}),Ln=Math.random().toString(36).slice(2),Rn="__reactInternalInstance$"+Ln,Dn="__reactEventHandlers$"+Ln,Bn=Object.freeze({precacheFiberNode:function(t,e){e[Rn]=t},getClosestInstanceFromNode:b,getInstanceFromNode:function(t){return t=t[Rn],!t||5!==t.tag&&6!==t.tag?null:t},getNodeFromInstance:w,getFiberCurrentPropsFromNode:_,updateFiberProps:function(t,e){t[Dn]=e}}),In=Object.freeze({accumulateTwoPhaseDispatches:k,accumulateTwoPhaseDispatchesSkipTarget:function(t){d(t,S)},accumulateEnterLeaveDispatches:F,accumulateDirectDispatches:function(t){d(t,T)}}),Nn=null,jn={_root:null,_startText:null,_fallbackText:null},Un="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),$n={type:null,target:null,currentTarget:pn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};fn(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=pn.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=pn.thatReturnsTrue)},persist:function(){this.isPersistent=pn.thatReturnsTrue},isPersistent:pn.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<Un.length;e++)this[Un[e]]=null}}),R.Interface=$n,R.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var r=new e;return fn(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=fn({},i.Interface,t),n.extend=i.extend,I(n),n},I(R);var zn=R.extend({data:null}),Hn=R.extend({data:null}),Vn=[9,13,27,32],Wn=dn.canUseDOM&&"CompositionEvent"in window,Gn=null;dn.canUseDOM&&"documentMode"in document&&(Gn=document.documentMode);var qn=dn.canUseDOM&&"TextEvent"in window&&!Gn,Xn=dn.canUseDOM&&(!Wn||Gn&&8<Gn&&11>=Gn),Kn=String.fromCharCode(32),Yn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Zn=!1,Jn=!1,Qn={eventTypes:Yn,extractEvents:function(t,e,n,i){var r=void 0,o=void 0;if(Wn)t:{switch(t){case"topCompositionStart":r=Yn.compositionStart;break t;case"topCompositionEnd":r=Yn.compositionEnd;break t;case"topCompositionUpdate":r=Yn.compositionUpdate;break t}r=void 0}else Jn?N(t,n)&&(r=Yn.compositionEnd):"topKeyDown"===t&&229===n.keyCode&&(r=Yn.compositionStart);return r?(Xn&&(Jn||r!==Yn.compositionStart?r===Yn.compositionEnd&&Jn&&(o=P()):(jn._root=i,jn._startText=L(),Jn=!0)),r=zn.getPooled(r,e,n,i),o?r.data=o:null!==(o=j(n))&&(r.data=o),k(r),o=r):o=null,(t=qn?U(t,n):$(t,n))?(e=Hn.getPooled(Yn.beforeInput,e,n,i),e.data=t,k(e)):e=null,null===o?e:null===e?o:[o,e]}},ti=null,ei={injectFiberControlledHostComponent:function(t){ti=t}},ni=null,ii=null,ri=Object.freeze({injection:ei,enqueueStateRestore:H,needsStateRestore:V,restoreStateIfNeeded:W}),oi=!1,si={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ai=hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ci="function"===typeof Symbol&&Symbol.for,li=ci?Symbol.for("react.element"):60103,ui=ci?Symbol.for("react.call"):60104,hi=ci?Symbol.for("react.return"):60105,di=ci?Symbol.for("react.portal"):60106,fi=ci?Symbol.for("react.fragment"):60107,pi=ci?Symbol.for("react.strict_mode"):60108,gi=ci?Symbol.for("react.provider"):60109,mi=ci?Symbol.for("react.context"):60110,vi=ci?Symbol.for("react.async_mode"):60111,yi=ci?Symbol.for("react.forward_ref"):60112,bi="function"===typeof Symbol&&Symbol.iterator,wi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_i={},xi={},Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ei[t]=new lt(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ei[e]=new lt(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ei[t]=new lt(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(t){Ei[t]=new lt(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ei[t]=new lt(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){Ei[t]=new lt(t,3,!0,t.toLowerCase(),null)}),["capture","download"].forEach(function(t){Ei[t]=new lt(t,4,!1,t.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(t){Ei[t]=new lt(t,6,!1,t.toLowerCase(),null)}),["rowSpan","start"].forEach(function(t){Ei[t]=new lt(t,5,!1,t.toLowerCase(),null)});var Ai=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ai,ut);Ei[e]=new lt(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ai,ut);Ei[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ai,ut);Ei[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),Ei.tabIndex=new lt("tabIndex",1,!1,"tabindex",null);var Ci={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Si=null,Mi=null,Ti=!1;dn.canUseDOM&&(Ti=J("input")&&(!document.documentMode||9<document.documentMode));var ki={eventTypes:Ci,_isInputEventSupported:Ti,extractEvents:function(t,e,n,i){var r=e?w(e):window,o=void 0,s=void 0,a=r.nodeName&&r.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===r.type?o=xt:Y(r)?Ti?o=Tt:(o=St,s=Ct):(a=r.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=Mt),o&&(o=o(t,e)))return bt(o,n,i);s&&s(t,r,e),"topBlur"===t&&null!=e&&(t=e._wrapperState||r._wrapperState)&&t.controlled&&"number"===r.type&&vt(r,"number",r.value)}},Fi=R.extend({view:null,detail:null}),Oi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Pi=Fi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ft,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}}),Li={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Ri={eventTypes:Li,extractEvents:function(t,e,n,i){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==t&&"topMouseOver"!==t)return null;var r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window;if("topMouseOut"===t?(t=e,e=(e=n.relatedTarget||n.toElement)?b(e):null):t=null,t===e)return null;var o=null==t?r:w(t);r=null==e?r:w(e);var s=Pi.getPooled(Li.mouseLeave,t,n,i);return s.type="mouseleave",s.target=o,s.relatedTarget=r,n=Pi.getPooled(Li.mouseEnter,e,n,i),n.type="mouseenter",n.target=r,n.relatedTarget=o,F(s,n,t,e),[s,n]}},Di=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bi=R.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ii=Fi.extend({relatedTarget:null}),Ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui=Fi.extend({key:function(t){if(t.key){var e=Ni[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=It(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?ji[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ft,charCode:function(t){return"keypress"===t.type?It(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?It(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),$i=Pi.extend({dataTransfer:null}),zi=Fi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ft}),Hi=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Vi=Pi.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),Wi={},Gi={};"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(t){Nt(t,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(t){Nt(t,!1)});var qi={eventTypes:Wi,isInteractiveTopLevelEventType:function(t){return void 0!==(t=Gi[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,i){var r=Gi[t];if(!r)return null;switch(t){case"topKeyPress":if(0===It(n))return null;case"topKeyDown":case"topKeyUp":t=Ui;break;case"topBlur":case"topFocus":t=Ii;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":t=Pi;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":t=$i;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":t=zi;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":t=Di;break;case"topTransitionEnd":t=Hi;break;case"topScroll":t=Fi;break;case"topWheel":t=Vi;break;case"topCopy":case"topCut":case"topPaste":t=Bi;break;default:t=R}return e=t.getPooled(r,e,n,i),k(e),e}},Xi=qi.isInteractiveTopLevelEventType,Ki=[],Yi=!0,Zi=Object.freeze({get _enabled(){return Yi},setEnabled:Ut,isEnabled:function(){return Yi},trapBubbledEvent:$t,trapCapturedEvent:zt,dispatchEvent:Vt}),Ji={animationend:Wt("Animation","AnimationEnd"),animationiteration:Wt("Animation","AnimationIteration"),animationstart:Wt("Animation","AnimationStart"),transitionend:Wt("Transition","TransitionEnd")},Qi={},tr={};dn.canUseDOM&&(tr=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);var er={topAnimationEnd:Gt("animationend"),topAnimationIteration:Gt("animationiteration"),topAnimationStart:Gt("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Gt("transitionend"),topWheel:"wheel"},nr={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ir={},rr=0,or="_reactListenersID"+(""+Math.random()).slice(2),sr=dn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,ar={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},cr=null,lr=null,ur=null,hr=!1,dr={eventTypes:ar,extractEvents:function(t,e,n,i){var r,o=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!o)){t:{o=qt(o),r=Cn.onSelect;for(var s=0;s<r.length;s++){var a=r[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break t}}o=!0}r=!o}if(r)return null;switch(o=e?w(e):window,t){case"topFocus":(Y(o)||"true"===o.contentEditable)&&(cr=o,lr=e,ur=null);break;case"topBlur":ur=lr=cr=null;break;case"topMouseDown":hr=!0;break;case"topContextMenu":case"topMouseUp":return hr=!1,Zt(n,i);case"topSelectionChange":if(sr)break;case"topKeyDown":case"topKeyUp":return Zt(n,i)}return null}};On.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Mn=Bn.getFiberCurrentPropsFromNode,Tn=Bn.getInstanceFromNode,kn=Bn.getNodeFromInstance,On.injectEventPluginsByName({SimpleEventPlugin:qi,EnterLeaveEventPlugin:Ri,ChangeEventPlugin:ki,SelectEventPlugin:dr,BeforeInputEventPlugin:Qn});var fr=null,pr=null;new Set;var gr=void 0,mr=void 0,vr=Array.isArray,yr=ye(!0),br=ye(!1),wr={},_r=Object.freeze({default:Fe}),xr=_r&&Fe||_r,Er=xr.default?xr.default:xr,Ar="object"===("undefined"===typeof performance?"undefined":ln(performance))&&"function"===typeof performance.now,Cr=void 0;Cr=Ar?function(){return performance.now()}:function(){return Date.now()};var Sr=void 0,Mr=void 0;if(dn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Tr=null,kr=!1,Fr=-1,Or=!1,Pr=0,Lr=33,Rr=33,Dr=void 0;Dr=Ar?{didTimeout:!1,timeRemaining:function(){var t=Pr-performance.now();return 0<t?t:0}}:{didTimeout:!1,timeRemaining:function(){var t=Pr-Date.now();return 0<t?t:0}};var Br="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===Br){if(kr=!1,t=Cr(),0>=Pr-t){if(!(-1!==Fr&&Fr<=t))return void(Or||(Or=!0,requestAnimationFrame(Ir)));Dr.didTimeout=!0}else Dr.didTimeout=!1;Fr=-1,t=Tr,Tr=null,null!==t&&t(Dr)}},!1);var Ir=function(t){Or=!1;var e=t-Pr+Rr;e<Rr&&Lr<Rr?(8>e&&(e=8),Rr=e<Lr?Lr:e):Lr=e,Pr=t+Rr,kr||(kr=!0,window.postMessage(Br,"*"))};Sr=function(t,e){return Tr=t,null!=e&&"number"===typeof e.timeout&&(Fr=Cr()+e.timeout),Or||(Or=!0,requestAnimationFrame(Ir)),0},Mr=function(){Tr=null,kr=!1,Fr=-1}}else Sr=window.requestIdleCallback,Mr=window.cancelIdleCallback;else Sr=function(t){return setTimeout(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})})},Mr=function(t){clearTimeout(t)};var Nr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},jr=void 0,Ur=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n)})}:t}(function(t,e){if(t.namespaceURI!==Nr.svg||"innerHTML"in t)t.innerHTML=e;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+e+"</svg>",e=jr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}),$r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zr=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(t){zr.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$r[e]=$r[t]})});var Hr=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Vr=pn.thatReturns(""),Wr=Object.freeze({createElement:qe,createTextNode:Xe,setInitialProperties:Ke,diffProperties:Ye,updateProperties:Ze,diffHydratedProperties:Je,diffHydratedText:Qe,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":if(gt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=_(r);o||i("90"),nt(r),gt(r,o)}}}break;case"textarea":Ne(t,n);break;case"select":null!=(e=n.value)&&Re(t,!!n.multiple,e,!1)}}});ei.injectFiberControlledHostComponent(Wr);var Gr=null,qr=null;tn.prototype.render=function(t){this._defer||i("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new en;return Xr.updateContainerAtExpirationTime(t,e,null,n,r._onCommit),r},tn.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},tn.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||i("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,o=e;o!==this;)r=o,o=o._next;null===r&&i("251"),r._next=o._next,this._next=e,t.firstBatch=this}this._defer=!1,Xr.flushRoot(t,n),e=this._next,this._next=null,e=t.firstBatch=e,null!==e&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},tn.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},en.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},en.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&i("191",n),n()}}},nn.prototype.render=function(t,e){var n=this._internalRoot,i=new en;return e=void 0===e?null:e,null!==e&&i.then(e),Xr.updateContainer(t,n,null,i._onCommit),i},nn.prototype.unmount=function(t){var e=this._internalRoot,n=new en;return t=void 0===t?null:t,null!==t&&n.then(t),Xr.updateContainer(null,e,null,n._onCommit),n},nn.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var i=this._internalRoot,r=new en;return n=void 0===n?null:n,null!==n&&r.then(n),Xr.updateContainer(e,i,t,r._onCommit),r},nn.prototype.createBatch=function(){var t=new tn(this),e=t._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=t,t._next=null;else{for(n=null;null!==i&&i._expirationTime<=e;)n=i,i=i._next;t._next=i,null!==n&&(n._next=t)}return t};var Xr=Er({getRootHostContext:function(t){var e=t.nodeType;switch(e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$e(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$e(t,e)}return t},getChildHostContext:function(t,e){return $e(t,e)},getPublicInstance:function(t){return t},prepareForCommit:function(){Gr=Yi;var t=gn();if(Yt(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{e.nodeType,r.nodeType}catch(t){e=null;break t}var o=0,s=-1,a=-1,c=0,l=0,u=t,h=null;e:for(;;){for(var d;u!==e||0!==i&&3!==u.nodeType||(s=o+i),u!==r||0!==n&&3!==u.nodeType||(a=o+n),3===u.nodeType&&(o+=u.nodeValue.length),null!==(d=u.firstChild);)h=u,u=d;for(;;){if(u===t)break e;if(h===e&&++c===i&&(s=o),h===r&&++l===n&&(a=o),null!==(d=u.nextSibling))break;u=h,h=u.parentNode}u=d}e=-1===s||-1===a?null:{start:s,end:a}}else e=null}e=e||{start:0,end:0}}else e=null;qr={focusedElem:t,selectionRange:e},Ut(!1)},resetAfterCommit:function(){var t=qr,e=gn(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&vn(document.documentElement,n)){if(Yt(n))if(e=i.start,t=i.end,void 0===t&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(window.getSelection){e=window.getSelection();var r=n[O()].length;t=Math.min(i.start,r),i=void 0===i.end?t:Math.min(i.end,r),!e.extend&&t>i&&(r=i,i=t,t=r),r=Kt(n,t);var o=Kt(n,i);if(r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)){var s=document.createRange();s.setStart(r.node,r.offset),e.removeAllRanges(),t>i?(e.addRange(s),e.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),e.addRange(s))}}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}qr=null,Ut(Gr),Gr=null},createInstance:function(t,e,n,i,r){return t=qe(t,e,n,i),t[Rn]=r,t[Dn]=e,t},appendInitialChild:function(t,e){t.appendChild(e)},finalizeInitialChildren:function(t,e,n,i){return Ke(t,e,n,i),on(e,n)},prepareUpdate:function(t,e,n,i,r){return Ye(t,e,n,i,r)},shouldSetTextContent:function(t,e){return"textarea"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===ln(e.dangerouslySetInnerHTML)&&null!==e.dangerouslySetInnerHTML&&"string"===typeof e.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(t,e){return!!e.hidden},createTextInstance:function(t,e,n,i){return t=Xe(t,e),t[Rn]=i,t},now:Cr,mutation:{commitMount:function(t,e,n){on(e,n)&&t.focus()},commitUpdate:function(t,e,n,i,r){t[Dn]=r,Ze(t,e,n,i,r)},resetTextContent:function(t){ze(t,"")},commitTextUpdate:function(t,e,n){t.nodeValue=n},appendChild:function(t,e){t.appendChild(e)},appendChildToContainer:function(t,e){8===t.nodeType?t.parentNode.insertBefore(e,t):t.appendChild(e)},insertBefore:function(t,e,n){t.insertBefore(e,n)},insertInContainerBefore:function(t,e,n){8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){8===t.nodeType?t.parentNode.removeChild(e):t.removeChild(e)}},hydration:{canHydrateInstance:function(t,e){return 1!==t.nodeType||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t},canHydrateTextInstance:function(t,e){return""===e||3!==t.nodeType?null:t},getNextHydratableSibling:function(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},getFirstHydratableChild:function(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},hydrateInstance:function(t,e,n,i,r,o){return t[Rn]=o,t[Dn]=n,Je(t,e,n,r,i)},hydrateTextInstance:function(t,e,n){return t[Rn]=n,Qe(t,e)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Sr,cancelDeferredCallback:Mr}),Kr=Xr;G=Kr.batchedUpdates,q=Kr.interactiveUpdates,X=Kr.flushInteractiveUpdates;var Yr={createPortal:cn,findDOMNode:function(t){return null==t?null:1===t.nodeType?t:Xr.findHostInstance(t)},hydrate:function(t,e,n){return an(null,t,e,!0,n)},render:function(t,e,n){return an(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return(null==t||void 0===t._reactInternalFiber)&&i("38"),an(t,e,n,!1,r)},unmountComponentAtNode:function(t){return rn(t)||i("40"),!!t._reactRootContainer&&(Xr.unbatchedUpdates(function(){an(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return cn.apply(void 0,arguments)},unstable_batchedUpdates:Xr.batchedUpdates,unstable_deferredUpdates:Xr.deferredUpdates,flushSync:Xr.flushSync,unstable_flushControlled:Xr.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Pn,EventPluginRegistry:Sn,EventPropagators:In,ReactControlledComponent:ri,ReactDOMComponentTree:Bn,ReactDOMEventListener:Zi},unstable_createRoot:function(t,e){return new nn(t,!0,null!=e&&!0===e.hydrate)}};Xr.injectIntoDevTools({findFiberByHostInstance:b,bundleType:0,version:"16.3.2",rendererPackageName:"react-dom"});var Zr=Object.freeze({default:Yr}),Jr=Zr&&Yr||Zr;t.exports=Jr.default?Jr.default:Jr},function(t,e,n){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=r},function(t,e,n){"use strict";function i(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=i},function(t,e,n){"use strict";function i(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function r(t,e){if(i(t,e))return!0;if("object"!==("undefined"===typeof t?"undefined":o(t))||null===t||"object"!==("undefined"===typeof e?"undefined":o(e))||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!s.call(e,n[a])||!i(t[n[a]],e[n[a]]))return!1;return!0}var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.prototype.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function i(t,e){return!(!t||!e)&&(t===e||!r(t)&&(r(e)?i(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var r=n(109);t.exports=i},function(t,e,n){"use strict";function i(t){return r(t)&&3==t.nodeType}var r=n(110);t.exports=i},function(t,e,n){"use strict";function i(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"===typeof n.Node?t instanceof n.Node:"object"===("undefined"===typeof t?"undefined":r(t))&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName))}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":u(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(1)),c=n.n(a),l=n(44),u=(n(25),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});e.a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],a=n||e+"Subscription",u=function(t){function n(o,s){i(this,n);var a=r(this,t.call(this,o,s));return a[e]=o.store,a}return o(n,t),n.prototype.getChildContext=function(){var t;return t={},t[e]=this[e],t[a]=null,t},n.prototype.render=function(){return s.Children.only(this.props.children)},n}(s.Component);return u.propTypes={store:l.a.isRequired,children:c.a.element.isRequired},u.childContextTypes=(t={},t[e]=l.a.isRequired,t[a]=l.b,t),u}()},function(t,e,n){"use strict";var i=n(23),r=n(22),o=n(113);t.exports=function(){function t(t,e,n,i,s,a){a!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){var t=[],e=[];return{clear:function(){e=o,t=o},notify:function(){for(var n=t=e,i=0;i<n.length;i++)n[i]()},get:function(){return e},subscribe:function(n){var i=!0;return e===t&&(e=t.slice()),e.push(n),function(){i&&t!==o&&(i=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}n.d(e,"a",function(){return a});var o=null,s={notify:function(){}},a=function(){function t(e,n,r){i(this,t),this.store=e,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=s}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=r())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},t}()},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function r(t,e,n){for(var i=e.length-1;i>=0;i--){var r=e[i](t);if(r)return r}return function(e,i){throw new Error("Invalid value of type "+("undefined"===typeof t?"undefined":d(t))+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function o(t,e){return t===e}var s=n(45),a=n(116),c=n(117),l=n(132),u=n(133),h=n(134),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?s.a:e,d=t.mapStateToPropsFactories,p=void 0===d?l.a:d,g=t.mapDispatchToPropsFactories,m=void 0===g?c.a:g,v=t.mergePropsFactories,y=void 0===v?u.a:v,b=t.selectorFactory,w=void 0===b?h.a:b;return function(t,e,s){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=c.pure,u=void 0===l||l,h=c.areStatesEqual,d=void 0===h?o:h,g=c.areOwnPropsEqual,v=void 0===g?a.a:g,b=c.areStatePropsEqual,_=void 0===b?a.a:b,x=c.areMergedPropsEqual,E=void 0===x?a.a:x,A=i(c,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=r(t,p,"mapStateToProps"),S=r(e,m,"mapDispatchToProps"),M=r(s,y,"mergeProps");return n(w,f({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:C,initMapDispatchToProps:S,initMergeProps:M,pure:u,areStatesEqual:d,areOwnPropsEqual:v,areStatePropsEqual:_,areMergedPropsEqual:E},A))}}()},function(t,e,n){"use strict";function i(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function r(t,e){if(i(t,e))return!0;if("object"!==("undefined"===typeof t?"undefined":o(t))||null===t||"object"!==("undefined"===typeof e?"undefined":o(e))||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!s.call(e,n[a])||!i(t[n[a]],e[n[a]]))return!1;return!0}e.a=r;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function i(t){return"function"===typeof t?Object(a.b)(t,"mapDispatchToProps"):void 0}function r(t){return t?void 0:Object(a.a)(function(t){return{dispatch:t}})}function o(t){return t&&"object"===("undefined"===typeof t?"undefined":c(t))?Object(a.a)(function(e){return Object(s.b)(t,e)}):void 0}var s=n(12),a=n(51),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=[i,r,o]},function(t,e,n){"use strict";function i(t){return null==t?void 0===t?c:a:l&&l in Object(t)?Object(o.a)(t):Object(s.a)(t)}var r=n(48),o=n(121),s=n(122),a="[object Null]",c="[object Undefined]",l=r.a?r.a.toStringTag:void 0;e.a=i},function(t,e,n){"use strict";var i=n(120),r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="object"==("undefined"===typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,s=i.a||o||Function("return this")();e.a=s},function(t,e,n){"use strict";(function(t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"==("undefined"===typeof t?"undefined":n(t))&&t&&t.Object===Object&&t;e.a=i}).call(e,n(7))},function(t,e,n){"use strict";function i(t){var e=s.call(t,c),n=t[c];try{t[c]=void 0;var i=!0}catch(t){}var r=a.call(t);return i&&(e?t[c]=n:delete t[c]),r}var r=n(48),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,c=r.a?r.a.toStringTag:void 0;e.a=i},function(t,e,n){"use strict";function i(t){return o.call(t)}var r=Object.prototype,o=r.toString;e.a=i},function(t,e,n){"use strict";var i=n(124),r=Object(i.a)(Object.getPrototypeOf,Object);e.a=r},function(t,e,n){"use strict";function i(t,e){return function(n){return t(e(n))}}e.a=i},function(t,e,n){"use strict";function i(t){return null!=t&&"object"==("undefined"===typeof t?"undefined":r(t))}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=i},function(t,e,n){"use strict";(function(t,i){var r,o=n(128);r="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:i;var s=Object(o.a)(r);e.a=s}).call(e,n(7),n(127)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function i(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.a=i},function(t,e,n){"use strict";function i(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function r(t){Object.keys(t).forEach(function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:s.a.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+s.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(t){for(var e=Object.keys(t),n={},o=0;o<e.length;o++){var s=e[o];"function"===typeof t[s]&&(n[s]=t[s])}var a=Object.keys(n),c=void 0;try{r(n)}catch(t){c=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(c)throw c;for(var r=!1,o={},s=0;s<a.length;s++){var l=a[s],u=n[l],h=t[l],d=u(h,e);if("undefined"===typeof d){var f=i(l,e);throw new Error(f)}o[l]=d,r=r||d!==h}return r?o:t}}e.a=o;var s=n(47);n(26),n(49)},function(t,e,n){"use strict";function i(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"===typeof t)return i(t,e);if("object"!==("undefined"===typeof t?"undefined":o(t))||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":"undefined"===typeof t?"undefined":o(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},s=0;s<n.length;s++){var a=n[s],c=t[a];"function"===typeof c&&(r[a]=i(c,e))}return r}e.a=r;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}},function(t,e,n){"use strict";function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,i,s){var a=t(n,i,s),c=a.dispatch,l=[],u={getState:a.getState,dispatch:function(t){return c(t)}};return l=e.map(function(t){return t(u)}),c=r.a.apply(void 0,l)(a.dispatch),o({},a,{dispatch:c})}}}e.a=i;var r=n(50),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){"use strict";function i(t){return"function"===typeof t?Object(o.b)(t,"mapStateToProps"):void 0}function r(t){return t?void 0:Object(o.a)(function(){return{}})}var o=n(51);e.a=[i,r]},function(t,e,n){"use strict";function i(t,e,n){return a({},n,t,e)}function r(t){return function(e,n){var i=(n.displayName,n.pure),r=n.areMergedPropsEqual,o=!1,s=void 0;return function(e,n,a){var c=t(e,n,a);return o?i&&r(c,s)||(s=c):(o=!0,s=c),s}}}function o(t){return"function"===typeof t?r(t):void 0}function s(t){return t?void 0:function(){return i}}var a=(n(52),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t});e.a=[o,s]},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function r(t,e,n,i){return function(r,o){return n(t(r,o),e(i,o),o)}}function o(t,e,n,i,r){function o(r,o){return p=r,g=o,m=t(p,g),v=e(i,g),y=n(m,v,g),f=!0,y}function s(){return m=t(p,g),e.dependsOnOwnProps&&(v=e(i,g)),y=n(m,v,g)}function a(){return t.dependsOnOwnProps&&(m=t(p,g)),e.dependsOnOwnProps&&(v=e(i,g)),y=n(m,v,g)}function c(){var e=t(p,g),i=!d(e,m);return m=e,i&&(y=n(m,v,g)),y}function l(t,e){var n=!h(e,g),i=!u(t,p);return p=t,g=e,n&&i?s():n?a():i?c():y}var u=r.areStatesEqual,h=r.areOwnPropsEqual,d=r.areStatePropsEqual,f=!1,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;return function(t,e){return f?l(t,e):o(t,e)}}function s(t,e){var n=e.initMapStateToProps,s=e.initMapDispatchToProps,a=e.initMergeProps,c=i(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(t,c),u=s(t,c),h=a(t,c);return(c.pure?o:r)(l,u,h,t,c)}e.a=s;n(135)},function(t,e,n){"use strict";n(25)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":d(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(53),h=n(63),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(t){function e(){var n,o,s;i(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,t.call.apply(t,[this].concat(c))),o.handleLocationChange=function(t){o.store.dispatch({type:h.a,payload:t})},s=n,r(o,s)}return o(e,t),e.prototype.componentWillMount=function(){var t=this.props,e=t.store,n=t.history,i=t.isSSR;this.store=e||this.context.store,this.handleLocationChange(n.location),i||(this.unsubscribeFromHistory=n.listen(this.handleLocationChange))},e.prototype.componentWillUnmount=function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()},e.prototype.render=function(){return a.a.createElement(u.a,this.props)},e}(s.Component);f.propTypes={store:l.a.object,history:l.a.object.isRequired,children:l.a.node,isSSR:l.a.bool},f.contextTypes={store:l.a.object},e.a=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":r(t)},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(2),c=i(a),l=n(13),u=n(27),h=n(28),d=i(h),f=function(t,e,n){return Math.min(Math.max(t,e),n)},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,n=t.initialEntries,i=void 0===n?["/"]:n,r=t.initialIndex,a=void 0===r?0:r,h=t.keyLength,p=void 0===h?6:h,g=(0,d.default)(),m=function(t){s(k,t),k.length=k.entries.length,g.notifyListeners(k.location,k.action)},v=function(){return Math.random().toString(36).substr(2,p)},y=f(a,0,i.length-1),b=i.map(function(t){return"string"===typeof t?(0,u.createLocation)(t,void 0,v()):(0,u.createLocation)(t,void 0,t.key||v())}),w=l.createPath,_=function(t,n){(0,c.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,u.createLocation)(t,n,v(),k.location);g.confirmTransitionTo(i,"PUSH",e,function(t){if(t){var e=k.index,n=e+1,r=k.entries.slice(0);r.length>n?r.splice(n,r.length-n,i):r.push(i),m({action:"PUSH",location:i,index:n,entries:r})}})},x=function(t,n){(0,c.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,u.createLocation)(t,n,v(),k.location);g.confirmTransitionTo(i,"REPLACE",e,function(t){t&&(k.entries[k.index]=i,m({action:"REPLACE",location:i}))})},E=function(t){var n=f(k.index+t,0,k.entries.length-1),i=k.entries[n];g.confirmTransitionTo(i,"POP",e,function(t){t?m({action:"POP",location:i,index:n}):m()})},A=function(){return E(-1)},C=function(){return E(1)},S=function(t){var e=k.index+t;return e>=0&&e<k.entries.length},M=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g.setPrompt(t)},T=function(t){return g.appendListener(t)},k={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:w,push:_,replace:x,go:E,goBack:A,goForward:C,canGo:S,block:M,listen:T};return k};e.default=p},function(t,e,n){"use strict";var i=(n(139),n(140),n(141),n(17));n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return i.b});n(14)},function(t,e,n){"use strict";var i=n(2),r=(n.n(i),n(3)),o=(n.n(r),n(17),n(14),n(29),n(59),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});"function"===typeof Symbol&&o(Symbol.iterator),Object.assign},function(t,e,n){"use strict";var i=n(2),r=(n.n(i),n(3)),o=(n.n(r),n(17),n(14));n(29),n(59),Object.assign,o.f,o.a,o.a,o.a},function(t,e,n){"use strict";var i=n(2),r=(n.n(i),n(14),n(17),n(29),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});"function"===typeof Symbol&&r(Symbol.iterator),Object.assign},function(t,e,n){function i(t,e){for(var n,i=[],r=0,o=0,s="",a=e&&e.delimiter||"/";null!=(n=b.exec(t));){var u=n[0],h=n[1],d=n.index;if(s+=t.slice(o,d),o=d+u.length,h)s+=h[1];else{var f=t[o],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],w=n[7];s&&(i.push(s),s="");var _=null!=p&&null!=f&&f!==p,x="+"===y||"*"===y,E="?"===y||"*"===y,A=n[2]||a,C=m||v;i.push({name:g||r++,prefix:p||"",delimiter:A,optional:E,repeat:x,partial:_,asterisk:!!w,pattern:C?l(C):w?".*":"[^"+c(A)+"]+?"})}}return o<t.length&&(s+=t.substr(o)),s&&i.push(s),i}function r(t,e){return a(i(t,e))}function o(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"===v(t[n])&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,i){for(var r="",a=n||{},c=i||{},l=c.pretty?o:encodeURIComponent,u=0;u<t.length;u++){var h=t[u];if("string"!==typeof h){var d,f=a[h.name];if(null==f){if(h.optional){h.partial&&(r+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(y(f)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(d=l(f[p]),!e[u].test(d))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(d)+"`");r+=(0===p?h.prefix:h.delimiter)+d}}else{if(d=h.asterisk?s(f):l(f),!e[u].test(d))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+d+'"');r+=h.prefix+d}}else r+=h}return r}}function c(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function u(t,e){return t.keys=e,t}function h(t){return t.sensitive?"":"i"}function d(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(t,e)}function f(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(m(t[r],e,n).source);return u(new RegExp("(?:"+i.join("|")+")",h(n)),e)}function p(t,e,n){return g(i(t,n),e,n)}function g(t,e,n){y(e)||(n=e||n,e=[]),n=n||{};for(var i=n.strict,r=!1!==n.end,o="",s=0;s<t.length;s++){var a=t[s];if("string"===typeof a)o+=c(a);else{var l=c(a.prefix),d="(?:"+a.pattern+")";e.push(a),a.repeat&&(d+="(?:"+l+d+")*"),d=a.optional?a.partial?l+"("+d+")?":"(?:"+l+"("+d+"))?":l+"("+d+")",o+=d}}var f=c(n.delimiter||"/"),p=o.slice(-f.length)===f;return i||(o=(p?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=r?"$":i&&p?"":"(?="+f+"|$)",u(new RegExp("^"+o,h(n)),e)}function m(t,e,n){return y(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?d(t,e):y(t)?f(t,e,n):p(t,e,n)}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=n(143);t.exports=m,t.exports.parse=i,t.exports.compile=r,t.exports.tokensToFunction=a,t.exports.tokensToRegExp=g;var b=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";n(53)},function(t,e,n){"use strict";function i(t){return function(){return function(e){return function(n){if(n.type!==r.a)return e(n);var i=n.payload,o=i.method,s=i.args;t[o].apply(t,s)}}}}e.a=i;var r=n(64)},function(t,e,n){"use strict";function i(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="/service-worker.js";s?(o(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):r(t)})}}function r(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function o(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):r(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}e.a=i;var s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},function(t,e,n){"use strict";function i(t){return function(e){var n=e.dispatch,i=e.getState;return function(e){return function(r){return"function"===typeof r?r(n,i,t):e(r)}}}}e.__esModule=!0;var r=i();r.withExtraArgument=i,e.default=r},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function r(){function t(e){var n=e.getState,i=e.dispatch,d=Object(s.b)();return d.emit=(c.emitter||o.l)(d.emit),t.run=a.a.bind(null,{context:r,subscribe:d.subscribe,dispatch:i,getState:n,sagaMonitor:l,logger:u,onError:h}),function(t){return function(e){l&&l.actionDispatched&&l.actionDispatched(e);var n=t(e);return d.emit(e),n}}}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.context,r=void 0===n?{}:n,c=i(e,["context"]),l=c.sagaMonitor,u=c.logger,h=c.onError;if(o.n.func(c))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(u&&!o.n.func(u))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(h&&!o.n.func(h))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(c.emitter&&!o.n.func(c.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");return t.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},t.setContext=function(t){Object(o.g)(t,o.n.object,Object(o.h)("sagaMiddleware",t)),o.s.assign(r,t)},t}e.a=r;var o=n(4),s=n(8),a=n(68)},function(t,e,n){"use strict";function i(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var c={done:!1,value:Object(o.h)(t)},l=function(t){return{done:!1,value:o.f.apply(void 0,[e].concat(i,[t]))}},u=void 0,h=function(t){return u=t};return Object(r.a)({q1:function(){return["q2",c,h]},q2:function(){return u===s.a?[r.b]:["q1",l(u)]}},"q1","takeEvery("+Object(r.c)(t)+", "+e.name+")")}e.a=i;var r=n(31),o=n(6),s=n(8)},function(t,e,n){"use strict";function i(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var c={done:!1,value:Object(o.h)(t)},l=function(t){return{done:!1,value:o.f.apply(void 0,[e].concat(i,[t]))}},u=function(t){return{done:!1,value:Object(o.e)(t)}},h=void 0,d=void 0,f=function(t){return h=t},p=function(t){return d=t};return Object(r.a)({q1:function(){return["q2",c,p]},q2:function(){return d===s.a?[r.b]:h?["q3",u(h)]:["q1",l(d),f]},q3:function(){return["q1",l(d),f]}},"q1","takeLatest("+Object(r.c)(t)+", "+e.name+")")}e.a=i;var r=n(31),o=n(6),s=n(8)},function(t,e,n){"use strict";function i(t,e,n){for(var i=arguments.length,l=Array(i>3?i-3:0),u=3;u<i;u++)l[u-3]=arguments[u];var h=void 0,d=void 0,f={done:!1,value:Object(o.a)(e,a.a.sliding(1))},p=function(){return{done:!1,value:Object(o.h)(d)}},g=function(t){return{done:!1,value:o.f.apply(void 0,[n].concat(l,[t]))}},m={done:!1,value:Object(o.d)(c.j,t)},v=function(t){return h=t},y=function(t){return d=t};return Object(r.a)({q1:function(){return["q2",f,y]},q2:function(){return["q3",p(),v]},q3:function(){return h===s.a?[r.b]:["q4",g(h)]},q4:function(){return["q2",m]}},"q1","throttle("+Object(r.c)(e)+", "+n.name+")")}e.a=i;var r=n(31),o=n(6),s=n(8),a=n(19),c=n(4)},function(t,e,n){"use strict";n(4),n(6),n(69)},function(t,e,n){"use strict";var i=n(12),r=n(15),o=n(154),s={routing:r.d,map:o.a};e.a=Object(i.c)(s)},function(t,e,n){"use strict";var i=n(33),r=n(188),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a,e=arguments[1];switch(e.type){case i.types.DID_INIT:var n=e.floors,o=e.buildings,s=e.currentFloor;return Object.assign({},t,{state:"idle",floors:n,buildings:o,currentFloor:s});case i.types.FLOOR_WILL_CHANGE:return Object.assign({},t,{state:"transition"});case i.types.FLOOR_DID_CHANGE:var a=e.currentFloor,c=e.previousFloor;return Object.assign({},t,{state:"idle",currentFloor:a,previousFloor:c});case i.types.ON_CLICK:var l=e.currentClickedEvent;return Object.assign({},t,{currentClickedEvent:l});case i.types.SWITCH_MODE:return Object.assign({},t,{mode:e.mode});case i.types.WILL_INIT:default:return t}};e.a=o},function(t,e,n){var i,r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,s,a,c){"use strict";function l(t,e,n){return setTimeout(p(t,n),e)}function u(t,e,n){return!!Array.isArray(t)&&(h(t,n[e],n),!0)}function h(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==c)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function d(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),t.apply(this,arguments)}}function f(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&gt(i,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function g(t,e){return("undefined"===typeof t?"undefined":r(t))==yt?t.apply(e?e[0]||c:c,e):t}function m(t,e){return t===c?e:t}function v(t,e,n){h(_(e),function(e){t.addEventListener(e,n,!1)})}function y(t,e,n){h(_(e),function(e){t.removeEventListener(e,n,!1)})}function b(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function w(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function E(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];x(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function C(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<mt.length;){if(n=mt[o],(i=n?n+r:e)in t)return i;o++}return c}function S(){return At++}function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function T(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){g(t.options.enable,[t])&&n.handler(e)},this.init()}function k(t){var e=t.options.inputClass;return new(e||(Mt?H:Tt?G:St?X:z))(t,F)}function F(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&Ft&&i-r===0,s=e&(Pt|Lt)&&i-r===0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,O(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function O(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=R(e)),r>1&&!n.firstMultiple?n.firstMultiple=R(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=e.center=D(i);e.timeStamp=_t(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=j(a,c),e.distance=N(a,c),P(n,e),e.offsetDirection=I(e.deltaX,e.deltaY);var l=B(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=wt(l.x)>wt(l.y)?l.x:l.y,e.scale=s?$(s.pointers,i):1,e.rotation=s?U(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,L(n,e);var u=t.element;b(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function P(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Ft&&o.eventType!==Pt||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function L(t,e){var n,i,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!=Lt&&(a>kt||s.velocity===c)){var l=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=B(a,l,u);i=h.x,r=h.y,n=wt(h.x)>wt(h.y)?h.x:h.y,o=I(l,u),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}function R(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:bt(t.pointers[n].clientX),clientY:bt(t.pointers[n].clientY)},n++;return{timeStamp:_t(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:bt(t[0].clientX),y:bt(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:bt(n/e),y:bt(i/e)}}function B(t,e,n){return{x:e/t||0,y:n/t||0}}function I(t,e){return t===e?Rt:wt(t)>=wt(e)?t<0?Dt:Bt:e<0?It:Nt}function N(t,e,n){n||(n=zt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function j(t,e,n){n||(n=zt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function U(t,e){return j(e[1],e[0],Ht)+j(t[1],t[0],Ht)}function $(t,e){return N(e[0],e[1],Ht)/N(t[0],t[1],Ht)}function z(){this.evEl=Wt,this.evWin=Gt,this.pressed=!1,T.apply(this,arguments)}function H(){this.evEl=Kt,this.evWin=Yt,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Jt,this.evWin=Qt,this.started=!1,T.apply(this,arguments)}function W(t,e){var n=E(t.touches),i=E(t.changedTouches);return e&(Pt|Lt)&&(n=A(n.concat(i),"identifier",!0)),[n,i]}function G(){this.evTarget=ee,this.targetIds={},T.apply(this,arguments)}function q(t,e){var n=E(t.touches),i=this.targetIds;if(e&(Ft|Ot)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=E(t.changedTouches),a=[],c=this.target;if(o=n.filter(function(t){return b(t.target,c)}),e===Ft)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(Pt|Lt)&&delete i[s[r].identifier],r++;return a.length?[A(o.concat(a),"identifier",!0),a]:void 0}function X(){T.apply(this,arguments);var t=p(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function K(t,e){t&Ft?(this.primaryTouch=e.changedPointers[0].identifier,Y.call(this,e)):t&(Pt|Lt)&&Y.call(this,e)}function Y(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(r,ne)}}function Z(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=ie&&s<=ie)return!0}return!1}function J(t,e){this.manager=t,this.set(e)}function Q(t){if(w(t,ce))return ce;var e=w(t,le),n=w(t,ue);return e&&n?ce:e||n?e?le:ue:w(t,ae)?ae:se}function tt(t){this.options=gt({},this.defaults,t||{}),this.id=S(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}function et(t){return t&ve?"cancel":t&ge?"end":t&pe?"move":t&fe?"start":""}function nt(t){return t==Nt?"down":t==It?"up":t==Dt?"left":t==Bt?"right":""}function it(t,e){var n=e.manager;return n?n.get(t):t}function rt(){tt.apply(this,arguments)}function ot(){rt.apply(this,arguments),this.pX=null,this.pY=null}function st(){rt.apply(this,arguments)}function at(){tt.apply(this,arguments),this._timer=null,this._input=null}function ct(){rt.apply(this,arguments)}function lt(){rt.apply(this,arguments)}function ut(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=m(e.recognizers,ht.defaults.preset),new dt(t,e)}function dt(t,e){this.options=gt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=k(this),this.touchAction=new J(this,this.options.touchAction),ft(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ft(t,e){var n=t.element;if(n.style){var i;h(t.options.cssProps,function(r,o){i=C(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function pt(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var gt,mt=["","webkit","Moz","MS","ms","o"],vt=s.createElement("div"),yt="function",bt=Math.round,wt=Math.abs,_t=Date.now;gt="function"!==typeof Object.assign?function(t){if(t===c||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==c&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var xt=d(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===c)&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),Et=d(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),At=1,Ct=/mobile|tablet|ip(ad|hone|od)|android/i,St="ontouchstart"in o,Mt=C(o,"PointerEvent")!==c,Tt=St&&Ct.test(navigator.userAgent),kt=25,Ft=1,Ot=2,Pt=4,Lt=8,Rt=1,Dt=2,Bt=4,It=8,Nt=16,jt=Dt|Bt,Ut=It|Nt,$t=jt|Ut,zt=["x","y"],Ht=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(M(this.element),this.evWin,this.domHandler)}};var Vt={mousedown:Ft,mousemove:Ot,mouseup:Pt},Wt="mousedown",Gt="mousemove mouseup";f(z,T,{handler:function(t){var e=Vt[t.type];e&Ft&&0===t.button&&(this.pressed=!0),e&Ot&&1!==t.which&&(e=Pt),this.pressed&&(e&Pt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var qt={pointerdown:Ft,pointermove:Ot,pointerup:Pt,pointercancel:Lt,pointerout:Lt},Xt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Kt="pointerdown",Yt="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Kt="MSPointerDown",Yt="MSPointerMove MSPointerUp MSPointerCancel"),f(H,T,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=qt[i],o=Xt[t.pointerType]||t.pointerType,s="touch"==o,a=x(e,t.pointerId,"pointerId");r&Ft&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(Pt|Lt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var Zt={touchstart:Ft,touchmove:Ot,touchend:Pt,touchcancel:Lt},Jt="touchstart",Qt="touchstart touchmove touchend touchcancel";f(V,T,{handler:function(t){var e=Zt[t.type];if(e===Ft&&(this.started=!0),this.started){var n=W.call(this,t,e);e&(Pt|Lt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var te={touchstart:Ft,touchmove:Ot,touchend:Pt,touchcancel:Lt},ee="touchstart touchmove touchend touchcancel";f(G,T,{handler:function(t){var e=te[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ne=2500,ie=25;f(X,T,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)K.call(this,e,n);else if(r&&Z.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=C(vt.style,"touchAction"),oe=re!==c,se="auto",ae="manipulation",ce="none",le="pan-x",ue="pan-y",he=function(){if(!oe)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}();J.prototype={set:function(t){"compute"==t&&(t=this.compute()),oe&&this.manager.element.style&&he[t]&&(this.manager.element.style[re]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){g(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=w(i,ce)&&!he[ce],o=w(i,ue)&&!he[ue],s=w(i,le)&&!he[le];if(r){var a=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(a&&c&&l)return}return s&&o?void 0:r||o&&n&jt||s&&n&Ut?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var de=1,fe=2,pe=4,ge=8,me=ge,ve=16;tt.prototype={defaults:{},set:function(t){return gt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=it(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<ge&&e(n.options.event+et(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=ge&&e(n.options.event+et(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|de)))return!1;t++}return!0},recognize:function(t){var e=gt({},t);if(!g(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(me|ve|32)&&(this.state=de),this.state=this.process(e),this.state&(fe|pe|ge|ve)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},f(rt,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(fe|pe),r=this.attrTest(t);return i&&(n&Lt||!r)?e|ve:i||r?n&Pt?e|ge:e&fe?e|pe:fe:32}}),f(ot,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:$t},getTouchAction:function(){var t=this.options.direction,e=[];return t&jt&&e.push(ue),t&Ut&&e.push(le),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&jt?(r=0===o?Rt:o<0?Dt:Bt,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?Rt:s<0?It:Nt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(st,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(at,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Pt|Lt)&&!r)this.reset();else if(t.eventType&Ft)this.reset(),this._timer=l(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&Pt)return me;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&Pt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=_t(),this.manager.emit(this.options.event,this._input)))}}),f(ct,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),f(lt,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:jt|Ut,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(jt|Ut)?e=t.overallVelocity:n&jt?e=t.overallVelocityX:n&Ut&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&wt(e)>this.options.velocity&&t.eventType&Pt},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(ut,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Ft&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Pt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=me,this.tryEmit()},e.interval,this),fe):me}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ct,{enable:!1}],[st,{enable:!1},["rotate"]],[lt,{direction:jt}],[ot,{direction:jt},["swipe"]],[ut],[ut,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};dt.prototype={set:function(t){return gt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&me)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(fe|pe|ge)&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==c&&e!==c){var n=this.handlers;return h(_(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==c){var n=this.handlers;return h(_(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},gt(ht,{INPUT_START:Ft,INPUT_MOVE:Ot,INPUT_END:Pt,INPUT_CANCEL:Lt,STATE_POSSIBLE:de,STATE_BEGAN:fe,STATE_CHANGED:pe,STATE_ENDED:ge,STATE_RECOGNIZED:me,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:Rt,DIRECTION_LEFT:Dt,DIRECTION_RIGHT:Bt,DIRECTION_UP:It,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:jt,DIRECTION_VERTICAL:Ut,DIRECTION_ALL:$t,Manager:dt,Input:T,TouchAction:J,TouchInput:G,MouseInput:z,PointerEventInput:H,TouchMouseInput:X,SingleTouchInput:V,Recognizer:tt,AttrRecognizer:rt,Tap:ut,Pan:ot,Swipe:lt,Pinch:st,Rotate:ct,Press:at,on:v,off:y,each:h,merge:Et,extend:xt,assign:gt,inherit:f,bindFn:p,prefixed:C}),("undefined"!==typeof o?o:"undefined"!==typeof self?self:{}).Hammer=ht,(i=function(){return ht}.call(e,n,e,t))!==c&&(t.exports=i)}(window,document)},function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return h});var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c={ERROR:"error",WARN:"warn",INFO:"info",VERBOSE:"verbose",DEBUG:"debug",SILLY:"silly"},l=function(){function t(){o(this,t)}return a(t,[{key:"log",value:function(t,e,n){throw new Error("This is an interface")}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.ERROR,t,e)}},{key:"warn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.WARN,t,e)}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.INFO,t,e)}},{key:"verbose",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.VERBOSE,t,e)}},{key:"debug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.DEBUG,t,e)}},{key:"silly",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.SILLY,t,e)}}],[{key:"isValidLogger",value:function(t){var e={isValid:!0,reasons:[]};return"object"!=("undefined"===typeof t?"undefined":s(t))||null===t?(e.isValid=!1,e.reasons.push("Logger must be a not null object"),e):(Object.keys(c).forEach(function(n){var i=c[n];"function"!=typeof t[i]&&(e.isValid=!1,e.reasons.push("Logger must implement method "+i))}),e)}},{key:"_getLevelValue",value:function(t){switch(t){case c.ERROR:return 0;case c.WARN:return 1;case c.INFO:return 2;case c.VERBOSE:return 3;case c.DEBUG:return 4;case c.SILLY:return 5;default:return 2}}}]),t}(),u=(function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}r(e,t),a(e,[{key:"log",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}])}(l),function(t){function e(t,n){var r;return o(this,e),r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r.logger=t,r.tag=n,r}return r(e,t),a(e,[{key:"log",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.logger.log(t,"["+this.tag+"]"+e,n)}}]),e}(l)),h=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.WARN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,e),t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.level=n,t.tag=r,t}return r(e,t),a(e,[{key:"log",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(this.constructor._getLevelValue(this.level)<this.constructor._getLevelValue(t))){var i=null;i=null!==this.tag?"["+t+"]["+this.tag+"]: "+e:"["+t+"]: "+e,n?console.log(i,n):console.log(i)}}}]),e}(l)},function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,i,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new r(n,i||t,o),a=l?l+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}var c=Object.prototype.hasOwnProperty,l="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(l=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)c.call(t,e)&&n.push(l?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=l?l+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,o=new Array(r);i<r;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=l?l+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,r,o){var s=l?l+t:t;if(!this._events[s])return!1;var a,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,r),!0;case 6:return u.fn.call(u.context,e,n,i,r,o),!0}for(c=1,a=new Array(h-1);c<h;c++)a[c-1]=arguments[c];u.fn.apply(u.context,a)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,i);break;default:if(!a)for(d=1,a=new Array(h-1);d<h;d++)a[d-1]=arguments[d];u[c].fn.apply(u[c].context,a)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,n,i){var r=l?l+t:t;if(!this._events[r])return this;if(!e)return s(this,r),this;var o=this._events[r];if(o.fn)o.fn!==e||i&&!o.once||n&&o.context!==n||s(this,r);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==e||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[r]=1===c.length?c[0]:c:s(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=l?l+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=l,a.EventEmitter=a,t.exports=a},function(t,e,n){t.exports=n(159)},function(t,e,n){"use strict";function i(t){var e=new s(t),n=o(s.prototype.request,e);return r.extend(n,s.prototype,e),r.extend(n,e),n}var r=n(5),o=n(75),s=n(161),a=n(36),c=i(a);c.Axios=s,c.create=function(t){return i(r.merge(a,t))},c.Cancel=n(79),c.CancelToken=n(175),c.isCancel=n(78),c.all=function(t){return Promise.all(t)},c.spread=n(176),t.exports=c,t.exports.default=c},function(t,e){function n(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||i(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function i(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var r=n(36),o=n(5),s=n(170),a=n(171);i.prototype.request=function(t){"string"===typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(r,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){i.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){i.prototype[t]=function(e,n,i){return this.request(o.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=i},function(t,e,n){"use strict";var i=n(5);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){"use strict";var i=n(77);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t}},function(t,e,n){"use strict";function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=n(5);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var i=n(5),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(i.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";var i=n(5);t.exports=i.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return e=t(window.location.href),function(n){var r=i.isString(n)?t(n):n;return r.protocol===e.protocol&&r.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";function i(){this.message="String contains an invalid character"}function r(t){for(var e,n,r=String(t),s="",a=0,c=o;r.charAt(0|a)||(c="=",a%1);s+=c.charAt(63&e>>8-a%1*8)){if((n=r.charCodeAt(a+=.75))>255)throw new i;e=e<<8|n}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";var i=n(5);t.exports=i.isStandardBrowserEnv()?function(){return{write:function(t,e,n,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function i(){this.handlers=[]}var r=n(5);i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";function i(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var r=n(5),o=n(172),s=n(78),a=n(36),c=n(173),l=n(174);t.exports=function(t){return i(t),t.baseURL&&!c(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return i(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(i(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var i=n(5);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}var r=n(79);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,c){"object"===s(e)?t.exports=e=c(n(11)):(r=[n(11)],i=c,void 0!==(o="function"===typeof i?i.apply(e,r):i)&&(t.exports=o))}(0,function(t){return function(e){function n(t,e,n,i,r,o,s){var a=t+(e&n|~e&i)+r+s;return(a<<o|a>>>32-o)+e}function i(t,e,n,i,r,o,s){var a=t+(e&i|n&~i)+r+s;return(a<<o|a>>>32-o)+e}function r(t,e,n,i,r,o,s){var a=t+(e^n^i)+r+s;return(a<<o|a>>>32-o)+e}function o(t,e,n,i,r,o,s){var a=t+(n^(e|~i))+r+s;return(a<<o|a>>>32-o)+e}var s=t,a=s.lib,c=a.WordArray,l=a.Hasher,u=s.algo,h=[];!function(){for(var t=0;t<64;t++)h[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=u.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;s<16;s++){var a=e+s,c=t[a];t[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var l=this._hash.words,u=t[e+0],d=t[e+1],f=t[e+2],p=t[e+3],g=t[e+4],m=t[e+5],v=t[e+6],y=t[e+7],b=t[e+8],w=t[e+9],_=t[e+10],x=t[e+11],E=t[e+12],A=t[e+13],C=t[e+14],S=t[e+15],M=l[0],T=l[1],k=l[2],F=l[3];M=n(M,T,k,F,u,7,h[0]),F=n(F,M,T,k,d,12,h[1]),k=n(k,F,M,T,f,17,h[2]),T=n(T,k,F,M,p,22,h[3]),M=n(M,T,k,F,g,7,h[4]),F=n(F,M,T,k,m,12,h[5]),k=n(k,F,M,T,v,17,h[6]),T=n(T,k,F,M,y,22,h[7]),M=n(M,T,k,F,b,7,h[8]),F=n(F,M,T,k,w,12,h[9]),k=n(k,F,M,T,_,17,h[10]),T=n(T,k,F,M,x,22,h[11]),M=n(M,T,k,F,E,7,h[12]),F=n(F,M,T,k,A,12,h[13]),k=n(k,F,M,T,C,17,h[14]),T=n(T,k,F,M,S,22,h[15]),M=i(M,T,k,F,d,5,h[16]),F=i(F,M,T,k,v,9,h[17]),k=i(k,F,M,T,x,14,h[18]),T=i(T,k,F,M,u,20,h[19]),M=i(M,T,k,F,m,5,h[20]),F=i(F,M,T,k,_,9,h[21]),k=i(k,F,M,T,S,14,h[22]),T=i(T,k,F,M,g,20,h[23]),M=i(M,T,k,F,w,5,h[24]),F=i(F,M,T,k,C,9,h[25]),k=i(k,F,M,T,p,14,h[26]),T=i(T,k,F,M,b,20,h[27]),M=i(M,T,k,F,A,5,h[28]),F=i(F,M,T,k,f,9,h[29]),k=i(k,F,M,T,y,14,h[30]),T=i(T,k,F,M,E,20,h[31]),M=r(M,T,k,F,m,4,h[32]),F=r(F,M,T,k,b,11,h[33]),k=r(k,F,M,T,x,16,h[34]),T=r(T,k,F,M,C,23,h[35]),M=r(M,T,k,F,d,4,h[36]),F=r(F,M,T,k,g,11,h[37]),k=r(k,F,M,T,y,16,h[38]),T=r(T,k,F,M,_,23,h[39]),M=r(M,T,k,F,A,4,h[40]),F=r(F,M,T,k,u,11,h[41]),k=r(k,F,M,T,p,16,h[42]),T=r(T,k,F,M,v,23,h[43]),M=r(M,T,k,F,w,4,h[44]),F=r(F,M,T,k,E,11,h[45]),k=r(k,F,M,T,S,16,h[46]),T=r(T,k,F,M,f,23,h[47]),M=o(M,T,k,F,u,6,h[48]),F=o(F,M,T,k,y,10,h[49]),k=o(k,F,M,T,C,15,h[50]),T=o(T,k,F,M,m,21,h[51]),M=o(M,T,k,F,E,6,h[52]),F=o(F,M,T,k,p,10,h[53]),k=o(k,F,M,T,_,15,h[54]),T=o(T,k,F,M,d,21,h[55]),M=o(M,T,k,F,b,6,h[56]),F=o(F,M,T,k,S,10,h[57]),k=o(k,F,M,T,v,15,h[58]),T=o(T,k,F,M,A,21,h[59]),M=o(M,T,k,F,g,6,h[60]),F=o(F,M,T,k,x,10,h[61]),k=o(k,F,M,T,f,15,h[62]),T=o(T,k,F,M,w,21,h[63]),l[0]=l[0]+M|0,l[1]=l[1]+T|0,l[2]=l[2]+k|0,l[3]=l[3]+F|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}});s.MD5=l._createHelper(d),s.HmacMD5=l._createHmacHelper(d)}(Math),t.MD5})},function(t,e,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,c){"object"===s(e)?t.exports=e=c(n(11)):(r=[n(11)],i=c,void 0!==(o="function"===typeof i?i.apply(e,r):i)&&(t.exports=o))}(0,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,n=e.lib,i=n.WordArray,r=i.init;(i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;i<e;i++)n[i>>>2]|=t[i]<<24-i%4*8;r.call(this,n,e)}else r.apply(this,arguments)}).prototype=i}}(),t.lib.WordArray})},function(t,e,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,c){"object"===s(e)?t.exports=e=c(n(11)):(r=[n(11)],i=c,void 0!==(o="function"===typeof i?i.apply(e,r):i)&&(t.exports=o))}(0,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=n.Hasher,o=e.algo,s=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|t[e+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var h=(i<<5|i>>>27)+c+s[l];h+=l<20?1518500249+(r&o|~r&a):l<40?1859775393+(r^o^a):l<60?(r&o|r&a|o&a)-1894007588:(r^o^a)-899497514,c=a,a=o,o=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=r._createHelper(a),e.HmacSHA1=r._createHmacHelper(a)}(),t.SHA1})},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return v}),n.d(e,"c",function(){return m}),n.d(e,"b",function(){return y}),n.d(e,"d",function(){return l});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(){r(this,t)}return o(t,null,[{key:"toDegree",value:function(t){return 180*t/Math.PI}},{key:"toRadian",value:function(t){return t*Math.PI/180}}]),t}(),a=function(){function t(e,n,i){r(this,t),this.a=e,this.e=n,this.f=i,this.k0=.9996,this.ePow2=Math.pow(this.e,2),this.ePow4=Math.pow(this.e,4),this.ePow6=Math.pow(this.e,6),this.e1sq=this.ePow2/(1-this.ePow2)}return o(t,null,[{key:"fromFlattening",value:function(t,e){return new this(t,Math.sqrt(2*e-Math.pow(e,2)),e)}}]),t}(),c=a.fromFlattening(6378137,1/298.257223563),l=function t(e){r(this,t),this.k=c.k0,this.E=5e5;var n=s.toDegree(e.long);this.zone=n<0?Math.floor((180+n)/6+1):Math.floor(n/6+31),this.long=s.toRadian(6*(this.zone-30)-3),this.N=e.lat<0?1e7:0,this.hemi=0===this.N?1:-1},u=1-c.ePow2/4-3/64*c.ePow4-5/256*c.ePow6,h=3/8*c.ePow2+3/32*c.ePow4+45/1024*c.ePow6,d=15/256*c.ePow4+45/1024*c.ePow6,f=35/3072*c.ePow6,p=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,t),this.gps=e,this.utmGridZone=n||new l(this.gps),this.deltaLong=this.gps.long-this.utmGridZone.long,this.Nu=1/Math.sqrt(1-c.ePow2*Math.pow(Math.sin(this.gps.lat),2)),this.A=this.deltaLong*Math.cos(this.gps.lat),this.APow2=Math.pow(this.A,2),this.APow3=Math.pow(this.A,3),this.APow4=Math.pow(this.A,4),this.APow5=Math.pow(this.A,5),this.APow6=Math.pow(this.A,6);var i=Math.sin(2*this.gps.lat),o=Math.sin(4*this.gps.lat),s=Math.sin(6*this.gps.lat);this.S=u*this.gps.lat-h*i+d*o-f*s,this.T=Math.pow(Math.tan(this.gps.lat),2),this.TPow2=Math.pow(this.T,2),this.C=c.ePow2/(1-c.ePow2)*Math.pow(Math.cos(this.gps.lat),2),this.CPow2=Math.pow(this.C,2),this.E=this.A+(1-this.T+this.C)/6*this.APow3,this.E+=(5-18*this.T+this.TPow2)*this.APow5/120,this.E*=this.utmGridZone.k*c.a*this.Nu,this.E+=this.utmGridZone.E,this.N=this.APow2/2,this.N+=(5-this.T+9*this.C+4*this.CPow2)*this.APow4/24,this.N+=(61-58*this.T+this.TPow2)*this.APow6/720,this.N*=this.Nu*Math.tan(this.gps.lat),this.N+=this.S,this.N*=c.a*this.utmGridZone.k,this.N+=this.utmGridZone.N},g=function t(e){r(this,t);var n=e.N,i=1===e.hemi;i||(n=1e7-n);var o=n/c.k0/(c.a*(1-Math.pow(c.e,2)/4-3*Math.pow(c.e,4)/64-5*Math.pow(c.e,6)/256)),s=(1-Math.pow(1-c.ePow2,.5))/(1+Math.pow(1-c.ePow2,.5)),a=21*Math.pow(s,2)/16-55*Math.pow(s,4)/32,l=151*Math.pow(s,3)/96,u=1097*Math.pow(s,4)/512,h=o+(3*s/2-27*Math.pow(s,3)/32)*Math.sin(2*o)+a*Math.sin(4*o)+l*Math.sin(6*o)+u*Math.sin(8*o),d=c.a/Math.pow(1-Math.pow(c.e*Math.sin(h),2),.5),f=c.a*(1-c.ePow2)/Math.pow(1-Math.pow(c.e*Math.sin(h),2),1.5),p=d*Math.tan(h)/f,g=5e5-e.E,m=g/(d*c.k0),v=m*m/2,y=Math.pow(Math.tan(h),2),b=c.e1sq*Math.pow(Math.cos(h),2),w=(5+3*y+10*b-4*b*b-9*c.e1sq)*Math.pow(m,4)/24,_=(61+90*y+298*b+45*y*y-252*c.e1sq-3*b*b)*Math.pow(m,6)/720,x=(g/(d*c.k0)-(1+2*y+b)*Math.pow(m,3)/6+(5-2*b+28*y-3*Math.pow(b,2)+8*c.e1sq+24*Math.pow(y,2))*Math.pow(m,5)/120)/Math.cos(h)*180/Math.PI;this.latitude=180*(h-p*(v+w+_))/Math.PI,i||(this.latitude=-this.latitude);var E=e.zone>0?6*e.zone-183:3;this.longitude=E-x},m=function t(e,n,i,o,s){r(this,t),this.E=e,this.N=n,this.alt=i,this.hemi=o,this.zone=s},v=function(){function t(e,n,i){r(this,t),this.lat=e,this.long=n,this.alt=i}return o(t,[{key:"latInDegree",get:function(){return s.toDegree(this.lat)}},{key:"longInDegree",get:function(){return s.toDegree(this.long)}}],[{key:"fromDegree",value:function(t,e,n){return new this(s.toRadian(t),s.toRadian(e),n)}}]),t}(),y=function(){function t(){r(this,t)}return o(t,null,[{key:"toUtm",value:function(t,e){var n=new p(t,e);return new m(n.E,n.N,t.alt,n.utmGridZone.hemi,n.utmGridZone.zone)}},{key:"toGps",value:function(t){var e=new g(t);return v.fromDegree(e.latitude,e.longitude,t.alt)}}]),t}(),b=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.n=e,this.m=n,null===i?(this.values=new Array(this.n*this.m),this.values.fill(0)):this.values=i}return o(t,[{key:"get",value:function(t,e){return this.values[this.getIndex(t,e)]}},{key:"set",value:function(t,e,n){return this.values[this.getIndex(t,e)]=n,this}},{key:"getIndex",value:function(t,e){if("number"!=typeof t||t>=this.n)throw new Error("Invalid row index");if("number"!=typeof e||e>=this.m)throw new Error("Invalid column index");return t*this.m+e}},{key:"transpose",value:function(){for(var e=new t(this.m,this.n),n=0;n<this.n;n++)for(var i=0;i<this.m;i++)e.set(i,n,this.get(n,i));return e}},{key:"multiply",value:function(t){if("number"!=typeof t)throw new Error("Expected a number");return this.values=this.values.map(function(e){return e*t}),this}},{key:"extractColumn",value:function(e){for(var n=new t(this.n,1),i=0;i<this.n;i++)n.set(i,0,this.get(i,e));return n}}],[{key:"sum",value:function(e,n){if(e.m!==n.m||e.n!==n.n)throw new Error("Invalid given matrices");return new t(e.n,e.m,e.values.map(function(t,e){return t+n.values[e]}))}},{key:"identity",value:function(e){for(var n=new t(e,e),i=0;i<e;i++)n.set(i,i,1);return n}},{key:"additiveInverse",value:function(e){return new t(e.n,e.m,e.values.map(function(t){return-1*t}))}},{key:"product",value:function(e,n){if(!(e instanceof t&&n instanceof t))throw new Error("Expected two Matrices");if(e.m!==n.n)throw new Error("Invalid given matrices");for(var i=e.m,r=new t(e.n,n.m),o=0;o<r.n;o++)for(var s=0;s<r.m;s++){for(var a=0,c=0;c<i;c++)a+=e.get(o,c)*n.get(c,s);r.set(o,s,a)}return r}},{key:"inverseMatrix3",value:function(e){if(3!==e.n||3!==e.m)throw new Error("Works only with Matrix 3");var n=e.extractColumn(0),i=e.extractColumn(1),r=e.extractColumn(2),o=this.determinantMatrix3(e);if(0===o)throw new Error("Not inversible matrix");var s=this.crossProductVector3(i,r).transpose().multiply(1/o),a=this.crossProductVector3(r,n).transpose().multiply(1/o),c=this.crossProductVector3(n,i).transpose().multiply(1/o),l=new t(3,3);return l.set(0,0,s.get(0,0)),l.set(0,1,s.get(0,1)),l.set(0,2,s.get(0,2)),l.set(1,0,a.get(0,0)),l.set(1,1,a.get(0,1)),l.set(1,2,a.get(0,2)),l.set(2,0,c.get(0,0)),l.set(2,1,c.get(0,1)),l.set(2,2,c.get(0,2)),l}},{key:"determinantMatrix3",value:function(e){if(3!==e.n||3!==e.m)throw new Error("Works only with Matrix 3");var n=e.extractColumn(0),i=e.extractColumn(1),r=e.extractColumn(2);return t.dotProductVector(n,t.crossProductVector3(i,r))}},{key:"crossProductVector3",value:function(e,n){if(3!==e.n||1!==e.m||3!==n.n||1!==n.m)throw new Error("Works only with Matrix 3x1");var i=new t(3,1);return i.set(0,0,e.get(1,0)*n.get(2,0)-e.get(2,0)*n.get(1,0)),i.set(1,0,e.get(2,0)*n.get(0,0)-e.get(0,0)*n.get(2,0)),i.set(2,0,e.get(0,0)*n.get(1,0)-e.get(1,0)*n.get(0,0)),i}},{key:"dotProductVector",value:function(t,e){if(1!==t.m||1!==e.m||t.n!==e.n)throw new Error("Works only with Matrix nx1");for(var n=0,i=0;i<t.n;i++)n+=t.get(i,0)*e.get(i,0);return n}}]),t}(),w=function(){function t(){r(this,t)}return o(t,null,[{key:"compute2ParametersRegression",value:function(t){for(var e=t.length,n=new b(e,3),i=new b(e,1),r=0;r<e;r++)n.set(r,0,1),n.set(r,1,t[r].parameters.get(0,0)),n.set(r,2,t[r].parameters.get(1,0)),i.set(r,0,t[r].result);var o=n.transpose();return b.product(b.product(b.inverseMatrix3(b.product(o,n)),o),i)}}]),t}();!function(){function t(e,n){r(this,t),this.transformMatrix=e,this.translateMatrix=n,this._reverseTransform=null}o(t,[{key:"convert",value:function(t){var e=new b(3,1,[t.x,t.y,t.z]),n=b.sum(b.product(this.transformMatrix,e),this.translateMatrix);return{x:n.get(0,0),y:n.get(1,0),z:n.get(2,0)}}},{key:"revert",value:function(t){return this.reverseTransform.convert(t)}},{key:"getDistanceAverageError",value:function(t,e){for(var n=t.length,i=0,r=0;r<n;r++){var o=t[r],s=e[r];i+=this.constructor._getDistance(this.convert(o),s)}return i/n}},{key:"getDistanceErrorRepartitionFromAverage",value:function(t,e){var n=t.length,i=this.getDistanceAverageError(t,e),r=new Array(10);r.fill(0);for(var o=0;o<n;o++){var s=t[o],a=e[o],c=this.constructor._getDistance(this.convert(s),a),l=Math.abs(i-c)/i*100,u=Math.trunc(l/10);u>9&&(u=9),r[u]++}return r.map(function(t){return Math.floor(t/n*100)})}},{key:"getRelativeDistanceErrorFromAverage",value:function(t,e){for(var n=t.length,i=this.getDistanceAverageError(t,e),r=[],o=0;o<n;o++){var s=t[o],a=e[o],c=this.constructor._getDistance(this.convert(s),a);r[o]=Math.abs(i-c)/i*100}return r}},{key:"getAmplitudeError",value:function(t,e){for(var n=t.length,i={x:1/0,y:1/0,z:1/0},r={x:-1/0,y:-1/0,z:-1/0},o=0;o<n;o++){var s=t[o],a=e[o],c=this.convert(s),l=Math.abs(c.x-a.x),u=Math.abs(c.y-a.y);l<i.x&&(i.x=l),l>r.x&&(r.x=l),u<i.y&&(i.y=u),u>r.y&&(r.y=u)}return{x:r.x-i.x,y:r.y-i.y}}},{key:"reverseTransform",get:function(){if(null===this._reverseTransform){var e=b.inverseMatrix3(this.transformMatrix),n=b.additiveInverse(b.product(e,this.translateMatrix));this._reverseTransform=new t(e,n),this._reverseTransform._reverseTransform=this}return this._reverseTransform}}],[{key:"computeSample",value:function(t,e){return this._leastSquareComputeSample(t,e)}},{key:"_leastSquareComputeSample",value:function(t,e){for(var n=[],r=0;r<t.length;r++){var o=[].concat(i(t)),s=[].concat(i(e)),a=o[r],c=s[r];o[r]=o[0],s[r]=s[0],o[0]=a,s[0]=c,n.push(this._leastSquareComputeSampleWithOrigin(o,s))}return this._selectResultLeastAverageDistanceError(n,t,e)}},{key:"_leastSquareComputeSampleWithOrigin",value:function(e,n){for(var i=[],r=[],o=e[0],s=n[0],a=1;a<e.length;a++){var c=e[a],l=n[a],u=new b(2,1);u.set(0,0,c.x-o.x),u.set(1,0,c.y-o.y);var h=new b(2,1);h.set(0,0,l.x-s.x),h.set(1,0,l.y-s.y),i.push({parameters:u,result:h.get(0,0)}),r.push({parameters:u,result:h.get(1,0)})}var d=w.compute2ParametersRegression(i),f=w.compute2ParametersRegression(r),p=new b(3,3);p.set(0,0,d.get(1,0)),p.set(0,1,d.get(2,0)),p.set(0,2,0),p.set(1,0,f.get(1,0)),p.set(1,1,f.get(2,0)),p.set(1,2,0),p.set(2,0,0),p.set(2,1,0),p.set(2,2,1);var g=new b(3,1);return g.set(0,0,s.x+d.get(0,0)-d.get(1,0)*o.x-d.get(2,0)*o.y),g.set(1,0,s.y+f.get(0,0)-f.get(1,0)*o.x-f.get(2,0)*o.y),g.set(2,0,0),new t(p,g)}},{key:"_linearComputeSample",value:function(t,e){for(var n=t.length,i=[],r=0;r<n-2;r++)for(var o=t[r],s=e[r],a=r+1;a<n-1;a++)for(var c=t[a],l=e[a],u=a+1;u<n;u++){var h=t[u],d=e[u],f=this._linearComputeTripletSample(o,c,h,s,l,d);i.push(f)}return this._selectResultLeastAverageDistanceError(i,t,e)}},{key:"_linearComputeTripletSample",value:function(e,n,i,r,o,s){var a=n.x-e.x,c=n.y-e.y,l=i.x-e.x,u=i.y-e.y,h=o.x-r.x,d=o.y-r.y,f=((s.x-r.x)*a-h*l)/(u*a-l*c),p=((s.y-r.y)*a-d*l)/(u*a-l*c),g=(h-f*c)/a,m=(d-p*c)/a,v=new b(3,3);v.set(0,0,g),v.set(0,1,f),v.set(0,2,0),v.set(1,0,m),v.set(1,1,p),v.set(1,2,0),v.set(2,0,0),v.set(2,1,0),v.set(2,2,1);var y=new b(3,1);return y.set(0,0,r.x-g*e.x-f*e.y),y.set(1,0,r.y-m*e.x-p*e.y),y.set(2,0,0),new t(v,y)}},{key:"_selectResultLeastAverageDistanceError",value:function(t,e,n){var i=null,r=1/0;if(!Array.isArray(t)||0===t.length)throw new Error("Expected a non empty array");return t.forEach(function(t){var o=t.getDistanceAverageError(e,n);o<r&&(i=t,r=o)}),i}},{key:"_getDistance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}])}()},function(t,e,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(182),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e,n){(function(t){var e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){"use strict";function i(t,e,n,i){var r=e&&e.prototype instanceof o?e:o,s=Object.create(r.prototype),a=new p(i||[]);return s._invoke=u(t,n,a),s}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function s(){}function a(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function n(i,o,s,a){var c=r(t[i],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"===("undefined"===typeof u?"undefined":e(u))&&b.call(u,"__await")?Promise.resolve(u.__await).then(function(t){n("next",t,s,a)},function(t){n("throw",t,s,a)}):Promise.resolve(u).then(function(t){l.value=t,s(l)},a)}a(c.arg)}function i(t,e){function i(){return new Promise(function(i,r){n(t,e,i,r)})}return o=o?o.then(i,i):i()}var o;this._invoke=i}function u(t,e,n){var i=S;return function(o,s){if(i===T)throw new Error("Generator is already running");if(i===k){if("throw"===o)throw s;return m()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=h(a,n);if(c){if(c===F)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=k,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=T;var l=r(t,e,n);if("normal"===l.type){if(i=n.done?k:M,l.arg===F)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=k,n.method="throw",n.arg=l.arg)}}}function h(t,e){var n=t.iterator[e.method];if(n===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,h(t,e),"throw"===e.method))return F;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,F;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,F):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,F)}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function g(t){if(t){var e=t[_];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(b.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return i.next=i}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype,b=y.hasOwnProperty,w="function"===typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",E=w.toStringTag||"@@toStringTag",A="object"===e(t),C=n.regeneratorRuntime;if(C)return void(A&&(t.exports=C));C=n.regeneratorRuntime=A?t.exports:{},C.wrap=i;var S="suspendedStart",M="suspendedYield",T="executing",k="completed",F={},O={};O[_]=function(){return this};var P=Object.getPrototypeOf,L=P&&P(P(g([])));L&&L!==y&&b.call(L,_)&&(O=L);var R=a.prototype=o.prototype=Object.create(O);s.prototype=R.constructor=a,a.constructor=s,a[E]=s.displayName="GeneratorFunction",C.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},C.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,E in t||(t[E]="GeneratorFunction")),t.prototype=Object.create(R),t},C.awrap=function(t){return{__await:t}},c(l.prototype),l.prototype[x]=function(){return this},C.AsyncIterator=l,C.async=function(t,e,n,r){var o=new l(i(t,e,n,r));return C.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},c(R),R[E]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},C.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},C.values=g,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&b.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,i&&(n.method="next",n.arg=v),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=b.call(r,"catchLoc"),a=b.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&b.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,F):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),F},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),F}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:g(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),F}}}(function(){return this}()||Function("return this")())}).call(e,n(80)(t))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(35),a=(n.n(s),n(9)),c=n(39),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.awm=t,n.objectsLoader=new c.a(n.awm),n}return o(e,t),l(e,[{key:"createDefault",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId");return new Promise(function(t,r){e.objectsLoader.createJSON3DObj("assets/3dModels/youarehere.json").then(function(e){e.visible=!0,e.scale.set(7,7,7),e.rotateX(Math.PI/2);e.scale.multiplyScalar(2),new s.Tween(e.rotation).to({y:2*Math.PI},2e3).repeat(1/0).on("update",function(){e.updateMatrixWorld()}).start(),t(a.g._createFromMesh(e,n,i))})})}}]),e}(a.g);e.a=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"===typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"===typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addColor:function(t,e,n){var i=this.colors,r=this.object.geometry.colors;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addUV:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,i,r,o,s,a,c){var l=this.vertices.length,u=this.parseVertexIndex(t,l),h=this.parseVertexIndex(e,l),d=this.parseVertexIndex(n,l);if(this.addVertex(u,h,d),void 0!==i&&""!==i){var f=this.uvs.length;u=this.parseUVIndex(i,f),h=this.parseUVIndex(r,f),d=this.parseUVIndex(o,f),this.addUV(u,h,d)}if(void 0!==s&&""!==s){var p=this.normals.length;u=this.parseNormalIndex(s,p),h=s===a?u:this.parseNormalIndex(a,p),d=s===c?u:this.parseNormalIndex(c,p),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,n=0,i=t.length;n<i;n++)this.addVertexPoint(this.parseVertexIndex(t[n],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=t.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(t[r],n));for(var s=0,a=e.length;s<a;s++)this.addUVLine(this.parseUVIndex(e[s],i))}};return t.startObject("",!1),t}var o=n(10),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=/^[og]\s*(.+)?/,c=/^mtllib /,l=/^usemtl /,u=function(){function t(e){i(this,t),this.manager=void 0!==e?e:o.DefaultLoadingManager,this.materials=null}return s(t,[{key:"load",value:function(t,e,n,i){var r=this,s=new o.FileLoader(r.manager);s.setPath(this.path),s.load(t,function(t){e(r.parse(t))},n,i)}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setMaterials",value:function(t){return this.materials=t,this}},{key:"parse",value:function(t){console.time("OBJLoader");var e=new r;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var n=t.split("\n"),i="",s="",u=[],h="function"===typeof"".trimLeft,d=0,f=n.length;d<f;d++)if(i=n[d],i=h?i.trimLeft():i.trim(),0!==i.length&&"#"!==(s=i.charAt(0)))if("v"===s){var p=i.split(/\s+/);switch(p[0]){case"v":e.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&e.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":e.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":e.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===s){for(var g=i.substr(1).trim(),m=g.split(/\s+/),v=[],y=0,b=m.length;y<b;y++){var w=m[y];if(w.length>0){var _=w.split("/");v.push(_)}}for(var x=v[0],E=1,A=v.length-1;E<A;E++){var C=v[E],S=v[E+1];e.addFace(x[0],C[0],S[0],x[1],C[1],S[1],x[2],C[2],S[2])}}else if("l"===s){var M=i.substring(1).trim().split(" "),T=[],k=[];if(-1===i.indexOf("/"))T=M;else for(var F=0,O=M.length;F<O;F++){var P=M[F].split("/");""!==P[0]&&T.push(P[0]),""!==P[1]&&k.push(P[1])}e.addLineGeometry(T,k)}else if("p"===s){var L=i.substr(1).trim(),R=L.split(" ");e.addPointGeometry(R)}else if(null!==(u=a.exec(i))){var D=(" "+u[0].substr(1).trim()).substr(1);e.startObject(D)}else if(l.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(c.test(i))e.materialLibraries.push(i.substring(7).trim());else{if("s"!==s){if("\0"===i)continue;throw new Error('three.OBJLoader: Unexpected line: "'+i+'"')}if(u=i.split(" "),u.length>1){var B=u[1].trim().toLowerCase();e.object.smooth="0"!==B&&"off"!==B}else e.object.smooth=!0;var I=e.object.currentMaterial();I&&(I.smooth=e.object.smooth)}e.finalize();var N=new o.Group;N.materialLibraries=[].concat(e.materialLibraries);for(var j=0,U=e.objects.length;j<U;j++){var $=e.objects[j],z=$.geometry,H=$.materials,V="Line"===z.type,W="Points"===z.type,G=!1;if(0!==z.vertices.length){var q=new o.BufferGeometry;q.addAttribute("position",new o.Float32BufferAttribute(z.vertices,3)),z.normals.length>0?q.addAttribute("normal",new o.Float32BufferAttribute(z.normals,3)):q.computeVertexNormals(),z.colors.length>0&&(G=!0,q.addAttribute("color",new o.Float32BufferAttribute(z.colors,3))),z.uvs.length>0&&q.addAttribute("uv",new o.Float32BufferAttribute(z.uvs,2));for(var X=[],K=0,Y=H.length;K<Y;K++){var Z=H[K],J=void 0;if(null!==this.materials)if(J=this.materials.create(Z.name),!V||!J||J instanceof o.LineBasicMaterial){if(W&&J&&!(J instanceof o.PointsMaterial)){var Q=new o.PointsMaterial({size:10,sizeAttenuation:!1});tt.copy(J),J=Q}}else{var tt=new o.LineBasicMaterial;tt.copy(J),tt.lights=!1,J=tt}J||(J=V?new o.LineBasicMaterial:W?new o.PointsMaterial({size:1,sizeAttenuation:!1}):new o.MeshPhongMaterial,J.name=Z.name),J.flatShading=!Z.smooth,J.vertexColors=G?o.VertexColors:o.NoColors,X.push(J)}var et;if(X.length>1){for(var nt=0,it=H.length;nt<it;nt++){var rt=H[nt];q.addGroup(rt.groupStart,rt.groupCount,nt)}et=V?new o.LineSegments(q,X):W?new o.Points(q,X):new o.Mesh(q,X)}else et=V?new o.LineSegments(q,X[0]):W?new o.Points(q,X[0]):new o.Mesh(q,X[0]);et.name=$.name,N.add(et)}}return console.timeEnd("OBJLoader"),N}}]),t}();e.a=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(35),o=(n.n(r),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),s=function(){function t(e,n,r){i(this,t),this.pathSectionObject=e,this.cameraManager=n,this.projector=r,this.speed=5,this.center=!1,this.tweens=[]}return o(t,[{key:"draw",value:function(){for(var t=[],e=this.pathSectionObject._mesh.children,n=0;n<e.length;n++){var i=this.projector.adsumDistanceToMeter(this.pathSectionObject.patternSpace),r=i/this.speed*n*1e3;t.push(this._showPattern(n,r))}return this.pathSectionObject._mesh.visible=!0,this.center&&t.push(this.cameraManager.centerOn(this.pathSectionObject)),this.pathSectionObject.animations.push(this),Promise.all(t).then(function(){})}},{key:"stop",value:function(){this.tweens.forEach(function(t){t.stop()})}},{key:"_showPattern",value:function(t,e){var n=this,i=this.pathSectionObject._mesh.children[t],o={opacity:0},s={z:50};i.traverse(function(t){t.material&&(t.material=t.material.clone(),t.material.opacity=o.opacity,t.material.transparent=!0)}),i.position.setZ(s.z);var a=new Promise(function(t,s){var a=new r.Tween(o).to({opacity:1},500).delay(e).easing(r.Easing.Exponential.In).on("update",function(){i.traverse(function(t){t.material&&(t.material.opacity=o.opacity)})}).on("complete",function(){t(!0)}).on("stop",function(){s(new Error("Path was stopped"))}).start();n.tweens.push(a)}),c=new Promise(function(t,o){var a=new r.Tween(s).to({z:1},1e3).delay(e).easing(r.Easing.Bounce.Out).on("update",function(){i.position.setZ(s.z),i.updateMatrixWorld()}).on("complete",function(){t(!0)}).on("stop",function(){o(new Error("Path was stopped"))}).start();n.tweens.push(a)});return Promise.all([a,c])}}]),t}();e.a=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(10),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];i(this,t),this.from=e,this.to=r,this.ground=n,this.nodes=o,this._distance=null,this._curve=null}return o(t,[{key:"getDistance",value:function(){if(null===this._distance){this._distance=0;for(var t=0;t<this.nodes.length-1;t++){var e=this.nodes[t].getLinkTo(this.nodes[t+1]);this._distance+=e.distance}}return this._distance}},{key:"getCurve",value:function(){if(this.nodes.length<2)return null;if(null===this._curve){this._curve=[];for(var t=0;t<this.nodes.length-1;t++)this._curve.push({from:this.nodes[t].groundPosition,to:this.nodes[t+1].groundPosition,ground:this.nodes[t+1].ground})}return this._curve}},{key:"interpolate",value:function(t,e){var n=this.getCurve();if(null===n)return[];var i=t;t>this.getDistance()/3&&(console.warn("AdsumWebMap.PathSection.interpolate: short pathSection"),i=this.getDistance()/3);var o=Math.floor(this.getDistance()/i)-1,s=this.getDistance()/(o+1),a=[],c=s,l=new r.Vector3;return n.forEach(function(t){var n=t.from,i=t.to,r=t.ground,o=e.adsumDistanceToMeter(l.subVectors(n,i).length());if(o<c)return void(c-=o);for(var u=c/o;u<=1;)l.lerpVectors(n,i,u),a.push({position:l.clone(),ground:r}),u+=s/o;c=o*(u-1)}),a}}]),t}();e.a=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){i(this,t),this.awm=null,this.locked=!1}return r(t,[{key:"init",value:function(t){return this.awm=t,this}}]),t}(),s=new o;e.a=s},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={state:"initial",mode:"3D",buildings:null,floors:null,zoom:{current:0,max:0,min:0},currentFloor:null,previousFloor:null,currentPath:{},currentClickedEvent:null,cameraMoved:!1,sortedPlaces:[]}},function(t,e,n){"use strict";function i(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)([Object(a.a)()]);case 2:case"end":return t.stop()}},c,this)}e.a=i;var r=n(20),o=n.n(r),s=n(32),a=n(190),c=o.a.mark(i)},function(t,e,n){"use strict";function i(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)(200);case 2:return e.next=4,Object(l.b)([d.a,b]);case 4:return E(),t=f.a.getCurrentFloor(),e.next=8,Object(l.c)({type:h.types.DID_INIT,floors:w.bind(f.a),buildings:_.bind(f.a),currentFloor:null===t?null:t.id});case 8:case"end":return e.stop()}},m,this)}function r(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)(200);case 2:return e.next=4,Object(l.b)([f.a,x],t.floorID);case 4:case"end":return e.stop()}},v,this)}function o(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.d)(h.types.WILL_INIT,i);case 2:return t.next=4,Object(l.d)(h.types.FLOOR_WILL_CHANGE,r);case 4:case"end":return t.stop()}},y,this)}var s=n(20),a=n.n(s),c=n(66),l=n(32),u=n(9),h=n(33),d=n(82),f=n(38),p=n(34),g=n(65),m=a.a.mark(i),v=a.a.mark(r),y=a.a.mark(o),b=d.a.init,w=f.a.getAllFloors,_=f.a.getAllBuildings,x=f.a.setCurrentFloor,E=function(){d.a.awm.sceneManager.addEventListener(u.f.floor.didChanged,function(t){var e=t.current,n=null===t.previous?null:t.previous;g.a.dispatch(Object(h.floorDidChanged)(null===e?null:e.id,null===n?null:n.id))}),d.a.awm.mouseManager.addEventListener(u.c.click,function(t){p.a.setEvent(t),g.a.dispatch(Object(h.onClick)(p.a.getEvent.bind(p.a)))})};e.a=o},function(t,e,n){"use strict";var i=n(15),r=n(85),o=Object(i.c)(r.a);e.a=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(193),n(205)),c=(n(208),n(213),n(216)),l=n(41),u=(n.n(l),n(220)),h=n.n(u),d=n(226),f=(n.n(d),n(227)),p=(n.n(f),n(228)),g=(n.n(p),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),m=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),g(e,[{key:"render",value:function(){return s.createElement("div",{className:"App"},s.createElement(a.a,{logo:"http://adactivesas.github.io/adsum-react-components/logo.jpg"}),s.createElement("br",null),s.createElement("div",{className:"comp"},s.createElement(c.a,{lang:"en",timeFormat:"12hrs"})),s.createElement("div",{className:"code"},s.createElement(h.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:'<AdsumClock lang="en" timeFormat="12hrs" />',height:"200px",width:"500px"})),s.createElement("br",null),s.createElement("div",{className:"comp"},s.createElement(c.a,{lang:"fr",timeFormat:"24hrs"})),s.createElement("div",{className:"code"},s.createElement(h.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:'<AdsumClock lang="fr" timeFormat="24hrs" />',height:"200px",width:"500px"})),s.createElement("br",null),s.createElement("div",{className:"comp"},s.createElement(c.a,{lang:"zh",timeFormat:"24hrs"})),s.createElement("div",{className:"code"},s.createElement(h.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:'<AdsumClock lang="zh" timeFormat="24hrs" />',height:"200px",width:"500px"})))}}]),e}(s.Component);e.a=m},function(t,e,n){"use strict";n(194),n(195),n(88),n(197),n(198),n(199),n(200),n(89),n(40),n(201),n(202),n(203),n(204)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),c=n(0),l=n.n(c),u=n(1),h=n.n(u),d=n(86),f=n.n(d),p=n(40),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){var n,o,s;i(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,t.call.apply(t,[this].concat(c))),o.history=f()(o.props),s=n,r(o,s)}return o(e,t),e.prototype.componentWillMount=function(){a()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},e.prototype.render=function(){return l.a.createElement(p.a,{history:this.history,children:this.props.children})},e}(l.a.Component);m.propTypes={basename:h.a.string,forceRefresh:h.a.bool,getUserConfirmation:h.a.func,keyLength:h.a.number,children:h.a.node}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),c=n(0),l=n.n(c),u=n(1),h=n.n(u),d=n(196),f=n.n(d),p=n(40),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){var n,o,s;i(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,t.call.apply(t,[this].concat(c))),o.history=f()(o.props),s=n,r(o,s)}return o(e,t),e.prototype.componentWillMount=function(){a()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},e.prototype.render=function(){return l.a.createElement(p.a,{history:this.history,children:this.props.children})},e}(l.a.Component);m.propTypes={basename:h.a.string,getUserConfirmation:h.a.func,hashType:h.a.oneOf(["hashbang","noslash","slash"]),children:h.a.node}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=n(2),s=i(o),a=n(3),c=i(a),l=n(27),u=n(13),h=n(28),d=i(h),f=n(87),p={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,u.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:u.stripLeadingSlash,decodePath:u.addLeadingSlash},slash:{encodePath:u.addLeadingSlash,decodePath:u.addLeadingSlash}},g=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},m=function(t){return window.location.hash=t},v=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(f.canUseDOM,"Hash history needs a DOM");var e=window.history,n=(0,f.supportsGoWithoutReloadUsingHash)(),i=t.getUserConfirmation,o=void 0===i?f.getConfirmation:i,a=t.hashType,h=void 0===a?"slash":a,y=t.basename?(0,u.stripTrailingSlash)((0,u.addLeadingSlash)(t.basename)):"",b=p[h],w=b.encodePath,_=b.decodePath,x=function(){var t=_(g());return(0,s.default)(!y||(0,u.hasBasename)(t,y),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+y+'".'),y&&(t=(0,u.stripBasename)(t,y)),(0,l.createLocation)(t)},E=(0,d.default)(),A=function(t){r(W,t),W.length=e.length,E.notifyListeners(W.location,W.action)},C=!1,S=null,M=function(){var t=g(),e=w(t);if(t!==e)v(e);else{var n=x(),i=W.location;if(!C&&(0,l.locationsAreEqual)(i,n))return;if(S===(0,u.createPath)(n))return;S=null,T(n)}},T=function(t){if(C)C=!1,A();else{E.confirmTransitionTo(t,"POP",o,function(e){e?A({action:"POP",location:t}):k(t)})}},k=function(t){var e=W.location,n=L.lastIndexOf((0,u.createPath)(e));-1===n&&(n=0);var i=L.lastIndexOf((0,u.createPath)(t));-1===i&&(i=0);var r=n-i;r&&(C=!0,I(r))},F=g(),O=w(F);F!==O&&v(O);var P=x(),L=[(0,u.createPath)(P)],R=function(t){return"#"+w(y+(0,u.createPath)(t))},D=function(t,e){(0,s.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,l.createLocation)(t,void 0,void 0,W.location);E.confirmTransitionTo(n,"PUSH",o,function(t){if(t){var e=(0,u.createPath)(n),i=w(y+e);if(g()!==i){S=e,m(i);var r=L.lastIndexOf((0,u.createPath)(W.location)),o=L.slice(0,-1===r?0:r+1);o.push(e),L=o,A({action:"PUSH",location:n})}else(0,s.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),A()}})},B=function(t,e){(0,s.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,l.createLocation)(t,void 0,void 0,W.location);E.confirmTransitionTo(n,"REPLACE",o,function(t){if(t){var e=(0,u.createPath)(n),i=w(y+e);g()!==i&&(S=e,v(i));var r=L.indexOf((0,u.createPath)(W.location));-1!==r&&(L[r]=e),A({action:"REPLACE",location:n})}})},I=function(t){(0,s.default)(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},N=function(){return I(-1)},j=function(){return I(1)},U=0,$=function(t){U+=t,1===U?(0,f.addEventListener)(window,"hashchange",M):0===U&&(0,f.removeEventListener)(window,"hashchange",M)},z=!1,H=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=E.setPrompt(t);return z||($(1),z=!0),function(){return z&&(z=!1,$(-1)),e()}},V=function(t){var e=E.appendListener(t);return $(1),function(){$(-1),e()}},W={length:e.length,action:"POP",location:P,createHref:R,push:D,replace:B,go:I,goBack:N,goForward:j,block:H,listen:V};return W};e.default=y},function(t,e,n){"use strict";var i=n(54);i.a},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var r=n(0),o=n.n(r),s=n(1),a=n.n(s),c=n(89),l=n(88),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},d="function"===typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":u(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":u(t)},f=function(t){var e=t.to,n=t.exact,r=t.strict,s=t.location,a=t.activeClassName,u=t.className,f=t.activeStyle,p=t.style,g=t.isActive,m=t.ariaCurrent,v=i(t,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return o.a.createElement(c.a,{path:"object"===("undefined"===typeof e?"undefined":d(e))?e.pathname:e,exact:n,strict:r,location:s,children:function(t){var n=t.location,i=t.match,r=!!(g?g(i,n):i);return o.a.createElement(l.a,h({to:e,className:r?[u,a].filter(function(t){return t}).join(" "):u,style:r?h({},p,f):p,"aria-current":r&&m},v))}})};f.propTypes={to:l.a.propTypes.to,exact:a.a.bool,strict:a.a.bool,location:a.a.object,activeClassName:a.a.string,className:a.a.string,activeStyle:a.a.object,style:a.a.object,isActive:a.a.func,ariaCurrent:a.a.oneOf(["page","step","location","true"])},f.defaultProps={activeClassName:"active",ariaCurrent:"true"}},function(t,e,n){"use strict";var i=n(57);i.a},function(t,e,n){"use strict";var i=n(58);i.a},function(t,e,n){"use strict";var i=n(60);i.a},function(t,e,n){"use strict";var i=n(61);i.a},function(t,e,n){"use strict";var i=n(18);i.a},function(t,e,n){"use strict";var i=n(62);i.a},function(t,e,n){"use strict";var i=n(206);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";var i=n(0),r=(n.n(i),n(207));n.n(r);e.a=function(t){return i.createElement("header",{className:"App-header"},i.createElement("img",{src:t.logo,className:"App-logo",alt:"logo"}),i.createElement("h1",{className:"App-title"},"Adsum Clock demo"))}},function(t,e){},function(t,e,n){"use strict";n(209)},function(t,e,n){"use strict";var i=n(0),r=(n.n(i),n(15)),o=n(12),s=n(24),a=(n(90),n(212)),c=(n.n(a),function(t){return i.createElement("div",null,i.createElement("h1",null,"Home"))}),l=function(t){return Object(o.b)({changePage:function(){return Object(r.b)("/about-us")}},t)};Object(s.b)(null,l)(c)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(12)),c=n(24),l=n(90),u=n(211),h=(n.n(u),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),d=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),h(e,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){return s.createElement("div",{className:"map-wrapper"},s.createElement("div",{id:"adsum-web-map-container"}))}}]),e}(s.Component),f=function(t){return{mapState:t.map.state}},p=function(t){return Object(a.b)({init:function(){return t(l.a.init())}},t)};Object(c.b)(f,p)(d)},function(t,e){},function(t,e){},function(t,e,n){"use strict";n(214)},function(t,e,n){"use strict";var i=n(0),r=(n.n(i),n(215));n.n(r)},function(t,e){},function(t,e,n){"use strict";var i=n(217);e.a=i.a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(218),h=n.n(u),d=n(219),f=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),p=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={date:"",time:""},n.getTime=n.getTime.bind(n),n}return o(e,t),f(e,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval(function(){return t.getTime()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"getTime",value:function(){var t=this.props.timeFormat,n=this.props.lang;-1===Object.keys(h.a).indexOf(n)&&(console.warn("AdsumClock does not support language: "+n+", goes to default "+e.defaultProps.lang),n=e.defaultProps.lang);var i=new Date,r=h.a[n].days[i.getDay()],o=1===i.getDate().toString().length?"0"+i.getDate()+h.a[n].date:""+i.getDate()+h.a[n].date,s="zh"===n?""+(i.getMonth()+1)+h.a[n].month:h.a[n].month[i.getMonth()],a=""+i.getFullYear()+h.a[n].year,c="",l="",u="";"12hrs"===t?12===i.getHours()?(c=""+i.getHours(),l=1===i.getMinutes().toString().length?"0"+i.getMinutes():""+i.getMinutes(),u=c+":"+l+" "+h.a[n].pm):i.getHours()>12?(c=""+(i.getHours()-12),l=1===i.getMinutes().toString().length?"0"+i.getMinutes():""+i.getMinutes(),u=c+":"+l+" "+h.a[n].pm):(c=""+i.getHours(),l=1===i.getMinutes().toString().length?"0"+i.getMinutes():""+i.getMinutes(),u=c+":"+l+" "+h.a[n].am):(c=1===i.getHours().toString().length?"0"+i.getHours():""+i.getHours(),l=1===i.getMinutes().toString().length?"0"+i.getMinutes():""+i.getMinutes(),u=c+":"+l),"zh"===n?this.setState({date:r+", "+a+" "+s+" "+o,time:u}):this.setState({date:r+", "+o+" "+s+" "+a,time:u})}},{key:"render",value:function(){return a.a.createElement("div",{role:"presentation",className:"adsum-clock-wrapper"},a.a.createElement("div",{className:"adsum-clock"},a.a.createElement("div",{className:"day-date"},this.state.date),a.a.createElement("div",{className:"time"},this.state.time)))}}]),e}(s.Component);p.propTypes={lang:l.a.string.isRequired,timeFormat:l.a.string.isRequired,style:l.a.objectOf(l.a.string)},p.defaultProps={lang:"en",timeFormat:"24hrs",style:null},e.a=p},function(t,e){t.exports={en:{date:"",days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],year:"",am:"AM",pm:"PM"},zh:{date:"\u65e5",days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],month:"\u6708",year:"\u5e74",am:"\u4e0a\u5348",pm:"\u4e0b\u5348"},fr:{date:"",days:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],month:["Jan","F\xe9v","Mars","Avril","Mai","Juin","Juil","Ao\xfbt","Sept","Oct","Nov","D\xe9c"],year:"",am:"AM",pm:"PM"}}},function(t,e){},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.diff=e.split=void 0;var r=n(221),o=i(r),s=n(94),a=i(s),c=n(224),l=i(c);e.split=a.default,e.diff=l.default,e.default=o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":a(e))&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(41),h=i(u),d=n(0),f=i(d),p=n(1),g=i(p),m=n(92),v=i(m),y=n(93),b=h.default.acequire("ace/range"),w=b.Range,_=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return y.editorEvents.forEach(function(t){n[t]=n[t].bind(n)}),n.debounce=y.debounce,n}return s(e,t),l(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.className,i=e.onBeforeLoad,r=e.onValidate,o=e.mode,s=e.focus,a=e.theme,c=e.fontSize,l=e.value,u=e.defaultValue,d=e.cursorStart,f=e.showGutter,p=e.wrapEnabled,g=e.showPrintMargin,m=e.scrollMargin,v=void 0===m?[0,0,0,0]:m,b=e.keyboardHandler,w=e.onLoad,_=e.commands,x=e.annotations,E=e.markers;this.editor=h.default.edit(this.refEditor),i&&i(h.default);for(var A=Object.keys(this.props.editorProps),C=0;C<A.length;C++)this.editor[A[C]]=this.props.editorProps[A[C]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),this.editor.getSession().setMode("ace/mode/"+o),this.editor.setTheme("ace/theme/"+a),this.editor.setFontSize(c),this.editor.getSession().setValue(u||l,d),this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(f),this.editor.getSession().setUseWrapMode(p),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),r&&this.editor.getSession().on("changeAnnotation",function(){var e=t.editor.getSession().getAnnotations();t.props.onValidate(e)}),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(x||[]),E&&E.length>0&&this.handleMarkers(E);for(var S=this.editor.$options,M=0;M<y.editorOptions.length;M++){var T=y.editorOptions[M];S.hasOwnProperty(T)?this.editor.setOption(T,this.props[T]):this.props[T]&&console.warn("ReactAce: editor option "+T+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}this.handleOptions(this.props),Array.isArray(_)&&_.forEach(function(e){"string"==typeof e.exec?t.editor.commands.bindKey(e.bindKey,e.exec):t.editor.commands.addCommand(e)}),b&&this.editor.setKeyboardHandler("ace/keyboard/"+b),n&&(this.refEditor.className+=" "+n),s&&this.editor.focus(),w&&w(this.editor),this.editor.resize()}},{key:"componentWillReceiveProps",value:function(t){for(var e=this.props,n=0;n<y.editorOptions.length;n++){var i=y.editorOptions[n];t[i]!==e[i]&&this.editor.setOption(i,t[i])}if(t.className!==e.className){var r=this.refEditor.className,o=r.trim().split(" ");e.className.trim().split(" ").forEach(function(t){var e=o.indexOf(t);o.splice(e,1)}),this.refEditor.className=" "+t.className+" "+o.join(" ")}if(t.mode!==e.mode&&this.editor.getSession().setMode("ace/mode/"+t.mode),t.theme!==e.theme&&this.editor.setTheme("ace/theme/"+t.theme),t.keyboardHandler!==e.keyboardHandler&&(t.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+t.keyboardHandler):this.editor.setKeyboardHandler(null)),t.fontSize!==e.fontSize&&this.editor.setFontSize(t.fontSize),t.wrapEnabled!==e.wrapEnabled&&this.editor.getSession().setUseWrapMode(t.wrapEnabled),t.showPrintMargin!==e.showPrintMargin&&this.editor.setShowPrintMargin(t.showPrintMargin),t.showGutter!==e.showGutter&&this.editor.renderer.setShowGutter(t.showGutter),(0,v.default)(t.setOptions,e.setOptions)||this.handleOptions(t),(0,v.default)(t.annotations,e.annotations)||this.editor.getSession().setAnnotations(t.annotations||[]),!(0,v.default)(t.markers,e.markers)&&Array.isArray(t.markers)&&this.handleMarkers(t.markers),(0,v.default)(t.scrollMargin,e.scrollMargin)||this.handleScrollMargins(t.scrollMargin),this.editor&&this.editor.getValue()!==t.value){this.silent=!0;var s=this.editor.session.selection.toJSON();this.editor.setValue(t.value,t.cursorStart),this.editor.session.selection.fromJSON(s),this.silent=!1}t.focus&&!e.focus&&this.editor.focus()}},{key:"componentDidUpdate",value:function(t){t.height===this.props.height&&t.width===this.props.width||this.editor.resize()}},{key:"handleScrollMargins",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0];this.editor.renderer.setScrollMargins(t[0],t[1],t[2],t[3])}},{key:"componentWillUnmount",value:function(){this.editor.destroy(),this.editor=null}},{key:"onChange",value:function(t){if(this.props.onChange&&!this.silent){var e=this.editor.getValue();this.props.onChange(e,t)}}},{key:"onSelectionChange",value:function(t){if(this.props.onSelectionChange){var e=this.editor.getSelection();this.props.onSelectionChange(e,t)}}},{key:"onCursorChange",value:function(t){if(this.props.onCursorChange){var e=this.editor.getSelection();this.props.onCursorChange(e,t)}}},{key:"onInput",value:function(t){this.props.onInput&&this.props.onInput(t)}},{key:"onFocus",value:function(t){this.props.onFocus&&this.props.onFocus(t)}},{key:"onBlur",value:function(t){this.props.onBlur&&this.props.onBlur(t,this.editor)}},{key:"onCopy",value:function(t){this.props.onCopy&&this.props.onCopy(t)}},{key:"onPaste",value:function(t){this.props.onPaste&&this.props.onPaste(t)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(t){for(var e=Object.keys(t.setOptions),n=0;n<e.length;n++)this.editor.setOption(e[n],t.setOptions[e[n]])}},{key:"handleMarkers",value:function(t){var e=this,n=this.editor.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);n=this.editor.getSession().getMarkers(!1);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);t.forEach(function(t){var n=t.startRow,i=t.startCol,r=t.endRow,o=t.endCol,s=t.className,a=t.type,c=t.inFront,l=void 0!==c&&c,u=new w(n,i,r,o);e.editor.getSession().addMarker(u,s,a,l)})}},{key:"updateRef",value:function(t){this.refEditor=t}},{key:"render",value:function(){var t=this.props,e=t.name,n=t.width,i=t.height,r=t.style,o=c({width:n,height:i},r);return f.default.createElement("div",{ref:this.updateRef,id:e,style:o})}}]),e}(d.Component);e.default=_,_.propTypes={mode:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.oneOfType([g.default.number,g.default.string]),showGutter:g.default.bool,onChange:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onInput:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.string,defaultValue:g.default.string,onLoad:g.default.func,onSelectionChange:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,onValidate:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,debounceChangePeriod:g.default.number,editorProps:g.default.object,setOptions:g.default.object,style:g.default.object,scrollMargin:g.default.array,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array},_.defaultProps={name:"brace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}},function(t,e,n){(function(e){function n(t,e){return null==t?void 0:t[e]}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function o(){this.__data__=vt?vt(null):{}}function s(t){return this.has(t)&&delete this.__data__[t]}function a(t){var e=this.__data__;if(vt){var n=e[t];return n===V?void 0:n}return ht.call(e,t)?e[t]:void 0}function c(t){var e=this.__data__;return vt?void 0!==e[t]:ht.call(e,t)}function l(t,e){return this.__data__[t]=vt&&void 0===e?V:e,this}function u(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function h(){this.__data__=[]}function d(t){var e=this.__data__,n=x(e,t);return!(n<0)&&(n==e.length-1?e.pop():gt.call(e,n,1),!0)}function f(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]}function p(t){return x(this.__data__,t)>-1}function g(t,e){var n=this.__data__,i=x(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function m(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function v(){this.__data__={hash:new r,map:new(mt||u),string:new r}}function y(t){return M(this,t).delete(t)}function b(t){return M(this,t).get(t)}function w(t){return M(this,t).has(t)}function _(t,e){return M(this,t).set(t,e),this}function x(t,e){for(var n=t.length;n--;)if(D(t[n][0],e))return n;return-1}function E(t,e){e=k(e,t)?[e]:S(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[P(e[n++])];return n&&n==i?t:void 0}function A(t){return!(!I(t)||O(t))&&(B(t)||i(t)?ft:et).test(L(t))}function C(t){if("string"==typeof t)return t;if(j(t))return bt?bt.call(t):"";var e=t+"";return"0"==e&&1/t==-W?"-0":e}function S(t){return _t(t)?t:wt(t)}function M(t,e){var n=t.__data__;return F(e)?n["string"==typeof e?"string":"hash"]:n.map}function T(t,e){var i=n(t,e);return A(i)?i:void 0}function k(t,e){if(_t(t))return!1;var n="undefined"===typeof t?"undefined":z(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!j(t))||(Y.test(t)||!K.test(t)||null!=e&&t in Object(e))}function F(t){var e="undefined"===typeof t?"undefined":z(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function O(t){return!!lt&&lt in t}function P(t){if("string"==typeof t||j(t))return t;var e=t+"";return"0"==e&&1/t==-W?"-0":e}function L(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(H);var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(R.Cache||m),n}function D(t,e){return t===e||t!==t&&e!==e}function B(t){var e=I(t)?dt.call(t):"";return e==G||e==q}function I(t){var e="undefined"===typeof t?"undefined":z(t);return!!t&&("object"==e||"function"==e)}function N(t){return!!t&&"object"==("undefined"===typeof t?"undefined":z(t))}function j(t){return"symbol"==("undefined"===typeof t?"undefined":z(t))||N(t)&&dt.call(t)==X}function U(t){return null==t?"":C(t)}function $(t,e,n){var i=null==t?void 0:E(t,e);return void 0===i?n:i}var z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H="Expected a function",V="__lodash_hash_undefined__",W=1/0,G="[object Function]",q="[object GeneratorFunction]",X="[object Symbol]",K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,Z=/^\./,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,tt=/\\(\\)?/g,et=/^\[object .+?Constructor\]$/,nt="object"==("undefined"===typeof e?"undefined":z(e))&&e&&e.Object===Object&&e,it="object"==("undefined"===typeof self?"undefined":z(self))&&self&&self.Object===Object&&self,rt=nt||it||Function("return this")(),ot=Array.prototype,st=Function.prototype,at=Object.prototype,ct=rt["__core-js_shared__"],lt=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ut=st.toString,ht=at.hasOwnProperty,dt=at.toString,ft=RegExp("^"+ut.call(ht).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=rt.Symbol,gt=ot.splice,mt=T(rt,"Map"),vt=T(Object,"create"),yt=pt?pt.prototype:void 0,bt=yt?yt.toString:void 0;r.prototype.clear=o,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=c,r.prototype.set=l,u.prototype.clear=h,u.prototype.delete=d,u.prototype.get=f,u.prototype.has=p,u.prototype.set=g,m.prototype.clear=v,m.prototype.delete=y,m.prototype.get=b,m.prototype.has=w,m.prototype.set=_;var wt=R(function(t){t=U(t);var e=[];return Z.test(t)&&e.push(""),t.replace(J,function(t,n,i,r){e.push(i?r.replace(tt,"$1"):n||t)}),e});R.Cache=m;var _t=Array.isArray;t.exports=$}).call(e,n(7))},function(t,e){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],function(t,e,n){"use strict";function i(t,e){this.$u=t,this.$doc=e}var r=t("./lib/oop"),o=t("./lib/lang"),s=t("./lib/event_emitter").EventEmitter,a=t("./editor").Editor,c=t("./virtual_renderer").VirtualRenderer,l=t("./edit_session").EditSession,u=function(t,e,n){this.BELOW=1,this.BESIDE=0,this.$container=t,this.$theme=e,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(t){this.$cEditor=t}.bind(this))};(function(){r.implement(this,s),this.$createEditor=function(){var t=document.createElement("div");t.className=this.$editorCSS,t.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(t);var e=new a(new c(t,this.$theme));return e.on("focus",function(){this._emit("focus",e)}.bind(this)),this.$editors.push(e),e.setFontSize(this.$fontSize),e},this.setSplits=function(t){var e;if(t<1)throw"The number of splits have to be > 0!";if(t!=this.$splits){if(t>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<t;)e=this.$editors[this.$splits],this.$container.appendChild(e.container),e.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<t;)this.$createEditor(),this.$splits++}else for(;this.$splits>t;)e=this.$editors[this.$splits-1],this.$container.removeChild(e.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(t){return this.$editors[t]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(t){this.$editors.forEach(function(e){e.setTheme(t)})},this.setKeyboardHandler=function(t){this.$editors.forEach(function(e){e.setKeyboardHandler(t)})},this.forEach=function(t,e){this.$editors.forEach(t,e)},this.$fontSize="",this.setFontSize=function(t){this.$fontSize=t,this.forEach(function(e){e.setFontSize(t)})},this.$cloneSession=function(t){var e=new l(t.getDocument(),t.getMode()),n=t.getUndoManager();if(n){var r=new i(n,e);e.setUndoManager(r)}return e.$informUndoManager=o.delayedCall(function(){e.$deltas=[]}),e.setTabSize(t.getTabSize()),e.setUseSoftTabs(t.getUseSoftTabs()),e.setOverwrite(t.getOverwrite()),e.setBreakpoints(t.getBreakpoints()),e.setUseWrapMode(t.getUseWrapMode()),e.setUseWorker(t.getUseWorker()),e.setWrapLimitRange(t.$wrapLimitRange.min,t.$wrapLimitRange.max),e.$foldData=t.$cloneFoldData(),e},this.setSession=function(t,e){var n;return n=null==e?this.$cEditor:this.$editors[e],this.$editors.some(function(e){return e.session===t})&&(t=this.$cloneSession(t)),n.setSession(t),t},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(t){this.$orientation!=t&&(this.$orientation=t,this.resize())},this.resize=function(){var t,e=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var i=e/this.$splits,r=0;r<this.$splits;r++)t=this.$editors[r],t.container.style.width=i+"px",t.container.style.top="0px",t.container.style.left=r*i+"px",t.container.style.height=n+"px",t.resize();else for(var o=n/this.$splits,r=0;r<this.$splits;r++)t=this.$editors[r],t.container.style.width=e+"px",t.container.style.top=r*o+"px",t.container.style.left="0px",t.container.style.height=o+"px",t.resize()}}).call(u.prototype),function(){this.execute=function(t){this.$u.execute(t)},this.undo=function(){var t=this.$u.undo(!0);t&&this.$doc.selection.setSelectionRange(t)},this.redo=function(){var t=this.$u.redo(!0);t&&this.$doc.selection.setSelectionRange(t)},this.reset=function(){this.$u.reset()},this.hasUndo=function(){return this.$u.hasUndo()},this.hasRedo=function(){return this.$u.hasRedo()}}.call(i.prototype),e.Split=u}),ace.define("ace/ext/split",["require","exports","module","ace/split"],function(t,e,n){"use strict";n.exports=t("../split")}),function(){ace.acequire(["ace/ext/split"],function(){})}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":a(e))&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(94),u=i(l),h=n(0),d=i(h),f=n(1),p=i(f),g=n(225),m=i(g),v=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return s(e,t),c(e,[{key:"onChange",value:function(t){this.setState({value:t}),this.props.onChange&&this.props.onChange(t)}},{key:"diff",value:function(){var t=new m.default,e=this.state.value[0],n=this.state.value[1];if(0===e.length&&0===n.length)return[];var i=t.diff_main(e,n);t.diff_cleanupSemantic(i);var r=this.generateDiffedLines(i);return this.setCodeMarkers(r)}},{key:"generateDiffedLines",value:function(t){var e={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1},n={left:[],right:[]},i={left:1,right:1};return t.forEach(function(t){var r=t[0],o=t[1],s=o.split("\n").length-1;if(0!==o.length){var a=o[0],c=o[o.length-1],l=0;switch(r){case e.DIFF_EQUAL:i.left+=s,i.right+=s;break;case e.DIFF_DELETE:"\n"===a&&(i.left++,s--),l=s,0===l&&n.right.push({startLine:i.right,endLine:i.right}),"\n"===c&&(l-=1),n.left.push({startLine:i.left,endLine:i.left+l}),i.left+=s;break;case e.DIFF_INSERT:"\n"===a&&(i.right++,s--),l=s,0===l&&n.left.push({startLine:i.left,endLine:i.left}),"\n"===c&&(l-=1),n.right.push({startLine:i.right,endLine:i.right+l}),i.right+=s;break;default:throw new Error("Diff type was not defined.")}}}),n}},{key:"setCodeMarkers",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:[],right:[]},e=[],n={left:[],right:[]},i=0;i<t.left.length;i++){var r={startRow:t.left[i].startLine-1,endRow:t.left[i].endLine,type:"text",className:"codeMarker"};n.left.push(r)}for(var o=0;o<t.right.length;o++){var s={startRow:t.right[o].startLine-1,endRow:t.right[o].endLine,type:"text",className:"codeMarker"};n.right.push(s)}return e[0]=n.left,e[1]=n.right,e}},{key:"render",value:function(){var t=this.diff();return d.default.createElement(u.default,{name:this.props.name,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:t})}}]),e}(h.Component);e.default=v,v.propTypes={cursorStart:p.default.number,editorProps:p.default.object,enableBasicAutocompletion:p.default.bool,enableLiveAutocompletion:p.default.bool,focus:p.default.bool,fontSize:p.default.number,height:p.default.string,highlightActiveLine:p.default.bool,maxLines:p.default.func,minLines:p.default.func,mode:p.default.string,name:p.default.string,onLoad:p.default.func,onPaste:p.default.func,onScroll:p.default.func,onChange:p.default.func,orientation:p.default.string,readOnly:p.default.bool,scrollMargin:p.default.array,setOptions:p.default.object,showGutter:p.default.bool,showPrintMargin:p.default.bool,splits:p.default.number,style:p.default.object,tabSize:p.default.number,theme:p.default.string,value:p.default.array,width:p.default.string,wrapEnabled:p.default.bool},v.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"brace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0}},function(t,e,n){"use strict";function i(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.Diff,i.prototype.diff_main=function(t,e,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];"undefined"==typeof n&&(n=!0);var o=n,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=this.diff_compute_(t,e,o,r);return a&&l.unshift([0,a]),c&&l.push([0,c]),this.diff_cleanupMerge(l),l},i.prototype.diff_compute_=function(t,e,n,i){var r;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,s=t.length>e.length?e:t,a=o.indexOf(s);if(-1!=a)return r=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],t.length>e.length&&(r[0][0]=r[2][0]=-1),r;if(1==s.length)return[[-1,t],[1,e]];var c=this.diff_halfMatch_(t,e);if(c){var l=c[0],u=c[1],h=c[2],d=c[3],f=c[4],p=this.diff_main(l,h,n,i),g=this.diff_main(u,d,n,i);return p.concat([[0,f]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},i.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2;var r=i.lineArray,o=this.diff_main(t,e,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([0,""]);for(var s=0,a=0,c=0,l="",u="";s<o.length;){switch(o[s][0]){case 1:c++,u+=o[s][1];break;case-1:a++,l+=o[s][1];break;case 0:if(a>=1&&c>=1){o.splice(s-a-c,a+c),s=s-a-c;for(var i=this.diff_main(l,u,!1,n),h=i.length-1;h>=0;h--)o.splice(s,0,i[h]);s+=i.length}c=0,a=0,l="",u=""}s++}return o.pop(),o},i.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,o=Math.ceil((i+r)/2),s=o,a=2*o,c=new Array(a),l=new Array(a),u=0;u<a;u++)c[u]=-1,l[u]=-1;c[s+1]=0,l[s+1]=0;for(var h=i-r,d=h%2!=0,f=0,p=0,g=0,m=0,v=0;v<o&&!((new Date).getTime()>n);v++){for(var y=-v+f;y<=v-p;y+=2){var b,w=s+y;b=y==-v||y!=v&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1;for(var _=b-y;b<i&&_<r&&t.charAt(b)==e.charAt(_);)b++,_++;if(c[w]=b,b>i)p+=2;else if(_>r)f+=2;else if(d){var x=s+h-y;if(x>=0&&x<a&&-1!=l[x]){var E=i-l[x];if(b>=E)return this.diff_bisectSplit_(t,e,b,_,n)}}}for(var A=-v+g;A<=v-m;A+=2){var E,x=s+A;E=A==-v||A!=v&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1;for(var C=E-A;E<i&&C<r&&t.charAt(i-E-1)==e.charAt(r-C-1);)E++,C++;if(l[x]=E,E>i)m+=2;else if(C>r)g+=2;else if(!d){var w=s+h-A;if(w>=0&&w<a&&-1!=c[w]){var b=c[w],_=s+b-w;if(E=i-E,b>=E)return this.diff_bisectSplit_(t,e,b,_,n)}}}}return[[-1,t],[1,e]]},i.prototype.diff_bisectSplit_=function(t,e,n,i,r){var o=t.substring(0,n),s=e.substring(0,i),a=t.substring(n),c=e.substring(i),l=this.diff_main(o,s,!1,r),u=this.diff_main(a,c,!1,r);return l.concat(u)},i.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,o=-1,s=i.length;o<t.length-1;){o=t.indexOf("\n",n),-1==o&&(o=t.length-1);var a=t.substring(n,o+1);n=o+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,i[s++]=a)}return e}var i=[],r={};return i[0]="",{chars1:n(t),chars2:n(e),lineArray:i}},i.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],o=0;o<i.length;o++)r[o]=e[i.charCodeAt(o)];t[n][1]=r.join("")}},i.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?(n=r,o=n):i=r,r=Math.floor((i-n)/2+n);return r},i.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?(n=r,o=n):i=r,r=Math.floor((i-n)/2+n);return r},i.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var o=0,s=1;;){var a=t.substring(r-s),c=e.indexOf(a);if(-1==c)return o;s+=c,0!=c&&t.substring(r-s)!=e.substring(0,s)||(o=s,s++)}},i.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var i,r,o,a,c=t.substring(n,n+Math.floor(t.length/4)),l=-1,u="";-1!=(l=e.indexOf(c,l+1));){var h=s.diff_commonPrefix(t.substring(n),e.substring(l)),d=s.diff_commonSuffix(t.substring(0,n),e.substring(0,l));u.length<d+h&&(u=e.substring(l-d,l)+e.substring(l,l+h),i=t.substring(0,n-d),r=t.substring(n+h),o=e.substring(0,l-d),a=e.substring(l+h))}return 2*u.length>=t.length?[i,r,o,a,u]:null}if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(i.length<4||2*r.length<i.length)return null;var o,s=this,a=n(i,r,Math.ceil(i.length/4)),c=n(i,r,Math.ceil(i.length/2));if(!a&&!c)return null;o=c?a&&a[4].length>c[4].length?a:c:a;var l,u,h,d;return t.length>e.length?(l=o[0],u=o[1],h=o[2],d=o[3]):(h=o[0],d=o[1],l=o[2],u=o[3]),[l,u,h,d,o[4]]},i.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,o=0,s=0,a=0,c=0,l=0;o<t.length;)0==t[o][0]?(n[i++]=o,s=c,a=l,c=0,l=0,r=t[o][1]):(1==t[o][0]?c+=t[o][1].length:l+=t[o][1].length,r&&r.length<=Math.max(s,a)&&r.length<=Math.max(c,l)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,i--,o=i>0?n[i-1]:-1,s=0,a=0,c=0,l=0,r=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var u=t[o-1][1],h=t[o][1],d=this.diff_commonOverlap_(u,h),f=this.diff_commonOverlap_(h,u);d>=f?(d>=u.length/2||d>=h.length/2)&&(t.splice(o,0,[0,h.substring(0,d)]),t[o-1][1]=u.substring(0,u.length-d),t[o+1][1]=h.substring(d),o++):(f>=u.length/2||f>=h.length/2)&&(t.splice(o,0,[0,u.substring(0,f)]),t[o-1][0]=1,t[o-1][1]=h.substring(0,h.length-f),t[o+1][0]=-1,t[o+1][1]=u.substring(f),o++),o++}o++}},i.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),o=n.match(i.nonAlphaNumericRegex_),s=r.match(i.nonAlphaNumericRegex_),a=o&&n.match(i.whitespaceRegex_),c=s&&r.match(i.whitespaceRegex_),l=a&&n.match(i.linebreakRegex_),u=c&&r.match(i.linebreakRegex_),h=l&&t.match(i.blanklineEndRegex_),d=u&&e.match(i.blanklineStartRegex_);return h||d?5:l||u?4:o&&!a&&c?3:a||c?2:o||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],o=t[n][1],s=t[n+1][1],a=this.diff_commonSuffix(r,o);if(a){var c=o.substring(o.length-a);r=r.substring(0,r.length-a),o=c+o.substring(0,o.length-a),s=c+s}for(var l=r,u=o,h=s,d=e(r,o)+e(o,s);o.charAt(0)===s.charAt(0);){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var f=e(r,o)+e(o,s);f>=d&&(d=f,l=r,u=o,h=s)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=u,h?t[n+1][1]=h:(t.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r=null,o=0,s=!1,a=!1,c=!1,l=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(c||l)?(n[i++]=o,s=c,a=l,r=t[o][1]):(i=0,r=null),c=l=!1):(-1==t[o][0]?l=!0:c=!0,r&&(s&&a&&c&&l||r.length<this.Diff_EditCost/2&&s+a+c+l==3)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,r=null,s&&a?(c=l=!0,i=0):(i--,o=i>0?n[i-1]:-1,c=l=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},i.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,i=0,r=0,o="",s="";n<t.length;)switch(t[n][0]){case 1:r++,s+=t[n][1],n++;break;case-1:i++,o+=t[n][1],n++;break;case 0:i+r>1?(0!==i&&0!==r&&(e=this.diff_commonPrefix(s,o),0!==e&&(n-i-r>0&&0==t[n-i-r-1][0]?t[n-i-r-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(s,o))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===i?t.splice(n-r,i+r,[1,s]):0===r?t.splice(n-i,i+r,[-1,o]):t.splice(n-i-r,i+r,[-1,o],[1,s]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,i=0,o="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},i.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,o=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(i+=t[n][1].length),-1!==t[n][0]&&(r+=t[n][1].length),!(i>e));n++)o=i,s=r;return t.length!=n&&-1===t[n][0]?s:s+(e-o)},i.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],c=t[s][1],l=c.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},i.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},i.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},i.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var o=t[r][0],s=t[r][1];switch(o){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:e+=Math.max(n,i),n=0,i=0}}return e+=Math.max(n,i)},i.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[i++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var c=parseInt(a,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=t.substring(r,r+=c);"="==o[s].charAt(0)?n[i++]=[0,l]:n[i++]=[-1,l];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(r!=t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n},i.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},i.prototype.match_bitap_=function(t,e,n){function i(t,i){var r=t/e.length,s=Math.abs(n-i);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this,s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(i(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(i(0,a),s)));var c=1<<e.length-1;a=-1;for(var l,u,h,d=e.length+t.length,f=0;f<e.length;f++){for(l=0,u=d;l<u;)i(f,n+u)<=s?l=u:d=u,u=Math.floor((d-l)/2+l);d=u;var p=Math.max(1,n-u+1),g=Math.min(n+u,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<f)-1;for(var v=g;v>=p;v--){var y=r[t.charAt(v-1)];if(m[v]=0===f?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(h[v+1]|h[v])<<1|1|h[v+1],m[v]&c){var b=i(f,v-1);if(b<=s){if(s=b,!((a=v-1)>n))break;p=Math.max(1,2*n-a)}}}if(i(f+1,n)>s)break;h=m}return a},i.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},i.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var r=e.substring(t.start2-i,t.start2);r&&t.diffs.unshift([0,r]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+i);o&&t.diffs.push([0,o]),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+o.length,t.length2+=r.length+o.length}},i.prototype.patch_make=function(t,e,n){var o,s;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof n)o=t,s=this.diff_main(o,e,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(t&&"object"==("undefined"===typeof t?"undefined":r(t))&&"undefined"==typeof e&&"undefined"==typeof n)s=t,o=this.diff_text1(s);else if("string"==typeof t&&e&&"object"==("undefined"===typeof e?"undefined":r(e))&&"undefined"==typeof n)o=t,s=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=("undefined"===typeof n?"undefined":r(n)))throw new Error("Unknown call format to patch_make.");o=t,s=n}if(0===s.length)return[];for(var a=[],c=new i.patch_obj,l=0,u=0,h=0,d=o,f=o,p=0;p<s.length;p++){var g=s[p][0],m=s[p][1];switch(l||0===g||(c.start1=u,c.start2=h),g){case 1:c.diffs[l++]=s[p],c.length2+=m.length,f=f.substring(0,h)+m+f.substring(h);break;case-1:c.length1+=m.length,c.diffs[l++]=s[p],f=f.substring(0,h)+f.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&l&&s.length!=p+1?(c.diffs[l++]=s[p],c.length1+=m.length,c.length2+=m.length):m.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(c,d),a.push(c),c=new i.patch_obj,l=0,d=f,u=h)}1!==g&&(u+=m.length),-1!==g&&(h+=m.length)}return l&&(this.patch_addContext_(c,d),a.push(c)),a},i.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=new i.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,e[n]=o}return e},i.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],o=0;o<t.length;o++){var s,a=t[o].start2+i,c=this.diff_text1(t[o].diffs),l=-1;if(c.length>this.Match_MaxBits?-1!=(s=this.match_main(e,c.substring(0,this.Match_MaxBits),a))&&(-1==(l=this.match_main(e,c.substring(c.length-this.Match_MaxBits),a+c.length-this.Match_MaxBits))||s>=l)&&(s=-1):s=this.match_main(e,c,a),-1==s)r[o]=!1,i-=t[o].length2-t[o].length1;else{r[o]=!0,i=s-a;var u;if(u=-1==l?e.substring(s,s+c.length):e.substring(s,l+this.Match_MaxBits),c==u)e=e.substring(0,s)+this.diff_text2(t[o].diffs)+e.substring(s+c.length);else{var h=this.diff_main(c,u,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(h)/c.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d,f=0,p=0;p<t[o].diffs.length;p++){var g=t[o].diffs[p];0!==g[0]&&(d=this.diff_xIndex(h,f)),1===g[0]?e=e.substring(0,s+d)+g[1]+e.substring(s+d):-1===g[0]&&(e=e.substring(0,s+d)+e.substring(s+this.diff_xIndex(h,f+g[1].length))),-1!==g[0]&&(f+=g[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,r]},i.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=t[0],o=r.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>o[0][1].length){var s=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=s,r.start2-=s,r.length1+=s,r.length2+=s}if(r=t[t.length-1],o=r.diffs,0==o.length||0!=o[o.length-1][0])o.push([0,n]),r.length1+=e,r.length2+=e;else if(e>o[o.length-1][1].length){var s=e-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),r.length1+=s,r.length2+=s}return n},i.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var o=r.start1,s=r.start2,a="";0!==r.diffs.length;){var c=new i.patch_obj,l=!0;for(c.start1=o-a.length,c.start2=s-a.length,""!==a&&(c.length1=c.length2=a.length,c.diffs.push([0,a]));0!==r.diffs.length&&c.length1<e-this.Patch_Margin;){var u=r.diffs[0][0],h=r.diffs[0][1];1===u?(c.length2+=h.length,s+=h.length,c.diffs.push(r.diffs.shift()),l=!1):-1===u&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*e?(c.length1+=h.length,o+=h.length,l=!1,c.diffs.push([u,h]),r.diffs.shift()):(h=h.substring(0,e-c.length1-this.Patch_Margin),c.length1+=h.length,o+=h.length,0===u?(c.length2+=h.length,s+=h.length):l=!1,c.diffs.push([u,h]),h==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(h.length))}a=this.diff_text2(c.diffs),a=a.substring(a.length-this.Patch_Margin);var d=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==d&&(c.length1+=d.length,c.length2+=d.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=d:c.diffs.push([0,d])),l||t.splice(++n,0,c)}}},i.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},i.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var s=n[r].match(o);if(!s)throw new Error("Invalid patch string: "+n[r]);var a=new i.patch_obj;for(e.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),r++;r<n.length;){var c=n[r].charAt(0);try{var l=decodeURI(n[r].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==c)a.diffs.push([-1,l]);else if("+"==c)a.diffs.push([1,l]);else if(" "==c)a.diffs.push([0,l]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+l)}r++}}return e},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,i=["@@ -"+t+" +"+e+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}i[r+1]=n+encodeURI(this.diffs[r][1])+"\n"}return i.join("").replace(/%20/g," ")},t.exports=i,t.exports.diff_match_patch=i,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0},function(t,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("./text_highlight_rules").TextHighlightRules,o=function t(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},t.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(o,r),o.getTagRule=function(t){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(t){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:t}},o.getEndRule=function(t){return{token:"comment.doc",regex:"\\*\\/",next:t}},e.DocCommentHighlightRules=o}),ace.define("ace/mode/jsx_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,e,n){var i=t("../lib/oop"),r=t("../lib/lang"),o=t("./doc_comment_highlight_rules").DocCommentHighlightRules,s=t("./text_highlight_rules").TextHighlightRules,a=function(){var t=r.arrayToMap("break|do|instanceof|typeof|case|else|new|var|catch|finally|return|void|continue|for|switch|default|while|function|this|if|throw|delete|in|try|class|extends|super|import|from|into|implements|interface|static|mixin|override|abstract|final|number|int|string|boolean|variant|log|assert".split("|")),e=r.arrayToMap("null|true|false|NaN|Infinity|__FILE__|__LINE__|undefined".split("|")),n=r.arrayToMap("debugger|with|const|export|let|private|public|yield|protected|extern|native|as|operator|__fake__|__readonly__".split("|"));this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},o.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:["storage.type","text","entity.name.function"],regex:"(function)(\\s+)([a-zA-Z_][a-zA-Z0-9_]*\\b)"},{token:function(i){return"this"==i?"variable.language":"function"==i?"storage.type":t.hasOwnProperty(i)||n.hasOwnProperty(i)?"keyword":e.hasOwnProperty(i)?"constant.language":/^_?[A-Z][a-zA-Z0-9_]*$/.test(i)?"language.support.class":"identifier"},regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|==|=|!=|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({<]"},{token:"paren.rparen",regex:"[\\])}>]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]},this.embedRules(o,"doc-",[o.getEndRule("start")])};i.inherits(a,s),e.JsxHighlightRules=a}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("../range").Range,r=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var n=t.getLine(e),r=n.match(/^(\s*\})/);if(!r)return 0;var o=r[1].length,s=t.findMatchingBracket({row:e,column:o});if(!s||s.row==e)return 0;var a=this.$getIndent(t.getLine(s.row));t.replace(new i(e,0,e,o-1),a)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(r.prototype),e.MatchingBraceOutdent=r}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,e,n){"use strict";var i=t("../../lib/oop"),r=t("../../range").Range,o=t("./fold_mode").FoldMode,s=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};i.inherits(s,o),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(t,e,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(t,e,n,i){var r=t.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(t,r,n);var o=r.match(this.foldingStartMarker);if(o){var s=o.index;if(o[1])return this.openingBracketBlock(t,o[1],n,s);var a=t.getCommentFoldRange(n,s+o[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(t,n):"all"!=e&&(a=null)),a}if("markbegin"!==e){var o=r.match(this.foldingStopMarker);if(o){var s=o.index+o[0].length;return o[1]?this.closingBracketBlock(t,o[1],n,s):t.getCommentFoldRange(n,s,-1)}}},this.getSectionRange=function(t,e){var n=t.getLine(e),i=n.search(/\S/),o=e,s=n.length;e+=1;for(var a=e,c=t.getLength();++e<c;){n=t.getLine(e);var l=n.search(/\S/);if(-1!==l){if(i>l)break;var u=this.getFoldWidgetRange(t,"all",e);if(u){if(u.start.row<=o)break;if(u.isMultiLine())e=u.end.row;else if(i==l)break}a=e}}return new r(o,s,a,t.getLine(a).length)},this.getCommentRegionBlock=function(t,e,n){for(var i=e.search(/\s*$/),o=t.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,c=1;++n<o;){e=t.getLine(n);var l=a.exec(e);if(l&&(l[1]?c--:c++,!c))break}var u=n;if(u>s)return new r(s,i,u,e.length)}}.call(s.prototype)}),ace.define("ace/mode/jsx",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/jsx_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,e,n){"use strict";function i(){this.HighlightRules=s,this.$outdent=new a,this.$behaviour=new c,this.foldingRules=new l}var r=t("../lib/oop"),o=t("./text").Mode,s=t("./jsx_highlight_rules").JsxHighlightRules,a=t("./matching_brace_outdent").MatchingBraceOutdent,c=t("./behaviour/cstyle").CstyleBehaviour,l=t("./folding/cstyle").FoldMode;r.inherits(i,o),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(t,e,n){var i=this.$getIndent(e),r=this.getTokenizer().getLineTokens(e,t),o=r.tokens;if(o.length&&"comment"==o[o.length-1].type)return i;if("start"==t){e.match(/^.*[\{\(\[]\s*$/)&&(i+=n)}return i},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.$id="ace/mode/jsx"}.call(i.prototype),e.Mode=i})},function(t,e){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(t,e,n){e.isDark=!0,e.cssClass="ace-monokai",e.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",t("../lib/dom").importCssString(e.cssText,e.cssClass)})},function(t,e){},function(t,e){}]);
//# sourceMappingURL=main.2594ac9e.js.map