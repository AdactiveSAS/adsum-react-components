!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=114)}([function(t,e,n){"use strict";t.exports=n(121)},function(t,e,n){"function"===typeof Symbol&&Symbol.iterator;t.exports=n(131)()},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;u=new Error(e.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!e(t))throw c("error","uncaught at check",n),new Error(n)}function i(t,e){return S.notUndef(t)&&C.call(t,e)}function o(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=f({},t),n=new Promise(function(t,n){e.resolve=t,e.reject=n});return e.promise=n,e}function s(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(e)},t)});return r[y]=function(){return clearTimeout(n)},r}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],i={name:n,next:t,throw:e,return:F};return r&&(i[m]=!0),"undefined"!==typeof Symbol&&(i[Symbol.iterator]=function(){return i}),i}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"===typeof window?console.log("redux-saga "+t+": "+e+"\n"+(n&&n.stack||n)):console[t](e,n)}function l(t,e){return function(){return t.apply(void 0,arguments)}}n.d(e,"u",function(){return p}),n.d(e,"e",function(){return g}),n.d(e,"b",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return w}),n.d(e,"o",function(){return x}),n.d(e,"r",function(){return E}),n.d(e,"l",function(){return A}),e.g=r,n.d(e,"n",function(){return S}),n.d(e,"s",function(){return M}),e.t=o,n.d(e,"f",function(){return T}),e.i=a,e.j=s,n.d(e,"v",function(){return k}),e.q=u,e.p=c,e.k=l,n.d(e,"w",function(){return P}),n.d(e,"m",function(){return L}),n.d(e,"h",function(){return R}),n.d(e,"x",function(){return D});var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d="function"===typeof Symbol&&"symbol"===h(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":h(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":h(t)},p=function(t){return"@@redux-saga/"+t},g=p("TASK"),m=p("HELPER"),v=p("MATCH"),y=p("CANCEL_PROMISE"),b=p("SAGA_ACTION"),w=p("SELF_CANCELLATION"),_=function(t){return function(){return t}},x=_(!0),E=function(){},A=function(t){return t},C=Object.prototype.hasOwnProperty,S={undef:function(t){return null===t||void 0===t},notUndef:function(t){return null!==t&&void 0!==t},func:function(t){return"function"===typeof t},number:function(t){return"number"===typeof t},string:function(t){return"string"===typeof t},array:Array.isArray,object:function(t){return t&&!S.array(t)&&"object"===("undefined"===typeof t?"undefined":d(t))},promise:function(t){return t&&S.func(t.then)},iterator:function(t){return t&&S.func(t.next)&&S.func(t.throw)},iterable:function(t){return t&&S.func(Symbol)?S.func(t[Symbol.iterator]):S.array(t)},task:function(t){return t&&t[g]},observable:function(t){return t&&S.func(t.subscribe)},buffer:function(t){return t&&S.func(t.isEmpty)&&S.func(t.take)&&S.func(t.put)},pattern:function(t){return t&&(S.string(t)||"symbol"===("undefined"===typeof t?"undefined":d(t))||S.func(t)||S.array(t))},channel:function(t){return t&&S.func(t.take)&&S.func(t.close)},helper:function(t){return t&&t[m]},stringableFunc:function(t){return S.func(t)&&i(t,"toString")}},M={assign:function(t,e){for(var n in e)i(e,n)&&(t[n]=e[n])}},T={from:function(t){var e=Array(t.length);for(var n in t)i(t,n)&&(e[n]=t[n]);return e}},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++t}}(),O=function(t){throw t},F=function(t){return{value:t,done:!0}},P=function(t,e){return t+" has been deprecated in favor of "+e+", please update your code"},L=function(t){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+t+"\n")},R=function(t,e){return(t?t+".":"")+"setContext(props): argument "+e+" is not a plain object"},D=function(t){return function(e){return t(Object.defineProperty(e,b,{value:!0}))}}},function(t,e,n){"use strict";function r(t){return"[object Array]"===C.call(t)}function i(t){return"[object ArrayBuffer]"===C.call(t)}function o(t){return"undefined"!==typeof FormData&&t instanceof FormData}function a(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function s(t){return"string"===typeof t}function u(t){return"number"===typeof t}function c(t){return"undefined"===typeof t}function l(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":x(t))}function h(t){return"[object Date]"===C.call(t)}function f(t){return"[object File]"===C.call(t)}function d(t){return"[object Blob]"===C.call(t)}function p(t){return"[object Function]"===C.call(t)}function g(t){return l(t)&&p(t.pipe)}function m(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function b(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==("undefined"===typeof t?"undefined":x(t))&&(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function w(){function t(t,n){"object"===x(e[n])&&"object"===("undefined"===typeof t?"undefined":x(t))?e[n]=w(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)b(arguments[n],t);return e}function _(t,e,n){return b(e,function(e,r){t[r]=n&&"function"===typeof e?E(e,n):e}),t}var x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=n(88),A=n(179),C=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:i,isBuffer:A,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:h,isFile:f,isBlob:d,isFunction:p,isStream:g,isURLSearchParams:m,isStandardBrowserEnv:y,forEach:b,merge:w,extend:_,trim:v}},function(t,e){var n,r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"===typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(f.g)(arguments[0],f.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),f.n.pattern(t))return F(g,{pattern:t});if(f.n.channel(t))return F(g,{channel:t});throw new Error("take(patternOrChannel): argument "+String(t)+" is not valid channel or a valid pattern")}function i(t,e){return arguments.length>1?(Object(f.g)(t,f.n.notUndef,"put(channel, action): argument channel is undefined"),Object(f.g)(t,f.n.channel,"put(channel, action): argument "+t+" is not a valid channel"),Object(f.g)(e,f.n.notUndef,"put(channel, action): argument action is undefined")):(Object(f.g)(t,f.n.notUndef,"put(action): argument action is undefined"),e=t,t=null),F(m,{channel:t,action:e})}function o(t){return F(v,t)}function a(t,e,n){Object(f.g)(e,f.n.notUndef,t+": argument fn is undefined");var r=null;if(f.n.array(e)){var i=e;r=i[0],e=i[1]}else if(e.fn){var o=e;r=o.context,e=o.fn}return r&&f.n.string(e)&&f.n.func(r[e])&&(e=r[e]),Object(f.g)(e,f.n.func,t+": argument "+e+" is not a function"),{context:r,fn:e,args:n}}function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return F(b,a("call",t,n))}function u(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return F(_,a("fork",t,n))}function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1)return o(e.map(function(t){return c(t)}));var r=e[0];return 1===e.length&&(Object(f.g)(r,f.n.notUndef,"cancel(task): argument task is undefined"),Object(f.g)(r,f.n.task,"cancel(task): argument "+r+" is not a valid Task object "+O)),F(E,r||f.d)}function l(t,e){return Object(f.g)(t,f.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(f.g)(e,f.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(f.g)(e,f.n.buffer,"actionChannel(pattern, buffer): argument "+e+" is not a valid buffer")),F(C,{pattern:t,buffer:e})}function h(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return u.apply(void 0,[d.b,t,e].concat(r))}e.h=r,e.g=i,e.b=o,e.d=s,e.f=u,e.e=c,e.a=l,e.i=h,n.d(e,"c",function(){return L});var f=n(4),d=n(83),p=Object(f.u)("IO"),g="TAKE",m="PUT",v="ALL",y="RACE",b="CALL",w="CPS",_="FORK",x="JOIN",E="CANCEL",A="SELECT",C="ACTION_CHANNEL",S="CANCELLED",M="FLUSH",T="GET_CONTEXT",k="SET_CONTEXT",O="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",F=function(t,e){var n;return n={},n[p]=!0,n[t]=e,n};r.maybe=function(){var t=r.apply(void 0,arguments);return t[g].maybe=!0,t};r.maybe;i.resolve=function(){var t=i.apply(void 0,arguments);return t[m].resolve=!0,t},i.sync=Object(f.k)(i.resolve,Object(f.w)("put.sync","put.resolve"));var P=function(t){return function(e){return e&&e[p]&&e[t]}},L={take:P(g),put:P(m),all:P(v),race:P(y),call:P(b),cps:P(w),fork:P(_),join:P(x),cancel:P(E),select:P(A),actionChannel:P(C),cancelled:P(S),flush:P(M),getContext:P(T),setContext:P(k)}},function(t,e,n){"use strict";function r(){function t(t){return n.push(t),function(){return Object(s.t)(n,t)}}function e(t){for(var e=n.slice(),r=0,i=e.length;r<i;r++)e[r](t)}var n=[];return{subscribe:t,emit:e}}function i(){function t(){if(a&&c.length)throw Object(s.m)("Cannot have a closed channel with pending takers");if(c.length&&!o.isEmpty())throw Object(s.m)("Cannot have pending takers with non empty buffer")}function e(e){if(t(),Object(s.g)(e,s.n.notUndef,p),!a){if(!c.length)return o.put(e);for(var n=0;n<c.length;n++){var r=c[n];if(!r[s.b]||r[s.b](e))return c.splice(n,1),r(e)}}}function n(e){t(),Object(s.g)(e,s.n.func,"channel.take's callback must be a function"),a&&o.isEmpty()?e(h):o.isEmpty()?(c.push(e),e.cancel=function(){return Object(s.t)(c,e)}):e(o.take())}function r(e){if(t(),Object(s.g)(e,s.n.func,"channel.flush' callback must be a function"),a&&o.isEmpty())return void e(h);e(o.flush())}function i(){if(t(),!a&&(a=!0,c.length)){var e=c;c=[];for(var n=0,r=e.length;n<r;n++)e[n](h)}}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.a.fixed(),a=!1,c=[];return Object(s.g)(o,s.n.buffer,d),{take:n,put:e,flush:r,close:i,get __takers__(){return c},get __closed__(){return a}}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a.none(),n=arguments[2];arguments.length>2&&Object(s.g)(n,s.n.func,"Invalid match function passed to eventChannel");var r=i(e),o=function(){r.__closed__||(a&&a(),r.close())},a=t(function(t){if(f(t))return void o();n&&!n(t)||r.put(t)});if(r.__closed__&&a(),!s.n.func(a))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:r.take,flush:r.flush,close:o}}function a(t){var e=o(function(e){return t(function(t){if(t[s.c])return void e(t);Object(c.a)(function(){return e(t)})})});return l({},e,{take:function(t,n){arguments.length>1&&(Object(s.g)(n,s.n.func,"channel.take's matcher argument must be a function"),t[s.b]=n),e.take(t)}})}n.d(e,"a",function(){return h}),n.d(e,"d",function(){return f}),e.b=r,e.c=o,e.e=a;var s=n(4),u=n(21),c=n(80),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h={type:"@@redux-saga/CHANNEL_END"},f=function(t){return t&&"@@redux-saga/CHANNEL_END"===t.type},d="invalid buffer passed to channel factory function",p="Saga was provided with an undefined action"},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=null,n=null;switch(t.getType()){case E.SiteObject:case E.FloorObject:e=t;break;case E.BuildingObject:e=t.site,n=t._mesh.position.clone();break;case E.SpaceObject:case E.UserObject:e=t.parent,n=t._mesh.position.clone();break;case E.LabelObject:case E.LabelTextObject:case E.LabelImageObject:n=t._mesh.position.clone();var r=t.parent;r.isSpace?(e=r.parent,n.applyMatrix4(r.matrix)):r.isBuilding?(e=r.site,n.applyMatrix4(r.matrix)):e=r;break;default:throw new Error("Unexpected")}return{ground:e,groundPosition:n}}function u(t,e,n){var r=t._mesh.localToWorld(e.clone());return r.setZ(t.isSite?0:t.altitude),n.adsumToUtm(r)}function c(){function t(t,n,r){if(ft=(new DOMParser).parseFromString(t,"text/xml"),n=n||pt,void 0!==r){var i=r.split("/");i.pop(),wt=(i.length<1?".":i.join("/"))+"/"}!function(){var t=ft.querySelectorAll("asset")[0];if(t&&t.childNodes)for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"unit":var r=n.getAttribute("meter");r&&(Pt=parseFloat(r));break;case"up_axis":Lt=n.textContent.charAt(0)}}}(),function(){if(!0!==Ft.convertUpAxis||Lt===Ft.upAxis)Rt=null;else switch(Lt){case"X":Rt="Y"===Ft.upAxis?"XtoY":"XtoZ";break;case"Y":Rt="X"===Ft.upAxis?"YtoX":"YtoZ";break;case"Z":Rt="X"===Ft.upAxis?"ZtoX":"ZtoY"}}(),Et=e("library_images image",h,"image"),Mt=e("library_materials material",F,"material"),Tt=e("library_effects effect",B,"effect"),St=e("library_geometries geometry",_,"geometry"),kt=e("library_cameras camera",z,"camera"),Ot=e("library_lights light",V,"light"),Ct=e("library_controllers controller",f,"controller"),At=e("library_animations animation",N,"animation"),yt=e("library_visual_scenes visual_scene",g,"visual_scene"),bt=e("library_kinematics_models kinematics_model",G,"kinematics_model"),_t=[],xt=[],lt=function(){var t=ft.querySelectorAll("scene instance_visual_scene")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return yt[e.length>0?e:"visual_scene0"]}return null}(),dt=new st.Scene;for(var o=0;o<lt.nodes.length;o++)dt.add(a(lt.nodes[o]));dt.scale.multiplyScalar(Pt),mt=[],function t(e){var n=lt.getChildById(e.colladaId,!0),r=null;if(n&&n.keys){r={fps:60,hierarchy:[{node:n,keys:n.keys,sids:n.sids}],node:e,name:"animation_"+e.name,length:0},mt.push(r);for(var i=0,o=n.keys.length;i<o;i++)r.length=Math.max(r.length,n.keys[i].time)}else r={hierarchy:[{keys:[],sids:[]}]};for(var i=0,o=e.children.length;i<o;i++)for(var a=t(e.children[i]),s=0,u=a.hierarchy.length;s<u;s++)r.hierarchy.push({keys:[],sids:[]});return r}(dt),ht=function(){var t=ft.querySelectorAll("instance_kinematics_model")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return bt[e.length>0?e:"kinematics_model0"]}return null}(),function(){if(ht&&0===ht.joints.length)return void(vt=void 0);var t={};vt={joints:ht&&ht.joints,getJointValue:function(e){var n=t[e];if(n)return n.position;console.log("getJointValue: joint "+e+" doesn't exist")},setJointValue:function(e,r){var i=t[e];if(i){var o=i.joint;if(r>o.limits.max||r<o.limits.min)console.log("setJointValue: joint "+e+" value "+r+" outside of limits (min: "+o.limits.min+", max: "+o.limits.max+")");else if(o.static)console.log("setJointValue: joint "+e+" is static");else{var a=i.node,s=o.axis,u=i.transforms,c=new st.Matrix4,l=new st.Matrix4;for(n=0;n<u.length;n++){var h=u[n];if(h.sid&&-1!==h.sid.indexOf("joint"+e))switch(o.type){case"revolute":c.multiply(l.makeRotationAxis(s,st.Math.degToRad(r)));break;case"prismatic":c.multiply(l.makeTranslation(s.x*r,s.y*r,s.z*r));break;default:console.warn("setJointValue: unknown joint type: "+o.type)}else switch(h.type){case"matrix":c.multiply(h.obj);break;case"translate":c.multiply(l.makeTranslation(h.obj.x,h.obj.y,h.obj.z));break;case"rotate":c.multiply(l.makeRotationAxis(h.obj,h.angle))}}var f=c.elements,d=Array.prototype.slice.call(f),p=[d[0],d[4],d[8],d[12],d[1],d[5],d[9],d[13],d[2],d[6],d[10],d[14],d[3],d[7],d[11],d[15]];a.matrix.set.apply(a.matrix,p),a.matrix.decompose(a.position,a.quaternion,a.scale),t[e].position=r}}else console.log("setJointValue: joint "+e+" doesn't exist")}};var e=ft.querySelector("scene instance_kinematics_scene");if(e)for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"bind_joint_axis":var i=r.getAttribute("target").split("/").pop(),o=r.querySelector("axis param").textContent,a=parseInt(o.split("joint").pop().split(".")[0]),s=ft.querySelector('[sid="'+i+'"]');if(s){var u=s.parentElement;!function(e,n){var r=n.getAttribute("id"),i=lt.getChildById(r,!0),o=ht.joints[e];dt.traverse(function(n){n.colladaId==r&&(t[e]={node:n,transforms:i.transforms,joint:o,position:o.zeroPosition})})}(a,u)}}}}();var s={scene:dt,morphs:_t,skins:xt,animations:mt,kinematics:vt,dae:{images:Et,materials:Mt,cameras:kt,lights:Ot,effects:Tt,geometries:St,controllers:Ct,animations:At,visualScenes:yt,visualScene:lt,scene:lt,kinematicsModels:bt,kinematicsModel:ht}};return n&&n(s),s}function e(t,e,n){for(var r=ft.querySelectorAll(t),i={},o=0,a=r.length,s=0;s<a;s++){var u=r[s],c=(new e).parse(u);c.id&&0!==c.id.length||(c.id=n+o++),i[c.id]=c}return i}function n(t,e){var n=e instanceof y?Ct[e.url]:e;if(!n||!n.morph)return void console.log("could not find morph controller!");for(var r=n.morph,i=0;i<r.targets.length;i++){var o=r.targets[i],a=St[o];if(a.mesh&&a.mesh.primitives&&a.mesh.primitives.length){var s=a.mesh.primitives[0].geometry;s.vertices.length===t.vertices.length&&t.morphTargets.push({name:"target_1",vertices:s.vertices})}}t.morphTargets.push({name:"target_Z",vertices:t.vertices})}function r(t,e,n,i){if(t.world=t.world||new st.Matrix4,t.localworld=t.localworld||new st.Matrix4,t.world.copy(t.matrix),t.localworld.copy(t.matrix),t.channels&&t.channels.length){var o=t.channels[0].sampler.output[n];o instanceof st.Matrix4&&(t.world.copy(o),t.localworld.copy(o),0===n&&t.matrix.copy(o))}i&&t.world.multiplyMatrices(i,t.world),e.push(t);for(var a=0;a<t.nodes.length;a++)r(t.nodes[a],e,n,t.world)}function i(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=-1;if("JOINT"==r.type){for(var o=0;o<e.joints.length;o++)if(r.sid===e.joints[o]){i=o;break}if(i>=0){var a=e.invBindMatrices[i];for(r.invBindMatrix=a,r.skinningMatrix=new st.Matrix4,r.skinningMatrix.multiplyMatrices(r.world,a),r.animatrix=new st.Matrix4,r.animatrix.copy(r.localworld),r.weights=[],o=0;o<e.weights.length;o++)for(var s=0;s<e.weights[o].length;s++){var u=e.weights[o][s];u.joint===i&&r.weights.push(u)}}else console.warn("ColladaLoader: Could not find joint '"+r.sid+"'."),r.skinningMatrix=new st.Matrix4,r.weights=[]}}}function o(t,e,n){void 0===n&&(n=40);var o=Ct[e.url];if(!o||!o.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!e.skeleton||!e.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var a=function(){var t=void 0,e=1e6,n=-e,r=0;for(var i in At){var o=At[i];t=t||o.id;for(var a=0;a<o.sampler.length;a++){var s=o.sampler[a];s.create(),e=Math.min(e,s.startTime),n=Math.max(n,s.endTime),r=Math.max(r,s.input.length)}}return{start:e,end:n,frames:r,ID:t}}(),s=lt.getChildById(e.skeleton[0],!0)||lt.getChildBySid(e.skeleton[0],!0),u=function(t){var e=[];return function t(e,n,r){var i={};i.name=n.sid,i.parent=e,i.matrix=n.matrix;var o=[new st.Vector3,new st.Quaternion,new st.Vector3];i.matrix.decompose(o[0],o[1],o[2]),i.pos=[o[0].x,o[0].y,o[0].z],i.scl=[o[2].x,o[2].y,o[2].z],i.rotq=[o[1].x,o[1].y,o[1].z,o[1].w],r.push(i);for(var a in n.nodes)t(n.sid,n.nodes[a],r)}(-1,t,e),e}(s),c=o.skin.joints,l=[],h=0;h<c.length;h++)for(var f=0;f<u.length;f++)u[f].name===c[h]&&(l[h]=u[f]);for(h=0;h<l.length;h++)for(f=0;f<l.length;f++)l[h].parent===l[f].name&&(l[h].parent=f);for(new st.Vector3,h=0;h<t.vertices.length;h++)t.vertices[h].applyMatrix4(o.skin.bindShapeMatrix);var d=[],p=[],g=o.skin.weights;for(h=0;h<g.length;h++){var m=new st.Vector4(g[h][0]?g[h][0].joint:0,g[h][1]?g[h][1].joint:0,g[h][2]?g[h][2].joint:0,g[h][3]?g[h][3].joint:0),v=new st.Vector4(g[h][0]?g[h][0].weight:0,g[h][1]?g[h][1].weight:0,g[h][2]?g[h][2].weight:0,g[h][3]?g[h][3].weight:0);d.push(m),p.push(v)}t.skinIndices=d,t.skinWeights=p,t.bones=l;var y={name:a.ID,fps:30,length:a.frames/30,hierarchy:[]};for(f=0;f<l.length;f++)y.hierarchy.push({parent:l[f].parent,name:l[f].name,keys:[]});for(console.log("ColladaLoader:",a.ID+" has "+l.length+" bones."),function(t,e,n){var o=[];r(e,o,-1),i(o,n.skin);for(var a=new st.Vector3,s=[],u=0;u<t.vertices.length;u++)s.push(new st.Vector3);for(u=0;u<o.length;u++)if("JOINT"==o[u].type)for(var c=0;c<o[u].weights.length;c++){var l=o[u].weights[c],h=l.index,f=l.weight,d=t.vertices[h],p=s[h];a.x=d.x,a.y=d.y,a.z=d.z,a.applyMatrix4(o[u].skinningMatrix),p.x+=a.x*f,p.y+=a.y*f,p.z+=a.z*f}for(u=0;u<t.vertices.length;u++)t.vertices[u]=s[u]}(t,s,o),n=0;n<a.frames;n++){var b=[];for(r(s,b,n),i(b,o.skin),h=0;h<b.length;h++)for(f=0;f<y.hierarchy.length;f++)if(y.hierarchy[f].name===b[h].sid){var w={};w.time=n/30,w.matrix=b[h].animatrix,0===n&&(b[h].matrix=w.matrix);var _=[new st.Vector3,new st.Quaternion,new st.Vector3];w.matrix.decompose(_[0],_[1],_[2]),w.pos=[_[0].x,_[0].y,_[0].z],w.scl=[_[2].x,_[2].y,_[2].z],w.rot=_[1],y.hierarchy[f].keys.push(w)}t.animation=y}}function a(t,e){var r=new st.Object3D,i=void 0,s=void 0,u=void 0,c=void 0;for(u=0;u<t.controllers.length;u++){var l=Ct[t.controllers[u].url];switch(l.type){case"skin":if(St[l.skin.source])(f=new w).url=l.skin.source,f.instance_material=t.controllers[u].instance_material,t.geometries.push(f),i=t.controllers[u];else if(Ct[l.skin.source]){var h=Ct[l.skin.source];s=h,h.morph&&St[h.morph.source]&&((f=new w).url=h.morph.source,f.instance_material=t.controllers[u].instance_material,t.geometries.push(f))}break;case"morph":var f;St[l.morph.source]&&((f=new w).url=l.morph.source,f.instance_material=t.controllers[u].instance_material,t.geometries.push(f),s=t.controllers[u]),console.log("ColladaLoader: Morph-controller partially supported.")}}var d={};for(u=0;u<t.geometries.length;u++){var p,g=t.geometries[u],m=g.instance_material,v=St[g.url],y={},b=[],_=0;if(v){if(!v.mesh||!v.mesh.primitives)continue;if(0===r.name.length&&(r.name=v.id),m)for(c=0;c<m.length;c++){var x=m[c],E=Mt[x.target],A=E.instance_effect.url,C=Tt[A].shader.material;if(v.doubleSided){if(!(x.symbol in d)){var S=C.clone();S.side=st.DoubleSide,d[x.symbol]=S}C=d[x.symbol]}C.opacity=C.opacity?C.opacity:1,y[x.symbol]=_,b.push(C),(p=C).name=null===E.name||""===E.name?E.id:E.name,_++}var M,T=p||new st.MeshLambertMaterial({color:14540253,side:v.doubleSided?st.DoubleSide:st.FrontSide}),k=v.mesh.geometry3js;if(_>1)for(T=new st.MultiMaterial(b),c=0;c<k.faces.length;c++){var O=k.faces[c];O.materialIndex=y[O.daeMaterial]}void 0!==i?(o(k,i),k.morphTargets.length>0?(T.morphTargets=!0,T.skinning=!1):(T.morphTargets=!1,T.skinning=!0),(M=new st.SkinnedMesh(k,T,!1)).name="skin_"+xt.length,xt.push(M)):void 0!==s?(n(k,s),T.morphTargets=!0,(M=new st.Mesh(k,T)).name="morph_"+_t.length,_t.push(M)):M=!0===k.isLineStrip?new st.Line(k):new st.Mesh(k,T),r.add(M)}}for(u=0;u<t.cameras.length;u++){var F=t.cameras[u],P=kt[F.url],L=new st.PerspectiveCamera(P.yfov,parseFloat(P.aspect_ratio),parseFloat(P.znear),parseFloat(P.zfar));r.add(L)}for(u=0;u<t.lights.length;u++){var R=null,D=t.lights[u],B=Ot[D.url];if(B&&B.technique){var I=B.color.getHex(),N=B.intensity,j=B.distance,U=B.falloff_angle;switch(B.technique){case"directional":(R=new st.DirectionalLight(I,N,j)).position.set(0,0,1);break;case"point":R=new st.PointLight(I,N,j);break;case"spot":(R=new st.SpotLight(I,N,j,U)).position.set(0,0,1);break;case"ambient":R=new st.AmbientLight(I)}}R&&r.add(R)}if(r.name=t.name||t.id||"",r.colladaId=t.id||"",r.layer=t.layer||"",r.matrix=t.matrix,r.matrix.decompose(r.position,r.quaternion,r.scale),Ft.centerGeometry&&r.geometry){var $=new st.Vector3;object.geometry.computeBoundingBox(),object.geometry.boundingBox.getCenter($),r.geometry.center(),$.multiply(r.scale),$.applyQuaternion(r.quaternion),r.position.add($)}for(u=0;u<t.nodes.length;u++)r.add(a(t.nodes[u],t));return r}function s(t){for(var e=ft.querySelectorAll("library_nodes node"),n=0;n<e.length;n++){var r=e[n].attributes.getNamedItem("id");if(r&&r.value===t)return e[n]}}function u(t,e){for(var n=null,r=0,i=t.length;r<i&&null===n;r++){var o=t[r];if(o.time===e)n=o;else if(o.time>e)break}return n}function c(t,e){for(var n=-1,r=0,i=t.length;r<i&&-1===n;r++)t[r].time>=e&&(n=r);return n}function l(t,e,n,r){var i=function(t,e,n){for(n=n>=0?n:n+t.length;n>=0;n--){var r=t[n];if(r.hasTarget(e))return r}return null}(t,r,n?n-1:0),o=function(t,e,n){for(;n<t.length;n++){var r=t[n];if(r.hasTarget(e))return r}return null}(t,r,n+1);if(i&&o){var a=void 0,s=(e.time-i.time)/(o.time-i.time),u=i.getTarget(r),c=o.getTarget(r).data,l=u.data;if("matrix"===u.type)a=l;else if(l.length){a=[];for(var h=0;h<l.length;++h)a[h]=l[h]+(c[h]-l[h])*s}else a=l+(c-l)*s;e.addTarget(r,u.transform,u.member,a)}}function h(){this.id="",this.init_from=""}function f(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function d(){this.method=null,this.source=null,this.targets=null,this.weights=null}function p(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function g(){this.id="",this.name="",this.nodes=[],this.scene=new st.Group}function m(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new st.Matrix4}function v(){this.sid="",this.type="",this.data=[],this.obj=null}function y(){this.url="",this.skeleton=[],this.instance_material=[]}function b(){this.symbol="",this.target=""}function w(){this.url="",this.instance_material=[]}function _(){this.id="",this.mesh=null}function x(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function E(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new st.Geometry}function A(){E.call(this),this.vcount=[]}function C(){E.call(this),this.vcount=1}function S(){E.call(this),this.vcount=3}function M(){this.source="",this.count=0,this.stride=0,this.params=[]}function T(){this.input={}}function k(){this.semantic="",this.offset=0,this.source="",this.set=0}function O(t){this.id=t,this.type=null}function F(){this.id="",this.name="",this.instance_effect=null}function P(){this.color=new st.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function L(t,e){this.type=t,this.effect=e,this.material=null}function R(t){this.effect=t,this.init_from=null,this.format=null}function D(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function B(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function I(){this.url=""}function N(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function j(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function U(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function $(t){this.targets=[],this.time=t}function z(){this.id="",this.name="",this.technique=""}function H(){this.url=""}function V(){this.id="",this.name="",this.technique=""}function W(){this.url=""}function G(){this.id="",this.name="",this.joints=[],this.links=[]}function q(){this.sid="",this.name="",this.axis=new st.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function X(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function Y(){this.joint="",this.transforms=[],this.links=[]}function K(t){var e=t.getAttribute("id");return void 0!=gt[e]?gt[e]:(gt[e]=new O(e).parse(t),gt[e])}function Z(t){for(var e=tt(t),n=[],r=0,i=e.length;r<i;r++)n.push(!("true"!==e[r]&&"1"!==e[r]));return n}function J(t){for(var e=tt(t),n=[],r=0,i=e.length;r<i;r++)n.push(parseFloat(e[r]));return n}function Q(t){for(var e=tt(t),n=[],r=0,i=e.length;r<i;r++)n.push(parseInt(e[r],10));return n}function tt(t){return t.length>0?function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}(t).split(/\s+/):[]}function et(t,e,n){return t.hasAttribute(e)?parseInt(t.getAttribute(e),10):n}function nt(t,e){(new st.ImageLoader).load(e,function(e){t.image=e,t.needsUpdate=!0})}function rt(t,e){t.doubleSided=!1;var n=e.querySelectorAll("extra double_sided")[0];n&&n&&1===parseInt(n.textContent,10)&&(t.doubleSided=!0)}function it(t,e){if(!0===Ft.convertUpAxis&&Lt!==Ft.upAxis)switch(Rt){case"XtoY":var n=t[0];t[0]=e*t[1],t[1]=n;break;case"XtoZ":n=t[2],t[2]=t[1],t[1]=t[0],t[0]=n;break;case"YtoX":n=t[0],t[0]=t[1],t[1]=e*n;break;case"YtoZ":n=t[1],t[1]=e*t[2],t[2]=n;break;case"ZtoX":n=t[0],t[0]=t[1],t[1]=t[2],t[2]=n;break;case"ZtoY":n=t[1],t[1]=t[2],t[2]=e*n}}function ot(t,e){var n=[t[e],t[e+1],t[e+2]];return it(n,-1),new st.Vector3(n[0],n[1],n[2])}function at(t){if(Ft.convertUpAxis){var e=[t[0],t[4],t[8]];it(e,-1),t[0]=e[0],t[4]=e[1],t[8]=e[2],it(e=[t[1],t[5],t[9]],-1),t[1]=e[0],t[5]=e[1],t[9]=e[2],it(e=[t[2],t[6],t[10]],-1),t[2]=e[0],t[6]=e[1],t[10]=e[2],it(e=[t[0],t[1],t[2]],-1),t[0]=e[0],t[1]=e[1],t[2]=e[2],it(e=[t[4],t[5],t[6]],-1),t[4]=e[0],t[5]=e[1],t[6]=e[2],it(e=[t[8],t[9],t[10]],-1),t[8]=e[0],t[9]=e[1],t[10]=e[2],it(e=[t[3],t[7],t[11]],-1),t[3]=e[0],t[7]=e[1],t[11]=e[2]}return(new st.Matrix4).set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function ut(t){return t>-1&&t<3&&(t={X:0,Y:1,Z:2}[t=ct(["X","Y","Z"][t])]),t}function ct(t){if(Ft.convertUpAxis)switch(t){case"X":switch(Rt){case"XtoY":case"XtoZ":case"YtoX":t="Y";break;case"ZtoX":t="Z"}break;case"Y":switch(Rt){case"XtoY":case"YtoX":case"ZtoX":t="X";break;case"XtoZ":case"YtoZ":case"ZtoY":t="Z"}break;case"Z":switch(Rt){case"XtoZ":t="X";break;case"YtoZ":case"ZtoX":case"ZtoY":t="Y"}}return t}var lt=void 0,ht=void 0,ft=null,dt=null,pt=null,gt={},mt=void 0,vt=void 0,yt=void 0,bt=void 0,wt=void 0,_t=void 0,xt=void 0,Et={},At={},Ct={},St={},Mt={},Tt={},kt={},Ot={},Ft={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},Pt=1,Lt="Y",Rt=null;return h.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];"init_from"===n.nodeName&&(this.init_from=n.textContent)}return this},f.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.type="none";for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"skin":this.skin=(new p).parse(n),this.type=n.nodeName;break;case"morph":this.morph=(new d).parse(n),this.type=n.nodeName}}return this},d.prototype.parse=function(t){var e={},n=void 0,r=[];for(this.method=t.getAttribute("method"),this.source=t.getAttribute("source").replace(/^#/,""),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"source":e[(a=(new O).parse(i)).id]=a;break;case"targets":r=this.parseInputs(i);break;default:console.log(i.nodeName)}}for(n=0;n<r.length;n++){var o=r[n],a=e[o.source];switch(o.semantic){case"MORPH_TARGET":this.targets=a.read();break;case"MORPH_WEIGHT":this.weights=a.read()}}return this},d.prototype.parseInputs=function(t){for(var e=[],n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"input":e.push((new k).parse(r))}}return e},p.prototype.parse=function(t){var e={},n=void 0,r=void 0;this.source=t.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(1==o.nodeType)switch(o.nodeName){case"bind_shape_matrix":var a=J(o.textContent);this.bindShapeMatrix=at(a);break;case"source":var s=(new O).parse(o);e[s.id]=s;break;case"joints":n=o;break;case"vertex_weights":r=o;break;default:console.log(o.nodeName)}}return this.parseJoints(n,e),this.parseWeights(r,e),this},p.prototype.parseJoints=function(t,e){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"input":var i=(new k).parse(r),o=e[i.source];"JOINT"===i.semantic?this.joints=o.read():"INV_BIND_MATRIX"===i.semantic&&(this.invBindMatrices=o.read())}}},p.prototype.parseWeights=function(t,e){for(var n=void 0,r=void 0,i=[],o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(1==a.nodeType)switch(a.nodeName){case"input":i.push((new k).parse(a));break;case"v":n=Q(a.textContent);break;case"vcount":r=Q(a.textContent)}}var s=0;for(o=0;o<r.length;o++){for(var u=r[o],c=[],l=0;l<u;l++){for(var h={},f=0;f<i.length;f++){var d=i[f],p=n[s+d.offset];switch(d.semantic){case"JOINT":h.joint=p;break;case"WEIGHT":h.weight=e[d.source].data[p]}}c.push(h),s+=i.length}for(l=0;l<c.length;l++)c[l].index=o;this.weights.push(c)}},g.prototype.getChildById=function(t,e){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildById(t,e);if(r)return r}return null},g.prototype.getChildBySid=function(t,e){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildBySid(t,e);if(r)return r}return null},g.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.nodes=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push((new m).parse(n))}}return this},m.prototype.getChannelForTransform=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e],r=n.target.split("/");r.shift();var i,o=r.shift(),a=o.indexOf(".")>=0,s=o.indexOf("(")>=0;if(a)o=(r=o.split(".")).shift();else if(s){o=(i=o.split("(")).shift();for(var u=0;u<i.length;u++)i[u]=parseInt(i[u].replace(/\)/,""))}if(o===t)return n.info={sid:o,dotSyntax:a,arrSyntax:s,arrIndices:i},n}return null},m.prototype.getChildById=function(t,e){if(this.id===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildById(t,e);if(r)return r}return null},m.prototype.getChildBySid=function(t,e){if(this.sid===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildBySid(t,e);if(r)return r}return null},m.prototype.getTransformBySid=function(t){for(var e=0;e<this.transforms.length;e++)if(this.transforms[e].sid===t)return this.transforms[e];return null},m.prototype.parse=function(t){var e=void 0;this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.type=t.getAttribute("type"),this.layer=t.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new st.Matrix4;for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"node":this.nodes.push((new m).parse(r));break;case"instance_camera":this.cameras.push((new H).parse(r));break;case"instance_controller":this.controllers.push((new y).parse(r));break;case"instance_geometry":this.geometries.push((new w).parse(r));break;case"instance_light":this.lights.push((new W).parse(r));break;case"instance_node":var i=s(e=r.getAttribute("url").replace(/^#/,""));i&&this.nodes.push((new m).parse(i));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new v).parse(r));break;case"extra":break;default:console.log(r.nodeName)}}return this.channels=function(t){var e=[],n=1e6,r=-1e6;for(var i in At)for(var o=At[i],a=0;a<o.channel.length;a++){var s=o.channel[a],u=o.sampler[a];(i=s.target.split("/")[0])==t.id&&(u.create(),s.sampler=u,n=Math.min(n,u.startTime),r=Math.max(r,u.endTime),e.push(s))}return e.length&&(t.startTime=n,t.endTime=r),e}(this),function(t){if(t.channels&&t.channels.length){for(var e=[],n=[],r=0,i=t.channels.length;r<i;r++){var o,a=t.channels[r],s=a.fullSid,h=a.sampler,f=h.input,d=t.getTransformBySid(a.sid);if(a.arrIndices){o=[];for(var p=0,g=a.arrIndices.length;p<g;p++)o[p]=ut(a.arrIndices[p])}else o=ct(a.member);if(d)for(-1===n.indexOf(s)&&n.push(s),p=0,g=f.length;p<g;p++){var m=f[p],v=h.getData(d.type,p,o);if(!(w=u(e,m))){w=new $(m);var y=c(e,m);e.splice(-1===y?e.length:y,0,w)}w.addTarget(s,d,o,v)}else console.log('Could not find transform "'+a.sid+'" in node '+t.id)}for(r=0;r<n.length;r++){var b=n[r];for(p=0;p<e.length;p++){var w;(w=e[p]).hasTarget(b)||l(e,w,p,b)}}t.keys=e,t.sids=n}}(this),this.updateMatrix(),this},m.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(this.matrix)},v.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=J(t.textContent),this.convert(),this},v.prototype.convert=function(){switch(this.type){case"matrix":this.obj=at(this.data);break;case"rotate":this.angle=st.Math.degToRad(this.data[3]);case"translate":it(this.data,-1),this.obj=new st.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":it(this.data,1),this.obj=new st.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},v.prototype.apply=function(){var t=new st.Matrix4;return function(e){switch(this.type){case"matrix":e.multiply(this.obj);break;case"translate":e.multiply(t.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":e.multiply(t.makeRotationAxis(this.obj,this.angle));break;case"scale":e.scale(this.obj)}}}(),v.prototype.update=function(t,e){var n=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(e)if(1===e.length)switch(e[0]){case 0:this.obj.n11=t[0],this.obj.n21=t[1],this.obj.n31=t[2],this.obj.n41=t[3];break;case 1:this.obj.n12=t[0],this.obj.n22=t[1],this.obj.n32=t[2],this.obj.n42=t[3];break;case 2:this.obj.n13=t[0],this.obj.n23=t[1],this.obj.n33=t[2],this.obj.n43=t[3];break;case 3:this.obj.n14=t[0],this.obj.n24=t[1],this.obj.n34=t[2],this.obj.n44=t[3]}else if(2===e.length){var r="n"+(e[0]+1)+(e[1]+1);this.obj[r]=t}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(t);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;case"ANGLE":this.angle=st.Math.degToRad(t);break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2],this.angle=st.Math.degToRad(t[3])}}},y.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"skeleton":this.skeleton.push(n.textContent.replace(/^#/,""));break;case"bind_material":for(var r=n.querySelectorAll("instance_material"),i=0;i<r.length;i++){var o=r[i];this.instance_material.push((new b).parse(o))}}}return this},b.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this},w.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType&&"bind_material"===n.nodeName){for(var r=n.querySelectorAll("instance_material"),i=0;i<r.length;i++){var o=r[i];this.instance_material.push((new b).parse(o))}break}}return this},_.prototype.parse=function(t){this.id=t.getAttribute("id"),rt(this,t);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"mesh":this.mesh=new x(this).parse(n)}}return this},x.prototype.parse=function(t){this.primitives=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"source":K(n);break;case"vertices":this.vertices=(new T).parse(n);break;case"linestrips":this.primitives.push((new C).parse(n));break;case"triangles":this.primitives.push((new S).parse(n));break;case"polygons":this.primitives.push((new E).parse(n));break;case"polylist":this.primitives.push((new A).parse(n))}}if(this.geometry3js=new st.Geometry,null===this.vertices)return this;var r=gt[this.vertices.input.POSITION.source].data;for(e=0;e<r.length;e+=3)this.geometry3js.vertices.push(ot(r,e).clone());for(e=0;e<this.primitives.length;e++){var i=this.primitives[e];i.setVertices(this.vertices),this.handlePrimitive(i,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},x.prototype.handlePrimitive=function(t,e){if(t instanceof C)return void(e.isLineStrip=!0);var n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=t.p,h=t.inputs,f=0,d=0,p=[];for(n=0;n<h.length;n++){var g=(i=h[n]).offset+1;switch(d=d<g?g:d,i.semantic){case"TEXCOORD":p.push(i.set)}}for(var m=0;m<l.length;++m)for(var v=l[m],y=0;y<v.length;){var b=[],w=[],_=null,x=[];for(c=t.vcount?t.vcount.length?t.vcount[f++]:t.vcount:v.length/d,n=0;n<c;n++)for(r=0;r<h.length;r++)switch(i=h[r],s=gt[i.source],a=(o=v[y+n*d+i.offset])*(u=s.accessor.params.length),i.semantic){case"VERTEX":b.push(o);break;case"NORMAL":w.push(ot(s.data,a));break;case"TEXCOORD":void 0===(_=_||{})[i.set]&&(_[i.set]=[]),_[i.set].push(new st.Vector2(s.data[a],s.data[a+1]));break;case"COLOR":x.push((new st.Color).setRGB(s.data[a],s.data[a+1],s.data[a+2]))}if(0===w.length)if(i=this.vertices.input.NORMAL){u=(s=gt[i.source]).accessor.params.length;for(var E=0,A=b.length;E<A;E++)w.push(ot(s.data,b[E]*u))}else e.calcNormals=!0;if(!_&&(_={},i=this.vertices.input.TEXCOORD))for(p.push(i.set),u=(s=gt[i.source]).accessor.params.length,E=0,A=b.length;E<A;E++)a=b[E]*u,void 0===_[i.set]&&(_[i.set]=[]),_[i.set].push(new st.Vector2(s.data[a],1-s.data[a+1]));if(0===x.length&&(i=this.vertices.input.COLOR))for(u=(s=gt[i.source]).accessor.params.length,E=0,A=b.length;E<A;E++)a=b[E]*u,x.push((new st.Color).setRGB(s.data[a],s.data[a+1],s.data[a+2]));var S,M,T=null,k=[];if(3===c)k.push(new st.Face3(b[0],b[1],b[2],w,x.length?x:new st.Color));else if(4===c)k.push(new st.Face3(b[0],b[1],b[3],w.length?[w[0].clone(),w[1].clone(),w[3].clone()]:[],x.length?[x[0],x[1],x[3]]:new st.Color)),k.push(new st.Face3(b[1],b[2],b[3],w.length?[w[1].clone(),w[2].clone(),w[3].clone()]:[],x.length?[x[1],x[2],x[3]]:new st.Color));else if(c>4&&Ft.subdivideFaces){var O=x.length?x:new st.Color;for(r=1;r<c-1;)k.push(new st.Face3(b[0],b[r],b[r+1],w.length?[w[0].clone(),w[r++].clone(),w[r].clone()]:[],O))}if(k.length)for(E=0,A=k.length;E<A;E++)for((T=k[E]).daeMaterial=t.material,e.faces.push(T),r=0;r<p.length;r++)S=_[p[r]],M=c>4?[S[0],S[E+1],S[E+2]]:4===c?0===E?[S[0],S[1],S[3]]:[S[1].clone(),S[2],S[3].clone()]:[S[0],S[1],S[2]],void 0===e.faceVertexUvs[r]&&(e.faceVertexUvs[r]=[]),e.faceVertexUvs[r].push(M);else console.log("dropped face with vcount "+c+" for geometry with id: "+e.id);y+=d*c}},E.prototype.setVertices=function(t){for(var e=0;e<this.inputs.length;e++)this.inputs[e].source===t.id&&(this.inputs[e].source=t.input.POSITION.source)},E.prototype.parse=function(t){this.material=t.getAttribute("material"),this.count=et(t,"count",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"input":this.inputs.push((new k).parse(t.childNodes[e]));break;case"vcount":this.vcount=Q(n.textContent);break;case"p":this.p.push(Q(n.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},A.prototype=Object.create(E.prototype),A.prototype.constructor=A,C.prototype=Object.create(E.prototype),C.prototype.constructor=C,S.prototype=Object.create(E.prototype),S.prototype.constructor=S,M.prototype.parse=function(t){this.params=[],this.source=t.getAttribute("source"),this.count=et(t,"count",0),this.stride=et(t,"stride",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if("param"===n.nodeName){var r={};r.name=n.getAttribute("name"),r.type=n.getAttribute("type"),this.params.push(r)}}return this},T.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++)if("input"===t.childNodes[e].nodeName){var n=(new k).parse(t.childNodes[e]);this.input[n.semantic]=n}return this},k.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=et(t,"set",-1),this.offset=et(t,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},O.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"bool_array":this.data=Z(n.textContent),this.type=n.nodeName;break;case"float_array":this.data=J(n.textContent),this.type=n.nodeName;break;case"int_array":this.data=Q(n.textContent),this.type=n.nodeName;break;case"IDREF_array":case"Name_array":this.data=tt(n.textContent),this.type=n.nodeName;break;case"technique_common":for(var r=0;r<n.childNodes.length;r++)if("accessor"===n.childNodes[r].nodeName){this.accessor=(new M).parse(n.childNodes[r]);break}}}return this},O.prototype.read=function(){var t=[],e=this.accessor.params[0];switch(e.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var n=0;n<this.data.length;n+=16){var r=at(this.data.slice(n,n+16));t.push(r)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+e.type+".")}return t},F.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++)if("instance_effect"===t.childNodes[e].nodeName){this.instance_effect=(new I).parse(t.childNodes[e]);break}return this},P.prototype.isColor=function(){return null===this.texture},P.prototype.isTexture=function(){return null!=this.texture},P.prototype.parse=function(t){"transparent"===t.nodeName&&(this.opaque=t.getAttribute("opaque"));for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"color":var r=J(n.textContent);this.color=new st.Color,this.color.setRGB(r[0],r[1],r[2]),this.color.a=r[3];break;case"texture":this.texture=n.getAttribute("texture"),this.texcoord=n.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(n)}}return this},P.prototype.parseTexture=function(t){if(!t.childNodes)return this;t.childNodes[1]&&"extra"===t.childNodes[1].nodeName&&(t=t.childNodes[1]).childNodes[1]&&"technique"===t.childNodes[1].nodeName&&(t=t.childNodes[1]);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?this.texOpts[n.nodeName]=1:this.texOpts[n.nodeName]=parseInt(n.textContent);break;default:this.texOpts[n.nodeName]=n.textContent}}return this},L.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"ambient":case"emission":case"diffuse":case"specular":case"transparent":this[n.nodeName]=(new P).parse(n);break;case"bump":var r=n.getAttribute("bumptype");r?"heightfield"===r.toLowerCase()?this.bump=(new P).parse(n):"normalmap"===r.toLowerCase()?this.normal=(new P).parse(n):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+r+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new P).parse(n)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new P).parse(n));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var i=n.querySelectorAll("float");i.length>0&&(this[n.nodeName]=parseFloat(i[0].textContent))}}return this.create(),this},L.prototype.create=function(){var t={},e=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var n=(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency;n>0&&(e=!0,t.transparent=!0,t.opacity=1-n)}var r={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var i in this)switch(i){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var o=this[i];if(o instanceof P)if(o.isTexture()){var a=o.texture,s=this.effect.sampler[a];if(void 0!==s&&void 0!==s.source){var u=this.effect.surface[s.source];if(void 0!==u){var c=Et[u.init_from];if(c){var l,h=wt+c.init_from,f=st.Loader.Handlers.get(h);null!==f?l=f.load(h):nt(l=new st.Texture,h),"MIRROR"===s.wrap_s?l.wrapS=st.MirroredRepeatWrapping:"WRAP"===s.wrap_s||o.texOpts.wrapU?l.wrapS=st.RepeatWrapping:l.wrapS=st.ClampToEdgeWrapping,"MIRROR"===s.wrap_t?l.wrapT=st.MirroredRepeatWrapping:"WRAP"===s.wrap_t||o.texOpts.wrapV?l.wrapT=st.RepeatWrapping:l.wrapT=st.ClampToEdgeWrapping,l.offset.x=o.texOpts.offsetU,l.offset.y=o.texOpts.offsetV,l.repeat.x=o.texOpts.repeatU,l.repeat.y=o.texOpts.repeatV,t[r[i]]=l,"emission"===i&&(t.emissive=16777215)}}}}else"diffuse"!==i&&e||("emission"===i?t.emissive=o.color.getHex():t[i]=o.color.getHex());break;case"shininess":t[i]=this[i];break;case"reflectivity":t[i]=this[i],t[i]>0&&(t.envMap=Ft.defaultEnvMap),t.combine=st.MixOperation;break;case"index_of_refraction":t.refractionRatio=this[i],1!==this[i]&&(t.envMap=Ft.defaultEnvMap)}switch(t.side=this.effect.doubleSided?st.DoubleSide:st.FrontSide,void 0!==t.diffuse&&(t.color=t.diffuse,delete t.diffuse),void 0!==t.ambient&&delete t.ambient,this.type){case"constant":void 0!=t.emissive&&(t.color=t.emissive),this.material=new st.MeshBasicMaterial(t);break;case"phong":case"blinn":this.material=new st.MeshPhongMaterial(t);break;case"lambert":default:this.material=new st.MeshLambertMaterial(t)}return this.material},R.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"init_from":this.init_from=n.textContent;break;case"format":this.format=n.textContent;break;default:console.log("unhandled Surface prop: "+n.nodeName)}}return this},D.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"source":this.source=n.textContent;break;case"minfilter":this.minfilter=n.textContent;break;case"magfilter":this.magfilter=n.textContent;break;case"mipfilter":this.mipfilter=n.textContent;break;case"wrap_s":this.wrap_s=n.textContent;break;case"wrap_t":this.wrap_t=n.textContent;break;default:console.log("unhandled Sampler2D prop: "+n.nodeName)}}return this},B.prototype.create=function(){if(null===this.shader)return null},B.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),rt(this,t),this.shader=null;for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(n))}}return this},B.prototype.parseNewparam=function(t){for(var e=t.getAttribute("sid"),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"surface":this.surface[e]=new R(this).parse(r);break;case"sampler2D":this.sampler[e]=new D(this).parse(r);break;case"extra":break;default:console.log(r.nodeName)}}},B.prototype.parseProfileCOMMON=function(t){for(var e=void 0,n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"profile_COMMON":this.parseProfileCOMMON(r);break;case"technique":e=r;break;case"newparam":this.parseNewparam(r);break;case"image":var i=(new h).parse(r);Et[i.id]=i;break;case"extra":break;default:console.log(r.nodeName)}}return e},B.prototype.parseTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new L(n.nodeName,this).parse(n);break;case"extra":this.parseExtra(n)}}},B.prototype.parseExtra=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique":this.parseExtraTechnique(n)}}},B.prototype.parseExtraTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"bump":this.shader.parse(t)}}},I.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},N.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.source={};for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"animation":var r=(new N).parse(n);for(var i in r.source)this.source[i]=r.source[i];for(var o=0;o<r.channel.length;o++)this.channel.push(r.channel[o]),this.sampler.push(r.sampler[o]);break;case"source":i=(new O).parse(n),this.source[i.id]=i;break;case"sampler":this.sampler.push(new U(this).parse(n));break;case"channel":this.channel.push(new j(this).parse(n))}}return this},j.prototype.parse=function(t){this.source=t.getAttribute("source").replace(/^#/,""),this.target=t.getAttribute("target");var e=this.target.split("/");e.shift();var n=e.shift(),r=n.indexOf(".")>=0,i=n.indexOf("(")>=0;if(r)e=n.split("."),this.sid=e.shift(),this.member=e.shift();else if(i){var o=n.split("(");this.sid=o.shift();for(var a=0;a<o.length;a++)o[a]=parseInt(o[a].replace(/\)/,""));this.arrIndices=o}else this.sid=n;return this.fullSid=n,this.dotSyntax=r,this.arrSyntax=i,this},U.prototype.parse=function(t){this.id=t.getAttribute("id"),this.inputs=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"input":this.inputs.push((new k).parse(n))}}return this},U.prototype.create=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t],n=this.animation.source[e.source];switch(e.semantic){case"INPUT":this.input=n.read();break;case"OUTPUT":this.output=n.read(),this.strideOut=n.accessor.stride;break;case"INTERPOLATION":this.interpolation=n.read();break;case"IN_TANGENT":case"OUT_TANGENT":break;default:console.log(e.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){for(this.startTime=1e8,this.endTime=-1e8,t=0;t<this.input.length;t++)this.startTime=Math.min(this.startTime,this.input[t]),this.endTime=Math.max(this.endTime,this.input[t]);this.duration=this.endTime-this.startTime}},U.prototype.getData=function(t,e,n){var r=void 0;if("matrix"===t&&16===this.strideOut)r=this.output[e];else if(this.strideOut>1){r=[],e*=this.strideOut;for(var i=0;i<this.strideOut;++i)r[i]=this.output[e+i];if(3===this.strideOut)switch(t){case"rotate":case"translate":it(r,-1);break;case"scale":it(r,1)}else 4===this.strideOut&&"matrix"===t&&it(r,-1)}else r=this.output[e],n&&"translate"===t&&(r=function(t,e){if(!0!==Ft.convertUpAxis||Lt===Ft.upAxis)return e;switch(t){case"X":e="XtoY"===Rt?-1*e:e;break;case"Y":e="YtoZ"===Rt||"YtoX"===Rt?-1*e:e;break;case"Z":e="ZtoY"===Rt?-1*e:e}return e}(n,r));return r},$.prototype.addTarget=function(t,e,n,r){this.targets.push({sid:t,member:n,transform:e,data:r})},$.prototype.apply=function(t){for(var e=0;e<this.targets.length;++e){var n=this.targets[e];t&&n.sid!==t||n.transform.update(n.data,n.member)}},$.prototype.getTarget=function(t){for(var e=0;e<this.targets.length;++e)if(this.targets[e].sid===t)return this.targets[e];return null},$.prototype.hasTarget=function(t){for(var e=0;e<this.targets.length;++e)if(this.targets[e].sid===t)return!0;return!1},$.prototype.interpolate=function(t,e){for(var n=0,r=this.targets.length;n<r;n++){var i,o=this.targets[n],a=t.getTarget(o.sid);if("matrix"!==o.transform.type&&a){var s=(e-this.time)/(t.time-this.time),u=a.data,c=o.data;if(s<0&&(s=0),s>1&&(s=1),c.length){i=[];for(var l=0;l<c.length;++l)i[l]=c[l]+(u[l]-c[l])*s}else i=c+(u-c)*s}else i=o.data;o.transform.update(i,o.member)}},z.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"optics":this.parseOptics(n)}}return this},z.prototype.parseOptics=function(t){for(var e=0;e<t.childNodes.length;e++)if("technique_common"===t.childNodes[e].nodeName)for(var n=t.childNodes[e],r=0;r<n.childNodes.length;r++)if(this.technique=n.childNodes[r].nodeName,"perspective"===this.technique)for(var i=n.childNodes[r],o=0;o<i.childNodes.length;o++)switch((s=i.childNodes[o]).nodeName){case"yfov":this.yfov=s.textContent;break;case"xfov":this.xfov=s.textContent;break;case"znear":this.znear=s.textContent;break;case"zfar":this.zfar=s.textContent;break;case"aspect_ratio":this.aspect_ratio=s.textContent}else if("orthographic"===this.technique){var a=n.childNodes[r];for(o=0;o<a.childNodes.length;o++){var s;switch((s=a.childNodes[o]).nodeName){case"xmag":this.xmag=s.textContent;break;case"ymag":this.ymag=s.textContent;break;case"znear":this.znear=s.textContent;break;case"zfar":this.zfar=s.textContent;break;case"aspect_ratio":this.aspect_ratio=s.textContent}}}return this},H.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},V.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);break;case"technique":this.parseTechnique(n)}}return this},V.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++)switch(t.childNodes[e].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=t.childNodes[e].nodeName;for(var n=t.childNodes[e],r=0;r<n.childNodes.length;r++){var i=n.childNodes[r];switch(i.nodeName){case"color":var o=J(i.textContent);this.color=new st.Color(0),this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"falloff_angle":this.falloff_angle=parseFloat(i.textContent);break;case"quadratic_attenuation":var a=parseFloat(i.textContent);this.distance=a?Math.sqrt(1/a):0}}}return this},V.prototype.parseTechnique=function(t){this.profile=t.getAttribute("profile");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"intensity":this.intensity=parseFloat(n.textContent)}}return this},W.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},G.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.joints=[],this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n)}}return this},G.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(t.childNodes[e].nodeName){case"joint":this.joints.push((new q).parse(n));break;case"link":this.links.push((new X).parse(n))}}return this},q.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.axis=new st.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var e=J(t.querySelector("axis").textContent);this.axis=ot(e,0);var n=t.querySelector("limits min")?parseFloat(t.querySelector("limits min").textContent):-360,r=t.querySelector("limits max")?parseFloat(t.querySelector("limits max").textContent):360;this.limits={min:n,max:r};for(var i=["prismatic","revolute"],o=0;o<i.length;o++){var a=i[o];t.querySelector(a)&&(this.type=a)}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},X.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.transforms=[],this.attachments=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"attachment_full":this.attachments.push((new Y).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new v).parse(n))}}return this},Y.prototype.parse=function(t){this.joint=t.getAttribute("joint").split("/").pop(),this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"link":this.links.push((new X).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new v).parse(n))}}return this},{load:function(e,n,r,i){var o=0;if(document.implementation&&document.implementation.createDocument){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState?0===a.status||200===a.status?a.response?(pt=n,t(a.response,void 0,e)):i?i({type:"error",url:e}):console.error("ColladaLoader: Empty or non-existing file ("+e+")"):i?i({type:"error",url:e}):console.error("ColladaLoader: Couldn't load \""+e+'" ('+a.status+")"):3===a.readyState&&r&&(0===o&&(o=a.getResponseHeader("Content-Length")),r({total:o,loaded:a.responseText.length}))},a.open("GET",e,!0),a.send(null)}else alert("Don't know how to parse XML!")},parse:t,applySkin:o,geometries:St,options:Ft}}n.d(e,"b",function(){return it}),n.d(e,"a",function(){return St}),n.d(e,"c",function(){return N}),n.d(e,"f",function(){return T}),n.d(e,"d",function(){return Mt}),n.d(e,"e",function(){return Q}),n.d(e,"g",function(){return S});var l=n(10),h=n(39),f=(n.n(h),n(86)),d=n(174),p=(n.n(d),n(87)),g=n(199),m=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w={NONE:"none",VISIBLE:"visible",TRANSPARENT:"transparent"},_=new l.Vector3,x=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"setFromObject",value:function(t){var e=this;return this.makeEmpty(),t.updateMatrixWorld(!0),t.traverseVisible(function(t){var n=t.geometry;if(void 0!==n)if(n.isGeometry)for(var r=n.vertices,i=0,o=r.length;i<o;i++)_.copy(r[i]),_.applyMatrix4(t.matrixWorld),e.expandByPoint(_);else if(n.isBufferGeometry){var a=n.attributes.position;if(void 0!==a)for(var s=0,u=a.count;s<u;s++)_.fromBufferAttribute(a,s).applyMatrix4(t.matrixWorld),e.expandByPoint(_)}}),this}}]),e}(l.Box3),E={AdsumObject3D:"AdsumObject3D",BuildingObject:"BuildingObject",FloorObject:"FloorObject",LabelImageObject:"LabelImageObject",LabelObject:"LabelObject",LabelTextObject:"LabelTextObject",SiteObject:"SiteObject",SpaceObject:"SpaceObject",PathSectionObject:"PathSectionObject",UserObject:"UserObject"},A=new x,C=function(){function t(){i(this,t),this.id=null,this.isAdsumObject=!0,this._mesh=null,this._levelOfDetails=null,this.placeId=null}return b(t,null,[{key:"_createFromMesh",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),r=new this;return r.id=n,r._setMesh(t),e.levelOfDetails&&(r._levelOfDetails=e.levelOfDetails),e.placeId&&null!==e.placeId?r.placeId=e.placeId:r.placeId=Symbol("AdsumMapPlaceId"),r._mesh.onBeforeRender=r._onBeforeRender.bind(r),r}}]),b(t,[{key:"getType",value:function(){return E.AdsumObject3D}},{key:"_setMesh",value:function(t){return null!==this._mesh&&(this._mesh.adsumObject=null),this._mesh=t,this._mesh.adsumObject=this,this}},{key:"setDisplayMode",value:function(t){switch(t){case w.NONE:this._mesh.visible=!1;break;case w.VISIBLE:this._mesh.visible=!0,void 0!==this._mesh.material&&(this._mesh.material.visible=!0);break;case w.TRANSPARENT:if(this._mesh.visible=!0,void 0===this._mesh.material)throw new Error("AdsumWebMap.AdsumObject3D: DisplayMode transparent is not supported with the current object");this._mesh.material.visible=!1;break;default:throw new Error("Unexpected")}}},{key:"getDisplayMode",value:function(){return this._mesh.visible&&void 0!==this._mesh.material?this._mesh.material.visible?w.VISIBLE:w.TRANSPARENT:w.NONE}},{key:"moveTo",value:function(t,e,n){this._mesh.position.x=t,this._mesh.position.y=e,this._mesh.position.z=n}},{key:"moveBy",value:function(t,e,n){this._mesh.position.x+=t,this._mesh.position.y+=e,this._mesh.position.z+=n}},{key:"getSizeAndCenter",value:function(){var t=this;if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]){A.makeEmpty();var e=this._mesh.geometry.vertices,n=new l.Vector3;e.forEach(function(e){n.copy(e),n.applyMatrix4(t._mesh.matrixWorld),A.expandByPoint(n)})}else A.setFromObject(this._mesh);var r=new l.Vector3,i=new l.Vector3;return A.getCenter(r),A.getSize(i),{size:i,center:r}}},{key:"rotateZ",value:function(t){this._mesh.rotateZ(t)}},{key:"update",value:function(){this._mesh.matrixAutoUpdate||this._mesh.updateMatrix(),this._mesh.updateMatrixWorld()}},{key:"_applyLod",value:function(t){null!==this._levelOfDetails&&this._levelOfDetails.applyLod(this,t)}},{key:"_onBeforeRender",value:function(t,e,n,r,i,o){}},{key:"_raycast",value:function(t,e){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!1===this._mesh.visible)return!1;if(void 0===this._mesh.material||this._mesh.material.visible){var n=[];if(this._mesh.raycast(t,n),1===n.length){var r=n[0];e.push({object:this,distance:r.distance,position:this._mesh.worldToLocal(r.point)})}}return!0}},{key:"_addChild",value:function(t){this._mesh.add(t._mesh)}},{key:"_dispose",value:function(){var t=function(t){t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&(Object.keys(t.material).forEach(function(e){var n=t.material[e];null!==n&&"object"===n&&n.dispose&&n.dispose()}),t.material.dispose&&t.material.dispose())};this._mesh.traverse(t),t(this._mesh),null!==this._mesh.parent&&this._mesh.parent.remove(this._mesh)}}]),t}(),S=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isUser=!0,t.parent=null,t}return a(e,t),b(e,null,[{key:"createDefault",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),r=new l.RingGeometry(t/2,t/2-t/8,32);r.merge(new l.CircleGeometry(t/8,16));var i=new l.MeshBasicMaterial({color:769978,side:l.DoubleSide});i.transparent=!0;var o=new l.Mesh(r,i);return this._createFromMesh(o,e,n)}}]),b(e,[{key:"getType",value:function(){return E.UserObject}}]),e}(C),M=function(){function t(){i(this,t),this.site=null,this.buildings=new Map,this.floors=new Map,this.spaces=new Map,this.labels=new Map,this.user=null,this.pathSectionObjects=new Map}return b(t,[{key:"init",value:function(t,e){this.site=t.site,this.buildings=t.buildingsMap,this.floors=t.floorsMap,this.spaces=t.spacesMap,this.labels=t.labelsMap,this.user=S.createDefault(e.meterToAdsumDistance(3),{placeId:Symbol("UserPlace")},Symbol("UserPositionId"))}},{key:"getFloor",value:function(t){return this.floors.has(t)?this.floors.get(t):null}},{key:"getBuilding",value:function(t){return this.buildings.has(t)?this.buildings.get(t):null}},{key:"getSpace",value:function(t){return this.spaces.has(t)?this.spaces.get(t):null}},{key:"getLabel",value:function(t){return this.labels.has(t)?this.labels.get(t):null}}]),t}(),T={floor:{didChanged:"scene.floor.didChanged"}},k=function(t){function e(t){var n;return i(this,e),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.awm=t,n.scene=null,n.currentFloor=null,n}return a(e,t),b(e,[{key:"init",value:function(t){this.scene=t.scene,t.site.setDisplayMode(w.VISIBLE),t.buildingsMap.forEach(function(t){t.setDisplayMode(w.VISIBLE)}),t.floorsMap.forEach(function(t){t.setDisplayMode(w.NONE)}),this.currentFloor=null}},{key:"getCurrentFloor",value:function(){return this.currentFloor}},{key:"setCurrentFloor",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t===this.currentFloor?Promise.resolve():new Promise(function(r,i){try{n&&console.warn("AdsumWebMap.SceneManager.setCurrentFloor: animated parameter is not supported yet"),null===e.currentFloor?(e.awm.objectManager.site.setDisplayMode(w.TRANSPARENT),e.awm.objectManager.buildings.forEach(function(t){t.setDisplayMode(w.TRANSPARENT)})):e.currentFloor.setDisplayMode(w.NONE),null===t?(e.awm.objectManager.site.setDisplayMode(w.VISIBLE),e.awm.objectManager.buildings.forEach(function(t){t.setDisplayMode(w.VISIBLE)})):t.setDisplayMode(w.VISIBLE);var o=e.currentFloor;e.currentFloor=t,e.dispatchEvent({type:T.floor.didChanged,previous:o,current:t}),r()}catch(t){i(t)}})}}]),e}(l.EventDispatcher),O=function(){function t(e,n){i(this,t),this.awm=e,this.options=n,this.container=n.container,this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.renderer=new l.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:n.gpuPower,canvas:this.canvas,logarithmicDepthBuffer:!0}),this.renderer.capabilities.logarithmicDepthBuffer=null!==this.renderer.extensions.get("EXT_frag_depth"),this.container.appendChild(this.canvas),this.options.shadowEnabled&&(this.renderer.shadowMap.type=l.PCFSoftShadowMap,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.needsUpdate=!0),this.renderer.setClearColor(this.options.clearColor),this._animationFrameId=null,this._animationFrameIdTween=null}return b(t,[{key:"init",value:function(){this.options.autoCompileMaterials&&this.compileMaterials(),this._resizeCanvas()}},{key:"compileMaterials",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.renderer.compile(this.awm.sceneManager.scene,this.awm.cameraManager.camera),e&&this.renderer.domElement.addEventListener("webglcontextrestored",function(){t.compileMaterials(!1)},!1)}},{key:"start",value:function(){this._resizeCanvas(),this._animationFrameId=requestAnimationFrame(this.start.bind(this)),Object(h.update)(),this.awm.cameraManager.control.update(),this._updateLevelOfDetails(this.awm.cameraManager.camera),this.renderer.render(this.awm.sceneManager.scene,this.awm.cameraManager.camera)}},{key:"_updateLevelOfDetails",value:function(t){var e=this,n=this.awm.objectManager.site;n._applyLod(t),n.getDisplayMode()!==w.NONE&&(n.buildings.forEach(function(n){return e._updateLevelOfDetailsOnBuilding(n,t)}),n.spaces.forEach(function(n){return e._updateLevelOfDetailsOnSpace(n,t)}),n.labels.forEach(function(e){return e._applyLod(t)}))}},{key:"_updateLevelOfDetailsOnBuilding",value:function(t,e){var n=this;t._applyLod(e),t.getDisplayMode()!==w.NONE&&(t.floors.forEach(function(t){return n._updateLevelOfDetailsOnFloor(t,e)}),t.labels.forEach(function(t){return t._applyLod(e)}))}},{key:"_updateLevelOfDetailsOnFloor",value:function(t,e){var n=this;t._applyLod(e),t.getDisplayMode()!==w.NONE&&(t.spaces.forEach(function(t){return n._updateLevelOfDetailsOnSpace(t,e)}),t.labels.forEach(function(t){return t._applyLod(e)}))}},{key:"_updateLevelOfDetailsOnSpace",value:function(t,e){t._applyLod(e),t.getDisplayMode()!==w.NONE&&t.labels.forEach(function(t){return t._applyLod(e)})}},{key:"_getDevicePixelRatio",value:function(){return window.devicePixelRatio||1}},{key:"_resizeCanvas",value:function(){var t=this.renderer.getSize(),e=t.width,n=t.height,r=e!==this.container.clientWidth||n!==this.container.clientHeight,i=this.renderer.getPixelRatio()!==this._getDevicePixelRatio();if((r||i)&&(r&&this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),i&&this.renderer.setPixelRatio(this._getDevicePixelRatio()),r)){var o=this.awm.cameraManager,a=o.camera,s=o.control;a.aspect=this.container.clientWidth/this.container.clientHeight,a.updateProjectionMatrix(),s.update()}}}]),t}(),F={Vector3:l.Vector3,MOUSE:l.MOUSE,Quaternion:l.Quaternion,Spherical:l.Spherical,EventDispatcher:l.EventDispatcher,Vector2:l.Vector2};F.OrbitControls=function(t,e){function n(){return Math.pow(.95,x.zoomSpeed)}function r(t){O.theta-=t}function i(t){O.phi-=t}function o(t){x.object.isPerspectiveCamera?P/=t:x.object.isOrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom*t)),x.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function a(t){x.object.isPerspectiveCamera?P*=t:x.object.isOrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom/t)),x.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function s(t){if(!1!==x.enabled){switch(t.preventDefault(),t.button){case x.mouseButtons.ORBIT:if(!1===x.enableRotate)return;!function(t){D.set(t.clientX,t.clientY)}(t),M=S.ROTATE;break;case x.mouseButtons.ZOOM:if(!1===x.enableZoom)return;!function(t){$.set(t.clientX,t.clientY)}(t),M=S.DOLLY;break;case x.mouseButtons.PAN:if(!1===x.enablePan)return;!function(t){N.set(t.clientX,t.clientY)}(t),M=S.PAN}M!==S.NONE&&(document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",c,!1),x.dispatchEvent(A))}}function u(t){if(!1!==x.enabled)switch(t.preventDefault(),M){case S.ROTATE:if(!1===x.enableRotate)return;!function(t){B.set(t.clientX,t.clientY),I.subVectors(B,D).multiplyScalar(x.rotateSpeed);var e=x.domElement===document?x.domElement.body:x.domElement;r(2*Math.PI*I.x/e.clientWidth),i(2*Math.PI*I.y/e.clientHeight),D.copy(B),x.update()}(t);break;case S.DOLLY:if(!1===x.enableZoom)return;!function(t){z.set(t.clientX,t.clientY),H.subVectors(z,$),H.y>0?o(n()):H.y<0&&a(n()),$.copy(z),x.update()}(t);break;case S.PAN:if(!1===x.enablePan)return;!function(t){j.set(t.clientX,t.clientY),U.subVectors(j,N).multiplyScalar(x.panSpeed),G(U.x,U.y),N.copy(j),x.update()}(t)}}function c(t){!1!==x.enabled&&(document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",c,!1),x.dispatchEvent(C),M=S.NONE)}function l(t){!1===x.enabled||!1===x.enableZoom||M!==S.NONE&&M!==S.ROTATE||(t.preventDefault(),t.stopPropagation(),x.dispatchEvent(A),function(t){t.deltaY<0?a(n()):t.deltaY>0&&o(n()),x.update()}(t),x.dispatchEvent(C))}function h(t){!1!==x.enabled&&!1!==x.enableKeys&&!1!==x.enablePan&&function(t){switch(t.keyCode){case x.keys.UP:G(0,x.keyPanSpeed),x.update();break;case x.keys.BOTTOM:G(0,-x.keyPanSpeed),x.update();break;case x.keys.LEFT:G(x.keyPanSpeed,0),x.update();break;case x.keys.RIGHT:G(-x.keyPanSpeed,0),x.update()}}(t)}function f(t){if(!1!==x.enabled){switch(t.touches.length){case 1:if(!1===x.enableRotate)return;!function(t){D.set(t.touches[0].pageX,t.touches[0].pageY)}(t),M=S.TOUCH_ROTATE;break;case 2:if(!1===x.enableZoom)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);$.set(0,r)}(t),M=S.TOUCH_DOLLY;break;case 3:if(!1===x.enablePan)return;!function(t){N.set(t.touches[0].pageX,t.touches[0].pageY)}(t),M=S.TOUCH_PAN;break;default:M=S.NONE}M!==S.NONE&&x.dispatchEvent(A)}}function d(t){if(!1!==x.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===x.enableRotate)return;if(M!==S.TOUCH_ROTATE)return;!function(t){B.set(t.touches[0].pageX,t.touches[0].pageY),I.subVectors(B,D).multiplyScalar(x.rotateSpeed);var e=x.domElement===document?x.domElement.body:x.domElement;r(2*Math.PI*I.x/e.clientWidth),i(2*Math.PI*I.y/e.clientHeight),D.copy(B),x.update()}(t);break;case 2:if(!1===x.enableZoom)return;if(M!==S.TOUCH_DOLLY)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+r*r);z.set(0,i),H.subVectors(z,$),H.y>0?a(n()):H.y<0&&o(n()),$.copy(z),x.update()}(t);break;case 3:if(!1===x.enablePan)return;if(M!==S.TOUCH_PAN)return;!function(t){j.set(t.touches[0].pageX,t.touches[0].pageY),U.subVectors(j,N).multiplyScalar(x.panSpeed),G(U.x,U.y),N.copy(j),x.update()}(t);break;default:M=S.NONE}}function p(t){!1!==x.enabled&&(x.dispatchEvent(C),M=S.NONE)}function g(t){!1!==x.enabled&&t.preventDefault()}var m,v,y,b,w;this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new F.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.panningMode=F.ScreenSpacePanning,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:F.MOUSE.LEFT,ZOOM:F.MOUSE.MIDDLE,PAN:F.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return k.phi},this.getAzimuthalAngle=function(){return k.theta},this.saveState=function(){x.target0.copy(x.target),x.position0.copy(x.object.position),x.zoom0=x.object.zoom},this.reset=function(){x.target.copy(x.target0),x.object.position.copy(x.position0),x.object.zoom=x.zoom0,x.object.updateProjectionMatrix(),x.dispatchEvent(E),x.update(),M=S.NONE},this.update=(m=new F.Vector3,v=(new F.Quaternion).setFromUnitVectors(t.up,new F.Vector3(0,1,0)),y=v.clone().inverse(),b=new F.Vector3,w=new F.Quaternion,function(){var t=x.object.position;return m.copy(t).sub(x.target),m.applyQuaternion(v),k.setFromVector3(m),x.autoRotate&&M===S.NONE&&r(2*Math.PI/60/60*x.autoRotateSpeed),k.theta+=O.theta,k.phi+=O.phi,k.theta=Math.max(x.minAzimuthAngle,Math.min(x.maxAzimuthAngle,k.theta)),k.phi=Math.max(x.minPolarAngle,Math.min(x.maxPolarAngle,k.phi)),k.makeSafe(),k.radius*=P,k.radius=Math.max(x.minDistance,Math.min(x.maxDistance,k.radius)),x.target.add(L),m.setFromSpherical(k),m.applyQuaternion(y),t.copy(x.target).add(m),x.object.lookAt(x.target),!0===x.enableDamping?(O.theta*=1-x.dampingFactor,O.phi*=1-x.dampingFactor,L.multiplyScalar(1-x.dampingFactor)):(O.set(0,0,0),L.set(0,0,0)),P=1,!!(R||b.distanceToSquared(x.object.position)>T||8*(1-w.dot(x.object.quaternion))>T)&&(x.dispatchEvent(E),b.copy(x.object.position),w.copy(x.object.quaternion),R=!1,!0)}),this.dispose=function(){x.domElement.removeEventListener("contextmenu",g,!1),x.domElement.removeEventListener("mousedown",s,!1),x.domElement.removeEventListener("wheel",l,!1),x.domElement.removeEventListener("touchstart",f,!1),x.domElement.removeEventListener("touchend",p,!1),x.domElement.removeEventListener("touchmove",d,!1),document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",c,!1),window.removeEventListener("keydown",h,!1)};var _,x=this,E={type:"change"},A={type:"start"},C={type:"end"},S={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},M=S.NONE,T=1e-6,k=new F.Spherical,O=new F.Spherical,P=1,L=new F.Vector3,R=!1,D=new F.Vector2,B=new F.Vector2,I=new F.Vector2,N=new F.Vector2,j=new F.Vector2,U=new F.Vector2,$=new F.Vector2,z=new F.Vector2,H=new F.Vector2,V=(_=new F.Vector3,function(t,e){_.setFromMatrixColumn(e,0),_.multiplyScalar(-t),L.add(_)}),W=function(){var t=new F.Vector3;return function(e,n){switch(x.panningMode){case F.ScreenSpacePanning:t.setFromMatrixColumn(n,1);break;case F.HorizontalPanning:t.setFromMatrixColumn(n,0),t.crossVectors(x.object.up,t)}t.multiplyScalar(e),L.add(t)}}(),G=function(){var t=new F.Vector3;return function(e,n){var r=x.domElement===document?x.domElement.body:x.domElement;if(x.object.isPerspectiveCamera){var i=x.object.position;t.copy(i).sub(x.target);var o=t.length();o*=Math.tan(x.object.fov/2*Math.PI/180),V(2*e*o/r.clientHeight,x.object.matrix),W(2*n*o/r.clientHeight,x.object.matrix)}else x.object.isOrthographicCamera?(V(e*(x.object.right-x.object.left)/x.object.zoom/r.clientWidth,x.object.matrix),W(n*(x.object.top-x.object.bottom)/x.object.zoom/r.clientHeight,x.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),x.enablePan=!1)}}();x.domElement.addEventListener("contextmenu",g,!1),x.domElement.addEventListener("mousedown",s,!1),x.domElement.addEventListener("wheel",l,!1),x.domElement.addEventListener("touchstart",f,!1),x.domElement.addEventListener("touchend",p,!1),x.domElement.addEventListener("touchmove",d,!1),window.addEventListener("keydown",h,!1),this.update()},F.OrbitControls.prototype=Object.create(F.EventDispatcher.prototype),F.OrbitControls.prototype.constructor=F.OrbitControls,Object.defineProperties(F.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),F.ScreenSpacePanning=0,F.HorizontalPanning=1;var P=F.OrbitControls,L={UP:new l.Vector3(0,0,1),ZOOM_MIN:25,ZOOM_MAX:2e4},R=function t(){i(this,t),this.eye=new l.Vector3,this.up=L.UP.clone(),this.target=new l.Vector3,this.zoomMin=L.ZOOM_MIN,this.zoomMax=L.ZOOM_MAX},D=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){this.zoom=!0,this.fitRatio=1.5}}]),e}(f.a),B=new x,I=function(t){function e(t,n){var r;return i(this,e),r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r.awm=t,r.options=n,r.camera=new l.PerspectiveCamera(45,1,.1,5e4),r.control=null,r.floorPlane=new l.Plane,r.floorPlane.normal.set(0,0,-1),r.ray=new l.Ray,r.cameraCalibrations=new Map,r._tween=null,r}return a(e,t),b(e,[{key:"init",value:function(t){var e=this.awm.engineManager.canvas;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.near=t.meterToAdsumDistance(1),this.camera.far=t.meterToAdsumDistance(1e4),this.camera.up.set(0,0,1),this.camera.updateProjectionMatrix(),this.control=new P(this.camera,this.awm.engineManager.canvas),this.control.enableZoom=!0,this.control.enableRotate=!0,this.control.minPolarAngle=Math.PI/20,this.control.maxPolarAngle=Math.PI/2,this.control.minDistance=t.meterToAdsumDistance(5),this.control.enableZoom=!0,this.control.enableDamping=!1,this.control.enableKeys=!1,this.control.panningMode=1,this.control.mouseButtons={PAN:l.MOUSE.LEFT,ZOOM:l.MOUSE.MIDDLE,ORBIT:l.MOUSE.RIGHT}}},{key:"centerOnFloor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.reset();try{var n=null;if(this.cameraCalibrations.has(t))n=this.cameraCalibrations.get(t);else{console.warn("AdsumWebMap.CameraManager: Missing calibration for centerOnFloor");var r=null===t?this.awm.objectManager.site:t;B.setFromObject(r._mesh);var i=new l.Sphere;B.getBoundingSphere(i);var o=new l.Vector3;r._mesh.getWorldPosition(o),i.center.z=o.z,(n=new R).target.copy(i.center),n.eye.copy(i.center);var a=1.5*i.radius*Math.sin(Math.PI/4);n.eye.setZ(n.eye.z+a),n.eye.setY(n.eye.y-a)}return this.floorPlane.constant=n.target.z,this.camera.up.copy(n.up),this.goTo(n.eye,n.target,e)}catch(t){return Promise.reject(t)}}},{key:"centerOn",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.reset();try{var r,i=null;null===n?(r=this.options,i=r.centerOnOptions):i=new D(n);var o=t.getSizeAndCenter(),a=o.size,s=o.center,u=this.control.target.clone().sub(this.camera.position),c=s.clone().sub(u);if(i.zoom){var l=this.camera,h=l.aspect,f=l.fov,d=Math.max(a.x,a.y,a.z)/(2*Math.atan(Math.PI*f/360)),p=d/h,g=i.fitRatio*Math.max(d,p);g=Math.min(Math.max(g,this.control.minDistance),this.control.maxDistance);var m=u.normalize().multiplyScalar(g);c.copy(s).sub(m)}return 0!==this.control.target.z-s.z&&(u.normalize(),this.ray.origin.copy(c),this.ray.direction.copy(u),this.ray.intersectPlane(this.floorPlane,s)),this.goTo(c,s,e)}catch(t){return Promise.reject(t)}}},{key:"setCameraCalibrations",value:function(t){var e=this;this.cameraCalibrations=new Map,t.forEach(function(t,n){var r=e.awm.objectManager,i=null===n?r.site:r.getFloor(n);if(null!==i){i._mesh.updateMatrixWorld();var o=new l.Vector3;if(i._mesh.getWorldPosition(o),t.target.z!==o.z){console.warn("AdsumWebMap: invalid calibration target of "+i.id+", it's not on the floor");var a=new l.Plane;a.normal.set(0,0,-1),a.constant=o.z;var s=new l.Vector3;s.copy(t.target).sub(t.eye),s.normalize();var u=new l.Ray;u.origin.copy(t.eye),u.direction.copy(s),u.intersectPlane(a,t.target)}e.cameraCalibrations.set(null===n?null:i,t)}})}},{key:"goTo",value:function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(i,o){try{if(n.reset(),r){n.control.enabled=!1;var a={positionX:n.camera.position.x,positionY:n.camera.position.y,positionZ:n.camera.position.z,targetX:n.control.target.x,targetY:n.control.target.y,targetZ:n.control.target.z};n._tween=new h.Tween(a).to({positionX:t.x,positionY:t.y,positionZ:t.z,targetX:e.x,targetY:e.y,targetZ:e.z},700).on("update",function(){n.camera.position.set(a.positionX,a.positionY,a.positionZ),n.control.target.set(a.targetX,a.targetY,a.targetZ),n.control.update()}).on("stop",function(){n._setCameraPositionAndTarget(t,e),n.control.enabled=!0,i(!1)}).on("complete",function(){n.control.enabled=!0,i(!0)}).easing(h.Easing.Quadratic.InOut).start()}n._setCameraPositionAndTarget(t,e),r||i(!0)}catch(t){o(t)}})}},{key:"reset",value:function(){return null!==this._tween&&(this._tween.stop(),this._tween=null),this}},{key:"_setCameraPositionAndTarget",value:function(t,e){this.camera.position.copy(t),this.control.target.copy(e),this.control.update()}}]),e}(l.EventDispatcher),N={click:"click",dblClick:"dblClick"},j=function(t){function e(t){var n;return i(this,e),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.awm=t,n._dragging=!1,n._mouse=new l.Vector2,n._raycaster=new l.Raycaster,n}return a(e,t),b(e,[{key:"init",value:function(){var t=this;this.awm.engineManager.canvas.addEventListener("mousemove",this._onMouseMove.bind(this));var e=new d.Manager(this.awm.engineManager.canvas);e.add(new d.Tap({event:"doubletap",threshold:10,taps:2,posThreshold:50*window.devicePixelRatio})),e.add(new d.Tap({event:"singletap",threshold:10,time:500,interval:100})),e.get("doubletap").recognizeWith("singletap"),e.get("singletap").requireFailure("doubletap"),e.on("singletap ",this._onMouseClick.bind(this)),e.on("doubletap ",this._onMouseDblClick.bind(this)),this.awm.engineManager.canvas.addEventListener("mousedown",function(){t._dragging=!0},!1),window.document.addEventListener("mouseup",function(){t._dragging=!1},!1)}},{key:"_onMouseClick",value:function(t){this._setMouseCoordinate(t),this.dispatchEvent({type:N.click,intersects:this._raycast()})}},{key:"_onMouseDblClick",value:function(t){this._setMouseCoordinate(t),this.dispatchEvent({type:N.dblClick,intersects:this._raycast()})}},{key:"_onMouseMove",value:function(){}},{key:"_setMouseCoordinate",value:function(t){var e=0,n=0;if(void 0===t.clientX&&void 0===t.clientY){var r=t.target.getBoundingClientRect();e=t.center.x-r.left,n=t.center.y-r.top}else t.offsetX||0===t.offsetX?(e=t.offsetX,n=t.offsetY):(e=t.layerX,n=t.layerY);this._mouse.set(e/this.awm.engineManager.canvas.clientWidth*2-1,-n/this.awm.engineManager.canvas.clientHeight*2+1),this._raycaster.setFromCamera(this._mouse,this.awm.cameraManager.camera),this._raycaster.near=this.awm.cameraManager.camera.near,this._raycaster.far=this.awm.cameraManager.camera.far}},{key:"_raycast",value:function(){var t=[];return this.awm.objectManager.site._raycast(this._raycaster,t),t.sort(function(t,e){return t.distance-e.distance}),t}}]),e}(l.EventDispatcher),U=function(){function t(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i(this,t),this.id=e||Symbol("PathNodeId"),this.ground=n,this.links=new Set,this.utmPosition=o,this.groundPosition=r,this.isDynamic=!1,this._isGate=a}return b(t,null,[{key:"create",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new this(t,e,n,u(e,n,r),i)}},{key:"updateFromAdsumObject",value:function(t,e,n){var r=s(e),i=r.ground,o=r.groundPosition;t.ground=i,t.groundPosition=o,t.utmPosition=u(i,o,n)}},{key:"createFromAdsumObject",value:function(t,e,n){var r=s(e),i=r.ground,o=r.groundPosition;return this.create(t,i,o,n)}}]),b(t,[{key:"getLinkTo",value:function(t){var e=null;return this.links.forEach(function(n){n.to!==t&&n.from!==t||(e=n)}),e}}]),t}(),$={STANDARD:0,ONLY_DISABLED:1,NOT_DISABLED:2,CLOSED:3},z=function(){function t(e,n,r,o){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];i(this,t),this.id=e,this.type=n,this.from=r,this.to=o,this.bidirectional=a,this.distance=Math.sqrt(Math.pow(r.utmPosition.N-o.utmPosition.N,2)+Math.pow(r.utmPosition.E-o.utmPosition.E,2)+Math.pow(r.utmPosition.alt-o.utmPosition.alt,2))}return b(t,[{key:"isAccessible",value:function(t){return this.type===$.STANDARD||(t?this.type===$.ONLY_DISABLED:this.type===$.NOT_DISABLED)}}]),t}(),H=function(){function t(e){i(this,t),this.pathNetwork=e,this._cache=new Map,this._computing=new Map,this._symbolStrings=new Map,this._symbolIncrement=0}return b(t,[{key:"search",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._isCached(t,e,n))return this._getFromCache(t,e,n);if(this._isComputing(t,e,n))return this._getFromComputing(t,e,n);var r=Promise.resolve().then(function(){var r=new Map,i=new Set,o=new Map;for(o.set(t.id,{d:0,parent:null}),o.set(e.id,{d:1/0,parent:null}),r.set(t.id,t);r.size>0;){var a=function(){for(var t=Array.from(r.values()),a=t[0],s=1;s<t.length;s++){var u=t[s];o.get(u.id).d<o.get(a.id).d&&(a=u)}if(a===e){for(var c=[a],l=o.get(a.id),h=l.parent;null!==h;){c.push(h);h=o.get(h.id).parent}return{v:c.reverse()}}r.delete(a.id),i.add(a.id);var f=[],d=[];a.links.forEach(function(t){t.isAccessible(n)&&(t.from===a?(f.push(t.to),d.push(t.distance)):t.to===a&&t.bidirectional&&(f.push(t.from),d.push(t.distance)))});for(var p=0;p<f.length;p++){var g=f[p];if(!i.has(g.id)){r.has(g.id)||(o.set(g.id,{d:1/0,parent:null}),r.set(g.id,g));var m=o.get(a.id).d+d[p],v=o.get(g.id);m<v.d&&(v.parent=a,v.d=m)}}}();if("object"===("undefined"===typeof a?"undefined":y(a)))return a.v}return[]});return this._addToComputing(t,e,n,r),r}},{key:"_addToCache",value:function(t,e,n,r){if(!t.isDynamic&&!e.isDynamic){var i=this._getCacheKey(t,e,n);this._cache.set(i,r.map(function(t){return t.id}))}}},{key:"_getFromCache",value:function(t,e,n){var r=this,i=this._getCacheKey(t,e,n);return Promise.resolve(this._cache.get(i).map(function(t){return r.pathNetwork.nodes.get(t)}))}},{key:"_getCacheKey",value:function(t,e,n){return this._stringifyId(t.id)+":"+this._stringifyId(e.id)+(n?":pmr":"")}},{key:"_stringifyId",value:function(t){return"symbol"!=("undefined"===typeof t?"undefined":y(t))?""+t:(this._symbolStrings.has(t)||this._symbolStrings.set(t,"s"+this._symbolIncrement++),this._symbolStrings.get(t))}},{key:"_isCached",value:function(t,e,n){return this._cache.has(this._getCacheKey(t,e,n))}},{key:"_addToComputing",value:function(t,e,n,r){var i=this,o=this._getCacheKey(t,e,n);this._computing.set(o,r),r.then(function(r){i._addToCache(t,e,n,r),i._computing.delete(o)})}},{key:"_getFromComputing",value:function(t,e,n){var r=this,i=this._getCacheKey(t,e,n);return this._computing.get(i).then(function(){return r.search(t,e,n)})}},{key:"_isComputing",value:function(t,e,n){return this._computing.has(this._getCacheKey(t,e,n))}}]),t}(),V=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];i(this,t),this.from=e,this.to=r,this.ground=n,this.nodes=o,this._distance=null,this._curve=null}return b(t,[{key:"getDistance",value:function(){if(null===this._distance){this._distance=0;for(var t=0;t<this.nodes.length-1;t++){var e=this.nodes[t].getLinkTo(this.nodes[t+1]);this._distance+=e.distance}}return this._distance}},{key:"getCurve",value:function(){if(this.nodes.length<2)return null;if(null===this._curve){this._curve=[];for(var t=0;t<this.nodes.length-1;t++)this._curve.push({from:this.nodes[t].groundPosition,to:this.nodes[t+1].groundPosition})}return this._curve}},{key:"interpolate",value:function(t,e){var n=this.getCurve();if(null===n)return[];var r=t;t>this.getDistance()/3&&(console.warn("AdsumWebMap.PathSection.interpolate: short pathSection"),r=this.getDistance()/3);var i=Math.floor(this.getDistance()/r)-1,o=this.getDistance()/(i+1),a=[],s=o,u=new l.Vector3;return n.forEach(function(t){var n=t.from,r=t.to,i=e.adsumDistanceToMeter(u.subVectors(n,r).length());if(i<s)return void(s-=i);for(var c=s/i;c<=1;)u.lerpVectors(n,r,c),a.push(u.clone()),c+=o/i;s=i*(c-1)}),a}}]),t}(),W=function(){function t(e){i(this,t),this.awm=e,this.nodes=new Map,this.spaceGatesByAdsumObjectId=new Map,this.buildingGatesByAdsumObjectId=new Map,this.aStar=new H(this)}return b(t,[{key:"init",value:function(t){var e=this;t.get("nodes").forEach(function(t){var n=e._findParentAndGround(t.location),r=n.parent,i=n.ground;if(null===r)return void console.warn("AdsumWebMap.PathNetwork: invalid node");var o=new l.Vector3(t.position.x,t.position.y,t.position.z+.1),a=U.create(t.id,i,o,e.awm.projector,t.isGate);e.nodes.set(a.id,a),t.isGate&&("STORE"===t.location.type||"SHAPE"===t.location.type?(e.spaceGatesByAdsumObjectId.has(t.location.id)||e.spaceGatesByAdsumObjectId.set(t.location.id,[]),e.spaceGatesByAdsumObjectId.get(t.location.id).push(a)):"BUILDING"===t.location.type?(e.buildingGatesByAdsumObjectId.has(t.location.id)||e.buildingGatesByAdsumObjectId.set(t.location.id,[]),e.buildingGatesByAdsumObjectId.get(t.location.id).push(a)):console.warn("AdsumWebMap.PathNetwork: Invalid node gate on "+t.type+"#"+t.id))}),t.get("links").forEach(function(t){var n=e.nodes.get(t.from),r=e.nodes.get(t.to);if(void 0===n||void 0===r)return void console.warn("AdsumWebMap.PathNetwork: invalid link");var i=new z(t.id,t.type,n,r,t.bidirectional);n.links.add(i),i.bidirectional&&r.links.add(i)})}},{key:"computePath",value:function(t){var e=this,n=t.from,r=t.to;return!n.pathNode.isDynamic&&this.nodes.has(n.pathNode.id)||this.attachNodeLocation(n),!r.pathNode.isDynamic&&this.nodes.has(r.pathNode.id)||this.attachNodeLocation(r),this.aStar.search(n.pathNode,r.pathNode,t.pmr).then(function(n){e._buildPathSections(t,n)})}},{key:"attachNodeLocation",value:function(t){var e=t.pathNode,n=e.ground,r=e.groundPosition,i=null;if(t.adsumObject&&t.adsumObject.isSpace)i=this.spaceGatesByAdsumObjectId.get(t.adsumObject.id)||[];else if(t.adsumObject&&t.adsumObject.isBuilding)i=this.buildingGatesByAdsumObjectId.get(t.adsumObject.id)||[];else{i=[];var o=1/0,a=[];if(this.nodes.forEach(function(e){if(e!==t.pathNode&&e.ground===n){var r=e.groundPosition.distanceToSquared(t.pathNode.groundPosition);r<=9*o&&a.push({squareDistance:r,node:e}),r<o&&(o=r)}}),o!==1/0){a.sort(function(t,e){return t.squareDistance-e.squareDistance});var s=new l.Raycaster(n._mesh.localToWorld(r.clone())),u=[],c=[];a.forEach(function(t){var e=t.squareDistance,r=t.node;if(!(e>9*o)){s.ray.direction=n._mesh.localToWorld(r.groundPosition.clone()),s.ray.direction.sub(s.ray.origin),s.near=0,s.far=s.ray.direction.length(),s.ray.direction.normalize();for(var a=0;a<c.length;a++)if(c[a].angleTo(s.ray.direction)<Math.PI/4)return;u.length=0;for(var l=0;l<n._mesh.children.length;l++){var h=n._mesh.children[l],f=h.adsumObject;if((!f||!f.isLabel&&!f.isUser)&&(s.intersectObject(h,!1,u),0!==u.length))return}i.push(r),c.push(s.ray.direction)}})}}t.pathNode.links.forEach(function(e){e.from.links.delete(e),e.to.links.delete(e),t.pathNode.links.delete(e)}),i.forEach(function(e){var n=new z(Symbol("PathLinkId"),$.STANDARD,t.pathNode,e);t.pathNode.links.add(n),e.links.add(n)}),this.nodes.set(t.pathNode.id,t.pathNode),t.pathNode.needsUpdate=!1}},{key:"_findParentAndGround",value:function(t){var e=null,n=null;switch(t.type){case"STORE":case"SHAPE":null!==(e=this.awm.objectManager.getSpace(t.id))&&(n=e.parent);break;case"FLOOR":null!==(e=this.awm.objectManager.getFloor(t.id))&&(n=e);break;case"BUILDING":n=(e=this.awm.objectManager.getBuilding(t.id)).site;break;case"SITE":n=e=this.awm.objectManager.site;break;default:console.warn("AdsumWebMap.WayfindingManager.PathNetwork: unknown location.type "+t.type+" ")}return null===e&&console.warn("AdsumWebMap.WayfindingManager.PathNetwork: invalid location "+t.type+"#"+t.id),{parent:e,ground:n}}},{key:"_buildPathSections",value:function(t,e){if(0===e.length)throw new Error("AdsumWebMap.PathNetwork: No path found to destination");t.clear();var n=new V(t.from,t.from.pathNode.ground);t.pathSections.push(n);for(var r=0;r<e.length;r++){var i=e[r];if(n.ground!==i.ground){n.to=null,n=new V(null,i.ground),t.pathSections.push(n)}n.nodes.push(i)}n.to=t.to}}]),t}(),G=function(){function t(e,n,r){i(this,t),this.pathSectionObject=e,this.cameraManager=n,this.projector=r,this.speed=30,this.center=!0,this.tweens=[]}return b(t,[{key:"draw",value:function(){for(var t=[],e=this.pathSectionObject._mesh.children,n=0;n<e.length;n++){var r=this.projector.adsumDistanceToMeter(this.pathSectionObject.patternSpace)/this.speed*n*1e3;t.push(this._showPattern(n,r))}return this.pathSectionObject._mesh.visible=!0,this.center&&t.push(this.cameraManager.centerOn(this.pathSectionObject)),this.pathSectionObject.animations.push(this),Promise.all(t).then(function(){})}},{key:"stop",value:function(){this.tweens.forEach(function(t){t.stop()})}},{key:"_showPattern",value:function(t,e){var n=this;return new Promise(function(r,i){var o=n.pathSectionObject._mesh.children[t];o.traverse(function(t){t.material&&(t.material.opacity=0,t.material.transparent=!0)});var a=new h.Tween({opacity:0}).to({opacity:1},1e3).delay(e).easing(h.Easing.Exponential.In).on("complete",function(){o.traverse(function(t){t.material&&(t.material.opacity=1)}),r(!0)}).on("stop",function(){i(new Error("Path was stopped"))}).start();n.tweens.push(a)})}}]),t}(),q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this.isLocation=!0,this.id=e,this.pathNode=n,this.adsumObject=r}return b(t,[{key:"updateFromObjectPosition",value:function(t){U.updateFromAdsumObject(this.pathNode,this.adsumObject,t)}}]),t}(),X=function(){function t(){i(this,t),this.locations=new Map,this.locationsByAdsumObject=new Map,this.projector=null,this.objectManager=null,this.pathNetwork=null,this.userLocation=null}return b(t,[{key:"init",value:function(t,e,n){var r=this;this.projector=t,this.objectManager=n,this.pathNetwork=e,n.labels.forEach(function(t){if(!t.parent.isBuilding&&!t.parent.isSpace){var e=new q(t.placeId,U.createFromAdsumObject(null,t,r.projector),t);r.locations.set(e.id,e),r.locationsByAdsumObject.set(t,e),r.pathNetwork.attachNodeLocation(e)}}),n.spaces.forEach(function(t){var e=new q(t.placeId,U.createFromAdsumObject(null,t,r.projector),t);r.locations.set(e.id,e),r.locationsByAdsumObject.set(t,e),r.pathNetwork.attachNodeLocation(e)}),n.buildings.forEach(function(t){var e=new q(t.placeId,U.createFromAdsumObject(null,t,r.projector),t);r.locations.set(e.id,e),r.locationsByAdsumObject.set(t,e),r.pathNetwork.attachNodeLocation(e)})}},{key:"createUserLocation",value:function(){if(null!==this.userLocation)throw new Error("Unexpected");this.userLocation=new q(Symbol("UserLocation"),U.createFromAdsumObject(Symbol("UserPathNode"),this.objectManager.user,this.projector),this.objectManager.user),this.userLocation.pathNode.isDynamic=!0,this.locations.set(this.userLocation.id,this.userLocation)}},{key:"get",value:function(t){return this.locations.has(t)?this.locations.get(t):null}},{key:"getByAdsumObject",value:function(t){return this.locationsByAdsumObject.has(t)?this.locationsByAdsumObject.get(t):null}}]),t}(),Y={user:{position:{didChanged:"wayfinding.user.position.didChanged"}}},K=function(t){function e(t,n){var r;return i(this,e),r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r.awm=t,r.projector=null,r.locationRepository=new X,r.pathNetwork=new W(t),r.options=n,r}return a(e,t),b(e,[{key:"init",value:function(t){this.projector=t.projector,this.pathNetwork.init(t.paths),this.options.pathBuilder.init(this.projector,this.awm.objectManager),this.locationRepository.init(this.projector,this.pathNetwork,this.awm.objectManager)}},{key:"computePath",value:function(t){return this.removePath(t),null===t.from&&(t.from=this.locationRepository.userLocation,null===t.from)?Promise.reject(new Error("AdsumWebMap.WayfindingManager: cannot compute path because user position is not set")):null===t.to&&(t.to=this.locationRepository.userLocation,null===t.to)?Promise.reject(new Error("AdsumWebMap.WayfindingManager: cannot compute path because user position is not set")):this.pathNetwork.computePath(t)}},{key:"removePath",value:function(t){var e=this;t.pathSections.forEach(function(t){e.removePathSection(t)})}},{key:"drawPathSection",value:function(t){this.removePathSection(t);var e=this.options.pathBuilder.build(t);return new G(e,this.awm.cameraManager,this.projector).draw()}},{key:"removePathSection",value:function(t){this.awm.objectManager.pathSectionObjects.forEach(function(e){e.pathSection===t&&e._dispose()})}},{key:"getUserUtmPosition",value:function(){var t=this.locationRepository.userLocation;return null===t?null:{utm:t.pathNode.utmPosition,floor:t.adsumObject.parent.isFloor?t.adsumObject.parent:null}}},{key:"getUserGpsPosition",value:function(){if(null===this.locationRepository.userLocation)return null;var t=this.getUserUtmPosition(),e=t.utm,n=t.floor;return{gps:this.projector.utmToGps(e),floor:n}}},{key:"setUserAdsumPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.x,i=t.y,o=t.z,a=null===e?this.awm.objectManager.site:e,s=this.awm.objectManager.user;return s._mesh.position.set(r,i,o),n&&a._mesh.worldToLocal(s._mesh.position),s._mesh.position.setZ(s._mesh.position.z+.1),a._addChild(s),s.parent=a,s.update(),null===this.locationRepository.userLocation?this.locationRepository.createUserLocation():this.locationRepository.userLocation.updateFromObjectPosition(this.projector),this.dispatchEvent({type:Y.user.position.didChanged,floor:e}),this}},{key:"setUserGpsPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setUserAdsumPosition(this.projector.gpsToAdsum(t),e,!0)}},{key:"setUserUtmPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setUserAdsumPosition(this.projector.utmToAdsum(t),e,!0)}},{key:"getUserDistanceFromPath",value:function(t){var e=this;return Math.min.apply(Math,r(t.pathSections.map(function(t){return e.getUserDistanceFromPathSection(t)})))}},{key:"getUserDistanceFromPathSection",value:function(t){var e=this.locationRepository.userLocation;if(null===e)throw new Error("AdsumWebMap.WayfindingManager.getUserDistanceFromPathSection: no user position set");if(t.ground!==e.pathNode.ground)return 1/0;var n=new l.Vector3,r=new l.Line3,i=t.getCurve(),o=e.pathNode.groundPosition,a=1/0;return null===i?t.nodes.length>0&&(a=o.distanceTo(t.nodes[0].groundPosition)):i.forEach(function(t){var e=t.from,i=t.to;r.set(e,i),r.closestPointToPoint(o,!0,n);var s=o.distanceTo(n);s<a&&(a=s)}),this.projector.adsumDistanceToMeter(a)}}]),e}(l.EventDispatcher),Z=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.container=null,this.gpuPower="high-performance",this.autoCompileMaterials=!0,this.clearColor=16777215,this.fogEnabled=!1,this.fogRatio=0,this.fogColor=16777215,this.backgroundImage=null,this.shadowEnabled=!1,this.shadowSize=2048}}]),e}(f.a),J=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.centerOnOptions=new D,this.force2D=!1,this.zoomEnabled=!0,this.rotationEnabled=!0,this.keepInFloorBounds=!1}}]),e}(f.a),Q=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isPathSection=!0,t.pathSection=null,t.patternSpace=null,t.animations=[],t}return a(e,t),b(e,null,[{key:"_createFromPathSection",value:function(t,e,n){var r=this._createFromMesh(e);return r.pathSection=t,r.patternSpace=n,r}}]),b(e,[{key:"getType",value:function(){return E.PathSectionObject}},{key:"_dispose",value:function(){this.animations.forEach(function(t){t.stop()}),this._mesh.traverse(function(t){t.material&&t.isMaterial&&t.material.dispose()}),null!==this._mesh.parent&&this._mesh.parent.remove(this._mesh)}}]),e}(C),tt=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.patternSpace=5,this.patternSize=1,this.patternMesh=null}}]),e}(f.a),et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.projector=null,this.objectManager=null,this.options=new tt(e)}return b(t,[{key:"init",value:function(t,e){this.projector=t,this.objectManager=e}},{key:"build",value:function(t){var e=new l.Group;e.visible=!1;for(var n=t.interpolate(this.options.patternSpace,this.projector),r=0;r<n.length-1;r++){var i=n[r],o=n[r+1],a=this._createPattern();a.position.copy(i);var s=o.clone().sub(a.position),u=0;u=0===s.y?s.x>0?Math.PI/2:-Math.PI/2:Math.atan(s.x/s.y),s.y<0&&(u+=Math.PI),a.setRotationFromAxisAngle(new l.Vector3(-0,-0,-1),u),e.add(a)}var c=Q._createFromPathSection(t,e,this.options.patternSpace);return t.ground._addChild(c),c.update(),this.objectManager.pathSectionObjects.set(c.id,c),c}},{key:"_createPattern",value:function(){null===this.options.patternMesh&&(this.options.patternMesh=this._createDefaultPattern());var t=this.options.patternMesh.clone();return t.traverse(function(t){t.material&&t.material.isMaterial&&(t.material=t.material.clone())}),t}},{key:"_createDefaultPattern",value:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=64,t.height=64;var n=.5*t.height,r=.65*t.width,i=(t.width-r)/2,o=(t.height-n)/2;e.arc(t.width/2,t.height/2,35,0,2*Math.PI),e.fillStyle="#0bbfba",e.fill(),e.beginPath(),e.moveTo(i,o+n),e.lineTo(i+r/2,o),e.lineTo(i+r,o+n),e.lineTo(i+r-10,o+n),e.lineTo(i+r/2,o+2*n*10/r),e.lineTo(i+10,o+n),e.closePath(),e.fillStyle="#ffffff",e.fill(),e.lineWidth=1,e.strokeStyle="#000000",e.stroke();var a=new l.CanvasTexture(t),s=new l.MeshBasicMaterial({color:16777215,map:a,side:l.FrontSide}),u=new l.PlaneGeometry(this.projector.meterToAdsumDistance(this.options.patternSize),this.projector.meterToAdsumDistance(this.options.patternSize));return new l.Mesh(u,s)}}]),t}(),nt=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.pathBuilder=new et}}]),e}(f.a),rt=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.engine=new Z,this.camera=new J,this.wayfinding=new nt,this.loader=null}}]),e}(f.a),it=function(){function t(e){i(this,t);var n=new rt(e);this.objectManager=new M,this.sceneManager=new k(this),this.engineManager=new O(this,n.engine),this.cameraManager=new I(this,n.camera),this.mouseManager=new j(this),this.wayfindingManager=new K(this,n.wayfinding),this.deviceId=null,this.defaultFloor=null,this.loader=n.loader}return b(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this.loader=e),this.loader.load().then(function(e){return t.projector=e.projector,t.objectManager.init(e,t.projector),t.sceneManager.init(e),t.cameraManager.init(t.projector),t.engineManager.init(e),t.mouseManager.init(),t.wayfindingManager.init(e),t.setDeviceId(e.deviceId,!1)})}},{key:"start",value:function(){this.engineManager.start()}},{key:"getDeviceId",value:function(){return this.deviceId}},{key:"setDeviceId",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.deviceId=t,this.defaultFloor=null,this.loader.loadCalibration(this.deviceId).then(function(t){var r=t.cameraCalibrations,i=t.defaultFloorId,o=t.userPosition;return null!==o&&(null===o.floorId?e.wayfindingManager.setUserAdsumPosition(o.position,null,!0):e.wayfindingManager.setUserAdsumPosition(o.position,e.objectManager.getFloor(o.floorId),!0)),e.cameraManager.setCameraCalibrations(r),null!==i&&(e.defaultFloor=e.objectManager.getFloor(i)),e.sceneManager.setCurrentFloor(e.defaultFloor,n)}).then(function(){return e.cameraManager.centerOnFloor(e.defaultFloor,n)}).then(function(){})}}]),t}(),ot=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),b(e,[{key:"reset",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.entityManager=null,this.shadowEnabled=!1,this.shadowMapSize=2048,this.fogEnabled=!1,this.fogRatio=0,this.fogColor=16777215,this.preferAmbientOcclusion=!0,this.shapeAmbientOcclusionTopColor=16777215,this.shapeAmbientOcclusionBottomColor=8421504,this.deviceId=null}},{key:"preferLambertMaterial",value:function(){return!1}},{key:"advancedLightingEnabled",value:function(){return!0}}]),e}(f.a),at=function(){function t(e,n){var r=this;i(this,t),this.texturesByReference=new Map;var o=[p.d.TEXTURE];n&&o.push(p.d.TEXTURE_OCCLUSION),e.findBy({context:function(t){return o.includes(t)}}).forEach(function(t){r.texturesByReference.set(t.reference,t)}),this.threeLoader=new l.TextureLoader,this.regex=/\/texture\/reference\/(?:[a-f0-9]{2,3}\/)*(.*)$/}return b(t,[{key:"load",value:function(t,e,n,r){var i=this.regex.exec(t),o=t;if(null!==i){var a,s=i[1];this.texturesByReference.has(s)&&(a=this.texturesByReference.get(s),o=a.uri)}return this.threeLoader.load(o,e,n,r)}}]),t}(),st={Group:l.Group,Matrix4:l.Matrix4,Vector3:l.Vector3,Quaternion:l.Quaternion,Vector4:l.Vector4,Math:l.Math,Object3D:l.Object3D,DoubleSide:l.DoubleSide,MeshLambertMaterial:l.MeshLambertMaterial,MeshBasicMaterial:l.MeshBasicMaterial,MeshPhongMaterial:l.MeshPhongMaterial,FrontSide:l.FrontSide,MultiMaterial:l.MultiMaterial,SkinnedMesh:l.SkinnedMesh,Mesh:l.Mesh,Line:l.Line,PerspectiveCamera:l.PerspectiveCamera,DirectionalLight:l.DirectionalLight,PointLight:l.PointLight,SpotLight:l.SpotLight,AmbientLight:l.AmbientLight,Geometry:l.Geometry,Vector2:l.Vector2,Color:l.Color,Face3:l.Face3,Loader:l.Loader,Texture:l.Texture,MirroredRepeatWrapping:l.MirroredRepeatWrapping,RepeatWrapping:l.RepeatWrapping,ClampToEdgeWrapping:l.ClampToEdgeWrapping,MixOperation:l.MixOperation,ImageLoader:l.ImageLoader,Scene:l.Scene},ut=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isSite=!0,t.buildings=new Set,t.spaces=new Set,t.labels=new Set,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.SiteObject}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0,i=0,o=0;if(null!==n&&(e=n,r=e.x,i=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.LabelObject#addLabel: Changing labelObject parent is not supported yet.");t.parent=this,this.labels.add(t),t.moveTo(r,i,o),this._mesh.add(t._mesh),t.update()}},{key:"_raycast",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,r)&&(r&&(this.buildings.forEach(function(e){e._raycast(t,n,r)}),this.labels.forEach(function(e){e._raycast(t,n,r)}),this.spaces.forEach(function(e){e._raycast(t,n,r)})),!0)}}]),e}(C),ct=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isBuilding=!0,t.site=null,t.floors=new Set,t.labels=new Set,t._labelGroup=new l.Group,t._initialColor=null,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.BuildingObject}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0,i=0,o=0;if(null!==n&&(e=n,r=e.x,i=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.SpaceObject#addLabel: Changing labelObject parent is not supported yet.");return t.parent=this,this.labels.add(t),t.moveTo(r,i,o),this._labelGroup.add(t._mesh),this.update(),this}},{key:"setColor",value:function(t){return this._mesh.material.color.set(t),this}},{key:"isInitialColor",value:function(){return this._initialColor.equals(this._mesh.material.color)}},{key:"resetColor",value:function(){return this._mesh.material.color.copy(this._initialColor),this}},{key:"_setMesh",value:function(t){return v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setMesh",this).call(this,t),this._mesh.add(this._labelGroup),this._updateLabelGroup(),this._initialColor=this._mesh.material.color.clone(),this}},{key:"_raycast",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,r)&&(r&&(this.floors.forEach(function(e){e._raycast(t,n,r)}),this.labels.forEach(function(e){e._raycast(t,n,r)})),!0)}},{key:"_updateLabelGroup",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=this.getSizeAndCenter(!1),n=t.size;this._labelGroup.position.setZ(n.z),this._labelGroup.updateMatrixWorld()}}]),e}(C),lt=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isFloor=!0,t.building=null,t.spaces=new Set,t.labels=new Set,t.altitude=null,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.FloorObject}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0,i=0,o=0;if(null!==n&&(e=n,r=e.x,i=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.LabelObject#addLabel: Changing labelObject parent is not supported yet.");t.parent=this,this.labels.add(t),t.moveTo(r,i,o),this._mesh.add(t._mesh),t.update()}},{key:"_raycast",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,r)&&(r&&(this.spaces.forEach(function(e){e._raycast(t,n,r)}),this.labels.forEach(function(e){e._raycast(t,n,r)})),!0)}}]),e}(C),ht=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isSpace=!0,t.parent=null,t.labels=new Set,t._labelGroup=new l.Group,t._initialColor=null,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.SpaceObject}},{key:"_setMesh",value:function(t){return v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setMesh",this).call(this,t),this._mesh.add(this._labelGroup),this._updateLabelGroup(),this._initialColor=this._mesh.material.color.clone(),this}},{key:"setColor",value:function(t){return this._mesh.material.color.set(t),this}},{key:"isInitialColor",value:function(){return this._initialColor.equals(this._mesh.material.color)}},{key:"resetColor",value:function(){return this._mesh.material.color.copy(this._initialColor),this}},{key:"isBounced",value:function(){return 1!==this._mesh.scale.z}},{key:"getBounceFactor",value:function(){return this._mesh.scale.z}},{key:"bounceUp",value:function(t){return this._mesh.scale.setZ(t),this.update(),this}},{key:"bounceDown",value:function(){return this.bounceUp(1)}},{key:"addLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0,i=0,o=0;if(null!==n&&(e=n,r=e.x,i=e.y,o=e.z),null!==t.parent)throw new Error("AdsumWebMap.SpaceObject#addLabel: Changing labelObject parent is not supported yet.");return t.parent=this,this.labels.add(t),t.moveTo(r,i,o),this._labelGroup.add(t._mesh),this.update(),this}},{key:"_raycast",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_raycast",this).call(this,t,n,r)&&(r&&this.labels.forEach(function(e){e._raycast(t,n,r)}),!0)}},{key:"update",value:function(){this._labelGroup.scale.z!==1/this.getBounceFactor()&&this._updateLabelGroup(),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"_updateLabelGroup",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=this.getSizeAndCenter(!1),n=t.size;this._labelGroup.scale.setZ(1/this.getBounceFactor()),this._labelGroup.position.setZ(n.z/this.getBounceFactor()),this._labelGroup.updateMatrixWorld()}}]),e}(C),ft=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,t),this.scene=null,this.site=null,this.buildingsMap=new Map,this.floorsMap=new Map,this.spacesMap=new Map,this.labelsMap=new Map,this.deviceId=e,this.projector=null,this.paths=null},dt={BILLBOARD:"BILLBOARD",STATIC:"STATIC",FLIP:"FLIP"},pt=new l.Vector3,gt=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isLabel=!0,t.parent=null,t.orientationMode=dt.BILLBOARD,t.autoScale=!1,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.LabelObject}},{key:"_onBeforeRender",value:function(t,n,r,i,o,a){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onBeforeRender",this).call(this,t,n,r,i,o,a);var s=!1;this.orientationMode===dt.BILLBOARD&&(this._mesh.quaternion.setFromRotationMatrix(this._mesh.parent.matrixWorld).inverse(),this._mesh.quaternion.multiply(r.quaternion).normalize(),s=!0);var u=new l.Vector3;this._mesh.getWorldPosition(u);var c=pt.subVectors(r.position,u).length();if(this.autoScale){var h=Math.tan(r.fov*Math.PI/180/2)*c/1e3;this.orientationMode===dt.BILLBOARD?(this._mesh.geometry.computeBoundingBox(),this._mesh.position.z-=this._mesh.geometry.boundingBox.max.y*this._mesh.scale.z,this._mesh.scale.set(h,h,h),this._mesh.position.z+=this._mesh.geometry.boundingBox.max.y*this._mesh.scale.z):this._mesh.scale.set(h,h,1)}s&&this._mesh.updateMatrixWorld()}}]),e}(C),mt=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isLabelImage=!0,t.width=null,t.height=null,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.LabelImageObject}}],[{key:"create",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Symbol("AdsumObjectId"),o=r.width,a=r.height,s=r.orientationMode,u=r.autoScale;return new Promise(function(e,r){n.load(t,function(t){e(new l.MeshBasicMaterial({color:16777215,side:l.FrontSide,map:t,transparent:!0,depthWrite:!1}))},void 0,r)}).then(function(t){var n=new l.PlaneGeometry(o,a),c=new l.Mesh(n,t),h=e._createFromMesh(c,r,i);if(s)switch(s){case dt.BILLBOARD:case dt.STATIC:h.orientationMode=s;break;default:console.warn("AdsumWebMap.LabelImageObject#create: Unsupported orientation mode "+s)}return u&&(h.autoScale=!0),h})}}]),e}(gt),vt=new Map,yt={TEXTURE_OVERSAMPLING:5,BACKGROUND_PADDING:10,LINE_HEIGHT_INTERVAL:1.25,renderOnTexture:function(t,e){var n=null;null===n&&(n=document.createElement("canvas"));var r=e.font,i=e.size,o=e.color,a=e.backgroundColor,s=i+"pt "+(void 0===r?"Arial":r),u=yt.getFontHeight(s),c=t.length*u,h=n.getContext("2d");h.textBaseline="hanging",h.textAlign="center",h.font=s;var f=0;t.forEach(function(t){f=Math.max(f,h.measureText(t).width)}),n.width=5*(f+10),n.height=5*(c+10),h.clearRect(0,0,n.width,n.height),a&&(h.fillStyle="rgba("+255*a.r+","+255*a.g+","+255*a.b+",0.7)",yt.fillRectRounded(h,0,0,n.width,n.height,20)),h.scale(5,5),h.textBaseline="hanging",h.font=s,h.textAlign="center",h.fillStyle="rgb("+255*o.r+","+255*o.g+","+255*o.b+")";for(var d=(u-u/1.25)/2,p=0;p<t.length;p++)h.fillText(t[p],Math.round(5+f/2),Math.round(p*u+(p+1)*d+5));var g=new l.CanvasTexture(n);return g.needsUpdate=!0,g},getFontHeight:function(t){if(vt.has(t))return vt.get(t);var e=null;null===e&&(e=document.createElement("canvas")),e.width=1e3,e.height=500;var n=e.getContext("2d");n.fillStyle="black",n.fillRect(0,0,e.width,e.height),n.textBaseline="top",n.fillStyle="white",n.font=t,n.fillText("gM",0,e.height/2);for(var r=n.getImageData(0,0,e.width,e.height).data,i=-1,o=-1,a=0;a<e.height;a++)for(var s=0;s<e.width;s++)if(0!==r[4*(a*e.width+s)]){-1===i&&(i=a),o=a+1;break}var u=1.25*(o-i);return vt.set(t,u),u},fillRectRounded:function(t,e,n,r,i,o){t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}},bt=function(t){function e(){var t;return i(this,e),t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.isLabelText=!0,t}return a(e,t),b(e,[{key:"getType",value:function(){return E.LabelTextObject}}],[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),r=t.split("\n"),i=yt.renderOnTexture(r,e),o=new l.PlaneGeometry(i.image.width/yt.TEXTURE_OVERSAMPLING,i.image.height/yt.TEXTURE_OVERSAMPLING),a=new l.MeshBasicMaterial({color:16777215,map:i,side:l.FrontSide,transparent:!0,depthWrite:!1}),s=this._createFromMesh(new l.Mesh(o,a),e,n);if(e.orientationMode)switch(e.orientationMode){case dt.BILLBOARD:case dt.STATIC:s.orientationMode=e.orientationMode;break;default:console.warn("AdsumWebMap.LabelImageObject#create: Unsupported orientation mode "+e.orientationMode)}return e.autoScale&&(s.autoScale=!0),s}}]),e}(gt),wt=new l.Vector3,_t=function(){function t(){i(this,t),this.levels=new Map,this.active=!0,this.currentLevel=null,this.currentDistance=null}return b(t,[{key:"addLevelState",value:function(t,e){this.levels.set(t,e)}},{key:"applyLod",value:function(t,e){if(this.active){var n=new l.Vector3,r=new l.Vector3;e.getWorldPosition(n),t._mesh.getWorldPosition(r),wt.subVectors(n,r);var i=wt.length();if(this.currentDistance!==i){var o=null,a=null;this.levels.forEach(function(t,e){e>i||null!==a&&e<a||(o=t,a=e)}),null!==a?(this.currentDistance=i,a!==this.currentLevel&&o.apply(t)):console.warn("AdsumWebMap.LevelOfDetails: cannot find LevelState matching, make sure you have a default one which startAt 0")}}}}]),t}(),xt=function(){function t(){i(this,t)}return b(t,[{key:"apply",value:function(t){}}]),t}(),Et=function(t){function e(t){var n;return i(this,e),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.displayMode=t,n}return a(e,t),b(e,[{key:"apply",value:function(t){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"apply",this).call(this,t),t.setDisplayMode(this.displayMode)}}]),e}(xt),At=new l.Vector3,Ct=function(){function t(e,n,r){i(this,t),this.matrix=new l.Matrix4,this.inverseMatrix=null,this.matrix.set(e[0],e[1],0,n[0],e[3],e[4],0,n[1],0,0,1,0,0,0,0,1);var o=new l.Vector3;o.setFromMatrixScale(this.matrix),this.scale=(o.x+o.y)/2;var a=g.a.fromDegree(r.latitude,r.longitude,0);this.utmGridZone=new g.d(a)}return b(t,null,[{key:"createFake",value:function(){return new this([1,0,0,0,1,0],[0,0,0],{latitude:0,longitude:0})}}]),b(t,[{key:"meterToAdsumDistance",value:function(t){return t*this.scale}},{key:"adsumDistanceToMeter",value:function(t){return t/this.scale}},{key:"gpsToAdsum",value:function(t){return this.utmToAdsum(this.gpsToUtm(t))}},{key:"gpsToUtm",value:function(t){var e=t.lat,n=t.long,r=t.alt;return g.b.toUtm(g.a.fromDegree(e,n,r),this.utmGridZone)}},{key:"utmToAdsum",value:function(t){var e=t.E,n=t.N,r=t.alt,i=new l.Vector3(e,n,r);return i.applyMatrix4(this.matrix),i}},{key:"adsumToGps",value:function(t){return this.utmToGps(this.adsumToUtm(t))}},{key:"adsumToUtm",value:function(t){return null===this.inverseMatrix&&(this.inverseMatrix=new l.Matrix4,this.inverseMatrix.getInverse(this.matrix)),At.copy(t),At.applyMatrix4(this.inverseMatrix),new g.c(At.x,At.y,At.z,this.utmGridZone.hemi,this.utmGridZone.zone)}},{key:"utmToGps",value:function(t){return g.b.toGps(t)}}]),t}(),St=function(){function t(e){i(this,t),this.options=new ot(e),this.isAoMap=!0,this.result=new ft(e.deviceId),this.adsumTextureLoader=null,this._registerAdsumTextureLoader()}return b(t,[{key:"load",value:function(){var t=this;return this._startEntityManagerLoading(),this._registerAdsumTextureLoader().then(function(){return Promise.all([t._loadCollada(),t._loadProjectorTransform().then(function(){return t._loadLabels()}),t._loadPaths()])}).then(function(){return t._loadLabels()}).then(function(){return t._addLabels()}).then(function(){return t.result.scene.updateMatrixWorld(!0),t.result})}},{key:"_loadCollada",value:function(){var t=this,e=this.options.entityManager.getRepository("File"),n=this.options.entityManager.getRepository("MapFile"),r=this.options.entityManager.getRepository("Place");return Promise.all([e.load(),n.load()]).then(function(){var e=t._getColladaUri();return Promise.all([t._parseCollada(e),r.load()])}).then(function(e){var n=m(e,1),i=n[0].scene;t.result.scene=i,t._parseAndTransformAdsumScene(i,r),t._adjustSceneSettings()})}},{key:"loadCalibration",value:function(t){var e=this.options.entityManager.getRepository("SiteCalibration"),n=this.options.entityManager.getRepository("FloorCalibration");return Promise.all([e.load(),n.load()]).then(function(){var r=e.findOneBy({device:function(e){return e.is(t)}}),i=null,o=null,a=new Map;if(null!==r&&(n.getList(r.floor_calibrations).forEach(function(t){var e=new R;e.eye.copy(t.eye),e.up.copy(t.up),e.target.copy(t.target),e.zoomMin=t.zoom_min||L.ZOOM_MIN,e.zoomMax=t.zoom_max||L.ZOOM_MAX;var n=-1===t.floor_id?null:t.floor_id;a.set(n,e)}),i=-1===r.start_floor?null:r.start_floor,null!==r.start_point_floor)){var s=r.start_point_floor;o={floorId:-1!==s?s:null,position:r.start_point_position}}return{cameraCalibrations:a,defaultFloorId:i,userPosition:o}})}},{key:"_loadLabels",value:function(){var t=this,e=this.options.entityManager.getRepository("CustomObject"),n=this.options.entityManager.getRepository("File");return Promise.all([e.load(),n.load()]).then(function(){var r=[];return e.getAll().forEach(function(e){var i={orientationMode:e.orientation_mode,autoScale:e.autoscale,placeId:e.place.value};if(0!==e.priority){var o=new _t;o.addLevelState(0,new Et(w.VISIBLE)),o.addLevelState(200*e.priority,new Et(w.NONE)),i.levelOfDetails=o}if(e.type===p.b.PICTO){var a=n.get(e.file);i.width=e.width,i.height=e.height,r.push(mt.create(a.uri,t.adsumTextureLoader,i,e.id))}else{var s=e.label.replace(/<br[ ]*\/?>/gi,"\n");i.font=e.font,i.size=e.font_size,i.color=new l.Color(e.font_color),i.backgroundColor=null===e.background_color?null:new l.Color(e.background_color),r.push(Promise.resolve(bt.create(s,i,e.id)))}}),Promise.all(r).then(function(e){e.forEach(function(e){t.result.labelsMap.set(e.id,e)})})})}},{key:"_startEntityManagerLoading",value:function(){this.options.entityManager.getRepository("Site").load(),this.options.entityManager.getRepository("MapFile").load(),this.options.entityManager.getRepository("File").load(),this.options.entityManager.getRepository("Place").load(),this.options.entityManager.getRepository("CustomObject").load(),this.options.entityManager.getRepository("SiteCalibration").load(),this.options.entityManager.getRepository("FloorCalibration").load()}},{key:"_registerAdsumTextureLoader",value:function(){var t=this;return this.options.entityManager.getRepository("File").load().then(function(){t.adsumTextureLoader=new at(t.options.entityManager.getRepository("File"),t.isAoMap),l.Loader.Handlers.add(t.adsumTextureLoader.regex,t.adsumTextureLoader)})}},{key:"_getColladaUri",value:function(){var t=this.options.entityManager.getRepository("File"),e=this.options.entityManager.getRepository("MapFile"),n=e.findOneBy({type:p.e.AO_DAE,file:function(t){return null!==t.value}}),r=null;if(this.isAoMap&&null!==n)r=n.file;else{var i=e.findOneBy({type:p.e.DAE,file:function(t){return null!==t.value}});if(null===i)throw new Error("AdsumWebMap.AdsumLoader: No map found");r=i.file,this.isAoMap=!1}return t.get(r).uri}},{key:"_parseCollada",value:function(t){return new Promise(function(e,n){return(new c).load(t,e,null,n)})}},{key:"_parseAndTransformAdsumScene",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t;if(!t.geometry&&!t.material&&t.children.length>0&&("Mesh"===t.children[0].type||t.children[0].isLight)){var i=t.parent;i.remove(t);var o=t.children[0];o.isLight?(o.matrix=t.matrix,o.matrix.decompose(o.position,o.quaternion,o.scale)):o.applyMatrix(t.matrix),i.add(o);for(var a=t.children.length-1;a>=0;a--){var s=t.children[a];o.add(s)}(r=o).name=t.name,r.colladaId=t.colladaId,t.dispose&&t.dispose()}var u=r.name||"";if(r.material)if(r.material.flatShading=!0,r.material.side=l.FrontSide,r.material.isMeshPhongMaterial?(r.material.emissionMap&&!r.material.map&&(r.material.map=r.material.emissionMap,r.material.emissionMap=null,r.material.color=16777215),r.material.shininess=1e-4):r.material.isMeshLambertMaterial&&r.material.emissionMap&&!r.material.map&&(r.material.map=r.material.emissionMap,r.material.emissionMap=null),r.material.lightMap)r.material=new l.MeshPhongMaterial({aoMap:r.material.lightMap,map:r.material.map,color:r.material.color});else if(this.options.preferLambertMaterial()&&r.material.isMeshPhongMaterial){for(var c=["alphaTest","blendDst","blendDstAlpha","blendEquation","blendEquationAlpha","blending","blendSrc","blendSrcAlpha","clipIntersection","clippingPlanes","clipShadows","colorWrite","depthFunc","depthTest","depthWrite","fog","lights","name","overdraw","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","precision","premultipliedAlpha","dithering","flatShading","side","transparent","vertexColors","visible","userData","alphaMap","aoMap","aoMapIntensity","color","combine","emissive","emissiveMap","emissiveIntensity","envMap","lightMap","lightMapIntensity","map","morphNormals","morphTargets","reflectivity","refractionRatio","skinning","specularMap","wireframe","wireframeLinecap","wireframeLinejoin","wireframeLinewidth"],h={},f=0;f<c.length;f++){var d=c[f];h[d]=r.material[d]}r.material=new l.MeshLambertMaterial(h)}if(u.startsWith("SITE"))this.isAoMap&&(r.rotateX(-Math.PI/2),r.updateMatrix()),this.result.site=ut._createFromMesh(r,{},-1),n=this.result.site;else if(u.startsWith("BUILDING")){var p=u.match(/BUILDING_(\d+)_.*/),g={},m=parseInt(p[1],10),v=e.findOneBy({building_id:m});null===v?console.warn("AdsumLoader: No place associated to building "+m):g.placeId=v.id;var y=ct._createFromMesh(r,g,m);y.site=n,y.site.buildings.add(y),this.result.buildingsMap.set(y.id,y),n=y}else if(u.startsWith("FLOOR")){var b=u.match(/FLOOR_(\d+)_.*/),w=lt._createFromMesh(r,{},parseInt(b[1],10));w.altitude=r.position.z,w.building=n,w.building.floors.add(w),this.result.floorsMap.set(w.id,w),n=w}else if(u.startsWith("SHAPE")||u.startsWith("STORE")){var _=u.match(/(?:SHAPE|STORE)_(\d+)_.*/),x={},E=parseInt(_[1],10),A=e.findOneBy({shape_id:E});null===A?console.warn("AdsumLoader: No place associated to space "+E):x.placeId=A.id;var C=ht._createFromMesh(r,x,E);C.parent=n,C.parent.spaces.add(C),this.result.spacesMap.set(C.id,C),n=C}for(var S=r.children.length-1;S>=0;S--)this._parseAndTransformAdsumScene(r.children[S],e,n)}},{key:"_adjustSceneSettings",value:function(){var t=this;this.result.scene.traverse(function(e){e instanceof l.Mesh&&(e.material.shininess=1e-5,t.options.shadowEnabled&&(e!==t.result.site._mesh&&(e.castShadow=!0),e.receiveShadow=!0))}),this._createLights(),this._createFog(),this.result.site._mesh.material.emissive&&this.result.site._mesh.material.emissive.set(0),this.result.site._mesh.material.shininess&&(this.result.site._mesh.material.shininess=1e-5),this.result.buildingsMap.forEach(function(e){var n=e._mesh;if(n.material&&n.material.specular&&n.material.specular.set(0,0,0),n.geometry){var r=new l.Vector3;n.geometry.computeBoundingBox(),n.geometry.boundingBox.getCenter(r),n.geometry.center(),n.geometry.translate(0,0,r.z),r.z=0,r.multiply(n.scale),r.applyQuaternion(n.quaternion),n.position.add(r),n.children.forEach(function(t){t.position.sub(r)}),n.updateMatrix(),n.updateMatrixWorld()}t._colorShapeVertices(n)}),this.result.floorsMap.forEach(function(t){t._mesh.material.emissive&&t._mesh.material.emissive.set(0),t._mesh.material.shininess&&(t._mesh.material.shininess=1e-5)}),this.result.spacesMap.forEach(function(e){var n=e._mesh;if(t._colorShapeVertices(n),n.geometry){var r=new l.Vector3;n.geometry.computeBoundingBox(),n.geometry.boundingBox.getCenter(r),n.geometry.center(),n.geometry.translate(0,0,r.z),r.z=0,r.multiply(n.scale),r.applyQuaternion(n.quaternion),n.position.add(r),n.updateMatrix(),n.updateMatrixWorld()}})}},{key:"_colorShapeVertices",value:function(t){if(this.isAoMap){var e=t.geometry,n=new l.Color(this.options.shapeAmbientOcclusionTopColor),r=new l.Color(this.options.shapeAmbientOcclusionBottomColor);e.faces.forEach(function(t){var i=n,o=n,a=n;e.vertices[t.a]&&0===e.vertices[t.a].z&&(i=r),e.vertices[t.b]&&0===e.vertices[t.b].z&&(o=r),e.vertices[t.c]&&0===e.vertices[t.c].z&&(a=r),t.vertexColors.push(i),t.vertexColors.push(o),t.vertexColors.push(a)}),e.colorsNeedUpdate=!0,t.material.vertexColors=l.VertexColors,t.material.needsUpdate=!0}}},{key:"_createLights",value:function(){var t=this.options.advancedLightingEnabled()?.5:1,e=new l.HemisphereLight(16777215,8947848,t);if(e.position.set(0,0,1),this.result.scene.add(e),e.updateMatrixWorld(),this.options.advancedLightingEnabled()){var n=new l.DirectionalLight(16777215,.2);n.position.set(1,0,0),this.result.scene.add(n),n.updateMatrixWorld();var r=new l.Box3,i=new l.Sphere;r.setFromObject(this.result.scene).getBoundingSphere(i);var o=i.radius,a=i.center.clone();a.z+=o/2,a.y+=o/2,a.x-=o/2;var s=new l.DirectionalLight(16777215,.85);s.position.copy(a),s.target.position.copy(i.center),this.options.shadowEnabled&&(s.castShadow=!0,s.shadow.camera.near=o/4,s.shadow.camera.far=2*o,s.shadow.camera.right=o,s.shadow.camera.left=-o,s.shadow.camera.top=o,s.shadow.camera.bottom=-o,s.shadow.mapSize.width=this.options.shadowMapSize,s.shadow.mapSize.height=this.options.shadowMapSize),this.result.scene.add(s.target),this.result.scene.add(s),s.updateMatrixWorld(),s.target.updateMatrixWorld()}}},{key:"_createFog",value:function(){this.options.fogEnabled&&(this.result.scene.fog=new l.FogExp2(this.options.fogColor,this.options.fogRatio))}},{key:"_addLabels",value:function(){var t=this,e=this.options.entityManager.getRepository("Place"),n=this.options.entityManager.getRepository("CustomObject");return e.load().then(function(){t.result.labelsMap.forEach(function(r){var i=n.get(r.id),o=e.get(i.place),a={x:i.offset.x,y:i.offset.y,z:i.offset.z};if(i.orientation_mode===p.a.BILLBOARD){var s=r.getSizeAndCenter(),u=s.size;a.z+=u.y/2}else a.z+=1.1;var c=i.orientation_mode===p.a.STATIC;i.rotation&&c&&r.rotateZ(i.rotation*Math.PI/180),i.permanent_display||r.setDisplayMode(w.NONE),null!==o.shape_id?t.result.spacesMap.get(o.shape_id).addLabel(r,a):null!==o.building_id?t.result.buildingsMap.get(o.building_id).addLabel(r,a):-1===o.floor_id?t.result.site.addLabel(r,{x:a.x+o.position.x,y:a.y+o.position.y,z:a.z+o.position.z}):t.result.floorsMap.get(o.floor_id).addLabel(r,{x:a.x+o.position.x,y:a.y+o.position.y,z:a.z+o.position.z})})})}},{key:"_loadProjectorTransform",value:function(){var t=this,e=this.options.entityManager.getRepository("Site");return e.load().then(function(){var n=e.getCurrent();if(n.gps_positions.size<4||6!==n.gps_transform.size||3!==n.gps_translate.size)return console.warn("AdsumWebMap.AdsumLoader: No gps positions available, wayfinding will not be accurate (we assume world unit match meter) !!"),void(t.result.projector=Ct.createFake());t.result.projector=new Ct(Array.from(n.gps_transform),Array.from(n.gps_translate),Array.from(n.gps_positions)[0])})}},{key:"_loadPaths",value:function(){var t=this,e=this.options.entityManager.getRepository("MapFile");return e.load().then(function(){var n=e.findOneBy({type:p.e.PATH});null===n?(console.warn("AdsumWebMap.AdsumLoader: No paths found, wayfinding will not be working !"),t.result.paths=new Map,t.result.paths.set("nodes",[]),t.result.paths.set("links",[])):t.result.paths=n.paths})}}]),t}(),Mt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.from=e,this.to=n,this.pmr=r,this._distance=null,this.pathSections=[],this.computed=!1}return b(t,[{key:"getDistance",value:function(){var t=this;return this.computed?(null===this._distance&&(this._distance=0,this.pathSections.forEach(function(e){t._distance+=e.getDistance()})),this._distance):null}},{key:"clear",value:function(){this.computed=!1,this.pathSections=[],this._distance=null}}]),t}()},function(t,e,n){"use strict";function r(){}function i(t,e){this.x=t||0,this.y=e||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function a(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function s(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function u(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function c(t,e,n,r,o,a,s,l,h,f){Object.defineProperty(this,"id",{value:Ou++}),this.uuid=ku.generateUUID(),this.name="",this.image=void 0!==t?t:c.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:c.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ls,this.wrapT=void 0!==r?r:ls,this.magFilter=void 0!==o?o:gs,this.minFilter=void 0!==a?a:vs,this.anisotropy=void 0!==h?h:1,this.format=void 0!==s?s:Ps,this.type=void 0!==l?l:ys,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new u,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:bu,this.version=0,this.onUpdate=null}function l(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function h(t,e,n){this.width=t,this.height=e,this.scissor=new l(0,0,t,e),this.scissorTest=!1,this.viewport=new l(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=gs),this.texture=new c(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function f(t,e,n){h.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function d(t,e,n,r,i,o,a,s,u,l,h,f){c.call(this,null,o,a,s,u,l,r,i,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:fs,this.minFilter=void 0!==l?l:fs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function p(t,e){this.min=void 0!==t?t:new s(1/0,1/0,1/0),this.max=void 0!==e?e:new s(-1/0,-1/0,-1/0)}function g(t,e){this.center=void 0!==t?t:new s,this.radius=void 0!==e?e:0}function m(t,e){this.normal=void 0!==t?t:new s(1,0,0),this.constant=void 0!==e?e:0}function v(t,e,n,r,i,o){this.planes=[void 0!==t?t:new m,void 0!==e?e:new m,void 0!==n?n:new m,void 0!==r?r:new m,void 0!==i?i:new m,void 0!==o?o:new m]}function y(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function b(t){function e(e,n){var r=e.array,i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=t.FLOAT;return r instanceof Float32Array?a=t.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=t.UNSIGNED_SHORT:r instanceof Int16Array?a=t.SHORT:r instanceof Uint32Array?a=t.UNSIGNED_INT:r instanceof Int32Array?a=t.INT:r instanceof Int8Array?a=t.BYTE:r instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}function n(e,n,r){var i=n.array,o=n.updateRange;t.bindBuffer(r,e),!1===n.dynamic?t.bufferData(r,i,t.STATIC_DRAW):-1===o.count?t.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function r(t){return t.isInterleavedBufferAttribute&&(t=t.data),a.get(t)}function i(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=a.get(e);n&&(t.deleteBuffer(n.buffer),a.delete(e))}function o(t,r){t.isInterleavedBufferAttribute&&(t=t.data);var i=a.get(t);void 0===i?a.set(t,e(t,r)):i.version<t.version&&(n(i.buffer,t,r),i.version=t.version)}var a=new WeakMap;return{get:r,remove:i,update:o}}function w(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||w.DefaultOrder}function _(){this.mask=1}function x(){function t(){i.setFromEuler(r,!1)}function e(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:Bu++}),this.uuid=ku.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=x.DefaultUp.clone();var n=new s,r=new w,i=new a,c=new s(1,1,1);r.onChange(t),i.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:c},modelViewMatrix:{value:new o},normalMatrix:{value:new u}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function E(){x.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function A(t,e,n,r,i,o){E.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function C(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new s,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new y,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function S(){Object.defineProperty(this,"id",{value:Iu+=2}),this.uuid=ku.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function M(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function T(t,e,n){M.call(this,new Int8Array(t),e,n)}function k(t,e,n){M.call(this,new Uint8Array(t),e,n)}function O(t,e,n){M.call(this,new Uint8ClampedArray(t),e,n)}function F(t,e,n){M.call(this,new Int16Array(t),e,n)}function P(t,e,n){M.call(this,new Uint16Array(t),e,n)}function L(t,e,n){M.call(this,new Int32Array(t),e,n)}function R(t,e,n){M.call(this,new Uint32Array(t),e,n)}function D(t,e,n){M.call(this,new Float32Array(t),e,n)}function B(t,e,n){M.call(this,new Float64Array(t),e,n)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function N(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}function j(){Object.defineProperty(this,"id",{value:Nu+=2}),this.uuid=ku.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function U(t,e,n,r,i,o){S.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new $(t,e,n,r,i,o)),this.mergeVertices()}function $(t,e,n,r,i,o){function a(t,e,n,r,i,o,a,g,m,v,y){var b,w,_=o/m,x=a/v,E=o/2,A=a/2,C=g/2,S=m+1,M=v+1,T=0,k=0,O=new s;for(w=0;w<M;w++){var F=w*x-A;for(b=0;b<S;b++){var P=b*_-E;O[t]=P*r,O[e]=F*i,O[n]=C,l.push(O.x,O.y,O.z),O[t]=0,O[e]=0,O[n]=g>0?1:-1,h.push(O.x,O.y,O.z),f.push(b/m),f.push(1-w/v),T+=1}}for(w=0;w<v;w++)for(b=0;b<m;b++){var L=d+b+S*w,R=d+b+S*(w+1),D=d+(b+1)+S*(w+1),B=d+(b+1)+S*w;c.push(L,R,B),c.push(R,D,B),k+=6}u.addGroup(p,k,y),p+=k,d+=T}j.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var u=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var c=[],l=[],h=[],f=[],d=0,p=0;a("z","y","x",-1,-1,n,e,t,o,i,0),a("z","y","x",1,-1,n,e,-t,o,i,1),a("x","z","y",1,1,t,n,e,r,o,2),a("x","z","y",1,-1,t,n,-e,r,o,3),a("x","y","z",1,-1,t,e,n,r,i,4),a("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(f,2))}function z(t,e,n,r){S.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new H(t,e,n,r)),this.mergeVertices()}function H(t,e,n,r){j.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},t=t||1,e=e||1;var i,o,a=t/2,s=e/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,h=c+1,f=t/u,d=e/c,p=[],g=[],m=[],v=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<l;i++){var b=i*f-a;g.push(b,-y,0),m.push(0,0,1),v.push(i/u),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var w=i+l*o,_=i+l*(o+1),x=i+1+l*(o+1),E=i+1+l*o;p.push(w,_,E),p.push(_,x,E)}this.setIndex(p),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(m,3)),this.addAttribute("uv",new D(v,2))}function V(){Object.defineProperty(this,"id",{value:ju++}),this.uuid=ku.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ya,this.side=ca,this.flatShading=!1,this.vertexColors=pa,this.opacity=1,this.transparent=!1,this.blendSrc=Pa,this.blendDst=La,this.blendEquation=Ea,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=za,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(t){V.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function G(t){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function q(t,e){this.origin=void 0!==t?t:new s,this.direction=void 0!==e?e:new s}function X(t,e){this.start=void 0!==t?t:new s,this.end=void 0!==e?e:new s}function Y(t,e,n){this.a=void 0!==t?t:new s,this.b=void 0!==e?e:new s,this.c=void 0!==n?n:new s}function K(t,e){x.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new W({color:16777215*Math.random()}),this.drawMode=mu,this.updateMorphTargets()}function Z(t,e,n,r){function i(e,r,i,h){var f=r.background;null===f?o(c,l):f&&f.isColor&&(o(f,1),h=!0),(t.autoClear||h)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&f.isCubeTexture?(void 0===u&&(u=new K(new $(1,1,1),new G({uniforms:Du.cube.uniforms,vertexShader:Du.cube.vertexShader,fragmentShader:Du.cube.fragmentShader,side:la,depthTest:!0,depthWrite:!1,fog:!1})),u.geometry.removeAttribute("normal"),u.geometry.removeAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(u.geometry)),u.material.uniforms.tCube.value=f,e.push(u,u.geometry,u.material,0,null)):f&&f.isTexture&&(void 0===a&&(a=new A(-1,1,1,-1,0,1),s=new K(new H(2,2),new W({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=f,t.renderBufferDirect(a,null,s.geometry,s.material,s,null))}function o(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}var a,s,u,c=new y(0),l=0;return{getClearColor:function(){return c},setClearColor:function(t,e){c.set(t),l=void 0!==e?e:1,o(c,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,o(c,l)},render:i}}function J(t,e,n){function r(t){a=t}function i(e,r){t.drawArrays(a,e,r),n.update(r,a)}function o(t,r,i){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var s=t.attributes.position;s.isInterleavedBufferAttribute?(i=s.data.count,o.drawArraysInstancedANGLE(a,0,i,t.maxInstancedCount)):o.drawArraysInstancedANGLE(a,r,i,t.maxInstancedCount),n.update(i,a,t.maxInstancedCount)}var a;this.setMode=r,this.render=i,this.renderInstances=o}function Q(t,e,n){function r(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=l>0,y=!!e.get("OES_texture_float");return{getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function tt(){function t(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function e(t,e,r,i){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=l.value,!0!==i||null===a){var u=r+4*o,h=e.matrixWorldInverse;c.getNormalMatrix(h),(null===a||a.length<u)&&(a=new Float32Array(u));for(var f=0,d=r;f!==o;++f,d+=4)s.copy(t[f]).applyMatrix4(h,c),s.normal.toArray(a,d),a[d+3]=s.constant}l.value=a,l.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,s=new m,c=new u,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==i||o;return o=n,r=e(t,a,0),i=t.length,s},this.beginShadows=function(){a=!0,e(null)},this.endShadows=function(){a=!1,t()},this.setState=function(n,s,u,c,h,f){if(!o||null===n||0===n.length||a&&!u)a?e(null):t();else{var d=a?0:i,p=4*d,g=h.clippingState||null;l.value=g,g=e(n,c,p,f);for(var m=0;m!==p;++m)g[m]=r[m];h.clippingState=g,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function et(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function nt(t,e,n){function r(t){var i=t.target,o=s[i.id];null!==o.index&&e.remove(o.index);for(var a in o.attributes)e.remove(o.attributes[a]);i.removeEventListener("dispose",r),delete s[i.id];var c=u[i.id];c&&(e.remove(c),delete u[i.id]),c=u[o.id],c&&(e.remove(c),delete u[o.id]),n.memory.geometries--}function i(t,e){var i=s[e.id];return i||(e.addEventListener("dispose",r),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new j).setFromObject(t)),i=e._bufferGeometry),s[e.id]=i,n.memory.geometries++,i)}function o(n){var r=n.index,i=n.attributes;null!==r&&e.update(r,t.ELEMENT_ARRAY_BUFFER);for(var o in i)e.update(i[o],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,c=s.length;u<c;u++)e.update(s[u],t.ARRAY_BUFFER)}function a(n){var r=u[n.id];if(r)return r;var i=[],o=n.index,a=n.attributes;if(null!==o)for(var s=o.array,c=0,l=s.length;c<l;c+=3){var h=s[c+0],f=s[c+1],d=s[c+2];i.push(h,f,f,d,d,h)}else for(var s=a.position.array,c=0,l=s.length/3-1;c<l;c+=3){var h=c+0,f=c+1,d=c+2;i.push(h,f,f,d,d,h)}return r=new(N(i)>65535?R:P)(i,1),e.update(r,t.ELEMENT_ARRAY_BUFFER),u[n.id]=r,r}var s={},u={};return{get:i,update:o,getWireframeAttribute:a}}function rt(t,e,n){function r(t){s=t}function i(t){u=t.type,c=t.bytesPerElement}function o(e,r){t.drawElements(s,r,u,e*c),n.update(r,s)}function a(t,r,i){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(s,i,u,r*c,t.maxInstancedCount),n.update(i,s,t.maxInstancedCount)}var s,u,c;this.setMode=r,this.setIndex=i,this.render=o,this.renderInstances=a}function it(t){function e(e,n,r){switch(r=r||1,i.calls++,n){case t.TRIANGLES:i.triangles+=r*(e/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:i.triangles+=r*(e-2);break;case t.LINES:i.lines+=r*(e/2);break;case t.LINE_STRIP:i.lines+=r*(e-1);break;case t.LINE_LOOP:i.lines+=r*e;break;case t.POINTS:i.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}var r={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:r,render:i,programs:null,autoReset:!0,reset:n,update:e}}function ot(t,e){return Math.abs(e[1])-Math.abs(t[1])}function at(t){function e(e,i,o,a){var s=e.morphTargetInfluences,u=s.length,c=n[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];n[i.id]=c}for(var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal,l=0;l<u;l++){var d=c[l];0!==d[1]&&(h&&i.removeAttribute("morphTarget"+l),f&&i.removeAttribute("morphNormal"+l))}for(var l=0;l<u;l++){var d=c[l];d[0]=l,d[1]=s[l]}c.sort(ot);for(var l=0;l<8;l++){var d=c[l];if(d){var p=d[0],g=d[1];if(g){h&&i.addAttribute("morphTarget"+l,h[p]),f&&i.addAttribute("morphNormal"+l,f[p]),r[l]=g;continue}}r[l]=0}a.getUniforms().setValue(t,"morphTargetInfluences",r)}var n={},r=new Float32Array(8);return{update:e}}function st(t,e){function n(n){var r=e.render.frame,o=n.geometry,a=t.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),t.update(a),i[a.id]=r),a}function r(){i={}}var i={};return{update:n,dispose:r}}function ut(t,e,n,r,i,o,a,s,u,l){t=void 0!==t?t:[],e=void 0!==e?e:ns,c.call(this,t,e,n,r,i,o,a,s,u,l),this.flipY=!1}function ct(){this.seq=[],this.map={}}function lt(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=zu[i];if(void 0===o&&(o=new Float32Array(i),zu[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function ht(t,e){var n=Hu[e];void 0===n&&(n=new Int32Array(e),Hu[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function ft(t,e){t.uniform1f(this.addr,e)}function dt(t,e){t.uniform1i(this.addr,e)}function pt(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function gt(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function mt(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function vt(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function yt(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(Wu.set(e.elements),t.uniformMatrix3fv(this.addr,!1,Wu))}function bt(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(Vu.set(e.elements),t.uniformMatrix4fv(this.addr,!1,Vu))}function wt(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTexture2D(e||Uu,r)}function _t(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTextureCube(e||$u,r)}function xt(t,e){t.uniform2iv(this.addr,e)}function Et(t,e){t.uniform3iv(this.addr,e)}function At(t,e){t.uniform4iv(this.addr,e)}function Ct(t){switch(t){case 5126:return ft;case 35664:return pt;case 35665:return gt;case 35666:return mt;case 35674:return vt;case 35675:return yt;case 35676:return bt;case 35678:case 36198:return wt;case 35680:return _t;case 5124:case 35670:return dt;case 35667:case 35671:return xt;case 35668:case 35672:return Et;case 35669:case 35673:return At}}function St(t,e){t.uniform1fv(this.addr,e)}function Mt(t,e){t.uniform1iv(this.addr,e)}function Tt(t,e){t.uniform2fv(this.addr,lt(e,this.size,2))}function kt(t,e){t.uniform3fv(this.addr,lt(e,this.size,3))}function Ot(t,e){t.uniform4fv(this.addr,lt(e,this.size,4))}function Ft(t,e){t.uniformMatrix2fv(this.addr,!1,lt(e,this.size,4))}function Pt(t,e){t.uniformMatrix3fv(this.addr,!1,lt(e,this.size,9))}function Lt(t,e){t.uniformMatrix4fv(this.addr,!1,lt(e,this.size,16))}function Rt(t,e,n){var r=e.length,i=ht(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(e[o]||Uu,i[o])}function Dt(t,e,n){var r=e.length,i=ht(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(e[o]||$u,i[o])}function Bt(t){switch(t){case 5126:return St;case 35664:return Tt;case 35665:return kt;case 35666:return Ot;case 35674:return Ft;case 35675:return Pt;case 35676:return Lt;case 35678:return Rt;case 35680:return Dt;case 5124:case 35670:return Mt;case 35667:case 35671:return xt;case 35668:case 35672:return Et;case 35669:case 35673:return At}}function It(t,e,n){this.id=t,this.addr=n,this.setValue=Ct(e.type)}function Nt(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=Bt(e.type)}function jt(t){this.id=t,ct.call(this)}function Ut(t,e){t.seq.push(e),t.map[e.id]=e}function $t(t,e,n){var r=t.name,i=r.length;for(Gu.lastIndex=0;;){var o=Gu.exec(r),a=Gu.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Ut(n,void 0===c?new It(s,t,e):new Nt(s,t,e));break}var l=n.map,h=l[s];void 0===h&&(h=new jt(s),Ut(n,h)),n=h}}function zt(t,e,n){ct.call(this),this.renderer=n;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=t.getActiveUniform(e,i),a=o.name;$t(o,t.getUniformLocation(e,a),this)}}function Ht(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Vt(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!1===t.getShaderParameter(r,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(r),Ht(n)),r}function Wt(t){switch(t){case bu:return["Linear","( value )"];case wu:return["sRGB","( value )"];case xu:return["RGBE","( value )"];case Au:return["RGBM","( value, 7.0 )"];case Cu:return["RGBM","( value, 16.0 )"];case Su:return["RGBD","( value, 256.0 )"];case _u:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Gt(t,e){var n=Wt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function qt(t,e){var n=Wt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xt(t,e){var n;switch(e){case Za:n="Linear";break;case Ja:n="Reinhard";break;case Qa:n="Uncharted2";break;case ts:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yt(t,e,n){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jt).join("\n")}function Kt(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Zt(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function Jt(t){return""!==t}function Qt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function te(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ee(t){function e(t,e){var n=Fu[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ee(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(n,e)}function ne(t){function e(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}function re(t,e,n,r,i,o){var a=t.context,s=r.defines,u=i.vertexShader,c=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";o.shadowMapType===sa?l="SHADOWMAP_TYPE_PCF":o.shadowMapType===ua&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case ns:case rs:h="ENVMAP_TYPE_CUBE";break;case ss:case us:h="ENVMAP_TYPE_CUBE_UV";break;case is:case os:h="ENVMAP_TYPE_EQUIREC";break;case as:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case rs:case os:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case qa:d="ENVMAP_BLENDING_MULTIPLY";break;case Xa:d="ENVMAP_BLENDING_MIX";break;case Ya:d="ENVMAP_BLENDING_ADD"}}var p,g,m=t.gammaFactor>0?t.gammaFactor:1,v=Yt(r.extensions,o,e),y=Kt(s),b=a.createProgram();r.isRawShaderMaterial?(p=[y].filter(Jt).join("\n"),p.length>0&&(p+="\n"),g=[v,y].filter(Jt).join("\n"),g.length>0&&(g+="\n")):(p=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jt).join("\n"),g=[v,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ka?"#define TONE_MAPPING":"",o.toneMapping!==Ka?Fu.tonemapping_pars_fragment:"",o.toneMapping!==Ka?Xt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Fu.encodings_pars_fragment:"",o.mapEncoding?Gt("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Gt("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Gt("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?qt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Jt).join("\n")),u=ee(u),u=Qt(u,o),u=te(u,o),c=ee(c),c=Qt(c,o),c=te(c,o),u=ne(u),c=ne(c);var w=p+u,_=g+c,x=Vt(a,a.VERTEX_SHADER,w),E=Vt(a,a.FRAGMENT_SHADER,_);a.attachShader(b,x),a.attachShader(b,E),void 0!==r.index0AttributeName?a.bindAttribLocation(b,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(b,0,"position"),a.linkProgram(b);var A=a.getProgramInfoLog(b).trim(),C=a.getShaderInfoLog(x).trim(),S=a.getShaderInfoLog(E).trim(),M=!0,T=!0;!1===a.getProgramParameter(b,a.LINK_STATUS)?(M=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(b,a.VALIDATE_STATUS),"gl.getProgramInfoLog",A,C,S)):""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==C&&""!==S||(T=!1),T&&(this.diagnostics={runnable:M,material:r,programLog:A,vertexShader:{log:C,prefix:p},fragmentShader:{log:S,prefix:g}}),a.deleteShader(x),a.deleteShader(E);var k;this.getUniforms=function(){return void 0===k&&(k=new zt(a,b,t)),k};var O;return this.getAttributes=function(){return void 0===O&&(O=Zt(a,b)),O},this.destroy=function(){a.deleteProgram(b),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=qu++,this.code=n,this.usedTimes=1,this.program=b,this.vertexShader=x,this.fragmentShader=E,this}function ie(t,e,n){function r(t){var e=t.skeleton,r=e.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,o=Math.floor((i-20)/4),a=Math.min(o,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function i(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=bu,n===bu&&e&&(n=_u),n}var o=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(e,o,s,u,c,l,h){var f=a[e.type],d=h.isSkinnedMesh?r(h):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var g=t.getRenderTarget();return{shaderID:f,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:i(g?g.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:i(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:i(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===ss||e.envMap.mapping===us),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:i(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!u,useFog:e.fog,fogExp:u&&u.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===ha,flipSided:e.side===la,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var o=0;o<s.length;o++)r.push(n[s[o]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.join()},this.acquireProgram=function(n,r,i,a){for(var s,u=0,c=o.length;u<c;u++){var l=o[u];if(l.code===a){s=l,++s.usedTimes;break}}return void 0===s&&(s=new re(t,e,a,n,r,i),o.push(s)),s},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},this.programs=o}function oe(){function t(t){var e=i.get(t);return void 0===e&&(e={},i.set(t,e)),e}function e(t){i.delete(t)}function n(t,e,n){i.get(t)[e]=n}function r(){i=new WeakMap}var i=new WeakMap;return{get:t,remove:e,update:n,dispose:r}}function ae(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function se(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ue(){function t(){i=0,o.length=0,a.length=0}function e(t,e,n,s,u){var c=r[i];void 0===c?(c={id:t.id,object:t,geometry:e,material:n,program:n.program,renderOrder:t.renderOrder,z:s,group:u},r[i]=c):(c.id=t.id,c.object=t,c.geometry=e,c.material=n,c.program=n.program,c.renderOrder=t.renderOrder,c.z=s,c.group=u),(!0===n.transparent?a:o).push(c),i++}function n(){o.length>1&&o.sort(ae),a.length>1&&a.sort(se)}var r=[],i=0,o=[],a=[];return{opaque:o,transparent:a,init:t,push:e,sort:n}}function ce(){function t(t,e){var r=t.id+","+e.id,i=n[r];return void 0===i&&(i=new ue,n[r]=i),i}function e(){n={}}var n={};return{get:t,dispose:e}}function le(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new s,color:new y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new s,direction:new s,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new s,color:new y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new s,skyColor:new y,groundColor:new y};break;case"RectAreaLight":n={color:new y,position:new s,halfWidth:new s,halfHeight:new s}}return t[e.id]=n,n}}}function he(){function t(t,o,s){for(var u=0,c=0,l=0,h=0,f=0,d=0,p=0,g=0,m=s.matrixWorldInverse,v=0,y=t.length;v<y;v++){var b=t[v],w=b.color,_=b.intensity,x=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=w.r*_,c+=w.g*_,l+=w.b*_;else if(b.isDirectionalLight){var A=e.get(b);if(A.color.copy(b.color).multiplyScalar(b.intensity),A.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(m),A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize}n.directionalShadowMap[h]=E,n.directionalShadowMatrix[h]=b.shadow.matrix,n.directional[h]=A,h++}else if(b.isSpotLight){var A=e.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),A.color.copy(w).multiplyScalar(_),A.distance=x,A.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(m),A.coneCos=Math.cos(b.angle),A.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),A.decay=0===b.distance?0:b.decay,A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize}n.spotShadowMap[d]=E,n.spotShadowMatrix[d]=b.shadow.matrix,n.spot[d]=A,d++}else if(b.isRectAreaLight){var A=e.get(b);A.color.copy(w).multiplyScalar(_),A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),a.identity(),i.copy(b.matrixWorld),i.premultiply(m),a.extractRotation(i),A.halfWidth.set(.5*b.width,0,0),A.halfHeight.set(0,.5*b.height,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),n.rectArea[p]=A,p++}else if(b.isPointLight){var A=e.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),A.color.copy(b.color).multiplyScalar(b.intensity),A.distance=b.distance,A.decay=0===b.distance?0:b.decay,A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize,A.shadowCameraNear=C.camera.near,A.shadowCameraFar=C.camera.far}n.pointShadowMap[f]=E,n.pointShadowMatrix[f]=b.shadow.matrix,n.point[f]=A,f++}else if(b.isHemisphereLight){var A=e.get(b);A.direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(m),A.direction.normalize(),A.skyColor.copy(b.color).multiplyScalar(_),A.groundColor.copy(b.groundColor).multiplyScalar(_),n.hemi[g]=A,g++}}n.ambient[0]=u,n.ambient[1]=c,n.ambient[2]=l,n.directional.length=h,n.spot.length=d,n.rectArea.length=p,n.point.length=f,n.hemi.length=g,n.hash=n.id+","+h+","+f+","+d+","+p+","+g+","+o.length}var e=new le,n={id:Xu++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new s,i=new o,a=new o;return{setup:t,state:n}}function fe(){function t(){a.length=0,s.length=0,u.length=0}function e(t){a.push(t)}function n(t){s.push(t)}function r(t){u.push(t)}function i(t){o.setup(a,s,t)}var o=new he,a=[],s=[],u=[];return{init:t,state:{lightsArray:a,shadowsArray:s,spritesArray:u,lights:o},setupLights:i,pushLight:e,pushShadow:n,pushSprite:r}}function de(){function t(t,e){var r=t.id+","+e.id,i=n[r];return void 0===i&&(i=new fe,n[r]=i),i}function e(){n={}}var n={};return{get:t,dispose:e}}function pe(t){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function ge(t){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new s,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function me(t,e,n){function r(e,n,r,i,o,a){var s=e.geometry,u=null,c=w,l=e.customDepthMaterial;if(r&&(c=_,l=e.customDistanceMaterial),l)u=l;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var f=e.isSkinnedMesh&&n.skinning,d=0;h&&(d|=m),f&&(d|=y),u=c[d]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var p=u.uuid,g=n.uuid,v=x[p];void 0===v&&(v={},x[p]=v);var b=v[g];void 0===b&&(b=u.clone(),v[g]=b),u=b}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:E[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function a(n,i,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||u.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var c=e.update(n),l=n.material;if(Array.isArray(l))for(var h=c.groups,f=0,d=h.length;f<d;f++){var p=h[f],m=l[p.materialIndex];if(m&&m.visible){var v=r(n,m,s,g,o.near,o.far);t.renderBufferDirect(o,null,c,v,n,p)}}else if(l.visible){var v=r(n,l,s,g,o.near,o.far);t.renderBufferDirect(o,null,c,v,n,null)}}for(var y=n.children,b=0,w=y.length;b<w;b++)a(y[b],i,o,s)}}for(var u=new v,c=new o,f=new i,d=new i(n,n),p=new s,g=new s,m=1,y=2,b=1+(m|y),w=new Array(b),_=new Array(b),x={},E={0:la,1:ca,2:ha},A=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],C=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],S=[new l,new l,new l,new l,new l,new l],M=0;M!==b;++M){var T=0!==(M&m),k=0!==(M&y),O=new pe({depthPacking:Tu,morphTargets:T,skinning:k});w[M]=O;var F=new ge({morphTargets:T,skinning:k});_[M]=F}var P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sa,this.render=function(e,n,r){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==e.length){var i=t.context,o=t.state;o.disable(i.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,l=0,m=e.length;l<m;l++){var v=e[l],y=v.shadow,b=v&&v.isPointLight;if(void 0!==y){var w=y.camera;if(f.copy(y.mapSize),f.min(d),b){var _=f.x,x=f.y;S[0].set(2*_,x,_,x),S[1].set(0,x,_,x),S[2].set(3*_,x,_,x),S[3].set(_,x,_,x),S[4].set(3*_,0,_,x),S[5].set(_,0,_,x),f.x*=4,f.y*=2}if(null===y.map){var E={minFilter:fs,magFilter:fs,format:Ps};y.map=new h(f.x,f.y,E),y.map.texture.name=v.name+".shadowMap",w.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(v);var M=y.map,T=y.matrix;g.setFromMatrixPosition(v.matrixWorld),w.position.copy(g),b?(s=6,T.makeTranslation(-g.x,-g.y,-g.z)):(s=1,p.setFromMatrixPosition(v.target.matrixWorld),w.lookAt(p),w.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(w.projectionMatrix),T.multiply(w.matrixWorldInverse)),t.setRenderTarget(M),t.clear();for(var k=0;k<s;k++){if(b){p.copy(w.position),p.add(A[k]),w.up.copy(C[k]),w.lookAt(p),w.updateMatrixWorld();var O=S[k];o.viewport(O)}c.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),u.setFromMatrix(c),a(n,r,w,b)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}P.needsUpdate=!1}}}function ve(t,e,n,r,i,o,a,s,u){c.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function ye(t,e,n,r,i){function o(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);l=e.createBuffer(),h=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),f=u(),d={position:e.getAttribLocation(f,"position"),uv:e.getAttribLocation(f,"uv")},p={uvOffset:e.getUniformLocation(f,"uvOffset"),uvScale:e.getUniformLocation(f,"uvScale"),rotation:e.getUniformLocation(f,"rotation"),center:e.getUniformLocation(f,"center"),scale:e.getUniformLocation(f,"scale"),color:e.getUniformLocation(f,"color"),map:e.getUniformLocation(f,"map"),opacity:e.getUniformLocation(f,"opacity"),modelViewMatrix:e.getUniformLocation(f,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(f,"projectionMatrix"),fogType:e.getUniformLocation(f,"fogType"),fogDensity:e.getUniformLocation(f,"fogDensity"),fogNear:e.getUniformLocation(f,"fogNear"),fogFar:e.getUniformLocation(f,"fogFar"),fogColor:e.getUniformLocation(f,"fogColor"),fogDepth:e.getUniformLocation(f,"fogDepth"),alphaTest:e.getUniformLocation(f,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var i=r.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),g=new ve(r)}function u(){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),e.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),e.compileShader(n),e.compileShader(r),e.attachShader(t,n),e.attachShader(t,r),e.linkProgram(t),t}function c(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var l,h,f,d,p,g,m=new s,v=new a,y=new s;this.render=function(i,a,s){if(0!==i.length){void 0===f&&o(),n.useProgram(f),n.initAttributes(),n.enableAttribute(d.position),n.enableAttribute(d.uv),n.disableUnusedAttributes(),n.disable(e.CULL_FACE),n.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,l),e.vertexAttribPointer(d.position,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(d.uv,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.uniformMatrix4fv(p.projectionMatrix,!1,s.projectionMatrix.elements),n.activeTexture(e.TEXTURE0),e.uniform1i(p.map,0);var u=0,b=0,w=a.fog;w?(e.uniform3f(p.fogColor,w.color.r,w.color.g,w.color.b),w.isFog?(e.uniform1f(p.fogNear,w.near),e.uniform1f(p.fogFar,w.far),e.uniform1i(p.fogType,1),u=1,b=1):w.isFogExp2&&(e.uniform1f(p.fogDensity,w.density),e.uniform1i(p.fogType,2),u=2,b=2)):(e.uniform1i(p.fogType,0),u=0,b=0);for(var _=0,x=i.length;_<x;_++){var E=i[_];E.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}i.sort(c);for(var A=[],C=[],_=0,x=i.length;_<x;_++){var E=i[_],S=E.material;if(!1!==S.visible){E.onBeforeRender(t,a,s,void 0,S,void 0),e.uniform1f(p.alphaTest,S.alphaTest),e.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(m,v,y),A[0]=y.x,A[1]=y.y,C[0]=E.center.x-.5,C[1]=E.center.y-.5;var M=0;a.fog&&S.fog&&(M=b),u!==M&&(e.uniform1i(p.fogType,M),u=M),null!==S.map?(e.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),e.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(e.uniform2f(p.uvOffset,0,0),e.uniform2f(p.uvScale,1,1)),e.uniform1f(p.opacity,S.opacity),e.uniform3f(p.color,S.color.r,S.color.g,S.color.b),e.uniform1f(p.rotation,S.rotation),e.uniform2fv(p.center,C),e.uniform2fv(p.scale,A),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),r.setTexture2D(S.map||g,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),E.onAfterRender(t,a,s,void 0,S,void 0)}}n.enable(e.CULL_FACE),n.reset()}}}function be(t,e,n){function r(){var e=!1,n=new l,r=null,i=new l(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function i(){var e=!1,n=null,r=null,i=null;return{setTest:function(e){e?f(t.DEPTH_TEST):d(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case ja:t.depthFunc(t.NEVER);break;case Ua:t.depthFunc(t.ALWAYS);break;case $a:t.depthFunc(t.LESS);break;case za:t.depthFunc(t.LEQUAL);break;case Ha:t.depthFunc(t.EQUAL);break;case Va:t.depthFunc(t.GEQUAL);break;case Wa:t.depthFunc(t.GREATER);break;case Ga:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function o(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){e?f(t.STENCIL_TEST):d(t.STENCIL_TEST)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}function a(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<r;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}function s(){for(var t=0,e=R.length;t<e;t++)R[t]=0}function u(n){if(R[n]=1,0===D[n]&&(t.enableVertexAttribArray(n),D[n]=1),0!==B[n]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),B[n]=0}}function c(n,r){if(R[n]=1,0===D[n]&&(t.enableVertexAttribArray(n),D[n]=1),B[n]!==r){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),B[n]=r}}function h(){for(var e=0,n=D.length;e!==n;++e)D[e]!==R[e]&&(t.disableVertexAttribArray(e),D[e]=0)}function f(e){!0!==I[e]&&(t.enable(e),I[e]=!0)}function d(e){!1!==I[e]&&(t.disable(e),I[e]=!1)}function p(){if(null===N&&(N=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)N.push(n[r]);return N}function g(e){return j!==e&&(t.useProgram(e),j=e,!0)}function m(e,r,i,o,a,s,u,c){if(e!==va?f(t.BLEND):d(t.BLEND),e!==xa){if(e!==U||c!==q)switch(e){case ba:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case wa:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case _a:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}$=null,z=null,H=null,V=null,W=null,G=null}else a=a||r,s=s||i,u=u||o,r===$&&a===V||(t.blendEquationSeparate(n.convert(r),n.convert(a)),$=r,V=a),i===z&&o===H&&s===W&&u===G||(t.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),z=i,H=o,W=s,G=u);U=e,q=c}function v(e,n){e.side===ha?d(t.CULL_FACE):f(t.CULL_FACE);var r=e.side===la;n&&(r=!r),y(r),!0===e.transparent?m(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):m(va),F.setFunc(e.depthFunc),F.setTest(e.depthTest),F.setMask(e.depthWrite),O.setMask(e.colorWrite),_(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function y(e){X!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),X=e)}function b(e){e!==ta?(f(t.CULL_FACE),e!==Y&&(e===ea?t.cullFace(t.BACK):e===na?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):d(t.CULL_FACE),Y=e}function w(e){e!==K&&(tt&&t.lineWidth(e),K=e)}function _(e,n,r){e?(f(t.POLYGON_OFFSET_FILL),Z===n&&J===r||(t.polygonOffset(n,r),Z=n,J=r)):d(t.POLYGON_OFFSET_FILL)}function x(e){e?f(t.SCISSOR_TEST):d(t.SCISSOR_TEST)}function E(e){void 0===e&&(e=t.TEXTURE0+Q-1),rt!==e&&(t.activeTexture(e),rt=e)}function A(e,n){null===rt&&E();var r=it[rt];void 0===r&&(r={type:void 0,texture:void 0},it[rt]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||st[e]),r.type=e,r.texture=n)}function C(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function S(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function M(e){!1===ot.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ot.copy(e))}function T(e){!1===at.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),at.copy(e))}function k(){for(var e=0;e<D.length;e++)1===D[e]&&(t.disableVertexAttribArray(e),D[e]=0);I={},N=null,rt=null,it={},j=null,U=null,X=null,Y=null,O.reset(),F.reset(),P.reset()}var O=new r,F=new i,P=new o,L=t.getParameter(t.MAX_VERTEX_ATTRIBS),R=new Uint8Array(L),D=new Uint8Array(L),B=new Uint8Array(L),I={},N=null,j=null,U=null,$=null,z=null,H=null,V=null,W=null,G=null,q=!1,X=null,Y=null,K=null,Z=null,J=null,Q=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),tt=!1,et=0,nt=t.getParameter(t.VERSION);-1!==nt.indexOf("WebGL")?(et=parseFloat(/^WebGL\ ([0-9])/.exec(nt)[1]),tt=et>=1):-1!==nt.indexOf("OpenGL ES")&&(et=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(nt)[1]),tt=et>=2);var rt=null,it={},ot=new l,at=new l,st={};return st[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),st[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),O.setClear(0,0,0,1),F.setClear(1),P.setClear(0),f(t.DEPTH_TEST),F.setFunc(za),y(!1),b(ea),f(t.CULL_FACE),f(t.BLEND),m(ya),{buffers:{color:O,depth:F,stencil:P},initAttributes:s,enableAttribute:u,enableAttributeAndDivisor:c,disableUnusedAttributes:h,enable:f,disable:d,getCompressedTextureFormats:p,useProgram:g,setBlending:m,setMaterial:v,setFlipSided:y,setCullFace:b,setLineWidth:w,setPolygonOffset:_,setScissorTest:x,activeTexture:E,bindTexture:A,compressedTexImage2D:C,texImage2D:S,scissor:M,viewport:T,reset:k}}function we(t,e,n,r,i,o,a){function s(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n);return r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function u(t){return ku.isPowerOfTwo(t.width)&&ku.isPowerOfTwo(t.height)}function c(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap){void 0===O&&(O=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),O.width=ku.floorPowerOfTwo(t.width),O.height=ku.floorPowerOfTwo(t.height);return O.getContext("2d").drawImage(t,0,0,O.width,O.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+O.width+"x"+O.height,t),O}return t}function l(t){return t.wrapS!==ls||t.wrapT!==ls||t.minFilter!==fs&&t.minFilter!==gs}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==fs&&t.minFilter!==gs}function f(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log2(Math.max(i,o))}function d(e){return e===fs||e===ds||e===ps?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),m(e),e.isVideoTexture&&delete P[e.id],a.memory.textures--}function g(t){var e=t.target;e.removeEventListener("dispose",g),v(e),a.memory.textures--}function m(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.remove(e)}function v(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}}function y(e,i){var o=r.get(e);if(e.isVideoTexture&&k(e),e.version>0&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==a.complete)return void x(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function b(e,c){var l=r.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",p),l.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+c),n.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var d=e&&e.isCompressedTexture,g=e.image[0]&&e.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=d||g?g?e.image[v].image:e.image[v]:s(e.image[v],i.maxCubemapSize);var y=m[0],b=u(y),w=o.convert(e.format),x=o.convert(e.type);_(t.TEXTURE_CUBE_MAP,e,b);for(var v=0;v<6;v++)if(d)for(var E,A=m[v].mipmaps,C=0,S=A.length;C<S;C++)E=A[C],e.format!==Ps&&e.format!==Fs?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,C,w,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,C,w,E.width,E.height,0,w,x,E.data);else g?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,m[v].width,m[v].height,0,w,x,m[v].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,w,x,m[v]);l.__maxMipLevel=d?A.length-1:0,h(e,b)&&f(t.TEXTURE_CUBE_MAP,e,y.width,y.height),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+c),n.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function w(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)}function _(n,a,s){var u;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===ls&&a.wrapT===ls||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,d(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,d(a.minFilter)),a.minFilter!==fs&&a.minFilter!==gs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=e.get("EXT_texture_filter_anisotropic")){if(a.type===As&&null===e.get("OES_texture_float_linear"))return;if(a.type===Cs&&null===e.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function x(e,r,d){void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+d),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment);var g=s(r.image,i.maxTextureSize);l(r)&&!1===u(g)&&(g=c(g));var m=u(g),v=o.convert(r.format),y=o.convert(r.type);_(t.TEXTURE_2D,r,m);var b,w=r.mipmaps;if(r.isDepthTexture){var x=t.DEPTH_COMPONENT;if(r.type===As){if(!F)throw new Error("Float Depth Texture only supported in WebGL2.0");x=t.DEPTH_COMPONENT32F}else F&&(x=t.DEPTH_COMPONENT16);r.format===Bs&&x===t.DEPTH_COMPONENT&&r.type!==_s&&r.type!==Es&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=_s,y=o.convert(r.type)),r.format===Is&&(x=t.DEPTH_STENCIL,r.type!==ks&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ks,y=o.convert(r.type))),n.texImage2D(t.TEXTURE_2D,0,x,g.width,g.height,0,v,y,null)}else if(r.isDataTexture)if(w.length>0&&m){for(var E=0,A=w.length;E<A;E++)b=w[E],n.texImage2D(t.TEXTURE_2D,E,v,b.width,b.height,0,v,y,b.data);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,g.width,g.height,0,v,y,g.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(var E=0,A=w.length;E<A;E++)b=w[E],r.format!==Ps&&r.format!==Fs?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(t.TEXTURE_2D,E,v,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,E,v,b.width,b.height,0,v,y,b.data);e.__maxMipLevel=w.length-1}else if(w.length>0&&m){for(var E=0,A=w.length;E<A;E++)b=w[E],n.texImage2D(t.TEXTURE_2D,E,v,v,y,b);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,v,y,g),e.__maxMipLevel=0;h(r,m)&&f(t.TEXTURE_2D,r,g.width,g.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function E(e,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function A(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function C(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Bs)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==Is)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,i,0)}}function S(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");C(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),A(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),A(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function M(e){var i=r.get(e),o=r.get(e.texture);e.addEventListener("dispose",g),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,c=u(e);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,c);for(var l=0;l<6;l++)E(i.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);h(e.texture,c)&&f(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),_(t.TEXTURE_2D,e.texture,c),E(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),h(e.texture,c)&&f(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function T(e){var i=e.texture;if(h(i,u(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),f(o,i,e.width,e.height),n.bindTexture(o,null)}}function k(t){var e=t.id,n=a.render.frame;P[e]!==n&&(P[e]=n,t.update())}var O,F="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,P={};this.setTexture2D=y,this.setTextureCube=b,this.setTextureCubeDynamic=w,this.setupRenderTarget=M,this.updateRenderTargetMipmap=T}function _e(t,e){function n(n){var r;if(n===cs)return t.REPEAT;if(n===ls)return t.CLAMP_TO_EDGE;if(n===hs)return t.MIRRORED_REPEAT;if(n===fs)return t.NEAREST;if(n===ds)return t.NEAREST_MIPMAP_NEAREST;if(n===ps)return t.NEAREST_MIPMAP_LINEAR;if(n===gs)return t.LINEAR;if(n===ms)return t.LINEAR_MIPMAP_NEAREST;if(n===vs)return t.LINEAR_MIPMAP_LINEAR;if(n===ys)return t.UNSIGNED_BYTE;if(n===Ss)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Ms)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Ts)return t.UNSIGNED_SHORT_5_6_5;if(n===bs)return t.BYTE;if(n===ws)return t.SHORT;if(n===_s)return t.UNSIGNED_SHORT;if(n===xs)return t.INT;if(n===Es)return t.UNSIGNED_INT;if(n===As)return t.FLOAT;if(n===Cs&&null!==(r=e.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(n===Os)return t.ALPHA;if(n===Fs)return t.RGB;if(n===Ps)return t.RGBA;if(n===Ls)return t.LUMINANCE;if(n===Rs)return t.LUMINANCE_ALPHA;if(n===Bs)return t.DEPTH_COMPONENT;if(n===Is)return t.DEPTH_STENCIL;if(n===Ea)return t.FUNC_ADD;if(n===Aa)return t.FUNC_SUBTRACT;if(n===Ca)return t.FUNC_REVERSE_SUBTRACT;if(n===Ta)return t.ZERO;if(n===ka)return t.ONE;if(n===Oa)return t.SRC_COLOR;if(n===Fa)return t.ONE_MINUS_SRC_COLOR;if(n===Pa)return t.SRC_ALPHA;if(n===La)return t.ONE_MINUS_SRC_ALPHA;if(n===Ra)return t.DST_ALPHA;if(n===Da)return t.ONE_MINUS_DST_ALPHA;if(n===Ba)return t.DST_COLOR;if(n===Ia)return t.ONE_MINUS_DST_COLOR;if(n===Na)return t.SRC_ALPHA_SATURATE;if((n===Ns||n===js||n===Us||n===$s)&&null!==(r=e.get("WEBGL_compressed_texture_s3tc"))){if(n===Ns)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===js)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Us)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===$s)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===zs||n===Hs||n===Vs||n===Ws)&&null!==(r=e.get("WEBGL_compressed_texture_pvrtc"))){if(n===zs)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Hs)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Vs)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ws)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Gs&&null!==(r=e.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===qs||n===Xs||n===Ys||n===Ks||n===Zs||n===Js||n===Qs||n===tu||n===eu||n===nu||n===ru||n===iu||n===ou||n===au)&&null!==(r=e.get("WEBGL_compressed_texture_astc")))return n;if((n===Sa||n===Ma)&&null!==(r=e.get("EXT_blend_minmax"))){if(n===Sa)return r.MIN_EXT;if(n===Ma)return r.MAX_EXT}return n===ks&&null!==(r=e.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function xe(t,e,n,r){E.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ee(t){xe.call(this),this.cameras=t||[]}function Ae(t){function e(){if(null!==r&&r.isPresenting){var e=r.getEyeParameters("left"),i=e.renderWidth,o=e.renderHeight;b=t.getPixelRatio(),y=t.getSize(),t.setDrawingBufferSize(2*i,o,1)}else n.enabled&&t.setDrawingBufferSize(y.width,y.height,b)}var n=this,r=null,i=null,u=null,c=new o,h=new o;"undefined"!==typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData);var f=new o,d=new a,p=new s,g=new xe;g.bounds=new l(0,0,.5,1),g.layers.enable(1);var m=new xe;m.bounds=new l(.5,0,.5,1),m.layers.enable(2);var v=new Ee([g,m]);v.layers.enable(1),v.layers.enable(2);var y,b;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",e,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t)},this.setPoseTarget=function(t){void 0!==t&&(u=t)},this.getCamera=function(t){if(null===r)return t;r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(i);var e=r.stageParameters;e?c.fromArray(e.sittingToStandingTransform):c.makeTranslation(0,n.userHeight,0);var o=i.pose,a=null!==u?u:t;if(a.matrix.copy(c),a.matrix.decompose(a.position,a.quaternion,a.scale),null!==o.orientation&&(d.fromArray(o.orientation),a.quaternion.multiply(d)),null!==o.position&&(d.setFromRotationMatrix(c),p.fromArray(o.position),p.applyQuaternion(d),a.position.add(p)),a.updateMatrixWorld(),!1===r.isPresenting)return t;g.near=t.near,m.near=t.near,g.far=t.far,m.far=t.far,v.matrixWorld.copy(t.matrixWorld),v.matrixWorldInverse.copy(t.matrixWorldInverse),g.matrixWorldInverse.fromArray(i.leftViewMatrix),m.matrixWorldInverse.fromArray(i.rightViewMatrix),h.getInverse(c),g.matrixWorldInverse.multiply(h),m.matrixWorldInverse.multiply(h);var s=a.parent;null!==s&&(f.getInverse(s.matrixWorld),g.matrixWorldInverse.multiply(f),m.matrixWorldInverse.multiply(f)),g.matrixWorld.getInverse(g.matrixWorldInverse),m.matrixWorld.getInverse(m.matrixWorldInverse),g.projectionMatrix.fromArray(i.leftProjectionMatrix),m.projectionMatrix.fromArray(i.rightProjectionMatrix),v.projectionMatrix.copy(g.projectionMatrix);var l=r.getLayers();if(l.length){var y=l[0];null!==y.leftBounds&&4===y.leftBounds.length&&g.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&m.bounds.fromArray(y.rightBounds)}return v},this.getStandingMatrix=function(){return c},this.submitFrame=function(){r&&r.isPresenting&&r.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",e)}}function Ce(t){function e(){return null===lt?xt:1}function n(){Lt=new et(ot),Lt.get("WEBGL_depth_texture"),Lt.get("OES_texture_float"),Lt.get("OES_texture_float_linear"),Lt.get("OES_texture_half_float"),Lt.get("OES_texture_half_float_linear"),Lt.get("OES_standard_derivatives"),Lt.get("OES_element_index_uint"),Lt.get("ANGLE_instanced_arrays"),Zt=new _e(ot,Lt),Rt=new Q(ot,Lt,t),Dt=new be(ot,Lt,Zt),Dt.scissor(vt.copy(At).multiplyScalar(xt)),Dt.viewport(mt.copy(Et).multiplyScalar(xt)),Bt=new it(ot),It=new oe,Nt=new we(ot,Lt,Dt,It,Rt,Zt,Bt),jt=new b(ot),Ut=new nt(ot,jt,Bt),$t=new st(Ut,Bt),qt=new at(ot),Ht=new ie(ut,Lt,Rt),Vt=new ce,Wt=new de,Gt=new Z(ut,Dt,Ut,G),Xt=new J(ot,Lt,Bt),Yt=new rt(ot,Lt,Bt),Kt=new ye(ut,ot,Dt,Nt,Rt),Bt.programs=Ht.programs,ut.context=ot,ut.capabilities=Rt,ut.extensions=Lt,ut.properties=It,ut.renderLists=Vt,ut.state=Dt,ut.info=Bt}function r(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ct=!0}function i(){console.log("THREE.WebGLRenderer: Context Restored."),ct=!1,n()}function a(t){var e=t.target;e.removeEventListener("dispose",a),u(e)}function u(t){c(t),It.remove(t)}function c(t){var e=It.get(t).program;t.program=void 0,void 0!==e&&Ht.releaseProgram(e)}function h(t,e,n){t.render(function(t){ut.renderBufferImmediate(t,e,n)})}function f(t,e,n,r){if(n&&n.isInstancedBufferGeometry&&null===Lt.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Dt.initAttributes();var i=n.attributes,o=e.getAttributes(),a=t.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var c=i[s];if(void 0!==c){var l=c.normalized,h=c.itemSize,f=jt.get(c);if(void 0===f)continue;var d=f.buffer,p=f.type,g=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data,v=m.stride,y=c.offset;m&&m.isInstancedInterleavedBuffer?(Dt.enableAttributeAndDivisor(u,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):Dt.enableAttribute(u),ot.bindBuffer(ot.ARRAY_BUFFER,d),ot.vertexAttribPointer(u,h,p,l,v*g,(r*v+y)*g)}else c.isInstancedBufferAttribute?(Dt.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):Dt.enableAttribute(u),ot.bindBuffer(ot.ARRAY_BUFFER,d),ot.vertexAttribPointer(u,h,p,l,0,r*h*g)}else if(void 0!==a){var b=a[s];if(void 0!==b)switch(b.length){case 2:ot.vertexAttrib2fv(u,b);break;case 3:ot.vertexAttrib3fv(u,b);break;case 4:ot.vertexAttrib4fv(u,b);break;default:ot.vertexAttrib1fv(u,b)}}}}Dt.disableUnusedAttributes()}function p(){te||(m(),te=!0)}function g(){te=!1}function m(){var t=Jt.getDevice();t&&t.isPresenting?t.requestAnimationFrame(y):window.requestAnimationFrame(y)}function y(t){!1!==te&&(ee(t),m())}function w(t,e,n){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isLight)K.pushLight(t),t.castShadow&&K.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!St.intersectsSprite(t)||K.pushSprite(t);else if(t.isImmediateRenderObject)n&&Ft.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ot),Y.push(t,null,t.material,Ft.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||St.intersectsObject(t))){n&&Ft.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ot);var r=$t.update(t),i=t.material;if(Array.isArray(i))for(var o=r.groups,a=0,s=o.length;a<s;a++){var u=o[a],c=i[u.materialIndex];c&&c.visible&&Y.push(t,r,c,Ft.z,u)}else i.visible&&Y.push(t,r,i,Ft.z,null)}for(var l=t.children,a=0,s=l.length;a<s;a++)w(l[a],e,n)}}function _(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){gt=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){var g=p.bounds,m=g.x*wt,v=g.y*_t,y=g.z*wt,b=g.w*_t;Dt.viewport(mt.set(m,v,y,b).multiplyScalar(xt)),x(s,e,p,u,c,l)}}}else gt=null,x(s,e,n,u,c,l)}}function x(t,e,n,r,i,o){if(t.onBeforeRender(ut,e,n,r,i,o),K=Wt.get(e,gt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=t.isMesh&&t.matrixWorld.determinant()<0;Dt.setMaterial(i,a);var s=A(n,e.fog,i,t);dt="",h(t,s,i)}else ut.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(ut,e,n,r,i,o),K=Wt.get(e,gt||n)}function E(t,e,n){var r=It.get(t),i=K.state.lights,o=K.state.shadowsArray,s=Ht.getParameters(t,i.state,o,e,Mt.numPlanes,Mt.numIntersection,n),u=Ht.getProgramCode(t,s),l=r.program,h=!0;if(void 0===l)t.addEventListener("dispose",a);else if(l.code!==u)c(t);else if(r.lightsHash!==i.state.hash)It.update(t,"lightsHash",i.state.hash),h=!1;else{if(void 0!==s.shaderID)return;h=!1}if(h){if(s.shaderID){var f=Du[s.shaderID];r.shader={name:t.type,uniforms:Pu.clone(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,ut),l=Ht.acquireProgram(t,r.shader,s,u),r.program=l,t.program=l}var d=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<ut.maxMorphTargets;p++)d["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<ut.maxMorphNormals;p++)d["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var g=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=Mt.numPlanes,r.numIntersection=Mt.numIntersection,g.clippingPlanes=Mt.uniform),r.fog=e,r.lightsHash=i.state.hash,t.lights&&(g.ambientLightColor.value=i.state.ambient,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),v=zt.seqWithValue(m.seq,g);r.uniformsList=v}function A(t,e,n,r){bt=0;var i=It.get(n),o=K.state.lights;if(Tt&&(kt||t!==pt)){var a=t===pt&&n.id===ft;Mt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,a)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:n.lights&&i.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Mt.numPlanes&&i.numIntersection===Mt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(E(n,e,r),n.needsUpdate=!1);var s=!1,u=!1,c=!1,l=i.program,h=l.getUniforms(),f=i.shader.uniforms;if(Dt.useProgram(l.program)&&(s=!0,u=!0,c=!0),n.id!==ft&&(ft=n.id,u=!0),s||t!==pt){if(h.setValue(ot,"projectionMatrix",t.projectionMatrix),Rt.logarithmicDepthBuffer&&h.setValue(ot,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),pt!==(gt||t)&&(pt=gt||t,u=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(ot,Ft.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(ot,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){h.setOptional(ot,r,"bindMatrix"),h.setOptional(ot,r,"bindMatrixInverse");var g=r.skeleton;if(g){var m=g.bones;if(Rt.floatVertexTextures){if(void 0===g.boneTexture){var v=Math.sqrt(4*m.length);v=ku.ceilPowerOfTwo(v),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(g.boneMatrices);var b=new d(y,v,v,Ps,As);b.needsUpdate=!0,g.boneMatrices=y,g.boneTexture=b,g.boneTextureSize=v}h.setValue(ot,"boneTexture",g.boneTexture),h.setValue(ot,"boneTextureSize",g.boneTextureSize)}else h.setOptional(ot,g,"boneMatrices")}}return u&&(h.setValue(ot,"toneMappingExposure",ut.toneMappingExposure),h.setValue(ot,"toneMappingWhitePoint",ut.toneMappingWhitePoint),n.lights&&N(f,c),e&&n.fog&&k(f,e),n.isMeshBasicMaterial?C(f,n):n.isMeshLambertMaterial?(C(f,n),O(f,n)):n.isMeshPhongMaterial?(C(f,n),n.isMeshToonMaterial?P(f,n):F(f,n)):n.isMeshStandardMaterial?(C(f,n),n.isMeshPhysicalMaterial?R(f,n):L(f,n)):n.isMeshDepthMaterial?(C(f,n),D(f,n)):n.isMeshDistanceMaterial?(C(f,n),B(f,n)):n.isMeshNormalMaterial?(C(f,n),I(f,n)):n.isLineBasicMaterial?(S(f,n),n.isLineDashedMaterial&&M(f,n)):n.isPointsMaterial?T(f,n):n.isShadowMaterial&&(f.color.value=n.color,f.opacity.value=n.opacity),void 0!==f.ltc_1&&(f.ltc_1.value=Ru.LTC_1),void 0!==f.ltc_2&&(f.ltc_2.value=Ru.LTC_2),zt.upload(ot,i.uniformsList,f,ut)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(zt.upload(ot,i.uniformsList,f,ut),n.uniformsNeedUpdate=!1),h.setValue(ot,"modelViewMatrix",r.modelViewMatrix),h.setValue(ot,"normalMatrix",r.normalMatrix),h.setValue(ot,"modelMatrix",r.matrixWorld),l}function C(t,e){t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=It.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var r=n.offset,i=n.repeat,o=n.rotation,a=n.center;n.matrix.setUvTransform(r.x,r.y,i.x,i.y,o,a.x,a.y)}t.uvTransform.value.copy(n.matrix)}}function S(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function M(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function T(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*xt,t.scale.value=.5*_t,t.map.value=e.map,null!==e.map){if(!0===e.map.matrixAutoUpdate){var n=e.map.offset,r=e.map.repeat,i=e.map.rotation,o=e.map.center;e.map.matrix.setUvTransform(n.x,n.y,r.x,r.y,i,o.x,o.y)}t.uvTransform.value.copy(e.map.matrix)}}function k(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function O(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function F(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function P(t,e){F(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function L(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function R(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,L(t,e)}function D(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function B(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function I(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function N(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function j(){var t=bt;return t>=Rt.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+Rt.maxTextures),bt+=1,t}console.log("THREE.WebGLRenderer",Jo),t=t||{};var U=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),$=void 0!==t.context?t.context:null,z=void 0!==t.alpha&&t.alpha,H=void 0===t.depth||t.depth,V=void 0===t.stencil||t.stencil,W=void 0!==t.antialias&&t.antialias,G=void 0===t.premultipliedAlpha||t.premultipliedAlpha,q=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,X=void 0!==t.powerPreference?t.powerPreference:"default",Y=null,K=null;this.domElement=U,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Za,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ot,ut=this,ct=!1,lt=null,ht=null,ft=-1,dt="",pt=null,gt=null,mt=new l,vt=new l,yt=null,bt=0,wt=U.width,_t=U.height,xt=1,Et=new l(0,0,wt,_t),At=new l(0,0,wt,_t),Ct=!1,St=new v,Mt=new tt,Tt=!1,kt=!1,Ot=new o,Ft=new s;try{var Pt={alpha:z,depth:H,stencil:V,antialias:W,premultipliedAlpha:G,preserveDrawingBuffer:q,powerPreference:X};if(U.addEventListener("webglcontextlost",r,!1),U.addEventListener("webglcontextrestored",i,!1),null===(ot=$||U.getContext("webgl",Pt)||U.getContext("experimental-webgl",Pt)))throw null!==U.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===ot.getShaderPrecisionFormat&&(ot.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}var Lt,Rt,Dt,Bt,It,Nt,jt,Ut,$t,Ht,Vt,Wt,Gt,qt,Xt,Yt,Kt,Zt;n();var Jt=new Ae(ut);this.vr=Jt;var Qt=new me(ut,$t,Rt.maxTextureSize);this.shadowMap=Qt,this.getContext=function(){return ot},this.getContextAttributes=function(){return ot.getContextAttributes()},this.forceContextLoss=function(){var t=Lt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Lt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return xt},this.setPixelRatio=function(t){void 0!==t&&(xt=t,this.setSize(wt,_t,!1))},this.getSize=function(){return{width:wt,height:_t}},this.setSize=function(t,e,n){var r=Jt.getDevice();if(r&&r.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");wt=t,_t=e,U.width=t*xt,U.height=e*xt,!1!==n&&(U.style.width=t+"px",U.style.height=e+"px"),this.setViewport(0,0,t,e)},this.getDrawingBufferSize=function(){return{width:wt*xt,height:_t*xt}},this.setDrawingBufferSize=function(t,e,n){wt=t,_t=e,xt=n,U.width=t*n,U.height=e*n,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return mt},this.setViewport=function(t,e,n,r){Et.set(t,_t-e-r,n,r),Dt.viewport(mt.copy(Et).multiplyScalar(xt))},this.setScissor=function(t,e,n,r){At.set(t,_t-e-r,n,r),Dt.scissor(vt.copy(At).multiplyScalar(xt))},this.setScissorTest=function(t){Dt.setScissorTest(Ct=t)},this.getClearColor=function(){return Gt.getClearColor()},this.setClearColor=function(){Gt.setClearColor.apply(Gt,arguments)},this.getClearAlpha=function(){return Gt.getClearAlpha()},this.setClearAlpha=function(){Gt.setClearAlpha.apply(Gt,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=ot.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=ot.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=ot.STENCIL_BUFFER_BIT),ot.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.dispose=function(){U.removeEventListener("webglcontextlost",r,!1),U.removeEventListener("webglcontextrestored",i,!1),Vt.dispose(),Wt.dispose(),It.dispose(),$t.dispose(),Jt.dispose(),g()},this.renderBufferImmediate=function(t,e,n){Dt.initAttributes();var r=It.get(t);t.hasPositions&&!r.position&&(r.position=ot.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=ot.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=ot.createBuffer()),t.hasColors&&!r.color&&(r.color=ot.createBuffer());var i=e.getAttributes();if(t.hasPositions&&(ot.bindBuffer(ot.ARRAY_BUFFER,r.position),ot.bufferData(ot.ARRAY_BUFFER,t.positionArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(i.position),ot.vertexAttribPointer(i.position,3,ot.FLOAT,!1,0,0)),t.hasNormals){if(ot.bindBuffer(ot.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,l=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=c,s[o+2]=l,s[o+3]=u,s[o+4]=c,s[o+5]=l,s[o+6]=u,s[o+7]=c,s[o+8]=l}ot.bufferData(ot.ARRAY_BUFFER,t.normalArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(i.normal),ot.vertexAttribPointer(i.normal,3,ot.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(ot.bindBuffer(ot.ARRAY_BUFFER,r.uv),ot.bufferData(ot.ARRAY_BUFFER,t.uvArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(i.uv),ot.vertexAttribPointer(i.uv,2,ot.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==pa&&(ot.bindBuffer(ot.ARRAY_BUFFER,r.color),ot.bufferData(ot.ARRAY_BUFFER,t.colorArray,ot.DYNAMIC_DRAW),Dt.enableAttribute(i.color),ot.vertexAttribPointer(i.color,3,ot.FLOAT,!1,0,0)),Dt.disableUnusedAttributes(),ot.drawArrays(ot.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,r,i,o,a){var s=o.isMesh&&o.matrixWorld.determinant()<0;Dt.setMaterial(i,s);var u=A(t,n,i,o),c=r.id+"_"+u.id+"_"+(!0===i.wireframe),l=!1;c!==dt&&(dt=c,l=!0),o.morphTargetInfluences&&(qt.update(o,r,i,u),l=!0);var h=r.index,d=r.attributes.position,p=1;!0===i.wireframe&&(h=Ut.getWireframeAttribute(r),p=2);var g,m=Xt;null!==h&&(g=jt.get(h),m=Yt,m.setIndex(g)),l&&(f(i,u,r),null!==h&&ot.bindBuffer(ot.ELEMENT_ARRAY_BUFFER,g.buffer));var v=1/0;null!==h?v=h.count:void 0!==d&&(v=d.count);var y=r.drawRange.start*p,b=r.drawRange.count*p,w=null!==a?a.start*p:0,_=null!==a?a.count*p:1/0,x=Math.max(y,w),E=Math.min(v,y+b,w+_)-1,C=Math.max(0,E-x+1);if(0!==C){if(o.isMesh)if(!0===i.wireframe)Dt.setLineWidth(i.wireframeLinewidth*e()),m.setMode(ot.LINES);else switch(o.drawMode){case mu:m.setMode(ot.TRIANGLES);break;case vu:m.setMode(ot.TRIANGLE_STRIP);break;case yu:m.setMode(ot.TRIANGLE_FAN)}else if(o.isLine){var S=i.linewidth;void 0===S&&(S=1),Dt.setLineWidth(S*e()),o.isLineSegments?m.setMode(ot.LINES):o.isLineLoop?m.setMode(ot.LINE_LOOP):m.setMode(ot.LINE_STRIP)}else o.isPoints&&m.setMode(ot.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&m.renderInstances(r,x,C):m.render(x,C)}},this.compile=function(t,e){K=Wt.get(t,e),K.init(),t.traverse(function(t){t.isLight&&(K.pushLight(t),t.castShadow&&K.pushShadow(t))}),K.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)E(e.material[n],t.fog,e);else E(e.material,t.fog,e)})};var te=!1,ee=null;this.animate=function(t){ee=t,null!==ee?p():g()},this.render=function(t,e,n,r){if(!e||!e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!ct){dt="",ft=-1,pt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Jt.enabled&&(e=Jt.getCamera(e)),K=Wt.get(t,e),K.init(),t.onBeforeRender(ut,t,e,n),Ot.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),St.setFromMatrix(Ot),kt=this.localClippingEnabled,Tt=Mt.init(this.clippingPlanes,kt,e),Y=Vt.get(t,e),Y.init(),w(t,e,ut.sortObjects),!0===ut.sortObjects&&Y.sort(),Tt&&Mt.beginShadows();var i=K.state.shadowsArray;Qt.render(i,t,e),K.setupLights(e),Tt&&Mt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),Gt.render(Y,t,e,r);var o=Y.opaque,a=Y.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&_(o,t,e,s),a.length&&_(a,t,e,s)}else o.length&&_(o,t,e),a.length&&_(a,t,e);var u=K.state.spritesArray;Kt.render(u,t,e),n&&Nt.updateRenderTargetMipmap(n),Dt.buffers.depth.setTest(!0),Dt.buffers.depth.setMask(!0),Dt.buffers.color.setMask(!0),Dt.setPolygonOffset(!1),t.onAfterRender(ut,t,e),Jt.enabled&&Jt.submitFrame(),Y=null,K=null}},this.allocTextureUnit=j,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Nt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Nt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Nt.setTextureCube(e,n):Nt.setTextureCubeDynamic(e,n)}}(),this.getRenderTarget=function(){return lt},this.setRenderTarget=function(t){lt=t,t&&void 0===It.get(t).__webglFramebuffer&&Nt.setupRenderTarget(t);var e=null,n=!1;if(t){var r=It.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=r[t.activeCubeFace],n=!0):e=r,mt.copy(t.viewport),vt.copy(t.scissor),yt=t.scissorTest}else mt.copy(Et).multiplyScalar(xt),vt.copy(At).multiplyScalar(xt),yt=Ct;if(ht!==e&&(ot.bindFramebuffer(ot.FRAMEBUFFER,e),ht=e),Dt.viewport(mt),Dt.scissor(vt),Dt.setScissorTest(yt),n){var i=It.get(t.texture);ot.framebufferTexture2D(ot.FRAMEBUFFER,ot.COLOR_ATTACHMENT0,ot.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=It.get(t).__webglFramebuffer;if(a){var s=!1;a!==ht&&(ot.bindFramebuffer(ot.FRAMEBUFFER,a),s=!0);try{var u=t.texture,c=u.format,l=u.type;if(c!==Ps&&Zt.convert(c)!==ot.getParameter(ot.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(l!==ys&&Zt.convert(l)!==ot.getParameter(ot.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==As||!Lt.get("OES_texture_float")&&!Lt.get("WEBGL_color_buffer_float"))&&(l!==Cs||!Lt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ot.checkFramebufferStatus(ot.FRAMEBUFFER)===ot.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&ot.readPixels(e,n,r,i,Zt.convert(c),Zt.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&ot.bindFramebuffer(ot.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=Zt.convert(e.format);this.setTexture2D(e,0),ot.copyTexImage2D(ot.TEXTURE_2D,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=Zt.convert(n.format),s=Zt.convert(n.type),u=e.isDataTexture?e.image.data:e.image;this.setTexture2D(n,0),ot.texSubImage2D(ot.TEXTURE_2D,r||0,t.x,t.y,i,o,a,s,u)}}function Se(t,e){this.name="",this.color=new y(t),this.density=void 0!==e?e:25e-5}function Me(t,e,n){this.name="",this.color=new y(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Te(){x.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ke(t){V.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Oe(t){x.call(this),this.type="Sprite",this.material=void 0!==t?t:new ke,this.center=new i(.5,.5)}function Fe(){x.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Pe(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new o)}}function Le(){x.call(this),this.type="Bone"}function Re(t,e){K.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=this.initBones(),r=new Pe(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function De(t){V.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Be(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ie(t,e);x.call(this),this.type="Line",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new De({color:16777215*Math.random()})}function Ie(t,e){Be.call(this,t,e),this.type="LineSegments"}function Ne(t,e){Be.call(this,t,e),this.type="LineLoop"}function je(t){V.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Ue(t,e){x.call(this),this.type="Points",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new je({color:16777215*Math.random()})}function $e(){x.call(this),this.type="Group"}function ze(t,e,n,r,i,o,a,s,u){c.call(this,t,e,n,r,i,o,a,s,u),this.generateMipmaps=!1}function He(t,e,n,r,i,o,a,s,u,l,h,f){c.call(this,null,o,a,s,u,l,r,i,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ve(t,e,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:Bs)!==Bs&&l!==Is)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Bs&&(n=_s),void 0===n&&l===Is&&(n=ks),c.call(this,null,r,i,o,a,s,l,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:fs,this.minFilter=void 0!==s?s:fs,this.flipY=!1,this.generateMipmaps=!1}function We(t){j.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,u,c,l,h,f=[],d=[0,0],p={},g=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,r=m.length;e<r;e++){var v=m[e];for(n=0;n<3;n++)u=v[g[n]],c=v[g[(n+1)%3]],d[0]=Math.min(u,c),d[1]=Math.max(u,c),l=d[0]+","+d[1],void 0===p[l]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)a=p[l],h=t.vertices[a.index1],f.push(h.x,h.y,h.z),h=t.vertices[a.index2],f.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var y,b,w,_,x,E,A,C;if(h=new s,null!==t.index){for(y=t.attributes.position,b=t.index,w=t.groups,0===w.length&&(w=[{start:0,count:b.count,materialIndex:0}]),i=0,o=w.length;i<o;++i)for(_=w[i],x=_.start,E=_.count,e=x,r=x+E;e<r;e+=3)for(n=0;n<3;n++)u=b.getX(e+n),c=b.getX(e+(n+1)%3),d[0]=Math.min(u,c),d[1]=Math.max(u,c),l=d[0]+","+d[1],void 0===p[l]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)a=p[l],h.fromBufferAttribute(y,a.index1),f.push(h.x,h.y,h.z),h.fromBufferAttribute(y,a.index2),f.push(h.x,h.y,h.z)}else for(y=t.attributes.position,e=0,r=y.count/3;e<r;e++)for(n=0;n<3;n++)A=3*e+n,h.fromBufferAttribute(y,A),f.push(h.x,h.y,h.z),C=3*e+(n+1)%3,h.fromBufferAttribute(y,C),f.push(h.x,h.y,h.z)}this.addAttribute("position",new D(f,3))}function Ge(t,e,n){S.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new qe(t,e,n)),this.mergeVertices()}function qe(t,e,n){j.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],u=[],c=[],l=new s,h=new s,f=new s,d=new s,p=new s,g=e+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=e;i++){var v=i/e;t(v,m,h),a.push(h.x,h.y,h.z),v-1e-5>=0?(t(v-1e-5,m,f),d.subVectors(h,f)):(t(v+1e-5,m,f),d.subVectors(f,h)),m-1e-5>=0?(t(v,m-1e-5,f),p.subVectors(h,f)):(t(v,m+1e-5,f),p.subVectors(f,h)),l.crossVectors(d,p).normalize(),u.push(l.x,l.y,l.z),c.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var y=r*g+i,b=r*g+i+1,w=(r+1)*g+i+1,_=(r+1)*g+i;o.push(y,b,_),o.push(b,w,_)}this.setIndex(o),this.addAttribute("position",new D(a,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(c,2))}function Xe(t,e,n,r){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Ye(t,e,n,r)),this.mergeVertices()}function Ye(t,e,n,r){function o(t,e,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var c=t.clone().lerp(n,i/a),l=e.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)s[i][o]=0===o&&i===a?c:c.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(u(s[i][f+1]),u(s[i+1][f]),u(s[i][f])):(u(s[i][f+1]),u(s[i+1][f+1]),u(s[i+1][f]))}}function a(){for(var t=0;t<g.length;t+=6){var e=g[t+0],n=g[t+2],r=g[t+4],i=Math.max(e,n,r),o=Math.min(e,n,r);i>.9&&o<.1&&(e<.2&&(g[t+0]+=1),n<.2&&(g[t+2]+=1),r<.2&&(g[t+4]+=1))}}function u(t){p.push(t.x,t.y,t.z)}function c(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(){for(var t=new s,e=new s,n=new s,r=new s,o=new i,a=new i,u=new i,c=0,l=0;c<p.length;c+=9,l+=6){t.set(p[c+0],p[c+1],p[c+2]),e.set(p[c+3],p[c+4],p[c+5]),n.set(p[c+6],p[c+7],p[c+8]),o.set(g[l+0],g[l+1]),a.set(g[l+2],g[l+3]),u.set(g[l+4],g[l+5]),r.copy(t).add(e).add(n).divideScalar(3);var d=f(r);h(o,l+0,t,d),h(a,l+2,e,d),h(u,l+4,n,d)}}function h(t,e,n,r){r<0&&1===t.x&&(g[e]=t.x-1),0===n.x&&0===n.z&&(g[e]=r/2/Math.PI+.5)}function f(t){return Math.atan2(t.z,-t.x)}function d(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}j.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;var p=[],g=[];!function(t){for(var n=new s,r=new s,i=new s,a=0;a<e.length;a+=3)c(e[a+0],n),c(e[a+1],r),c(e[a+2],i),o(n,r,i,t)}(r),function(t){for(var e=new s,n=0;n<p.length;n+=3)e.x=p[n+0],e.y=p[n+1],e.z=p[n+2],e.normalize().multiplyScalar(t),p[n+0]=e.x,p[n+1]=e.y,p[n+2]=e.z}(n),function(){for(var t=new s,e=0;e<p.length;e+=3){t.x=p[e+0],t.y=p[e+1],t.z=p[e+2];var n=f(t)/2/Math.PI+.5,r=d(t)/Math.PI+.5;g.push(n,1-r)}l(),a()}(),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(p.slice(),3)),this.addAttribute("uv",new D(g,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Ke(t,e){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ze(t,e)),this.mergeVertices()}function Ze(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ye.call(this,n,r,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Je(t,e){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Qe(t,e)),this.mergeVertices()}function Qe(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ye.call(this,n,r,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function tn(t,e){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new en(t,e)),this.mergeVertices()}function en(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ye.call(this,r,i,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nn(t,e){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new rn(t,e)),this.mergeVertices()}function rn(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ye.call(this,i,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function on(t,e,n,r,i,o){S.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new an(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function an(t,e,n,r,o){function a(i){m=t.getPointAt(i/e,m);var o=l.normals[i],a=l.binormals[i];for(f=0;f<=r;f++){var s=f/r*Math.PI*2,u=Math.sin(s),c=-Math.cos(s);p.x=c*o.x+u*a.x,p.y=c*o.y+u*a.y,p.z=c*o.z+u*a.z,p.normalize(),y.push(p.x,p.y,p.z),d.x=m.x+n*p.x,d.y=m.y+n*p.y,d.z=m.z+n*p.z,v.push(d.x,d.y,d.z)}}function u(){for(f=1;f<=e;f++)for(h=1;h<=r;h++){var t=(r+1)*(f-1)+(h-1),n=(r+1)*f+(h-1),i=(r+1)*f+h,o=(r+1)*(f-1)+h;w.push(t,n,o),w.push(n,i,o)}}function c(){for(h=0;h<=e;h++)for(f=0;f<=r;f++)g.x=h/e,g.y=f/r,b.push(g.x,g.y)}j.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:o},e=e||64,n=n||1,r=r||8,o=o||!1;var l=t.computeFrenetFrames(e,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var h,f,d=new s,p=new s,g=new i,m=new s,v=[],y=[],b=[],w=[];!function(){for(h=0;h<e;h++)a(h);a(!1===o?e:0),c(),u()}(),this.setIndex(w),this.addAttribute("position",new D(v,3)),this.addAttribute("normal",new D(y,3)),this.addAttribute("uv",new D(b,2))}function sn(t,e,n,r,i,o,a){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new un(t,e,n,r,i,o)),this.mergeVertices()}function un(t,e,n,r,i,o){function a(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}j.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var u,c,l=[],h=[],f=[],d=[],p=new s,g=new s,m=new s,v=new s,y=new s,b=new s,w=new s;for(u=0;u<=n;++u){var _=u/n*i*Math.PI*2;for(a(_,i,o,t,m),a(_+.01,i,o,t,v),b.subVectors(v,m),w.addVectors(v,m),y.crossVectors(b,w),w.crossVectors(y,b),y.normalize(),w.normalize(),c=0;c<=r;++c){var x=c/r*Math.PI*2,E=-e*Math.cos(x),A=e*Math.sin(x);p.x=m.x+(E*w.x+A*y.x),p.y=m.y+(E*w.y+A*y.y),p.z=m.z+(E*w.z+A*y.z),h.push(p.x,p.y,p.z),g.subVectors(p,m).normalize(),f.push(g.x,g.y,g.z),d.push(u/n),d.push(c/r)}}for(c=1;c<=n;c++)for(u=1;u<=r;u++){var C=(r+1)*(c-1)+(u-1),S=(r+1)*c+(u-1),M=(r+1)*c+u,T=(r+1)*(c-1)+u;l.push(C,S,T),l.push(S,M,T)}this.setIndex(l),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(d,2))}function cn(t,e,n,r,i){S.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ln(t,e,n,r,i)),this.mergeVertices()}function ln(t,e,n,r,i){j.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,u=[],c=[],l=[],h=[],f=new s,d=new s,p=new s;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var g=a/r*i,m=o/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(g),d.y=(t+e*Math.cos(m))*Math.sin(g),d.z=e*Math.sin(m),c.push(d.x,d.y,d.z),f.x=t*Math.cos(g),f.y=t*Math.sin(g),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(a/r),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,y=(r+1)*(o-1)+a-1,b=(r+1)*(o-1)+a,w=(r+1)*o+a;u.push(v,y,w),u.push(y,b,w)}this.setIndex(u),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(l,3)),this.addAttribute("uv",new D(h,2))}function hn(t,e,n,r,i){var o,a;if(i===Nn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Dn(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Dn(o,t[o],t[o+1],a);return a&&kn(a,a.next)&&(Bn(a),a=a.next),a}function fn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!kn(r,r.next)&&0!==Tn(r.prev,r,r.next))r=r.next;else{if(Bn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function dn(t,e,n,r,i,o,a){if(t){!a&&o&&xn(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?gn(t,r,i,o):pn(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Bn(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?(t=mn(t,e,n),dn(t,e,n,r,i,o,2)):2===a&&vn(t,e,n,r,i,o):dn(fn(t),e,n,r,i,o,1);break}}}function pn(t){var e=t.prev,n=t,r=t.next;if(Tn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Sn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Tn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function gn(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Tn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=An(s,u,e,n,r),f=An(c,l,e,n,r),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Tn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Tn(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function mn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!kn(i,o)&&On(i,r,r.next,o)&&Pn(i,o)&&Pn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Bn(r),Bn(r.next),r=t=o),r=r.next}while(r!==t);return r}function vn(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Mn(a,s)){var u=Rn(a,s);return a=fn(a,a.next),u=fn(u,u.next),dn(a,e,n,r,i,o),void dn(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function yn(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,u=hn(t,a,s,r,!1),u===u.next&&(u.steiner=!0),c.push(Cn(u));for(c.sort(bn),i=0;i<c.length;i++)wn(c[i],n),n=fn(n,n.next);return n}function bn(t,e){return t.x-e.x}function wn(t,e){if(e=_n(t,e)){var n=Rn(e,t);fn(n,n.next)}}function _n(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Sn(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Pn(r,t)&&(n=r,f=u),r=r.next;return n}function xn(t,e,n,r){var i=t;do{null===i.z&&(i.z=An(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,En(i)}function En(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function An(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Cn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Sn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Mn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Fn(t,e)&&Pn(t,e)&&Pn(e,t)&&Ln(t,e)}function Tn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function kn(t,e){return t.x===e.x&&t.y===e.y}function On(t,e,n,r){return!!(kn(t,e)&&kn(n,r)||kn(t,r)&&kn(n,e))||Tn(t,e,n)>0!==Tn(t,e,r)>0&&Tn(n,r,t)>0!==Tn(n,r,e)>0}function Fn(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&On(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Pn(t,e){return Tn(t.prev,t,t.next)<0?Tn(t,e,t.next)>=0&&Tn(t,t.prev,e)>=0:Tn(t,e,t.prev)<0||Tn(t,t.next,e)<0}function Ln(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function Rn(t,e){var n=new In(t.i,t.x,t.y),r=new In(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Dn(t,e,n,r){var i=new In(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function In(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function jn(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Un(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function $n(t,e){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new zn(t,e)),this.mergeVertices()}function zn(t,e){"undefined"!==typeof t&&(j.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function Hn(t,e){S.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Vn(t,e)),this.mergeVertices()}function Vn(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;var r=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),zn.call(this,r,e),this.type="TextBufferGeometry"}function Wn(t,e,n,r,i,o,a){S.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Gn(t,e,n,r,i,o,a)),this.mergeVertices()}function Gn(t,e,n,r,i,o,a){j.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var u,c,l=o+a,h=0,f=[],d=new s,p=new s,g=[],m=[],v=[],y=[];for(c=0;c<=n;c++){var b=[],w=c/n;for(u=0;u<=e;u++){var _=u/e;d.x=-t*Math.cos(r+_*i)*Math.sin(o+w*a),d.y=t*Math.cos(o+w*a),d.z=t*Math.sin(r+_*i)*Math.sin(o+w*a),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),y.push(_,1-w),b.push(h++)}f.push(b)}for(c=0;c<n;c++)for(u=0;u<e;u++){var x=f[c][u+1],E=f[c][u],A=f[c+1][u],C=f[c+1][u+1];(0!==c||o>0)&&g.push(x,E,C),(c!==n-1||l<Math.PI)&&g.push(E,A,C)}this.setIndex(g),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(y,2))}function qn(t,e,n,r,i,o){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Xn(t,e,n,r,i,o)),this.mergeVertices()}function Xn(t,e,n,r,o,a){j.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:a},t=t||.5,e=e||1,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var u,c,l,h=[],f=[],d=[],p=[],g=t,m=(e-t)/r,v=new s,y=new i;for(c=0;c<=r;c++){for(l=0;l<=n;l++)u=o+l/n*a,v.x=g*Math.cos(u),v.y=g*Math.sin(u),f.push(v.x,v.y,v.z),d.push(0,0,1),y.x=(v.x/e+1)/2,y.y=(v.y/e+1)/2,p.push(y.x,y.y);g+=m}for(c=0;c<r;c++){var b=c*(n+1);for(l=0;l<n;l++){u=l+b;var w=u,_=u+n+1,x=u+n+2,E=u+1;h.push(w,_,E),h.push(_,x,E)}}this.setIndex(h),this.addAttribute("position",new D(f,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(p,2))}function Yn(t,e,n,r){S.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Kn(t,e,n,r)),this.mergeVertices()}function Kn(t,e,n,r){j.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=ku.clamp(r,0,2*Math.PI);var o,a,u,c=[],l=[],h=[],f=1/e,d=new s,p=new i;for(a=0;a<=e;a++){var g=n+a*f*r,m=Math.sin(g),v=Math.cos(g);for(u=0;u<=t.length-1;u++)d.x=t[u].x*m,d.y=t[u].y,d.z=t[u].x*v,l.push(d.x,d.y,d.z),p.x=a/e,p.y=u/(t.length-1),h.push(p.x,p.y)}for(a=0;a<e;a++)for(u=0;u<t.length-1;u++){o=u+a*t.length;var y=o,b=o+t.length,w=o+t.length+1,_=o+1;c.push(y,b,_),c.push(b,w,_)}if(this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("uv",new D(h,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,E=new s,A=new s,C=new s;for(o=e*t.length*3,a=0,u=0;a<t.length;a++,u+=3)E.x=x[u+0],E.y=x[u+1],E.z=x[u+2],A.x=x[o+u+0],A.y=x[o+u+1],A.z=x[o+u+2],C.addVectors(E,A).normalize(),x[u+0]=x[o+u+0]=C.x,x[u+1]=x[o+u+1]=C.y,x[u+2]=x[o+u+2]=C.z}}function Zn(t,e){S.call(this),this.type="ShapeGeometry","object"===("undefined"===typeof e?"undefined":Zo(e))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Jn(t,e)),this.mergeVertices()}function Jn(t,e){function n(t){var n,s,c,l=i.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;if(!1===Ku.isClockWise(f))for(f=f.reverse(),n=0,s=d.length;n<s;n++)c=d[n],!0===Ku.isClockWise(c)&&(d[n]=c.reverse());var p=Ku.triangulateShape(f,d);for(n=0,s=d.length;n<s;n++)c=d[n],f=f.concat(c);for(n=0,s=f.length;n<s;n++){var g=f[n];i.push(g.x,g.y,0),o.push(0,0,1),a.push(g.x,g.y)}for(n=0,s=p.length;n<s;n++){var m=p[n],v=m[0]+l,y=m[1]+l,b=m[2]+l;r.push(v,y,b),u+=3}}j.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],i=[],o=[],a=[],s=0,u=0;if(!1===Array.isArray(t))n(t);else for(var c=0;c<t.length;c++)n(t[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(r),this.addAttribute("position",new D(i,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(a,2))}function Qn(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function tr(t,e){j.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(ku.DEG2RAD*e),u=[0,0],c={},l=["a","b","c"];t.isBufferGeometry?(o=new S,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,d=0,p=f.length;d<p;d++)for(var g=f[d],m=0;m<3;m++)n=g[l[m]],r=g[l[(m+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),i=u[0]+","+u[1],void 0===c[i]?c[i]={index1:u[0],index2:u[1],face1:d,face2:void 0}:c[i].face2=d;for(i in c){var v=c[i];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new D(a,3))}function er(t,e,n,r,i,o,a,s){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new nr(t,e,n,r,i,o,a,s)),this.mergeVertices()}function nr(t,e,n,r,o,a,u,c){function l(n){var o,a,l,v=new i,w=new s,_=0,x=!0===n?t:e,E=!0===n?1:-1;for(a=m,o=1;o<=r;o++)d.push(0,y*E,0),p.push(0,E,0),g.push(.5,.5),m++;for(l=m,o=0;o<=r;o++){var A=o/r,C=A*c+u,S=Math.cos(C),M=Math.sin(C);w.x=x*M,w.y=y*E,w.z=x*S,d.push(w.x,w.y,w.z),p.push(0,E,0),v.x=.5*S+.5,v.y=.5*M*E+.5,g.push(v.x,v.y),m++}for(o=0;o<r;o++){var T=a+o,k=l+o;!0===n?f.push(k,k+1,T):f.push(k+1,k,T),_+=3}h.addGroup(b,_,!0===n?1:2),b+=_}j.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:u,thetaLength:c};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,o=Math.floor(o)||1,a=void 0!==a&&a,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var f=[],d=[],p=[],g=[],m=0,v=[],y=n/2,b=0;!function(){var i,a,l=new s,w=new s,_=0,x=(e-t)/n;for(a=0;a<=o;a++){var E=[],A=a/o,C=A*(e-t)+t;for(i=0;i<=r;i++){var S=i/r,M=S*c+u,T=Math.sin(M),k=Math.cos(M);w.x=C*T,w.y=-A*n+y,w.z=C*k,d.push(w.x,w.y,w.z),l.set(T,x,k).normalize(),p.push(l.x,l.y,l.z),g.push(S,1-A),E.push(m++)}v.push(E)}for(i=0;i<r;i++)for(a=0;a<o;a++){var O=v[a][i],F=v[a+1][i],P=v[a+1][i+1],L=v[a][i+1];f.push(O,F,L),f.push(F,P,L),_+=6}h.addGroup(b,_,0),b+=_}(),!1===a&&(t>0&&l(!0),e>0&&l(!1)),this.setIndex(f),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(g,2))}function rr(t,e,n,r,i,o,a){er.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ir(t,e,n,r,i,o,a){nr.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function or(t,e,n,r){S.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ar(t,e,n,r)),this.mergeVertices()}function ar(t,e,n,r){j.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,a,u=[],c=[],l=[],h=[],f=new s,d=new i;for(c.push(0,0,0),l.push(0,0,1),h.push(.5,.5),a=0,o=3;a<=e;a++,o+=3){var p=n+a/e*r;f.x=t*Math.cos(p),f.y=t*Math.sin(p),c.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(c[o]/t+1)/2,d.y=(c[o+1]/t+1)/2,h.push(d.x,d.y)}for(o=1;o<=e;o++)u.push(o,o+1,0);this.setIndex(u),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(l,3)),this.addAttribute("uv",new D(h,2))}function sr(t){V.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(t)}function ur(t){G.call(this,t),this.type="RawShaderMaterial"}function cr(t){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function lr(t){cr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function hr(t){V.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function fr(t){hr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function dr(t){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function pr(t){V.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gr(t){De.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function mr(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function vr(t){this.manager=void 0!==t?t:tc}function yr(t){this.manager=void 0!==t?t:tc,this._parser=null}function br(t){this.manager=void 0!==t?t:tc,this._parser=null}function wr(t){this.manager=void 0!==t?t:tc}function _r(t){this.manager=void 0!==t?t:tc}function xr(t){this.manager=void 0!==t?t:tc}function Er(){this.type="Curve",this.arcLengthDivisions=200}function Ar(t,e,n,r,i,o,a,s){Er.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Cr(t,e,n,r,i,o){Ar.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Sr(){function t(t,o,a,s){e=t,n=a,r=-3*t+3*o-2*a-s,i=2*t-2*o+a+s}var e=0,n=0,r=0,i=0;return{initCatmullRom:function(e,n,r,i,o){t(n,r,o*(r-e),o*(i-n))},initNonuniformCatmullRom:function(e,n,r,i,o,a,s){var u=(n-e)/o-(r-e)/(o+a)+(r-n)/a,c=(r-n)/a-(i-n)/(a+s)+(i-r)/s;u*=a,c*=a,t(n,r,u,c)},calc:function(t){var o=t*t;return e+n*t+r*o+i*(o*t)}}}function Mr(t,e,n,r){Er.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Tr(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function kr(t,e){var n=1-t;return n*n*e}function Or(t,e){return 2*(1-t)*t*e}function Fr(t,e){return t*t*e}function Pr(t,e,n,r){return kr(t,e)+Or(t,n)+Fr(t,r)}function Lr(t,e){var n=1-t;return n*n*n*e}function Rr(t,e){var n=1-t;return 3*n*n*t*e}function Dr(t,e){return 3*(1-t)*t*t*e}function Br(t,e){return t*t*t*e}function Ir(t,e,n,r,i){return Lr(t,e)+Rr(t,n)+Dr(t,r)+Br(t,i)}function Nr(t,e,n,r){Er.call(this),this.type="CubicBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i,this.v3=r||new i}function jr(t,e,n,r){Er.call(this),this.type="CubicBezierCurve3",this.v0=t||new s,this.v1=e||new s,this.v2=n||new s,this.v3=r||new s}function Ur(t,e){Er.call(this),this.type="LineCurve",this.v1=t||new i,this.v2=e||new i}function $r(t,e){Er.call(this),this.type="LineCurve3",this.v1=t||new s,this.v2=e||new s}function zr(t,e,n){Er.call(this),this.type="QuadraticBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i}function Hr(t,e,n){Er.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new s,this.v1=e||new s,this.v2=n||new s}function Vr(t){Er.call(this),this.type="SplineCurve",this.points=t||[]}function Wr(){Er.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Gr(t){Wr.call(this),this.type="Path",this.currentPoint=new i,t&&this.setFromPoints(t)}function qr(t){Gr.call(this,t),this.uuid=ku.generateUUID(),this.type="Shape",this.holes=[]}function Xr(t,e){x.call(this),this.type="Light",this.color=new y(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Yr(t,e,n){Xr.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(x.DefaultUp),this.updateMatrix(),this.groundColor=new y(e)}function Kr(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new o}function Zr(){Kr.call(this,new xe(50,1,.5,500))}function Jr(t,e,n,r,i,o){Xr.call(this,t,e),this.type="SpotLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Zr}function Qr(t,e,n,r){Xr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Kr(new xe(90,1,.5,500))}function ti(){Kr.call(this,new A(-5,5,5,-5,.5,500))}function ei(t,e){Xr.call(this,t,e),this.type="DirectionalLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,this.shadow=new ti}function ni(t,e){Xr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ri(t,e,n,r){Xr.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ii(t,e,n,r){pi.call(this,t,e,n,r)}function oi(t,e,n){pi.call(this,t,e,n)}function ai(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function si(t,e,n,r){ai.call(this,t,e,n,r)}function ui(t,e,n,r){pi.call(this,t,e,n,r)}function ci(t,e,n,r){pi.call(this,t,e,n,r)}function li(t,e,n,r){pi.call(this,t,e,n,r)}function hi(t,e,n,r){ai.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function fi(t,e,n,r){ai.call(this,t,e,n,r)}function di(t,e,n,r){ai.call(this,t,e,n,r)}function pi(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=sc.convertArray(e,this.TimeBufferType),this.values=sc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function gi(t,e,n,r){pi.call(this,t,e,n,r)}function mi(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=ku.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function vi(t){this.manager=void 0!==t?t:tc,this.textures={}}function yi(t){this.manager=void 0!==t?t:tc}function bi(){}function wi(t){"boolean"===typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:tc,this.withCredentials=!1}function _i(t){this.manager=void 0!==t?t:tc,this.texturePath=""}function xi(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:tc,this.options=void 0}function Ei(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Ai(t){this.type="Font",this.data=t}function Ci(t,e,n,r){for(var i=String(t).split(""),o=e/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,s=[],u=0,c=0,l=0;l<i.length;l++){var h=i[l];if("\n"===h)u=0,c-=a;else{var f=Si(h,n,o,u,c,r);u+=f.offsetX,s.push(f.path)}}return s}function Si(t,e,n,r,i,o){var a=o.glyphs[t]||o.glyphs["?"];if(a){var s,u,c,l,h,f,d,p,g=new Ei;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,y=m.length;v<y;){var b=m[v++];switch(b){case"m":s=m[v++]*n+r,u=m[v++]*n+i,g.moveTo(s,u);break;case"l":s=m[v++]*n+r,u=m[v++]*n+i,g.lineTo(s,u);break;case"q":c=m[v++]*n+r,l=m[v++]*n+i,h=m[v++]*n+r,f=m[v++]*n+i,g.quadraticCurveTo(h,f,c,l);break;case"b":c=m[v++]*n+r,l=m[v++]*n+i,h=m[v++]*n+r,f=m[v++]*n+i,d=m[v++]*n+r,p=m[v++]*n+i,g.bezierCurveTo(h,f,d,p,c,l)}}return{offsetX:a.ha*n,path:g}}}function Mi(t){this.manager=void 0!==t?t:tc}function Ti(t){this.manager=void 0!==t?t:tc}function ki(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Oi(t,e,n){x.call(this),this.type="CubeCamera";var r=new xe(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new s(1,0,0)),this.add(r);var i=new xe(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new s(-1,0,0)),this.add(i);var o=new xe(90,1,t,e);o.up.set(0,0,1),o.lookAt(new s(0,1,0)),this.add(o);var a=new xe(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new s(0,-1,0)),this.add(a);var u=new xe(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new s(0,0,1)),this.add(u);var c=new xe(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new s(0,0,-1)),this.add(c);var l={format:Fs,magFilter:gs,minFilter:gs};this.renderTarget=new f(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,r,n),n.activeCubeFace=1,t.render(e,i,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,a,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,t.render(e,c,n),t.setRenderTarget(null)},this.clear=function(t,e,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,t.setRenderTarget(i),t.clear(e,n,r);t.setRenderTarget(null)}}function Fi(){x.call(this),this.type="AudioListener",this.context=pc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Pi(t){x.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Li(t){Pi.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ri(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Di(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Bi(t,e,n){var r=n||Ii.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Ii(t,e,n){this.path=e,this.parsedPath=n||Ii.parseTrackName(e),this.node=Ii.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Ni(){this.uuid=ku.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function ji(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:du,endingEnd:du},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ui(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function $i(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function zi(){j.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Hi(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Vi(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wi(t,e,n){Vi.call(this,t,e),this.meshPerAttribute=n||1}function Gi(t,e,n){M.call(this,t,e),this.meshPerAttribute=n||1}function qi(t,e,n,r){this.ray=new q(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Xi(t,e){return t.distance-e.distance}function Yi(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,o=0,a=i.length;o<a;o++)Yi(i[o],e,n,!0)}function Ki(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Zi(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Ji(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Qi(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function to(t){x.call(this),this.material=t,this.render=function(){}}function eo(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new j,c=new D(2*a*3,3);u.addAttribute("position",c),Ie.call(this,u,new De({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function no(t,e){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new j,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new D(r,3));var u=new De({fog:!1});this.cone=new Ie(n,u),this.add(this.cone),this.update()}function ro(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,ro(t.children[n]));return e}function io(t){for(var e=ro(t),n=new j,r=[],i=[],o=new y(0,0,1),a=new y(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new D(r,3)),n.addAttribute("color",new D(i,3));var c=new De({vertexColors:ma,depthTest:!1,depthWrite:!1,transparent:!0});Ie.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function oo(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Gn(e,4,2),i=new W({wireframe:!0,fog:!1});K.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ao(t,e){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new De({fog:!1}),r=new j;r.addAttribute("position",new M(new Float32Array(15),3)),this.line=new Be(r,n),this.add(this.line),this.update()}function so(t,e,n){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Qe(e);r.rotateY(.5*Math.PI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ma);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new M(o,3)),this.add(new K(r,this.material)),this.update()}function uo(t,e,n,r){t=t||10,e=e||10,n=new y(void 0!==n?n:4473924),r=new y(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],c=0,l=0,h=-a;c<=e;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=c===i?n:r;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var d=new j;d.addAttribute("position",new D(s,3)),d.addAttribute("color",new D(u,3));var p=new De({vertexColors:ma});Ie.call(this,d,p)}function co(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new y(void 0!==i?i:4473924),o=new y(void 0!==o?o:8947848);var a,s,u,c,l,h,f,d=[],p=[];for(c=0;c<=e;c++)u=c/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,d.push(0,0,0),d.push(a,0,s),f=1&c?i:o,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(c=0;c<=n;c++)for(f=1&c?i:o,h=t-t/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var g=new j;g.addAttribute("position",new D(d,3)),g.addAttribute("color",new D(p,3));var m=new De({vertexColors:ma});Ie.call(this,g,m)}function lo(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new j,c=new D(2*a*3,3);u.addAttribute("position",c),Ie.call(this,u,new De({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ho(t,e,n){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new j;r.addAttribute("position",new D([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new De({fog:!1});this.lightPlane=new Be(r,i),this.add(this.lightPlane),r=new j,r.addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new Be(r,i),this.add(this.targetLine),this.update()}function fo(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){o.push(0,0,0),a.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(o.length/3-1)}var r=new j,i=new De({color:16777215,vertexColors:ga}),o=[],a=[],s={},u=new y(16755200),c=new y(16711680),l=new y(43775),h=new y(16777215),f=new y(3355443);e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",h),e("p","c",f),e("cn1","cn2",f),e("cn3","cn4",f),e("cf1","cf2",f),e("cf3","cf4",f),r.addAttribute("position",new D(o,3)),r.addAttribute("color",new D(a,3)),Ie.call(this,r,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function po(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new j;i.setIndex(new M(n,1)),i.addAttribute("position",new M(r,3)),Ie.call(this,i,new De({color:e})),this.matrixAutoUpdate=!1,this.update()}function go(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new j;o.setIndex(new M(r,1)),o.addAttribute("position",new D(i,3)),Ie.call(this,o,new De({color:n})),this.geometry.computeBoundingSphere()}function mo(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new j;o.addAttribute("position",new D(i,3)),o.computeBoundingSphere(),Be.call(this,o,new De({color:r}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new j;s.addAttribute("position",new D(a,3)),s.computeBoundingSphere(),this.add(new K(s,new W({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function vo(t,e,n,r,i,o){x.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===mc&&(mc=new j,mc.addAttribute("position",new D([0,0,0,0,1,0],3)),vc=new nr(0,.5,1,5,1),vc.translate(0,-.5,0)),this.position.copy(e),this.line=new Be(mc,new De({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new K(vc,new W({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function yo(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new j;r.addAttribute("position",new D(e,3)),r.addAttribute("color",new D(n,3));var i=new De({vertexColors:ma});Ie.call(this,r,i)}function bo(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new C(t,e,n,i,o,a)}function wo(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function _o(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function xo(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ue(t,e)}function Eo(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Oe(t)}function Ao(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ue(t,e)}function Co(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function So(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function Mo(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function To(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new s(t,e,n)}function ko(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new M(t,e).setDynamic(!0)}function Oo(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new T(t,e)}function Fo(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new k(t,e)}function Po(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new O(t,e)}function Lo(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new F(t,e)}function Ro(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new P(t,e)}function Do(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new L(t,e)}function Bo(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(t,e)}function Io(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new D(t,e)}function No(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new B(t,e)}function jo(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mr.call(this,t),this.type="catmullrom",this.closed=!0}function Uo(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mr.call(this,t),this.type="catmullrom"}function $o(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Mr.call(this,t),this.type="catmullrom"}function zo(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yo(t)}function Ho(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new po(t,e)}function Vo(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ie(new tr(t.geometry),new De({color:void 0!==e?e:16777215}))}function Wo(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ie(new We(t.geometry),new De({color:void 0!==e?e:16777215}))}function Go(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new vr(t)}function qo(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new br(t)}function Xo(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Yo(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function Ko(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"WebGLRenderTargetCube",function(){return f}),n.d(e,"WebGLRenderTarget",function(){return h}),n.d(e,"WebGLRenderer",function(){return Ce}),n.d(e,"ShaderLib",function(){return Du}),n.d(e,"UniformsLib",function(){return Ru}),n.d(e,"UniformsUtils",function(){return Pu}),n.d(e,"ShaderChunk",function(){return Fu}),n.d(e,"FogExp2",function(){return Se}),n.d(e,"Fog",function(){return Me}),n.d(e,"Scene",function(){return Te}),n.d(e,"Sprite",function(){return Oe}),n.d(e,"LOD",function(){return Fe}),n.d(e,"SkinnedMesh",function(){return Re}),n.d(e,"Skeleton",function(){return Pe}),n.d(e,"Bone",function(){return Le}),n.d(e,"Mesh",function(){return K}),n.d(e,"LineSegments",function(){return Ie}),n.d(e,"LineLoop",function(){return Ne}),n.d(e,"Line",function(){return Be}),n.d(e,"Points",function(){return Ue}),n.d(e,"Group",function(){return $e}),n.d(e,"VideoTexture",function(){return ze}),n.d(e,"DataTexture",function(){return d}),n.d(e,"CompressedTexture",function(){return He}),n.d(e,"CubeTexture",function(){return ut}),n.d(e,"CanvasTexture",function(){return ve}),n.d(e,"DepthTexture",function(){return Ve}),n.d(e,"Texture",function(){return c}),n.d(e,"CompressedTextureLoader",function(){return yr}),n.d(e,"DataTextureLoader",function(){return br}),n.d(e,"CubeTextureLoader",function(){return _r}),n.d(e,"TextureLoader",function(){return xr}),n.d(e,"ObjectLoader",function(){return _i}),n.d(e,"MaterialLoader",function(){return vi}),n.d(e,"BufferGeometryLoader",function(){return yi}),n.d(e,"DefaultLoadingManager",function(){return tc}),n.d(e,"LoadingManager",function(){return mr}),n.d(e,"JSONLoader",function(){return wi}),n.d(e,"ImageLoader",function(){return wr}),n.d(e,"ImageBitmapLoader",function(){return xi}),n.d(e,"FontLoader",function(){return Mi}),n.d(e,"FileLoader",function(){return vr}),n.d(e,"Loader",function(){return bi}),n.d(e,"LoaderUtils",function(){return cc}),n.d(e,"Cache",function(){return Qu}),n.d(e,"AudioLoader",function(){return Ti}),n.d(e,"SpotLightShadow",function(){return Zr}),n.d(e,"SpotLight",function(){return Jr}),n.d(e,"PointLight",function(){return Qr}),n.d(e,"RectAreaLight",function(){return ri}),n.d(e,"HemisphereLight",function(){return Yr}),n.d(e,"DirectionalLightShadow",function(){return ti}),n.d(e,"DirectionalLight",function(){return ei}),n.d(e,"AmbientLight",function(){return ni}),n.d(e,"LightShadow",function(){return Kr}),n.d(e,"Light",function(){return Xr}),n.d(e,"StereoCamera",function(){return ki}),n.d(e,"PerspectiveCamera",function(){return xe}),n.d(e,"OrthographicCamera",function(){return A}),n.d(e,"CubeCamera",function(){return Oi}),n.d(e,"ArrayCamera",function(){return Ee}),n.d(e,"Camera",function(){return E}),n.d(e,"AudioListener",function(){return Fi}),n.d(e,"PositionalAudio",function(){return Li}),n.d(e,"AudioContext",function(){return pc}),n.d(e,"AudioAnalyser",function(){return Ri}),n.d(e,"Audio",function(){return Pi}),n.d(e,"VectorKeyframeTrack",function(){return gi}),n.d(e,"StringKeyframeTrack",function(){return ii}),n.d(e,"QuaternionKeyframeTrack",function(){return ui}),n.d(e,"NumberKeyframeTrack",function(){return li}),n.d(e,"ColorKeyframeTrack",function(){return ci}),n.d(e,"BooleanKeyframeTrack",function(){return oi}),n.d(e,"PropertyMixer",function(){return Di}),n.d(e,"PropertyBinding",function(){return Ii}),n.d(e,"KeyframeTrack",function(){return pi}),n.d(e,"AnimationUtils",function(){return sc}),n.d(e,"AnimationObjectGroup",function(){return Ni}),n.d(e,"AnimationMixer",function(){return Ui}),n.d(e,"AnimationClip",function(){return mi}),n.d(e,"Uniform",function(){return $i}),n.d(e,"InstancedBufferGeometry",function(){return zi}),n.d(e,"BufferGeometry",function(){return j}),n.d(e,"Geometry",function(){return S}),n.d(e,"InterleavedBufferAttribute",function(){return Hi}),n.d(e,"InstancedInterleavedBuffer",function(){return Wi}),n.d(e,"InterleavedBuffer",function(){return Vi}),n.d(e,"InstancedBufferAttribute",function(){return Gi}),n.d(e,"Face3",function(){return C}),n.d(e,"Object3D",function(){return x}),n.d(e,"Raycaster",function(){return qi}),n.d(e,"Layers",function(){return _}),n.d(e,"EventDispatcher",function(){return r}),n.d(e,"Clock",function(){return Ki}),n.d(e,"QuaternionLinearInterpolant",function(){return si}),n.d(e,"LinearInterpolant",function(){return fi}),n.d(e,"DiscreteInterpolant",function(){return di}),n.d(e,"CubicInterpolant",function(){return hi}),n.d(e,"Interpolant",function(){return ai}),n.d(e,"Triangle",function(){return Y}),n.d(e,"Math",function(){return ku}),n.d(e,"Spherical",function(){return Zi}),n.d(e,"Cylindrical",function(){return Ji}),n.d(e,"Plane",function(){return m}),n.d(e,"Frustum",function(){return v}),n.d(e,"Sphere",function(){return g}),n.d(e,"Ray",function(){return q}),n.d(e,"Matrix4",function(){return o}),n.d(e,"Matrix3",function(){return u}),n.d(e,"Box3",function(){return p}),n.d(e,"Box2",function(){return Qi}),n.d(e,"Line3",function(){return X}),n.d(e,"Euler",function(){return w}),n.d(e,"Vector4",function(){return l}),n.d(e,"Vector3",function(){return s}),n.d(e,"Vector2",function(){return i}),n.d(e,"Quaternion",function(){return a}),n.d(e,"Color",function(){return y}),n.d(e,"ImmediateRenderObject",function(){return to}),n.d(e,"VertexNormalsHelper",function(){return eo}),n.d(e,"SpotLightHelper",function(){return no}),n.d(e,"SkeletonHelper",function(){return io}),n.d(e,"PointLightHelper",function(){return oo}),n.d(e,"RectAreaLightHelper",function(){return ao}),n.d(e,"HemisphereLightHelper",function(){return so}),n.d(e,"GridHelper",function(){return uo}),n.d(e,"PolarGridHelper",function(){return co}),n.d(e,"FaceNormalsHelper",function(){return lo}),n.d(e,"DirectionalLightHelper",function(){return ho}),n.d(e,"CameraHelper",function(){return fo}),n.d(e,"BoxHelper",function(){return po}),n.d(e,"Box3Helper",function(){return go}),n.d(e,"PlaneHelper",function(){return mo}),n.d(e,"ArrowHelper",function(){return vo}),n.d(e,"AxesHelper",function(){return yo}),n.d(e,"Shape",function(){return qr}),n.d(e,"Path",function(){return Gr}),n.d(e,"ShapePath",function(){return Ei}),n.d(e,"Font",function(){return Ai}),n.d(e,"CurvePath",function(){return Wr}),n.d(e,"Curve",function(){return Er}),n.d(e,"ShapeUtils",function(){return Ku}),n.d(e,"WebGLUtils",function(){return _e}),n.d(e,"WireframeGeometry",function(){return We}),n.d(e,"ParametricGeometry",function(){return Ge}),n.d(e,"ParametricBufferGeometry",function(){return qe}),n.d(e,"TetrahedronGeometry",function(){return Ke}),n.d(e,"TetrahedronBufferGeometry",function(){return Ze}),n.d(e,"OctahedronGeometry",function(){return Je}),n.d(e,"OctahedronBufferGeometry",function(){return Qe}),n.d(e,"IcosahedronGeometry",function(){return tn}),n.d(e,"IcosahedronBufferGeometry",function(){return en}),n.d(e,"DodecahedronGeometry",function(){return nn}),n.d(e,"DodecahedronBufferGeometry",function(){return rn}),n.d(e,"PolyhedronGeometry",function(){return Xe}),n.d(e,"PolyhedronBufferGeometry",function(){return Ye}),n.d(e,"TubeGeometry",function(){return on}),n.d(e,"TubeBufferGeometry",function(){return an}),n.d(e,"TorusKnotGeometry",function(){return sn}),n.d(e,"TorusKnotBufferGeometry",function(){return un}),n.d(e,"TorusGeometry",function(){return cn}),n.d(e,"TorusBufferGeometry",function(){return ln}),n.d(e,"TextGeometry",function(){return Hn}),n.d(e,"TextBufferGeometry",function(){return Vn}),n.d(e,"SphereGeometry",function(){return Wn}),n.d(e,"SphereBufferGeometry",function(){return Gn}),n.d(e,"RingGeometry",function(){return qn}),n.d(e,"RingBufferGeometry",function(){return Xn}),n.d(e,"PlaneGeometry",function(){return z}),n.d(e,"PlaneBufferGeometry",function(){return H}),n.d(e,"LatheGeometry",function(){return Yn}),n.d(e,"LatheBufferGeometry",function(){return Kn}),n.d(e,"ShapeGeometry",function(){return Zn}),n.d(e,"ShapeBufferGeometry",function(){return Jn}),n.d(e,"ExtrudeGeometry",function(){return $n}),n.d(e,"ExtrudeBufferGeometry",function(){return zn}),n.d(e,"EdgesGeometry",function(){return tr}),n.d(e,"ConeGeometry",function(){return rr}),n.d(e,"ConeBufferGeometry",function(){return ir}),n.d(e,"CylinderGeometry",function(){return er}),n.d(e,"CylinderBufferGeometry",function(){return nr}),n.d(e,"CircleGeometry",function(){return or}),n.d(e,"CircleBufferGeometry",function(){return ar}),n.d(e,"BoxGeometry",function(){return U}),n.d(e,"BoxBufferGeometry",function(){return $}),n.d(e,"ShadowMaterial",function(){return sr}),n.d(e,"SpriteMaterial",function(){return ke}),n.d(e,"RawShaderMaterial",function(){return ur}),n.d(e,"ShaderMaterial",function(){return G}),n.d(e,"PointsMaterial",function(){return je}),n.d(e,"MeshPhysicalMaterial",function(){return lr}),n.d(e,"MeshStandardMaterial",function(){return cr}),n.d(e,"MeshPhongMaterial",function(){return hr}),n.d(e,"MeshToonMaterial",function(){return fr}),n.d(e,"MeshNormalMaterial",function(){return dr}),n.d(e,"MeshLambertMaterial",function(){return pr}),n.d(e,"MeshDepthMaterial",function(){return pe}),n.d(e,"MeshDistanceMaterial",function(){return ge}),n.d(e,"MeshBasicMaterial",function(){return W});n.d(e,"LineDashedMaterial",function(){return gr}),n.d(e,"LineBasicMaterial",function(){return De}),n.d(e,"Material",function(){return V}),n.d(e,"Float64BufferAttribute",function(){return B}),n.d(e,"Float32BufferAttribute",function(){return D}),n.d(e,"Uint32BufferAttribute",function(){return R}),n.d(e,"Int32BufferAttribute",function(){return L}),n.d(e,"Uint16BufferAttribute",function(){return P}),n.d(e,"Int16BufferAttribute",function(){return F}),n.d(e,"Uint8ClampedBufferAttribute",function(){return O}),n.d(e,"Uint8BufferAttribute",function(){return k}),n.d(e,"Int8BufferAttribute",function(){return T}),n.d(e,"BufferAttribute",function(){return M}),n.d(e,"ArcCurve",function(){return Cr}),n.d(e,"CatmullRomCurve3",function(){return Mr}),n.d(e,"CubicBezierCurve",function(){return Nr}),n.d(e,"CubicBezierCurve3",function(){return jr}),n.d(e,"EllipseCurve",function(){return Ar}),n.d(e,"LineCurve",function(){return Ur}),n.d(e,"LineCurve3",function(){return $r}),n.d(e,"QuadraticBezierCurve",function(){return zr}),n.d(e,"QuadraticBezierCurve3",function(){return Hr}),n.d(e,"SplineCurve",function(){return Vr}),n.d(e,"REVISION",function(){return Jo}),n.d(e,"MOUSE",function(){return Qo}),n.d(e,"CullFaceNone",function(){return ta}),n.d(e,"CullFaceBack",function(){return ea}),n.d(e,"CullFaceFront",function(){return na}),n.d(e,"CullFaceFrontBack",function(){return ra}),n.d(e,"FrontFaceDirectionCW",function(){return ia}),n.d(e,"FrontFaceDirectionCCW",function(){return oa}),n.d(e,"BasicShadowMap",function(){return aa}),n.d(e,"PCFShadowMap",function(){return sa}),n.d(e,"PCFSoftShadowMap",function(){return ua}),n.d(e,"FrontSide",function(){return ca}),n.d(e,"BackSide",function(){return la}),n.d(e,"DoubleSide",function(){return ha}),n.d(e,"FlatShading",function(){return fa}),n.d(e,"SmoothShading",function(){return da}),n.d(e,"NoColors",function(){return pa}),n.d(e,"FaceColors",function(){return ga}),n.d(e,"VertexColors",function(){return ma}),n.d(e,"NoBlending",function(){return va}),n.d(e,"NormalBlending",function(){return ya}),n.d(e,"AdditiveBlending",function(){return ba}),n.d(e,"SubtractiveBlending",function(){return wa}),n.d(e,"MultiplyBlending",function(){return _a}),n.d(e,"CustomBlending",function(){return xa}),n.d(e,"AddEquation",function(){return Ea}),n.d(e,"SubtractEquation",function(){return Aa}),n.d(e,"ReverseSubtractEquation",function(){return Ca}),n.d(e,"MinEquation",function(){return Sa}),n.d(e,"MaxEquation",function(){return Ma}),n.d(e,"ZeroFactor",function(){return Ta}),n.d(e,"OneFactor",function(){return ka}),n.d(e,"SrcColorFactor",function(){return Oa}),n.d(e,"OneMinusSrcColorFactor",function(){return Fa}),n.d(e,"SrcAlphaFactor",function(){return Pa}),n.d(e,"OneMinusSrcAlphaFactor",function(){return La}),n.d(e,"DstAlphaFactor",function(){return Ra}),n.d(e,"OneMinusDstAlphaFactor",function(){return Da}),n.d(e,"DstColorFactor",function(){return Ba}),n.d(e,"OneMinusDstColorFactor",function(){return Ia}),n.d(e,"SrcAlphaSaturateFactor",function(){return Na}),n.d(e,"NeverDepth",function(){return ja}),n.d(e,"AlwaysDepth",function(){return Ua}),n.d(e,"LessDepth",function(){return $a}),n.d(e,"LessEqualDepth",function(){return za}),n.d(e,"EqualDepth",function(){return Ha}),n.d(e,"GreaterEqualDepth",function(){return Va}),n.d(e,"GreaterDepth",function(){return Wa}),n.d(e,"NotEqualDepth",function(){return Ga}),n.d(e,"MultiplyOperation",function(){return qa}),n.d(e,"MixOperation",function(){return Xa}),n.d(e,"AddOperation",function(){return Ya}),n.d(e,"NoToneMapping",function(){return Ka}),n.d(e,"LinearToneMapping",function(){return Za}),n.d(e,"ReinhardToneMapping",function(){return Ja}),n.d(e,"Uncharted2ToneMapping",function(){return Qa}),n.d(e,"CineonToneMapping",function(){return ts}),n.d(e,"UVMapping",function(){return es}),n.d(e,"CubeReflectionMapping",function(){return ns}),n.d(e,"CubeRefractionMapping",function(){return rs}),n.d(e,"EquirectangularReflectionMapping",function(){return is}),n.d(e,"EquirectangularRefractionMapping",function(){return os}),n.d(e,"SphericalReflectionMapping",function(){return as}),n.d(e,"CubeUVReflectionMapping",function(){return ss}),n.d(e,"CubeUVRefractionMapping",function(){return us}),n.d(e,"RepeatWrapping",function(){return cs}),n.d(e,"ClampToEdgeWrapping",function(){return ls}),n.d(e,"MirroredRepeatWrapping",function(){return hs}),n.d(e,"NearestFilter",function(){return fs}),n.d(e,"NearestMipMapNearestFilter",function(){return ds}),n.d(e,"NearestMipMapLinearFilter",function(){return ps}),n.d(e,"LinearFilter",function(){return gs}),n.d(e,"LinearMipMapNearestFilter",function(){return ms}),n.d(e,"LinearMipMapLinearFilter",function(){return vs}),n.d(e,"UnsignedByteType",function(){return ys}),n.d(e,"ByteType",function(){return bs}),n.d(e,"ShortType",function(){return ws}),n.d(e,"UnsignedShortType",function(){return _s}),n.d(e,"IntType",function(){return xs}),n.d(e,"UnsignedIntType",function(){return Es}),n.d(e,"FloatType",function(){return As}),n.d(e,"HalfFloatType",function(){return Cs}),n.d(e,"UnsignedShort4444Type",function(){return Ss}),n.d(e,"UnsignedShort5551Type",function(){return Ms}),n.d(e,"UnsignedShort565Type",function(){return Ts}),n.d(e,"UnsignedInt248Type",function(){return ks}),n.d(e,"AlphaFormat",function(){return Os}),n.d(e,"RGBFormat",function(){return Fs}),n.d(e,"RGBAFormat",function(){return Ps}),n.d(e,"LuminanceFormat",function(){return Ls}),n.d(e,"LuminanceAlphaFormat",function(){return Rs}),n.d(e,"RGBEFormat",function(){return Ds}),n.d(e,"DepthFormat",function(){return Bs}),n.d(e,"DepthStencilFormat",function(){return Is}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return Ns}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return js}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return Us}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return $s}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return zs}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return Hs}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return Vs}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return Ws}),n.d(e,"RGB_ETC1_Format",function(){return Gs}),n.d(e,"RGBA_ASTC_4x4_Format",function(){return qs}),n.d(e,"RGBA_ASTC_5x4_Format",function(){return Xs}),n.d(e,"RGBA_ASTC_5x5_Format",function(){return Ys}),n.d(e,"RGBA_ASTC_6x5_Format",function(){return Ks}),n.d(e,"RGBA_ASTC_6x6_Format",function(){return Zs}),n.d(e,"RGBA_ASTC_8x5_Format",function(){return Js}),n.d(e,"RGBA_ASTC_8x6_Format",function(){return Qs}),n.d(e,"RGBA_ASTC_8x8_Format",function(){return tu}),n.d(e,"RGBA_ASTC_10x5_Format",function(){return eu}),n.d(e,"RGBA_ASTC_10x6_Format",function(){return nu}),n.d(e,"RGBA_ASTC_10x8_Format",function(){return ru}),n.d(e,"RGBA_ASTC_10x10_Format",function(){return iu}),n.d(e,"RGBA_ASTC_12x10_Format",function(){return ou}),n.d(e,"RGBA_ASTC_12x12_Format",function(){return au}),n.d(e,"LoopOnce",function(){return su}),n.d(e,"LoopRepeat",function(){return uu}),n.d(e,"LoopPingPong",function(){return cu}),n.d(e,"InterpolateDiscrete",function(){return lu}),n.d(e,"InterpolateLinear",function(){return hu}),n.d(e,"InterpolateSmooth",function(){return fu}),n.d(e,"ZeroCurvatureEnding",function(){return du}),n.d(e,"ZeroSlopeEnding",function(){return pu}),n.d(e,"WrapAroundEnding",function(){return gu}),n.d(e,"TrianglesDrawMode",function(){return mu}),n.d(e,"TriangleStripDrawMode",function(){return vu}),n.d(e,"TriangleFanDrawMode",function(){return yu}),n.d(e,"LinearEncoding",function(){return bu}),n.d(e,"sRGBEncoding",function(){return wu}),n.d(e,"GammaEncoding",function(){return _u}),n.d(e,"RGBEEncoding",function(){return xu}),n.d(e,"LogLuvEncoding",function(){return Eu}),n.d(e,"RGBM7Encoding",function(){return Au}),n.d(e,"RGBM16Encoding",function(){return Cu}),n.d(e,"RGBDEncoding",function(){return Su}),n.d(e,"BasicDepthPacking",function(){return Mu}),n.d(e,"RGBADepthPacking",function(){return Tu}),n.d(e,"CubeGeometry",function(){return U}),n.d(e,"Face4",function(){return bo}),n.d(e,"LineStrip",function(){return yc}),n.d(e,"LinePieces",function(){return bc}),n.d(e,"MeshFaceMaterial",function(){return wo}),n.d(e,"MultiMaterial",function(){return _o}),n.d(e,"PointCloud",function(){return xo}),n.d(e,"Particle",function(){return Eo}),n.d(e,"ParticleSystem",function(){return Ao}),n.d(e,"PointCloudMaterial",function(){return Co}),n.d(e,"ParticleBasicMaterial",function(){return So}),n.d(e,"ParticleSystemMaterial",function(){return Mo}),n.d(e,"Vertex",function(){return To}),n.d(e,"DynamicBufferAttribute",function(){return ko}),n.d(e,"Int8Attribute",function(){return Oo}),n.d(e,"Uint8Attribute",function(){return Fo}),n.d(e,"Uint8ClampedAttribute",function(){return Po}),n.d(e,"Int16Attribute",function(){return Lo}),n.d(e,"Uint16Attribute",function(){return Ro}),n.d(e,"Int32Attribute",function(){return Do}),n.d(e,"Uint32Attribute",function(){return Bo}),n.d(e,"Float32Attribute",function(){return Io}),n.d(e,"Float64Attribute",function(){return No}),n.d(e,"ClosedSplineCurve3",function(){return jo}),n.d(e,"SplineCurve3",function(){return Uo}),n.d(e,"Spline",function(){return $o}),n.d(e,"AxisHelper",function(){return zo}),n.d(e,"BoundingBoxHelper",function(){return Ho}),n.d(e,"EdgesHelper",function(){return Vo}),n.d(e,"WireframeHelper",function(){return Wo}),n.d(e,"XHRLoader",function(){return Go}),n.d(e,"BinaryTextureLoader",function(){return qo}),n.d(e,"GeometryUtils",function(){return wc}),n.d(e,"ImageUtils",function(){return _c}),n.d(e,"Projector",function(){return Xo}),n.d(e,"CanvasRenderer",function(){return Yo}),n.d(e,"SceneUtils",function(){return xc}),n.d(e,"LensFlare",function(){return Ko});var Zo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}}(),Object.assign(r.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,t)}}}});var Jo="91",Qo={LEFT:0,MIDDLE:1,RIGHT:2},ta=0,ea=1,na=2,ra=3,ia=0,oa=1,aa=0,sa=1,ua=2,ca=0,la=1,ha=2,fa=1,da=2,pa=0,ga=1,ma=2,va=0,ya=1,ba=2,wa=3,_a=4,xa=5,Ea=100,Aa=101,Ca=102,Sa=103,Ma=104,Ta=200,ka=201,Oa=202,Fa=203,Pa=204,La=205,Ra=206,Da=207,Ba=208,Ia=209,Na=210,ja=0,Ua=1,$a=2,za=3,Ha=4,Va=5,Wa=6,Ga=7,qa=0,Xa=1,Ya=2,Ka=0,Za=1,Ja=2,Qa=3,ts=4,es=300,ns=301,rs=302,is=303,os=304,as=305,ss=306,us=307,cs=1e3,ls=1001,hs=1002,fs=1003,ds=1004,ps=1005,gs=1006,ms=1007,vs=1008,ys=1009,bs=1010,ws=1011,_s=1012,xs=1013,Es=1014,As=1015,Cs=1016,Ss=1017,Ms=1018,Ts=1019,ks=1020,Os=1021,Fs=1022,Ps=1023,Ls=1024,Rs=1025,Ds=Ps,Bs=1026,Is=1027,Ns=33776,js=33777,Us=33778,$s=33779,zs=35840,Hs=35841,Vs=35842,Ws=35843,Gs=36196,qs=37808,Xs=37809,Ys=37810,Ks=37811,Zs=37812,Js=37813,Qs=37814,tu=37815,eu=37816,nu=37817,ru=37818,iu=37819,ou=37820,au=37821,su=2200,uu=2201,cu=2202,lu=2300,hu=2301,fu=2302,du=2400,pu=2401,gu=2402,mu=0,vu=1,yu=2,bu=3e3,wu=3001,_u=3007,xu=3002,Eu=3003,Au=3004,Cu=3005,Su=3006,Mu=3200,Tu=3201,ku={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16).toUpperCase();return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ku.DEG2RAD},radToDeg:function(t){return t*ku.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(i.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new i,e=new i;return function(n,r){return t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(o.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new s;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var h=o*c,f=o*l,d=a*c,p=a*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-a*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=o*s}else if("YXZ"===t.order){var g=s*c,m=s*l,v=u*c,y=u*l;e[0]=g+y*a,e[4]=v*a-m,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=m*a-v,e[6]=y+g*a,e[10]=o*s}else if("ZXY"===t.order){var g=s*c,m=s*l,v=u*c,y=u*l;e[0]=g-y*a,e[4]=-o*l,e[8]=v+m*a,e[1]=m+v*a,e[5]=o*c,e[9]=y-g*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var h=o*c,f=o*l,d=a*c,p=a*l;e[0]=s*c,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*l,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var b=o*s,w=o*u,_=a*s,x=a*u;e[0]=s*c,e[4]=x-b*l,e[8]=_*l+w,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=w*l+_,e[10]=b-x*l}else if("XZY"===t.order){var b=o*s,w=o*u,_=a*s,x=a*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=b*l+x,e[5]=o*c,e[9]=w*l-_,e[2]=_*l-w,e[6]=a*c,e[10]=x*l+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,r=t._y,i=t._z,o=t._w,a=n+n,s=r+r,u=i+i,c=n*a,l=n*s,h=n*u,f=r*s,d=r*u,p=i*u,g=o*a,m=o*s,v=o*u;return e[0]=1-(f+p),e[4]=l-v,e[8]=h+m,e[1]=l+v,e[5]=1-(c+p),e[9]=d-g,e[2]=h-m,e[6]=d+g,e[10]=1-(c+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new s,e=new s,n=new s;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],b=n[11],w=n[15],_=r[0],x=r[4],E=r[8],A=r[12],C=r[1],S=r[5],M=r[9],T=r[13],k=r[2],O=r[6],F=r[10],P=r[14],L=r[3],R=r[7],D=r[11],B=r[15];return i[0]=o*_+a*C+s*k+u*L,i[4]=o*x+a*S+s*O+u*R,i[8]=o*E+a*M+s*F+u*D,i[12]=o*A+a*T+s*P+u*B,i[1]=c*_+l*C+h*k+f*L,i[5]=c*x+l*S+h*O+f*R,i[9]=c*E+l*M+h*F+f*D,i[13]=c*A+l*T+h*P+f*B,i[2]=d*_+p*C+g*k+m*L,i[6]=d*x+p*S+g*O+m*R,i[10]=d*E+p*M+g*F+m*D,i[14]=d*A+p*T+g*P+m*B,i[3]=v*_+y*C+b*k+w*L,i[7]=v*x+y*S+b*O+w*R,i[11]=v*E+y*M+b*F+w*D,i[15]=v*A+y*T+b*P+w*B,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new s;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+t[11]*(+e*u*l-e*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+t[15]*(-r*a*c-e*s*l+e*a*h+r*o*l-n*o*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],d=r[9],p=r[10],g=r[11],m=r[12],v=r[13],y=r[14],b=r[15],w=d*y*h-v*p*h+v*l*g-c*y*g-d*l*b+c*p*b,_=m*p*h-f*y*h-m*l*g+u*y*g+f*l*b-u*p*b,x=f*v*h-m*d*h+m*c*g-u*v*g-f*c*b+u*d*b,E=m*d*l-f*v*l-m*c*p+u*v*p+f*c*y-u*d*y,A=i*w+o*_+a*x+s*E;if(0===A){var C="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(C);return console.warn(C),this.identity()}var S=1/A;return n[0]=w*S,n[1]=(v*p*s-d*y*s-v*a*g+o*y*g+d*a*b-o*p*b)*S,n[2]=(c*y*s-v*l*s+v*a*h-o*y*h-c*a*b+o*l*b)*S,n[3]=(d*l*s-c*p*s-d*a*h+o*p*h+c*a*g-o*l*g)*S,n[4]=_*S,n[5]=(f*y*s-m*p*s+m*a*g-i*y*g-f*a*b+i*p*b)*S,n[6]=(m*l*s-u*y*s-m*a*h+i*y*h+u*a*b-i*l*b)*S,n[7]=(u*p*s-f*l*s+f*a*h-i*p*h-u*a*g+i*l*g)*S,n[8]=x*S,n[9]=(m*d*s-f*v*s-m*o*g+i*v*g+f*o*b-i*d*b)*S,n[10]=(u*v*s-m*c*s+m*o*h-i*v*h-u*o*b+i*c*b)*S,n[11]=(f*c*s-u*d*s-f*o*h+i*d*h+u*o*g-i*c*g)*S,n[12]=E*S,n[13]=(f*v*a-m*d*a+m*o*p-i*v*p-f*o*y+i*d*y)*S,n[14]=(m*c*a-u*v*a-m*o*l+i*v*l+u*o*y-i*c*y)*S,n[15]=(u*d*a-f*c*a+f*o*l-i*d*l-u*o*p+i*c*p)*S,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new s,e=new o;return function(n,r,i){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var c=1/a,l=1/s,h=1/u;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=l,e.elements[5]*=l,e.elements[6]*=l,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,r.setFromRotationMatrix(e),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*s,h=(n+r)*u,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(a,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(l!==p||s!==h||u!==f||c!==d){var g=1-a,m=s*h+u*f+c*d+l*p,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),w=Math.atan2(b,m*v);g=Math.sin(g*w)/b,a=Math.sin(a*w)/b}var _=a*v;if(s=s*g+h*_,u=u*g+f*_,c=c*g+d*_,l=l*g+p*_,g===1-a){var x=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=x,u*=x,c*=x,l*=x}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(a.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(a.prototype,{set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"YXZ"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"ZXY"===o?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"ZYX"===o?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"YZX"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d):"XZY"===o&&(this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-c)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(l-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+c)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+c)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new s;return function(n,r){return void 0===e&&(e=new s),t=n.dot(r)+1,t<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,a),c=Math.sin((1-e)*u)/s,l=Math.sin(e*u)/s;return this._w=o*c+this._w*l,this._x=n*c+this._x*l,this._y=r*c+this._y*l,this._z=i*c+this._z*l,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(s.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new a;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new a;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,l=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this},project:function(){var t=new o;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new o;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new s,e=new s;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new s;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new s;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(ku.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(u.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new s;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],g=r[3],m=r[6],v=r[1],y=r[4],b=r[7],w=r[2],_=r[5],x=r[8];return i[0]=o*p+a*v+s*w,i[3]=o*g+a*y+s*_,i[6]=o*m+a*b+s*x,i[1]=u*p+c*v+l*w,i[4]=u*g+c*y+l*_,i[7]=u*m+c*b+l*x,i[2]=h*p+f*v+d*w,i[5]=h*g+f*y+d*_,i[8]=h*m+f*b+d*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],d=f*u-c*h,p=c*l-f*s,g=h*s-u*l,m=i*d+o*p+a*g;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(c*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=g*y,r[7]=(o*l-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Ou=0;c.DEFAULT_IMAGE=void 0,c.DEFAULT_MAPPING=es,c.prototype=Object.assign(Object.create(r.prototype),{constructor:c,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=ku.generateUUID()),e||void 0!==t.images[r.uuid]||(t.images[r.uuid]={uuid:r.uuid,url:function(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height;var n=e.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(r)}),n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===es){if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case cs:t.x=t.x-Math.floor(t.x);break;case ls:t.x=t.x<0?0:1;break;case hs:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case cs:t.y=t.y-Math.floor(t.y);break;case ls:t.y=t.y<0?0:1;break;case hs:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(c.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(l.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=t.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var g=(a+1)/2,m=(l+1)/2,v=(p+1)/2,y=(s+c)/4,b=(u+f)/4,w=(h+d)/4;return g>m&&g>v?g<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=y/n,i=b/n):m>v?m<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(m),n=y/r,i=w/r):v<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=w/i),this.set(n,r,i,e),this}var _=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(c-s)*(c-s));return Math.abs(_)<.001&&(_=1),this.x=(d-h)/_,this.y=(u-f)/_,this.z=(c-s)/_,this.w=Math.acos((a+l+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new l,e=new l),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),h.prototype=Object.assign(Object.create(r.prototype),{constructor:h,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),f.prototype=Object.create(h.prototype),f.prototype.constructor=f,f.prototype.isWebGLRenderTargetCube=!0,d.prototype=Object.create(c.prototype),d.prototype.constructor=d,d.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],h=t[s+2];c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),h=t.getZ(s);c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new s;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new s),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new s),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,r=a.length;n<r;n++)i.copy(a[n]),i.applyMatrix4(t.matrixWorld),e.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)i.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),e.expandByPoint(i)}}var e,n,r,i=new s;return function(n){return e=this,n.updateMatrixWorld(!0),n.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new s),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new s;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){function t(t){var i,o;for(i=0,o=t.length-3;i<=o;i+=3){u.fromArray(t,i);var a=l.x*Math.abs(u.x)+l.y*Math.abs(u.y)+l.z*Math.abs(u.z),s=e.dot(u),c=n.dot(u),h=r.dot(u);if(Math.max(-Math.max(s,c,h),Math.min(s,c,h))>a)return!1}return!0}var e=new s,n=new s,r=new s,i=new s,o=new s,a=new s,u=new s,c=new s,l=new s,h=new s;return function(s){if(this.isEmpty())return!1;this.getCenter(c),l.subVectors(this.max,c),e.subVectors(s.a,c),n.subVectors(s.b,c),r.subVectors(s.c,c),i.subVectors(n,e),o.subVectors(r,n),a.subVectors(e,r);var u=[0,-i.z,i.y,0,-o.z,o.y,0,-a.z,a.y,i.z,0,-i.x,o.z,0,-o.x,a.z,0,-a.x,-i.y,i.x,0,-o.y,o.x,0,-a.y,a.x,0];return!!t(u)&&(u=[1,0,0,0,1,0,0,0,1],!!t(u)&&(h.crossVectors(i,o),u=[h.x,h.y,h.z],t(u)))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new s),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new s;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new s;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new g),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new s,new s,new s,new s,new s,new s,new s,new s];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(g.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new p;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).getCenter(r);for(var i=0,o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new s),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new p),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(m.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new s,e=new s;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new s),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new s;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new s);var r=e.delta(t),i=this.normal.dot(r);if(0!==i){var o=-(e.start.dot(this.normal)+this.constant)/i;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new s),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new s,e=new u;return function(n,r){var i=r||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(v.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,l-s,p-h,y-g).normalize(),e[1].setComponents(a+r,l+s,p+h,y+g).normalize(),e[2].setComponents(a+i,l+u,p+f,y+m).normalize(),e[3].setComponents(a-i,l-u,p-f,y-m).normalize(),e[4].setComponents(a-o,l-c,p-d,y-v).normalize(),e[5].setComponents(a+o,l+c,p+d,y+v).normalize(),this},intersectsObject:function(){var t=new g;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new g;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var t=new s,e=new s;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Fu={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Pu={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var r in t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}},Lu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=ku.euclideanModulo(e,1),n=ku.clamp(n,0,1),r=ku.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=t(o,i,e+1/3),this.g=t(o,i,e),this.b=t(o,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(t&&t.length>0){var c=Lu[t];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,r){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Ru={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new u},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new u}}},Du={basic:{uniforms:Pu.merge([Ru.common,Ru.specularmap,Ru.envmap,Ru.aomap,Ru.lightmap,Ru.fog]),vertexShader:Fu.meshbasic_vert,fragmentShader:Fu.meshbasic_frag},lambert:{uniforms:Pu.merge([Ru.common,Ru.specularmap,Ru.envmap,Ru.aomap,Ru.lightmap,Ru.emissivemap,Ru.fog,Ru.lights,{emissive:{value:new y(0)}}]),vertexShader:Fu.meshlambert_vert,fragmentShader:Fu.meshlambert_frag},phong:{uniforms:Pu.merge([Ru.common,Ru.specularmap,Ru.envmap,Ru.aomap,Ru.lightmap,Ru.emissivemap,Ru.bumpmap,Ru.normalmap,Ru.displacementmap,Ru.gradientmap,Ru.fog,Ru.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:Fu.meshphong_vert,fragmentShader:Fu.meshphong_frag},standard:{uniforms:Pu.merge([Ru.common,Ru.envmap,Ru.aomap,Ru.lightmap,Ru.emissivemap,Ru.bumpmap,Ru.normalmap,Ru.displacementmap,Ru.roughnessmap,Ru.metalnessmap,Ru.fog,Ru.lights,{emissive:{value:new y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Fu.meshphysical_vert,fragmentShader:Fu.meshphysical_frag},points:{uniforms:Pu.merge([Ru.points,Ru.fog]),vertexShader:Fu.points_vert,fragmentShader:Fu.points_frag},dashed:{uniforms:Pu.merge([Ru.common,Ru.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Fu.linedashed_vert,fragmentShader:Fu.linedashed_frag},depth:{uniforms:Pu.merge([Ru.common,Ru.displacementmap]),vertexShader:Fu.depth_vert,fragmentShader:Fu.depth_frag},normal:{uniforms:Pu.merge([Ru.common,Ru.bumpmap,Ru.normalmap,Ru.displacementmap,{opacity:{value:1}}]),vertexShader:Fu.normal_vert,fragmentShader:Fu.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Fu.cube_vert,fragmentShader:Fu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Fu.equirect_vert,fragmentShader:Fu.equirect_frag},distanceRGBA:{uniforms:Pu.merge([Ru.common,Ru.displacementmap,{referencePosition:{value:new s},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Fu.distanceRGBA_vert,fragmentShader:Fu.distanceRGBA_frag},shadow:{uniforms:Pu.merge([Ru.lights,Ru.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:Fu.shadow_vert,fragmentShader:Fu.shadow_frag}};Du.physical={uniforms:Pu.merge([Du.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Fu.meshphysical_vert,fragmentShader:Fu.meshphysical_frag},w.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],w.DefaultOrder="XYZ",Object.defineProperties(w.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(w.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=ku.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],h=i[2],f=i[6],d=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new o;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new a;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var Bu=0;x.DefaultUp=new s(0,1,0),x.DefaultMatrixAutoUpdate=!0,x.prototype=Object.assign(Object.create(r.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new a;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new a;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new s(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new s(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new s(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new s;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new s(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new s(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new s(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o,e=new s;return function(n,r,i){n.isVector3?e.copy(n):e.set(n,r,i),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new s),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new s,e=new s;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new s,e=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new a;return function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new s),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var r=void 0===t||"string"===typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),void 0!==this.geometry){o.geometry=e(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++){var l=s[u];e(t.shapes,l)}else e(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],u=0,c=this.material.length;u<c;u++)h.push(e(t.materials,this.material[u]));o.material=h}else o.material=e(t.materials,this.material);if(this.children.length>0){o.children=[];for(var u=0;u<this.children.length;u++)o.children.push(this.children[u].toJSON(t).object)}if(r){var f=n(t.geometries),d=n(t.materials),p=n(t.textures),g=n(t.images),s=n(t.shapes);f.length>0&&(i.geometries=f),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),g.length>0&&(i.images=g),s.length>0&&(i.shapes=s)}return i.object=o,i},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),E.prototype=Object.assign(Object.create(x.prototype),{constructor:E,isCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new a;return function(e){return void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new s),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){x.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),A.prototype=Object.assign(Object.create(E.prototype),{constructor:A,isOrthographicCamera:!0,copy:function(t,e){return E.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u),o=i+l*(this.view.width/u),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(C.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Iu=0;S.prototype=Object.assign(Object.create(r.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(t){for(var e=(new u).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new o;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new o;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new o;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new o;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new o;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new x;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,r,i){var o=void 0!==u?[f[t].clone(),f[e].clone(),f[r].clone()]:[],a=void 0!==c?[n.colors[t].clone(),n.colors[e].clone(),n.colors[r].clone()]:[],s=new C(t,e,r,o,a,i);n.faces.push(s),void 0!==l&&n.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[r].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[r].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,o=t.attributes,a=o.position.array,u=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],g=0,m=0;g<a.length;g+=3,m+=2)n.vertices.push(new s(a[g],a[g+1],a[g+2])),void 0!==u&&f.push(new s(u[g],u[g+1],u[g+2])),void 0!==c&&n.colors.push(new y(c[g],c[g+1],c[g+2])),void 0!==l&&d.push(new i(l[m],l[m+1])),void 0!==h&&p.push(new i(h[m],h[m+1]));var v=t.groups;if(v.length>0)for(var g=0;g<v.length;g++)for(var b=v[g],w=b.start,_=b.count,m=w,x=w+_;m<x;m+=3)void 0!==r?e(r[m],r[m+1],r[m+2],b.materialIndex):e(m,m+1,m+2,b.materialIndex);else if(void 0!==r)for(var g=0;g<r.length;g+=3)e(r[g],r[g+1],r[g+2]);else for(var g=0;g<a.length/3;g+=3)e(g,g+1,g+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new o;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new s,e=new s,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],u=this.vertices[i.c];t.subVectors(u,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,r,i,o,a;for(a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new s;if(t){var u,c,l,h=new s,f=new s;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],u=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,c),f.subVectors(u,c),h.cross(f),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var d=o.vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new S;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a,u,c=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)a=new s,u={a:new s,b:new s,c:new s},c.push(a),l.push(u)}var h=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],a=h.faceNormals[n],u=h.vertexNormals[n],a.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,c=t.faces,l=this.faceVertexUvs[0],h=t.faceVertexUvs[0],f=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new u).getNormalMatrix(e));for(var p=0,g=a.length;p<g;p++){var m=a[p],v=m.clone();void 0!==e&&v.applyMatrix4(e),o.push(v)}for(var p=0,g=d.length;p<g;p++)f.push(d[p].clone());for(p=0,g=c.length;p<g;p++){var y,b,w,_=c[p],x=_.vertexNormals,E=_.vertexColors;y=new C(_.a+i,_.b+i,_.c+i),y.normal.copy(_.normal),void 0!==r&&y.normal.applyMatrix3(r).normalize();for(var A=0,S=x.length;A<S;A++)b=x[A].clone(),void 0!==r&&b.applyMatrix3(r).normalize(),y.vertexNormals.push(b);y.color.copy(_.color);for(var A=0,S=E.length;A<S;A++)w=E[A],y.vertexColors.push(w.clone());y.materialIndex=_.materialIndex+n,s.push(y)}for(p=0,g=h.length;p<g;p++){var M=h[p],T=[];if(void 0!==M){for(var A=0,S=M.length;A<S;A++)T.push(M[A].clone());l.push(T)}}},mergeMesh:function(t){if(!t||!t.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},c=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h),void 0===u[e]?(u[e]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[e]];var f=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var g=this.vertices.length-c.length;return this.vertices=c,g},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new s(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,r=0;r<n;r++)e[r]._id=r;e.sort(t);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var u=e[r]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==m[e]?m[e]:(m[e]=g.length/2,g.push(t.x,t.y),m[e])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];s.push(c.x,c.y,c.z)}for(var l=[],h=[],f={},d=[],p={},g=[],m={},u=0;u<this.faces.length;u++){var v=this.faces[u],y=void 0!==this.faceVertexUvs[0][u],b=v.normal.length()>0,w=v.vertexNormals.length>0,_=1!==v.color.r||1!==v.color.g||1!==v.color.b,x=v.vertexColors.length>0,E=0;if(E=t(E,0,0),E=t(E,1,!0),E=t(E,2,!1),E=t(E,3,y),E=t(E,4,b),E=t(E,5,w),E=t(E,6,_),E=t(E,7,x),l.push(E),l.push(v.a,v.b,v.c),l.push(v.materialIndex),y){var A=this.faceVertexUvs[0][u];l.push(r(A[0]),r(A[1]),r(A[2]))}if(b&&l.push(e(v.normal)),w){var C=v.vertexNormals;l.push(e(C[0]),e(C[1]),e(C[2]))}if(_&&l.push(n(v.color)),x){var S=v.vertexColors;l.push(n(S[0]),n(S[1]),n(S[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,d.length>0&&(i.data.colors=d),g.length>0&&(i.data.uvs=[g]),i.data.faces=l,i},clone:function(){return(new S).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=l.length;r<i;r++){var h=l[r],f=[];for(o=0,a=h.length;o<a;o++){var d=h[o];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var g={};if(g.name=p[e].name,void 0!==p[e].vertices)for(g.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)g.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(g.normals=[],r=0,i=p[e].normals.length;r<i;r++)g.normals.push(p[e].normals[r].clone());this.morphTargets.push(g)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var v={};if(void 0!==m[e].vertexNormals)for(v.vertexNormals=[],r=0,i=m[e].vertexNormals.length;r<i;r++){var y=m[e].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==m[e].faceNormals)for(v.faceNormals=[],r=0,i=m[e].faceNormals.length;r<i;r++)v.faceNormals.push(m[e].faceNormals[r].clone());this.morphNormals.push(v)}var w=t.skinWeights;for(e=0,n=w.length;e<n;e++)this.skinWeights.push(w[e].clone());var _=t.skinIndices;for(e=0,n=_.length;e<n;e++)this.skinIndices.push(_[e].clone());var x=t.lineDistances;for(e=0,n=x.length;e<n;e++)this.lineDistances.push(x[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var A=t.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(M.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(M.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new y),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new i),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new s),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new l),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),T.prototype=Object.create(M.prototype),T.prototype.constructor=T,k.prototype=Object.create(M.prototype),k.prototype.constructor=k,O.prototype=Object.create(M.prototype),O.prototype.constructor=O,F.prototype=Object.create(M.prototype),F.prototype.constructor=F,P.prototype=Object.create(M.prototype),P.prototype.constructor=P,L.prototype=Object.create(M.prototype),L.prototype.constructor=L,R.prototype=Object.create(M.prototype),R.prototype.constructor=R,D.prototype=Object.create(M.prototype),D.prototype.constructor=D,B.prototype=Object.create(M.prototype),B.prototype.constructor=B,Object.assign(I.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,o=t.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,u=t.morphTargets,c=u.length;if(c>0){e=[];for(var l=0;l<c;l++)e[l]=[];this.morphTargets.position=e}var h,f=t.morphNormals,d=f.length;if(d>0){h=[];for(var l=0;l<d;l++)h[l]=[];this.morphTargets.normal=h}for(var p=t.skinIndices,g=t.skinWeights,m=p.length===r.length,v=g.length===r.length,l=0;l<n.length;l++){var y=n[l];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var w=y.normal;this.normals.push(w,w,w)}var _=y.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===a){var E=o[0][l];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new i,new i,new i))}if(!0===s){var E=o[1][l];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new i,new i,new i))}for(var A=0;A<c;A++){var C=u[A].vertices;e[A].push(C[y.a],C[y.b],C[y.c])}for(var A=0;A<d;A++){var S=f[A].vertexNormals[l];h[A].push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(g[y.a],g[y.b],g[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Nu=1;j.prototype=Object.assign(Object.create(r.prototype),{constructor:j,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(N(t)>65535?R:P)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new M(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){(new u).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new o;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new o;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new o;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new o;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new o;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new x;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new D(3*e.vertices.length,3),r=new D(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new D(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new D(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var r;return!0===e.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new I).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new M(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new M(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new M(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new M(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new M(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var a in t.morphTargets){for(var s=[],u=t.morphTargets[a],c=0,l=u.length;c<l;c++){var h=u[c],f=new D(3*h.length,3);s.push(f.copyVector3sArray(h))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var d=new D(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new D(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new p,e=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new g);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new M(new Float32Array(r.length),3));else for(var i=e.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var u,c,l,h=e.normal.array,f=new s,d=new s,p=new s,g=new s,m=new s;if(t){var v=t.array;0===n.length&&this.addGroup(0,v.length);for(var y=0,b=n.length;y<b;++y)for(var w=n[y],_=w.start,x=w.count,o=_,a=_+x;o<a;o+=3)u=3*v[o+0],c=3*v[o+1],l=3*v[o+2],f.fromArray(r,u),d.fromArray(r,c),p.fromArray(r,l),g.subVectors(p,d),m.subVectors(f,d),g.cross(m),h[u]+=g.x,h[u+1]+=g.y,h[u+2]+=g.z,h[c]+=g.x,h[c+1]+=g.y,h[c+2]+=g.z,h[l]+=g.x,h[l+1]+=g.y,h[l+2]+=g.z}else for(var o=0,a=r.length;o<a;o+=9)f.fromArray(r,o),d.fromArray(r,o+3),p.fromArray(r,o+6),g.subVectors(p,d),m.subVectors(f,d),g.cross(m),h[o]=g.x,h[o+1]=g.y,h[o+2]=g.z,h[o+3]=g.x,h[o+4]=g.y,h[o+5]=g.z,h[o+6]=g.x,h[o+7]=g.y,h[o+8]=g.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],o=i.array,a=t.attributes[r],s=a.array,u=a.itemSize,c=0,l=u*e;c<s.length;c++,l++)o[l]=s[c];return this},normalizeNormals:function(){var t=new s;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new j,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(e.length*a),u=0,c=0,l=0,h=e.length;l<h;l++){u=e[l]*a;for(var f=0;f<a;f++)s[c++]=o[u++]}t.addAttribute(r,new M(s,a))}for(var d=this.groups,l=0,h=d.length;l<h;l++){var p=d[l];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new j).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],c=s[e];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[e]=u}var l=t.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(S.prototype),U.prototype.constructor=U,$.prototype=Object.create(j.prototype),$.prototype.constructor=$,z.prototype=Object.create(S.prototype),z.prototype.constructor=z,H.prototype=Object.create(j.prototype),H.prototype.constructor=H;var ju=0;V.prototype=Object.assign(Object.create(r.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]="overdraw"===e?Number(n):n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===fa;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t||"string"===typeof t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ya&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==ca&&(r.side=this.side),this.vertexColors!==pa&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n){var i=e(t.textures),o=e(t.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},G.prototype=Object.create(V.prototype),G.prototype.constructor=G,G.prototype.isShaderMaterial=!0,G.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Pu.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},G.prototype.toJSON=function(t){var e=V.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(q.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new s),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new s;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new s),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new s;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new s,e=new s,n=new s;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,u,c,l,h=.5*r.distanceTo(i),f=-this.direction.dot(e),d=n.dot(this.direction),p=-n.dot(e),g=n.lengthSq(),m=Math.abs(1-f*f);if(m>0)if(s=f*p-d,u=f*d-p,l=h*m,s>=0)if(u>=-l)if(u<=l){var v=1/m;s*=v,u*=v,c=s*(s+f*u+2*d)+u*(f*s+u+2*p)+g}else u=h,s=Math.max(0,-(f*u+d)),c=-s*s+u*(u+2*p)+g;else u=-h,s=Math.max(0,-(f*u+d)),c=-s*s+u*(u+2*p)+g;else u<=-l?(s=Math.max(0,-(-f*h+d)),u=s>0?-h:Math.min(Math.max(-h,-p),h),c=-s*s+u*(u+2*p)+g):u<=l?(s=0,u=Math.min(Math.max(-h,-p),h),c=u*(u+2*p)+g):(s=Math.max(0,-(f*h+d)),u=s>0?h:Math.min(Math.max(-h,-p),h),c=-s*s+u*(u+2*p)+g);else u=f>0?-h:h,s=Math.max(0,-(f*u+d)),c=-s*s+u*(u+2*p)+g;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(u).add(t),c}}(),intersectSphere:function(){var t=new s;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),c>=0?(i=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(t.min.z-h.z)*l,s=(t.max.z-h.z)*l):(a=(t.max.z-h.z)*l,s=(t.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new s;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new s,e=new s,n=new s,r=new s;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var c,l=this.direction.dot(r);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}t.subVectors(this.origin,i);var h=c*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var f=c*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>l)return null;var d=-c*t.dot(r);return d<0?null:this.at(d/l,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(X.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new s),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new s),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new s),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new s,e=new s;return function(n,r){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var i=e.dot(e),o=e.dot(t),a=o/i;return r&&(a=ku.clamp(a,0,1)),a}}(),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new s),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(Y,{getNormal:function(){var t=new s;return function(e,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new s),i.subVectors(r,n),t.subVectors(e,n),i.cross(t);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var t=new s,e=new s,n=new s;return function(r,i,o,a,u){t.subVectors(a,i),e.subVectors(o,i),n.subVectors(r,i);var c=t.dot(t),l=t.dot(e),h=t.dot(n),f=e.dot(e),d=e.dot(n),p=c*f-l*l;if(void 0===u&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),u=new s),0===p)return u.set(-2,-1,-1);var g=1/p,m=(f*h-l*d)*g,v=(c*d-l*h)*g;return u.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new s;return function(e,n,r,i){return Y.getBarycoord(e,n,r,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}()}),Object.assign(Y.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new s,e=new s;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new s),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Y.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new s),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Y.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return Y.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new m,e=[new X,new X,new X],n=new s,r=new s;return function(i,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new s);var a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,n),!0===this.containsPoint(n))o.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var u=0;u<e.length;u++){e[u].closestPointToPoint(n,!0,r);var c=n.distanceToSquared(r);c<a&&(a=c,o.copy(r))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),K.prototype=Object.assign(Object.create(x.prototype),{constructor:K,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return x.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){function t(t,e,n,r,i,o,a){return Y.getBarycoord(t,e,n,r,b),i.multiplyScalar(b.x),o.multiplyScalar(b.y),a.multiplyScalar(b.z),i.add(o).add(a),i.clone()}function e(t,e,n,r,i,o,a,s){if(null===(e.side===la?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==ha,s)))return null;_.copy(s),_.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(_);return u<n.near||u>n.far?null:{distance:u,point:_.clone(),object:t}}function n(n,r,i,o,a,s,u,f){c.fromBufferAttribute(o,s),l.fromBufferAttribute(o,u),h.fromBufferAttribute(o,f);var d=e(n,n.material,r,i,c,l,h,w);if(d){a&&(m.fromBufferAttribute(a,s),v.fromBufferAttribute(a,u),y.fromBufferAttribute(a,f),d.uv=t(w,c,l,h,m,v,y));var p=new C(s,u,f);Y.getNormal(c,l,h,p.normal),d.face=p,d.faceIndex=s}return d}var r=new o,a=new q,u=new g,c=new s,l=new s,h=new s,f=new s,d=new s,p=new s,m=new i,v=new i,y=new i,b=new s,w=new s,_=new s;return function(i,o){var s=this.geometry,g=this.material,b=this.matrixWorld;if(void 0!==g&&(null===s.boundingSphere&&s.computeBoundingSphere(),u.copy(s.boundingSphere),u.applyMatrix4(b),!1!==i.ray.intersectsSphere(u)&&(r.getInverse(b),a.copy(i.ray).applyMatrix4(r),null===s.boundingBox||!1!==a.intersectsBox(s.boundingBox)))){var _;if(s.isBufferGeometry){var x,E,A,C,S,M=s.index,T=s.attributes.position,k=s.attributes.uv;if(null!==M)for(C=0,S=M.count;C<S;C+=3)x=M.getX(C),E=M.getX(C+1),A=M.getX(C+2),(_=n(this,i,a,T,k,x,E,A))&&(_.faceIndex=Math.floor(C/3),o.push(_));else if(void 0!==T)for(C=0,S=T.count;C<S;C+=3)x=C,E=C+1,A=C+2,(_=n(this,i,a,T,k,x,E,A))&&(_.index=x,o.push(_))}else if(s.isGeometry){var O,F,P,L,R=Array.isArray(g),D=s.vertices,B=s.faces,I=s.faceVertexUvs[0];I.length>0&&(L=I);for(var N=0,j=B.length;N<j;N++){var U=B[N],$=R?g[U.materialIndex]:g;if(void 0!==$){if(O=D[U.a],F=D[U.b],P=D[U.c],!0===$.morphTargets){var z=s.morphTargets,H=this.morphTargetInfluences;c.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var V=0,W=z.length;V<W;V++){var G=H[V];if(0!==G){var q=z[V].vertices;c.addScaledVector(f.subVectors(q[U.a],O),G),l.addScaledVector(d.subVectors(q[U.b],F),G),h.addScaledVector(p.subVectors(q[U.c],P),G)}}c.add(O),l.add(F),h.add(P),O=c,F=l,P=h}if(_=e(this,$,i,a,O,F,P,w)){if(L&&L[N]){var X=L[N];m.copy(X[0]),v.copy(X[1]),y.copy(X[2]),_.uv=t(w,O,F,P,m,v,y)}_.face=U,_.faceIndex=N,o.push(_)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ut.prototype=Object.create(c.prototype),ut.prototype.constructor=ut,ut.prototype.isCubeTexture=!0,Object.defineProperty(ut.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Uu=new c,$u=new ut,zu=[],Hu=[],Vu=new Float32Array(16),Wu=new Float32Array(9);jt.prototype.setValue=function(t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(t,e[o.id])}};var Gu=/([\w\d_]+)(\])?(\[|\.)?/g;zt.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},zt.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},zt.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},zt.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var qu=0,Xu=0;pe.prototype=Object.create(V.prototype),pe.prototype.constructor=pe,pe.prototype.isMeshDepthMaterial=!0,pe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},ge.prototype=Object.create(V.prototype),ge.prototype.constructor=ge,ge.prototype.isMeshDistanceMaterial=!0,ge.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},ve.prototype=Object.create(c.prototype),ve.prototype.constructor=ve,xe.prototype=Object.assign(Object.create(E.prototype),{constructor:xe,isPerspectiveCamera:!0,copy:function(t,e){return E.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*ku.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ku.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ku.RAD2DEG*Math.atan(Math.tan(.5*ku.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ku.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far)},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Ee.prototype=Object.assign(Object.create(xe.prototype),{constructor:Ee,isArrayCamera:!0}),Se.prototype.isFogExp2=!0,Se.prototype.clone=function(){return new Se(this.color.getHex(),this.density)},Se.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Me.prototype.isFog=!0,Me.prototype.clone=function(){return new Me(this.color.getHex(),this.near,this.far)},Me.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Te.prototype=Object.assign(Object.create(x.prototype),{constructor:Te,copy:function(t,e){return x.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),ke.prototype=Object.create(V.prototype),ke.prototype.constructor=ke,ke.prototype.isSpriteMaterial=!0,ke.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Oe.prototype=Object.assign(Object.create(x.prototype),{constructor:Oe,isSprite:!0,raycast:function(){var t=new s,e=new s,n=new s;return function(r,i){e.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(e,t),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(e.distanceToSquared(t)>o)){var a=r.ray.origin.distanceTo(t);a<r.near||a>r.far||i.push({distance:a,point:t.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return x.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Fe.prototype=Object.assign(Object.create(x.prototype),{constructor:Fe,copy:function(t){x.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new s;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),update:function(){var t=new s,e=new s;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=x.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(Pe.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new o;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new o,e=new o;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var u=n[a]?n[a].matrixWorld:e;t.multiplyMatrices(u,r[a]),t.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Pe(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),Le.prototype=Object.assign(Object.create(x.prototype),{constructor:Le,isBone:!0}),Re.prototype=Object.assign(Object.create(K.prototype),{constructor:Re,isSkinnedMesh:!0,initBones:function(){var t,e,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)e=this.geometry.bones[n],t=new Le,i.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)e=this.geometry.bones[n],-1!==e.parent&&null!==e.parent&&void 0!==i[e.parent]?i[e.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];t=1/n.manhattanLength(),t!==1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new l,i=this.geometry.attributes.skinWeight;for(e=0;e<i.count;e++)r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e),t=1/r.manhattanLength(),t!==1/0?r.multiplyScalar(t):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){K.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),De.prototype=Object.create(V.prototype),De.prototype.constructor=De,De.prototype.isLineBasicMaterial=!0,De.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Be.prototype=Object.assign(Object.create(x.prototype),{constructor:Be,isLine:!0,computeLineDistances:function(){var t=new s,e=new s;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)t.fromBufferAttribute(r,o-1),e.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices,i=n.lineDistances;i[0]=0;for(var o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var t=new o,e=new q,n=new g;return function(r,i){var o=r.linePrecision,a=o*o,u=this.geometry,c=this.matrixWorld;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),!1!==r.ray.intersectsSphere(n)){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var l=new s,h=new s,f=new s,d=new s,p=this&&this.isLineSegments?2:1;if(u.isBufferGeometry){var g=u.index,m=u.attributes,v=m.position.array;if(null!==g)for(var y=g.array,b=0,w=y.length-1;b<w;b+=p){var _=y[b],x=y[b+1];l.fromArray(v,3*_),h.fromArray(v,3*x);var E=e.distanceSqToSegment(l,h,d,f);if(!(E>a)){d.applyMatrix4(this.matrixWorld);var A=r.ray.origin.distanceTo(d);A<r.near||A>r.far||i.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,w=v.length/3-1;b<w;b+=p){l.fromArray(v,3*b),h.fromArray(v,3*b+3);var E=e.distanceSqToSegment(l,h,d,f);if(!(E>a)){d.applyMatrix4(this.matrixWorld);var A=r.ray.origin.distanceTo(d);A<r.near||A>r.far||i.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(u.isGeometry)for(var C=u.vertices,S=C.length,b=0;b<S-1;b+=p){var E=e.distanceSqToSegment(C[b],C[b+1],d,f);if(!(E>a)){d.applyMatrix4(this.matrixWorld);var A=r.ray.origin.distanceTo(d);A<r.near||A>r.far||i.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ie.prototype=Object.assign(Object.create(Be.prototype),{constructor:Ie,isLineSegments:!0,computeLineDistances:function(){var t=new s,e=new s;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var s=n.vertices,i=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);return this}}()}),Ne.prototype=Object.assign(Object.create(Be.prototype),{constructor:Ne,isLineLoop:!0}),je.prototype=Object.create(V.prototype),je.prototype.constructor=je,je.prototype.isPointsMaterial=!0,je.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Ue.prototype=Object.assign(Object.create(x.prototype),{constructor:Ue,isPoints:!0,raycast:function(){var t=new o,e=new q,n=new g;return function(r,i){function o(t,n){var o=e.distanceSqToPoint(t);if(o<f){e.closestPointToPoint(t,p),p.applyMatrix4(c);var s=r.ray.origin.distanceTo(p);if(s<r.near||s>r.far)return;i.push({distance:s,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:a})}}var a=this,u=this.geometry,c=this.matrixWorld,l=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),n.radius+=l,!1!==r.ray.intersectsSphere(n)){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var h=l/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new s,p=new s;if(u.isBufferGeometry){var g=u.index,m=u.attributes,v=m.position.array;if(null!==g)for(var y=g.array,b=0,w=y.length;b<w;b++){var _=y[b];d.fromArray(v,3*_),o(d,_)}else for(var b=0,x=v.length/3;b<x;b++)d.fromArray(v,3*b),o(d,b)}else for(var E=u.vertices,b=0,x=E.length;b<x;b++)o(E[b],b)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),$e.prototype=Object.assign(Object.create(x.prototype),{constructor:$e,isGroup:!0}),ze.prototype=Object.assign(Object.create(c.prototype),{constructor:ze,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),He.prototype=Object.create(c.prototype),He.prototype.constructor=He,He.prototype.isCompressedTexture=!0,Ve.prototype=Object.create(c.prototype),Ve.prototype.constructor=Ve,Ve.prototype.isDepthTexture=!0,We.prototype=Object.create(j.prototype),We.prototype.constructor=We,Ge.prototype=Object.create(S.prototype),Ge.prototype.constructor=Ge,qe.prototype=Object.create(j.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(S.prototype),Xe.prototype.constructor=Xe,Ye.prototype=Object.create(j.prototype),Ye.prototype.constructor=Ye,Ke.prototype=Object.create(S.prototype),Ke.prototype.constructor=Ke,Ze.prototype=Object.create(Ye.prototype),Ze.prototype.constructor=Ze,Je.prototype=Object.create(S.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Ye.prototype),Qe.prototype.constructor=Qe,tn.prototype=Object.create(S.prototype),tn.prototype.constructor=tn,en.prototype=Object.create(Ye.prototype),en.prototype.constructor=en,nn.prototype=Object.create(S.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Ye.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(S.prototype),on.prototype.constructor=on,an.prototype=Object.create(j.prototype),an.prototype.constructor=an,sn.prototype=Object.create(S.prototype),sn.prototype.constructor=sn,un.prototype=Object.create(j.prototype),un.prototype.constructor=un,cn.prototype=Object.create(S.prototype),cn.prototype.constructor=cn,ln.prototype=Object.create(j.prototype),ln.prototype.constructor=ln;var Yu={triangulate:function(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=hn(t,0,i,n,!0),a=[];if(!o)return a;var s,u,c,l,h,f,d;if(r&&(o=yn(t,e,o,n)),t.length>80*n){s=c=t[0],u=l=t[1];for(var p=n;p<i;p+=n)h=t[p],f=t[p+1],h<s&&(s=h),f<u&&(u=f),h>c&&(c=h),f>l&&(l=f);d=Math.max(c-s,l-u),d=0!==d?1/d:0}return dn(o,a,n,s,u,d),a}},Ku={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Ku.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];jn(t),Un(n,t);var o=t.length;e.forEach(jn);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,Un(n,e[a]);for(var s=Yu.triangulate(n,r),a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};$n.prototype=Object.create(S.prototype),$n.prototype.constructor=$n,zn.prototype=Object.create(j.prototype),zn.prototype.constructor=zn,zn.prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],n=this.getAttribute("uv"),r=n?Array.prototype.slice.call(n.array):[],i=this.index;return{position:e,uv:r,index:i?Array.prototype.slice.call(i.array):[]}},zn.prototype.addShapeList=function(t,e){var n=t.length;e.arrays=this.getArrays();for(var r=0;r<n;r++){var i=t[r];this.addShape(i,e)}this.setIndex(e.arrays.index),this.addAttribute("position",new D(e.arrays.position,3)),this.addAttribute("uv",new D(e.arrays.uv,2))},zn.prototype.addShape=function(t,e){function n(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function r(t,e,n){var r,o,a,s=t.x-e.x,u=t.y-e.y,c=n.x-t.x,l=n.y-t.y,h=s*s+u*u,f=s*l-u*c;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(c*c+l*l),g=e.x-u/d,m=e.y+s/d,v=n.x-l/p,y=n.y+c/p,b=((v-g)*l-(y-m)*c)/(s*l-u*c);r=g+s*b-t.x,o=m+u*b-t.y;var w=r*r+o*o;if(w<=2)return new i(r,o);a=Math.sqrt(w/2)}else{var _=!1;s>Number.EPSILON?c>Number.EPSILON&&(_=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(_=!0):Math.sign(u)===Math.sign(l)&&(_=!0),_?(r=-u,o=s,a=Math.sqrt(h)):(r=s,o=u,a=Math.sqrt(h/2))}return new i(r/a,o/a)}function o(t,e){var n,r;for(Z=t.length;--Z>=0;){n=Z,r=Z-1,r<0&&(r=t.length-1);var i=0,o=T+2*C;for(i=0;i<o;i++){var a=X*i,s=X*(i+1);c(e+n+a,e+r+a,e+r+s,e+n+s)}}}function a(t,e,n){_.push(t),_.push(e),_.push(n)}function u(t,e,n){l(t),l(e),l(n);var r=y.length/3,i=F.generateTopUV(B,y,r-3,r-2,r-1);h(i[0]),h(i[1]),h(i[2])}function c(t,e,n,r){l(t),l(e),l(r),l(e),l(n),l(r);var i=y.length/3,o=F.generateSideWallUV(B,y,i-6,i-3,i-2,i-1);h(o[0]),h(o[1]),h(o[3]),h(o[1]),h(o[2]),h(o[3])}function l(t){b.push(y.length/3),y.push(_[3*t+0]),y.push(_[3*t+1]),y.push(_[3*t+2])}function h(t){w.push(t.x),w.push(t.y)}var f,d,p,g,m,v=e.arrays?e.arrays:this.getArrays(),y=v.position,b=v.index,w=v.uv,_=[],x=void 0!==e.amount?e.amount:100,E=void 0!==e.bevelThickness?e.bevelThickness:6,A=void 0!==e.bevelSize?e.bevelSize:E-2,C=void 0!==e.bevelSegments?e.bevelSegments:3,S=void 0===e.bevelEnabled||e.bevelEnabled,M=void 0!==e.curveSegments?e.curveSegments:12,T=void 0!==e.steps?e.steps:1,k=e.extrudePath,O=!1,F=void 0!==e.UVGenerator?e.UVGenerator:$n.WorldUVGenerator;k&&(f=k.getSpacedPoints(T),O=!0,S=!1,d=void 0!==e.frames?e.frames:k.computeFrenetFrames(T,!1),p=new s,g=new s,m=new s),S||(C=0,E=0,A=0);var P,L,R,B=this,I=t.extractPoints(M),N=I.shape,j=I.holes;if(!Ku.isClockWise(N))for(N=N.reverse(),L=0,R=j.length;L<R;L++)P=j[L],Ku.isClockWise(P)&&(j[L]=P.reverse());var U=Ku.triangulateShape(N,j),$=N;for(L=0,R=j.length;L<R;L++)P=j[L],N=N.concat(P);for(var z,H,V,W,G,q,X=N.length,Y=U.length,K=[],Z=0,J=$.length,Q=J-1,tt=Z+1;Z<J;Z++,Q++,tt++)Q===J&&(Q=0),tt===J&&(tt=0),K[Z]=r($[Z],$[Q],$[tt]);var et,nt=[],rt=K.concat();for(L=0,R=j.length;L<R;L++){for(P=j[L],et=[],Z=0,J=P.length,Q=J-1,tt=Z+1;Z<J;Z++,Q++,tt++)Q===J&&(Q=0),tt===J&&(tt=0),et[Z]=r(P[Z],P[Q],P[tt]);nt.push(et),rt=rt.concat(et)}for(z=0;z<C;z++){for(V=z/C,W=E*Math.cos(V*Math.PI/2),H=A*Math.sin(V*Math.PI/2),Z=0,J=$.length;Z<J;Z++)G=n($[Z],K[Z],H),a(G.x,G.y,-W);for(L=0,R=j.length;L<R;L++)for(P=j[L],et=nt[L],Z=0,J=P.length;Z<J;Z++)G=n(P[Z],et[Z],H),a(G.x,G.y,-W)}for(H=A,Z=0;Z<X;Z++)G=S?n(N[Z],rt[Z],H):N[Z],O?(g.copy(d.normals[0]).multiplyScalar(G.x),p.copy(d.binormals[0]).multiplyScalar(G.y),m.copy(f[0]).add(g).add(p),a(m.x,m.y,m.z)):a(G.x,G.y,0);var it;for(it=1;it<=T;it++)for(Z=0;Z<X;Z++)G=S?n(N[Z],rt[Z],H):N[Z],O?(g.copy(d.normals[it]).multiplyScalar(G.x),p.copy(d.binormals[it]).multiplyScalar(G.y),m.copy(f[it]).add(g).add(p),a(m.x,m.y,m.z)):a(G.x,G.y,x/T*it);for(z=C-1;z>=0;z--){for(V=z/C,W=E*Math.cos(V*Math.PI/2),H=A*Math.sin(V*Math.PI/2),Z=0,J=$.length;Z<J;Z++)G=n($[Z],K[Z],H),a(G.x,G.y,x+W);for(L=0,R=j.length;L<R;L++)for(P=j[L],et=nt[L],Z=0,J=P.length;Z<J;Z++)G=n(P[Z],et[Z],H),O?a(G.x,G.y+f[T-1].y,f[T-1].x+W):a(G.x,G.y,x+W)}!function(){var t=y.length/3;if(S){var e=0,n=X*e;for(Z=0;Z<Y;Z++)q=U[Z],u(q[2]+n,q[1]+n,q[0]+n);for(e=T+2*C,n=X*e,Z=0;Z<Y;Z++)q=U[Z],u(q[0]+n,q[1]+n,q[2]+n)}else{for(Z=0;Z<Y;Z++)q=U[Z],u(q[2],q[1],q[0]);for(Z=0;Z<Y;Z++)q=U[Z],u(q[0]+X*T,q[1]+X*T,q[2]+X*T)}B.addGroup(t,y.length/3-t,0)}(),function(){var t=y.length/3,e=0;for(o($,e),e+=$.length,L=0,R=j.length;L<R;L++)P=j[L],o(P,e),e+=P.length;B.addGroup(t,y.length/3-t,1)}(),e.arrays||(this.setIndex(b),this.addAttribute("position",new D(y,3)),this.addAttribute("uv",new D(w,2)))},$n.WorldUVGenerator={generateTopUV:function(t,e,n,r,o){var a=e[3*n],s=e[3*n+1],u=e[3*r],c=e[3*r+1],l=e[3*o],h=e[3*o+1];return[new i(a,s),new i(u,c),new i(l,h)]},generateSideWallUV:function(t,e,n,r,o,a){var s=e[3*n],u=e[3*n+1],c=e[3*n+2],l=e[3*r],h=e[3*r+1],f=e[3*r+2],d=e[3*o],p=e[3*o+1],g=e[3*o+2],m=e[3*a],v=e[3*a+1],y=e[3*a+2];return Math.abs(u-h)<.01?[new i(s,1-c),new i(l,1-f),new i(d,1-g),new i(m,1-y)]:[new i(u,1-c),new i(h,1-f),new i(p,1-g),new i(v,1-y)]}},Hn.prototype=Object.create(S.prototype),Hn.prototype.constructor=Hn,Vn.prototype=Object.create(zn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(S.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Object.create(j.prototype),Gn.prototype.constructor=Gn,qn.prototype=Object.create(S.prototype),qn.prototype.constructor=qn,Xn.prototype=Object.create(j.prototype),Xn.prototype.constructor=Xn,Yn.prototype=Object.create(S.prototype),Yn.prototype.constructor=Yn,Kn.prototype=Object.create(j.prototype),Kn.prototype.constructor=Kn,Zn.prototype=Object.create(S.prototype),Zn.prototype.constructor=Zn,Zn.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return Qn(this.parameters.shapes,t)},Jn.prototype=Object.create(j.prototype),Jn.prototype.constructor=Jn,Jn.prototype.toJSON=function(){var t=j.prototype.toJSON.call(this);return Qn(this.parameters.shapes,t)},tr.prototype=Object.create(j.prototype),tr.prototype.constructor=tr,er.prototype=Object.create(S.prototype),er.prototype.constructor=er,nr.prototype=Object.create(j.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(er.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(nr.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(S.prototype),or.prototype.constructor=or,ar.prototype=Object.create(j.prototype),ar.prototype.constructor=ar;var Zu=Object.freeze({WireframeGeometry:We,ParametricGeometry:Ge,ParametricBufferGeometry:qe,TetrahedronGeometry:Ke,TetrahedronBufferGeometry:Ze,OctahedronGeometry:Je,OctahedronBufferGeometry:Qe,IcosahedronGeometry:tn,IcosahedronBufferGeometry:en,DodecahedronGeometry:nn,DodecahedronBufferGeometry:rn,PolyhedronGeometry:Xe,PolyhedronBufferGeometry:Ye,TubeGeometry:on,TubeBufferGeometry:an,TorusKnotGeometry:sn,TorusKnotBufferGeometry:un,TorusGeometry:cn,TorusBufferGeometry:ln,TextGeometry:Hn,TextBufferGeometry:Vn,SphereGeometry:Wn,SphereBufferGeometry:Gn,RingGeometry:qn,RingBufferGeometry:Xn,PlaneGeometry:z,PlaneBufferGeometry:H,LatheGeometry:Yn,LatheBufferGeometry:Kn,ShapeGeometry:Zn,ShapeBufferGeometry:Jn,ExtrudeGeometry:$n,ExtrudeBufferGeometry:zn,EdgesGeometry:tr,ConeGeometry:rr,ConeBufferGeometry:ir,CylinderGeometry:er,CylinderBufferGeometry:nr,CircleGeometry:or,CircleBufferGeometry:ar,BoxGeometry:U,BoxBufferGeometry:$});sr.prototype=Object.create(V.prototype),sr.prototype.constructor=sr,sr.prototype.isShadowMaterial=!0,sr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},ur.prototype=Object.create(G.prototype),ur.prototype.constructor=ur,ur.prototype.isRawShaderMaterial=!0,cr.prototype=Object.create(V.prototype),cr.prototype.constructor=cr,cr.prototype.isMeshStandardMaterial=!0,cr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},lr.prototype=Object.create(cr.prototype),lr.prototype.constructor=lr,lr.prototype.isMeshPhysicalMaterial=!0,lr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},hr.prototype=Object.create(V.prototype),hr.prototype.constructor=hr,hr.prototype.isMeshPhongMaterial=!0,hr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},fr.prototype=Object.create(hr.prototype),fr.prototype.constructor=fr,fr.prototype.isMeshToonMaterial=!0,fr.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},dr.prototype=Object.create(V.prototype),dr.prototype.constructor=dr,dr.prototype.isMeshNormalMaterial=!0,dr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},pr.prototype=Object.create(V.prototype),pr.prototype.constructor=pr,pr.prototype.isMeshLambertMaterial=!0,pr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gr.prototype=Object.create(De.prototype),gr.prototype.constructor=gr,gr.prototype.isLineDashedMaterial=!0,gr.prototype.copy=function(t){return De.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ju=Object.freeze({ShadowMaterial:sr,SpriteMaterial:ke,RawShaderMaterial:ur,ShaderMaterial:G,PointsMaterial:je,MeshPhysicalMaterial:lr,MeshStandardMaterial:cr,MeshPhongMaterial:hr,MeshToonMaterial:fr,MeshNormalMaterial:dr,MeshLambertMaterial:pr,MeshDepthMaterial:pe,MeshDistanceMaterial:ge,MeshBasicMaterial:W,LineDashedMaterial:gr,LineBasicMaterial:De,Material:V}),Qu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},tc=new mr,ec={};Object.assign(vr.prototype,{load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Qu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(void 0!==ec[t])return void ec[t].push({onLoad:e,onProgress:n,onError:r});var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var u=s[1],c=!!s[2],l=s[3];l=window.decodeURIComponent(l),c&&(l=window.atob(l));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var g=new DOMParser;h=g.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l}window.setTimeout(function(){e&&e(h),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},0)}}else{ec[t]=[],ec[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;Qu.add(t,n);var r=ec[t];if(delete ec[t],200===this.status){for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onError&&s.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)}},!1),m.addEventListener("progress",function(e){for(var n=ec[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=ec[t];delete ec[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(t),m},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(yr.prototype,{load:function(t,e,n,r){var i=this,o=[],a=new He;a.image=o;var s=new vr(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,c=0,l=t.length;c<l;++c)!function(c){s.load(t[c],function(t){var n=i._parser(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=gs),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,r)}(c);else s.load(t,function(t){var n=i._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=gs),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,r);return a},setPath:function(t){return this.path=t,this}}),Object.assign(br.prototype,{load:function(t,e,n,r){var i=this,o=new d,a=new vr(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var n=i._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ls,o.wrapT=void 0!==n.wrapT?n.wrapT:ls,o.magFilter=void 0!==n.magFilter?n.magFilter:gs,o.minFilter=void 0!==n.minFilter?n.minFilter:vs,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=gs),o.needsUpdate=!0,e&&e(o,n))},n,r),o}}),Object.assign(wr.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Qu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Qu.add(t,this),e&&e(this),i.manager.itemEnd(t)},!1),a.addEventListener("error",function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_r.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){var i=new ut,o=new wr(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<t.length;++s)!function(n){o.load(t[n],function(t){i.images[n]=t,6===++a&&(i.needsUpdate=!0,e&&e(i))},void 0,r)}(s);return i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(xr.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){var i=new c,o=new wr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){i.image=n;var r=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Fs:Ps,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Er.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if(i=Math.floor(s+(u-s)/2),(a=r[i]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i,a=new s,u=[],c=[],l=[],h=new s,f=new o;for(n=0;n<=t;n++)r=n/t,u[n]=this.getTangentAt(r),u[n].normalize();c[0]=new s,l[0]=new s;var d=Number.MAX_VALUE,p=Math.abs(u[0].x),g=Math.abs(u[0].y),m=Math.abs(u[0].z);for(p<=d&&(d=p,a.set(1,0,0)),g<=d&&(d=g,a.set(0,1,0)),m<=d&&a.set(0,0,1),h.crossVectors(u[0],a).normalize(),c[0].crossVectors(u[0],h),l[0].crossVectors(u[0],c[0]),n=1;n<=t;n++)c[n]=c[n-1].clone(),l[n]=l[n-1].clone(),h.crossVectors(u[n-1],u[n]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(ku.clamp(u[n-1].dot(u[n]),-1,1)),c[n].applyMatrix4(f.makeRotationAxis(h,i))),l[n].crossVectors(u[n],c[n]);if(!0===e)for(i=Math.acos(ku.clamp(c[0].dot(c[t]),-1,1)),i/=t,u[0].dot(h.crossVectors(c[0],c[t]))>0&&(i=-i),n=1;n<=t;n++)c[n].applyMatrix4(f.makeRotationAxis(u[n],i*n)),l[n].crossVectors(u[n],c[n]);return{tangents:u,normals:c,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ar.prototype=Object.create(Er.prototype),Ar.prototype.constructor=Ar,Ar.prototype.isEllipseCurve=!0,Ar.prototype.getPoint=function(t,e){for(var n=e||new i,r=2*Math.PI,o=this.aEndAngle-this.aStartAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=a?0:r),!0!==this.aClockwise||a||(o===r?o=-r:o-=r);var s=this.aStartAngle+t*o,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=u-this.aX,d=c-this.aY;u=f*l-d*h+this.aX,c=f*h+d*l+this.aY}return n.set(u,c)},Ar.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ar.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ar.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Cr.prototype=Object.create(Ar.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isArcCurve=!0;var nc=new s,rc=new Sr,ic=new Sr,oc=new Sr;Mr.prototype=Object.create(Er.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isCatmullRomCurve3=!0,Mr.prototype.getPoint=function(t,e){var n=e||new s,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t,a=Math.floor(o),u=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r.length)+1)*r.length:0===u&&a===i-1&&(a=i-2,u=1);var c,l,h,f;if(this.closed||a>0?c=r[(a-1)%i]:(nc.subVectors(r[0],r[1]).add(r[0]),c=nc),l=r[a%i],h=r[(a+1)%i],this.closed||a+2<i?f=r[(a+2)%i]:(nc.subVectors(r[i-1],r[i-2]).add(r[i-1]),f=nc),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(c.distanceToSquared(l),d),g=Math.pow(l.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(f),d);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),rc.initNonuniformCatmullRom(c.x,l.x,h.x,f.x,p,g,m),ic.initNonuniformCatmullRom(c.y,l.y,h.y,f.y,p,g,m),oc.initNonuniformCatmullRom(c.z,l.z,h.z,f.z,p,g,m)}else"catmullrom"===this.curveType&&(rc.initCatmullRom(c.x,l.x,h.x,f.x,this.tension),ic.initCatmullRom(c.y,l.y,h.y,f.y,this.tension),oc.initCatmullRom(c.z,l.z,h.z,f.z,this.tension));return n.set(rc.calc(u),ic.calc(u),oc.calc(u)),n},Mr.prototype.copy=function(t){Er.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Mr.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Mr.prototype.fromJSON=function(t){Er.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new s).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Nr.prototype=Object.create(Er.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isCubicBezierCurve=!0,Nr.prototype.getPoint=function(t,e){var n=e||new i,r=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(Ir(t,r.x,o.x,a.x,s.x),Ir(t,r.y,o.y,a.y,s.y)),n},Nr.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Nr.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Nr.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},jr.prototype=Object.create(Er.prototype),jr.prototype.constructor=jr,jr.prototype.isCubicBezierCurve3=!0,jr.prototype.getPoint=function(t,e){var n=e||new s,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ir(t,r.x,i.x,o.x,a.x),Ir(t,r.y,i.y,o.y,a.y),Ir(t,r.z,i.z,o.z,a.z)),n},jr.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},jr.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},jr.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ur.prototype=Object.create(Er.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isLineCurve=!0,Ur.prototype.getPoint=function(t,e){var n=e||new i;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ur.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ur.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ur.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ur.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ur.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},$r.prototype=Object.create(Er.prototype),$r.prototype.constructor=$r,$r.prototype.isLineCurve3=!0,$r.prototype.getPoint=function(t,e){var n=e||new s;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},$r.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},$r.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},$r.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},$r.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},zr.prototype=Object.create(Er.prototype),zr.prototype.constructor=zr,zr.prototype.isQuadraticBezierCurve=!0,zr.prototype.getPoint=function(t,e){var n=e||new i,r=this.v0,o=this.v1,a=this.v2;return n.set(Pr(t,r.x,o.x,a.x),Pr(t,r.y,o.y,a.y)),n},zr.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},zr.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},zr.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hr.prototype=Object.create(Er.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isQuadraticBezierCurve3=!0,Hr.prototype.getPoint=function(t,e){var n=e||new s,r=this.v0,i=this.v1,o=this.v2;return n.set(Pr(t,r.x,i.x,o.x),Pr(t,r.y,i.y,o.y),Pr(t,r.z,i.z,o.z)),n},Hr.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hr.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hr.prototype.fromJSON=function(t){return Er.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Vr.prototype=Object.create(Er.prototype),Vr.prototype.constructor=Vr,Vr.prototype.isSplineCurve=!0,Vr.prototype.getPoint=function(t,e){var n=e||new i,r=this.points,o=(r.length-1)*t,a=Math.floor(o),s=o-a,u=r[0===a?a:a-1],c=r[a],l=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(Tr(s,u.x,c.x,l.x,h.x),Tr(s,u.y,c.y,l.y,h.y)),n},Vr.prototype.copy=function(t){Er.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},Vr.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},Vr.prototype.fromJSON=function(t){Er.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new i).fromArray(r))}return this};var ac=Object.freeze({ArcCurve:Cr,CatmullRomCurve3:Mr,CubicBezierCurve:Nr,CubicBezierCurve3:jr,EllipseCurve:Ar,LineCurve:Ur,LineCurve3:$r,QuadraticBezierCurve:zr,QuadraticBezierCurve3:Hr,SplineCurve:Vr});Wr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Wr,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ur(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Er.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Er.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){Er.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new ac[r.type]).fromJSON(r))}return this}}),Gr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Gr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Ur(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var o=new zr(this.currentPoint.clone(),new i(t,e),new i(n,r));this.curves.push(o),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,o,a){var s=new Nr(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Vr(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+u,e+c,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,o,a,s){var u=new Ar(t,e,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(t){return Wr.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Wr.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Wr.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),qr.prototype=Object.assign(Object.create(Gr.prototype),{constructor:qr,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Gr.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=Gr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){Gr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Gr).fromJSON(r))}return this}}),Xr.prototype=Object.assign(Object.create(x.prototype),{constructor:Xr,isLight:!0,copy:function(t){return x.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=x.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Yr.prototype=Object.assign(Object.create(Xr.prototype),{constructor:Yr,isHemisphereLight:!0,copy:function(t){return Xr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Kr.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Zr.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Zr,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*ku.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix())}}),Jr.prototype=Object.assign(Object.create(Xr.prototype),{constructor:Jr,isSpotLight:!0,copy:function(t){return Xr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Qr.prototype=Object.assign(Object.create(Xr.prototype),{constructor:Qr,isPointLight:!0,copy:function(t){return Xr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),ti.prototype=Object.assign(Object.create(Kr.prototype),{constructor:ti}),ei.prototype=Object.assign(Object.create(Xr.prototype),{constructor:ei,isDirectionalLight:!0,copy:function(t){return Xr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ni.prototype=Object.assign(Object.create(Xr.prototype),{constructor:ni,isAmbientLight:!0}),ri.prototype=Object.assign(Object.create(Xr.prototype),{constructor:ri,isRectAreaLight:!0,copy:function(t){return Xr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Xr.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),ii.prototype=Object.assign(Object.create(pi.prototype),{constructor:ii,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:lu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),oi.prototype=Object.assign(Object.create(pi.prototype),{constructor:oi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:lu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ai.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}{if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ai.prototype,{beforeStart_:ai.prototype.copySampleValue_,afterEnd_:ai.prototype.copySampleValue_}),si.prototype=Object.assign(Object.create(ai.prototype),{constructor:si,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=t*s,c=(n-e)/(r-e),l=u+s;u!==l;u+=4)a.slerpFlat(i,0,o,u-s,o,u,c);return i}}),ui.prototype=Object.assign(Object.create(pi.prototype),{constructor:ui,ValueTypeName:"quaternion",DefaultInterpolation:hu,InterpolantFactoryMethodLinear:function(t){return new si(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ci.prototype=Object.assign(Object.create(pi.prototype),{constructor:ci,ValueTypeName:"color"}),li.prototype=Object.assign(Object.create(pi.prototype),{constructor:li,ValueTypeName:"number"}),hi.prototype=Object.assign(Object.create(ai.prototype),{constructor:hi,DefaultSettings_:{endingStart:du,endingEnd:du},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case pu:i=t,a=2*e-n;break;case gu:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case pu:o=t,s=2*n-e;break;case gu:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,g=p*d,m=-h*g+2*h*p-h*d,v=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*g+(1.5+f)*p+.5*d,b=f*g-f*p,w=0;w!==a;++w)i[w]=m*o[c+w]+v*o[u+w]+y*o[s+w]+b*o[l+w];return i}}),fi.prototype=Object.assign(Object.create(ai.prototype),{constructor:fi,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),l=1-c,h=0;h!==a;++h)i[h]=o[u+h]*l+o[s+h]*c;return i}}),di.prototype=Object.assign(Object.create(ai.prototype),{constructor:di,interpolate_:function(t){return this.copySampleValue_(t-1)}});var sc={arraySlice:function(t,e,n){return sc.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}}};Object.assign(pi,{parse:function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=pi._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],r=[];sc.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:sc.convertArray(t.times,Array),values:sc.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return li;case"vector":case"vector2":case"vector3":case"vector4":return gi;case"color":return ci;case"quaternion":return ui;case"bool":case"boolean":return oi;case"string":return ii}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(pi.prototype,{constructor:pi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:hu,InterpolantFactoryMethodDiscrete:function(t){return new di(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new fi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new hi(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case lu:e=this.InterpolantFactoryMethodDiscrete;break;case hu:e=this.InterpolantFactoryMethodLinear;break;case fu:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lu;case this.InterpolantFactoryMethodLinear:return hu;case this.InterpolantFactoryMethodSmooth:return fu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=sc.arraySlice(n,i,o),this.values=sc.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&sc.isTypedArray(r))for(var a=0,u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===fu,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var c=a*n,l=c-n,h=c+n,f=0;f!==n;++f){var d=e[c+f];if(d!==e[l+f]||d!==e[h+f]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];for(var p=a*n,g=i*n,f=0;f!==n;++f)e[g+f]=e[p+f]}++i}}if(o>0){t[i]=t[o];for(var p=o*n,g=i*n,f=0;f!==n;++f)e[g+f]=e[p+f];++i}return i!==t.length&&(this.times=sc.arraySlice(t,0,i),this.values=sc.arraySlice(e,0,i*n)),this}}),gi.prototype=Object.assign(Object.create(pi.prototype),{constructor:gi,ValueTypeName:"vector"}),Object.assign(mi,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(pi.parse(n[i]).scale(r));return new mi(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e},i=0,o=n.length;i!==o;++i)e.push(pi.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=sc.getKeyframeOrder(s);s=sc.sortedArray(s,1,c),u=sc.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new li(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new mi(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var c in r)h.push(mi.CreateFromMorphTargetSequence(c,r[c],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];sc.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)l[c[h].morphTargets[f]]=-1;for(var d in l){for(var p=[],g=[],f=0;f!==c[h].morphTargets.length;++f){var m=c[h];p.push(m.time),g.push(m.morphTarget===d?1:0)}r.push(new li(".morphTargetInfluence["+d+"]",p,g))}o=l.length*(a||1)}else{var v=".bones["+e[u].name+"]";n(gi,v+".position",c,"pos",r),n(ui,v+".quaternion",c,"rot",r),n(gi,v+".scale",c,"scl",r)}}return 0===r.length?null:new mi(i,o,r)}}),Object.assign(mi.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(vi.prototype,{load:function(t,e,n,r){var i=this;new vr(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,r=new Ju[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),r.normalScale=(new i).fromArray(o)}return void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),r}}),Object.assign(yi.prototype,{load:function(t,e,n,r){var i=this;new vr(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new j,n=t.data.index;if(void 0!==n){var r=new uc[n.type](n.array);e.setIndex(new M(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o],r=new uc[a.type](a.array);e.addAttribute(o,new M(r,a.itemSize,a.normalized))}var u=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==u)for(var c=0,l=u.length;c!==l;++c){var h=u[c];e.addGroup(h.start,h.count,h.materialIndex)}var f=t.data.boundingSphere;if(void 0!==f){var d=new s;void 0!==f.center&&d.fromArray(f.center),e.boundingSphere=new g(d,f.radius)}return e}});var uc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};bi.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];if(i.test(t))return o}return null}},Object.assign(bi.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var t={NoBlending:va,NormalBlending:ya,AdditiveBlending:ba,SubtractiveBlending:wa,MultiplyBlending:_a,CustomBlending:xa},e=new y,n=new xr,r=new vi;return function(i,o,a){function s(t,e,r,i,s){var c,l=o+t,h=bi.Handlers.get(l);null!==h?c=h.load(l):(n.setCrossOrigin(a),c=n.load(l)),void 0!==e&&(c.repeat.fromArray(e),1!==e[0]&&(c.wrapS=cs),1!==e[1]&&(c.wrapT=cs)),void 0!==r&&c.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(c.wrapS=cs),"mirror"===i[0]&&(c.wrapS=hs),"repeat"===i[1]&&(c.wrapT=cs),"mirror"===i[1]&&(c.wrapT=hs)),void 0!==s&&(c.anisotropy=s);var f=ku.generateUUID();return u[f]=c,f}var u={},c={uuid:ku.generateUUID(),type:"MeshLambertMaterial"};for(var l in i){var h=i[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(h).getHex();break;case"colorSpecular":c.specular=e.fromArray(h).getHex();break;case"colorEmissive":c.emissive=e.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=la;break;case"doubleSided":c.side=ha;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":!0===h&&(c.vertexColors=ma),"face"===h&&(c.vertexColors=ga);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),r.setTextures(u),r.parse(c)}}()});var cc={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")}};Object.assign(wi.prototype,{load:function(t,e,n,r){var i=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:cc.extractUrlBase(t),a=new vr(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var u=i.parse(r,o);e(u.geometry,u.materials)},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(t,e){function n(t,e){return t&1<<e}var r,o,a,u,c,l,h,f,d,p,g,m,v,b,w,_,x,E,A,S,M,T,k,O,F,P,L,R=t.faces,D=t.vertices,B=t.normals,I=t.colors,N=t.scale,j=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&j++;for(r=0;r<j;r++)e.faceVertexUvs[r]=[]}for(u=0,c=D.length;u<c;)E=new s,E.x=D[u++]*N,E.y=D[u++]*N,E.z=D[u++]*N,e.vertices.push(E);for(u=0,c=R.length;u<c;)if(p=R[u++],g=n(p,0),m=n(p,1),v=n(p,3),b=n(p,4),w=n(p,5),_=n(p,6),x=n(p,7),g){if(S=new C,S.a=R[u],S.b=R[u+1],S.c=R[u+3],M=new C,M.a=R[u+1],M.b=R[u+2],M.c=R[u+3],u+=4,m&&(d=R[u++],S.materialIndex=d,M.materialIndex=d),a=e.faces.length,v)for(r=0;r<j;r++)for(O=t.uvs[r],e.faceVertexUvs[r][a]=[],e.faceVertexUvs[r][a+1]=[],o=0;o<4;o++)f=R[u++],P=O[2*f],L=O[2*f+1],F=new i(P,L),2!==o&&e.faceVertexUvs[r][a].push(F),0!==o&&e.faceVertexUvs[r][a+1].push(F);if(b&&(h=3*R[u++],S.normal.set(B[h++],B[h++],B[h]),M.normal.copy(S.normal)),w)for(r=0;r<4;r++)h=3*R[u++],k=new s(B[h++],B[h++],B[h]),2!==r&&S.vertexNormals.push(k),0!==r&&M.vertexNormals.push(k);if(_&&(l=R[u++],T=I[l],S.color.setHex(T),M.color.setHex(T)),x)for(r=0;r<4;r++)l=R[u++],T=I[l],2!==r&&S.vertexColors.push(new y(T)),0!==r&&M.vertexColors.push(new y(T));e.faces.push(S),e.faces.push(M)}else{if(A=new C,A.a=R[u++],A.b=R[u++],A.c=R[u++],m&&(d=R[u++],A.materialIndex=d),a=e.faces.length,v)for(r=0;r<j;r++)for(O=t.uvs[r],e.faceVertexUvs[r][a]=[],o=0;o<3;o++)f=R[u++],P=O[2*f],L=O[2*f+1],F=new i(P,L),e.faceVertexUvs[r][a].push(F);if(b&&(h=3*R[u++],A.normal.set(B[h++],B[h++],B[h])),w)for(r=0;r<3;r++)h=3*R[u++],k=new s(B[h++],B[h++],B[h]),A.vertexNormals.push(k);if(_&&(l=R[u++],A.color.setHex(I[l])),x)for(r=0;r<3;r++)l=R[u++],A.vertexColors.push(new y(I[l]));e.faces.push(A)}}function e(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var r=0,i=t.skinWeights.length;r<i;r+=n){var o=t.skinWeights[r],a=n>1?t.skinWeights[r+1]:0,s=n>2?t.skinWeights[r+2]:0,u=n>3?t.skinWeights[r+3]:0;e.skinWeights.push(new l(o,a,s,u))}if(t.skinIndices)for(var r=0,i=t.skinIndices.length;r<i;r+=n){var c=t.skinIndices[r],h=n>1?t.skinIndices[r+1]:0,f=n>2?t.skinIndices[r+2]:0,d=n>3?t.skinIndices[r+3]:0;e.skinIndices.push(new l(c,h,f,d))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}function n(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var r=0,i=t.morphTargets.length;r<i;r++){e.morphTargets[r]={},e.morphTargets[r].name=t.morphTargets[r].name,e.morphTargets[r].vertices=[];for(var o=e.morphTargets[r].vertices,a=t.morphTargets[r].vertices,u=0,c=a.length;u<c;u+=3){var l=new s;l.x=a[u]*n,l.y=a[u+1]*n,l.z=a[u+2]*n,o.push(l)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=e.faces,f=t.morphColors[0].colors,r=0,i=h.length;r<i;r++)h[r].color.fromArray(f,3*r)}}function r(t,e){var n=[],r=[];void 0!==t.animation&&r.push(t.animation),void 0!==t.animations&&(t.animations.length?r=r.concat(t.animations):r.push(t.animations));for(var i=0;i<r.length;i++){var o=mi.parseAnimation(r[i],e.bones);o&&n.push(o)}if(e.morphTargets){var a=mi.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(a)}n.length>0&&(e.animations=n)}return function(i,o){void 0!==i.data&&(i=i.data),void 0!==i.scale?i.scale=1/i.scale:i.scale=1;var a=new S;return t(i,a),e(i,a),n(i,a),r(i,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===i.materials||0===i.materials.length?{geometry:a}:{geometry:a,materials:bi.prototype.initMaterials(i.materials,o,this.crossOrigin)}}}()}),Object.assign(_i.prototype,{load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this;new vr(i.manager).load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.");i.parse(o,e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new qr).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new wi,i=new yi,o=0,a=t.length;o<a;o++){var s,u=t[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Zu[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Zu[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Zu[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Zu[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Zu[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Zu[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Zu[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Zu[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Zu[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Zu[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Zu[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Zu[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],o=0,a=u.shapes.length;o<a;o++){var l=e[u.shapes[o]];c.push(l)}s=new Zu[u.type](c,u.curveSegments);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=r.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),n[u.uuid]=s}return n},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new vi;r.setTextures(e);for(var i=0,o=t.length;i<o;i++){var a=t[i];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++)s.push(r.parse(a.materials[u]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=mi.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){var n=this,r={};if(void 0!==t&&t.length>0){var i=new mr(e),o=new wr(i);o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var u=t[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;r[u.uuid]=function(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}(c)}}return r},parseTextures:function(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a=t[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new c(e[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,lc)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],hc),s.wrapT=n(a.wrap[1],hc)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,fc)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,fc)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),r[a.uuid]=s}return r},parseObject:function(t,e,n){function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}var o;switch(t.type){case"Scene":o=new Te,void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new y(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Me(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Se(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new xe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new A(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new ni(t.color,t.intensity);break;case"DirectionalLight":o=new ei(t.color,t.intensity);break;case"PointLight":o=new Qr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new ri(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Jr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Yr(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(t.geometry),s=i(t.material);o=a.bones&&a.bones.length>0?new Re(a,s):new K(a,s);break;case"LOD":o=new Fe;break;case"Line":o=new Be(r(t.geometry),i(t.material),t.mode);break;case"LineLoop":o=new Ne(r(t.geometry),i(t.material));break;case"LineSegments":o=new Ie(r(t.geometry),i(t.material));break;case"PointCloud":case"Points":o=new Ue(r(t.geometry),i(t.material));break;case"Sprite":o=new Oe(i(t.material));break;case"Group":o=new $e;break;default:o=new x}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var u=t.children,c=0;c<u.length;c++)o.add(this.parseObject(u[c],e,n));if("LOD"===t.type)for(var l=t.levels,h=0;h<l.length;h++){var f=l[h],d=o.getObjectByProperty("uuid",f.object);void 0!==d&&o.addLevel(d,f.distance)}return o}});var lc={UVMapping:es,CubeReflectionMapping:ns,CubeRefractionMapping:rs,EquirectangularReflectionMapping:is,EquirectangularRefractionMapping:os,SphericalReflectionMapping:as,CubeUVReflectionMapping:ss,CubeUVRefractionMapping:us},hc={RepeatWrapping:cs,ClampToEdgeWrapping:ls,MirroredRepeatWrapping:hs},fc={NearestFilter:fs,NearestMipMapNearestFilter:ds,NearestMipMapLinearFilter:ps,LinearFilter:gs,LinearMipMapNearestFilter:ms,LinearMipMapLinearFilter:vs};xi.prototype={constructor:xi,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var i=this,o=Qu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(n){Qu.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Ei.prototype,{moveTo:function(t,e){this.currentPath=new Gr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new qr;o.curves=i.curves,e.push(o)}return e}var r=Ku.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===e)return n(i);var o,a,s,u=[];if(1===i.length)return a=i[0],s=new qr,s.curves=a.curves,u.push(s),u;var c=!r(i[0].getPoints());c=t?!c:c;var l,h=[],f=[],d=[],p=0;f[p]=void 0,d[p]=[];for(var g=0,m=i.length;g<m;g++)a=i[g],l=a.getPoints(),o=r(l),o=t?!o:o,o?(!c&&f[p]&&p++,f[p]={s:new qr,p:l},f[p].s.curves=a.curves,c&&p++,d[p]=[]):d[p].push({h:a,p:l[0]});if(!f[0])return n(i);if(f.length>1){for(var v=!1,y=[],b=0,w=f.length;b<w;b++)h[b]=[];for(var b=0,w=f.length;b<w;b++)for(var _=d[b],x=0;x<_.length;x++){for(var E=_[x],A=!0,C=0;C<f.length;C++)(function(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],u=-u,s=e[i],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var l=c*(t.x-a.x)-u*(t.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r})(E.p,f[C].p)&&(b!==C&&y.push({froms:b,tos:C,hole:x}),A?(A=!1,h[C].push(E)):v=!0);A&&h[b].push(E)}y.length>0&&(v||(d=h))}for(var S,g=0,M=f.length;g<M;g++){s=f[g].s,u.push(s),S=d[g];for(var T=0,k=S.length;T<k;T++)s.holes.push(S[T].h)}return u}}),Object.assign(Ai.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);for(var r=[],i=Ci(t,e,n,this.data),o=0,a=i.length;o<a;o++)Array.prototype.push.apply(r,i[o].toShapes());return r}}),Object.assign(Mi.prototype,{load:function(t,e,n,r){var i=this,o=new vr(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)},n,r)},parse:function(t){return new Ai(t)},setPath:function(t){return this.path=t,this}});var dc,pc={getContext:function(){return void 0===dc&&(dc=new(window.AudioContext||window.webkitAudioContext)),dc},setContext:function(t){dc=t}};Object.assign(Ti.prototype,{load:function(t,e,n,r){var i=new vr(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){pc.getContext().decodeAudioData(t,function(t){e(t)})},n,r)}}),Object.assign(ki.prototype,{update:function(){var t,e,n,r,i,a,s,u,c=new o,l=new o;return function(o){if(t!==this||e!==o.focus||n!==o.fov||r!==o.aspect*this.aspect||i!==o.near||a!==o.far||s!==o.zoom||u!==this.eyeSep){t=this,e=o.focus,n=o.fov,r=o.aspect*this.aspect,i=o.near,a=o.far,s=o.zoom;var h=o.projectionMatrix.clone();u=this.eyeSep/2;var f,d,p=u*i/e,g=i*Math.tan(ku.DEG2RAD*n*.5)/s;l.elements[12]=-u,c.elements[12]=u,f=-g*r+p,d=g*r+p,h.elements[0]=2*i/(d-f),h.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(h),f=-g*r-p,d=g*r-p,h.elements[0]=2*i/(d-f),h.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(c)}}()}),Oi.prototype=Object.create(x.prototype),Oi.prototype.constructor=Oi,Fi.prototype=Object.assign(Object.create(x.prototype),{constructor:Fi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new s,e=new a,n=new s,r=new s;return function(i){x.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Pi.prototype=Object.assign(Object.create(x.prototype),{constructor:Pi,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),Li.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Li,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new s;return function(e){x.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Ri.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Di.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){a.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}});var gc="\\[\\]\\.:\\/";Object.assign(Bi.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Ii,{Composite:Bi,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Ii.Composite(t,e,n):new Ii(t,e,n)},sanitizeNodeName:function(){var t=new RegExp("["+gc+"]","g");return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+gc+"]",e="[^"+gc.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),r=/(WCOD+)?/.source.replace("WCOD",e),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(t){var e=a.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;var o=t(i.children);if(o)return o}return null}(t.children);if(r)return r}return null}}),Object.assign(Ii.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Ii.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0===s){var u=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",t)}var c=this.Versioning.None;void 0!==t.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ii.prototype,{_getValue_unbound:Ii.prototype.getValue,_setValue_unbound:Ii.prototype.setValue}),Object.assign(Ni.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=r[f];if(void 0===d){d=e++,r[f]=d,t.push(h);for(var p=0,g=s;p!==g;++p)a[p].push(new Ii(h,i[p],o[p]))}else if(d<n){u=t[d];var m=--n,v=t[m];r[v.uuid]=d,t[d]=v,r[f]=m,t[m]=h;for(var p=0,g=s;p!==g;++p){var y=a[p],b=y[m],w=y[d];y[d]=b,void 0===w&&(w=new Ii(h,i[p],o[p])),y[m]=w}}else t[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=e){var l=e++,h=t[l];n[h.uuid]=c,t[c]=h,n[u]=l,t[l]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],g=p[l],m=p[c];p[c]=g,p[l]=m}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var h=--n,f=t[h],d=--e,p=t[d];r[f.uuid]=l,t[l]=f,r[p.uuid]=h,t[h]=p,t.pop();for(var g=0,m=o;g!==m;++g){var v=i[g],y=v[h],b=v[d];v[l]=y,v[h]=b,v.pop()}}else{var d=--e,p=t[d];r[p.uuid]=l,t[l]=p,t.pop();for(var g=0,m=o;g!==m;++g){var v=i[g];v[l]=v[d],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(l);for(var h=c,f=s.length;h!==f;++h){var d=s[h];l[h]=new Ii(d,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(ji.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(a),c[l].accumulate(r,s)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===su){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=r===cu;if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=pu,r.endingEnd=pu):(r.endingStart=t?this.zeroSlopeAtStart?pu:du:gu,r.endingEnd=e?this.zeroSlopeAtEnd?pu:du:gu)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),Ui.prototype=Object.assign(Object.create(r.prototype),{constructor:Ui,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var h=r[l],f=h.name,d=c[f];if(void 0!==d)o[l]=d;else{if(void 0!==(d=o[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[l].binding.parsedPath;d=new Di(Ii.create(n,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,f),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i];t:{for(var c in a)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new fi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?mi.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new ji(this,i,e);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?mi.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[r]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){e[a]._update(r,t,i,o)}for(var s=this._bindings,u=this._nActiveBindings,a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),$i.prototype.clone=function(){return new $i(void 0===this.value.clone?this.value:this.value.clone())},zi.prototype=Object.assign(Object.create(j.prototype),{constructor:zi,isInstancedBufferGeometry:!0,copy:function(t){return j.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Hi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Hi.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),Object.defineProperty(Vi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Vi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Wi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Wi,isInstancedInterleavedBuffer:!0,copy:function(t){return Vi.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Gi.prototype=Object.assign(Object.create(M.prototype),{constructor:Gi,isInstancedBufferAttribute:!0,copy:function(t){return M.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(qi.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return Yi(t,this,r,e),r.sort(Xi),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)Yi(t[i],this,r,e);return r.sort(Xi),r}}),Object.assign(Ki.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Zi.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(ku.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(Ji.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(Qi.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new i),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new i),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),to.prototype=Object.create(x.prototype),to.prototype.constructor=to,to.prototype.isImmediateRenderObject=!0,eo.prototype=Object.create(Ie.prototype),eo.prototype.constructor=eo,eo.prototype.update=function(){var t=new s,e=new s,n=new u;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,c=0,l=0,h=u.length;l<h;l++)for(var f=u[l],d=0,p=f.vertexNormals.length;d<p;d++){var g=s[f[r[d]]],m=f.vertexNormals[d];t.copy(g).applyMatrix4(i),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}else if(a&&a.isBufferGeometry)for(var v=a.attributes.position,y=a.attributes.normal,c=0,d=0,p=v.count;d<p;d++)t.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1;o.needsUpdate=!0}}(),no.prototype=Object.create(x.prototype),no.prototype.constructor=no,no.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},no.prototype.update=function(){var t=new s,e=new s;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),io.prototype=Object.create(Ie.prototype),io.prototype.constructor=io,io.prototype.updateMatrixWorld=function(){var t=new s,e=new o,n=new o;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute("position").needsUpdate=!0,x.prototype.updateMatrixWorld.call(this,r)}}(),oo.prototype=Object.create(K.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},oo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ao.prototype=Object.create(x.prototype),ao.prototype.constructor=ao,ao.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ao.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=t,r[1]=-e,r[2]=0,r[3]=t,r[4]=e,r[5]=0,r[6]=-t,r[7]=e,r[8]=0,r[9]=-t,r[10]=-e,r[11]=0,r[12]=t,r[13]=-e,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},so.prototype=Object.create(x.prototype),so.prototype.constructor=so,so.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},so.prototype.update=function(){var t=new s,e=new y,n=new y;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?e:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),uo.prototype=Object.create(Ie.prototype),uo.prototype.constructor=uo,co.prototype=Object.create(Ie.prototype),co.prototype.constructor=co,lo.prototype=Object.create(Ie.prototype),lo.prototype.constructor=lo,lo.prototype.update=function(){var t=new s,e=new s,n=new u;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,c=0,l=s.length;c<l;c++){var h=s[c],f=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),u+=1,i.setXYZ(u,e.x,e.y,e.z),u+=1}i.needsUpdate=!0}}(),ho.prototype=Object.create(x.prototype),ho.prototype.constructor=ho,ho.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ho.prototype.update=function(){var t=new s,e=new s,n=new s;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),fo.prototype=Object.create(Ie.prototype),fo.prototype.constructor=fo,fo.prototype.update=function(){function t(t,o,a,s){r.set(o,a,s).unproject(i);var u=n[t];if(void 0!==u)for(var c=e.getAttribute("position"),l=0,h=u.length;l<h;l++)c.setXYZ(u[l],r.x,r.y,r.z)}var e,n,r=new s,i=new E;return function(){e=this.geometry,n=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),po.prototype=Object.create(Ie.prototype),po.prototype.constructor=po,po.prototype.update=function(){var t=new p;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),po.prototype.setFromObject=function(t){return this.object=t,this.update(),this},go.prototype=Object.create(Ie.prototype),go.prototype.constructor=go,go.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,t))},mo.prototype=Object.create(Be.prototype),mo.prototype.constructor=mo,mo.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),x.prototype.updateMatrixWorld.call(this,t)};var mc,vc;vo.prototype=Object.create(x.prototype),vo.prototype.constructor=vo,vo.prototype.setDirection=function(){var t,e=new s;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),vo.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},vo.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},yo.prototype=Object.create(Ie.prototype),yo.prototype.constructor=yo;var yc=0,bc=1;Er.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Er.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Wr.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new S,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new s(i.x,i.y,i.z||0))}return e}}),Object.assign(Gr.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),jo.prototype=Object.create(Mr.prototype),Uo.prototype=Object.create(Mr.prototype),$o.prototype=Object.create(Mr.prototype),Object.assign($o.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),uo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},io.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(bi.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),cc.extractUrlBase(t)}}),Object.assign(Qi.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(p.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),X.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(ku,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ku.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ku.ceilPowerOfTwo(t)}}),Object.assign(u.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(o.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new s),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),m.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},a.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(q.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Y.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Y,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Y.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Y.getNormal(t,e,n,r)}}),Object.assign(qr.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new $n(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zn(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(x.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(x.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Fe.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Pe.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Er.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),xe.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Xr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(M.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(j.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(j.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($i.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new y}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===fa}}}),Object.defineProperties(hr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(G.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ce.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Ce.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(me.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(h.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ae.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Pi.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Ti).load(t,function(t){e.setBuffer(t)}),this},Ri.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Oi.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var wc={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},_c={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new xr;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new _r;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},xc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}}},function(t,e,n){var r,i,o,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,s){"object"===a(e)?t.exports=e=s():(i=[],r=s,void 0!==(o="function"===typeof r?r.apply(e,i):r)&&(t.exports=o))}(0,function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},i=r.lib={},o=i.Base=function(){return{extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=0;i<e;i+=4){var o=function(e){var e=e,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,e=18e3*(65535&e)+(e>>16)&r;var i=(n<<16)+e&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}}(4294967296*(n||t.random()));n=987654071*o(),r.push(4294967296*o()|0)}return new a.init(r,e)}}),s=r.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=4*o,u=i/s;u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);var c=u*o,l=t.min(4*c,i);if(c){for(var h=0;h<c;h+=o)this._doProcessBlock(r,h);var f=r.splice(0,c);n.sigBytes-=l}return new a.init(f,l)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(i.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math);return t})},function(t,e,n){"use strict";var r=n(52);n.d(e,"a",function(){return r.e}),n.d(e,"f",function(){return r.g}),n.d(e,"d",function(){return r.f});var i=n(256);n.d(e,"e",function(){return i.a}),n.d(e,"c",function(){return i.b});var o=n(257);n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";var r=n(60),i=n(148),o=n(149),a=n(150),s=n(63);n(62);n.d(e,"e",function(){return r.b}),n.d(e,"c",function(){return i.a}),n.d(e,"b",function(){return o.a}),n.d(e,"a",function(){return a.a}),n.d(e,"d",function(){return s.a})},function(t,e,n){"use strict";e.__esModule=!0;var r=(e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t},e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)});e.stripBasename=function(t,e){return r(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},e.createPath=function(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return c});var r=function(t){return"/"===t.charAt(0)?t:"/"+t},i=function(t){return"/"===t.charAt(0)?t.substr(1):t},o=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)},a=function(t,e){return o(t,e)?t.substr(e.length):t},s=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},u=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},c=function(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(t,e,n){"use strict";function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(u.a)(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?s:function(e,n){return n-e?i(e,n,t):Object(u.a)(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):Object(u.a)(isNaN(t)?e:t)}e.c=o,e.b=a,e.a=s;var u=n(109)},function(t,e,n){"use strict";var r=n(155);n.d(e,"a",function(){return r.a});var i=(n(163),n(76));n.d(e,"d",function(){return i.b});var o=n(77);n.d(e,"b",function(){return o.b});var a=n(164);n.d(e,"c",function(){return a.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":p(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":p(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),c=n.n(u),l=n(0),h=n.n(l),f=n(1),d=n.n(f),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.state={match:o.computeMatch(o.props.history.location.pathname)},a=n,i(o,a)}return o(e,t),e.prototype.getChildContext=function(){return{router:g({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},e.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.children,r=e.history;c()(null==n||1===h.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){t.setState({match:t.computeMatch(r.location.pathname)})})},e.prototype.componentWillReceiveProps=function(t){s()(this.props.history===t.history,"You cannot change <Router history>")},e.prototype.componentWillUnmount=function(){this.unlisten()},e.prototype.render=function(){var t=this.props.children;return t?h.a.Children.only(t):null},e}(h.a.Component);m.propTypes={history:d.a.object.isRequired,children:d.a.node},m.contextTypes={router:d.a.object},m.childContextTypes={router:d.a.object.isRequired},e.a=m},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n(68),i=n(69),o=n(15),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(t,e,n,i){var s=void 0;"string"===typeof t?(s=Object(o.d)(t),s.state=e):(s=a({},t),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==e&&void 0===s.state&&(s.state=e));try{s.pathname=decodeURI(s.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(s.key=n),i?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=Object(r.default)(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s},u=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Object(i.default)(t.state,e.state)}},function(t,e,n){"use strict";var r=n(161),i=n.n(r),o={},a=0,s=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=o[n]||(o[n]={});if(r[t])return r[t];var s=[],u=i()(t,s,e),c={re:u,keys:s};return a<1e4&&(r[t]=c,a++),c},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof e&&(e={path:e});var n=e,r=n.path,i=void 0===r?"/":r,o=n.exact,a=void 0!==o&&o,u=n.strict,c=void 0!==u&&u,l=n.sensitive,h=void 0!==l&&l,f=s(i,{end:a,strict:c,sensitive:h}),d=f.re,p=f.keys,g=d.exec(t);if(!g)return null;var m=g[0],v=g.slice(1),y=t===m;return a&&!y?null:{path:i,url:"/"===i&&""===m?"/":m,isExact:y,params:p.reduce(function(t,e,n){return t[e.name]=v[n],t},{})}};e.a=u},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments[1],n=new Array(t),r=0,i=0,c=0,l=function(e){n[i]=e,i=(i+1)%t,r++},h=function(){if(0!=r){var e=n[c];return n[c]=null,r--,c=(c+1)%t,e}},f=function(){for(var t=[];r;)t.push(h());return t};return{isEmpty:function(){return 0==r},put:function(h){if(r<t)l(h);else{var d=void 0;switch(e){case a:throw new Error(o);case s:n[i]=h,i=(i+1)%t,c=i;break;case u:d=2*t,n=f(),r=n.length,i=n.length,c=0,n.length=d,t=d,l(h)}}},take:h,flush:f}}n.d(e,"a",function(){return l});var i=n(4),o="Channel's Buffer overflow!",a=1,s=3,u=4,c={isEmpty:i.o,put:i.r,take:i.r},l={none:function(){return c},fixed:function(t){return r(t,a)},dropping:function(t){return r(t,2)},sliding:function(t){return r(t,s)},expanding:function(t){return r(t,u)}}},function(t,e,n){t.exports=n(200)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e-=t,function(n){return t+e*n}}},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,u],h=0;c=new Error(e.replace(/%s/g,function(){return l[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};t.exports=r},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";var r=n(130),i=(n(58),n(134));n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a})},function(t,e,n){"use strict";function r(t){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.a=r},function(t,e,n){"use strict";function r(t){if(!Object(a.a)(t)||Object(i.a)(t)!=s)return!1;var e=Object(o.a)(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}var i=n(137),o=n(142),a=n(144),s="[object Object]",u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=l.call(Object);e.a=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(68),a=r(o),s=n(69),u=r(s),c=n(14);e.createLocation=function(t,e,n,r){var o=void 0;"string"===typeof t?(o=(0,c.parsePath)(t),o.state=e):(o=i({},t),void 0===o.pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=(0,a.default)(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,u.default)(t.state,e.state)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){var t=null,e=function(e){return(0,i.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,r,o){if(null!=t){var a="function"===typeof t?t(e,n):t;"string"===typeof a?"function"===typeof r?r(a,o):((0,i.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},r=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return r.push(n),function(){e=!1,r=r.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach(function(t){return t.apply(void 0,e)})}}};e.default=o},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=function(){var t=null,e=function(e){return i()(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,r,o){if(null!=t){var a="function"===typeof t?t(e,n):t;"string"===typeof a?"function"===typeof r?r(a,o):(i()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},r=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return r.push(n),function(){e=!1,r=r.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach(function(t){return t.apply(void 0,e)})}}};e.a=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),c=n.n(u),l=n(0),h=n.n(l),f=n(1),d=n.n(f),p=n(20),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(t){return 0===h.a.Children.count(t)},y=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.state={match:o.computeMatch(o.props,o.context.router)},a=n,i(o,a)}return o(e,t),e.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},e.prototype.computeMatch=function(t,e){var n=t.computedMatch,r=t.location,i=t.path,o=t.strict,a=t.exact,s=t.sensitive;if(n)return n;c()(e,"You should not use <Route> or withRouter() outside a <Router>");var u=e.route,l=(r||u.location).pathname;return i?Object(p.a)(l,{path:i,strict:o,exact:a,sensitive:s}):u.match},e.prototype.componentWillMount=function(){s()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),s()(!(this.props.component&&this.props.children&&!v(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),s()(!(this.props.render&&this.props.children&&!v(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},e.prototype.componentWillReceiveProps=function(t,e){s()(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),s()(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},e.prototype.render=function(){var t=this.state.match,e=this.props,n=e.children,r=e.component,i=e.render,o=this.context.router,a=o.history,s=o.route,u=o.staticContext,c=this.props.location||s.location,l={match:t,location:c,history:a,staticContext:u};return r?t?h.a.createElement(r,l):null:i?t?i(l):null:n?"function"===typeof n?n(l):v(n)?null:h.a.Children.only(n):null},e}(h.a.Component);y.propTypes={computedMatch:d.a.object,path:d.a.string,exact:d.a.bool,strict:d.a.bool,sensitive:d.a.bool,component:d.a.func,render:d.a.func,children:d.a.oneOfType([d.a.func,d.a.node]),location:d.a.object},y.contextTypes={router:d.a.shape({history:d.a.object.isRequired,route:d.a.object.isRequired,staticContext:d.a.object})},y.childContextTypes={router:d.a.object.isRequired},e.a=y},function(t,e,n){"use strict";function r(t){return o.n.channel(t)?"channel":Array.isArray(t)?String(t.map(function(t){return String(t)})):String(t)}function i(t,e){function n(e,n){if(u===s)return a;if(n)throw u=s,n;i&&i(e);var r=t[u](),o=r[0],c=r[1],l=r[2];return u=o,i=l,u===s?a:c}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",i=void 0,u=e;return Object(o.q)(n,function(t){return n(null,t)},r,!0)}n.d(e,"b",function(){return s}),e.c=r,e.a=i;var o=n(4),a={done:!0,value:void 0},s={}},function(t,e,n){"use strict";var r=n(7);n.d(e,"c",function(){return r.g}),n.d(e,"a",function(){return r.b}),n.d(e,"b",function(){return r.d}),n.d(e,"d",function(){return r.i})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"types",function(){return i}),n.d(e,"init",function(){return o}),n.d(e,"switchMode",function(){return s}),n.d(e,"didInit",function(){return u}),n.d(e,"changeFloor",function(){return c}),n.d(e,"floorDidChanged",function(){return l}),n.d(e,"onClick",function(){return h});var r=n(38),i={WILL_INIT:"map/WILL_INIT",DID_INIT:"map/DID_INIT",SWITCH_MODE:"map/SWITCH_MODE",FLOOR_WILL_CHANGE:"map/FLOOR_WILL_CHANGE",FLOOR_DID_CHANGE:"map/FLOOR_DID_CHANGE",ON_CLICK:"map/ON_CLICK"},o=function(){return{type:i.WILL_INIT}},a="3D",s=function(){return a="3D"===a?"2D":"3D",{type:i.SWITCH_MODE,mode:a}},u=function(){return{type:i.DID_INIT}},c=function(t){return{type:i.FLOOR_WILL_CHANGE,floorID:t}},l=function(t,e){return{type:i.FLOOR_DID_CHANGE,currentFloor:t,previousFloor:e}},h=function(t){return r.a.onClick(),{type:i.ON_CLICK,currentClickedEvent:t}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(84),o=(n(94),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),a=function(){function t(){r(this,t),this.awm=null,this.onClickEvent=null,this.current=null,this.locked=!1}return o(t,[{key:"init",value:function(t){return this.awm=t,this}},{key:"setEvent",value:function(t){this.onClickEvent=t}},{key:"getEvent",value:function(){return this.onClickEvent}},{key:"onClick",value:function(){var t=this.onClickEvent.intersects;if(0===t.length)return void this.updateSelection(null);var e=t[0];if(e.object.isBuilding||e.object.isSpace)this.updateSelection(e.object);else if(e.object.isLabel){var n=e.object.parent;n.isBuilding||n.isSpace?this.updateSelection(n):this.updateSelection(e.object)}else this.updateSelection(null)}},{key:"updateSelection",value:function(t){var e=this;this.locked||t===this.current||(null!==this.current&&this.current.isBuilding?this.resetBuilding(this.current):null!==this.current&&this.current.isSpace&&this.resetSpace(this.current),this.current=t,null!==this.current&&this.current.isBuilding?(this.locked=!0,this.highlightBuilding(this.current).then(function(){e.locked=!1})):null!==this.current&&this.current.isSpace?(this.locked=!0,this.highlightSpace(this.current).then(function(){return i.a.goTo(e.current)}).then(function(){e.locked=!1})):null!==this.current&&this.current.isLabel&&(this.locked=!0,this.highlightLabel(this.current).then(function(){return i.a.goTo(e.current)}).then(function(){e.locked=!1})))}},{key:"highlightBuilding",value:function(t){return this.awm.cameraManager.centerOn(t).then(function(){t.setColor(7921807)})}},{key:"resetBuilding",value:function(t){t.resetColor()}},{key:"highlightSpace",value:function(t){return Promise.resolve().then(function(){t.setColor(7921807),t.bounceUp(3)})}},{key:"highlightLabel",value:function(t){return this.awm.cameraManager.centerOn(t)}},{key:"resetSpace",value:function(t){t.resetColor(),t.bounceDown()}}]),t}(),s=new a;e.a=s},function(t,e,n){(function(n,r){var i,o,a,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,r){"object"==s(e)&&"undefined"!=typeof t?r(e):(o=[e],i=r,void 0!==(a="function"===typeof i?i.apply(e,o):i)&&(t.exports=a))}(0,function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":s(t)})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){var r,i,o;r=t,o=n[i=e],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})}return t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t){if(t&&t.nodeType||void 0===t||"object"!==e(t))return t;if(Array.isArray(t))return[].concat(t);if("object"===e(t)){var n={};for(var r in t)n[r]=c(t[r]);return n}return t}function l(t){return"string"!=typeof t?t:t.replace(B,I).match(R).map(function(t){return D(t)?t:+t})}function h(t,n,r,i,o){var a=r[t],s=i[t];if("string"==typeof a||"string"==typeof s){for(var u=Array.isArray(a)&&a[0]===L?a:l(a),c=Array.isArray(s)&&s[0]===L?s:l(s),f=1;f<u.length;)u[f]===c[f]&&"string"==typeof u[f-1]?(u.splice(f-1,2,u[f-1]+u[f]),c.splice(f-1,2,c[f-1]+c[f])):f++;u[f=0]===L&&u.shift(),c[0]===L&&c.shift();for(var d={isString:!0,length:u.length},p={isString:!0,length:c.length};f<d.length;)d[f]=u[f],p[f]=c[f],f++;return r[t]=d,i[t]=p,!0}if("object"===e(a)&&"object"===e(s)){if(Array.isArray(a))return a.map(function(e,r){return h(r,n[t],a,s)});for(var g in s)h(g,n[t],a,s);return!0}return!1}function f(t,n,r,i,o,a,s){var u=s?r:r[t],c=s?i:i[t];if(void 0===c)return u;if(void 0===u||"string"==typeof u||u===c)return c;if("object"===e(u)&&"object"===e(c)){if(!u||!c)return n[t];if("object"===e(u)&&u&&u.isString){for(var l="",h=0,d=u.length;h<d;h++){var p="number"==typeof u[h]&&"string"==typeof c[h]&&"="===c[h][1],g="number"!=typeof u[h]?u[h]:((p?u[h]+parseFloat(c[h][0]+c[h].substr(2))*o:u[h]+(c[h]-u[h])*o)*N|0)/N;(U(u,h)||U(u,h,j))&&(g|=0),l+=g,p&&1===a&&(u[h]=u[h]+parseFloat(c[h][0]+c[h].substr(2)))}return s||(n[t]=l),l}if(Array.isArray(u)&&u[0]!==L)for(var m=0,v=u.length;m<v;m++)u[m]!==c[m]&&f(m,n[t],u,c,o,a);else if("object"===e(u)&&u&&!u.isString)for(var y in u)u[y]!==c[y]&&f(y,n[t],u,c,o,a)}else if("number"==typeof u){var b="string"==typeof c;n[t]=((b?u+parseFloat(c[0]+c.substr(2))*o:u+(c-u)*o)*N|0)/N,b&&1===a&&(r[t]=n[t])}else"function"==typeof c&&(n[t]=c(o));return n[t]}"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var d,p,g="undefined"!=typeof window?window:"undefined"!=typeof n?n:this,m=g.requestAnimationFrame||function(t){return g.setTimeout(t,16)},v=g.cancelAnimationFrame||function(t){return g.clearTimeout(t)},y=function(){if("undefined"==typeof r||void 0===r.hrtime||r.versions&&void 0!==r.versions.electron){if(void 0!==g.performance&&void 0!==g.performance.now)return g.performance.now.bind(g.performance);var t=g.performance&&g.performance.timing&&g.performance.timing.navigationStart?g.performance.timing.navigationStart:Date.now();return function(){return Date.now()-t}}return function(){var t=r.hrtime();return 1e3*t[0]+t[1]/1e6}}(),b=[],w=!1,_=!1,x=m,E=v,A=0,C=function(t){var e=b.indexOf(t);-1<e&&b.splice(e,1),b.push(t),A=0,_&&!w&&(d=x(T),w=!0)},S=function(t){for(var e=0;e<b.length;e++)if(t===b[e])return b[e];return null},M=function(t){var e=b.indexOf(t);-1!==e&&b.splice(e,1)},T=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y(),n=1<arguments.length?arguments[1]:void 0;if(_&&w&&(d=x(t)),b.length||A++,120<A)return E(d),A=0,w=!1;for(var r=0;r<b.length;)b[r++].update(e,n);return!0},k={},O={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-O.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*O.Bounce.In(2*t):.5*O.Bounce.Out(2*t-1)+.5}},Stepped:{steps:function(t){return function(e){return(e*t|0)/t}}}},F="_chainedTweens",P="Callback",L="STRING_PROP",R=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g,D=function(t){return isNaN(+t)||("+"===t[0]||"-"===t[0])&&"="===t[1]||""===t||" "===t},B=/^#([0-9a-f]{6}|[0-9a-f]{3})$/i,I=function(t,e){var n,r,i;3===e.length&&(e=(n=e[0])+n+(r=e[1])+r+(i=e[2])+i);var o=parseInt(e,16);return"rgb("+(n=o>>16&255)+","+(r=o>>8&255)+","+(i=255&o)+")"},N=Math.pow(10,4),j="rgba(",U=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgb(";return"number"==typeof t[e]&&(t[e-1]===n||t[e-3]===n||t[e-5]===n)},$=/([.[])/g,z=/\]/g,H=function(t,n){var r=t[n],i=n.replace(z,"").split($),o=i.length-1,a=Array.isArray(t),s="object"===e(t)&&!a;return s?(t[n]=null,delete t[n]):a&&t.splice(n,1),i.reduce(function(t,e,n){a&&"."!==e&&"["!==e&&(e*=1);var u="["===i[n+1];if("."===e||"["===e)return"."===e?a=!(s=!0):"["===e&&(a=!(s=!1)),t;if(void 0===t[e]){if(a||s)return t[e]=n===o?r:a||u?[]:s?{}:null,s=a=!1,t[e]}else if(void 0!==t[e])return n===o&&(t[e]=r),t[e];return t},t)},V=function(t){if("object"===e(t)&&t)for(var n in t)if(-1!==n.indexOf(".")||-1!==n.indexOf("["))H(t,n);else if("object"===e(t[n])&&t[n]){var r=t[n];for(var i in r)if(-1!==i.indexOf(".")||-1!==i.indexOf("["))H(r,i);else if("object"===e(r[i])&&r[i]){var o=r[i];for(var a in o)-1===a.indexOf(".")&&-1===a.indexOf("[")||H(o,a)}}return t},W={Linear:function(t,e,n){var r=t.length-1,i=r*e,o=Math.floor(i),a=W.Utils.Linear;return e<0?a(t[0],t[1],i,n):1<e?a(t[r],t[r-1],r-i,n):a(t[o],t[r<o+1?r:o+1],i-o,n)},Bezier:function(t,n,r){for(var i=W.Utils.Reset(r),o=t.length-1,a=Math.pow,s=W.Utils.Bernstein,u=Array.isArray(i),c=0;c<=o;c++)if("number"==typeof i)i+=a(1-n,o-c)*a(n,c)*t[c]*s(o,c);else if(u)for(var l=0,h=i.length;l<h;l++)"number"==typeof i[l]?i[l]+=a(1-n,o-c)*a(n,c)*t[c][l]*s(o,c):i[l]=t[c][l];else if("object"===e(i))for(var f in i)"number"==typeof i[f]?i[f]+=a(1-n,o-c)*a(n,c)*t[c][f]*s(o,c):i[f]=t[c][f];else if("string"==typeof i){for(var d="",p=t[Math.round(o*n)],g=1,m=p.length;g<m;g++)d+=p[g];return d}return i},CatmullRom:function(t,e,n){var r=t.length-1,i=r*e,o=Math.floor(i),a=W.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(o=Math.floor(i=r*(1+e))),a(t[(o-1+r)%r],t[o],t[(o+1)%r],t[(o+2)%r],i-o,n)):e<0?a(t[1],t[1],t[0],t[0],-e,n):1<e?a(t[r-1],t[r-1],t[r],t[r],(0|e)-e,n):a(t[o?o-1:0],t[o],t[r<o+1?r:o+1],t[r<o+2?r:o+2],i-o,n)},Utils:{Linear:function(t,n,r,i){if("string"==typeof t)return n;if("number"==typeof t)return"function"==typeof t?t(r):t+(n-t)*r;if("object"===e(t)){if(void 0!==t.length){if(t[0]===L){for(var o="",a=1,s=t.length;a<s;a++){var u="number"==typeof t[a]?t[a]+(n[a]-t[a])*r:n[a];(U(t,a)||U(t,a,j))&&(u|=0),o+=u}return o}for(var c=0,l=i.length;c<l;c++)i[c]=W.Utils.Linear(t[c],n[c],r,i[c])}else for(var h in i)i[h]=W.Utils.Linear(t[h],n[h],r,i[h]);return i}},Reset:function(t){if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)t[n]=W.Utils.Reset(t[n]);return t}if("object"===e(t)){for(var i in t)t[i]=W.Utils.Reset(t[i]);return t}return"number"==typeof t?0:t},Bernstein:function(t,e){var n=W.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(p=[1],function(t){var e=1;if(p[t])return p[t];for(var n=t;1<n;n--)e*=n;return p[t]=e}),CatmullRom:function(t,n,r,i,o,a){if("string"==typeof t)return n;if("number"==typeof t){var s=.5*(r-t),u=.5*(i-n),c=o*o;return(2*n-2*r+s+u)*(o*c)+(-3*n+3*r-2*s-u)*c+s*o+n}if("object"===e(t)){if(void 0!==t.length){if(t[0]===L){for(var l="",h=1,f=t.length;h<f;h++){var d="number"==typeof t[h]?W.Utils.CatmullRom(t[h],n[h],r[h],i[h],o):i[h];(U(t,h)||U(t,h,j))&&(d|=0),l+=d}return l}for(var p=0,g=a.length;p<g;p++)a[p]=W.Utils.CatmullRom(t[p],n[p],r[p],i[p],o,a[p])}else for(var m in a)a[m]=W.Utils.CatmullRom(t[m],n[m],r[m],i[m],o,a[m]);return a}}}},G={},q=function(t,n,r){if(!t||!t.nodeType)return n;var i=t.queueID||"q_"+Date.now();t.queueID||(t.queueID=i);var o=G[i];if(o){if(o.object===n&&t===o.tween.node&&r._startTime===o.tween._startTime)M(o.tween);else if("object"===e(n)&&n&&o.object){for(var s in n)s in o.object&&(r._startTime===o.tween._startTime?delete o.object[s]:o.propNormaliseRequired=!0);o.object=a({},o.object,n)}return o.object}return"object"===e(n)&&n?(G[i]={tween:r,object:n,propNormaliseRequired:!1},G[i].object):n},X=function(t,e){return e?t?t===window||t===document?[t]:"string"==typeof t?!!document.querySelectorAll&&document.querySelectorAll(t):Array.isArray(t)?t:t.nodeType?[t]:[]:null:t?t===window||t===document?t:"string"==typeof t?!!document.querySelector&&document.querySelector(t):Array.isArray(t)?t[0]:t.nodeType?t:null:null},Y=0,K=O.Linear.None,Z=function(){function t(n,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=Y++,!n||"object"!==e(n)||r||n.nodeType?n&&(n.nodeType||n.length||"string"==typeof n)&&(n=this.node=X(n),r=this.object=q(n,r,this)):(r=this.object=n,n=null),this._valuesEnd=null,this._valuesStart={},this._duration=1e3,this._easingFunction=K,this._easingReverse=K,this._interpolationFunction=W.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return o(t,null,[{key:"fromTo",value:function(e,n,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};i.quickRender=i.quickRender?i.quickRender:!r;var o=new t(e,n).to(r,i);return i.quickRender&&(o.render().update(o._startTime),o._rendered=!1,o._onStartCallbackFired=!1),o}},{key:"to",value:function(e,n,r){return t.fromTo(e,null,n,r)}},{key:"from",value:function(e,n,r){return t.fromTo(e,n,null,r)}}]),o(t,[{key:"setMaxListener",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:15;return this._maxListener=t,this}},{key:"on",value:function(t,e){for(var n=this._maxListener,r=t+P,i=0;i<n;i++){var o=r+i;if(!this[o]){this[o]=e;break}}return this}},{key:"once",value:function(t,e){return this}},{key:"off",value:function(t,e){for(var n=this._maxListener,r=t+P,i=0;i<n;i++){var o=r+i;this[o]===e&&(this[o]=null)}return this}},{key:"emit",value:function(t,e,n,r,i){var o=this._maxListener,a=t+P;if(!this[a+0])return this;for(var s=0;s<o;s++){var u=a+s;this[u]&&this[u](e,n,r,i)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(t){var e=this._reversed;return this._reversed=void 0!==t?t:!e,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,M(this),this._pausedTime=y(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=y()-this._pausedTime,this._initTime=this._startTime,C(this),this._pausedTime=y(),this.emit("play",this.object))}},{key:"restart",value:function(t){return this._repeat=this._r,this.reassignValues(),C(this),this.emit("restart",this.object)}},{key:"seek",value:function(t,e){var n=this._duration,r=this._initTime,i=this._startTime,o=this._reversed,a=r+t;return this._isPlaying=!0,a<i&&r<=i&&(this._startTime-=n,this._reversed=!o),this.update(t,!1),this.emit("seek",t,this.object),e?this:this.pause()}},{key:"duration",value:function(t){return this._duration="function"==typeof t?t(this._duration):t,this}},{key:"to",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;if(this._valuesEnd=t,"number"==typeof n||"function"==typeof n)this._duration="function"==typeof n?n(this._duration):n;else if("object"===e(n))for(var r in n)if("function"==typeof this[r]){var i=u(Array.isArray(n[r])?n[r]:[n[r]],4),o=i[0],a=void 0===o?null:o,s=i[1],c=void 0===s?null:s,l=i[2],h=void 0===l?null:l,f=i[3],d=void 0===f?null:f;this[r](a,c,h,d)}return this}},{key:"render",value:function(){if(this._rendered)return this;var e=this._valuesStart,n=this._valuesEnd,r=this.object,i=this.node,o=this.InitialValues;if(V(r),V(n),i&&i.queueID&&G[i.queueID]){var a=G[i.queueID];a.propNormaliseRequired&&a.tween!==this&&(a.normalisedProp=!0,a.propNormaliseRequired=!1)}for(var s in i&&o&&(r&&0!==Object.keys(r).length?n&&0!==Object.keys(n).length||(n=this._valuesEnd=o(i,r)):r=this.object=q(i,o(i,n),this)),n){var u=r&&r[s]&&c(r[s]),f=n[s];if(!(k[s]&&k[s].init&&(k[s].init.call(this,u,f,s,r),void 0===u&&e[s]&&(u=e[s]),k[s].skipProcess))&&!("number"==typeof u&&isNaN(u)||null===u||null===f||!1===u||!1===f||void 0===u||void 0===f||u===f)){if(Array.isArray(f)&&!Array.isArray(u)){f.unshift(u);for(var d=0,p=f.length;d<p;d++)if("string"==typeof f[d]){for(var g=l(f[d]),m={length:g.length,isString:!0},v=0,y=g.length;v<y;v++)m[v]=g[v];f[d]=m}}"number"==typeof(e[s]=u)&&"string"==typeof f&&"="===f[1]||h(s,r,e,n)}}return t.Renderer&&this.node&&t.Renderer.init&&(t.Renderer.init.call(this,r,e,n),this.__render=!0),this}},{key:"start",value:function(t){return this._startTime=void 0!==t?"string"==typeof t?y()+parseFloat(t):t:y(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,C(this),this}},{key:"stop",value:function(){var t=this._isPlaying,e=this._isFinite,n=this.object,r=this._startTime,i=this._duration,o=this._r,a=this._yoyo,s=this._reversed;if(!t)return this;var u=e?(o+1)%2==1:!s;return this._reversed=!1,a&&u?this.update(r):this.update(r+i),M(this),this.emit("stop",n)}},{key:"delay",value:function(t){return this._delayTime="function"==typeof t?t(this._delayTime):t,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var t=0,e=this._chainedTweensCount;t<e;t++)this[F+t]=arguments[t];return this}},{key:"repeat",value:function(t){return this._repeat=this._duration?"function"==typeof t?t(this._repeat):t:0,this._r=this._repeat,this._isFinite=isFinite(t),this}},{key:"reverseDelay",value:function(t){return this._reverseDelayTime="function"==typeof t?t(this._reverseDelayTime):t,this}},{key:"yoyo",value:function(t,e){return this._yoyo="function"==typeof t?t(this._yoyo):null===t?this._yoyo:t,t||(this._reversed=!1),this._easingReverse=e||null,this}},{key:"easing",value:function(t){return this._easingFunction=t,this}},{key:"interpolation",value:function(t){return"function"==typeof t&&(this._interpolationFunction=t),this}},{key:"reassignValues",value:function(t){var e=this._valuesStart,n=this.object,r=this._delayTime;for(var i in this._isPlaying=!0,this._startTime=void 0!==t?t:y(),this._startTime+=r,this._reversed=!1,C(this),e){var o=e[i];n[i]=o}return this}},{key:"update",value:function(e,n,r){var i,o,a,s=this._onStartCallbackFired,u=this._easingFunction,c=this._interpolationFunction,l=this._easingReverse,h=this._repeat,d=this._delayTime,p=this._reverseDelayTime,g=this._yoyo,m=this._reversed,v=this._startTime,b=this._prevTime,w=this._duration,_=this._valuesStart,x=this._valuesEnd,E=this.object,A=this._isFinite,C=this._isPlaying,S=this.__render,T=this._chainedTweensCount,O=0;if(w){var P=(e=void 0!==e?e:y())-b;if(this._prevTime=e,250<P&&(e-=P-50/3),!C||e<v&&!r)return!0;i=1<(i=(e-v)/w)?1:i,i=m?1-i:i}else i=1,h=0;if(s||(this._rendered||(this.render(),this._rendered=!0),this.emit("start",E),this._onStartCallbackFired=!0),o=m&&l||u,!E)return!0;for(a in x){var L=_[a];if(null!=L||k[a]&&k[a].update){var R=x[a],D=o[a]?o[a](i):"function"==typeof o?o(i):K(i),B=c[a]?c[a]:"function"==typeof c?c:W.Linear;"number"==typeof R?E[a]=((L+(R-L)*D)*N|0)/N:Array.isArray(R)&&!Array.isArray(L)?E[a]=B(R,D,E[a]):R&&R.update?R.update(D):"function"==typeof R?E[a]=R(D):"string"==typeof R&&"number"==typeof L?E[a]=L+parseFloat(R[0]+R.substr(2))*D:f(a,E,_,x,D,i),k[a]&&k[a].update&&k[a].update.call(this,E[a],L,R,D,i,a),O++}}if(!O)return M(this),!1;if(S&&t.Renderer&&t.Renderer.update&&t.Renderer.update.call(this,E,i),this.emit("update",E,i,e),1===i||m&&0===i){if(0<h&&0<w){if(A&&this._repeat--,g)this._reversed=!m;else for(a in x){var I=x[a];"string"==typeof I&&"number"==typeof _[a]&&(_[a]+=parseFloat(I[0]+I.substr(2)))}return this.emit(g&&!m?"reverse":"repeat",E),this._startTime=m&&p?e-p:e+d,!0}if(n||(this._isPlaying=!1,M(this),Y--),this.emit("complete",E),this._repeat=this._r,T)for(var j=0;j<T;j++)this[F+j].start(e+w);return!1}return!0}}]),t}();t.Plugins=k,t.Selector=X,t.Interpolator=function(t,n){var r=Array.isArray(t),i="string"==typeof t?t:r?t.slice():a({},t);if(r)for(var o=0,s=t.length;o<s;o++)h(o,i,t,n);else if("object"===e(t))for(var u in t)h(u,i,t,n);else if("string"==typeof t){t=l(t),n=l(n);for(var c=1;c<t.length;)t[c]===n[c]&&"string"==typeof t[c-1]?(t.splice(c-1,2,t[c-1]+t[c]),n.splice(c-1,2,n[c-1]+n[c])):c++;for(var d={isString:!0,length:t.length};c<d.length;)d[c]=t[c],c++}return function(o){if(r)for(var a=0,s=t.length;a<s;a++)f(a,i,t,n,o);else if("object"===e(i))for(var u in t)f(u,i,t,n,o);else"string"==typeof i&&(i=f(0,0,t,n,o,o,!0));return i}},t.onTick=function(t){return b.push({update:t})},t.has=function(t){return null!==S(t)},t.get=S,t.getAll=function(){return b},t.removeAll=function(){b.length=0},t.remove=M,t.add=C,t.now=y,t.update=T,t.autoPlay=function(t){_=t},t.isRunning=function(){return w},t.Tween=Z,t.Easing=O,t.Interpolation=W,Object.defineProperty(t,"__esModule",{value:!0})})}).call(e,n(6),n(85))},function(t,e,n){"use strict";(function(e){function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i=n(5),o=n(181),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var t;return"undefined"!==typeof XMLHttpRequest?t=n(89):"undefined"!==typeof e&&(t=n(89)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){s.headers[t]={}}),i.forEach(["post","put","patch"],function(t){s.headers[t]=i.merge(a)}),t.exports=s}).call(e,n(85))},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(22),a=n.n(o),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){i(this,t),this.config={siteId:240,map:{deviceId:170},api:{endpoint:"https://asia-api.adsum.io",site:240,username:"170-device",key:"6c15cae0c6594c063a713b91b2e0cb0c56a9d0cee823f16ff80606d1e91ef19b"},analyticsLegacy:{endpoint:"https://analytics.adsum.io/piwik.php",site:1,token:"f4a8be0670524ee957374a44dfe278e9"}}}return s(t,[{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=r(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:9001/deviceConfig");case 2:return e=t.sent,t.next=5,e.json();case 5:this.config=t.sent;case 6:case"end":return t.stop()}},t,this)}));return t}()}]),t}(),c=new u;e.a=c},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=(n(9),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),o=function(){function t(){r(this,t),this.awm=null}return i(t,[{key:"init",value:function(t){return this.awm=t,this}},{key:"getAllFloors",value:function(){return this.awm.objectManager.floors}},{key:"getAllBuildings",value:function(){return this.awm.objectManager.buildings}},{key:"getCurrentFloor",value:function(){return this.awm.sceneManager.getCurrentFloor()}},{key:"setCurrentFloor",value:function(t){var e=null===t?null:this.awm.objectManager.floors.get(t);return this.awm.sceneManager.setCurrentFloor(e)}}]),t}(),a=new o;e.a=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(10),o=n(203),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){r(this,t),this.awm=e}return a(t,[{key:"createJSON3DObj",value:function(t){return new Promise(function(e,n){var r=new i.ObjectLoader;r.setCrossOrigin("anonymous"),r.load(t,e,function(){},n)})}},{key:"createOBJ3DObj",value:function(t){return new Promise(function(e,n){(new o.a).load(t,e,function(){},n)})}},{key:"add3DObjectOnFloor",value:function(t,e,n){var r=null;if(r=t?this.awm.objectManager.floors.get(t)._mesh:this.awm.objectManager.site._mesh,e=r.worldToLocal(e.clone()),n)return n.visible=!0,n.position.copy(e),r.add(n),n}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(22),a=n.n(o),s=n(87),u=n(41),c=n(46),l=n.n(c),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(){function t(){i(this,t),this.entityManager=null}return h(t,[{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=r(a.a.mark(function t(){var e,n,r,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=u.a.config.api,n=e.endpoint,r=e.key,i=e.site,o=e.username,this.entityManager=new s.c({endpoint:n,site:i,username:o,key:r});case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"getAllCategories",value:function(){return l.a.cloneDeep(this.entityManager.getRepository("Category").getAll())}},{key:"getFile",value:function(t){return this.entityManager.getRepository("File").get(t)}}]),t}(),d=new f;e.a=d},function(t,e,n){(function(t,r){var i,o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function u(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function c(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function l(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function h(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function f(t,e){return!!(null==t?0:t.length)&&E(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function p(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function g(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function m(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function v(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function y(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t){return t.split("")}function w(t){return t.match(je)||[]}function _(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function x(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function E(t,e,n){return e===e?Z(t,e,n):x(t,C,n)}function A(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function C(t){return t!==t}function S(t,e){var n=null==t?0:t.length;return n?F(t,e)/n:Dt}function M(t){return function(e){return null==e?it:e[t]}}function T(t){return function(e){return null==t?it:t[e]}}function k(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function O(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function F(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function P(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function L(t,e){return p(e,function(e){return[e,t[e]]})}function R(t){return function(e){return t(e)}}function D(t,e){return p(e,function(e){return t[e]})}function B(t,e){return t.has(e)}function I(t,e){for(var n=-1,r=t.length;++n<r&&E(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length;n--&&E(e,t[n],0)>-1;);return n}function j(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function U(t){return"\\"+Mn[t]}function $(t,e){return null==t?it:t[e]}function z(t){return yn.test(t)}function H(t){return bn.test(t)}function V(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function G(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==lt||(t[n]=lt,o[i++]=n)}return o}function X(t,e){return"__proto__"==e?it:t[e]}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Z(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function J(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Q(t){return z(t)?et(t):Vn(t)}function tt(t){return z(t)?nt(t):b(t)}function et(t){for(var e=mn.lastIndex=0;mn.test(t);)++e;return e}function nt(t){return t.match(mn)||[]}function rt(t){return t.match(vn)||[]}var it,ot=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",ut="__lodash_hash_undefined__",ct=500,lt="__lodash_placeholder__",ht=1,ft=2,dt=4,pt=1,gt=2,mt=1,vt=2,yt=4,bt=8,wt=16,_t=32,xt=64,Et=128,At=256,Ct=512,St=30,Mt="...",Tt=800,kt=16,Ot=1,Ft=2,Pt=1/0,Lt=9007199254740991,Rt=1.7976931348623157e308,Dt=NaN,Bt=4294967295,It=Bt-1,Nt=Bt>>>1,jt=[["ary",Et],["bind",mt],["bindKey",vt],["curry",bt],["curryRight",wt],["flip",Ct],["partial",_t],["partialRight",xt],["rearg",At]],Ut="[object Arguments]",$t="[object Array]",zt="[object AsyncFunction]",Ht="[object Boolean]",Vt="[object Date]",Wt="[object DOMException]",Gt="[object Error]",qt="[object Function]",Xt="[object GeneratorFunction]",Yt="[object Map]",Kt="[object Number]",Zt="[object Null]",Jt="[object Object]",Qt="[object Proxy]",te="[object RegExp]",ee="[object Set]",ne="[object String]",re="[object Symbol]",ie="[object Undefined]",oe="[object WeakMap]",ae="[object WeakSet]",se="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",le="[object Float64Array]",he="[object Int8Array]",fe="[object Int16Array]",de="[object Int32Array]",pe="[object Uint8Array]",ge="[object Uint8ClampedArray]",me="[object Uint16Array]",ve="[object Uint32Array]",ye=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_e=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,Ee=RegExp(_e.source),Ae=RegExp(xe.source),Ce=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,Me=/<%=([\s\S]+?)%>/g,Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ke=/^\w*$/,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fe=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(Fe.source),Le=/^\s+|\s+$/g,Re=/^\s+/,De=/\s+$/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ie=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/\\(\\)?/g,$e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,qe=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ye=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Je="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qe="["+Je+"]",tn="["+Ze+"]",en="[a-z\\xdf-\\xf6\\xf8-\\xff]",nn="[^\\ud800-\\udfff"+Je+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rn="\\ud83c[\\udffb-\\udfff]",on="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",un="(?:"+en+"|"+nn+")",cn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ln="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",on,an].join("|")+")[\\ufe0e\\ufe0f]?"+cn+")*",hn="[\\ufe0e\\ufe0f]?"+cn+ln,fn="(?:"+["[\\u2700-\\u27bf]",on,an].join("|")+")"+hn,dn="(?:"+["[^\\ud800-\\udfff]"+tn+"?",tn,on,an,"[\\ud800-\\udfff]"].join("|")+")",pn=RegExp("['\u2019]","g"),gn=RegExp(tn,"g"),mn=RegExp(rn+"(?="+rn+")|"+dn+hn,"g"),vn=RegExp([sn+"?"+en+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Qe,sn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Qe,sn+un,"$"].join("|")+")",sn+"?"+un+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",sn+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",fn].join("|"),"g"),yn=RegExp("[\\u200d\\ud800-\\udfff"+Ze+"\\ufe0e\\ufe0f]"),bn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_n=-1,xn={};xn[ce]=xn[le]=xn[he]=xn[fe]=xn[de]=xn[pe]=xn[ge]=xn[me]=xn[ve]=!0,xn[Ut]=xn[$t]=xn[se]=xn[Ht]=xn[ue]=xn[Vt]=xn[Gt]=xn[qt]=xn[Yt]=xn[Kt]=xn[Jt]=xn[te]=xn[ee]=xn[ne]=xn[oe]=!1;var En={};En[Ut]=En[$t]=En[se]=En[ue]=En[Ht]=En[Vt]=En[ce]=En[le]=En[he]=En[fe]=En[de]=En[Yt]=En[Kt]=En[Jt]=En[te]=En[ee]=En[ne]=En[re]=En[pe]=En[ge]=En[me]=En[ve]=!0,En[Gt]=En[qt]=En[oe]=!1;var An={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Sn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tn=parseFloat,kn=parseInt,On="object"==("undefined"===typeof t?"undefined":o(t))&&t&&t.Object===Object&&t,Fn="object"==("undefined"===typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,Pn=On||Fn||Function("return this")(),Ln="object"==o(e)&&e&&!e.nodeType&&e,Rn=Ln&&"object"==o(r)&&r&&!r.nodeType&&r,Dn=Rn&&Rn.exports===Ln,Bn=Dn&&On.process,In=function(){try{var t=Rn&&Rn.require&&Rn.require("util").types;return t||Bn&&Bn.binding&&Bn.binding("util")}catch(t){}}(),Nn=In&&In.isArrayBuffer,jn=In&&In.isDate,Un=In&&In.isMap,$n=In&&In.isRegExp,zn=In&&In.isSet,Hn=In&&In.isTypedArray,Vn=M("length"),Wn=T(An),Gn=T(Cn),qn=T(Sn),Xn=function t(e){function n(t){if(nu(t)&&!pf(t)&&!(t instanceof b)){if(t instanceof i)return t;if(dl.call(t,"__wrapped__"))return Qo(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function b(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bt,this.__views__=[]}function T(){var t=new b(this.__wrapped__);return t.__actions__=Ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ri(this.__views__),t}function Z(){if(this.__filtered__){var t=new b(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=pf(t),r=e<0,i=n?t.length:0,o=Ao(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,d=Hl(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return vi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){c+=e;for(var g=-1,m=t[c];++g<h;){var v=l[g],y=v.iteratee,b=v.type,w=y(m);if(b==Ft)m=w;else if(!w){if(b==Ot)continue t;break t}}p[f++]=m}return p}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function je(){this.__data__=Ql?Ql(null):{},this.size=0}function Ze(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Je(t){var e=this.__data__;if(Ql){var n=e[t];return n===ut?it:n}return dl.call(e,t)?e[t]:it}function Qe(t){var e=this.__data__;return Ql?e[t]!==it:dl.call(e,t)}function tn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ql&&e===it?ut:e,this}function en(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nn(){this.__data__=[],this.size=0}function rn(t){var e=this.__data__,n=Yn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ml.call(e,n,1),--this.size,!0)}function on(t){var e=this.__data__,n=Yn(e,t);return n<0?it:e[n][1]}function an(t){return Yn(this.__data__,t)>-1}function sn(t,e){var n=this.__data__,r=Yn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function cn(){this.size=0,this.__data__={hash:new nt,map:new(Yl||en),string:new nt}}function ln(t){var e=wo(this,t).delete(t);return this.size-=e?1:0,e}function hn(t){return wo(this,t).get(t)}function fn(t){return wo(this,t).has(t)}function dn(t,e){var n=wo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function mn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new un;++e<n;)this.add(t[e])}function vn(t){return this.__data__.set(t,ut),this}function yn(t){return this.__data__.has(t)}function bn(t){var e=this.__data__=new en(t);this.size=e.size}function An(){this.__data__=new en,this.size=0}function Cn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Sn(t){return this.__data__.get(t)}function Mn(t){return this.__data__.has(t)}function On(t,e){var n=this.__data__;if(n instanceof en){var r=n.__data__;if(!Yl||r.length<ot-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new un(r)}return n.set(t,e),this.size=n.size,this}function Fn(t,e){var n=pf(t),r=!n&&df(t),i=!n&&!r&&mf(t),o=!n&&!r&&!i&&_f(t),a=n||r||i||o,s=a?P(t.length,al):[],u=s.length;for(var c in t)!e&&!dl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Po(c,u))||s.push(c);return s}function Ln(t){var e=t.length;return e?t[Jr(0,e-1)]:it}function Rn(t,e){return Yo(Ri(t),er(e,0,t.length))}function Bn(t){return Yo(Ri(t))}function In(t,e,n){(n===it||zs(t[e],n))&&(n!==it||e in t)||Qn(t,e,n)}function Vn(t,e,n){var r=t[e];dl.call(t,e)&&zs(r,n)&&(n!==it||e in t)||Qn(t,e,n)}function Yn(t,e){for(var n=t.length;n--;)if(zs(t[n][0],e))return n;return-1}function Kn(t,e,n,r){return hh(t,function(t,i,o){e(r,t,n(t),o)}),r}function Zn(t,e){return t&&Di(e,Iu(e),t)}function Jn(t,e){return t&&Di(e,Nu(e),t)}function Qn(t,e,n){"__proto__"==e&&Fl?Fl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function tr(t,e){for(var n=-1,r=e.length,i=Qc(r),o=null==t;++n<r;)i[n]=o?it:Ru(t,e[n]);return i}function er(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function nr(t,e,n,r,i,o){var a,s=e&ht,c=e&ft,l=e&dt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!eu(t))return t;var h=pf(t);if(h){if(a=Mo(t),!s)return Ri(t,a)}else{var f=Eh(t),d=f==qt||f==Xt;if(mf(t))return Ai(t,s);if(f==Jt||f==Ut||d&&!i){if(a=c||d?{}:To(t),!s)return c?Ii(t,Jn(a,t)):Bi(t,Zn(a,t))}else{if(!En[f])return i?t:{};a=ko(t,f,s)}}o||(o=new bn);var p=o.get(t);if(p)return p;if(o.set(t,a),wf(t))return t.forEach(function(r){a.add(nr(r,e,n,r,t,o))}),a;if(yf(t))return t.forEach(function(r,i){a.set(i,nr(r,e,n,i,t,o))}),a;var g=l?c?mo:go:c?Nu:Iu,m=h?it:g(t);return u(m||t,function(r,i){m&&(i=r,r=t[i]),Vn(a,i,nr(r,e,n,i,t,o))}),a}function rr(t){var e=Iu(t);return function(n){return ir(n,t,e)}}function ir(t,e,n){var r=n.length;if(null==t)return!r;for(t=il(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function or(t,e,n){if("function"!=typeof t)throw new sl(st);return Sh(function(){t.apply(it,n)},e)}function ar(t,e,n,r){var i=-1,o=f,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=p(e,R(n))),r?(o=d,a=!1):e.length>=ot&&(o=B,a=!1,e=new mn(e));t:for(;++i<s;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h===h){for(var g=c;g--;)if(e[g]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}function sr(t,e){var n=!0;return hh(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ur(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!du(a):n(a,s)))var s=a,u=o}return u}function cr(t,e,n,r){var i=t.length;for(n=bu(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:bu(r),r<0&&(r+=i),r=n>r?0:wu(r);n<r;)t[n++]=e;return t}function lr(t,e){var n=[];return hh(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function hr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Fo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?hr(s,e-1,n,r,i):g(i,s):r||(i[i.length]=s)}return i}function fr(t,e){return t&&dh(t,e,Iu)}function dr(t,e){return t&&ph(t,e,Iu)}function pr(t,e){return h(e,function(e){return Js(t[e])})}function gr(t,e){e=xi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Ko(e[n++])];return n&&n==r?t:it}function mr(t,e,n){var r=e(t);return pf(t)?r:g(r,n(t))}function vr(t){return null==t?t===it?ie:Zt:Ol&&Ol in il(t)?Eo(t):Ho(t)}function yr(t,e){return t>e}function br(t,e){return null!=t&&dl.call(t,e)}function wr(t,e){return null!=t&&e in il(t)}function _r(t,e,n){return t>=Hl(e,n)&&t<zl(e,n)}function xr(t,e,n){for(var r=n?d:f,i=t[0].length,o=t.length,a=o,s=Qc(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=p(l,R(e))),u=Hl(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new mn(a&&l):it}l=t[0];var h=-1,g=s[0];t:for(;++h<i&&c.length<u;){var m=l[h],v=e?e(m):m;if(m=n||0!==m?m:0,!(g?B(g,v):r(c,v,n))){for(a=o;--a;){var y=s[a];if(!(y?B(y,v):r(t[a],v,n)))continue t}g&&g.push(v),c.push(m)}}return c}function Er(t,e,n,r){return fr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Ar(t,e,n){e=xi(e,t),t=Wo(t,e);var r=null==t?t:t[Ko(ya(e))];return null==r?it:a(r,t,n)}function Cr(t){return nu(t)&&vr(t)==Ut}function Sr(t){return nu(t)&&vr(t)==se}function Mr(t){return nu(t)&&vr(t)==Vt}function Tr(t,e,n,r,i){return t===e||(null==t||null==e||!nu(t)&&!nu(e)?t!==t&&e!==e:kr(t,e,n,r,Tr,i))}function kr(t,e,n,r,i,o){var a=pf(t),s=pf(e),u=a?$t:Eh(t),c=s?$t:Eh(e);u=u==Ut?Jt:u,c=c==Ut?Jt:c;var l=u==Jt,h=c==Jt,f=u==c;if(f&&mf(t)){if(!mf(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new bn),a||_f(t)?lo(t,e,n,r,i,o):ho(t,e,u,n,r,i,o);if(!(n&pt)){var d=l&&dl.call(t,"__wrapped__"),p=h&&dl.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return o||(o=new bn),i(g,m,n,r,o)}}return!!f&&(o||(o=new bn),fo(t,e,n,r,i,o))}function Or(t){return nu(t)&&Eh(t)==Yt}function Fr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=il(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(c===it&&!(u in t))return!1}else{var h=new bn;if(r)var f=r(c,l,u,t,e,h);if(!(f===it?Tr(l,c,pt|gt,r,h):f))return!1}}return!0}function Pr(t){return!(!eu(t)||Io(t))&&(Js(t)?bl:We).test(Zo(t))}function Lr(t){return nu(t)&&vr(t)==te}function Rr(t){return nu(t)&&Eh(t)==ee}function Dr(t){return nu(t)&&tu(t.length)&&!!xn[vr(t)]}function Br(t){return"function"==typeof t?t:null==t?Mc:"object"==("undefined"===typeof t?"undefined":o(t))?pf(t)?zr(t[0],t[1]):$r(t):Dc(t)}function Ir(t){if(!No(t))return $l(t);var e=[];for(var n in il(t))dl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Nr(t){if(!eu(t))return zo(t);var e=No(t),n=[];for(var r in t)("constructor"!=r||!e&&dl.call(t,r))&&n.push(r);return n}function jr(t,e){return t<e}function Ur(t,e){var n=-1,r=Hs(t)?Qc(t.length):[];return hh(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function $r(t){var e=_o(t);return 1==e.length&&e[0][2]?Uo(e[0][0],e[0][1]):function(n){return n===t||Fr(n,t,e)}}function zr(t,e){return Ro(t)&&jo(e)?Uo(Ko(t),e):function(n){var r=Ru(n,t);return r===it&&r===e?Bu(n,t):Tr(e,r,pt|gt)}}function Hr(t,e,n,r,i){t!==e&&dh(e,function(o,a){if(eu(o))i||(i=new bn),Vr(t,e,a,n,Hr,r,i);else{var s=r?r(X(t,a),o,a+"",t,e,i):it;s===it&&(s=o),In(t,a,s)}},Nu)}function Vr(t,e,n,r,i,o,a){var s=X(t,n),u=X(e,n),c=a.get(u);if(c)return void In(t,n,c);var l=o?o(s,u,n+"",t,e,a):it,h=l===it;if(h){var f=pf(u),d=!f&&mf(u),p=!f&&!d&&_f(u);l=u,f||d||p?pf(s)?l=s:Vs(s)?l=Ri(s):d?(h=!1,l=Ai(u,!0)):p?(h=!1,l=ki(u,!0)):l=[]:lu(u)||df(u)?(l=s,df(s)?l=xu(s):(!eu(s)||r&&Js(s))&&(l=To(u))):h=!1}h&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),In(t,n,l)}function Wr(t,e){var n=t.length;if(n)return e+=e<0?n:0,Po(e,n)?t[e]:it}function Gr(t,e,n){var r=-1;return e=p(e.length?e:[Mc],R(bo())),O(Ur(t,function(t,n,i){return{criteria:p(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return Fi(t,e,n)})}function qr(t,e){return Xr(t,e,function(e,n){return Bu(t,n)})}function Xr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=gr(t,a);n(s,a)&&ii(o,xi(a,t),s)}return o}function Yr(t){return function(e){return gr(e,t)}}function Kr(t,e,n,r){var i=r?A:E,o=-1,a=e.length,s=t;for(t===e&&(e=Ri(e)),n&&(s=p(t,R(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Ml.call(s,u,1),Ml.call(t,u,1);return t}function Zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Po(i)?Ml.call(t,i,1):pi(t,i)}}return t}function Jr(t,e){return t+Bl(Gl()*(e-t+1))}function Qr(t,e,n,r){for(var i=-1,o=zl(Dl((e-t)/(n||1)),0),a=Qc(o);o--;)a[r?o:++i]=t,t+=n;return a}function ti(t,e){var n="";if(!t||e<1||e>Lt)return n;do{e%2&&(n+=t),(e=Bl(e/2))&&(t+=t)}while(e);return n}function ei(t,e){return Mh(Vo(t,e,Mc),t+"")}function ni(t){return Ln(Ku(t))}function ri(t,e){var n=Ku(t);return Yo(n,er(e,0,n.length))}function ii(t,e,n,r){if(!eu(t))return t;e=xi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Ko(e[i]),c=n;if(i!=a){var l=s[u];c=r?r(l,u,s):it,c===it&&(c=eu(l)?l:Po(e[i+1])?[]:{})}Vn(s,u,c),s=s[u]}return t}function oi(t){return Yo(Ku(t))}function ai(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Qc(i);++r<i;)o[r]=t[r+e];return o}function si(t,e){var n;return hh(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ui(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Nt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!du(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ci(t,e,Mc,n)}function ci(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=du(e),c=e===it;i<o;){var l=Bl((i+o)/2),h=n(t[l]),f=h!==it,d=null===h,p=h===h,g=du(h);if(a)var m=r||p;else m=c?p&&(r||f):s?p&&f&&(r||!d):u?p&&f&&!d&&(r||!g):!d&&!g&&(r?h<=e:h<e);m?i=l+1:o=l}return Hl(o,It)}function li(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!zs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function hi(t){return"number"==typeof t?t:du(t)?Dt:+t}function fi(t){if("string"==typeof t)return t;if(pf(t))return p(t,fi)+"";if(du(t))return ch?ch.call(t):"";var e=t+"";return"0"==e&&1/t==-Pt?"-0":e}function di(t,e,n){var r=-1,i=f,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=d;else if(o>=ot){var c=e?null:bh(t);if(c)return Y(c);a=!1,i=B,u=new mn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h===h){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function pi(t,e){return e=xi(e,t),null==(t=Wo(t,e))||delete t[Ko(ya(e))]}function gi(t,e,n,r){return ii(t,e,n(gr(t,e)),r)}function mi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ai(t,r?0:o,r?o+1:i):ai(t,r?o+1:0,r?i:o)}function vi(t,e){var n=t;return n instanceof b&&(n=n.value()),m(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function yi(t,e,n){var r=t.length;if(r<2)return r?di(t[0]):[];for(var i=-1,o=Qc(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=ar(o[i]||a,t[s],e,n));return di(hr(o,1),e,n)}function bi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function wi(t){return Vs(t)?t:[]}function _i(t){return"function"==typeof t?t:Mc}function xi(t,e){return pf(t)?t:Ro(t,e)?[t]:Th(Au(t))}function Ei(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:ai(t,e,n)}function Ai(t,e){if(e)return t.slice();var n=t.length,r=El?El(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new xl(e).set(new xl(t)),e}function Si(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Mi(t){var e=new t.constructor(t.source,ze.exec(t));return e.lastIndex=t.lastIndex,e}function Ti(t){return uh?il(uh.call(t)):{}}function ki(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Oi(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=du(t),a=e!==it,s=null===e,u=e===e,c=du(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Fi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Oi(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}function Pi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=zl(o-a,0),l=Qc(u+c),h=!r;++s<u;)l[s]=e[s];for(;++i<a;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Li(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=zl(o-s,0),h=Qc(l+c),f=!r;++i<l;)h[i]=t[i];for(var d=i;++u<c;)h[d+u]=e[u];for(;++a<s;)(f||i<o)&&(h[d+n[a]]=t[i++]);return h}function Ri(t,e){var n=-1,r=t.length;for(e||(e=Qc(r));++n<r;)e[n]=t[n];return e}function Di(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):it;u===it&&(u=t[s]),i?Qn(n,s,u):Vn(n,s,u)}return n}function Bi(t,e){return Di(t,_h(t),e)}function Ii(t,e){return Di(t,xh(t),e)}function Ni(t,e){return function(n,r){var i=pf(n)?s:Kn,o=e?e():{};return i(n,t,bo(r,2),o)}}function ji(t){return ei(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&Lo(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=il(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Ui(t,e){return function(n,r){if(null==n)return n;if(!Hs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=il(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function $i(t){return function(e,n,r){for(var i=-1,o=il(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function zi(t,e,n){function r(){return(this&&this!==Pn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&mt,o=Wi(t);return r}function Hi(t){return function(e){e=Au(e);var n=z(e)?tt(e):it,r=n?n[0]:e.charAt(0),i=n?Ei(n,1).join(""):e.slice(1);return r[t]()+i}}function Vi(t){return function(e){return m(xc(nc(e).replace(pn,"")),t,"")}}function Wi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=lh(t.prototype),r=t.apply(n,e);return eu(r)?r:n}}function Gi(t,e,n){function r(){for(var o=arguments.length,s=Qc(o),u=o,c=yo(r);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:q(s,c);return(o-=l.length)<n?ro(t,e,Yi,r.placeholder,it,s,l,it,it,n-o):a(this&&this!==Pn&&this instanceof r?i:t,this,s)}var i=Wi(t);return r}function qi(t){return function(e,n,r){var i=il(e);if(!Hs(e)){var o=bo(n,3);e=Iu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function Xi(t){return po(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new sl(st);if(o&&!s&&"wrapper"==vo(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=vo(a),c="wrapper"==u?wh(a):it;s=c&&Bo(c[0])&&c[1]==(Et|bt|_t|At)&&!c[4].length&&1==c[9]?s[vo(c[0])].apply(s,c[3]):1==a.length&&Bo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&pf(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Yi(t,e,n,r,i,o,a,s,u,c){function l(){for(var v=arguments.length,y=Qc(v),b=v;b--;)y[b]=arguments[b];if(p)var w=yo(l),_=j(y,w);if(r&&(y=Pi(y,r,i,p)),o&&(y=Li(y,o,a,p)),v-=_,p&&v<c){var x=q(y,w);return ro(t,e,Yi,l.placeholder,n,y,x,s,u,c-v)}var E=f?n:this,A=d?E[t]:t;return v=y.length,s?y=Go(y,s):g&&v>1&&y.reverse(),h&&u<v&&(y.length=u),this&&this!==Pn&&this instanceof l&&(A=m||Wi(A)),A.apply(E,y)}var h=e&Et,f=e&mt,d=e&vt,p=e&(bt|wt),g=e&Ct,m=d?it:Wi(t);return l}function Ki(t,e){return function(n,r){return Er(n,t,e(r),{})}}function Zi(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=fi(n),r=fi(r)):(n=hi(n),r=hi(r)),i=t(n,r)}return i}}function Ji(t){return po(function(e){return e=p(e,R(bo())),ei(function(n){var r=this;return t(e,function(t){return a(t,r,n)})})})}function Qi(t,e){e=e===it?" ":fi(e);var n=e.length;if(n<2)return n?ti(e,t):e;var r=ti(e,Dl(t/Q(e)));return z(e)?Ei(tt(r),0,t).join(""):r.slice(0,t)}function to(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,l=r.length,h=Qc(l+u),f=this&&this!==Pn&&this instanceof i?s:t;++c<l;)h[c]=r[c];for(;u--;)h[c++]=arguments[++e];return a(f,o?n:this,h)}var o=e&mt,s=Wi(t);return i}function eo(t){return function(e,n,r){return r&&"number"!=typeof r&&Lo(e,n,r)&&(n=r=it),e=yu(e),n===it?(n=e,e=0):n=yu(n),r=r===it?e<n?1:-1:yu(r),Qr(e,n,r,t)}}function no(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_u(e),n=_u(n)),t(e,n)}}function ro(t,e,n,r,i,o,a,s,u,c){var l=e&bt,h=l?a:it,f=l?it:a,d=l?o:it,p=l?it:o;e|=l?_t:xt,(e&=~(l?xt:_t))&yt||(e&=~(mt|vt));var g=[t,e,i,d,h,p,f,s,u,c],m=n.apply(it,g);return Bo(t)&&Ch(m,g),m.placeholder=r,qo(m,t,e)}function io(t){var e=rl[t];return function(t,n){if(t=_u(t),n=null==n?0:Hl(bu(n),292)){var r=(Au(t)+"e").split("e");return r=(Au(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function oo(t){return function(e){var n=Eh(e);return n==Yt?W(e):n==ee?K(e):L(e,t(e))}}function ao(t,e,n,r,i,o,a,s){var u=e&vt;if(!u&&"function"!=typeof t)throw new sl(st);var c=r?r.length:0;if(c||(e&=~(_t|xt),r=i=it),a=a===it?a:zl(bu(a),0),s=s===it?s:bu(s),c-=i?i.length:0,e&xt){var l=r,h=i;r=i=it}var f=u?it:wh(t),d=[t,e,n,r,i,l,h,o,a,s];if(f&&$o(d,f),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=d[9]===it?u?0:t.length:zl(d[9]-c,0),!s&&e&(bt|wt)&&(e&=~(bt|wt)),e&&e!=mt)p=e==bt||e==wt?Gi(t,e,s):e!=_t&&e!=(mt|_t)||i.length?Yi.apply(it,d):to(t,e,n,r);else var p=zi(t,e,n);return qo((f?gh:Ch)(p,d),t,e)}function so(t,e,n,r){return t===it||zs(t,ll[n])&&!dl.call(r,n)?e:t}function uo(t,e,n,r,i,o){return eu(t)&&eu(e)&&(o.set(e,t),Hr(t,e,it,uo,o),o.delete(e)),t}function co(t){return lu(t)?it:t}function lo(t,e,n,r,i,o){var a=n&pt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=n&gt?new mn:it;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],p=e[l];if(r)var g=a?r(p,d,l,e,t,o):r(d,p,l,t,e,o);if(g!==it){if(g)continue;h=!1;break}if(f){if(!y(e,function(t,e){if(!B(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){h=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function ho(t,e,n,r,i,o,a){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case se:return!(t.byteLength!=e.byteLength||!o(new xl(t),new xl(e)));case Ht:case Vt:case Kt:return zs(+t,+e);case Gt:return t.name==e.name&&t.message==e.message;case te:case ne:return t==e+"";case Yt:var s=W;case ee:var u=r&pt;if(s||(s=Y),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=gt,a.set(t,e);var l=lo(s(t),s(e),r,i,o,a);return a.delete(t),l;case re:if(uh)return uh.call(t)==uh.call(e)}return!1}function fo(t,e,n,r,i,o){var a=n&pt,s=go(t),u=s.length;if(u!=go(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:dl.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){l=s[c];var p=t[l],g=e[l];if(r)var m=a?r(g,p,l,e,t,o):r(p,g,l,t,e,o);if(!(m===it?p===g||i(p,g,n,r,o):m)){f=!1;break}d||(d="constructor"==l)}if(f&&!d){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f}function po(t){return Mh(Vo(t,it,la),t+"")}function go(t){return mr(t,Iu,_h)}function mo(t){return mr(t,Nu,xh)}function vo(t){for(var e=t.name+"",n=eh[e],r=dl.call(eh,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function yo(t){return(dl.call(n,"placeholder")?n:t).placeholder}function bo(){var t=n.iteratee||Tc;return t=t===Tc?Br:t,arguments.length?t(arguments[0],arguments[1]):t}function wo(t,e){var n=t.__data__;return Do(e)?n["string"==typeof e?"string":"hash"]:n.map}function _o(t){for(var e=Iu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,jo(i)]}return e}function xo(t,e){var n=$(t,e);return Pr(n)?n:it}function Eo(t){var e=dl.call(t,Ol),n=t[Ol];try{t[Ol]=it;var r=!0}catch(t){}var i=ml.call(t);return r&&(e?t[Ol]=n:delete t[Ol]),i}function Ao(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Hl(e,t+a);break;case"takeRight":t=zl(t,e-a)}}return{start:t,end:e}}function Co(t){var e=t.match(Ie);return e?e[1].split(Ne):[]}function So(t,e,n){e=xi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Ko(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&tu(i)&&Po(a,i)&&(pf(t)||df(t))}function Mo(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&dl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function To(t){return"function"!=typeof t.constructor||No(t)?{}:lh(Al(t))}function ko(t,e,n){var r=t.constructor;switch(e){case se:return Ci(t);case Ht:case Vt:return new r(+t);case ue:return Si(t,n);case ce:case le:case he:case fe:case de:case pe:case ge:case me:case ve:return ki(t,n);case Yt:return new r;case Kt:case ne:return new r(t);case te:return Mi(t);case ee:return new r;case re:return Ti(t)}}function Oo(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Be,"{\n/* [wrapped with "+e+"] */\n")}function Fo(t){return pf(t)||df(t)||!!(Tl&&t&&t[Tl])}function Po(t,e){var n="undefined"===typeof t?"undefined":o(t);return!!(e=null==e?Lt:e)&&("number"==n||"symbol"!=n&&qe.test(t))&&t>-1&&t%1==0&&t<e}function Lo(t,e,n){if(!eu(n))return!1;var r="undefined"===typeof e?"undefined":o(e);return!!("number"==r?Hs(n)&&Po(e,n.length):"string"==r&&e in n)&&zs(n[e],t)}function Ro(t,e){if(pf(t))return!1;var n="undefined"===typeof t?"undefined":o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!du(t))||(ke.test(t)||!Te.test(t)||null!=e&&t in il(e))}function Do(t){var e="undefined"===typeof t?"undefined":o(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Bo(t){var e=vo(t),r=n[e];if("function"!=typeof r||!(e in b.prototype))return!1;if(t===r)return!0;var i=wh(r);return!!i&&t===i[0]}function Io(t){return!!gl&&gl in t}function No(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ll)}function jo(t){return t===t&&!eu(t)}function Uo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in il(n)))}}function $o(t,e){var n=t[1],r=e[1],i=n|r,o=i<(mt|vt|Et),a=r==Et&&n==bt||r==Et&&n==At&&t[7].length<=e[8]||r==(Et|At)&&e[7].length<=e[8]&&n==bt;if(!o&&!a)return t;r&mt&&(t[2]=e[2],i|=n&mt?0:yt);var s=e[3];if(s){var u=t[3];t[3]=u?Pi(u,s,e[4]):s,t[4]=u?q(t[3],lt):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Li(u,s,e[6]):s,t[6]=u?q(t[5],lt):e[6]),s=e[7],s&&(t[7]=s),r&Et&&(t[8]=null==t[8]?e[8]:Hl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function zo(t){var e=[];if(null!=t)for(var n in il(t))e.push(n);return e}function Ho(t){return ml.call(t)}function Vo(t,e,n){return e=zl(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=zl(r.length-e,0),s=Qc(o);++i<o;)s[i]=r[e+i];i=-1;for(var u=Qc(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),a(t,this,u)}}function Wo(t,e){return e.length<2?t:gr(t,ai(e,0,-1))}function Go(t,e){for(var n=t.length,r=Hl(e.length,n),i=Ri(t);r--;){var o=e[r];t[r]=Po(o,n)?i[o]:it}return t}function qo(t,e,n){var r=e+"";return Mh(t,Oo(r,Jo(Co(r),n)))}function Xo(t){var e=0,n=0;return function(){var r=Vl(),i=kt-(r-n);if(n=r,i>0){if(++e>=Tt)return arguments[0]}else e=0;return t.apply(it,arguments)}}function Yo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=Jr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Ko(t){if("string"==typeof t||du(t))return t;var e=t+"";return"0"==e&&1/t==-Pt?"-0":e}function Zo(t){if(null!=t){try{return fl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Jo(t,e){return u(jt,function(n){var r="_."+n[0];e&n[1]&&!f(t,r)&&t.push(r)}),t.sort()}function Qo(t){if(t instanceof b)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Ri(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ta(t,e,n){e=(n?Lo(t,e,n):e===it)?1:zl(bu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Qc(Dl(r/e));i<r;)a[o++]=ai(t,i,i+=e);return a}function ea(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function na(){var t=arguments.length;if(!t)return[];for(var e=Qc(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return g(pf(n)?Ri(n):[n],hr(e,1))}function ra(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bu(e),ai(t,e<0?0:e,r)):[]}function ia(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bu(e),e=r-e,ai(t,0,e<0?0:e)):[]}function oa(t,e){return t&&t.length?mi(t,bo(e,3),!0,!0):[]}function aa(t,e){return t&&t.length?mi(t,bo(e,3),!0):[]}function sa(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Lo(t,e,n)&&(n=0,r=i),cr(t,e,n,r)):[]}function ua(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bu(n);return i<0&&(i=zl(r+i,0)),x(t,bo(e,3),i)}function ca(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=bu(n),i=n<0?zl(r+i,0):Hl(i,r-1)),x(t,bo(e,3),i,!0)}function la(t){return(null==t?0:t.length)?hr(t,1):[]}function ha(t){return(null==t?0:t.length)?hr(t,Pt):[]}function fa(t,e){return(null==t?0:t.length)?(e=e===it?1:bu(e),hr(t,e)):[]}function da(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function pa(t){return t&&t.length?t[0]:it}function ga(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bu(n);return i<0&&(i=zl(r+i,0)),E(t,e,i)}function ma(t){return(null==t?0:t.length)?ai(t,0,-1):[]}function va(t,e){return null==t?"":Ul.call(t,e)}function ya(t){var e=null==t?0:t.length;return e?t[e-1]:it}function ba(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=bu(n),i=i<0?zl(r+i,0):Hl(i,r-1)),e===e?J(t,e,i):x(t,C,i,!0)}function wa(t,e){return t&&t.length?Wr(t,bu(e)):it}function _a(t,e){return t&&t.length&&e&&e.length?Kr(t,e):t}function xa(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,bo(n,2)):t}function Ea(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,it,n):t}function Aa(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=bo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Zr(t,i),n}function Ca(t){return null==t?t:ql.call(t)}function Sa(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Lo(t,e,n)?(e=0,n=r):(e=null==e?0:bu(e),n=n===it?r:bu(n)),ai(t,e,n)):[]}function Ma(t,e){return ui(t,e)}function Ta(t,e,n){return ci(t,e,bo(n,2))}function ka(t,e){var n=null==t?0:t.length;if(n){var r=ui(t,e);if(r<n&&zs(t[r],e))return r}return-1}function Oa(t,e){return ui(t,e,!0)}function Fa(t,e,n){return ci(t,e,bo(n,2),!0)}function Pa(t,e){if(null==t?0:t.length){var n=ui(t,e,!0)-1;if(zs(t[n],e))return n}return-1}function La(t){return t&&t.length?li(t):[]}function Ra(t,e){return t&&t.length?li(t,bo(e,2)):[]}function Da(t){var e=null==t?0:t.length;return e?ai(t,1,e):[]}function Ba(t,e,n){return t&&t.length?(e=n||e===it?1:bu(e),ai(t,0,e<0?0:e)):[]}function Ia(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bu(e),e=r-e,ai(t,e<0?0:e,r)):[]}function Na(t,e){return t&&t.length?mi(t,bo(e,3),!1,!0):[]}function ja(t,e){return t&&t.length?mi(t,bo(e,3)):[]}function Ua(t){return t&&t.length?di(t):[]}function $a(t,e){return t&&t.length?di(t,bo(e,2)):[]}function za(t,e){return e="function"==typeof e?e:it,t&&t.length?di(t,it,e):[]}function Ha(t){if(!t||!t.length)return[];var e=0;return t=h(t,function(t){if(Vs(t))return e=zl(t.length,e),!0}),P(e,function(e){return p(t,M(e))})}function Va(t,e){if(!t||!t.length)return[];var n=Ha(t);return null==e?n:p(n,function(t){return a(e,it,t)})}function Wa(t,e){return bi(t||[],e||[],Vn)}function Ga(t,e){return bi(t||[],e||[],ii)}function qa(t){var e=n(t);return e.__chain__=!0,e}function Xa(t,e){return e(t),t}function Ya(t,e){return e(t)}function Ka(){return qa(this)}function Za(){return new i(this.value(),this.__chain__)}function Ja(){this.__values__===it&&(this.__values__=vu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?it:this.__values__[this.__index__++]}}function Qa(){return this}function ts(t){for(var e,n=this;n instanceof r;){var i=Qo(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function es(){var t=this.__wrapped__;if(t instanceof b){var e=t;return this.__actions__.length&&(e=new b(this)),e=e.reverse(),e.__actions__.push({func:Ya,args:[Ca],thisArg:it}),new i(e,this.__chain__)}return this.thru(Ca)}function ns(){return vi(this.__wrapped__,this.__actions__)}function rs(t,e,n){var r=pf(t)?l:sr;return n&&Lo(t,e,n)&&(e=it),r(t,bo(e,3))}function is(t,e){return(pf(t)?h:lr)(t,bo(e,3))}function os(t,e){return hr(hs(t,e),1)}function as(t,e){return hr(hs(t,e),Pt)}function ss(t,e,n){return n=n===it?1:bu(n),hr(hs(t,e),n)}function us(t,e){return(pf(t)?u:hh)(t,bo(e,3))}function cs(t,e){return(pf(t)?c:fh)(t,bo(e,3))}function ls(t,e,n,r){t=Hs(t)?t:Ku(t),n=n&&!r?bu(n):0;var i=t.length;return n<0&&(n=zl(i+n,0)),fu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&E(t,e,n)>-1}function hs(t,e){return(pf(t)?p:Ur)(t,bo(e,3))}function fs(t,e,n,r){return null==t?[]:(pf(e)||(e=null==e?[]:[e]),n=r?it:n,pf(n)||(n=null==n?[]:[n]),Gr(t,e,n))}function ds(t,e,n){var r=pf(t)?m:k,i=arguments.length<3;return r(t,bo(e,4),n,i,hh)}function ps(t,e,n){var r=pf(t)?v:k,i=arguments.length<3;return r(t,bo(e,4),n,i,fh)}function gs(t,e){return(pf(t)?h:lr)(t,ks(bo(e,3)))}function ms(t){return(pf(t)?Ln:ni)(t)}function vs(t,e,n){return e=(n?Lo(t,e,n):e===it)?1:bu(e),(pf(t)?Rn:ri)(t,e)}function ys(t){return(pf(t)?Bn:oi)(t)}function bs(t){if(null==t)return 0;if(Hs(t))return fu(t)?Q(t):t.length;var e=Eh(t);return e==Yt||e==ee?t.size:Ir(t).length}function ws(t,e,n){var r=pf(t)?y:si;return n&&Lo(t,e,n)&&(e=it),r(t,bo(e,3))}function _s(t,e){if("function"!=typeof e)throw new sl(st);return t=bu(t),function(){if(--t<1)return e.apply(this,arguments)}}function xs(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,ao(t,Et,it,it,it,it,e)}function Es(t,e){var n;if("function"!=typeof e)throw new sl(st);return t=bu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function As(t,e,n){e=n?it:e;var r=ao(t,bt,it,it,it,it,it,e);return r.placeholder=As.placeholder,r}function Cs(t,e,n){e=n?it:e;var r=ao(t,wt,it,it,it,it,it,e);return r.placeholder=Cs.placeholder,r}function Ss(t,e,n){function r(e){var n=f,r=d;return f=d=it,y=e,g=t.apply(r,n)}function i(t){return y=t,m=Sh(s,e),b?r(t):g}function o(t){var n=t-v,r=t-y,i=e-n;return w?Hl(i,p-r):i}function a(t){var n=t-v,r=t-y;return v===it||n>=e||n<0||w&&r>=p}function s(){var t=ef();if(a(t))return u(t);m=Sh(s,o(t))}function u(t){return m=it,_&&f?r(t):(f=d=it,g)}function c(){m!==it&&yh(m),y=0,f=v=d=m=it}function l(){return m===it?g:u(ef())}function h(){var t=ef(),n=a(t);if(f=arguments,d=this,v=t,n){if(m===it)return i(v);if(w)return m=Sh(s,e),r(v)}return m===it&&(m=Sh(s,e)),g}var f,d,p,g,m,v,y=0,b=!1,w=!1,_=!0;if("function"!=typeof t)throw new sl(st);return e=_u(e)||0,eu(n)&&(b=!!n.leading,w="maxWait"in n,p=w?zl(_u(n.maxWait)||0,e):p,_="trailing"in n?!!n.trailing:_),h.cancel=c,h.flush=l,h}function Ms(t){return ao(t,Ct)}function Ts(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new sl(st);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ts.Cache||un),n}function ks(t){if("function"!=typeof t)throw new sl(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Os(t){return Es(2,t)}function Fs(t,e){if("function"!=typeof t)throw new sl(st);return e=e===it?e:bu(e),ei(t,e)}function Ps(t,e){if("function"!=typeof t)throw new sl(st);return e=null==e?0:zl(bu(e),0),ei(function(n){var r=n[e],i=Ei(n,0,e);return r&&g(i,r),a(t,this,i)})}function Ls(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new sl(st);return eu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ss(t,e,{leading:r,maxWait:e,trailing:i})}function Rs(t){return xs(t,1)}function Ds(t,e){return uf(_i(e),t)}function Bs(){if(!arguments.length)return[];var t=arguments[0];return pf(t)?t:[t]}function Is(t){return nr(t,dt)}function Ns(t,e){return e="function"==typeof e?e:it,nr(t,dt,e)}function js(t){return nr(t,ht|dt)}function Us(t,e){return e="function"==typeof e?e:it,nr(t,ht|dt,e)}function $s(t,e){return null==e||ir(t,e,Iu(e))}function zs(t,e){return t===e||t!==t&&e!==e}function Hs(t){return null!=t&&tu(t.length)&&!Js(t)}function Vs(t){return nu(t)&&Hs(t)}function Ws(t){return!0===t||!1===t||nu(t)&&vr(t)==Ht}function Gs(t){return nu(t)&&1===t.nodeType&&!lu(t)}function qs(t){if(null==t)return!0;if(Hs(t)&&(pf(t)||"string"==typeof t||"function"==typeof t.splice||mf(t)||_f(t)||df(t)))return!t.length;var e=Eh(t);if(e==Yt||e==ee)return!t.size;if(No(t))return!Ir(t).length;for(var n in t)if(dl.call(t,n))return!1;return!0}function Xs(t,e){return Tr(t,e)}function Ys(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Tr(t,e,it,n):!!r}function Ks(t){if(!nu(t))return!1;var e=vr(t);return e==Gt||e==Wt||"string"==typeof t.message&&"string"==typeof t.name&&!lu(t)}function Zs(t){return"number"==typeof t&&jl(t)}function Js(t){if(!eu(t))return!1;var e=vr(t);return e==qt||e==Xt||e==zt||e==Qt}function Qs(t){return"number"==typeof t&&t==bu(t)}function tu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Lt}function eu(t){var e="undefined"===typeof t?"undefined":o(t);return null!=t&&("object"==e||"function"==e)}function nu(t){return null!=t&&"object"==("undefined"===typeof t?"undefined":o(t))}function ru(t,e){return t===e||Fr(t,e,_o(e))}function iu(t,e,n){return n="function"==typeof n?n:it,Fr(t,e,_o(e),n)}function ou(t){return cu(t)&&t!=+t}function au(t){if(Ah(t))throw new el(at);return Pr(t)}function su(t){return null===t}function uu(t){return null==t}function cu(t){return"number"==typeof t||nu(t)&&vr(t)==Kt}function lu(t){if(!nu(t)||vr(t)!=Jt)return!1;var e=Al(t);if(null===e)return!0;var n=dl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&fl.call(n)==vl}function hu(t){return Qs(t)&&t>=-Lt&&t<=Lt}function fu(t){return"string"==typeof t||!pf(t)&&nu(t)&&vr(t)==ne}function du(t){return"symbol"==("undefined"===typeof t?"undefined":o(t))||nu(t)&&vr(t)==re}function pu(t){return t===it}function gu(t){return nu(t)&&Eh(t)==oe}function mu(t){return nu(t)&&vr(t)==ae}function vu(t){if(!t)return[];if(Hs(t))return fu(t)?tt(t):Ri(t);if(kl&&t[kl])return V(t[kl]());var e=Eh(t);return(e==Yt?W:e==ee?Y:Ku)(t)}function yu(t){if(!t)return 0===t?t:0;if((t=_u(t))===Pt||t===-Pt){return(t<0?-1:1)*Rt}return t===t?t:0}function bu(t){var e=yu(t),n=e%1;return e===e?n?e-n:e:0}function wu(t){return t?er(bu(t),0,Bt):0}function _u(t){if("number"==typeof t)return t;if(du(t))return Dt;if(eu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=eu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Le,"");var n=Ve.test(t);return n||Ge.test(t)?kn(t.slice(2),n?2:8):He.test(t)?Dt:+t}function xu(t){return Di(t,Nu(t))}function Eu(t){return t?er(bu(t),-Lt,Lt):0===t?t:0}function Au(t){return null==t?"":fi(t)}function Cu(t,e){var n=lh(t);return null==e?n:Zn(n,e)}function Su(t,e){return _(t,bo(e,3),fr)}function Mu(t,e){return _(t,bo(e,3),dr)}function Tu(t,e){return null==t?t:dh(t,bo(e,3),Nu)}function ku(t,e){return null==t?t:ph(t,bo(e,3),Nu)}function Ou(t,e){return t&&fr(t,bo(e,3))}function Fu(t,e){return t&&dr(t,bo(e,3))}function Pu(t){return null==t?[]:pr(t,Iu(t))}function Lu(t){return null==t?[]:pr(t,Nu(t))}function Ru(t,e,n){var r=null==t?it:gr(t,e);return r===it?n:r}function Du(t,e){return null!=t&&So(t,e,br)}function Bu(t,e){return null!=t&&So(t,e,wr)}function Iu(t){return Hs(t)?Fn(t):Ir(t)}function Nu(t){return Hs(t)?Fn(t,!0):Nr(t)}function ju(t,e){var n={};return e=bo(e,3),fr(t,function(t,r,i){Qn(n,e(t,r,i),t)}),n}function Uu(t,e){var n={};return e=bo(e,3),fr(t,function(t,r,i){Qn(n,r,e(t,r,i))}),n}function $u(t,e){return zu(t,ks(bo(e)))}function zu(t,e){if(null==t)return{};var n=p(mo(t),function(t){return[t]});return e=bo(e),Xr(t,n,function(t,n){return e(t,n[0])})}function Hu(t,e,n){e=xi(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[Ko(e[r])];o===it&&(r=i,o=n),t=Js(o)?o.call(t):o}return t}function Vu(t,e,n){return null==t?t:ii(t,e,n)}function Wu(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:ii(t,e,n,r)}function Gu(t,e,n){var r=pf(t),i=r||mf(t)||_f(t);if(e=bo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:eu(t)&&Js(o)?lh(Al(t)):{}}return(i?u:fr)(t,function(t,r,i){return e(n,t,r,i)}),n}function qu(t,e){return null==t||pi(t,e)}function Xu(t,e,n){return null==t?t:gi(t,e,_i(n))}function Yu(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:gi(t,e,_i(n),r)}function Ku(t){return null==t?[]:D(t,Iu(t))}function Zu(t){return null==t?[]:D(t,Nu(t))}function Ju(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=_u(n),n=n===n?n:0),e!==it&&(e=_u(e),e=e===e?e:0),er(_u(t),e,n)}function Qu(t,e,n){return e=yu(e),n===it?(n=e,e=0):n=yu(n),t=_u(t),_r(t,e,n)}function tc(t,e,n){if(n&&"boolean"!=typeof n&&Lo(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=yu(t),e===it?(e=t,t=0):e=yu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Gl();return Hl(t+i*(e-t+Tn("1e-"+((i+"").length-1))),e)}return Jr(t,e)}function ec(t){return qf(Au(t).toLowerCase())}function nc(t){return(t=Au(t))&&t.replace(Xe,Wn).replace(gn,"")}function rc(t,e,n){t=Au(t),e=fi(e);var r=t.length;n=n===it?r:er(bu(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function ic(t){return t=Au(t),t&&Ae.test(t)?t.replace(xe,Gn):t}function oc(t){return t=Au(t),t&&Pe.test(t)?t.replace(Fe,"\\$&"):t}function ac(t,e,n){t=Au(t),e=bu(e);var r=e?Q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Qi(Bl(i),n)+t+Qi(Dl(i),n)}function sc(t,e,n){t=Au(t),e=bu(e);var r=e?Q(t):0;return e&&r<e?t+Qi(e-r,n):t}function uc(t,e,n){t=Au(t),e=bu(e);var r=e?Q(t):0;return e&&r<e?Qi(e-r,n)+t:t}function cc(t,e,n){return n||null==e?e=0:e&&(e=+e),Wl(Au(t).replace(Re,""),e||0)}function lc(t,e,n){return e=(n?Lo(t,e,n):e===it)?1:bu(e),ti(Au(t),e)}function hc(){var t=arguments,e=Au(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fc(t,e,n){return n&&"number"!=typeof n&&Lo(t,e,n)&&(e=n=it),(n=n===it?Bt:n>>>0)?(t=Au(t),t&&("string"==typeof e||null!=e&&!bf(e))&&!(e=fi(e))&&z(t)?Ei(tt(t),0,n):t.split(e,n)):[]}function dc(t,e,n){return t=Au(t),n=null==n?0:er(bu(n),0,t.length),e=fi(e),t.slice(n,n+e.length)==e}function pc(t,e,r){var i=n.templateSettings;r&&Lo(t,e,r)&&(e=it),t=Au(t),e=Sf({},e,i,so);var o,a,s=Sf({},e.imports,i.imports,so),u=Iu(s),c=D(s,u),l=0,h=e.interpolate||Ye,f="__p += '",d=ol((e.escape||Ye).source+"|"+h.source+"|"+(h===Me?$e:Ye).source+"|"+(e.evaluate||Ye).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++_n+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(l,u).replace(Ke,U),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var g=e.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(ye,""):f).replace(be,"$1").replace(we,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Xf(function(){return nl(u,p+"return "+f).apply(it,c)});if(m.source=f,Ks(m))throw m;return m}function gc(t){return Au(t).toLowerCase()}function mc(t){return Au(t).toUpperCase()}function vc(t,e,n){if((t=Au(t))&&(n||e===it))return t.replace(Le,"");if(!t||!(e=fi(e)))return t;var r=tt(t),i=tt(e);return Ei(r,I(r,i),N(r,i)+1).join("")}function yc(t,e,n){if((t=Au(t))&&(n||e===it))return t.replace(De,"");if(!t||!(e=fi(e)))return t;var r=tt(t);return Ei(r,0,N(r,tt(e))+1).join("")}function bc(t,e,n){if((t=Au(t))&&(n||e===it))return t.replace(Re,"");if(!t||!(e=fi(e)))return t;var r=tt(t);return Ei(r,I(r,tt(e))).join("")}function wc(t,e){var n=St,r=Mt;if(eu(e)){var i="separator"in e?e.separator:i;n="length"in e?bu(e.length):n,r="omission"in e?fi(e.omission):r}t=Au(t);var o=t.length;if(z(t)){var a=tt(t);o=a.length}if(n>=o)return t;var s=n-Q(r);if(s<1)return r;var u=a?Ei(a,0,s).join(""):t.slice(0,s);if(i===it)return u+r;if(a&&(s+=u.length-s),bf(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=ol(i.source,Au(ze.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var h=c.index;u=u.slice(0,h===it?s:h)}}else if(t.indexOf(fi(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function _c(t){return t=Au(t),t&&Ee.test(t)?t.replace(_e,qn):t}function xc(t,e,n){return t=Au(t),e=n?it:e,e===it?H(t)?rt(t):w(t):t.match(e)||[]}function Ec(t){var e=null==t?0:t.length,n=bo();return t=e?p(t,function(t){if("function"!=typeof t[1])throw new sl(st);return[n(t[0]),t[1]]}):[],ei(function(n){for(var r=-1;++r<e;){var i=t[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function Ac(t){return rr(nr(t,ht))}function Cc(t){return function(){return t}}function Sc(t,e){return null==t||t!==t?e:t}function Mc(t){return t}function Tc(t){return Br("function"==typeof t?t:nr(t,ht))}function kc(t){return $r(nr(t,ht))}function Oc(t,e){return zr(t,nr(e,ht))}function Fc(t,e,n){var r=Iu(e),i=pr(e,r);null!=n||eu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=pr(e,Iu(e)));var o=!(eu(n)&&"chain"in n)||!!n.chain,a=Js(t);return u(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ri(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,g([this.value()],arguments))})}),t}function Pc(){return Pn._===this&&(Pn._=yl),this}function Lc(){}function Rc(t){return t=bu(t),ei(function(e){return Wr(e,t)})}function Dc(t){return Ro(t)?M(Ko(t)):Yr(t)}function Bc(t){return function(e){return null==t?it:gr(t,e)}}function Ic(){return[]}function Nc(){return!1}function jc(){return{}}function Uc(){return""}function $c(){return!0}function zc(t,e){if((t=bu(t))<1||t>Lt)return[];var n=Bt,r=Hl(t,Bt);e=bo(e),t-=Bt;for(var i=P(r,e);++n<t;)e(n);return i}function Hc(t){return pf(t)?p(t,Ko):du(t)?[t]:Ri(Th(Au(t)))}function Vc(t){var e=++pl;return Au(t)+e}function Wc(t){return t&&t.length?ur(t,Mc,yr):it}function Gc(t,e){return t&&t.length?ur(t,bo(e,2),yr):it}function qc(t){return S(t,Mc)}function Xc(t,e){return S(t,bo(e,2))}function Yc(t){return t&&t.length?ur(t,Mc,jr):it}function Kc(t,e){return t&&t.length?ur(t,bo(e,2),jr):it}function Zc(t){return t&&t.length?F(t,Mc):0}function Jc(t,e){return t&&t.length?F(t,bo(e,2)):0}e=null==e?Pn:Xn.defaults(Pn.Object(),e,Xn.pick(Pn,wn));var Qc=e.Array,tl=e.Date,el=e.Error,nl=e.Function,rl=e.Math,il=e.Object,ol=e.RegExp,al=e.String,sl=e.TypeError,ul=Qc.prototype,cl=nl.prototype,ll=il.prototype,hl=e["__core-js_shared__"],fl=cl.toString,dl=ll.hasOwnProperty,pl=0,gl=function(){var t=/[^.]+$/.exec(hl&&hl.keys&&hl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ml=ll.toString,vl=fl.call(il),yl=Pn._,bl=ol("^"+fl.call(dl).replace(Fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wl=Dn?e.Buffer:it,_l=e.Symbol,xl=e.Uint8Array,El=wl?wl.allocUnsafe:it,Al=G(il.getPrototypeOf,il),Cl=il.create,Sl=ll.propertyIsEnumerable,Ml=ul.splice,Tl=_l?_l.isConcatSpreadable:it,kl=_l?_l.iterator:it,Ol=_l?_l.toStringTag:it,Fl=function(){try{var t=xo(il,"defineProperty");return t({},"",{}),t}catch(t){}}(),Pl=e.clearTimeout!==Pn.clearTimeout&&e.clearTimeout,Ll=tl&&tl.now!==Pn.Date.now&&tl.now,Rl=e.setTimeout!==Pn.setTimeout&&e.setTimeout,Dl=rl.ceil,Bl=rl.floor,Il=il.getOwnPropertySymbols,Nl=wl?wl.isBuffer:it,jl=e.isFinite,Ul=ul.join,$l=G(il.keys,il),zl=rl.max,Hl=rl.min,Vl=tl.now,Wl=e.parseInt,Gl=rl.random,ql=ul.reverse,Xl=xo(e,"DataView"),Yl=xo(e,"Map"),Kl=xo(e,"Promise"),Zl=xo(e,"Set"),Jl=xo(e,"WeakMap"),Ql=xo(il,"create"),th=Jl&&new Jl,eh={},nh=Zo(Xl),rh=Zo(Yl),ih=Zo(Kl),oh=Zo(Zl),ah=Zo(Jl),sh=_l?_l.prototype:it,uh=sh?sh.valueOf:it,ch=sh?sh.toString:it,lh=function(){function t(){}return function(e){if(!eu(e))return{};if(Cl)return Cl(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Ce,evaluate:Se,interpolate:Me,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=lh(r.prototype),i.prototype.constructor=i,b.prototype=lh(r.prototype),b.prototype.constructor=b,nt.prototype.clear=je,nt.prototype.delete=Ze,nt.prototype.get=Je,nt.prototype.has=Qe,nt.prototype.set=tn,en.prototype.clear=nn,en.prototype.delete=rn,en.prototype.get=on,en.prototype.has=an,en.prototype.set=sn,un.prototype.clear=cn,un.prototype.delete=ln,un.prototype.get=hn,un.prototype.has=fn,un.prototype.set=dn,mn.prototype.add=mn.prototype.push=vn,mn.prototype.has=yn,bn.prototype.clear=An,bn.prototype.delete=Cn,bn.prototype.get=Sn,bn.prototype.has=Mn,bn.prototype.set=On;var hh=Ui(fr),fh=Ui(dr,!0),dh=$i(),ph=$i(!0),gh=th?function(t,e){return th.set(t,e),t}:Mc,mh=Fl?function(t,e){return Fl(t,"toString",{configurable:!0,enumerable:!1,value:Cc(e),writable:!0})}:Mc,vh=ei,yh=Pl||function(t){return Pn.clearTimeout(t)},bh=Zl&&1/Y(new Zl([,-0]))[1]==Pt?function(t){return new Zl(t)}:Lc,wh=th?function(t){return th.get(t)}:Lc,_h=Il?function(t){return null==t?[]:(t=il(t),h(Il(t),function(e){return Sl.call(t,e)}))}:Ic,xh=Il?function(t){for(var e=[];t;)g(e,_h(t)),t=Al(t);return e}:Ic,Eh=vr;(Xl&&Eh(new Xl(new ArrayBuffer(1)))!=ue||Yl&&Eh(new Yl)!=Yt||Kl&&"[object Promise]"!=Eh(Kl.resolve())||Zl&&Eh(new Zl)!=ee||Jl&&Eh(new Jl)!=oe)&&(Eh=function(t){var e=vr(t),n=e==Jt?t.constructor:it,r=n?Zo(n):"";if(r)switch(r){case nh:return ue;case rh:return Yt;case ih:return"[object Promise]";case oh:return ee;case ah:return oe}return e});var Ah=hl?Js:Nc,Ch=Xo(gh),Sh=Rl||function(t,e){return Pn.setTimeout(t,e)},Mh=Xo(mh),Th=function(t){var e=Ts(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Oe,function(t,n,r,i){e.push(r?i.replace(Ue,"$1"):n||t)}),e}),kh=ei(function(t,e){return Vs(t)?ar(t,hr(e,1,Vs,!0)):[]}),Oh=ei(function(t,e){var n=ya(e);return Vs(n)&&(n=it),Vs(t)?ar(t,hr(e,1,Vs,!0),bo(n,2)):[]}),Fh=ei(function(t,e){var n=ya(e);return Vs(n)&&(n=it),Vs(t)?ar(t,hr(e,1,Vs,!0),it,n):[]}),Ph=ei(function(t){var e=p(t,wi);return e.length&&e[0]===t[0]?xr(e):[]}),Lh=ei(function(t){var e=ya(t),n=p(t,wi);return e===ya(n)?e=it:n.pop(),n.length&&n[0]===t[0]?xr(n,bo(e,2)):[]}),Rh=ei(function(t){var e=ya(t),n=p(t,wi);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?xr(n,it,e):[]}),Dh=ei(_a),Bh=po(function(t,e){var n=null==t?0:t.length,r=tr(t,e);return Zr(t,p(e,function(t){return Po(t,n)?+t:t}).sort(Oi)),r}),Ih=ei(function(t){return di(hr(t,1,Vs,!0))}),Nh=ei(function(t){var e=ya(t);return Vs(e)&&(e=it),di(hr(t,1,Vs,!0),bo(e,2))}),jh=ei(function(t){var e=ya(t);return e="function"==typeof e?e:it,di(hr(t,1,Vs,!0),it,e)}),Uh=ei(function(t,e){return Vs(t)?ar(t,e):[]}),$h=ei(function(t){return yi(h(t,Vs))}),zh=ei(function(t){var e=ya(t);return Vs(e)&&(e=it),yi(h(t,Vs),bo(e,2))}),Hh=ei(function(t){var e=ya(t);return e="function"==typeof e?e:it,yi(h(t,Vs),it,e)}),Vh=ei(Ha),Wh=ei(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Va(t,n)}),Gh=po(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return tr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof b&&Po(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Ya,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),qh=Ni(function(t,e,n){dl.call(t,n)?++t[n]:Qn(t,n,1)}),Xh=qi(ua),Yh=qi(ca),Kh=Ni(function(t,e,n){dl.call(t,n)?t[n].push(e):Qn(t,n,[e])}),Zh=ei(function(t,e,n){var r=-1,i="function"==typeof e,o=Hs(t)?Qc(t.length):[];return hh(t,function(t){o[++r]=i?a(e,t,n):Ar(t,e,n)}),o}),Jh=Ni(function(t,e,n){Qn(t,n,e)}),Qh=Ni(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),tf=ei(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Lo(t,e[0],e[1])?e=[]:n>2&&Lo(e[0],e[1],e[2])&&(e=[e[0]]),Gr(t,hr(e,1),[])}),ef=Ll||function(){return Pn.Date.now()},nf=ei(function(t,e,n){var r=mt;if(n.length){var i=q(n,yo(nf));r|=_t}return ao(t,r,e,n,i)}),rf=ei(function(t,e,n){var r=mt|vt;if(n.length){var i=q(n,yo(rf));r|=_t}return ao(e,r,t,n,i)}),of=ei(function(t,e){return or(t,1,e)}),af=ei(function(t,e,n){return or(t,_u(e)||0,n)});Ts.Cache=un;var sf=vh(function(t,e){e=1==e.length&&pf(e[0])?p(e[0],R(bo())):p(hr(e,1),R(bo()));var n=e.length;return ei(function(r){for(var i=-1,o=Hl(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return a(t,this,r)})}),uf=ei(function(t,e){var n=q(e,yo(uf));return ao(t,_t,it,e,n)}),cf=ei(function(t,e){var n=q(e,yo(cf));return ao(t,xt,it,e,n)}),lf=po(function(t,e){return ao(t,At,it,it,it,e)}),hf=no(yr),ff=no(function(t,e){return t>=e}),df=Cr(function(){return arguments}())?Cr:function(t){return nu(t)&&dl.call(t,"callee")&&!Sl.call(t,"callee")},pf=Qc.isArray,gf=Nn?R(Nn):Sr,mf=Nl||Nc,vf=jn?R(jn):Mr,yf=Un?R(Un):Or,bf=$n?R($n):Lr,wf=zn?R(zn):Rr,_f=Hn?R(Hn):Dr,xf=no(jr),Ef=no(function(t,e){return t<=e}),Af=ji(function(t,e){if(No(e)||Hs(e))return void Di(e,Iu(e),t);for(var n in e)dl.call(e,n)&&Vn(t,n,e[n])}),Cf=ji(function(t,e){Di(e,Nu(e),t)}),Sf=ji(function(t,e,n,r){Di(e,Nu(e),t,r)}),Mf=ji(function(t,e,n,r){Di(e,Iu(e),t,r)}),Tf=po(tr),kf=ei(function(t,e){t=il(t);var n=-1,r=e.length,i=r>2?e[2]:it;for(i&&Lo(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Nu(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===it||zs(l,ll[c])&&!dl.call(t,c))&&(t[c]=o[c])}return t}),Of=ei(function(t){return t.push(it,uo),a(Df,it,t)}),Ff=Ki(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ml.call(e)),t[e]=n},Cc(Mc)),Pf=Ki(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ml.call(e)),dl.call(t,e)?t[e].push(n):t[e]=[n]},bo),Lf=ei(Ar),Rf=ji(function(t,e,n){Hr(t,e,n)}),Df=ji(function(t,e,n,r){Hr(t,e,n,r)}),Bf=po(function(t,e){var n={};if(null==t)return n;var r=!1;e=p(e,function(e){return e=xi(e,t),r||(r=e.length>1),e}),Di(t,mo(t),n),r&&(n=nr(n,ht|ft|dt,co));for(var i=e.length;i--;)pi(n,e[i]);return n}),If=po(function(t,e){return null==t?{}:qr(t,e)}),Nf=oo(Iu),jf=oo(Nu),Uf=Vi(function(t,e,n){return e=e.toLowerCase(),t+(n?ec(e):e)}),$f=Vi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),zf=Vi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Hf=Hi("toLowerCase"),Vf=Vi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Wf=Vi(function(t,e,n){return t+(n?" ":"")+qf(e)}),Gf=Vi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),qf=Hi("toUpperCase"),Xf=ei(function(t,e){try{return a(t,it,e)}catch(t){return Ks(t)?t:new el(t)}}),Yf=po(function(t,e){return u(e,function(e){e=Ko(e),Qn(t,e,nf(t[e],t))}),t}),Kf=Xi(),Zf=Xi(!0),Jf=ei(function(t,e){return function(n){return Ar(n,t,e)}}),Qf=ei(function(t,e){return function(n){return Ar(t,n,e)}}),td=Ji(p),ed=Ji(l),nd=Ji(y),rd=eo(),id=eo(!0),od=Zi(function(t,e){return t+e},0),ad=io("ceil"),sd=Zi(function(t,e){return t/e},1),ud=io("floor"),cd=Zi(function(t,e){return t*e},1),ld=io("round"),hd=Zi(function(t,e){return t-e},0);return n.after=_s,n.ary=xs,n.assign=Af,n.assignIn=Cf,n.assignInWith=Sf,n.assignWith=Mf,n.at=Tf,n.before=Es,n.bind=nf,n.bindAll=Yf,n.bindKey=rf,n.castArray=Bs,n.chain=qa,n.chunk=ta,n.compact=ea,n.concat=na,n.cond=Ec,n.conforms=Ac,n.constant=Cc,n.countBy=qh,n.create=Cu,n.curry=As,n.curryRight=Cs,n.debounce=Ss,n.defaults=kf,n.defaultsDeep=Of,n.defer=of,n.delay=af,n.difference=kh,n.differenceBy=Oh,n.differenceWith=Fh,n.drop=ra,n.dropRight=ia,n.dropRightWhile=oa,n.dropWhile=aa,n.fill=sa,n.filter=is,n.flatMap=os,n.flatMapDeep=as,n.flatMapDepth=ss,n.flatten=la,n.flattenDeep=ha,n.flattenDepth=fa,n.flip=Ms,n.flow=Kf,n.flowRight=Zf,n.fromPairs=da,n.functions=Pu,n.functionsIn=Lu,n.groupBy=Kh,n.initial=ma,n.intersection=Ph,n.intersectionBy=Lh,n.intersectionWith=Rh,n.invert=Ff,n.invertBy=Pf,n.invokeMap=Zh,n.iteratee=Tc,n.keyBy=Jh,n.keys=Iu,n.keysIn=Nu,n.map=hs,n.mapKeys=ju,n.mapValues=Uu,n.matches=kc,n.matchesProperty=Oc,n.memoize=Ts,n.merge=Rf,n.mergeWith=Df,n.method=Jf,n.methodOf=Qf,n.mixin=Fc,n.negate=ks,n.nthArg=Rc,n.omit=Bf,n.omitBy=$u,n.once=Os,n.orderBy=fs,n.over=td,n.overArgs=sf,n.overEvery=ed,n.overSome=nd,n.partial=uf,n.partialRight=cf,n.partition=Qh,n.pick=If,n.pickBy=zu,n.property=Dc,n.propertyOf=Bc,n.pull=Dh,n.pullAll=_a,n.pullAllBy=xa,n.pullAllWith=Ea,n.pullAt=Bh,n.range=rd,n.rangeRight=id,n.rearg=lf,n.reject=gs,n.remove=Aa,n.rest=Fs,n.reverse=Ca,n.sampleSize=vs,n.set=Vu,n.setWith=Wu,n.shuffle=ys,n.slice=Sa,n.sortBy=tf,n.sortedUniq=La,n.sortedUniqBy=Ra,n.split=fc,n.spread=Ps,n.tail=Da,n.take=Ba,n.takeRight=Ia,n.takeRightWhile=Na,n.takeWhile=ja,n.tap=Xa,n.throttle=Ls,n.thru=Ya,n.toArray=vu,n.toPairs=Nf,n.toPairsIn=jf,n.toPath=Hc,n.toPlainObject=xu,n.transform=Gu,n.unary=Rs,n.union=Ih,n.unionBy=Nh,n.unionWith=jh,n.uniq=Ua,n.uniqBy=$a,n.uniqWith=za,n.unset=qu,n.unzip=Ha,n.unzipWith=Va,n.update=Xu,n.updateWith=Yu,n.values=Ku,n.valuesIn=Zu,n.without=Uh,n.words=xc,n.wrap=Ds,n.xor=$h,n.xorBy=zh,n.xorWith=Hh,n.zip=Vh,n.zipObject=Wa,n.zipObjectDeep=Ga,n.zipWith=Wh,n.entries=Nf,n.entriesIn=jf,n.extend=Cf,n.extendWith=Sf,Fc(n,n),n.add=od,n.attempt=Xf,n.camelCase=Uf,n.capitalize=ec,n.ceil=ad,n.clamp=Ju,n.clone=Is,n.cloneDeep=js,n.cloneDeepWith=Us,n.cloneWith=Ns,n.conformsTo=$s,n.deburr=nc,n.defaultTo=Sc,n.divide=sd,n.endsWith=rc,n.eq=zs,n.escape=ic,n.escapeRegExp=oc,n.every=rs,n.find=Xh,n.findIndex=ua,n.findKey=Su,n.findLast=Yh,n.findLastIndex=ca,n.findLastKey=Mu,n.floor=ud,n.forEach=us,n.forEachRight=cs,n.forIn=Tu,n.forInRight=ku,n.forOwn=Ou,n.forOwnRight=Fu,n.get=Ru,n.gt=hf,n.gte=ff,n.has=Du,n.hasIn=Bu,n.head=pa,n.identity=Mc,n.includes=ls,n.indexOf=ga,n.inRange=Qu,n.invoke=Lf,n.isArguments=df,n.isArray=pf,n.isArrayBuffer=gf,n.isArrayLike=Hs,n.isArrayLikeObject=Vs,n.isBoolean=Ws,n.isBuffer=mf,n.isDate=vf,n.isElement=Gs,n.isEmpty=qs,n.isEqual=Xs,n.isEqualWith=Ys,n.isError=Ks,n.isFinite=Zs,n.isFunction=Js,n.isInteger=Qs,n.isLength=tu,n.isMap=yf,n.isMatch=ru,n.isMatchWith=iu,n.isNaN=ou,n.isNative=au,n.isNil=uu,n.isNull=su,n.isNumber=cu,n.isObject=eu,n.isObjectLike=nu,n.isPlainObject=lu,n.isRegExp=bf,n.isSafeInteger=hu,n.isSet=wf,n.isString=fu,n.isSymbol=du,n.isTypedArray=_f,n.isUndefined=pu,n.isWeakMap=gu,n.isWeakSet=mu,n.join=va,n.kebabCase=$f,n.last=ya,n.lastIndexOf=ba,n.lowerCase=zf,n.lowerFirst=Hf,n.lt=xf,n.lte=Ef,n.max=Wc,n.maxBy=Gc,n.mean=qc,n.meanBy=Xc,n.min=Yc,n.minBy=Kc,n.stubArray=Ic,n.stubFalse=Nc,n.stubObject=jc,n.stubString=Uc,n.stubTrue=$c,n.multiply=cd,n.nth=wa,n.noConflict=Pc,n.noop=Lc,n.now=ef,n.pad=ac,n.padEnd=sc,n.padStart=uc,n.parseInt=cc,n.random=tc,n.reduce=ds,n.reduceRight=ps,n.repeat=lc,n.replace=hc,n.result=Hu,n.round=ld,n.runInContext=t,n.sample=ms,n.size=bs,n.snakeCase=Vf,n.some=ws,n.sortedIndex=Ma,n.sortedIndexBy=Ta,n.sortedIndexOf=ka,n.sortedLastIndex=Oa,n.sortedLastIndexBy=Fa,n.sortedLastIndexOf=Pa,n.startCase=Wf,n.startsWith=dc,n.subtract=hd,n.sum=Zc,n.sumBy=Jc,n.template=pc,n.times=zc,n.toFinite=yu,n.toInteger=bu,n.toLength=wu,n.toLower=gc,n.toNumber=_u,n.toSafeInteger=Eu,n.toString=Au,n.toUpper=mc,n.trim=vc,n.trimEnd=yc,n.trimStart=bc,n.truncate=wc,n.unescape=_c,n.uniqueId=Vc,n.upperCase=Gf,n.upperFirst=qf,n.each=us,n.eachRight=cs,n.first=pa,Fc(n,function(){var t={};return fr(n,function(e,r){dl.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.10",u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),u(["drop","take"],function(t,e){b.prototype[t]=function(n){n=n===it?1:zl(bu(n),0);var r=this.__filtered__&&!e?new b(this):this.clone();return r.__filtered__?r.__takeCount__=Hl(n,r.__takeCount__):r.__views__.push({size:Hl(n,Bt),type:t+(r.__dir__<0?"Right":"")}),r},b.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),u(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Ot||3==n;b.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:bo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),u(["head","last"],function(t,e){var n="take"+(e?"Right":"");b.prototype[t]=function(){return this[n](1).value()[0]}}),u(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");b.prototype[t]=function(){return this.__filtered__?new b(this):this[n](1)}}),b.prototype.compact=function(){return this.filter(Mc)},b.prototype.find=function(t){return this.filter(t).head()},b.prototype.findLast=function(t){return this.reverse().find(t)},b.prototype.invokeMap=ei(function(t,e){return"function"==typeof t?new b(this):this.map(function(n){return Ar(n,t,e)})}),b.prototype.reject=function(t){return this.filter(ks(bo(t)))},b.prototype.slice=function(t,e){t=bu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new b(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=bu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},b.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},b.prototype.toArray=function(){return this.take(Bt)},fr(b.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof b,l=u[0],h=c||pf(e),f=function(t){var e=a.apply(n,g([t],u));return o&&d?e[0]:e};h&&r&&"function"==typeof l&&1!=l.length&&(c=h=!1);var d=this.__chain__,p=!!this.__actions__.length,m=s&&!d,v=c&&!p;if(!s&&h){e=v?e:new b(this);var y=t.apply(e,u);return y.__actions__.push({func:Ya,args:[f],thisArg:it}),new i(y,d)}return m&&v?t.apply(this,u):(y=this.thru(f),m?o?y.value()[0]:y.value():y)})}),u(["pop","push","shift","sort","splice","unshift"],function(t){var e=ul[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(pf(n)?n:[],t)}return this[r](function(n){return e.apply(pf(n)?n:[],t)})}}),fr(b.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(eh[i]||(eh[i]=[])).push({name:e,func:r})}}),eh[Yi(it,vt).name]=[{name:"wrapper",func:it}],b.prototype.clone=T,b.prototype.reverse=Z,b.prototype.value=et,n.prototype.at=Gh,n.prototype.chain=Ka,n.prototype.commit=Za,n.prototype.next=Ja,n.prototype.plant=ts,n.prototype.reverse=es,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ns,n.prototype.first=n.prototype.head,kl&&(n.prototype[kl]=Qa),n}();"object"==o(n(23))&&n(23)?(Pn._=Xn,(i=function(){return Xn}.call(e,n,e,r))!==it&&(r.exports=i)):Rn?((Rn.exports=Xn)._=Xn,Ln._=Xn):Pn._=Xn}).call(this)}).call(e,n(6),n(42)(t))},function(t,e,n){"use strict";var r=n(18);e.a=r.a},function(t,e,n){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t=function(){return this}();t||"undefined"==typeof window||(t=window);var e=function t(e,n,r){if("string"!==typeof e)return void(t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace()));2==arguments.length&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)};e.modules={},e.payloads={};var n=function(t,e,n){if("string"===typeof e){var i=o(t,e);if(void 0!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(e)){for(var a=[],s=0,u=e.length;s<u;++s){var c=o(t,e[s]);if(void 0==c&&r.original)return;a.push(c)}return n&&n.apply(null,a)||!0}},r=function t(e,r){var i=n("",e,r);return void 0==i&&t.original?t.original.apply(this,arguments):i},i=function t(e,n){if(-1!==n.indexOf("!")){var r=n.split("!");return t(e,r[0])+"!"+t(e,r[1])}if("."==n.charAt(0)){var i=e.split("/").slice(0,-1).join("/");for(n=i+"/"+n;-1!==n.indexOf(".")&&o!=n;){var o=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},o=function(t,r){r=i(t,r);var o=e.modules[r];if(!o){if("function"===typeof(o=e.payloads[r])){var a={},s={id:r,uri:"",exports:a,packaged:!0};a=o(function(t,e){return n(r,t,e)},a,s)||s.exports,e.modules[r]=a,delete e.payloads[r]}o=e.modules[r]=a||o}return o};!function(n){var i=t;n&&(t[n]||(t[n]={}),i=t[n]),i.define&&i.define.packaged||(e.original=i.define,i.define=e,i.define.packaged=!0),i.acequire&&i.acequire.packaged||(r.original=i.acequire,i.acequire=r,i.acequire.packaged=!0)}("ace")}(),ace.define("ace/lib/regexp",["require","exports","module"],function(t,e,n){"use strict";function r(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function i(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n);for(var r=n||0;r<t.length;r++)if(t[r]===e)return r;return-1}var o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},a=void 0===o.exec.call(/()??/,"")[1],s=function(){var t=/^/g;return o.test.call(t,""),!t.lastIndex}();s&&a||(RegExp.prototype.exec=function(t){var e,n,u=o.exec.apply(this,arguments);if("string"==typeof t&&u){if(!a&&u.length>1&&i(u,"")>-1&&(n=RegExp(this.source,o.replace.call(r(this),"g","")),o.replace.call(t.slice(u.index),n,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(u[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var c=1;c<u.length;c++)(e=this._xregexp.captureNames[c-1])&&(u[e]=u[c]);!s&&this.global&&!u[0].length&&this.lastIndex>u.index&&this.lastIndex--}return u},s||(RegExp.prototype.test=function(t){var e=o.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(t,e,n){function i(){}function o(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(t){}}function a(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=g.call(arguments,1),r=function r(){if(this instanceof r){var i=e.apply(this,n.concat(g.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(g.call(arguments)))};return e.prototype&&(i.prototype=e.prototype,r.prototype=new i,i.prototype=null),r});var s,u,c,l,h,f=Function.prototype.call,d=Array.prototype,p=Object.prototype,g=d.slice,m=f.bind(p.toString),v=f.bind(p.hasOwnProperty);if((h=v(p,"__defineGetter__"))&&(s=f.bind(p.__defineGetter__),u=f.bind(p.__defineSetter__),c=f.bind(p.__lookupGetter__),l=f.bind(p.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,n=[];if(n.splice.apply(n,t(20)),n.splice.apply(n,t(26)),e=n.length,n.splice(5,0,"XXX"),n.length,e+1==n.length)return!0}()){var y=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?y.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(g.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var n=this.length;t>0?t>n&&(t=n):void 0==t?t=0:t<0&&(t=Math.max(n+t,0)),t+e<n||(e=n-t);var r=this.slice(t,t+e),i=g.call(arguments,2),o=i.length;if(t===n)o&&this.push.apply(this,i);else{var a=Math.min(e,n-t),s=t+a,u=s+o-a,c=n-s,l=n-a;if(u<s)for(var h=0;h<c;++h)this[u+h]=this[s+h];else if(u>s)for(h=c;h--;)this[u+h]=this[s+h];if(o&&t===l)this.length=l,this.push.apply(this,i);else for(this.length=l+o,h=0;h<o;++h)this[t+h]=i[h]}return r};Array.isArray||(Array.isArray=function(t){return"[object Array]"==m(t)});var b=Object("a"),w="a"!=b[0]||!(0 in b);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if("[object Function]"!=m(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,r=n.length>>>0,i=Array(r),o=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var a=0;a<r;a++)a in n&&(i[a]=t.call(o,n[a],a,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=P(this),r=w&&"[object String]"==m(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var s=0;s<i;s++)s in r&&(e=r[s],t.call(a,e,s,n)&&o.push(e));return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var o=0;o<r;o++)if(o in n&&!t.call(i,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");for(var o=0;o<r;o++)if(o in n&&t.call(i,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;o<r;o++)o in n&&(i=t.call(void 0,i,n[o],o,e));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=P(this),n=w&&"[object String]"==m(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=m(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(i=t.call(void 0,i,n[o],o,e))}while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=w&&"[object String]"==m(this)?this.split(""):P(this),n=e.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=a(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=w&&"[object String]"==m(this)?this.split(""):P(this),n=e.length>>>0;if(!n)return-1;var r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in e&&t===e[r])return r;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:p)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(t,e){if("object"!=("undefined"===typeof t?"undefined":r(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(v(t,e)){var n,i,o;if(n={enumerable:!0,configurable:!0},h){var a=t.__proto__;t.__proto__=p;var i=c(t,e),o=l(t,e);if(t.__proto__=a,i||o)return i&&(n.get=i),o&&(n.set=o),n}return n.value=t[e],n}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var _;_=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var n;if(null===t)n=_();else{if("object"!=("undefined"===typeof t?"undefined":r(t)))throw new TypeError("typeof prototype["+("undefined"===typeof t?"undefined":r(t))+"] != 'object'");var i=function(){};i.prototype=t,n=new i,n.__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}}if(Object.defineProperty){var x=o({}),E="undefined"==typeof document||o(document.createElement("div"));if(!x||!E)var A=Object.defineProperty}if(!Object.defineProperty||A){Object.defineProperty=function(t,e,n){if("object"!=("undefined"===typeof t?"undefined":r(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=("undefined"===typeof n?"undefined":r(n))&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(A)try{return A.call(Object,t,e,n)}catch(t){}if(v(n,"value"))if(h&&(c(t,e)||l(t,e))){var i=t.__proto__;t.__proto__=p,delete t[e],t[e]=n.value,t.__proto__=i}else t[e]=n.value;else{if(!h)throw new TypeError("getters & setters can not be defined on this javascript engine");v(n,"get")&&s(t,e,n.get),v(n,"set")&&u(t,e,n.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var n in e)v(e,n)&&Object.defineProperty(t,n,e[n]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(t){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";v(t,e);)e+="?";t[e]=!0;var n=v(t,e);return delete t[e],n}),!Object.keys){var C=!0,S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=S.length;for(var T in{toString:null})C=!1;Object.keys=function(t){if("object"!=("undefined"===typeof t?"undefined":r(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e=[];for(var n in t)v(t,n)&&e.push(n);if(C)for(var i=0,o=M;i<o;i++){var a=S[i];v(t,a)&&e.push(a)}return e}}Date.now||(Date.now=function(){return(new Date).getTime()});var k="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||k.trim()){k="["+k+"]";var O=new RegExp("^"+k+k+"*"),F=new RegExp(k+k+"*$");String.prototype.trim=function(){return String(this).replace(O,"").replace(F,"")}}var P=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(t,e,n){"use strict";t("./regexp"),t("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(t,e,n){"use strict";if(e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var r=n.indexOf(e);if(-1==r)break;n.splice(r,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),r=!0;;){var i=n.indexOf(e);if(-1==i)break;r=!1,n.splice(i,1)}return r&&n.push(e),t.className=n.join(" "),r},e.setCssClass=function(t,n,r){r?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,r=0;if(e=e||document,e.createStyleSheet&&(n=e.styleSheets)){for(;r<n.length;)if(n[r++].owningElement.id===t)return!0}else if(n=e.getElementsByTagName("style"))for(;r<n.length;)if(n[r++].id===t)return!0;return!1},e.importCssString=function(t,n,r){if(r=r||document,n&&e.hasCssString(n,r))return null;var i;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */"),r.createStyleSheet?(i=r.createStyleSheet(),i.cssText=t,n&&(i.owningElement.id=n)):(i=e.createElement("style"),i.appendChild(r.createTextNode(t)),n&&(i.id=n),e.getDocumentHead(r).appendChild(i))},e.importCssStylsheet=function(t,n){if(n.createStyleSheet)n.createStyleSheet(t);else{var r=e.createElement("link");r.rel="stylesheet",r.href=t,e.getDocumentHead(n).appendChild(r)}},e.getInnerWidth=function(t){return parseInt(e.computedStyle(t,"paddingLeft"),10)+parseInt(e.computedStyle(t,"paddingRight"),10)+t.clientWidth},e.getInnerHeight=function(t){return parseInt(e.computedStyle(t,"paddingTop"),10)+parseInt(e.computedStyle(t,"paddingBottom"),10)+t.clientHeight},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=e.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var o=t.documentElement;o.appendChild(r);var a=n.offsetWidth;i.overflow="scroll";var s=n.offsetWidth;return a==s&&(s=r.clientWidth),o.removeChild(r),a-s},"undefined"==typeof document)return void(e.importCssString=function(){});void 0!==window.pageYOffset?(e.getPageScrollTop=function(){return window.pageYOffset},e.getPageScrollLeft=function(){return window.pageXOffset}):(e.getPageScrollTop=function(){return document.body.scrollTop},e.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?e.computedStyle=function(t,e){return e?(window.getComputedStyle(t,"")||{})[e]||"":window.getComputedStyle(t,"")||{}}:e.computedStyle=function(t,e){return e?t.currentStyle[e]:t.currentStyle},e.setInnerHtml=function(t,e){var n=t.cloneNode(!1);return n.innerHTML=e,t.parentNode.replaceChild(n,t),n},"textContent"in document.documentElement?(e.setInnerText=function(t,e){t.textContent=e},e.getInnerText=function(t){return t.textContent}):(e.setInnerText=function(t,e){t.innerText=e},e.getInnerText=function(t){return t.innerText}),e.getParentWindow=function(t){return t.defaultView||t.parentWindow}}),ace.define("ace/lib/oop",["require","exports","module"],function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(t,e,n){"use strict";t("./fixoldbrowsers");var r=t("./oop"),i=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return r.mixin(n,n.MODIFIER_KEYS),r.mixin(n,n.PRINTABLE_KEYS),r.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter(function(t){return e&n.KEY_MODS[t]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();r.mixin(e,i),e.keyCodeToString=function(t){var e=i[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,e,n){"use strict";if(e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS},"object"==("undefined"===typeof navigator?"undefined":r(navigator))){var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),o=navigator.userAgent;e.isWin="win"==i,e.isMac="mac"==i,e.isLinux="linux"==i,e.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,e.isOldGecko=e.isGecko&&parseInt((o.match(/rv:(\d+)/)||[])[1],10)<4,e.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,e.isAIR=o.indexOf("AdobeAIR")>=0,e.isIPad=o.indexOf("iPad")>=0,e.isChromeOS=o.indexOf(" CrOS ")>=0,e.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,e.isIOS&&(e.isMac=!0)}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,n){"use strict";function i(t,e,n){var r=l(e);if(!s.isMac&&u){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(r|=8),u.altGr){if(3==(3&r))return;u.altGr=0}if(18===n||17===n){var i="location"in e?e.location:e.keyLocation;if(17===n&&1===i)1==u[n]&&(c=e.timeStamp);else if(18===n&&3===r&&2===i){var o=e.timeStamp-c;o<50&&(u.altGr=!0)}}}if(n in a.MODIFIER_KEYS&&(n=-1),8&r&&n>=91&&n<=93&&(n=-1),!r&&13===n){var i="location"in e?e.location:e.keyLocation;if(3===i&&(t(e,r,-n),e.defaultPrevented))return}if(s.isChromeOS&&8&r){if(t(e,r,n),e.defaultPrevented)return;r&=-9}return!!(r||n in a.FUNCTION_KEYS||n in a.PRINTABLE_KEYS)&&t(e,r,n)}function o(){u=Object.create(null)}var a=t("./keys"),s=t("./useragent"),u=null,c=0;e.addListener=function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1);if(t.attachEvent){var r=function(){n.call(t,window.event)};n._wrapper=r,t.attachEvent("on"+e,r)}},e.removeListener=function(t,e,n){if(t.removeEventListener)return t.removeEventListener(e,n,!1);t.detachEvent&&t.detachEvent("on"+e,n._wrapper||n)},e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||s.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},e.capture=function(t,n,r){function i(t){n&&n(t),r&&r(t),e.removeListener(document,"mousemove",n,!0),e.removeListener(document,"mouseup",i,!0),e.removeListener(document,"dragstart",i,!0)}return e.addListener(document,"mousemove",n,!0),e.addListener(document,"mouseup",i,!0),e.addListener(document,"dragstart",i,!0),i},e.addTouchMoveListener=function(t,n){var r,i;e.addListener(t,"touchstart",function(t){var e=t.touches,n=e[0];r=n.clientX,i=n.clientY}),e.addListener(t,"touchmove",function(t){var e=t.touches;if(!(e.length>1)){var o=e[0];t.wheelX=r-o.clientX,t.wheelY=i-o.clientY,r=o.clientX,i=o.clientY,n(t)}})},e.addMouseWheelListener=function(t,n){"onmousewheel"in t?e.addListener(t,"mousewheel",function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),n(t)}):"onwheel"in t?e.addListener(t,"wheel",function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}n(t)}):e.addListener(t,"DOMMouseScroll",function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),n(t)})},e.addMultiMouseDownListener=function(t,n,r,i){function o(t){if(0!==e.getButton(t)?h=0:t.detail>1?++h>4&&(h=1):h=1,s.isIE){var o=Math.abs(t.clientX-u)>5||Math.abs(t.clientY-c)>5;l&&!o||(h=1),l&&clearTimeout(l),l=setTimeout(function(){l=null},n[h-1]||600),1==h&&(u=t.clientX,c=t.clientY)}if(t._clicks=h,r[i]("mousedown",t),h>4)h=0;else if(h>1)return r[i](f[h],t)}function a(t){h=2,l&&clearTimeout(l),l=setTimeout(function(){l=null},n[h-1]||600),r[i]("mousedown",t),r[i](f[h],t)}var u,c,l,h=0,f={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(t)||(t=[t]),t.forEach(function(t){e.addListener(t,"mousedown",o),s.isOldIE&&e.addListener(t,"dblclick",a)})};var l=!s.isMac||!s.isOpera||"KeyboardEvent"in window?function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)}:function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)};if(e.getModifierString=function(t){return a.KEY_MODS[l(t)]},e.addCommandKeyListener=function(t,n){var r=e.addListener;if(s.isOldGecko||s.isOpera&&!("KeyboardEvent"in window)){var a=null;r(t,"keydown",function(t){a=t.keyCode}),r(t,"keypress",function(t){return i(n,t,a)})}else{var c=null;r(t,"keydown",function(t){u[t.keyCode]=(u[t.keyCode]||0)+1;var e=i(n,t,t.keyCode);return c=t.defaultPrevented,e}),r(t,"keypress",function(t){c&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),c=null)}),r(t,"keyup",function(t){u[t.keyCode]=null}),u||(o(),r(window,"focus",o))}},"object"==("undefined"===typeof window?"undefined":r(window))&&window.postMessage&&!s.isOldIE){e.nextTick=function(t,n){n=n||window;e.addListener(n,"message",function r(i){"zero-timeout-message-1"==i.data&&(e.stopPropagation(i),e.removeListener(n,"message",r),t())}),n.postMessage("zero-timeout-message-1","*")}}e.nextFrame="object"==("undefined"===typeof window?"undefined":r(window))&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var i=/^\s\s*/,o=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(i,"")},e.stringTrimRight=function(t){return t.replace(o,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&"object"==r(t[n])?e[n]=this.copyObject(t[n]):e[n]=t[n];return e},e.deepCopy=function t(e){if("object"!==("undefined"===typeof e?"undefined":r(e))||!e)return e;var n;if(Array.isArray(e)){n=[];for(var i=0;i<e.length;i++)n[i]=t(e[i]);return n}if("[object Object]"!==Object.prototype.toString.call(e))return e;n={};for(var i in e)n[i]=t(e[i]);return n},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return t.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,function(t){n.push({offset:arguments[arguments.length-2],length:t.length})}),n},e.deferredCall=function(t){var e=null,n=function(){e=null,t()},r=function t(r){return t.cancel(),e=setTimeout(n,r||0),t};return r.schedule=r,r.call=function(){return this.cancel(),t(),r},r.cancel=function(){return clearTimeout(e),e=null,r},r.isPending=function(){return e},r},e.delayedCall=function(t,e){var n=null,r=function(){n=null,t()},i=function(t){null==n&&(n=setTimeout(r,t||e))};return i.delay=function(t){n&&clearTimeout(n),n=setTimeout(r,t||e)},i.schedule=i,i.call=function(){this.cancel(),t()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/keyboard/textinput_ios",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"],function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=t("../lib/dom"),a=t("../lib/lang"),s=t("../lib/keys"),u=s.KEY_MODS,c=i.isChrome<18,l=i.isIE,h=function(t,e){function n(t){if(!y){if(y=!0,S)e=0,n=t?0:d.value.length-1;else var e=4,n=5;try{d.setSelectionRange(e,n)}catch(t){}y=!1}}function h(){y||(d.value=p,i.isWebKit&&E.schedule())}function f(){clearTimeout(j),j=setTimeout(function(){b&&(d.style.cssText=b,b=""),null==e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=!0,e.renderer.$moveTextAreaToCursor())},0)}var d=o.createElement("textarea");d.className=i.isIOS?"ace_text-input ace_text-input-ios":"ace_text-input",i.isTouchPad&&d.setAttribute("x-palm-disable-auto-cap",!0),d.setAttribute("wrap","off"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck",!1),d.style.opacity="0",t.insertBefore(d,t.firstChild);var p="\n aaaa a\n",g=!1,m=!1,v=!1,y=!1,b="",w=!0;try{var _=document.activeElement===d}catch(t){}r.addListener(d,"blur",function(t){e.onBlur(t),_=!1}),r.addListener(d,"focus",function(t){_=!0,e.onFocus(t),n()}),this.focus=function(){if(b)return d.focus();d.style.position="fixed",d.focus()},this.blur=function(){d.blur()},this.isFocused=function(){return _};var x=a.delayedCall(function(){_&&n(w)}),E=a.delayedCall(function(){y||(d.value=p,_&&n())});i.isWebKit||e.addEventListener("changeSelection",function(){e.selection.isEmpty()!=w&&(w=!w,x.schedule())}),h(),_&&e.onFocus();var A=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length},C=function(t){A(d)?(e.selectAll(),n()):S&&n(e.selection.isEmpty())},S=null;this.setInputHandler=function(t){S=t},this.getInputHandler=function(){return S};var M=!1,T=function(t){4===d.selectionStart&&5===d.selectionEnd||(S&&(t=S(t),S=null),v?(n(),t&&e.onPaste(t),v=!1):t==p.substr(0)&&4===d.selectionStart?M?e.execCommand("del",{source:"ace"}):e.execCommand("backspace",{source:"ace"}):g||(t.substring(0,9)==p&&t.length>p.length?t=t.substr(9):t.substr(0,4)==p.substr(0,4)?t=t.substr(4,t.length-p.length+1):t.charAt(t.length-1)==p.charAt(0)&&(t=t.slice(0,-1)),t==p.charAt(0)||t.charAt(t.length-1)==p.charAt(0)&&(t=t.slice(0,-1)),t&&e.onTextInput(t)),g&&(g=!1),M&&(M=!1))},k=function(t){if(!y){var e=d.value;T(e),h()}},O=function t(e,n,r){var i=e.clipboardData||window.clipboardData;if(i&&!c){var o=l||r?"Text":"text/plain";try{return n?!1!==i.setData(o,n):i.getData(o)}catch(e){if(!r)return t(e,n,!0)}}},F=function(t,o){var a=e.getCopyText();if(!a)return r.preventDefault(t);O(t,a)?(i.isIOS&&(m=o,d.value="\n aa"+a+"a a\n",d.setSelectionRange(4,4+a.length),g={value:a}),o?e.onCut():e.onCopy(),i.isIOS||r.preventDefault(t)):(g=!0,d.value=a,d.select(),setTimeout(function(){g=!1,h(),n(),o?e.onCut():e.onCopy()}))},P=function(t){F(t,!0)},L=function(t){F(t,!1)},R=function(t){var o=O(t);"string"==typeof o?(o&&e.onPaste(o,t),i.isIE&&setTimeout(n),r.preventDefault(t)):(d.value="",v=!0)};r.addCommandKeyListener(d,e.onCommandKey.bind(e)),r.addListener(d,"select",C),r.addListener(d,"input",k),r.addListener(d,"cut",P),r.addListener(d,"copy",L),r.addListener(d,"paste",R);var D=function(t){y||!e.onCompositionStart||e.$readOnly||(y={},y.canUndo=e.session.$undoManager,e.onCompositionStart(),setTimeout(B,0),e.on("mousedown",I),y.canUndo&&!e.selection.isEmpty()&&(e.insert(""),e.session.markUndoGroup(),e.selection.clearSelection()),e.session.markUndoGroup())},B=function(){if(y&&e.onCompositionUpdate&&!e.$readOnly){var t=d.value.replace(/\x01/g,"");if(y.lastValue!==t&&(e.onCompositionUpdate(t),y.lastValue&&e.undo(),y.canUndo&&(y.lastValue=t),y.lastValue)){var n=e.selection.getRange();e.insert(y.lastValue),e.session.markUndoGroup(),y.range=e.selection.getRange(),e.selection.setRange(n),e.selection.clearSelection()}}},I=function t(n){if(e.onCompositionEnd&&!e.$readOnly){var r=y;y=!1;var o=setTimeout(function(){o=null;var t=d.value.replace(/\x01/g,"");y||(t==r.lastValue?h():!r.lastValue&&t&&(h(),T(t)))});S=function(t){return o&&clearTimeout(o),(t=t.replace(/\x01/g,""))==r.lastValue?"":(r.lastValue&&o&&e.undo(),t)},e.onCompositionEnd(),e.removeListener("mousedown",t),"compositionend"==n.type&&r.range&&e.selection.setRange(r.range);(!!i.isChrome&&i.isChrome>=53||!!i.isWebKit&&i.isWebKit>=603)&&k()}},N=a.delayedCall(B,50);r.addListener(d,"compositionstart",D),i.isGecko?r.addListener(d,"text",function(){N.schedule()}):(r.addListener(d,"keyup",function(){N.schedule()}),r.addListener(d,"keydown",function(){N.schedule()})),r.addListener(d,"compositionend",I),this.getElement=function(){return d},this.setReadOnly=function(t){d.readOnly=t},this.onContextMenu=function(t){M=!0,n(e.selection.isEmpty()),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,n){b||(b=d.style.cssText),d.style.cssText=(n?"z-index:100000;":"")+"height:"+d.style.height+";"+(i.isIE?"opacity:0.1;":"");var a=e.container.getBoundingClientRect(),s=o.computedStyle(e.container),u=a.top+(parseInt(s.borderTopWidth)||0),c=a.left+(parseInt(a.borderLeftWidth)||0),l=a.bottom-u-d.clientHeight-2,h=function(t){d.style.left=t.clientX-c-2+"px",d.style.top=Math.min(t.clientY-u-2,l)+"px"};h(t),"mousedown"==t.type&&(e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=null),clearTimeout(j),i.isWin&&r.capture(e.container,h,f))},this.onContextMenuClose=f;var j,U=function(t){e.textInput.onContextMenu(t),f()};if(r.addListener(d,"mouseup",U),r.addListener(d,"mousedown",function(t){t.preventDefault(),f()}),r.addListener(e.renderer.scroller,"contextmenu",U),r.addListener(d,"contextmenu",U),i.isIOS){var $=null,z=!1;t.addEventListener("keydown",function(t){$&&clearTimeout($),z=!0}),t.addEventListener("keyup",function(t){$=setTimeout(function(){z=!1},100)});var H=function(t){if(document.activeElement===d&&!z){if(m)return setTimeout(function(){m=!1},100);var n=d.selectionStart,r=d.selectionEnd;if(d.setSelectionRange(4,5),n==r)switch(n){case 0:e.onCommandKey(null,0,s.up);break;case 1:e.onCommandKey(null,0,s.home);break;case 2:e.onCommandKey(null,u.option,s.left);break;case 4:e.onCommandKey(null,0,s.left);break;case 5:e.onCommandKey(null,0,s.right);break;case 7:e.onCommandKey(null,u.option,s.right);break;case 8:e.onCommandKey(null,0,s.end);break;case 9:e.onCommandKey(null,0,s.down)}else{switch(r){case 6:e.onCommandKey(null,u.shift,s.right);break;case 7:e.onCommandKey(null,u.shift|u.option,s.right);break;case 8:e.onCommandKey(null,u.shift,s.end);break;case 9:e.onCommandKey(null,u.shift,s.down)}switch(n){case 0:e.onCommandKey(null,u.shift,s.up);break;case 1:e.onCommandKey(null,u.shift,s.home);break;case 2:e.onCommandKey(null,u.shift|u.option,s.left);break;case 3:e.onCommandKey(null,u.shift,s.left)}}}};document.addEventListener("selectionchange",H),e.on("destroy",function(){document.removeEventListener("selectionchange",H)})}};e.TextInput=h}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/keyboard/textinput_ios"],function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=t("../lib/dom"),a=t("../lib/lang"),s=i.isChrome<18,u=i.isIE,c=t("./textinput_ios").TextInput,l=function(t,e){function n(t){if(!m){if(m=!0,A)var e=0,n=t?0:f.value.length-1;else var e=t?2:1,n=2;try{f.setSelectionRange(e,n)}catch(t){}m=!1}}function l(){m||(f.value=d,i.isWebKit&&_.schedule())}function h(){clearTimeout(I),I=setTimeout(function(){v&&(f.style.cssText=v,v=""),null==e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=!0,e.renderer.$moveTextAreaToCursor())},0)}if(i.isIOS)return c.call(this,t,e);var f=o.createElement("textarea");f.className="ace_text-input",f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck",!1),f.style.opacity="0",t.insertBefore(f,t.firstChild);var d="\u2028\u2028",p=!1,g=!1,m=!1,v="",y=!0;try{var b=document.activeElement===f}catch(t){}r.addListener(f,"blur",function(t){e.onBlur(t),b=!1}),r.addListener(f,"focus",function(t){b=!0,e.onFocus(t),n()}),this.focus=function(){if(v)return f.focus();var t=f.style.top;f.style.position="fixed",f.style.top="0px",f.focus(),setTimeout(function(){f.style.position="","0px"==f.style.top&&(f.style.top=t)},0)},this.blur=function(){f.blur()},this.isFocused=function(){return b};var w=a.delayedCall(function(){b&&n(y)}),_=a.delayedCall(function(){m||(f.value=d,b&&n())});i.isWebKit||e.addEventListener("changeSelection",function(){e.selection.isEmpty()!=y&&(y=!y,w.schedule())}),l(),b&&e.onFocus();var x=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length},E=function(t){p?p=!1:x(f)?(e.selectAll(),n()):A&&n(e.selection.isEmpty())},A=null;this.setInputHandler=function(t){A=t},this.getInputHandler=function(){return A};var C=!1,S=function(t){A&&(t=A(t),A=null),g?(n(),t&&e.onPaste(t),g=!1):t==d.charAt(0)?C?e.execCommand("del",{source:"ace"}):e.execCommand("backspace",{source:"ace"}):(t.substring(0,2)==d?t=t.substr(2):t.charAt(0)==d.charAt(0)?t=t.substr(1):t.charAt(t.length-1)==d.charAt(0)&&(t=t.slice(0,-1)),t.charAt(t.length-1)==d.charAt(0)&&(t=t.slice(0,-1)),t&&e.onTextInput(t)),C&&(C=!1)},M=function(t){if(!m){var e=f.value;S(e),l()}},T=function t(e,n,r){var i=e.clipboardData||window.clipboardData;if(i&&!s){var o=u||r?"Text":"text/plain";try{return n?!1!==i.setData(o,n):i.getData(o)}catch(e){if(!r)return t(e,n,!0)}}},k=function(t,i){var o=e.getCopyText();if(!o)return r.preventDefault(t);T(t,o)?(i?e.onCut():e.onCopy(),r.preventDefault(t)):(p=!0,f.value=o,f.select(),setTimeout(function(){p=!1,l(),n(),i?e.onCut():e.onCopy()}))},O=function(t){k(t,!0)},F=function(t){k(t,!1)},P=function(t){var o=T(t);"string"==typeof o?(o&&e.onPaste(o,t),i.isIE&&setTimeout(n),r.preventDefault(t)):(f.value="",g=!0)};r.addCommandKeyListener(f,e.onCommandKey.bind(e)),r.addListener(f,"select",E),r.addListener(f,"input",M),r.addListener(f,"cut",O),r.addListener(f,"copy",F),r.addListener(f,"paste",P),"oncut"in f&&"oncopy"in f&&"onpaste"in f||r.addListener(t,"keydown",function(t){if((!i.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:F(t);break;case 86:P(t);break;case 88:O(t)}});var L=function(t){m||!e.onCompositionStart||e.$readOnly||(m={},m.canUndo=e.session.$undoManager,e.onCompositionStart(),setTimeout(R,0),e.on("mousedown",D),m.canUndo&&!e.selection.isEmpty()&&(e.insert(""),e.session.markUndoGroup(),e.selection.clearSelection()),e.session.markUndoGroup())},R=function(){if(m&&e.onCompositionUpdate&&!e.$readOnly){var t=f.value.replace(/\u2028/g,"");if(m.lastValue!==t&&(e.onCompositionUpdate(t),m.lastValue&&e.undo(),m.canUndo&&(m.lastValue=t),m.lastValue)){var n=e.selection.getRange();e.insert(m.lastValue),e.session.markUndoGroup(),m.range=e.selection.getRange(),e.selection.setRange(n),e.selection.clearSelection()}}},D=function t(n){if(e.onCompositionEnd&&!e.$readOnly){var r=m;m=!1;var o=setTimeout(function(){o=null;var t=f.value.replace(/\u2028/g,"");m||(t==r.lastValue?l():!r.lastValue&&t&&(l(),S(t)))});A=function(t){return o&&clearTimeout(o),(t=t.replace(/\u2028/g,""))==r.lastValue?"":(r.lastValue&&o&&e.undo(),t)},e.onCompositionEnd(),e.removeListener("mousedown",t),"compositionend"==n.type&&r.range&&e.selection.setRange(r.range);(!!i.isChrome&&i.isChrome>=53||!!i.isWebKit&&i.isWebKit>=603)&&M()}},B=a.delayedCall(R,50);r.addListener(f,"compositionstart",L),i.isGecko?r.addListener(f,"text",function(){B.schedule()}):(r.addListener(f,"keyup",function(){B.schedule()}),r.addListener(f,"keydown",function(){B.schedule()})),r.addListener(f,"compositionend",D),this.getElement=function(){return f},this.setReadOnly=function(t){f.readOnly=t},this.onContextMenu=function(t){C=!0,n(e.selection.isEmpty()),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,n){v||(v=f.style.cssText),f.style.cssText=(n?"z-index:100000;":"")+"height:"+f.style.height+";"+(i.isIE?"opacity:0.1;":"");var a=e.container.getBoundingClientRect(),s=o.computedStyle(e.container),u=a.top+(parseInt(s.borderTopWidth)||0),c=a.left+(parseInt(a.borderLeftWidth)||0),l=a.bottom-u-f.clientHeight-2,d=function(t){f.style.left=t.clientX-c-2+"px",f.style.top=Math.min(t.clientY-u-2,l)+"px"};d(t),"mousedown"==t.type&&(e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=null),clearTimeout(I),i.isWin&&r.capture(e.container,d,h))},this.onContextMenuClose=h;var I,N=function(t){e.textInput.onContextMenu(t),h()};r.addListener(f,"mouseup",N),r.addListener(f,"mousedown",function(t){t.preventDefault(),h()}),r.addListener(e.renderer.scroller,"contextmenu",N),r.addListener(f,"contextmenu",N)};e.TextInput=l}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";function r(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t)),e.setDefaultHandler("touchmove",this.onTouchMove.bind(t)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function i(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}function o(t,e){if(t.start.row==t.end.row)var n=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)var n=2*e.row-t.start.row-t.end.row;else var n=e.column-4;return n<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}var a=(t("../lib/dom"),t("../lib/event"),t("../lib/useragent"));(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var r=this.editor,i=t.getButton();if(0!==i){var o=r.getSelectionRange(),s=o.isEmpty();return r.$blockScrolling++,(s||1==i)&&r.selection.moveToPosition(n),r.$blockScrolling--,void(2==i&&(r.textInput.onContextMenu(t.domEvent),a.isMozilla||t.preventDefault()))}return this.mousedownEvent.time=Date.now(),!e||r.isFocused()||(r.focus(),!this.$focusTimout||this.$clickSelection||r.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;n.$blockScrolling++,this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"),n.$blockScrolling--},this.select=function(){var t,e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y);if(e.$blockScrolling++,this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)t=this.$clickSelection.end;else if(1==r)t=this.$clickSelection.start;else{var i=o(this.$clickSelection,n);n=i.cursor,t=i.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(n),e.$blockScrolling--,e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[t](r.row,r.column);if(n.$blockScrolling++,this.$clickSelection){var a=this.$clickSelection.comparePoint(i.start),s=this.$clickSelection.comparePoint(i.end);if(-1==a&&s<=0)e=this.$clickSelection.end,i.end.row==r.row&&i.end.column==r.column||(r=i.start);else if(1==s&&a>=0)e=this.$clickSelection.start,i.start.row==r.row&&i.start.column==r.column||(r=i.end);else if(-1==a&&1==s)r=i.end,e=i.start;else{var u=o(this.$clickSelection,r);r=u.cursor,e=u.anchor}n.selection.setSelectionAnchor(e.row,e.column)}n.selection.selectToPosition(r),n.$blockScrolling--,n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),e=Date.now();(t>0||e-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(e);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=t.domEvent.timeStamp,i=r-n.t,o=t.wheelX/i,a=t.wheelY/i;i<250&&(o=(o+n.vx)/2,a=(a+n.vy)/2);var s=Math.abs(o/a),u=!1;if(s>=1&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(u=!0),s<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(u=!0),u)n.allowed=r;else if(r-n.allowed<250){var c=Math.abs(o)<=1.1*Math.abs(n.vx)&&Math.abs(a)<=1.1*Math.abs(n.vy);c?(u=!0,n.allowed=r):n.allowed=0}return n.t=r,n.vx=o,n.vy=a,u?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}},this.onTouchMove=function(t){this.editor._emit("mousewheel",t)}}).call(r.prototype),e.DefaultHandlers=r}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(t,e,n){"use strict";function r(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}var i=(t("./lib/oop"),t("./lib/dom"));(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){i.setInnerText(this.getElement(),t)},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){i.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(r.prototype),e.Tooltip=r}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(t,e,n){"use strict";function r(t){function e(){var e=h.getDocumentPosition().row,i=u.$annotations[e];if(!i)return n();if(e==a.session.getLength()){var o=a.renderer.pixelToScreenCoordinates(0,h.y).row,s=h.$pos;if(o>a.session.documentToScreenRow(s.row,s.column))return n()}if(f!=i)if(f=i.text.join("<br/>"),c.setHtml(f),c.show(),a._signal("showGutterTooltip",c),a.on("mousewheel",n),t.$tooltipFollowsMouse)r(h);else{var l=h.domEvent.target,d=l.getBoundingClientRect(),p=c.getElement().style;p.left=d.right+"px",p.top=d.bottom+"px"}}function n(){l&&(l=clearTimeout(l)),f&&(c.hide(),f=null,a._signal("hideGutterTooltip",c),a.removeEventListener("mousewheel",n))}function r(t){c.setPosition(t.x,t.y)}var a=t.editor,u=a.renderer.$gutterLayer,c=new i(a.container);t.editor.setDefaultHandler("guttermousedown",function(e){if(a.isFocused()&&0==e.getButton()){if("foldWidgets"!=u.getRegion(e)){var n=e.getDocumentPosition().row,r=a.session.selection;if(e.getShiftKey())r.selectTo(n,0);else{if(2==e.domEvent.detail)return a.selectAll(),e.preventDefault();t.$clickSelection=a.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}}});var l,h,f;t.editor.setDefaultHandler("guttermousemove",function(i){var a=i.domEvent.target||i.domEvent.srcElement;if(o.hasCssClass(a,"ace_fold-widget"))return n();f&&t.$tooltipFollowsMouse&&r(i),h=i,l||(l=setTimeout(function(){l=null,h&&!t.isMousePressed?e():n()},50))}),s.addListener(a.renderer.$gutter,"mouseout",function(t){h=null,f&&!l&&(l=setTimeout(function(){l=null,n()},50))}),a.on("changeSession",n)}function i(t){u.call(this,t)}var o=t("../lib/dom"),a=t("../lib/oop"),s=t("../lib/event"),u=t("../tooltip").Tooltip;a.inherits(i,u),function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),o=this.getHeight();t+=15,e+=15,t+i>n&&(t-=t+i-n),e+o>r&&(e-=20+o),u.prototype.setPosition.call(this,t,e)}}.call(i.prototype),e.GutterHandler=r}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor,e=t.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=e.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";function r(t){function e(t,e){var n=Date.now(),r=!e||t.row!=e.row,o=!e||t.column!=e.column;if(!M||r||o)m.$blockScrolling+=1,m.moveCursorToPosition(t),m.$blockScrolling-=1,M=n,T={x:b,y:w};else{i(T.x,T.y,b,w)>l?M=null:n-M>=c&&(m.renderer.scrollCursorIntoView(),M=null)}}function n(t,e){var n=Date.now(),r=m.renderer.layerConfig.lineHeight,i=m.renderer.layerConfig.characterWidth,o=m.renderer.scroller.getBoundingClientRect(),a={x:{left:b-o.left,right:o.right-b},y:{top:w-o.top,bottom:o.bottom-w}},s=Math.min(a.x.left,a.x.right),c=Math.min(a.y.top,a.y.bottom),l={row:t.row,column:t.column};s/i<=2&&(l.column+=a.x.left<a.x.right?-3:2),c/r<=1&&(l.row+=a.y.top<a.y.bottom?-1:1);var h=t.row!=l.row,f=t.column!=l.column,d=!e||t.row!=e.row;h||f&&!d?S?n-S>=u&&m.renderer.scrollCursorIntoView(l):S=n:S=null}function r(){var t=E;E=m.renderer.screenToTextCoordinates(b,w),e(E,t),n(E,t)}function h(){x=m.selection.toOrientedRange(),y=m.session.addMarker(x,"ace_selection",m.getSelectionStyle()),m.clearSelection(),m.isFocused()&&m.renderer.$cursorLayer.setBlinking(!1),clearInterval(_),r(),_=setInterval(r,20),O=0,a.addListener(document,"mousemove",d)}function f(){clearInterval(_),m.session.removeMarker(y),y=null,m.$blockScrolling+=1,m.selection.fromOrientedRange(x),m.$blockScrolling-=1,m.isFocused()&&!C&&m.renderer.$cursorLayer.setBlinking(!m.getReadOnly()),x=null,E=null,O=0,S=null,M=null,a.removeListener(document,"mousemove",d)}function d(){null==F&&(F=setTimeout(function(){null!=F&&y&&f()},20))}function p(t){var e=t.types;return!e||Array.prototype.some.call(e,function(t){return"text/plain"==t||"Text"==t})}function g(t){var e=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?t.altKey:t.ctrlKey,i="uninitialized";try{i=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var o="none";return r&&e.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":e.indexOf(i)>=0&&(o="copy"),o}var m=t.editor,v=o.createElement("img");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(v.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(e){t[e]=this[e]},this),m.addEventListener("mousedown",this.onMouseDown.bind(t));var y,b,w,_,x,E,A,C,S,M,T,k=m.container,O=0;this.onDragStart=function(t){if(this.cancelDrag||!k.draggable){var e=this;return setTimeout(function(){e.startSelect(),e.captureMouse(t)},0),t.preventDefault()}x=m.getSelectionRange();var n=t.dataTransfer;n.effectAllowed=m.getReadOnly()?"copy":"copyMove",s.isOpera&&(m.container.appendChild(v),v.scrollTop=0),n.setDragImage&&n.setDragImage(v,0,0),s.isOpera&&m.container.removeChild(v),n.clearData(),n.setData("Text",m.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(t){if(k.draggable=!1,C=!1,this.setState(null),!m.getReadOnly()){var e=t.dataTransfer.dropEffect;A||"move"!=e||m.session.remove(m.getSelectionRange()),m.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!m.getReadOnly()&&p(t.dataTransfer))return b=t.clientX,w=t.clientY,y||h(),O++,t.dataTransfer.dropEffect=A=g(t),a.preventDefault(t)},this.onDragOver=function(t){if(!m.getReadOnly()&&p(t.dataTransfer))return b=t.clientX,w=t.clientY,y||(h(),O++),null!==F&&(F=null),t.dataTransfer.dropEffect=A=g(t),a.preventDefault(t)},this.onDragLeave=function(t){if(--O<=0&&y)return f(),A=null,a.preventDefault(t)},this.onDrop=function(t){if(E){var e=t.dataTransfer;if(C)switch(A){case"move":x=x.contains(E.row,E.column)?{start:E,end:E}:m.moveText(x,E);break;case"copy":x=m.moveText(x,E,!0)}else{var n=e.getData("Text");x={start:E,end:m.session.insert(E,n)},m.focus(),A=null}return f(),a.preventDefault(t)}},a.addListener(k,"dragstart",this.onDragStart.bind(t)),a.addListener(k,"dragend",this.onDragEnd.bind(t)),a.addListener(k,"dragenter",this.onDragEnter.bind(t)),a.addListener(k,"dragover",this.onDragOver.bind(t)),a.addListener(k,"dragleave",this.onDragLeave.bind(t)),a.addListener(k,"drop",this.onDrop.bind(t));var F=null}function i(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}var o=t("../lib/dom"),a=t("../lib/event"),s=t("../lib/useragent"),u=200,c=200,l=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var e=s.isWin?"default":"move";t.renderer.setCursorStyle(e),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;if(s.isIE&&"dragReady"==this.state){var n=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&e.dragDrop()}if("dragWait"===this.state){var n=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),r=t.getButton();if(1===(t.domEvent.detail||1)&&0===r&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var i=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in i&&(i.unselectable="on"),e.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;e.container.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(r.prototype),e.DragdropHandler=r}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";var r=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=r.getDocumentHead(),i=document.createElement("script");i.src=t,n.appendChild(i),i.onload=i.onreadystatechange=function(t,n){!n&&i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(i=i.onload=i.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,e,n){"use strict";var i={},o=function(){this.propagationStopped=!0},a=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],i=this._defaultHandlers[t];if(n.length||i){"object"==("undefined"===typeof e?"undefined":r(e))&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=o),e.preventDefault||(e.preventDefault=a),n=n.slice();for(var s=0;s<n.length&&(n[s](e,this),!e.propagationStopped);s++);return i&&!e.defaultPrevented?i(e,this):void 0}},i._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](e,this)}},i.once=function(t,e){var n=this;e&&this.addEventListener(t,function r(){n.removeEventListener(t,r),e.apply(null,arguments)})},i.setDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[t]){var r=n[t],i=n._disabled_[t];i||(n._disabled_[t]=i=[]),i.push(r);var o=i.indexOf(e);-1!=o&&i.splice(o,1)}n[t]=e},i.removeDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n){var r=n._disabled_[t];if(n[t]==e){n[t];r&&this.setDefaultHandler(t,r.pop())}else if(r){var i=r.indexOf(e);-1!=i&&r.splice(i,1)}}},i.on=i.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[t];return r||(r=this._eventRegistry[t]=[]),-1==r.indexOf(e)&&r[n?"unshift":"push"](e),e},i.off=i.removeListener=i.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}},i.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=i}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"no use strict";function i(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function o(t,e){var n=new Error(t);n.data=e,"object"==("undefined"===typeof console?"undefined":r(console))&&console.error&&console.error(n),setTimeout(function(){throw n})}var a=t("./oop"),s=t("./event_emitter").EventEmitter,u={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(t){var e={};return t?Array.isArray(t)||(e=t,t=Object.keys(e)):t=Object.keys(this.$options),t.forEach(function(t){e[t]=this.getOption(t)},this),e},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return i('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:i('misspelled option "'+t+'"')}},c=function(){this.$defaultOptions={}};(function(){a.implement(this,s),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach(function(e){var r=n[e];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=e),t.$options[r.name]=r,"initialValue"in r&&(t["$"+r.name]=r.initialValue)}),a.implement(t,u),this},this.resetOptions=function(t){Object.keys(t.$options).forEach(function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)})},this.setDefaultValue=function(t,e,n){var r=this.$defaultOptions[t]||(this.$defaultOptions[t]={});r[e]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,e,n):r[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach(function(n){this.setDefaultValue(t,n,e[n])},this)},this.warn=i,this.reportError=o}).call(c.prototype),e.AppConfig=c}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(t,e,r){"no use strict";function i(i){if(c&&c.document){l.packaged=i||t.packaged||r.packaged||c.define&&n(102).packaged;for(var a={},s="",u=document.currentScript||document._currentScript,h=u&&u.ownerDocument||document,f=h.getElementsByTagName("script"),d=0;d<f.length;d++){var p=f[d],g=p.src||p.getAttribute("src");if(g){for(var m=p.attributes,v=0,y=m.length;v<y;v++){var b=m[v];0===b.name.indexOf("data-ace-")&&(a[o(b.name.replace(/^data-ace-/,""))]=b.value)}var w=g.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);w&&(s=w[1])}}s&&(a.base=a.base||s,a.packaged=!0),a.basePath=a.base,a.workerPath=a.workerPath||a.base,a.modePath=a.modePath||a.base,a.themePath=a.themePath||a.base,delete a.base;for(var _ in a)"undefined"!==typeof a[_]&&e.set(_,a[_])}}function o(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}var a=t("./lib/lang"),s=(t("./lib/oop"),t("./lib/net")),u=t("./lib/app_config").AppConfig;r.exports=e=new u;var c=function(){return this||"undefined"!=typeof window&&window}(),l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};e.get=function(t){if(!l.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return l[t]},e.set=function(t,e){if(!l.hasOwnProperty(t))throw new Error("Unknown config key: "+t);l[t]=e},e.all=function(){return a.copyObject(l)},e.moduleUrl=function(t,e){if(l.$moduleUrls[t])return l.$moduleUrls[t];var n=t.split("/");e=e||n[n.length-2]||"";var r="snippets"==e?"/":"-",i=n[n.length-1];if("worker"==e&&"-"==r){var o=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");i=i.replace(o,"")}(!i||i==e)&&n.length>1&&(i=n[n.length-2]);var a=l[e+"Path"];return null==a?a=l.basePath:"/"==r&&(e=r=""),a&&"/"!=a.slice(-1)&&(a+="/"),a+e+r+i+this.get("suffix")},e.setModuleUrl=function(t,e){return l.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=t(n)}catch(t){}if(i&&!e.$loading[n])return r&&r(i);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(r),!(e.$loading[n].length>1)){var a=function(){t([n],function(t){e._emit("load.module",{name:n,module:t});var r=e.$loading[n];e.$loading[n]=null,r.forEach(function(e){e&&e(t)})})};if(!e.get("packaged"))return a();s.loadScript(e.moduleUrl(n,o),a)}},i(!0),e.init=i}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=t("./default_handlers").DefaultHandlers,a=t("./default_gutter_handler").GutterHandler,s=t("./mouse_event").MouseEvent,u=t("./dragdrop_handler").DragdropHandler,c=t("../config"),l=function(t){var e=this;this.editor=t,new o(this),new a(this),new u(this);var n=function(e){(!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement()))&&window.focus(),t.focus()},s=t.renderer.getMouseEventTarget();r.addListener(s,"click",this.onMouseEvent.bind(this,"click")),r.addListener(s,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener([s,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),r.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel")),r.addTouchMoveListener(t.container,this.onTouchMove.bind(this,"touchmove"));var c=t.renderer.$gutter;r.addListener(c,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(c,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(c,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(c,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(s,"mousedown",n),r.addListener(c,"mousedown",n),i.isIE&&t.renderer.scrollBarV&&(r.addListener(t.renderer.scrollBarV.element,"mousedown",n),r.addListener(t.renderer.scrollBarH.element,"mousedown",n)),t.on("mousemove",function(n){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var r=t.renderer.screenToTextCoordinates(n.x,n.y),i=t.session.selection.getRange(),o=t.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?o.setCursorStyle("default"):o.setCursorStyle("")}})};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new s(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new s(e,this.editor))},this.onMouseWheel=function(t,e){var n=new s(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.onTouchMove=function(t,e){var n=new s(e,this.editor);n.speed=1,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var o=this,a=function(t){if(t){if(i.isWebKit&&!t.which&&o.releaseMouse)return o.releaseMouse();o.x=t.clientX,o.y=t.clientY,e&&e(t),o.mouseEvent=new s(t,o.editor),o.$mouseMoved=!0}},u=function(t){clearInterval(l),c(),o[o.state+"End"]&&o[o.state+"End"](t),o.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,t&&o.onMouseEvent("mouseup",t)},c=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout(function(){u(t)});o.$onCaptureMouseMove=a,o.releaseMouse=r.capture(this.editor.container,a,u);var l=setInterval(c,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&r.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(l.prototype),c.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=l}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(t,e,n){"use strict";function r(t){t.on("click",function(e){var n=e.getDocumentPosition(),r=t.session,i=r.getFoldAt(n.row,n.column,1);i&&(e.getAccelKey()?r.removeFold(i):r.expandFold(i),e.stop())}),t.on("gutterclick",function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,r=t.session;r.foldWidgets&&r.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop()}}),t.on("gutterdblclick",function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,r=t.session,i=r.getParentFoldRangeData(n,!0),o=i.range||i.firstRange;if(o){n=o.start.row;var a=r.getFoldAt(n,r.getLine(n).length,1);a?r.removeFold(a):(r.addFold("...",o),t.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}e.stop()}})}e.FoldHandler=r}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,e,n){"use strict";var r=t("../lib/keys"),i=t("../lib/event"),o=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);-1!=n&&this.$handlers.splice(n,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(e,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,r){for(var o,a=!1,s=this.$editor.commands,u=this.$handlers.length;u--&&!((o=this.$handlers[u].handleKeyboard(this.$data,t,e,n,r))&&o.command&&(a="null"==o.command||s.exec(o.command,this.$editor,o.args,r),a&&r&&-1!=t&&1!=o.passEvent&&1!=o.command.passEvent&&i.stopEvent(r),a)););return a||-1!=t||(o={command:"insertstring"},a=s.exec("insertstring",this.$editor,e)),a&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),a},this.onCommandKey=function(t,e,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(e,i,n,t)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(o.prototype),e.KeyBinding=o}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(t,e,n){"use strict";function r(t,e,n,r){var i=s?p:d,g=null,m=null,v=null,y=0,b=null,w=-1,E=null,C=null,S=[];if(!r)for(E=0,r=[];E<n;E++)r[E]=a(t[E]);for(u=s,c=!1,l=!1,h=!1,f=!1,C=0;C<n;C++){if(g=y,S[C]=m=o(t,r,S,C),y=i[g][m],b=240&y,y&=15,e[C]=v=i[y][5],b>0)if(16==b){for(E=w;E<C;E++)e[E]=1;w=-1}else w=-1;if(i[y][6])-1==w&&(w=C);else if(w>-1){for(E=w;E<C;E++)e[E]=v;w=-1}r[C]==_&&(e[C]=0),u|=v}if(f)for(E=0;E<n;E++)if(r[E]==x){e[E]=s;for(var M=E-1;M>=0&&r[M]==A;M--)e[M]=s}}function i(t,e,n){if(!(u<t)){if(1==t&&s==g&&!h)return void n.reverse();for(var r,i,o,a,c=n.length,l=0;l<c;){if(e[l]>=t){for(r=l+1;r<c&&e[r]>=t;)r++;for(i=l,o=r-1;i<o;i++,o--)a=n[i],n[i]=n[o],n[o]=a;l=r}l++}}}function o(t,e,n,r){var i,o,a,u,d=e[r];switch(d){case m:case v:c=!1;case w:case b:return d;case y:return c?b:y;case E:return c=!0,l=!0,v;case A:return w;case C:return r<1||r+1>=e.length||(i=n[r-1])!=y&&i!=b||(o=e[r+1])!=y&&o!=b?w:(c&&(o=b),o==i?o:w);case S:return i=r>0?n[r-1]:_,i==y&&r+1<e.length&&e[r+1]==y?y:w;case M:if(r>0&&n[r-1]==y)return y;if(c)return w;for(u=r+1,a=e.length;u<a&&e[u]==M;)u++;return u<a&&e[u]==y?y:w;case T:for(a=e.length,u=r+1;u<a&&e[u]==T;)u++;if(u<a){var p=t[r],g=p>=1425&&p<=2303||64286==p;if(i=e[u],g&&(i==v||i==E))return v}return r<1||(i=e[r-1])==_?w:n[r-1];case _:return c=!1,h=!0,s;case x:return f=!0,w;case k:case O:case P:case L:case F:c=!1;case R:return w}}function a(t){var e=t.charCodeAt(0),n=e>>8;return 0==n?e>191?m:D[e]:5==n?/[\u0591-\u05f4]/.test(t)?v:m:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?T:/[\u0660-\u0669\u066b-\u066c]/.test(t)?b:1642==e?M:/[\u06f0-\u06f9]/.test(t)?y:E:32==n&&e<=8287?B[255&e]:254==n&&e>=65136?E:w}var s=0,u=0,c=!1,l=!1,h=!1,f=!1,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g=1,m=0,v=1,y=2,b=3,w=4,_=5,x=6,E=7,A=8,C=9,S=10,M=11,T=12,k=13,O=14,F=15,P=16,L=17,R=18,D=[R,R,R,R,R,R,R,R,R,x,_,x,A,_,R,R,R,R,R,R,R,R,R,R,R,R,R,R,_,_,_,x,A,w,w,M,M,M,w,w,w,w,w,S,C,S,C,C,y,y,y,y,y,y,y,y,y,y,C,w,w,w,w,w,w,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,w,w,w,w,w,w,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,w,w,w,w,R,R,R,R,R,R,_,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,C,w,M,M,M,M,w,w,w,w,m,w,w,R,w,w,M,M,y,y,w,m,w,w,w,y,m,w,w,w,w,w],B=[A,A,A,A,A,A,A,A,A,A,A,R,R,R,m,v,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,A,_,k,O,F,P,L,C,M,M,M,M,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,C,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,A];e.L=m,e.R=v,e.EN=y,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.DOT="\xb7",e.doBidiReorder=function(t,n,o){if(t.length<2)return{};var a=t.split(""),u=new Array(a.length),c=new Array(a.length),l=[];s=o?g:0,r(a,l,a.length,n);for(var h=0;h<u.length;u[h]=h,h++);i(2,l,u),i(1,l,u);for(var h=0;h<u.length-1;h++)n[h]===b?l[h]=e.AN:l[h]===v&&(n[h]>E&&n[h]<k||n[h]===w||n[h]===R)?l[h]=e.ON_R:h>0&&"\u0644"===a[h-1]&&/\u0622|\u0623|\u0625|\u0627/.test(a[h])&&(l[h-1]=l[h]=e.R_H,h++);a[a.length-1]===e.DOT&&(l[a.length-1]=e.B);for(var h=0;h<u.length;h++)c[h]=l[u[h]];return{logicalFromVisual:u,bidiLevels:c}},e.hasBidiCharacters=function(t,e){for(var n=!1,r=0;r<t.length;r++)e[r]=a(t.charAt(r)),n||e[r]!=v&&e[r]!=E||(n=!0);return n},e.getVisualFromLogicalIdx=function(t,e){for(var n=0;n<e.logicalFromVisual.length;n++)if(e.logicalFromVisual[n]==t)return n;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang","ace/lib/useragent"],function(t,e,n){"use strict";var r=t("./lib/bidiutil"),i=t("./lib/lang"),o=t("./lib/useragent"),a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=function(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.line="",this.wrapIndent=0,this.isLastRow=!1,this.EOF="\xb6",this.seenBidi=!1};(function(){this.isBidiRow=function(t,e,n){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&a.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t=0,e=this.session.$screenRowCache;if(e.length){var n=this.session.$getRowCacheIndex(e,this.currentRow);n>=0&&(t=this.session.$docRowCache[n])}return t},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var n,r=this.session.$getRowCacheIndex(e,this.currentRow);this.currentRow-t>0&&(n=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===r;)r=n,t++;return t},this.updateRowLine=function(t,e){if(void 0===t&&(t=this.getDocumentRow()),this.wrapIndent=0,this.isLastRow=t===this.session.getLength()-1,this.line=this.session.getLine(t),this.session.$useWrapMode){var n=this.session.$wrapData[t];n&&(void 0===e&&(e=this.getSplitIndex()),e>0&&n.length?(this.wrapIndent=n.indent,this.line=e<n.length?this.line.substring(n[e-1],n[n.length-1]):this.line.substring(n[n.length-1])):this.line=this.line.substring(0,n[e]))}var o,a=this.session,s=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(t,e){return"\t"===t||a.isFullWidth(t.charCodeAt(0))?(o="\t"===t?a.getScreenTabSize(e+s):2,s+=o-1,i.stringRepeat(r.DOT,o)):t})},this.updateBidiMap=function(){var t=[],e=this.isLastRow?this.EOF:this.EOL,n=this.line+(this.showInvisibles?e:r.DOT);r.hasBidiCharacters(n,t)?this.bidiMap=r.doBidiReorder(n,t,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){if(this.seenBidi&&this.characterWidth!==t.$characterSize.width){var e=this.characterWidth=t.$characterSize.width,n=t.$measureCharWidth("\u05d4");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=e,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=o.isChrome?n:.45*n,this.charWidths[r.B]=0,this.currentRow=null}},this.getShowInvisibles=function(){return this.showInvisibles},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setTextDir=function(t){this.isRtlDir=t},this.getPosLeft=function(t){t-=this.wrapIndent;var e=r.getVisualFromLogicalIdx(t>0?t-1:0,this.bidiMap),n=this.bidiMap.bidiLevels,i=0;0===t&&n[e]%2!==0&&e++;for(var o=0;o<e;o++)i+=this.charWidths[n[o]];return 0!==t&&n[e]%2===0&&(i+=this.charWidths[n[e]]),this.wrapIndent&&(i+=this.wrapIndent*this.charWidths[r.L]),i},this.getSelections=function(t,e){for(var n,i,o=this.bidiMap,a=o.bidiLevels,s=this.wrapIndent*this.charWidths[r.L],u=[],c=Math.min(t,e)-this.wrapIndent,l=Math.max(t,e)-this.wrapIndent,h=!1,f=!1,d=0,p=0;p<a.length;p++)i=o.logicalFromVisual[p],n=a[p],h=i>=c&&i<l,h&&!f?d=s:!h&&f&&u.push({left:d,width:s-d}),s+=this.charWidths[n],f=h;return h&&p===a.length&&u.push({left:d,width:s-d}),u},this.offsetToCol=function(t){var e=0,t=Math.max(t,0),n=0,i=0,o=this.bidiMap.bidiLevels,a=this.charWidths[o[i]];for(this.wrapIndent&&(t-=this.wrapIndent*this.charWidths[r.L]);t>n+a/2;){if(n+=a,i===o.length-1){a=0;break}a=this.charWidths[o[++i]]}return i>0&&o[i-1]%2!==0&&o[i]%2===0?(t<n&&i--,e=this.bidiMap.logicalFromVisual[i]):i>0&&o[i-1]%2===0&&o[i]%2!==0?e=1+(t>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===o.length-1&&0===a&&o[i-1]%2===0||!this.isRtlDir&&0===i&&o[i]%2!==0?e=1+this.bidiMap.logicalFromVisual[i]:(i>0&&o[i-1]%2!==0&&0!==a&&i--,e=this.bidiMap.logicalFromVisual[i]),e+this.wrapIndent}}).call(s.prototype),e.BidiHandler=s}),ace.define("ace/range",["require","exports","module"],function(t,e,n){"use strict";var i=function(t,e){return t.row-e.row||t.column-e.column},o=function(t,e,n,r){this.start={row:t,column:e},this.end={row:n,column:r}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,n=t.end,r=t.start;return e=this.compare(n.row,n.column),1==e?(e=this.compare(r.row,r.column),1==e?2:0==e?1:0):-1==e?-2:(e=this.compare(r.row,r.column),-1==e?-1:1==e?42:0)},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==("undefined"===typeof t?"undefined":r(t))?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==("undefined"===typeof t?"undefined":r(t))?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var n={row:e+1,column:0};else if(this.end.row<t)var n={row:t,column:0};if(this.start.row>e)var r={row:e+1,column:0};else if(this.start.row<t)var r={row:t,column:0};return o.fromPoints(r||this.start,n||this.end)},this.extend=function(t,e){var n=this.compare(t,e);if(0==n)return this;if(-1==n)var r={row:t,column:e};else var i={row:t,column:e};return o.fromPoints(r||this.start,i||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return o.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new o(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new o(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(o.prototype),o.fromPoints=function(t,e){return new o(t.row,t.column,e.row,e.column)},o.comparePoints=i,o.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/lang"),o=t("./lib/event_emitter").EventEmitter,a=t("./range").Range,s=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var e=this;this.lead.on("change",function(t){e._emit("changeCursor"),e.$isEmpty||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){e.$isEmpty||e._emit("changeSelection")})};(function(){r.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.anchor.setPosition(t,e),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(t){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+t);var e=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();r&&0===e.column||this.setSelectionAnchor(e.row,e.column+t),(r||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+t)})},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.isEmpty()?a.fromPoints(e,e):this.isBackwards()?a.fromPoints(e,t):a.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var t=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(t,this.doc.getLine(t).length)},this.setRange=this.setSelectionRange=function(t,e){e?(this.setSelectionAnchor(t.end.row,t.end.column),this.selectTo(t.start.row,t.start.column)):(this.setSelectionAnchor(t.start.row,t.start.column),this.selectTo(t.end.row,t.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection(function(){this.moveCursorTo(t,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if("undefined"==typeof e){var n=t||this.lead;t=n.row,e=n.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n,r="number"==typeof t?t:this.lead.row,i=this.session.getFoldLine(r);return i?(r=i.start.row,n=i.end.row):n=r,!0===e?new a(r,0,n,this.session.getLine(n).length):new a(r,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,n){var r=t.column,i=t.column+e;return n<0&&(r=t.column-e,i=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(r,i).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(t,null,r.row,r.column),o=i.match(/^\s*/);o[0].length==e||this.session.$useEmacsStyleLineStart||(r.column+=o[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var n=this.session.getLine(e.row);if(e.column==n.length){var r=n.search(/\s+$/);r>0&&(e.column=r)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),r=n.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(t,e,1);return i?void this.moveCursorTo(i.end.row,i.end.column):(this.session.nonTokenRe.exec(r)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(e)),e>=n.length?(this.moveCursorTo(t,n.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight())):(this.session.tokenRe.exec(r)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(t,e)))},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return void this.moveCursorTo(t.start.row,t.start.column);var r=this.session.getFoldStringAt(e,n,-1);null==r&&(r=this.doc.getLine(e).substring(0,n));var o=i.stringReverse(r);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,n)},this.$shortWordEndIndex=function(t){var e,n=0,r=/\s/,i=this.session.tokenRe;if(i.lastIndex=0,this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(e=t[n])&&r.test(e);)n++;if(n<1)for(i.lastIndex=0;(e=t[n])&&!i.test(e);)if(i.lastIndex=0,n++,r.test(e)){if(n>2){n--;break}for(;(e=t[n])&&r.test(e);)n++;if(n>2)break}}return i.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),r=n.substring(e),i=this.session.getFoldAt(t,e,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(e==n.length){var o=this.doc.getLength();do{t++,r=this.doc.getLine(t)}while(t<o&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),e=0}var a=this.$shortWordEndIndex(r);this.moveCursorTo(t,e+a)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var r=this.session.getLine(e).substring(0,n);if(0===n){do{e--,r=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(r));n=r.length,/\s+$/.test(r)||(r="")}var o=i.stringReverse(r),a=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-a)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n,r=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(r.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(r.column),r.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=r.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?r.column=this.$desiredColumn:this.$desiredColumn=r.column);var i=this.session.screenToDocumentPosition(r.row+t,r.column,n);0!==t&&0===e&&i.row===this.lead.row&&i.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[i.row]&&(i.row>0||t>0)&&i.row++,this.moveCursorTo(i.row,i.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var r=this.session.getFoldAt(t,e,1);r&&(t=r.start.row,e=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(i.charAt(e))&&i.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e-=1:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var r=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return a.fromPoints(e,n)}catch(t){return a.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},this.fromJSON=function(t){if(void 0==t.start){if(this.rangeList){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=a.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(s.prototype),e.Selection=s}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(t,e,n){"use strict";var r=t("./config"),i=2e3,o=function(t){this.states=t,this.regExps={},this.matchMappings={};for(var e in this.states){for(var n=this.states[e],r=[],i=0,o=this.matchMappings[e]={defaultToken:"text"},a="g",s=[],u=0;u<n.length;u++){var c=n[u];if(c.defaultToken&&(o.defaultToken=c.defaultToken),c.caseInsensitive&&(a="gi"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var l=c.regex,h=new RegExp("(?:("+l+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==h?c.token=c.token[0]:h-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:h-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=h>1?this.$applyToken:c.token),h>1&&(/\\\d/.test(c.regex)?l=c.regex.replace(/\\([0-9]+)/g,function(t,e){return"\\"+(parseInt(e,10)+i+1)}):(h=1,l=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||s.push(c)),o[i]=u,i+=h,r.push(l),c.onMatch||(c.onMatch=null)}}r.length||(o[0]=0,r.push("$")),s.forEach(function(t){t.splitRegex=this.createSplitterRegexp(t.regex,a)},this),this.regExps[e]=new RegExp("("+r.join(")|(")+")|($)",a)}};(function(){this.$setMaxTokenCount=function(t){i=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"===typeof n)return[{type:n,value:t}];for(var r=[],i=0,o=n.length;i<o;i++)e[i]&&(r[r.length]={type:n[i],value:e[i]});return r},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],r=this.tokenArray,i=0,o=r.length;i<o;i++)e[i+1]&&(n[n.length]={type:r[i],value:e[i+1]});return n},this.removeCapturingGroups=function(t){return t.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(t,e){return e?"(?:":t})},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){var n=0,r=!1,i={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(t,e,o,a,s,u){return r?r="]"!=s:s?r=!0:a?(n==i.stack&&(i.end=u+1,i.stack=-1),n--):o&&(n++,1!=o.length&&(i.stack=n,i.start=u)),t}),null!=i.end&&/^\)*$/.test(t.substr(i.end))&&(t=t.substring(0,i.start)+t.substr(i.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var n=e.slice(0);e=n[0],"#tmp"===e&&(n.shift(),e=n.shift())}else var n=[];var r=e||"start",o=this.states[r];o||(r="start",o=this.states[r]);var a=this.matchMappings[r],s=this.regExps[r];s.lastIndex=0;for(var u,c=[],l=0,h=0,f={type:null,value:""};u=s.exec(t);){var d=a.defaultToken,p=null,g=u[0],m=s.lastIndex;if(m-g.length>l){var v=t.substring(l,m-g.length);f.type==d?f.value+=v:(f.type&&c.push(f),f={type:d,value:v})}for(var y=0;y<u.length-2;y++)if(void 0!==u[y+1]){p=o[a[y]],d=p.onMatch?p.onMatch(g,r,n,t):p.token,p.next&&(r="string"==typeof p.next?p.next:p.next(r,n),o=this.states[r],o||(this.reportError("state doesn't exist",r),r="start",o=this.states[r]),a=this.matchMappings[r],l=m,s=this.regExps[r],s.lastIndex=m),p.consumeLineEnd&&(l=m);break}if(g)if("string"===typeof d)p&&!1===p.merge||f.type!==d?(f.type&&c.push(f),f={type:d,value:g}):f.value+=g;else if(d){f.type&&c.push(f),f={type:null,value:""};for(var y=0;y<d.length;y++)c.push(d[y])}if(l==t.length)break;if(l=m,h++>i){for(h>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});l<t.length;)f.type&&c.push(f),f={value:t.substring(l,l+=2e3),type:"overflow"};r="start",n=[];break}}return f.type&&c.push(f),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:c,state:n.length?n:r}},this.reportError=r.reportError}).call(o.prototype),e.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(t,e,n){"use strict";var r=t("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var n in t){for(var r=t[n],i=0;i<r.length;i++){var o=r[i];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(e)&&(o.next=e+o.next),o.nextState&&0!==o.nextState.indexOf(e)&&(o.nextState=e+o.nextState))}this.$rules[e+n]=r}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,i,o){var a="function"==typeof t?(new t).getRules():t;if(i)for(var s=0;s<i.length;s++)i[s]=e+i[s];else{i=[];for(var u in a)i.push(e+u)}if(this.addRules(a,e),n)for(var c=Array.prototype[o?"push":"unshift"],s=0;s<i.length;s++)c.apply(this.$rules[i[s]],r.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){function n(o){var a=i[o];a.processed=!0;for(var s=0;s<a.length;s++){var u=a[s],c=null;Array.isArray(u)&&(c=u,u={}),!u.regex&&u.start&&(u.regex=u.start,u.next||(u.next=[]),u.next.push({defaultToken:u.token},{token:u.token+".end",regex:u.end||u.start,next:"pop"}),u.token=u.token+".start",u.push=!0);var l=u.next||u.push;if(l&&Array.isArray(l)){var h=u.stateName;h||(h=u.token,"string"!=typeof h&&(h=h[0]||""),i[h]&&(h+=r++)),i[h]=l,u.next=h,n(h)}else"pop"==l&&(u.next=e);if(u.push&&(u.nextState=u.next||u.push,u.next=t,delete u.push),u.rules)for(var f in u.rules)i[f]?i[f].push&&i[f].push.apply(i[f],u.rules[f]):i[f]=u.rules[f];var d="string"==typeof u?u:u.include;if(d&&(c=Array.isArray(d)?d.map(function(t){return i[t]}):i[d]),c){var p=[s,1].concat(c);u.noEscape&&(p=p.filter(function(t){return!t.next})),a.splice.apply(a,p),s--}u.keywordMap&&(u.token=this.createKeywordMapper(u.keywordMap,u.defaultToken||"text",u.caseInsensitive),delete u.defaultToken)}}var r=0,i=this.$rules;Object.keys(i).forEach(n,this)},this.createKeywordMapper=function(t,e,n,r){var i=Object.create(null);return Object.keys(t).forEach(function(e){var o=t[e];n&&(o=o.toLowerCase());for(var a=o.split(r||"|"),s=a.length;s--;)i[a[s]]=e}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),t=null,n?function(t){return i[t.toLowerCase()]||e}:function(t){return i[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),e.TextHighlightRules=i}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,e,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"===typeof t)var n=(new t).getBehaviours(e);else var n=t.getBehaviours(e);this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(r.prototype),e.Behaviour=r}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(t,e,n){"use strict";var r=t("./range").Range,i=function(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var r=t.getTokenAt(e,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var t;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;e>0;)e-=1,n+=t[e].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new r(this.$row,e,this.$row,e+t.value.length)}}).call(i.prototype),e.TokenIterator=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,e,n){"use strict";var r,i=t("../../lib/oop"),o=t("../behaviour").Behaviour,a=t("../../token_iterator").TokenIterator,s=t("../../lib/lang"),u=["text","paren.rparen","punctuation.operator"],c=["text","paren.rparen","punctuation.operator","comment"],l={},h={'"':'"',"'":"'"},f=function(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,l.rangeCount!=t.multiSelect.rangeCount&&(l={rangeCount:t.multiSelect.rangeCount})),l[e])return r=l[e];r=l[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(t,e,n,r){var i=t.end.row-t.start.row;return{text:n+e+r,selection:[0,t.start.column+1,i,t.end.column+(i?0:1)]}},p=function t(e){this.add("braces","insertion",function(n,i,o,a,u){var c=o.getCursorPosition(),l=a.doc.getLine(c.row);if("{"==u){f(o);var h=o.getSelectionRange(),p=a.doc.getTextRange(h);if(""!==p&&"{"!==p&&o.getWrapBehavioursEnabled())return d(h,p,"{","}");if(t.isSaneInsertion(o,a))return/[\]\}\)]/.test(l[c.column])||o.inMultiSelectMode||e&&e.braces?(t.recordAutoInsert(o,a,"}"),{text:"{}",selection:[1,1]}):(t.recordMaybeInsert(o,a,"{"),{text:"{",selection:[1,1]})}else if("}"==u){f(o);var g=l.substring(c.column,c.column+1);if("}"==g){var m=a.$findOpeningBracket("}",{column:c.column+1,row:c.row});if(null!==m&&t.isAutoInsertedClosing(c,l,u))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==u||"\r\n"==u){f(o);var v="";t.isMaybeInsertedClosing(c,l)&&(v=s.stringRepeat("}",r.maybeInsertedBrackets),t.clearMaybeInsertedClosing());var g=l.substring(c.column,c.column+1);if("}"===g){var y=a.findMatchingBracket({row:c.row,column:c.column+1},"}");if(!y)return null;var b=this.$getIndent(a.getLine(y.row))}else{if(!v)return void t.clearMaybeInsertedClosing();var b=this.$getIndent(l)}var w=b+a.getTabString();return{text:"\n"+w+"\n"+b+v,selection:[1,w.length,1,w.length]}}t.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(t,e,n,i,o){var a=i.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==a){f(n);if("}"==i.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,n,r,i,o){if("("==o){f(r);var a=r.getSelectionRange(),s=i.doc.getTextRange(a);if(""!==s&&r.getWrapBehavioursEnabled())return d(a,s,"(",")");if(t.isSaneInsertion(r,i))return t.recordAutoInsert(r,i,")"),{text:"()",selection:[1,1]}}else if(")"==o){f(r);var u=r.getCursorPosition(),c=i.doc.getLine(u.row),l=c.substring(u.column,u.column+1);if(")"==l){var h=i.$findOpeningBracket(")",{column:u.column+1,row:u.row});if(null!==h&&t.isAutoInsertedClosing(u,c,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(t,e,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&"("==o){f(n);if(")"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2))return i.end.column++,i}}),this.add("brackets","insertion",function(e,n,r,i,o){if("["==o){f(r);var a=r.getSelectionRange(),s=i.doc.getTextRange(a);if(""!==s&&r.getWrapBehavioursEnabled())return d(a,s,"[","]");if(t.isSaneInsertion(r,i))return t.recordAutoInsert(r,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){f(r);var u=r.getCursorPosition(),c=i.doc.getLine(u.row),l=c.substring(u.column,u.column+1);if("]"==l){var h=i.$findOpeningBracket("]",{column:u.column+1,row:u.row});if(null!==h&&t.isAutoInsertedClosing(u,c,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(t,e,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&"["==o){f(n);if("]"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2))return i.end.column++,i}}),this.add("string_dquotes","insertion",function(t,e,n,r,i){var o=r.$mode.$quotes||h;if(1==i.length&&o[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;f(n);var a=i,s=n.getSelectionRange(),u=r.doc.getTextRange(s);if(!(""===u||1==u.length&&o[u])&&n.getWrapBehavioursEnabled())return d(s,u,a,a);if(!u){var c=n.getCursorPosition(),l=r.doc.getLine(c.row),p=l.substring(c.column-1,c.column),g=l.substring(c.column,c.column+1),m=r.getTokenAt(c.row,c.column),v=r.getTokenAt(c.row,c.column+1);if("\\"==p&&m&&/escape/.test(m.type))return null;var y,b=m&&/string|escape/.test(m.type),w=!v||/string|escape/.test(v.type);if(g==a)(y=b!==w)&&/string\.end/.test(v.type)&&(y=!1);else{if(b&&!w)return null;if(b&&w)return null;var _=r.$mode.tokenRe;_.lastIndex=0;var x=_.test(p);_.lastIndex=0;var E=_.test(p);if(x||E)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;y=!0}return{text:y?a+a:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(t,e,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&('"'==o||"'"==o)){f(n);if(r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==o)return i.end.column++,i}})};p.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),r=new a(e,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){var i=new a(e,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",c)},p.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},p.recordAutoInsert=function(t,e,n){var i=t.getCursorPosition(),o=e.doc.getLine(i.row);this.isAutoInsertedClosing(i,o,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=i.row,r.autoInsertedLineEnd=n+o.substr(i.column),r.autoInsertedBrackets++},p.recordMaybeInsert=function(t,e,n){var i=t.getCursorPosition(),o=e.doc.getLine(i.row);this.isMaybeInsertedClosing(i,o)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=i.row,r.maybeInsertedLineStart=o.substr(0,i.column)+n,r.maybeInsertedLineEnd=o.substr(i.column),r.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(t,e,n){return r.autoInsertedBrackets>0&&t.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&e.substr(t.column)===r.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(t,e){return r.maybeInsertedBrackets>0&&t.row===r.maybeInsertedRow&&e.substr(t.column)===r.maybeInsertedLineEnd&&e.substr(0,t.column)==r.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},i.inherits(p,o),e.CstyleBehaviour=p}),ace.define("ace/unicode",["require","exports","module"],function(t,e,n){"use strict";e.packages={},function(t){var n=/\w{4}/g;for(var r in t)e.packages[r]=t[r].replace(n,"\\u$&")}({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,e,n){"use strict";var i=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,a=t("./behaviour/cstyle").CstyleBehaviour,s=t("../unicode"),u=t("../lib/lang"),c=t("../token_iterator").TokenIterator,l=t("../range").Range,h=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+s.packages.L+s.packages.Mn+s.packages.Mc+s.packages.Nd+s.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.packages.L+s.packages.Mn+s.packages.Mc+s.packages.Nd+s.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,r){function i(t){for(var e=n;e<=r;e++)t(o.getLine(e),e)}var o=e.doc,a=!0,s=!0,c=1/0,l=e.getTabSize(),h=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var f=this.lineCommentStart.map(u.escapeRegExp).join("|"),d=this.lineCommentStart[0];else var f=u.escapeRegExp(this.lineCommentStart),d=this.lineCommentStart;f=new RegExp("^(\\s*)(?:"+f+") ?"),h=e.getUseSoftTabs();var p=function(t,e){var n=t.match(f);if(n){var r=n[1].length,i=n[0].length;y(t,r,i)||" "!=n[0][i-1]||i--,o.removeInLine(e,r,i)}},g=d+" ",m=function(t,e){a&&!/\S/.test(t)||(y(t,c,c)?o.insertInLine({row:e,column:c},g):o.insertInLine({row:e,column:c},d))},v=function(t,e){return f.test(t)},y=function(t,e,n){for(var r=0;e--&&" "==t.charAt(e);)r++;if(r%l!=0)return!1;for(var r=0;" "==t.charAt(n++);)r++;return l>2?r%l!=l-1:r%l==0}}else{if(!this.blockComment)return!1;var d=this.blockComment.start,b=this.blockComment.end,f=new RegExp("^(\\s*)(?:"+u.escapeRegExp(d)+")"),w=new RegExp("(?:"+u.escapeRegExp(b)+")\\s*$"),m=function(t,e){v(t,e)||a&&!/\S/.test(t)||(o.insertInLine({row:e,column:t.length},b),o.insertInLine({row:e,column:c},d))},p=function(t,e){var n;(n=t.match(w))&&o.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(f))&&o.removeInLine(e,n[1].length,n[0].length)},v=function(t,n){if(f.test(t))return!0;for(var r=e.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}var _=1/0;i(function(t,e){var n=t.search(/\S/);-1!==n?(n<c&&(c=n),s&&!v(t,e)&&(s=!1)):_>t.length&&(_=t.length)}),c==1/0&&(c=_,a=!1,s=!1),h&&c%l!=0&&(c=Math.floor(c/l)*l),i(s?p:m)},this.toggleBlockComment=function(t,e,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var o,a,s=new c(e,r.row,r.column),u=s.getCurrentToken(),h=(e.selection,e.selection.toOrientedRange());if(u&&/comment/.test(u.type)){for(var f,d;u&&/comment/.test(u.type);){var p=u.value.indexOf(i.start);if(-1!=p){var g=s.getCurrentTokenRow(),m=s.getCurrentTokenColumn()+p;f=new l(g,m,g,m+i.start.length);break}u=s.stepBackward()}for(var s=new c(e,r.row,r.column),u=s.getCurrentToken();u&&/comment/.test(u.type);){var p=u.value.indexOf(i.end);if(-1!=p){var g=s.getCurrentTokenRow(),m=s.getCurrentTokenColumn()+p;d=new l(g,m,g,m+i.end.length);break}u=s.stepForward()}d&&e.remove(d),f&&(e.remove(f),o=f.start.row,a=-i.start.length)}else a=i.start.length,o=n.start.row,e.insert(n.end,i.end),e.insert(n.start,i.start);h.start.row==o&&(h.start.column+=a),h.end.row==o&&(h.end.column+=a),e.selection.fromOrientedRange(h)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){this.$embeds=[],this.$modes={};for(var e in t)t[e]&&(this.$embeds.push(e),this.$modes[e]=new t[e]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],e=0;e<n.length;e++)!function(t){var r=n[e],i=t[r];t[n[e]]=function(){return this.$delegator(r,arguments,i)}}(this)},this.$delegator=function(t,e,n){var r=e[0];"string"!=typeof r&&(r=r[0]);for(var i=0;i<this.$embeds.length;i++)if(this.$modes[this.$embeds[i]]){var o=r.split(this.$embeds[i]);if(!o[0]&&o[1]){e[0]=o[1];var a=this.$modes[this.$embeds[i]];return a[t].apply(a,e)}}var s=n.apply(this,e);return n?s:void 0},this.transformAction=function(t,e,n,r,i){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var a in o)if(o[a][e]){var s=o[a][e].apply(this,arguments);if(s)return s}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var i in e)for(var o=e[i],a=0,s=o.length;a<s;a++)if("string"===typeof o[a].token)/keyword|support|storage/.test(o[a].token)&&n.push(o[a].regex);else if("object"===r(o[a].token))for(var u=0,c=o[a].token.length;u<c;u++)if(/keyword|support|storage/.test(o[a].token[u])){var i=o[a].regex.match(/\(.+?\)/g)[u];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,r){return(this.$keywordList||this.$createKeywordList()).map(function(t){return{name:t,value:t,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),e.Mode=h}),ace.define("ace/apply_delta",["require","exports","module"],function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var r=e.start.row,i=e.start.column,o=t[r]||"";switch(e.action){case"insert":if(1===e.lines.length)t[r]=o.substring(0,i)+e.lines[0]+o.substring(i);else{var a=[r,1].concat(e.lines);t.splice.apply(t,a),t[r]=o.substring(0,i)+t[r],t[r+e.lines.length-1]+=o.substring(i)}break;case"remove":var s=e.end.column,u=e.end.row;r===u?t[r]=o.substring(0,i)+o.substring(s):t.splice(r,u-r+1,o.substring(0,i)+t[u].substring(s))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/event_emitter").EventEmitter,o=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),"undefined"==typeof n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){var r=n?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&r}function e(e,n,r){var i="insert"==e.action,o=(i?1:-1)*(e.end.row-e.start.row),a=(i?1:-1)*(e.end.column-e.start.column),s=e.start,u=i?s:e.end;return t(n,s,r)?{row:n.row,column:n.column}:t(u,n,!r)?{row:n.row+o,column:n.column+(n.row==u.row?a:0)}:{row:s.row,column:s.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if((t.start.row!=t.end.row||t.start.row==this.row)&&!(t.start.row>this.row)){var n=e(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(t,e,n){var r;if(r=n?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=r.row||this.column!=r.column){var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(o.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./apply_delta").applyDelta,o=t("./lib/event_emitter").EventEmitter,a=t("./range").Range,s=t("./anchor").Anchor,u=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){r.implement(this,o),this.setValue=function(t){var e=this.getLength()-1;this.remove(new a(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new s(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{e=this.getLines(t.start.row,t.end.row),e[0]=(e[0]||"").substring(t.start.column);var n=e.length-1;t.end.row-t.start.row==n&&(e[n]=e[n].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),r=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[e]},!0),this.clonePos(r)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:t>=n&&(t=n-1,e=void 0);var r=this.getLine(t);return void 0==e&&(e=r.length),e=Math.min(Math.max(e,0),r.length),{row:t,column:e}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){t=Math.min(Math.max(t,0),this.getLength());var n=0;t<this.getLength()?(e=e.concat([""]),n=0):(e=[""].concat(e),t--,n=this.$lines[t].length),this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),r={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:e}),this.clonePos(r)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var r=this.clippedPos(t,e),i=this.clippedPos(t,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1),e=Math.min(Math.max(0,e),this.getLength()-1);var n=e==this.getLength()-1&&t>0,r=e<this.getLength()-1,i=n?t-1:t,o=n?this.getLine(i).length:0,s=r?e+1:e,u=r?0:this.getLine(s).length,c=new a(i,o,s,u),l=this.$lines.slice(t,e+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),l},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){if(t instanceof a||(t=a.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty())return t.start;if(e==this.getTextRange(t))return t.end;this.remove(t);return e?this.insert(t.start,e):t.start},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!a.comparePoints(t.start,t.end))||(n&&t.lines.length>2e4&&this.$splitAndapplyLargeDelta(t,2e4),i(this.$lines,t,e),this._signal("change",t))},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,r=n.length,i=t.start.row,o=t.start.column,a=0,s=0;;){a=s,s+=e-1;var u=n.slice(a,s);if(s>r){t.lines=u,t.start.row=i+a,t.start.column=o;break}u.push(""),this.applyDelta({start:this.pos(i+a,o),end:this.pos(i+s,o=0),action:t.action,lines:u},!0)}},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=e||0,o=n.length;i<o;i++)if((t-=n[i].length+r)<0)return{row:i,column:t+n[i].length+r};return{row:o-1,column:n[o-1].length}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,o=Math.min(t.row,n.length),a=e||0;a<o;++a)i+=n[a].length+r;return i+t.column}}).call(u.prototype),e.Document=u}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/event_emitter").EventEmitter,o=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,r=-1,i=n.doc,o=e;n.lines[e];)e++;var a=i.getLength(),s=0;for(n.running=!1;e<a;){n.$tokenizeRow(e),r=e;do{e++}while(n.lines[e]);if(++s%5===0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,-1==r&&(r=e),o<=r&&n.fireUpdateEvent(o,r)}}};(function(){r.implement(this,i),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var n={first:t,last:e};this._signal("update",{data:n})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,n+1,null),this.states.splice(e,n+1,null);else{var r=Array(n+1);r.unshift(e,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.states[t-1],r=this.tokenizer.getLineTokens(e,n,t);return this.states[t]+""!==r.state+""?(this.states[t]=r.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=r.tokens}}).call(o.prototype),e.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,n){"use strict";var r=t("./lib/lang"),i=(t("./lib/oop"),t("./range").Range),o=function(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,o){if(this.regExp)for(var a=o.firstRow,s=o.lastRow,u=a;u<=s;u++){var c=this.cache[u];null==c&&(c=r.getMatchOffsets(n.getLine(u),this.regExp),c.length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map(function(t){return new i(u,t.offset,u,t.offset+t.length)}),this.cache[u]=c.length?c:"");for(var l=c.length;l--;)e.drawSingleLineMarker(t,c[l].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),e.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,e,n){"use strict";function r(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new i(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}var i=t("../range").Range;(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort(function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)}),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var r,i,o,a=0,s=this.folds,u=!0;null==e&&(e=this.end.row,n=this.end.column);for(var c=0;c<s.length;c++){if(r=s[c],-1==(i=r.range.compareStart(e,n)))return void t(null,e,n,a,u);if(o=t(null,r.start.row,r.start.column,a,u),(o=!o&&t(r.placeholder,r.start.row,r.start.column,a))||0===i)return;u=!r.sameRow,a=r.end.column}t(null,e,n,a,u)},this.getNextFoldTo=function(t,e){for(var n,r,i=0;i<this.folds.length;i++){if(n=this.folds[i],-1==(r=n.range.compareEnd(t,e)))return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var r,i,o=this.getNextFoldTo(t,e);if(o)if(r=o.fold,"inside"==o.kind&&r.start.column!=e&&r.start.row!=t)window.console&&window.console.log(t,e,r);else if(r.start.row==t){i=this.folds;var a=i.indexOf(r);for(0===a&&(this.start.column+=n),a;a<i.length;a++){if(r=i[a],r.start.column+=n,!r.sameRow)return;r.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var i=n.fold,o=this.folds,a=this.foldData,s=o.indexOf(i),u=o[s-1];this.end.row=u.end.row,this.end.column=u.end.column,o=o.splice(s,o.length-s);var c=new r(a,o);return a.splice(a.indexOf(this)+1,0,c),c},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var r=this.foldData;r.splice(r.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if((t-=r.start.column-e)<0)return{row:r.start.row,column:r.start.column+t};if((t-=r.placeholder.length)<0)return r.start;e=r.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(r.prototype),e.FoldLine=r}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,e,n){"use strict";var r=t("./range").Range,i=r.comparePoints,o=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(t,e,n){for(var r=this.ranges,o=n||0;o<r.length;o++){var a=r[o],s=i(t,a.end);if(!(s>0)){var u=i(t,a.start);return 0===s?e&&0!==u?-o-2:o:u>0||0===u&&!e?o:-o-1}}return-o-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var r=this.pointIndex(t.end,e,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){var t=[],e=this.ranges;e=e.sort(function(t,e){return i(t.start,e.start)});for(var n,r=e[0],o=1;o<e.length;o++){n=r,r=e[o];var a=i(n.end,r.start);a<0||(0!=a||n.isEmpty()||r.isEmpty())&&(i(n.end,r.end)<0&&(n.end.row=r.end.row,n.end.column=r.end.column),e.splice(o,1),t.push(r),r=n,o--)}return this.ranges=e,t},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var r=this.pointIndex({row:t,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:e,column:0},r);i<0&&(i=-i-1);for(var o=[],a=r;a<i;a++)o.push(n[a]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){if("insert"==t.action)var e=t.start,n=t.end;else var n=t.start,e=t.end;for(var r=e.row,i=n.row,o=i-r,a=-e.column+n.column,s=this.ranges,u=0,c=s.length;u<c;u++){var l=s[u];if(!(l.end.row<r)){if(l.start.row>r)break;if(l.start.row==r&&l.start.column>=e.column&&(l.start.column==e.column&&this.$insertRight||(l.start.column+=a,l.start.row+=o)),l.end.row==r&&l.end.column>=e.column){if(l.end.column==e.column&&this.$insertRight)continue;l.end.column==e.column&&a>0&&u<c-1&&l.end.column>l.start.column&&l.end.column==s[u+1].start.column&&(l.end.column-=a),l.end.column+=a,l.end.row+=o}}}if(0!=o&&u<c)for(;u<c;u++){var l=s[u];l.start.row+=o,l.end.row+=o}}}).call(o.prototype),e.RangeList=o}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(t,e,n){"use strict";function r(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function i(t,e){r(t.start,e),r(t.end,e)}function o(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}function a(t,e){o(t.start,e),o(t.end,e)}var s=(t("../range").Range,t("../range_list").RangeList),u=t("../lib/oop"),c=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};u.inherits(c,s),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var t=this.range.clone(),e=new c(t,this.placeholder);return this.subFolds.forEach(function(t){e.subFolds.push(t.clone())}),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){if(!this.range.containsRange(t))throw new Error("A fold can't intersect already existing fold"+t.range+this.range);i(t,this.start);for(var e=t.start.row,n=t.start.column,r=0,o=-1;r<this.subFolds.length&&1==(o=this.subFolds[r].range.compare(e,n));r++);var a=this.subFolds[r];if(0==o)return a.addSubFold(t);for(var e=t.range.end.row,n=t.range.end.column,s=r,o=-1;s<this.subFolds.length&&1==(o=this.subFolds[s].range.compare(e,n));s++);this.subFolds[s];if(0==o)throw new Error("A fold can't intersect already existing fold"+t.range+this.range);this.subFolds.splice(r,s-r,t);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return a(t,this.start)}}.call(c.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(t,e,n){"use strict";function r(){this.getFoldAt=function(t,e,n){var r=this.getFoldLine(t);if(!r)return null;for(var i=r.folds,o=0;o<i.length;o++){var a=i[o];if(a.range.contains(t,e)){if(1==n&&a.range.isEnd(t,e))continue;if(-1==n&&a.range.isStart(t,e))continue;return a}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,r=this.$foldData,i=[];e.column+=1,n.column-=1;for(var o=0;o<r.length;o++){var a=r[o].range.compareRange(t);if(2!=a){if(-2==a)break;for(var s=r[o].folds,u=0;u<s.length;u++){var c=s[u];if(-2==(a=c.range.compareRange(t)))break;if(2!=a){if(42==a)break;i.push(c)}}}}return e.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach(function(t){e=e.concat(this.getFoldsInRange(t))},this)}else var e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var r=0;r<e[n].folds.length;r++)t.push(e[n].folds[r]);return t},this.getFoldStringAt=function(t,e,n,r){if(!(r=r||this.getFoldLine(t)))return null;for(var i,o,a={end:{column:0}},s=0;s<r.folds.length;s++){o=r.folds[s];var u=o.range.compareEnd(t,e);if(-1==u){i=this.getLine(o.start.row).substring(a.end.column,o.start.column);break}if(0===u)return null;a=o}return i||(i=this.getLine(o.start.row).substring(a.end.column)),-1==n?i.substring(0,e-a.end.column):1==n?i.substring(e-a.end.column):i},this.getFoldLine=function(t,e){var n=this.$foldData,r=0;for(e&&(r=n.indexOf(e)),-1==r&&(r=0),r;r<n.length;r++){var i=n[r];if(i.start.row<=t&&i.end.row>=t)return i;if(i.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,r=0;for(e&&(r=n.indexOf(e)),-1==r&&(r=0),r;r<n.length;r++){var i=n[r];if(i.end.row>=t)return i}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,r=e-t+1,i=0;i<n.length;i++){var o=n[i],a=o.end.row,s=o.start.row;if(a>=e){s<e&&(s>=t?r-=e-s:r=0);break}a>=t&&(r-=s>=t?a-s:a-t+1)}return r},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(t,e){return t.start.row-e.start.row}),t},this.addFold=function(t,e){var n,r=this.$foldData,i=!1;t instanceof a?n=t:(n=new a(e,t),n.collapseChildren=e.collapseChildren),this.$clipRangeToDocument(n.range);var s=n.start.row,u=n.start.column,c=n.end.row,l=n.end.column;if(!(s<c||s==c&&u<=l-2))throw new Error("The range has to be at least 2 characters width");var h=this.getFoldAt(s,u,1),f=this.getFoldAt(c,l,-1);if(h&&f==h)return h.addSubFold(n);h&&!h.range.isStart(s,u)&&this.removeFold(h),f&&!f.range.isEnd(c,l)&&this.removeFold(f);var d=this.getFoldsInRange(n.range);d.length>0&&(this.removeFolds(d),d.forEach(function(t){n.addSubFold(t)}));for(var p=0;p<r.length;p++){var g=r[p];if(c==g.start.row){g.addFold(n),i=!0;break}if(s==g.end.row){if(g.addFold(n),i=!0,!n.sameRow){var m=r[p+1];if(m&&m.start.row==c){g.merge(m);break}}break}if(c<=g.start.row)break}return i||(g=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(t){var e=t.foldLine,n=e.start.row,r=e.end.row,i=this.$foldData,o=e.folds;if(1==o.length)i.splice(i.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var a=e.split(t.start.row,t.start.column);o=a.folds,o.shift(),a.start.row=o[0].start.row,a.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach(function(t){this.removeFold(t)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(t,e){var n,r;if(null==t?(n=new i(0,0,this.getLength(),0),e=!0):n="number"==typeof t?new i(t,0,t,this.getLine(t).length):"row"in t?i.fromPoints(t,t):t,r=this.getFoldsInRangeList(n),e)this.removeFolds(r);else for(var o=r;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);if(r.length)return r},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,r,i){null==r&&(r=t.start.row),null==i&&(i=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var o=this.doc,a="";return t.walk(function(t,e,n,s){if(!(e<r)){if(e==r){if(n<i)return;s=Math.max(i,s)}a+=null!=t?t:o.getLine(e).substring(s,n)}},e,n),a},this.getDisplayLine=function(t,e,n,r){var i=this.getFoldLine(t);if(i)return this.getFoldDisplayLine(i,t,e,n,r);var o;return o=this.doc.getLine(t),o.substring(r||0,e||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){var n=e.folds.map(function(t){return t.clone()});return new o(t,n)})},this.toggleFold=function(t){var e,n,r=this.selection,i=r.getRange();if(i.isEmpty()){var o=i.start;if(e=this.getFoldAt(o.row,o.column))return void this.expandFold(e);(n=this.findMatchingBracket(o))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(o.row,o.column)||i}else{var a=this.getFoldsInRange(i);if(t&&a.length)return void this.expandFolds(a);1==a.length&&(e=a[0])}if(e||(e=this.getFoldAt(i.start.row,i.start.column)),e&&e.range.toString()==i.toString())return void this.expandFold(e);var s="...";if(!i.isMultiLine()){if(s=this.getTextRange(i),s.length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,i)},this.getCommentFoldRange=function(t,e,n){var r=new s(this,t,e),o=r.getCurrentToken(),a=o.type;if(o&&/^comment|string/.test(a)){a=a.match(/comment|string/)[0],"comment"==a&&(a+="|doc-start");var u=new RegExp(a),c=new i;if(1!=n){do{o=r.stepBackward()}while(o&&u.test(o.type));r.stepForward()}if(c.start.row=r.getCurrentTokenRow(),c.start.column=r.getCurrentTokenColumn()+2,r=new s(this,t,e),-1!=n){var l=-1;do{if(o=r.stepForward(),-1==l){var h=this.getState(r.$row);u.test(h)||(l=r.$row)}else if(r.$row>l)break}while(o&&u.test(o.type));o=r.stepBackward()}else o=r.getCurrentToken();return c.end.row=r.getCurrentTokenRow(),c.end.column=r.getCurrentTokenColumn()+o.value.length-2,c}},this.foldAll=function(t,e,n){void 0==n&&(n=1e5);var r=this.foldWidgets;if(r){e=e||this.getLength(),t=t||0;for(var i=t;i<e;i++)if(null==r[i]&&(r[i]=this.getFoldWidget(i)),"start"==r[i]){var o=this.getFoldWidgetRange(i);if(o&&o.isMultiLine()&&o.end.row<=e&&o.start.row>=t){i=o.end.row;try{var a=this.addFold("...",o);a&&(a.collapseChildren=n)}catch(t){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!t||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var r,i=t-1;i>=0;){var o=n[i];if(null==o&&(o=n[i]=this.getFoldWidget(i)),"start"==o){var a=this.getFoldWidgetRange(i);if(r||(r=a),a&&a.end.row>=t)break}i--}return{range:-1!==i&&a,firstRange:r}},this.onFoldWidgetClick=function(t,e){e=e.domEvent;var n={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(t,n)){var r=e.target||e.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var n=this.getFoldWidget(t),r=this.getLine(t),i="end"===n?-1:1,o=this.getFoldAt(t,-1===i?0:r.length,i);if(o)return e.children||e.all?this.removeFold(o):this.expandFold(o),o;var a=this.getFoldWidgetRange(t,!0);if(a&&!a.isMultiLine()&&(o=this.getFoldAt(a.start.row,a.start.column,1))&&a.isEqual(o.range))return this.removeFold(o),o;if(e.siblings){var s=this.getParentFoldRangeData(t);if(s.range)var u=s.range.start.row+1,c=s.range.end.row;this.foldAll(u,c,e.all?1e4:0)}else e.children?(c=a?a.end.row:this.getLength(),this.foldAll(t+1,c,e.all?1e4:0)):a&&(e.all&&(a.collapseChildren=1e4),this.addFold("...",a));return a}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var n=this.$toggleFoldWidget(e,{});if(!n){var r=this.getParentFoldRangeData(e,!0);if(n=r.range||r.firstRange){e=n.start.row;var i=this.getFoldAt(e,this.getLine(e).length,1);i?this.removeFold(i):this.addFold("...",n)}}},this.updateFoldWidgets=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,n+1,null);else{var r=Array(n+1);r.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}var i=t("../range").Range,o=t("./fold_line").FoldLine,a=t("./fold").Fold,s=t("../token_iterator").TokenIterator;e.Folding=r}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,e,n){"use strict";function r(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],t):this.$findOpeningBracket(r[2],t):null},this.getBracketRange=function(t){var e,n=this.getLine(t.row),r=!0,i=n.charAt(t.column-1),a=i&&i.match(/([\(\[\{])|([\)\]\}])/);if(a||(i=n.charAt(t.column),t={row:t.row,column:t.column+1},a=i&&i.match(/([\(\[\{])|([\)\]\}])/),r=!1),!a)return null;if(a[1]){var s=this.$findClosingBracket(a[1],t);if(!s)return null;e=o.fromPoints(t,s),r||(e.end.column++,e.start.column--),e.cursor=e.end}else{var s=this.$findOpeningBracket(a[2],t);if(!s)return null;e=o.fromPoints(s,t),r||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(t,e,n){var r=this.$brackets[t],o=1,a=new i(this,e.row,e.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var u=e.column-a.getCurrentTokenColumn()-2,c=s.value;;){for(;u>=0;){var l=c.charAt(u);if(l==r){if(0==(o-=1))return{row:a.getCurrentTokenRow(),column:u+a.getCurrentTokenColumn()}}else l==t&&(o+=1);u-=1}do{s=a.stepBackward()}while(s&&!n.test(s.type));if(null==s)break;c=s.value,u=c.length-1}return null}},this.$findClosingBracket=function(t,e,n){var r=this.$brackets[t],o=1,a=new i(this,e.row,e.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var u=e.column-a.getCurrentTokenColumn();;){for(var c=s.value,l=c.length;u<l;){var h=c.charAt(u);if(h==r){if(0==(o-=1))return{row:a.getCurrentTokenRow(),column:u+a.getCurrentTokenColumn()}}else h==t&&(o+=1);u+=1}do{s=a.stepForward()}while(s&&!n.test(s.type));if(null==s)break;u=0}return null}}}var i=t("../token_iterator").TokenIterator,o=t("../range").Range;e.BracketMatch=r}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,e,n){"use strict";var i=t("./lib/oop"),o=t("./lib/lang"),a=t("./bidihandler").BidiHandler,s=t("./config"),u=t("./lib/event_emitter").EventEmitter,c=t("./selection").Selection,l=t("./mode/text").Mode,h=t("./range").Range,f=t("./document").Document,d=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,g=function t(e,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++t.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==("undefined"===typeof e?"undefined":r(e))&&e.getLine||(e=new f(e)),this.$bidiHandler=new a(this),this.setDocument(e),this.selection=new c(this),s.resetOptions(this),this.setMode(n),s._signal("session",this)};g.$uid=0,function(){function t(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}i.implement(this,u),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>n&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,r=t.length-1;n<=r;){var i=n+r>>1,o=t[i];if(e>o)n=i+1;else{if(!(e<o))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);this.$fromUndo||!this.$undoManager||t.ignore||(this.$deltasDoc.push(t),e&&0!=e.length&&this.$deltasFold.push({action:"removeFolds",folds:e}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,r=this.bgTokenizer.getTokens(t),i=0;if(null==e){var o=r.length-1;i=this.getLine(t).length}else for(var o=0;o<r.length&&!((i+=r[o].value.length)>=e);o++);return(n=r[o])?(n.index=o,n.start=i-n.value.length,n):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.$deltasFold.length&&(e.$deltas.push({group:"fold",deltas:e.$deltasFold}),e.$deltasFold=[]),e.$deltasDoc.length&&(e.$deltas.push({group:"doc",deltas:e.$deltasDoc}),e.$deltasDoc=[]),e.$deltas.length>0&&t.execute({action:"aceupdate",args:[e.$deltas,e],merge:e.mergeUndoDeltas}),e.mergeUndoDeltas=!1,e.$deltas=[]},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,r){var i=this.$markerId++,o={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=o,this._signal("changeFrontMarker")):(this.$backMarkers[i]=o,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];if(e){var n=e.inFront?this.$frontMarkers:this.$backMarkers;e&&(delete n[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,r){"number"!=typeof e&&(n=e,e=t),n||(n="ace_step");var i=new h(t,0,e,1/0);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var n=this.getLine(t),r=!1;if(e>0&&(r=!!n.charAt(e-1).match(this.tokenRe)),r||(r=!!n.charAt(e).match(this.tokenRe)),r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(e-1,e+1)))var i=/\s/;else var i=this.nonTokenRe;var o=e;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(i));o++}for(var a=e;a<n.length&&n.charAt(a).match(i);)a++;return new h(t,o,t,a)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"===("undefined"===typeof t?"undefined":r(t))){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,i=n.path}else i=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new l),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(e&&e());this.$modeId=i,s.loadModule(["mode",i],function(t){if(this.$modeId!==i)return e&&e();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):t&&t.Mode&&(t=new t.Mode(n),n||(this.$modes[i]=t,t.$id=i),this.$onChangeMode(t)),e&&e()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=t.getTokenizer();if(void 0!==n.addEventListener){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new d(n);var i=this;this.bgTokenizer.addEventListener("update",function(t){i._signal("tokenizerUpdate",t)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){s.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,o=this.$foldData[i],a=o?o.start.row:1/0,s=e.length,u=0;u<s;u++){if(u>a){if((u=o.end.row+1)>=s)break;o=this.$foldData[i++],a=o?o.start.row:1/0}null==n[u]&&(n[u]=this.$getStringScreenWidth(e[u])[0]),n[u]>r&&(r=n[u])}this.screenWidth=r}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=null,r=t.length-1;-1!=r;r--){var i=t[r];"doc"==i.group?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(t){this.addFolds(t.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!e&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=null,r=0;r<t.length;r++){var i=t[r];"doc"==i.group&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!e&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e,n){function r(t){return e?"insert"!==t.action:"insert"===t.action}var i,o,a=t[0];r(a)?i=h.fromPoints(a.start,a.end):i=h.fromPoints(a.start,a.start);for(var s=1;s<t.length;s++)a=t[s],r(a)?(o=a.start,-1==i.compare(o.row,o.column)&&i.setStart(o),o=a.end,1==i.compare(o.row,o.column)&&i.setEnd(o),!0):(o=a.start,-1==i.compare(o.row,o.column)&&(i=h.fromPoints(a.start,a.start)),!1);if(null!=n){0===h.comparePoints(n.start,i.start)&&(n.start.column+=i.end.column-i.start.column,n.end.column+=i.end.column-i.start.column);var u=n.compareRange(i);1==u?i.setStart(n.start):-1==u&&i.setEnd(n.end)}return i},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var r=this.getTextRange(t),i=this.getFoldsInRange(t),o=h.fromPoints(e,e);if(!n){this.remove(t);var a=t.start.row-t.end.row,s=a?-t.end.column:t.start.column-t.end.column;s&&(o.start.row==t.end.row&&o.start.column>t.end.column&&(o.start.column+=s),o.end.row==t.end.row&&o.end.column>t.end.column&&(o.end.column+=s)),a&&o.start.row>=t.end.row&&(o.start.row+=a,o.end.row+=a)}if(o.end=this.insert(o.start,r),i.length){var u=t.start,c=o.start,a=c.row-u.row,s=c.column-u.column;this.addFolds(i.map(function(t){return t=t.clone(),t.start.row==u.row&&(t.start.column+=s),t.end.row==u.row&&(t.end.column+=s),t.start.row+=a,t.end.row+=a,t}))}return o},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var r=t;r<=e;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new h(0,0,0,0),r=this.getTabSize(),i=e.start.row;i<=e.end.row;++i){var o=this.getLine(i);n.start.row=i,n.end.row=i;for(var a=0;a<r&&" "==o.charAt(a);++a);a<r&&"\t"==o.charAt(a)?(n.start.column=a,n.end.column=a+1):(n.start.column=0,n.end.column=a),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){var r=this.getRowFoldStart(t+n);if(r<0)return 0;var i=r-t}else if(n>0){var r=this.getRowFoldEnd(e+n);if(r>this.doc.getLength()-1)return 0;var i=r-e}else{t=this.$clipRowToDocument(t),e=this.$clipRowToDocument(e);var i=e-t+1}var o=new h(t,0,e,Number.MAX_VALUE),a=this.getFoldsInRange(o).map(function(t){return t=t.clone(),t.start.row+=i,t.end.row+=i,t}),s=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+i,s),a.length&&this.addFolds(a),i},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var n=this.doc.getLength();t>=n?(t=n-1,e=this.doc.getLine(n-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var r=this.$constrainWrapLimit(t,n.min,n.max);return r!=this.$wrapLimit&&r>1&&(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,n=t.action,r=t.start,i=t.end,o=r.row,a=i.row,s=a-o,u=null;if(this.$updating=!0,0!=s)if("remove"===n){this[e?"$wrapData":"$rowLengthCache"].splice(o,s);var c=this.$foldData;u=this.getFoldsInRange(t),this.removeFolds(u);var l=this.getFoldLine(i.row),h=0;if(l){l.addRemoveChars(i.row,i.column,r.column-i.column),l.shiftRow(-s);var f=this.getFoldLine(o);f&&f!==l&&(f.merge(l),l=f),h=c.indexOf(l)+1}for(h;h<c.length;h++){var l=c[h];l.start.row>=i.row&&l.shiftRow(-s)}a=o}else{var d=Array(s);d.unshift(o,0);var p=e?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,d);var c=this.$foldData,l=this.getFoldLine(o),h=0;if(l){var g=l.range.compareInside(r.row,r.column);0==g?(l=l.split(r.row,r.column))&&(l.shiftRow(s),l.addRemoveChars(a,0,i.column-r.column)):-1==g&&(l.addRemoveChars(o,0,i.column-r.column),l.shiftRow(s)),h=c.indexOf(l)+1}for(h;h<c.length;h++){var l=c[h];l.start.row>=o&&l.shiftRow(s)}}else{s=Math.abs(t.start.column-t.end.column),"remove"===n&&(u=this.getFoldsInRange(t),this.removeFolds(u),s=-s);var l=this.getFoldLine(o);l&&l.addRemoveChars(o,r.column,s)}return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(o,a):this.$updateRowLengthCache(o,a),u},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,r){var i,o,a=this.doc.getAllLines(),s=this.getTabSize(),u=this.$wrapData,c=this.$wrapLimit,l=t;for(r=Math.min(r,a.length-1);l<=r;)o=this.getFoldLine(l,o),o?(i=[],o.walk(function(t,r,o,s){var u;if(null!=t){u=this.$getDisplayTokens(t,i.length),u[0]=e;for(var c=1;c<u.length;c++)u[c]=n}else u=this.$getDisplayTokens(a[r].substring(s,o),i.length);i=i.concat(u)}.bind(this),o.end.row,a[o.end.row].length+1),u[o.start.row]=this.$computeWrapSplits(i,c,s),l=o.end.row+1):(i=this.$getDisplayTokens(a[l]),u[l]=this.$computeWrapSplits(i,c,s),l++)};var e=3,n=4,a=10,c=11,f=12;this.$computeWrapSplits=function(t,r,i){function o(){var e=0;if(0===m)return e;if(g)for(var n=0;n<t.length;n++){var r=t[n];if(r==a)e+=1;else{if(r!=c){if(r==f)continue;break}e+=i}}return p&&!1!==g&&(e+=i),Math.min(e,m)}function s(e){var n=t.slice(h,e),r=n.length;n.join("").replace(/12/g,function(){r-=1}).replace(/2/g,function(){r-=1}),u.length||(v=o(),u.indent=v),d+=r,u.push(d),h=e}if(0==t.length)return[];for(var u=[],l=t.length,h=0,d=0,p=this.$wrapAsCode,g=this.$indentedSoftWrap,m=r<=Math.max(2*i,8)||!1===g?0:Math.floor(r/2),v=0;l-h>r-v;){var y=h+r-v;if(t[y-1]>=a&&t[y]>=a)s(y);else if(t[y]!=e&&t[y]!=n){for(var b=Math.max(y-(r-(r>>2)),h-1);y>b&&t[y]<e;)y--;if(p){for(;y>b&&t[y]<e;)y--;for(;y>b&&9==t[y];)y--}else for(;y>b&&t[y]<a;)y--;y>b?s(++y):(y=h+r,2==t[y]&&y--,s(y-v))}else{for(y;y!=h-1&&t[y]!=e;y--);if(y>h){s(y);continue}for(y=h+r;y<t.length&&t[y]==n;y++);if(y==t.length)break;s(y)}}return u},this.$getDisplayTokens=function(e,n){var r,i=[];n=n||0;for(var o=0;o<e.length;o++){var s=e.charCodeAt(o);if(9==s){r=this.getScreenTabSize(i.length+n),i.push(c);for(var u=1;u<r;u++)i.push(f)}else 32==s?i.push(a):s>39&&s<48||s>57&&s<64?i.push(9):s>=4352&&t(s)?i.push(1,2):i.push(1)}return i},this.$getStringScreenWidth=function(e,n,r){if(0==n)return[0,0];null==n&&(n=1/0),r=r||0;var i,o;for(o=0;o<e.length&&(i=e.charCodeAt(o),9==i?r+=this.getScreenTabSize(r):i>=4352&&t(i)?r+=2:r+=1,!(r>n));o++);return[r,o]},this.lineWidgets=null,this.getRowLength=function(t){if(this.lineWidgets)var e=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-t%this.$tabSize},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,n){if(t<0)return{row:0,column:0};var r,i,o=0,a=0,s=0,u=0,c=this.$screenRowCache,l=this.$getRowCacheIndex(c,t),h=c.length;if(h&&l>=0)var s=c[l],o=this.$docRowCache[l],f=t>c[h-1];else var f=!h;for(var d=this.getLength()-1,p=this.getNextFoldLine(o),g=p?p.start.row:1/0;s<=t&&(u=this.getRowLength(o),!(s+u>t||o>=d));)s+=u,++o>g&&(o=p.end.row+1,p=this.getNextFoldLine(o,p),g=p?p.start.row:1/0),f&&(this.$docRowCache.push(o),this.$screenRowCache.push(s));if(p&&p.start.row<=o)r=this.getFoldDisplayLine(p),o=p.start.row;else{if(s+u<=t||o>d)return{row:d,column:this.getLine(d).length};r=this.getLine(o),p=null}var m=0,v=Math.floor(t-s);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(i=y[v],v>0&&y.length&&(m=y.indent,a=y[v-1]||y[y.length-1],r=r.substring(a)))}return void 0!==n&&this.$bidiHandler.isBidiRow(s+v,o,v)&&(e=this.$bidiHandler.offsetToCol(n)),a+=this.$getStringScreenWidth(r,e-m)[1],this.$useWrapMode&&a>=i&&(a=i-1),p?p.idxToPosition(a):{row:o,column:a}},this.documentToScreenPosition=function(t,e){if("undefined"===typeof e)var n=this.$clipPositionToDocument(t.row,t.column);else n=this.$clipPositionToDocument(t,e);t=n.row,e=n.column;var r=0,i=null,o=null;(o=this.getFoldAt(t,e,1))&&(t=o.start.row,e=o.start.column);var a,s=0,u=this.$docRowCache,c=this.$getRowCacheIndex(u,t),l=u.length;if(l&&c>=0)var s=u[c],r=this.$screenRowCache[c],h=t>u[l-1];else var h=!l;for(var f=this.getNextFoldLine(s),d=f?f.start.row:1/0;s<t;){if(s>=d){if((a=f.end.row+1)>t)break;f=this.getNextFoldLine(a,f),d=f?f.start.row:1/0}else a=s+1;r+=this.getRowLength(s),s=a,h&&(this.$docRowCache.push(s),this.$screenRowCache.push(r))}var p="";f&&s>=d?(p=this.getFoldDisplayLine(f,t,e),i=f.start.row):(p=this.getLine(t).substring(0,e),i=t);var g=0;if(this.$useWrapMode){var m=this.$wrapData[i];if(m){for(var v=0;p.length>=m[v];)r++,v++;p=p.substring(m[v-1]||0,p.length),g=v>0?m.indent:0}}return{row:r,column:g+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,r=0,i=0,e=this.$foldData[i++],o=e?e.start.row:1/0;r<n;){var a=this.$wrapData[r];t+=a?a.length+1:1,r++,r>o&&(r=e.end.row+1,e=this.$foldData[i++],o=e?e.start.row:1/0)}else{t=this.getLength();for(var s=this.$foldData,i=0;i<s.length;i++)e=s[i],t-=e.end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,r){if(0===n)return[0,0];n||(n=1/0),r=r||0;var i,o;for(o=0;o<e.length&&(i=e.charAt(o),!((r+="\t"===i?this.getScreenTabSize(r):t.getCharacterWidth(i))>n));o++);return[r,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=t}.call(g.prototype),t("./edit_session/folding").Folding.call(g.prototype),t("./edit_session/bracket_match").BracketMatch.call(g.prototype),s.defineOptions(g.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){isNaN(t)||this.$tabSize===t||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId}}}),e.EditSession=g}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,n){"use strict";function r(t,e){function n(t){return/\w/.test(t)||e.regExp?"\\b":""}return n(t[0])+t+n(t[t.length-1])}var i=t("./lib/lang"),o=t("./lib/oop"),a=t("./range").Range,s=function(){this.$options={}};(function(){this.set=function(t){return o.mixin(this.$options,t),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var r=null;return n.forEach(function(t,n,i,o){return r=new a(t,n,i,o),!(n==o&&e.start&&e.start.start&&0!=e.skipCurrent&&r.isEqual(e.start))||(r=null,!1)}),r},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,r=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),o=[],s=e.re;if(e.$isMultiLine){var u,c=s.length,l=r.length-c;t:for(var h=s.offset||0;h<=l;h++){for(var f=0;f<c;f++)if(-1==r[h+f].search(s[f]))continue t;var d=r[h],p=r[h+c-1],g=d.length-d.match(s[0])[0].length,m=p.match(s[c-1])[0].length;u&&u.end.row===h&&u.end.column>g||(o.push(u=new a(h,g,h+c-1,m)),c>2&&(h=h+c-2))}}else for(var v=0;v<r.length;v++)for(var y=i.getMatchOffsets(r[v],s),f=0;f<y.length;f++){var b=y[f];o.push(new a(v,b.offset,v,b.offset+b.length))}if(n){for(var w=n.start.column,_=n.start.column,v=0,f=o.length-1;v<f&&o[v].start.column<w&&o[v].start.row==n.start.row;)v++;for(;v<f&&o[f].end.column>_&&o[f].end.row==n.end.row;)f--;for(o=o.slice(v,f+1),v=0,f=o.length;v<f;v++)o[v].start.row+=n.start.row,o[v].end.row+=n.start.row}return o},this.replace=function(t,e){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(r){var i=r.exec(t);if(!i||i[0].length!=t.length)return null;if(e=t.replace(r,e),n.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var a=t[o];a&&a.toLowerCase()!=a?e[o]=e[o].toUpperCase():e[o]=e[o].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n=t.needle;if(!t.needle)return t.re=!1;t.regExp||(n=i.escapeRegExp(n)),t.wholeWord&&(n=r(n,t));var o=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(n),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(n,o);try{var a=new RegExp(n,o)}catch(t){a=!1}return t.re=a},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],i=0;i<n.length;i++)try{r.push(new RegExp(n[i],e))}catch(t){return!1}return r},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var r=1==e.backwards,i=0!=e.skipCurrent,o=e.range,a=e.start;a||(a=o?o[r?"end":"start"]:t.selection.getRange()),a.start&&(a=a[i!=r?"end":"start"]);var s=o?o.start.row:0,u=o?o.end.row:t.getLength()-1;if(r)var c=function(t){var n=a.row;if(!h(n,a.column,t)){for(n--;n>=s;n--)if(h(n,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(n=u,s=a.row;n>=s;n--)if(h(n,Number.MAX_VALUE,t))return}};else var c=function(t){var n=a.row;if(!h(n,a.column,t)){for(n+=1;n<=u;n++)if(h(n,0,t))return;if(0!=e.wrap)for(n=s,u=a.row;n<=u;n++)if(h(n,0,t))return}};if(e.$isMultiLine)var l=n.length,h=function(e,i,o){var a=r?e-l+1:e;if(!(a<0)){var s=t.getLine(a),u=s.search(n[0]);if(!(!r&&u<i||-1===u)){for(var c=1;c<l;c++)if(s=t.getLine(a+c),-1==s.search(n[c]))return;var h=s.match(n[l-1])[0].length;if(!(r&&h>i))return!!o(a,u,a+l-1,h)||void 0}}};else if(r)var h=function(e,r,i){var o,a=t.getLine(e),s=[],u=0;for(n.lastIndex=0;o=n.exec(a);){var c=o[0].length;if(u=o.index,!c){if(u>=a.length)break;n.lastIndex=u+=1}if(o.index+c>r)break;s.push(o.index,c)}for(var l=s.length-1;l>=0;l-=2){var h=s[l-1],c=s[l];if(i(e,h,e,h+c))return!0}};else var h=function(e,r,i){var o,a=t.getLine(e),s=r;for(n.lastIndex=r;o=n.exec(a);){var u=o[0].length;if(s=o.index,i(e,s,e,s+u))return!0;if(!u&&(n.lastIndex=s+=1,s>=a.length))return!1}};return{forEach:c}}}).call(s.prototype),e.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,n){"use strict";function i(t,e){this.platform=e||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function o(t,e){i.call(this,t,e),this.$singleCommand=!1}var a=t("../lib/keys"),s=t("../lib/useragent"),u=a.KEY_MODS;o.prototype=i.prototype,function(){function t(t){return"object"==("undefined"===typeof t?"undefined":r(t))&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"===typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var o=r[i];if(o==t)delete r[i];else if(Array.isArray(o)){var a=o.indexOf(t);-1!=a&&(o.splice(a,1),1==o.length&&(r[i]=o[0]))}}},this.bindKey=function(t,e,n){if("object"==("undefined"===typeof t?"undefined":r(t))&&t&&(void 0==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach(function(t){var r="";if(-1!=t.indexOf(" ")){var i=t.split(/\s+/);t=i.pop(),i.forEach(function(t){var e=this.parseKeys(t),n=u[e.hashId]+e.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")},this),r+=" "}var o=this.parseKeys(t),a=u[o.hashId]+o.key;this._addCommandToBinding(r+a,e,n)},this)},this._addCommandToBinding=function(e,n,r){var i,o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?-1!=(i=o[e].indexOf(n))&&o[e].splice(i,1):o[e]=[o[e]],"number"!=typeof r&&(r=t(n));var a=o[e];for(i=0;i<a.length;i++){var s=a[i],u=t(s);if(u>r)break}a.splice(i,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach(function(e){var n=t[e];if(n){if("string"===typeof n)return this.bindKey(n,e);"function"===typeof n&&(n={exec:n}),"object"===("undefined"===typeof n?"undefined":r(n))&&(n.name||(n.name=e),this.addCommand(n))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(t){return t}),n=e.pop(),r=a[n];if(a.FUNCTION_KEYS[r])n=a.FUNCTION_KEYS[r].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var i=0,o=e.length;o--;){var s=a.KEY_MODS[e[o]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+e[o]+" in "+t),!1;i|=s}return{key:n,hashId:i}},this.findKeyCommand=function(t,e){var n=u[t]+e;return this.commandKeyBinding[n]},this.handleKeyboard=function(t,e,n,r){if(!(r<0)){var i=u[e]+n,o=this.commandKeyBinding[i];return t.$keyChain&&(t.$keyChain+=" "+i,o=this.commandKeyBinding[t.$keyChain]||o),!o||"chainKeys"!=o&&"chainKeys"!=o[o.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(-1==e||r>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-i.length-1)),{command:o}):(t.$keyChain=t.$keyChain||i,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(i.prototype),e.HashHandler=i,e.MultiHashHandler=o}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("../lib/oop"),i=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,a=function(t,e){i.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",function(t){return t.command.exec(t.editor,t.args||{})})};r.inherits(a,i),function(){r.implement(this,o),this.exec=function(t,e,n){if(Array.isArray(t)){for(var r=t.length;r--;)if(this.exec(t[r],e,n))return!0;return!1}if("string"===typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(t.isAvailable&&!t.isAvailable(e))return!1;var i={editor:e,command:t,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),!1!==i.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map(function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}.call(a.prototype),e.CommandManager=a}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,e,n){"use strict";function r(t,e){return{win:t,mac:e}}var i=t("../lib/lang"),o=t("../config"),a=t("../range").Range;e.commands=[{name:"showSettingsMenu",bindKey:r("Ctrl-,","Command-,"),exec:function(t){o.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:r("Alt-E","F4"),exec:function(t){o.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:r("Alt-Shift-E","Shift-F4"),exec:function(t){o.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:r("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",bindKey:r(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:r("Ctrl-L","Command-L"),exec:function(t){var e=parseInt(prompt("Enter line number:"),10);isNaN(e)||t.gotoLine(e)},readOnly:!0},{name:"fold",bindKey:r("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:r("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:r("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:r("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:r("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:r("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:r("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:r("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:r("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:r("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",bindKey:r("Ctrl-F","Command-F"),exec:function(t){o.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:r("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:r("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:r("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:r("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:r("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:r("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:r("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:r("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:r("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:r("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:r("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:r("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:r("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:r("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:r("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:r("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:r("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:r("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:r("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:r("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:r(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:r("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:r(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:r("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:r("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:r("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",bindKey:r("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",bindKey:r("Ctrl-P","Ctrl-P"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:r("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:r("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:r(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(t){},readOnly:!0},{name:"cut",exec:function(t){var e=t.getSelectionRange();t._emit("cut",e),t.selection.isEmpty()||(t.session.remove(e),t.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",bindKey:r("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:r("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:r("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:r("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:r("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:r("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:r("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:r("Ctrl-H","Command-Option-F"),exec:function(t){o.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",bindKey:r("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",bindKey:r("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",bindKey:r("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:r("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:r("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:r("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:r("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:r("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:r("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:r("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:r("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",bindKey:r("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",bindKey:r("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:r("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:r("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:r("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:r("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:r("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:r("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(t,e){t.insert(i.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:r(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:r("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:r("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:r("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:r("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:r(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),r=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),o=t.session.doc.getLine(n.row).length,s=t.session.doc.getTextRange(t.selection.getRange()),u=s.replace(/\n\s*/," ").length,c=t.session.doc.getLine(n.row),l=n.row+1;l<=r.row+1;l++){var h=i.stringTrimLeft(i.stringTrimRight(t.session.doc.getLine(l)));0!==h.length&&(h=" "+h),c+=h}r.row+1<t.session.doc.getLength()-1&&(c+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new a(n.row,0,r.row+2,0),c),u>0?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+u)):(o=t.session.doc.getLine(n.row).length>o?o+1:o,t.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:r(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,r=t.selection.rangeList.ranges,i=[];r.length<1&&(r=[t.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row===e&&r[o].end.column===n||i.push(new a(r[o].end.row,r[o].end.column,e,n))),0===o?0===r[o].start.row&&0===r[o].start.column||i.push(new a(0,0,r[o].start.row,r[o].start.column)):i.push(new a(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));t.exitMultiSelectMode(),t.clearSelection();for(var o=0;o<i.length;o++)t.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/oop"),o=t("./lib/dom"),a=t("./lib/lang"),s=t("./lib/useragent"),u=t("./keyboard/textinput").TextInput,c=t("./mouse/mouse_handler").MouseHandler,l=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,f=t("./edit_session").EditSession,d=t("./search").Search,p=t("./range").Range,g=t("./lib/event_emitter").EventEmitter,m=t("./commands/command_manager").CommandManager,v=t("./commands/default_commands").commands,y=t("./config"),b=t("./token_iterator").TokenIterator,w=function t(e,n){var i=e.getContainerElement();this.container=i,this.renderer=e,this.id="editor"+ ++t.$uid,this.commands=new m(s.isMac?"mac":"win",v),"object"==("undefined"===typeof document?"undefined":r(document))&&(this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new l(this)),this.keyBinding=new h(this),this.$blockScrolling=0,this.$search=(new d).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(t,e){e._$emitInputEvent.schedule(31)}),this.setSession(n||new f("")),y.resetOptions(this),y._signal("editor",this)};w.$uid=0,function(){i.implement(this,g),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(t){if(this.curOp){if(t&&!1===t.returnValue)return this.curOp=null;this._signal("beforeEndOperation");var e=this.curOp.command;e.name&&this.$blockScrolling>0&&this.$blockScrolling--;var n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,n=this.$mergeableCommands,r=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var i=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(e.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"===typeof t){this.$keybindingId=t;var n=this;y.loadModule(["keybinding",t],function(r){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(r&&r.handler),e&&e()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container,"fontSize")},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout(function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=e.findMatchingBracket(t.getCursorPosition());if(n)var r=new p(n.row,n.column,n.row,n.column+1);else if(e.$mode.getMatching)var r=e.$mode.getMatching(t.session);r&&(e.$bracketHighlight=e.addMarker(r,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout(function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),r=new b(t.session,n.row,n.column),i=r.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==i.type.indexOf("tag-open")||(i=r.stepForward())){var o=i.value,a=0,s=r.stepBackward();if("<"==s.value)do{s=i,(i=r.stepForward())&&i.value===o&&-1!==i.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(i&&a>=0);else{do{i=s,s=r.stepBackward(),i&&i.value===o&&-1!==i.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(s&&a<=0);r.stepForward()}if(!i)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var u=r.getCurrentTokenRow(),c=r.getCurrentTokenColumn(),l=new p(u,c,u,c+i.value.length),h=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&void 0!=h&&0!==l.compareRange(h.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),l&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(l,"ace_bracket","text"))}}},50)}},this.focus=function(){var t=this;setTimeout(function(){t.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,n=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,n,e),this._signal("change",t),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(y.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();e.$selectionMarker=e.addMarker(n,"ace_selection",r)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column-1,r=e.end.column+1,i=t.getLine(e.start.row),o=i.length,a=i.substring(Math.max(n,0),Math.min(r,o));if(!(n>=0&&/^[\w\d]/.test(a)||r<=o&&/[\w\d]$/.test(a))&&(a=i.substring(e.start.column,e.end.column),/^[\w\d]+$/.test(a))){return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:a})}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText();return this._signal("copy",t),t},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var n={text:t,event:e};this.commands.exec("paste",this,n)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(e);else{var n=e.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(n.length>r.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var i=r.length;i--;){var o=r[i];o.isEmpty()||this.session.remove(o),this.session.insert(o.start,n[i])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var o=r.transformAction(n.getState(i.row),"insertion",this,n,t);o&&(t!==o.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),t=o.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==t.indexOf("\n")){var a=new p.fromPoints(i,i);a.end.column+=t.length,this.session.remove(a)}}else{var a=this.getSelectionRange();i=this.session.remove(a),this.clearSelection()}if("\n"==t||"\r\n"==t){var s=n.getLine(i.row);if(i.column>s.search(/\S|$/)){var u=s.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+u)}}this.clearSelection();var c=i.column,l=n.getState(i.row),s=n.getLine(i.row),h=r.checkOutdent(l,s,t);n.insert(i,t);if(o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new p(i.row,c+o.selection[0],i.row,c+o.selection[1])):this.selection.setSelectionRange(new p(i.row+o.selection[0],o.selection[1],i.row+o.selection[2],o.selection[3]))),n.getDocument().isNewLine(t)){var f=r.getNextLineIndent(l,s.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},f)}h&&r.autoOutdent(l,n,i.row)},this.onTextInput=function(t){this.keyBinding.onTextInput(t)},this.onCommandKey=function(t,e,n){this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(e.start.row),i=n.getMode().transformAction(r,"deletion",this,n,e);if(0===e.end.column){var o=n.getTextRange(e);if("\n"==o[o.length-1]){var a=n.getLine(e.end.row);/^\s+$/.test(a)&&(e.end.column=a.length)}}i&&(e=i)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var n,r,i=this.session.getLine(t.row);e<i.length?(n=i.charAt(e)+i.charAt(e-1),r=new p(t.row,e-1,t.row,e+1)):(n=i.charAt(e-1)+i.charAt(e-2),r=new p(t.row,e-2,t.row,e)),this.session.replace(r,n),this.session.selection.moveToPosition(r.end)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(e.start.row<e.end.row){var n=this.$getSelectedRows();return void t.indentRows(n.first,n.last,"\t")}if(e.start.column<e.end.column){if(!/^\s+$/.test(t.getTextRange(e))){var n=this.$getSelectedRows();return void t.indentRows(n.first,n.last,"\t")}}var r=t.getLine(e.start.row),i=e.start,o=t.getTabSize(),s=t.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var u=o-s%o,c=a.stringRepeat(" ",u);else{for(var u=s%o;" "==r[e.start.column-1]&&u;)e.start.column--,u--;this.selection.setSelectionRange(e),c="\t"}return this.insert(c)},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,n=[],r=t.first;r<=t.last;r++)n.push(e.getLine(r));n.sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0});for(var i=new p(0,0,0,0),r=t.first;r<=t.last;r++){var o=e.getLine(r);i.start.row=r,i.end.row=r,i.end.column=o.length,e.replace(i,n[r-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(t);n.lastIndex<e;){var i=n.exec(r);if(i.index<=e&&i.index+i[0].length>=e){return{value:i[0],start:i.index,end:i.index+i[0].length}}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(e,n-1,e,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var o=this.getNumberAt(e,n);if(o){var a=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,s=o.start+o.value.length-a,u=parseFloat(o.value);u*=Math.pow(10,s),a!==o.end&&n<a?t*=Math.pow(10,o.end-n-1):t*=Math.pow(10,o.end-n),u+=t,u/=Math.pow(10,s);var c=u.toFixed(s),l=new p(e,o.start,e,o.end);this.session.replace(l,c),this.moveCursorTo(e,Math.max(o.start+1,n+c.length-o.value.length))}}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,n=t.getRange(),r=t.isBackwards();if(n.isEmpty()){var i=n.start.row;e.duplicateLines(i,i)}else{var o=r?n.start:n.end,a=e.insert(o,e.getTextRange(n),!1);n.start=o,n.end=a,t.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var o=i.toOrientedRange();n=this.$getSelectedRows(o),r=this.session.$moveLines(n.first,n.last,e?0:t),e&&-1==t&&(r=0),o.moveBy(r,0),i.fromOrientedRange(o)}else{var a=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,u=0,c=a.length,l=0;l<c;l++){var h=l;a[l].moveBy(s,0),n=this.$getSelectedRows(a[l]);for(var f=n.first,d=n.last;++l<c;){u&&a[l].moveBy(u,0);var p=this.$getSelectedRows(a[l]);if(e&&p.first!=d)break;if(!e&&p.first>d+1)break;d=p.last}for(l--,s=this.session.$moveLines(f,d,e?0:t),e&&-1==t&&(h=l+1);h<=l;)a[h].moveBy(s,0),h++;e||(s=0),u+=s}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,r=this.renderer.layerConfig,i=t*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,!0===e?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):!1===e&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,i*r.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,r){this.renderer.scrollToLine(t,e,n,r)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),r=new b(this.session,n.row,n.column),i=r.getCurrentToken(),o=i||r.stepForward();if(o){var a,s,u=!1,c={},l=n.column-o.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;l<o.value.length&&!u;l++)if(h[o.value[l]])switch(s=h[o.value[l]]+"."+o.type.replace("rparen","lparen"),isNaN(c[s])&&(c[s]=0),o.value[l]){case"(":case"[":case"{":c[s]++;break;case")":case"]":case"}":c[s]--,-1===c[s]&&(a="bracket",u=!0)}}else o&&-1!==o.type.indexOf("tag-name")&&(isNaN(c[o.value])&&(c[o.value]=0),"<"===i.value?c[o.value]++:"</"===i.value&&c[o.value]--,-1===c[o.value]&&(a="tag",u=!0));u||(i=o,o=r.stepForward(),l=0)}while(o&&!u);if(a){var f,d;if("bracket"===a)(f=this.session.getBracketRange(n))||(f=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l-1),d=f.start,(e||d.row===n.row&&Math.abs(d.column-n.column)<2)&&(f=this.session.getBracketRange(d)));else if("tag"===a){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(f=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2),0===f.compare(n.row,n.column)){u=!1;do{o=i,(i=r.stepBackward())&&(-1!==i.type.indexOf("tag-close")&&f.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===i.value?c[g]++:"</"===i.value&&c[g]--,0===c[g]&&(u=!0)))}while(i&&!u)}o&&o.type.indexOf("tag-name")&&(d=f.start,d.row==n.row&&Math.abs(d.column-n.column)<2&&(d=f.end))}d=f&&f.cursor||d,d&&(t?f&&e?this.selection.setRange(f):f&&f.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.$blockScrolling-=1,this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,t)&&(r=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],t)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return e=this.$search.replace(n,e),null!==e?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==("undefined"===typeof t?"undefined":r(t))&&i.mixin(e,t);var o=this.selection.getRange();null==e.needle&&(t=this.session.getTextRange(o)||this.$search.$options.needle,t||(o=this.session.getWordRange(o.start.row,o.start.column),t=this.session.getTextRange(o)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:o});var a=this.$search.find(this.session);return e.preventScroll?a:a?(this.revealRange(a,n),a):(e.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.$blockScrolling+=1,this.session.unfold(t),this.selection.setSelectionRange(t),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var o=this.on("changeSelection",function(){r=!0}),a=this.renderer.on("beforeRender",function(){r&&(e=n.renderer.container.getBoundingClientRect())}),s=this.renderer.on("afterRender",function(){if(r&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var t=n.renderer,o=t.$cursorLayer.$pixelPos,a=t.layerConfig,s=o.top-a.offset;r=o.top>=0&&s+e.top<0||!(o.top<a.height&&o.top+e.top+a.lineHeight>window.innerHeight)&&null,null!=r&&(i.style.top=s+"px",i.style.left=o.left+"px",i.style.height=a.lineHeight+"px",i.scrollIntoView(r)),r=e=null}});this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",s),this.renderer.off("beforeRender",a))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,o.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))}}.call(w.prototype),y.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),e.Editor=w}),ace.define("ace/undomanager",["require","exports","module"],function(t,e,n){"use strict";var r=function(){this.reset()};(function(){function t(t){return{action:t.action,start:t.start,end:t.end,lines:1==t.lines.length?null:t.lines,text:1==t.lines.length?t.lines[0]:null}}function e(t){return{action:t.action,start:t.start,end:t.end,lines:t.lines||[t.text]}}function n(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++){for(var i=t[r],o={group:i.group,deltas:new Array(i.length)},a=0;a<i.deltas.length;a++){var s=i.deltas[a];o.deltas[a]=e(s)}n[r]=o}return n}this.execute=function(t){var e=t.args[0];this.$doc=t.args[1],t.merge&&this.hasUndo()&&(this.dirtyCounter--,e=this.$undoStack.pop().concat(e)),this.$undoStack.push(e),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(t){var e=this.$undoStack.pop(),n=null;return e&&(n=this.$doc.undoChanges(e,t),this.$redoStack.push(e),this.dirtyCounter--),n},this.redo=function(t){var e=this.$redoStack.pop(),n=null;return e&&(n=this.$doc.redoChanges(this.$deserializeDeltas(e),t),this.$undoStack.push(e),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(e){return n(e,t)},this.$deserializeDeltas=function(t){return n(t,e)}}).call(r.prototype),e.UndoManager=r}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("../lib/dom"),i=t("../lib/oop"),o=t("../lib/lang"),a=t("../lib/event_emitter").EventEmitter,s=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){i.implement(this,a),this.setSession=function(t){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var a=n.text;a=a?o.escapeHTML(a):n.html||"",-1===i.text.indexOf(a)&&i.text.push(a);var s=n.type;"error"==s?i.className=" ace_error":"warning"==s&&" ace_error"!=i.className?i.className=" ace_warning":"info"!=s||i.className||(i.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,n=t.end.row-e;if(0===n);else if("remove"==t.action)this.$annotations.splice(e,n+1,null);else{var r=new Array(n+1);r.unshift(e,1),this.$annotations.splice.apply(this.$annotations,r)}}},this.update=function(t){for(var e=this.session,n=t.firstRow,i=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1),o=e.getNextFoldLine(n),a=o?o.start.row:1/0,s=this.$showFoldWidgets&&e.foldWidgets,u=e.$breakpoints,c=e.$decorations,l=e.$firstLineNumber,h=0,f=e.gutterRenderer||this.$renderer,d=null,p=-1,g=n;;){if(g>a&&(g=o.end.row+1,o=e.getNextFoldLine(g,o),a=o?o.start.row:1/0),g>i){for(;this.$cells.length>p+1;)d=this.$cells.pop(),this.element.removeChild(d.element);break}d=this.$cells[++p],d||(d={element:null,textNode:null,foldWidget:null},d.element=r.createElement("div"),d.textNode=document.createTextNode(""),d.element.appendChild(d.textNode),this.element.appendChild(d.element),this.$cells[p]=d);var m="ace_gutter-cell ";u[g]&&(m+=u[g]),c[g]&&(m+=c[g]),this.$annotations[g]&&(m+=this.$annotations[g].className),d.element.className!=m&&(d.element.className=m);var v=e.getRowLength(g)*t.lineHeight+"px";if(v!=d.element.style.height&&(d.element.style.height=v),s){var y=s[g];null==y&&(y=s[g]=e.getFoldWidget(g))}if(y){d.foldWidget||(d.foldWidget=r.createElement("span"),d.element.appendChild(d.foldWidget));var m="ace_fold-widget ace_"+y;"start"==y&&g==a&&g<o.end.row?m+=" ace_closed":m+=" ace_open",d.foldWidget.className!=m&&(d.foldWidget.className=m);var v=t.lineHeight+"px";d.foldWidget.style.height!=v&&(d.foldWidget.style.height=v)}else d.foldWidget&&(d.element.removeChild(d.foldWidget),d.foldWidget=null);var b=h=f?f.getText(e,g):g+l;b!==d.textNode.data&&(d.textNode.data=b),g++}this.element.style.height=t.minHeight+"px",(this.$fixedWidth||e.$useWrapMode)&&(h=e.getLength()+l);var w=f?f.getWidth(e,h,t):h.toString().length*t.characterWidth,_=this.$padding||this.$computePadding();(w+=_.left+_.right)===this.gutterWidth||isNaN(w)||(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(t.paddingLeft)+1||0,this.$padding.right=parseInt(t.paddingRight)||0,this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(s.prototype),e.Gutter=s}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,e,n){"use strict";var r=t("../range").Range,i=t("../lib/dom"),o=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){function t(t,e,n,r){return(t?1:0)|(e?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.update=function(t){if(t){this.config=t;var e=[];for(var n in this.markers){var r=this.markers[n];if(r.range){var i=r.range.clipRows(t.firstRow,t.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),r.renderer){var o=this.$getTop(i.start.row,t),a=this.$padding+(this.session.$bidiHandler.isBidiRow(i.start.row)?this.session.$bidiHandler.getPosLeft(i.start.column):i.start.column*t.characterWidth);r.renderer(e,i,a,o,t)}else"fullLine"==r.type?this.drawFullLineMarker(e,i,r.clazz,t):"screenLine"==r.type?this.drawScreenLineMarker(e,i,r.clazz,t):i.isMultiLine()?"text"==r.type?this.drawTextMarker(e,i,r.clazz,t):this.drawMultiLineMarker(e,i,r.clazz,t):this.session.$bidiHandler.isBidiRow(i.start.row)?this.drawBidiSingleLineMarker(e,i,r.clazz+" ace_start ace_br15",t):this.drawSingleLineMarker(e,i,r.clazz+" ace_start ace_br15",t)}else r.update(e,this,this.session,t)}this.element.innerHTML=e.join("")}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(e,n,i,o,a){for(var s=this.session,u=n.start.row,c=n.end.row,l=u,h=0,f=0,d=s.getScreenLastRowColumn(l),p=null,g=new r(l,n.start.column,l,f);l<=c;l++)g.start.row=g.end.row=l,g.start.column=l==u?n.start.column:s.getRowWrapIndent(l),g.end.column=d,h=f,f=d,d=l+1<c?s.getScreenLastRowColumn(l+1):l==c?0:n.end.column,p=i+(l==u?" ace_start":"")+" ace_br"+t(l==u||l==u+1&&n.start.column,h<f,f>d,l==c),this.session.$bidiHandler.isBidiRow(l)?this.drawBidiSingleLineMarker(e,g,p,o,l==c?0:1,a):this.drawSingleLineMarker(e,g,p,o,l==c?0:1,a)},this.drawMultiLineMarker=function(t,e,n,r,i){var o,a,s,u=this.$padding;if(i=i||"",this.session.$bidiHandler.isBidiRow(e.start.row)){var c=e.clone();c.end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(t,c,n+" ace_br1 ace_start",r,null,i)}else o=r.lineHeight,a=this.$getTop(e.start.row,r),s=u+e.start.column*r.characterWidth,t.push("<div class='",n," ace_br1 ace_start' style='","height:",o,"px;","right:0;","top:",a,"px;","left:",s,"px;",i,"'></div>");if(this.session.$bidiHandler.isBidiRow(e.end.row)){var c=e.clone();c.start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(t,c,n+" ace_br12",r,null,i)}else{var l=e.end.column*r.characterWidth;o=r.lineHeight,a=this.$getTop(e.end.row,r),t.push("<div class='",n," ace_br12' style='","height:",o,"px;","width:",l,"px;","top:",a,"px;","left:",u,"px;",i,"'></div>")}if(!((o=(e.end.row-e.start.row-1)*r.lineHeight)<=0)){a=this.$getTop(e.start.row+1,r);var h=(e.start.column?1:0)|(e.end.column?0:8);t.push("<div class='",n,h?" ace_br"+h:"","' style='","height:",o,"px;","right:0;","top:",a,"px;","left:",u,"px;",i,"'></div>")}},this.drawSingleLineMarker=function(t,e,n,r,i,o){var a=r.lineHeight,s=(e.end.column+(i||0)-e.start.column)*r.characterWidth,u=this.$getTop(e.start.row,r),c=this.$padding+e.start.column*r.characterWidth;t.push("<div class='",n,"' style='","height:",a,"px;","width:",s,"px;","top:",u,"px;","left:",c,"px;",o||"","'></div>")},this.drawBidiSingleLineMarker=function(t,e,n,r,i,o){var a=r.lineHeight,s=this.$getTop(e.start.row,r),u=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach(function(e){t.push("<div class='",n,"' style='","height:",a,"px;","width:",e.width+(i||0),"px;","top:",s,"px;","left:",u+e.left,"px;",o||"","'></div>")})},this.drawFullLineMarker=function(t,e,n,r,i){var o=this.$getTop(e.start.row,r),a=r.lineHeight;e.start.row!=e.end.row&&(a+=this.$getTop(e.end.row,r)-o),t.push("<div class='",n,"' style='","height:",a,"px;","top:",o,"px;","left:0;right:0;",i||"","'></div>")},this.drawScreenLineMarker=function(t,e,n,r,i){var o=this.$getTop(e.start.row,r),a=r.lineHeight;t.push("<div class='",n,"' style='","height:",a,"px;","top:",o,"px;","left:0;right:0;",i||"","'></div>")}}).call(o.prototype),e.Marker=o}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("../lib/oop"),i=t("../lib/dom"),o=t("../lib/lang"),a=(t("../lib/useragent"),t("../lib/event_emitter").EventEmitter),s=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){r.implement(this,a),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.$updateEolChar=function(){var t="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(t){this.$padding=t,this.element.style.padding="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],n=1;n<t+1;n++)this.showInvisibles?e.push("<span class='ace_invisible ace_invisible_tab'>"+o.stringRepeat(this.TAB_CHAR,n)+"</span>"):e.push(o.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide",i="",a="";if(this.showInvisibles){r+=" ace_invisible",i=" ace_invisible_space",a=" ace_invisible_tab";var s=o.stringRepeat(this.SPACE_CHAR,this.tabSize),u=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else var s=o.stringRepeat(" ",this.tabSize),u=s;this.$tabStrings[" "]="<span class='"+r+i+"'>"+s+"</span>",this.$tabStrings["\t"]="<span class='"+r+a+"'>"+u+"</span>"}},this.updateLines=function(t,e,n){this.config.lastRow==t.lastRow&&this.config.firstRow==t.firstRow||this.scrollLines(t),this.config=t;for(var r=Math.max(e,t.firstRow),i=Math.min(n,t.lastRow),o=this.element.childNodes,a=0,s=t.firstRow;s<r;s++){var u=this.session.getFoldLine(s);if(u){if(u.containsRow(r)){r=u.start.row;break}s=u.end.row}a++}for(var s=r,u=this.session.getNextFoldLine(s),c=u?u.start.row:1/0;;){if(s>c&&(s=u.end.row+1,u=this.session.getNextFoldLine(s,u),c=u?u.start.row:1/0),s>i)break;var l=o[a++];if(l){var h=[];this.$renderLine(h,s,!this.$useLineGroups(),s==c&&u),l.style.height=t.lineHeight*this.session.getRowLength(s)+"px",l.innerHTML=h.join("")}s++}},this.scrollLines=function(t){var e=this.config;if(this.config=t,!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);var n=this.element;if(e.firstRow<t.firstRow)for(var r=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(e.lastRow>t.lastRow)for(var r=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);r>0;r--)n.removeChild(n.lastChild);if(t.firstRow<e.firstRow){var i=this.$renderLinesFragment(t,t.firstRow,e.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(t.lastRow>e.lastRow){var i=this.$renderLinesFragment(t,e.lastRow+1,t.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(t,e,n){for(var r=this.element.ownerDocument.createDocumentFragment(),o=e,a=this.session.getNextFoldLine(o),s=a?a.start.row:1/0;;){if(o>s&&(o=a.end.row+1,a=this.session.getNextFoldLine(o,a),s=a?a.start.row:1/0),o>n)break;var u=i.createElement("div"),c=[];if(this.$renderLine(c,o,!1,o==s&&a),u.innerHTML=c.join(""),this.$useLineGroups())u.className="ace_line_group",r.appendChild(u),u.style.height=t.lineHeight*this.session.getRowLength(o)+"px";else for(;u.firstChild;)r.appendChild(u.firstChild);o++}return r},this.update=function(t){this.config=t;for(var e=[],n=t.firstRow,r=t.lastRow,i=n,o=this.session.getNextFoldLine(i),a=o?o.start.row:1/0;;){if(i>a&&(i=o.end.row+1,o=this.session.getNextFoldLine(i,o),a=o?o.start.row:1/0),i>r)break;this.$useLineGroups()&&e.push("<div class='ace_line_group' style='height:",t.lineHeight*this.session.getRowLength(i),"px'>"),this.$renderLine(e,i,!1,i==a&&o),this.$useLineGroups()&&e.push("</div>"),i++}this.element.innerHTML=e.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,r){var i=this,a=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=function(t,n,r,a,s){if(n)return i.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+o.stringRepeat(i.SPACE_CHAR,t.length)+"</span>":t;if("&"==t)return"&#38;";if("<"==t)return"&#60;";if(">"==t)return"&#62;";if("\t"==t){var u=i.session.getScreenTabSize(e+a);return e+=u-1,i.$tabStrings[u]}if("\u3000"==t){var c=i.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",l=i.showInvisibles?i.SPACE_CHAR:"";return e+=1,"<span class='"+c+"' style='width:"+2*i.config.characterWidth+"px'>"+l+"</span>"}return r?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+i.SPACE_CHAR+"</span>":(e+=1,"<span class='ace_cjk' style='width:"+2*i.config.characterWidth+"px'>"+t+"</span>")},u=r.replace(a,s);if(this.$textToken[n.type])t.push(u);else{var c="ace_"+n.type.replace(/\./g," ace_"),l="";"fold"==n.type&&(l=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),t.push("<span class='",c,"'",l,">",u,"</span>")}return e+r.length},this.renderIndentGuide=function(t,e,n){var r=e.search(this.$indentGuideRe);return r<=0||r>=n?e:" "==e[0]?(r-=r%this.tabSize,t.push(o.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),e.substr(r)):"\t"==e[0]?(t.push(o.stringRepeat(this.$tabStrings["\t"],r)),e.substr(r)):e},this.$renderWrappedLine=function(t,e,n,r){for(var i=0,a=0,s=n[0],u=0,c=0;c<e.length;c++){var l=e[c],h=l.value;if(0==c&&this.displayIndentGuides){if(i=h.length,!(h=this.renderIndentGuide(t,h,s)))continue;i-=h.length}if(i+h.length<s)u=this.$renderToken(t,u,l,h),i+=h.length;else{for(;i+h.length>=s;)u=this.$renderToken(t,u,l,h.substring(0,s-i)),h=h.substring(s-i),i=s,r||t.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),t.push(o.stringRepeat("\xa0",n.indent)),a++,u=0,s=n[a]||Number.MAX_VALUE;0!=h.length&&(i+=h.length,u=this.$renderToken(t,u,l,h))}}},this.$renderSimpleLine=function(t,e){var n=0,r=e[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(t,i)),i&&(n=this.$renderToken(t,n,r,i));for(var o=1;o<e.length;o++)r=e[o],i=r.value,n=this.$renderToken(t,n,r,i)},this.$renderLine=function(t,e,n,r){if(r||0==r||(r=this.session.getFoldLine(e)),r)var i=this.$getFoldLineTokens(e,r);else var i=this.session.getTokens(e);if(n||t.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(e)),"px'>"),i.length){var o=this.session.getRowSplitData(e);o&&o.length?this.$renderWrappedLine(t,i,o,n):this.$renderSimpleLine(t,i)}this.showInvisibles&&(r&&(e=r.end.row),t.push("<span class='ace_invisible ace_invisible_eol'>",e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||t.push("</div>")},this.$getFoldLineTokens=function(t,e){function n(t,e,n){for(var r=0,o=0;o+t[r].value.length<e;)if(o+=t[r].value.length,++r==t.length)return;if(o!=e){var a=t[r].value.substring(e-o);a.length>n-e&&(a=a.substring(0,n-e)),i.push({type:t[r].type,value:a}),o=e+a.length,r+=1}for(;o<n&&r<t.length;){var a=t[r].value;a.length+o>n?i.push({type:t[r].type,value:a.substring(0,n-o)}):i.push(t[r]),o+=a.length,r+=1}}var r=this.session,i=[],o=r.getTokens(t);return e.walk(function(t,e,a,s,u){null!=t?i.push({type:"fold",value:t}):(u&&(o=r.getTokens(e)),o.length&&n(o,s,a))},e.end.row,this.session.getLine(e.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(s.prototype),e.Text=s}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";var r,i=t("../lib/dom"),o=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),void 0===r&&(r=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(r?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(t){for(var e=this.cursors,n=e.length;n--;)e[n].style.visibility=t?"":"hidden"},this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)e[n].style.opacity=t?"":"0"},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t==this.smoothBlinking||r||(this.smoothBlinking=t,i.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var t=i.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&i.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var e=function(){this.timeoutId=setTimeout(function(){t(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){t(!0),e()},this.blinkInterval),e()}},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,r=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);for(var n=0,i=e.length;n<i;n++){var o=this.getPixelPosition(e[n].cursor,!0);if(!((o.top>t.height+t.offset||o.top<0)&&n>1)){var a=(this.cursors[r++]||this.addCursor()).style;this.drawCursor?this.drawCursor(a,o,t,e[n],this.session):(a.left=o.left+"px",a.top=o.top+"px",a.width=t.characterWidth+"px",a.height=t.lineHeight+"px")}}for(;this.cursors.length>r;)this.removeCursor();var s=this.session.getOverwrite();this.$setOverwrite(s),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),e.Cursor=o}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/dom"),o=t("./lib/event"),a=t("./lib/event_emitter").EventEmitter,s=function(t){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){r.implement(this,a),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(s.prototype);var u=function(t,e){s.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=i.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(u,s),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,t>32768?(this.coeff=32768/t,t=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(u.prototype);var c=function(t,e){s.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(c,s),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(c.prototype),e.ScrollBar=u,e.ScrollBarV=u,e.ScrollBarH=c,e.VScrollBar=u,e.HScrollBar=c}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,e,n){"use strict";var r=t("./lib/event"),i=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.window=e||window};(function(){this.schedule=function(t){if(this.changes=this.changes|t,!this.pending&&this.changes){this.pending=!0;var e=this;r.nextFrame(function(){e.pending=!1;for(var t;t=e.changes;)e.changes=0,e.onRender(t)},this.window)}}}).call(i.prototype),e.RenderLoop=i}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,n){var r=t("../lib/oop"),i=t("../lib/dom"),o=t("../lib/lang"),a=t("../lib/useragent"),s=t("../lib/event_emitter").EventEmitter,u=0,c=e.FontMetrics=function(t){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),u||this.$testFractionalRect(),this.$measureNode.innerHTML=o.stringRepeat("X",u),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){r.implement(this,s),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var t=i.createElement("div");this.$setMeasureNodeStyles(t.style),t.style.width="0.2px",document.documentElement.appendChild(t);var e=t.getBoundingClientRect().width;u=e>0&&e<1?50:100,t.parentNode.removeChild(t)},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",a.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(){var t=this.$measureSizes();if(t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=setInterval(function(){t.checkForSizeChanges()},500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===u){var t=null;try{t=this.$measureNode.getBoundingClientRect()}catch(e){t={width:0,height:0}}var e={height:t.height,width:t.width/u}}else var e={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/u};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.innerHTML=o.stringRepeat(t,u),this.$main.getBoundingClientRect().width/u},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(c.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/dom"),o=t("./config"),a=t("./lib/useragent"),s=t("./layer/gutter").Gutter,u=t("./layer/marker").Marker,c=t("./layer/text").Text,l=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,f=t("./scrollbar").VScrollBar,d=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,g=t("./lib/event_emitter").EventEmitter;i.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}',"ace_editor.css");var m=function(t,e){var n=this;this.container=t||i.createElement("div"),this.$keepTextAreaAtCursor=!a.isOldIE,i.addCssClass(this.container,"ace_editor"),this.setTheme(e),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var r=this.$textLayer=new c(this.content);this.canvas=r.element,this.$markerFront=new u(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var o=this.$updateCachedSize(t,e,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,r){r-=this.$extraHeight||0;var i=0,o=this.$size,a={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return r&&(t||o.height!=r)&&(o.height=r,i|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",i|=this.CHANGE_SCROLL),n&&(t||o.width!=n)&&(i|=this.CHANGE_SIZE,o.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,this.scrollBarH.element.style.left=this.scroller.style.left=e+"px",o.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(i|=this.CHANGE_FULL)),o.$dirty=!n||!r,i&&this._signal("resize",a),i},this.onGutterResize=function(){var t=this.$showGutter?this.$gutter.offsetWidth:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var t=this.$cursorLayer.$pixelPos,e=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,t=this.$cursorLayer.getPixelPosition(n,!0),e*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=t.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=e+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=i.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var t=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;e-=t.offset;var r=this.textarea.style,i=this.lineHeight;if(e<0||e>t.height-i)return void(r.top=r.left="0");var o=this.characterWidth;if(this.$composition){var a=this.textarea.value.replace(/^\x01+/,"");o*=this.session.$getStringScreenWidth(a)[0]+2,i+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-o&&(n=this.$size.scrollerWidth-o),n+=this.gutterWidth,r.height=i+"px",r.width=o+"px",r.left=Math.min(n,this.$size.scrollerWidth-o)+"px",r.top=Math.min(e,this.$size.height-i)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,r){var i=this.scrollMargin;i.top=0|t,i.bottom=0|e,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!t&&!e)return void(this.$changes|=t);if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}return t&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):t&this.CHANGE_SCROLL?(t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(t&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),void this._signal("afterRender"))},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=t>e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,o=this.$getLongestLine(),a=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-o-2*this.$padding<0),s=this.$horizScroll!==a;s&&(this.$horizScroll=a,this.scrollBarH.setVisible(a));var u=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var c=this.scrollTop%this.lineHeight,l=e.scrollerHeight+this.lineHeight,h=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=h;var f=this.scrollMargin;this.session.setScrollTop(Math.max(-f.top,Math.min(this.scrollTop,i-e.scrollerHeight+f.bottom))),this.session.setScrollLeft(Math.max(-f.left,Math.min(this.scrollLeft,o+2*this.$padding-e.scrollerWidth+f.right)));var d=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-i+h<0||this.scrollTop>f.top),p=u!==d;p&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var g,m,v=Math.ceil(l/this.lineHeight)-1,y=Math.max(0,Math.round((this.scrollTop-c)/this.lineHeight)),b=y+v,w=this.lineHeight;y=t.screenToDocumentRow(y,0);var _=t.getFoldLine(y);_&&(y=_.start.row),g=t.documentToScreenRow(y,0),m=t.getRowLength(y)*w,b=Math.min(t.screenToDocumentRow(b,0),t.getLength()-1),l=e.scrollerHeight+t.getRowLength(b)*w+m,c=this.scrollTop-g*w;var x=0;return this.layerConfig.width!=o&&(x=this.CHANGE_H_SCROLL),(s||p)&&(x=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),p&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:y,firstRowScreen:g,lastRow:b,lineHeight:w,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:c,gutterOffset:w?Math.max(0,Math.ceil((c+e.height-e.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},x},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1)&&!(e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(t),i=r.left,o=r.top,a=n&&n.top||0,s=n&&n.bottom||0,u=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;u+a>o?(e&&u+a>o+this.lineHeight&&(o-=e*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):u+this.$size.scrollerHeight-s<o+this.lineHeight&&(e&&u+this.$size.scrollerHeight-s<o-this.lineHeight&&(o+=e*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight));var c=this.scrollLeft;c>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):c+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&i-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(e||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(t,e){var n=0,r=this.STEPS,i=[];for(n=0;n<r;++n)i.push(function(t,e,n){return n*(Math.pow(t-1,3)+1)+e}(n/this.STEPS,t,e-t));return i},this.scrollToLine=function(t,e,n,r){var i=this.$cursorLayer.getPixelPosition({row:t,column:0}),o=i.top;e&&(o-=this.$size.scrollerHeight/2);var a=this.scrollTop;this.session.setScrollTop(o),!1!==n&&this.animateScrolling(a,r)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(t!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(t=i[0])==n)return}var o=r.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:o},clearInterval(this.$timer),r.session.setScrollTop(o.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){o.length?(r.session.setScrollTop(o.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,e&&e())},10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),r=t+this.scrollLeft-n.left-this.$padding,i=r/this.characterWidth,o=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),a=Math.round(i);return{row:o,column:a,side:i-a>0?1:-1,offsetX:r}},this.screenToTextCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),r=t+this.scrollLeft-n.left-this.$padding,i=Math.round(r/this.characterWidth),o=(e+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(o,Math.max(i,0),r)},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(t,e),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,t)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),o=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(t){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(t,e){function n(n){if(r.$themeId!=t)return e&&e();if(!n||!n.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");i.importCssString(n.cssText,n.cssClass,r.container.ownerDocument),r.theme&&i.removeCssClass(r.container,r.theme.cssClass);var o="padding"in n?n.padding:"padding"in(r.theme||{})?4:r.$padding;r.$padding&&o!=r.$padding&&r.setPadding(o),r.$theme=n.cssClass,r.theme=n,i.addCssClass(r.container,n.cssClass),i.setCssClass(r.container,"ace_dark",n.isDark),r.$size&&(r.$size.width=0,r.$updateSizeAsync()),r._dispatchEvent("themeLoaded",{theme:n}),e&&e()}var r=this;if(this.$themeId=t,r._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)n(t);else{var a=t||this.$options.theme.initialValue;o.loadModule(["theme",a],n)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){i.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){i.removeCssClass(this.container,t)},this.setCursorStyle=function(t){this.scroller.style.cursor!=t&&(this.scroller.style.cursor=t)},this.setMouseCursor=function(t){this.scroller.style.cursor=t},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),o.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t)},initialValue:!0},showLineNumbers:{set:function(t){this.$gutterLayer.setShowLineNumbers(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){if(!this.$gutterLineHighlight)return this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight);this.$gutterLineHighlight.style.display=t?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),e.VirtualRenderer=m}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,e,n){"use strict";function r(t,e){var n=e.src;a.qualifyURL(t);try{return new Blob([n],{type:"application/javascript"})}catch(t){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,i=new r;return i.append(n),i.getBlob("application/javascript")}}function i(t,e){var n=r(t,e),i=window.URL||window.webkitURL,o=i.createObjectURL(n);return new Worker(o)}var o=t("../lib/oop"),a=t("../lib/net"),s=t("../lib/event_emitter").EventEmitter,u=t("../config"),c=function(e,n,r,o,a){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),u.get("packaged")||!t.toUrl)o=o||u.moduleUrl(n.id,"worker");else{var s=this.$normalizePath;o=o||s(t.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach(function(e){c[e]=s(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}this.$worker=i(o,n),a&&this.send("importScripts",a),this.$worker.postMessage({init:!0,tlns:c,module:n.id,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,s),this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return a.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,e.push(r)}this.send(t,e)},this.emit=function(t,e){try{this.$worker.postMessage({event:t,data:{data:e.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(c.prototype);var l=function(t,e,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,i=!1,o=Object.create(s),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(t){a.messageBuffer.push(t),r&&(i?setTimeout(c):c())},this.setEmitSync=function(t){i=t};var c=function(){var t=a.messageBuffer.shift();t.command?r[t.command].apply(r,t.args):t.event&&o._signal(t.event,t.data)};o.postMessage=function(t){a.onMessage({data:t})},o.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},o.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},u.loadModule(["worker",e],function(t){for(r=new t[n](o);a.messageBuffer.length;)c()})};l.prototype=c.prototype,e.UIWorkerClient=l,e.WorkerClient=c,e.createWorker=i}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,e,n){"use strict";var r=t("./range").Range,i=t("./lib/event_emitter").EventEmitter,o=t("./lib/oop"),a=function(t,e,n,r,i,o){var a=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=i,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){a.onCursorChange()})},this.$pos=n;var s=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,i),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var r=e.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),t.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,i=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,o=e.start.column-this.pos.column;if(this.updateAnchors(t),i&&(this.length+=n),i&&!this.session.$fromUndo)if("insert"===t.action)for(var a=this.others.length-1;a>=0;a--){var s=this.others[a],u={row:s.row,column:s.column+o};this.doc.insertMergedLines(u,t.lines)}else if("remove"===t.action)for(var a=this.others.length-1;a>=0;a--){var s=this.others[a],u={row:s.row,column:s.column+o};this.doc.remove(new r(u.row,u.column,u.row,u.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(a.prototype),e.PlaceHolder=a}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,n){function r(t,e){return t.row==e.row&&t.column==e.column}function i(t){var e=t.domEvent,n=e.altKey,i=e.shiftKey,s=e.ctrlKey,u=t.getAccelKey(),c=t.getButton();if(s&&a.isMac&&(c=e.button),t.editor.inMultiSelectMode&&2==c)return void t.editor.textInput.onContextMenu(t.domEvent);if(!s&&!n&&!u)return void(0===c&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode());if(0===c){var l,h=t.editor,f=h.selection,d=h.inMultiSelectMode,p=t.getDocumentPosition(),g=f.getCursor(),m=t.inSelection()||f.isEmpty()&&r(p,g),v=t.x,y=t.y,b=function(t){v=t.clientX,y=t.clientY},w=h.session,_=h.renderer.pixelToScreenCoordinates(v,y),x=_;if(h.$mouseHandler.$enableJumpToDef)s&&n||u&&n?l=i?"block":"add":n&&h.$blockSelectEnabled&&(l="block");else if(u&&!n){if(l="add",!d&&i)return}else n&&h.$blockSelectEnabled&&(l="block");if(l&&a.isMac&&e.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==l){if(!d&&m)return;if(!d){var E=f.toOrientedRange();h.addSelectionMarker(E)}var A=f.rangeList.rangeAtPoint(p);h.$blockScrolling++,h.inVirtualSelectionMode=!0,i&&(A=null,E=f.ranges[0]||E,h.removeSelectionMarker(E)),h.once("mouseup",function(){var t=f.toOrientedRange();A&&t.isEmpty()&&r(A.cursor,t.cursor)?f.substractPoint(t.cursor):(i?f.substractPoint(E.cursor):E&&(h.removeSelectionMarker(E),f.addRange(E)),f.addRange(t)),h.$blockScrolling--,h.inVirtualSelectionMode=!1})}else if("block"==l){t.stop(),h.inVirtualSelectionMode=!0;var C,S=[],M=function(){var t=h.renderer.pixelToScreenCoordinates(v,y),e=w.screenToDocumentPosition(t.row,t.column,t.offsetX);r(x,t)&&r(e,f.lead)||(x=t,h.$blockScrolling++,h.selection.moveToPosition(e),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(S),S=f.rectangularRangeBlock(x,_),h.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=h.$mouseHandler.$clickSelection.clone()),S.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers(),h.$blockScrolling--)};h.$blockScrolling++,d&&!u?f.toSingleRange():!d&&u&&(C=f.toOrientedRange(),h.addSelectionMarker(C)),i?_=w.documentToScreenPosition(f.lead):f.moveToPosition(p),h.$blockScrolling--,x={row:-1,column:-1};var T=function(t){clearInterval(O),h.removeSelectionMarkers(S),S.length||(S=[f.toOrientedRange()]),h.$blockScrolling++,C&&(h.removeSelectionMarker(C),f.toSingleRange(C));for(var e=0;e<S.length;e++)f.addRange(S[e]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null,h.$blockScrolling--},k=M;o.capture(h.container,b,T);var O=setInterval(function(){k()},20);return t.preventDefault()}}}var o=t("../lib/event"),a=t("../lib/useragent");e.onMouseDown=i}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var r=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new r(e.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,e,n){function r(t,e,n){return g.$options.wrap=!0,g.$options.needle=e,g.$options.backwards=-1==n,g.find(t)}function i(t,e){return t.row==e.row&&t.column==e.column}function o(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",l),t.commands.addCommands(d.defaultCommands),a(t))}function a(t){function e(e){r&&(t.renderer.setMouseCursor(""),r=!1)}var n=t.textInput.getElement(),r=!1;h.addListener(n,"keydown",function(n){var i=18==n.keyCode&&!(n.ctrlKey||n.shiftKey||n.metaKey);t.$blockSelectEnabled&&i?r||(t.renderer.setMouseCursor("crosshair"),r=!0):r&&e()}),h.addListener(n,"keyup",e),h.addListener(n,"blur",e)}var s=t("./range_list").RangeList,u=t("./range").Range,c=t("./selection").Selection,l=t("./mouse/multi_select_handler").onMouseDown,h=t("./lib/event"),f=t("./lib/lang"),d=t("./commands/multi_select_commands");e.commands=d.defaultCommands.concat(d.multiSelectCommands);var p=t("./search").Search,g=new p,m=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var r=this.rangeList.add(t);return this.$onAddRange(t),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length?this.$onRemoveRange(t):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var n=t.length;n--;){var r=this.ranges.indexOf(t[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=u.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var n=this.getRange(),r=this.isBackwards(),i=n.start.row,o=n.end.row;if(i==o){if(r)var a=n.end,s=n.start;else var a=n.start,s=n.end;return this.addRange(u.fromPoints(s,s)),void this.addRange(u.fromPoints(a,a))}var c=[],l=this.getLineRange(i,!0);l.start.column=n.start.column,c.push(l);for(var h=i+1;h<o;h++)c.push(this.getLineRange(h,!0));l=this.getLineRange(o,!0),l.end.column=n.end.column,c.push(l),c.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=u.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),i=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(r,i).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,n){var r=[],o=t.column<e.column;if(o)var a=t.column,s=e.column,c=t.offsetX,l=e.offsetX;else var a=e.column,s=t.column,c=e.offsetX,l=t.offsetX;var h=t.row<e.row;if(h)var f=t.row,d=e.row;else var f=e.row,d=t.row;a<0&&(a=0),f<0&&(f=0),f==d&&(n=!0);for(var p=f;p<=d;p++){var g=u.fromPoints(this.session.screenToDocumentPosition(p,a,c),this.session.screenToDocumentPosition(p,s,l));if(g.isEmpty()){if(m&&i(g.end,m))break;var m=g.end}g.cursor=o?g.start:g.end,r.push(g)}if(h&&r.reverse(),!n){for(var v=r.length-1;r[v].isEmpty()&&v>0;)v--;if(v>0)for(var y=0;r[y].isEmpty();)y++;for(var b=v;b>=y;b--)r[b].isEmpty()&&r.splice(b,1)}return r}}.call(c.prototype);var v=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var r=t[n];if(r.marker){this.session.removeMarker(r.marker);var i=e.indexOf(r);-1!=i&&e.splice(i,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(d.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(d.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,n=t.editor;if(n.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?r=n.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?r=n.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(n.exitMultiSelectMode(),r=e.exec(n,t.args||{})):r=e.multiSelectAction(n,t.args||{});else{var r=e.exec(n,t.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var r,i=n&&n.keepOrder,o=1==n||n&&n.$byLines,a=this.session,s=this.selection,u=s.rangeList,l=(i?s:u).ranges;if(!l.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var h=s._eventRegistry;s._eventRegistry={};var f=new c(a);this.inVirtualSelectionMode=!0;for(var d=l.length;d--;){if(o)for(;d>0&&l[d].start.row==l[d-1].end.row;)d--;f.fromOrientedRange(l[d]),f.index=d,this.selection=a.selection=f;var p=t.exec?t.exec(this,e||{}):t(this,e||{});r||void 0===p||(r=p),f.toOrientedRange(l[d])}f.detach(),this.selection=a.selection=s,this.inVirtualSelectionMode=!1,s._eventRegistry=h,s.mergeOverlappingRanges();var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),r}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],r=0;r<e.length;r++)n.push(this.session.getTextRange(e[r]));var i=this.session.getDocument().getNewLineCharacter();t=n.join(i),t.length==(n.length-1)*i.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var r=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row==e.row&&this.session.$clipPositionToDocument(r.row,r.column).column==e.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(t,e,n){if(e=e||{},e.needle=t||e.needle,void 0==e.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(r)}this.$search.set(e);var i=this.$search.findAll(this.session);if(!i.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;n||o.toSingleRange(i[0]);for(var a=i.length;a--;)o.addRange(i[a],!0);return r&&o.rangeList.rangeAtPoint(r.start)&&o.addRange(r,!0),this.$blockScrolling-=1,i.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,i=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(i.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(i.row+t,i.column);if(n.isEmpty())var a=o;else var s=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(s.row+t,s.column);if(r){var c=u.fromPoints(o,a);c.cursor=c.start}else{var c=u.fromPoints(a,o);c.cursor=c.end}if(c.desiredColumn=i.column,this.selection.inMultiSelectMode){if(e)var l=n.cursor}else this.selection.addRange(n);this.selection.addRange(c),l&&this.selection.substractPoint(l)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,r=n.ranges,i=r.length;i--;){var o=r[i];if(o.isEmpty()){var a=e.getWordRange(o.start.row,o.start.column);o.start.row=a.start.row,o.start.column=a.start.column,o.end.row=a.end.row,o.end.column=a.end.column}}n.mergeOverlappingRanges();for(var s=[],i=r.length;i--;){var o=r[i];s.unshift(e.getTextRange(o))}t<0?s.unshift(s.pop()):s.push(s.shift());for(var i=r.length;i--;){var o=r[i],a=o.clone();e.replace(o,s[i]),o.start.row=a.start.row,o.start.column=a.start.column}},this.selectMore=function(t,e,n){var i=this.session,o=i.multiSelect,a=o.toOrientedRange();if(!a.isEmpty()||(a=i.getWordRange(a.start.row,a.start.column),a.cursor=-1==t?a.start:a.end,this.multiSelect.addRange(a),!n)){var s=i.getTextRange(a),u=r(i,s,t);u&&(u.cursor=-1==t?u.start:u.end,this.$blockScrolling+=1,this.session.unfold(u),this.multiSelect.addRange(u),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(a.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,r=-1,i=n.filter(function(t){if(t.cursor.row==r)return!0;r=t.cursor.row});if(n.length&&i.length!=n.length-1){i.forEach(function(t){e.substractPoint(t.cursor)});var o=0,a=1/0,s=n.map(function(e){var n=e.cursor,r=t.getLine(n.row),i=r.substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>o&&(o=n.column),i<a&&(a=i),i});n.forEach(function(e,n){var r=e.cursor,i=o-r.column,c=s[n]-a;i>c?t.insert(r,f.stringRepeat(" ",i-c)):t.remove(new u(r.row,r.column,r.row,r.column-i+c)),e.start.column=e.end.column=o,e.start.row=e.end.row=r.row,e.cursor=e.end}),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var c=this.selection.getRange(),l=c.start.row,h=c.end.row,d=l==h;if(d){var p,g=this.session.getLength();do{p=this.session.getLine(h)}while(/[=:]/.test(p)&&++h<g);do{p=this.session.getLine(l)}while(/[=:]/.test(p)&&--l>0);l<0&&(l=0),h>=g&&(h=g-1)}var m=this.session.removeFullLines(l,h);m=this.$reAlignText(m,d),this.session.insert({row:l,column:0},m.join("\n")+"\n"),d||(c.start.column=0,c.end.column=m[m.length-1].length),this.selection.setRange(c)}},this.$reAlignText=function(t,e){function n(t){return f.stringRepeat(" ",t)}function r(t){return t[2]?n(a)+t[2]+n(s-t[2].length+u)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function i(t){return t[2]?n(a+s-t[2].length)+t[2]+n(u," ")+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function o(t){return t[2]?n(a)+t[2]+n(u)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}var a,s,u,c=!0,l=!0;return t.map(function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==a?(a=e[1].length,s=e[2].length,u=e[3].length,e):(a+s+u!=e[1].length+e[2].length+e[3].length&&(l=!1),a!=e[1].length&&(c=!1),a>e[1].length&&(a=e[1].length),s<e[2].length&&(s=e[2].length),u>e[3].length&&(u=e[3].length),e):[t]}).map(e?r:c?l?i:r:o)}}).call(v.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=o,t("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(t){o(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",l)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",l))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,e,n){"use strict";var r=t("../../range").Range,i=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var r=t.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var i=/\S/,o=t.getLine(e),a=o.search(i);if(-1!=a){for(var s=n||o.length,u=t.getLength(),c=e,l=e;++e<u;){var h=t.getLine(e).search(i);if(-1!=h){if(h<=a)break;l=e}}if(l>c){var f=t.getLine(l).length;return new r(c,s,l,f)}}},this.openingBracketBlock=function(t,e,n,i,o){var a={row:n,column:i+1},s=t.$findClosingBracket(e,a,o);if(s){var u=t.foldWidgets[s.row];return null==u&&(u=t.getFoldWidget(s.row)),"start"==u&&s.row>a.row&&(s.row--,s.column=t.getLine(s.row).length),r.fromPoints(a,s)}},this.closingBracketBlock=function(t,e,n,i,o){var a={row:n,column:i},s=t.$findOpeningBracket(e,a);if(s)return s.column++,a.column--,r.fromPoints(s,a)}}).call(i.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t("../lib/dom").importCssString(e.cssText,e.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(t,e,n){"use strict";function r(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var i=(t("./lib/oop"),t("./lib/dom"));t("./range").Range;(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets?this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0:0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var r=t.data,i=r.start.row,o=r.end.row,a="add"==t.action,s=i+1;s<o;s++)n[s]&&(n[s].hidden=a);n[o]&&(a?n[i]?n[o].hidden=a:n[i]=n[o]:(n[i]==n[o]&&(n[i]=void 0),n[o].hidden=a))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var n=t.start.row,r=t.end.row-n;if(0===r);else if("remove"==t.action){var i=e.splice(n+1,r);i.forEach(function(t){t&&this.removeLineWidget(t)},this),this.$updateRows()}else{var o=new Array(r);o.unshift(n,0),e.splice.apply(e,o),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach(function(t,n){if(t)for(e=!1,t.row=n;t.$oldWidget;)t.$oldWidget.row=n,t=t.$oldWidget}),e&&(this.session.lineWidgets=null)}},this.addLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t.session=this.session;var n=this.editor.renderer;t.html&&!t.el&&(t.el=i.createElement("div"),t.el.innerHTML=t.html),t.el&&(i.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,n.container.appendChild(t.el),t._inDocument=!0),t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight),null==t.rowCount&&(t.rowCount=t.pixelHeight/n.layerConfig.lineHeight);var r=this.session.getFoldAt(t.row,0);if(t.$fold=r,r){var o=this.session.lineWidgets;t.row!=r.end.row||o[r.start.row]?t.hidden=!0:o[r.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(t){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],r=[];n;)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,r=e.layerConfig;if(n&&n.length){for(var i=1/0,o=0;o<n.length;o++){var a=n[o];if(a&&a.el&&a.session==this.session){if(!a._inDocument){if(this.session.lineWidgets[a.row]!=a)continue;a._inDocument=!0,e.container.appendChild(a.el)}a.h=a.el.offsetHeight,a.fixedWidth||(a.w=a.el.offsetWidth,a.screenWidth=Math.ceil(a.w/r.characterWidth));var s=a.h/r.lineHeight;a.coverLine&&(s-=this.session.getRowLineCount(a.row))<0&&(s=0),a.rowCount!=s&&(a.rowCount=s,a.row<i&&(i=a.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var a=i;a<=o;a++){var s=r[a];if(s&&s.el)if(s.hidden)s.el.style.top=-100-(s.pixelHeight||0)+"px";else{s._inDocument||(s._inDocument=!0,e.container.appendChild(s.el));var u=e.$cursorLayer.getPixelPosition({row:a,column:0},!0).top;s.coverLine||(u+=n.lineHeight*this.session.getRowLineCount(s.row)),s.el.style.top=u-n.offset+"px";var c=s.coverGutter?0:e.gutterWidth;s.fixedWidth||(c-=e.scrollLeft),s.el.style.left=c+"px",s.fullWidth&&s.screenWidth&&(s.el.style.minWidth=n.width+2*n.padding+"px"),s.fixedWidth?s.el.style.right=e.scrollBar.getWidth()+"px":s.el.style.right=""}}}}}).call(r.prototype),e.LineWidgets=r}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(t,e,n){"use strict";function r(t,e,n){for(var r=0,i=t.length-1;r<=i;){var o=r+i>>1,a=n(e,t[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-(r+1)}function i(t,e,n){var i=t.getAnnotations().sort(s.comparePoints);if(i.length){var o=r(i,{row:e,column:-1},s.comparePoints);o<0&&(o=-o-1),o>=i.length?o=n>0?0:i.length-1:0===o&&n<0&&(o=i.length-1);var a=i[o];if(a&&n){if(a.row===e){do{a=i[o+=n]}while(a&&a.row===e);if(!a)return i.slice()}var u=[];e=a.row;do{u[n<0?"unshift":"push"](a),a=i[o+=n]}while(a&&a.row==e);return u.length&&u}}}var o=t("../line_widgets").LineWidgets,a=t("../lib/dom"),s=t("../range").Range;e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new o(n),n.widgetManager.attach(t));var r=t.getCursorPosition(),s=r.row,u=n.widgetManager.getWidgetsAtRow(s).filter(function(t){return"errorMarker"==t.type})[0];u?u.destroy():s-=e;var c,l=i(n,s,e);if(l){var h=l[0];r.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,r.row=h.row,c=t.renderer.$gutterLayer.$annotations[r.row]}else{if(u)return;c={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(r.row),t.selection.moveToPosition(r);var f={row:r.row,fixedWidth:!0,coverGutter:!0,el:a.createElement("div"),type:"errorMarker"},d=f.el.appendChild(a.createElement("div")),p=f.el.appendChild(a.createElement("div"));p.className="error_widget_arrow "+c.className;var g=t.renderer.$cursorLayer.getPixelPosition(r).left;p.style.left=g+t.renderer.gutterWidth-5+"px",f.el.className="error_widget_wrapper",d.className="error_widget "+c.className,d.innerHTML=c.text.join("<br>"),d.appendChild(a.createElement("div"));var m=function(t,e,n){if(0===e&&("esc"===n||"return"===n))return f.destroy(),{command:"null"}};f.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(f),t.off("changeSelection",f.destroy),t.off("changeSession",f.destroy),t.off("mouseup",f.destroy),t.off("change",f.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",f.destroy),t.on("changeSession",f.destroy),t.on("mouseup",f.destroy),t.on("change",f.destroy),t.session.widgetManager.addLineWidget(f),f.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:f.el.offsetHeight})},a.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(t,e,r){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/dom"),o=t("./lib/event"),a=t("./editor").Editor,s=t("./edit_session").EditSession,u=t("./undomanager").UndoManager,c=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.acequire=t,e.define=n(102),e.edit=function(t){if("string"==typeof t){var n=t;if(!(t=document.getElementById(n)))throw new Error("ace.edit can't find div #"+n)}if(t&&t.env&&t.env.editor instanceof a)return t.env.editor;var r="";if(t&&/input|textarea/i.test(t.tagName)){var s=t;r=s.value,t=i.createElement("pre"),s.parentNode.replaceChild(t,s)}else t&&(r=i.getInnerText(t),t.innerHTML="");var u=e.createEditSession(r),l=new a(new c(t));l.setSession(u);var h={document:u,editor:l,onResize:l.resize.bind(l,null)};return s&&(h.textarea=s),o.addListener(window,"resize",h.onResize),l.on("destroy",function(){o.removeListener(window,"resize",h.onResize),h.editor.container.env=null}),l.container.env=l.env=h,l},e.createEditSession=function(t,e){var n=new s(t,e);return n.setUndoManager(new u),n},e.EditSession=s,e.UndoManager=u,e.version="1.2.9"}),function(){ace.acequire(["ace/ace"],function(t){t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t);for(var e in t)t.hasOwnProperty(e)&&(window.ace[e]=t[e])})}(),t.exports=window.ace.acequire("ace/ace")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(50);n.d(e,"now",function(){return r.b}),n.d(e,"timer",function(){return r.c}),n.d(e,"timerFlush",function(){return r.d});var i=n(250);n.d(e,"timeout",function(){return i.a});var o=n(251);n.d(e,"interval",function(){return o.a})},function(t,e,n){"use strict";function r(){return w||(E(i),w=x.now()+_)}function i(){w=0}function o(){this._call=this._time=this._next=null}function a(t,e,n){var r=new o;return r.restart(t,e,n),r}function s(){r(),++g;for(var t,e=f;e;)(t=w-e._time)>=0&&e._call.call(null,t),e=e._next;--g}function u(){w=(b=x.now())+_,g=m=0;try{s()}finally{g=0,l(),w=0}}function c(){var t=x.now(),e=t-b;e>y&&(_-=e,b=t)}function l(){for(var t,e,n=f,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:f=e);d=t,h(r)}function h(t){if(!g){m&&(m=clearTimeout(m));t-w>24?(t<1/0&&(m=setTimeout(u,t-x.now()-_)),v&&(v=clearInterval(v))):(v||(b=x.now(),v=setInterval(c,y)),g=1,E(u))}}e.b=r,e.a=o,e.c=a,e.d=s;var f,d,p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=0,m=0,v=0,y=1e3,b=0,w=0,_=0,x="object"===("undefined"===typeof performance?"undefined":p(performance))&&performance.now?performance:Date,E="object"===("undefined"===typeof window?"undefined":p(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};o.prototype=a.prototype={constructor:o,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==e?0:+e),this._next||d===this||(d?d._next=this:f=this,d=this),this._call=t,this._time=n,h()},stop:function(){this._call&&(this._call=null,this._time=1/0,h())}}},function(t,e,n){"use strict";var r=n(12),i=n(107),o=n(110),a=n(111),s=n(24),u=n(112),c=n(113),l=n(109),h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(t,e){var n,f="undefined"===typeof e?"undefined":h(e);return null==e||"boolean"===f?Object(l.a)(e):("number"===f?s.a:"string"===f?(n=Object(r.a)(e))?(e=n,i.a):c.a:e instanceof r.a?i.a:e instanceof Date?a.a:Array.isArray(e)?o.a:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?u.a:s.a)(t,e)}},function(t,e,n){"use strict";function r(){}function i(t){var e;return t=(t+"").trim().toLowerCase(),(e=x.exec(t))?(e=parseInt(e[1],16),new c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=E.exec(t))?o(parseInt(e[1],16)):(e=A.exec(t))?new c(e[1],e[2],e[3],1):(e=C.exec(t))?new c(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=S.exec(t))?a(e[1],e[2],e[3],e[4]):(e=M.exec(t))?a(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=T.exec(t))?h(e[1],e[2]/100,e[3]/100,1):(e=k.exec(t))?h(e[1],e[2]/100,e[3]/100,e[4]):O.hasOwnProperty(t)?o(O[t]):"transparent"===t?new c(NaN,NaN,NaN,0):null}function o(t){return new c(t>>16&255,t>>8&255,255&t,1)}function a(t,e,n,r){return r<=0&&(t=e=n=NaN),new c(t,e,n,r)}function s(t){return t instanceof r||(t=i(t)),t?(t=t.rgb(),new c(t.r,t.g,t.b,t.opacity)):new c}function u(t,e,n,r){return 1===arguments.length?s(t):new c(t,e,n,null==r?1:r)}function c(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function l(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function h(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new p(t,e,n,r)}function f(t){if(t instanceof p)return new p(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=i(t)),!t)return new p;if(t instanceof p)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,a=Math.min(e,n,o),s=Math.max(e,n,o),u=NaN,c=s-a,l=(s+a)/2;return c?(u=e===s?(n-o)/c+6*(n<o):n===s?(o-e)/c+2:(e-n)/c+4,c/=l<.5?s+a:2-s-a,u*=60):c=l>0&&l<1?0:u,new p(u,c,l,t.opacity)}function d(t,e,n,r){return 1===arguments.length?f(t):new p(t,e,n,null==r?1:r)}function p(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function g(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.a=r,n.d(e,"d",function(){return v}),n.d(e,"c",function(){return y}),e.e=i,e.h=s,e.g=u,e.b=c,e.f=d;var m=n(53),v=.7,y=1/v,b="\\s*([+-]?\\d+)\\s*",w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x=/^#([0-9a-f]{3})$/,E=/^#([0-9a-f]{6})$/,A=new RegExp("^rgb\\("+[b,b,b]+"\\)$"),C=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),S=new RegExp("^rgba\\("+[b,b,b,w]+"\\)$"),M=new RegExp("^rgba\\("+[_,_,_,w]+"\\)$"),T=new RegExp("^hsl\\("+[w,_,_]+"\\)$"),k=new RegExp("^hsla\\("+[w,_,_,w]+"\\)$"),O={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(m.a)(r,i,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Object(m.a)(c,u,Object(m.b)(r,{brighter:function(t){return t=null==t?y:Math.pow(y,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?v:Math.pow(v,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+l(this.r)+l(this.g)+l(this.b)},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Object(m.a)(p,d,Object(m.b)(r,{brighter:function(t){return t=null==t?y:Math.pow(y,t),new p(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?v:Math.pow(v,t),new p(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new c(g(t>=240?t-240:t+120,i,r),g(t,i,r),g(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function(t,e,n){"use strict";function r(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}e.b=r,e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}e.a=r,e.b=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],a=t[i+1],s=i>0?t[i-1]:2*o-a,u=i<e-1?t[i+2]:2*a-o;return r((n-i/e)*e,s,o,a,u)}}},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(t){return y=t,b}}function o(t,e){try{return t(e)}catch(t){return y=t,b}}function a(t,e,n){try{t(e,n)}catch(t){return y=t,b}}function s(t){if("object"!==m(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&g(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),c(t,new p(e,n,a))})}function c(t,e){for(;3===t._83;)t=t._18;if(s._47&&s._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);l(t,e)}function l(t,e){v(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?h(e.promise,t._18):f(e.promise,t._18));var r=o(n,t._18);r===b?f(e.promise,y):h(e.promise,r)})}function h(t,e){if(e===t)return f(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===("undefined"===typeof e?"undefined":m(e))||"function"===typeof e)){var n=i(e);if(n===b)return f(t,y);if(n===t.then&&e instanceof s)return t._83=3,t._18=e,void d(t);if("function"===typeof n)return void g(n.bind(e),t)}t._83=1,t._18=e,d(t)}function f(t,e){t._83=2,t._18=e,s._71&&s._71(t,e),d(t)}function d(t){if(1===t._75&&(c(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)c(t,t._38[e]);t._38=null}}function p(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function g(t,e){var n=!1,r=a(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,f(e,t))});n||r!==b||(n=!0,f(e,y))}var m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=n(117),y=null,b={};t.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return c(this,new p(t,e,n)),n}},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n(1),i=n.n(r),o=i.a.shape({trySubscribe:i.a.func.isRequired,tryUnsubscribe:i.a.func.isRequired,notifyNestedSubs:i.a.func.isRequired,isSubscribed:i.a.func.isRequired}),a=i.a.shape({subscribe:i.a.func.isRequired,dispatch:i.a.func.isRequired,getState:i.a.func.isRequired})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":v(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":v(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function s(){}function u(t,e){var n={run:function(r){try{var i=t(e.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function c(t){var e,n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=c.getDisplayName,f=void 0===l?function(t){return"ConnectAdvanced("+t+")"}:l,v=c.methodName,_=void 0===v?"connectAdvanced":v,x=c.renderCountProp,E=void 0===x?void 0:x,A=c.shouldHandleStateChanges,C=void 0===A||A,S=c.storeKey,M=void 0===S?"store":S,T=c.withRef,k=void 0!==T&&T,O=a(c,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),F=M+"Subscription",P=b++,L=(e={},e[M]=m.a,e[F]=m.b,e),R=(n={},n[F]=m.b,n);return function(e){d()("function"==typeof e,"You must pass a component to the function returned by "+_+". Instead received "+JSON.stringify(e));var n=e.displayName||e.name||"Component",a=f(n),c=y({},O,{getDisplayName:f,methodName:_,renderCountProp:E,shouldHandleStateChanges:C,storeKey:M,withRef:k,displayName:a,wrappedComponentName:n,WrappedComponent:e}),l=function(n){function l(t,e){r(this,l);var o=i(this,n.call(this,t,e));return o.version=P,o.state={},o.renderCount=0,o.store=t[M]||e[M],o.propsMode=Boolean(t[M]),o.setWrappedInstance=o.setWrappedInstance.bind(o),d()(o.store,'Could not find "'+M+'" in either the context or props of "'+a+'". Either wrap the root component in a <Provider>, or explicitly pass "'+M+'" as a prop to "'+a+'".'),o.initSelector(),o.initSubscription(),o}return o(l,n),l.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[F]=e||this.context[F],t},l.prototype.componentDidMount=function(){C&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},l.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},l.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},l.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},l.prototype.getWrappedInstance=function(){return d()(k,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+_+"() call."),this.wrappedInstance},l.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},l.prototype.initSelector=function(){var e=t(this.store.dispatch,c);this.selector=u(e,this.store),this.selector.run(this.props)},l.prototype.initSubscription=function(){if(C){var t=(this.propsMode?this.props:this.context)[F];this.subscription=new g.a(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},l.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(w)):this.notifyNestedSubs()},l.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},l.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},l.prototype.addExtraProps=function(t){if(!k&&!E&&(!this.propsMode||!this.subscription))return t;var e=y({},t);return k&&(e.ref=this.setWrappedInstance),E&&(e[E]=this.renderCount++),this.propsMode&&this.subscription&&(e[F]=this.subscription),e},l.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return Object(p.createElement)(e,this.addExtraProps(t.props))},l}(p.Component);return l.WrappedComponent=e,l.displayName=a,l.childContextTypes=R,l.contextTypes=L,l.propTypes=L,h()(l,e)}}e.a=c;var l=n(59),h=n.n(l),f=n(3),d=n.n(f),p=n(0),g=(n.n(p),n(133)),m=n(57),v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=0,w={}},function(t,e,n){var r,i,o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(e)&&"undefined"!==typeof t?t.exports=s():(r=s,void 0!==(i="function"===typeof r?r.call(e,n,e,t):r)&&(t.exports=i))}(0,function(){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,o=Object.getOwnPropertyDescriptor,a=Object.getPrototypeOf,s=a&&a(Object);return function u(c,l,h){if("string"!==typeof l){if(s){var f=a(l);f&&f!==s&&u(c,f,h)}var d=r(l);i&&(d=d.concat(i(l)));for(var p=0;p<d.length;++p){var g=d[p];if(!t[g]&&!e[g]&&(!h||!h[g])){var m=o(l,g);try{n(c,g,m)}catch(t){}}}return c}return c}})},function(t,e,n){"use strict";function r(t,e,n){function u(){y===v&&(y=v.slice())}function c(){return m}function l(t){if("function"!==typeof t)throw new Error("Expected listener to be a function.");var e=!0;return u(),y.push(t),function(){if(e){e=!1,u();var n=y.indexOf(t);y.splice(n,1)}}}function h(t){if(!Object(i.a)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,m=g(m,t)}finally{b=!1}for(var e=v=y,n=0;n<e.length;n++){(0,e[n])()}return t}function f(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");g=t,h({type:s.INIT})}function d(){var t,e=l;return t={subscribe:function(t){function n(){t.next&&t.next(c())}if("object"!==("undefined"===typeof t?"undefined":a(t)))throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:e(n)}}},t[o.a]=function(){return this},t}var p;if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var g=t,m=e,v=[],y=v,b=!1;return h({type:s.INIT}),p={dispatch:h,subscribe:l,getState:c,replaceReducer:f},p[o.a]=d,p}n.d(e,"a",function(){return s}),e.b=r;var i=n(30),o=n(145),a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s={INIT:"@@redux/INIT"}},function(t,e,n){"use strict";var r=n(138),i=r.a.Symbol;e.a=i},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}e.a=r},function(t,e,n){"use strict";function r(t){return function(e,n){function r(){return i}var i=t(e,n);return r.dependsOnOwnProps=!1,r}}function i(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function o(t,e){return function(e,n){var r=(n.displayName,function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)});return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=i(t);var o=r(e,n);return"function"===typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=i(o),o=r(e,n)),o},r}}e.a=r,e.b=o;n(65)},function(t,e,n){"use strict";n(30),n(29)},function(t,e,n){"use strict";var r=(n(67),n(70),n(71),n(34),n(18));n.d(e,"a",function(){return r.a});var i=(n(73),n(74),n(20));n.d(e,"b",function(){return i.a});n(75)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(0),c=n.n(u),l=n(1),h=n.n(l),f=n(156),d=n.n(f),p=n(18),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.history=d()(o.props),a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){s()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},e.prototype.render=function(){return c.a.createElement(p.a,{history:this.history,children:this.props.children})},e}(c.a.Component);m.propTypes={initialEntries:h.a.array,initialIndex:h.a.number,getUserConfirmation:h.a.func,keyLength:h.a.number,children:h.a.node},e.a=m},function(t,e,n){"use strict";function r(t){return"/"===t.charAt(0)}function i(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],a=t&&r(t),s=e&&r(e),u=a||s;if(t&&r(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var c=void 0;if(o.length){var l=o[o.length-1];c="."===l||".."===l||""===l}else c=!1;for(var h=0,f=o.length;f>=0;f--){var d=o[f];"."===d?i(o,f):".."===d?(i(o,f),h++):h&&(i(o,f),h--)}if(!u)for(;h--;h)o.unshift("..");!u||""===o[0]||o[0]&&r(o[0])||o.unshift("");var p=o.join("/");return c&&"/"!==p.substr(-1)&&(p+="/"),p}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return r(t,e[n])});var n="undefined"===typeof t?"undefined":o(t);if(n!==("undefined"===typeof e?"undefined":o(e)))return!1;if("object"===n){var i=t.valueOf(),a=e.valueOf();if(i!==t||a!==e)return r(i,a);var s=Object.keys(t),u=Object.keys(e);return s.length===u.length&&s.every(function(n){return r(t[n],e[n])})}return!1}Object.defineProperty(e,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="function"===typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":i(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":i(t)};e.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":f(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":f(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(1),c=n.n(u),l=n(3),h=n.n(l),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(s.a.Component);d.propTypes={when:c.a.bool,message:c.a.oneOfType([c.a.func,c.a.string]).isRequired},d.defaultProps={when:!0},d.contextTypes={router:c.a.shape({history:c.a.shape({block:c.a.func.isRequired}).isRequired}).isRequired},e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(1),c=n.n(u),l=n(2),h=n.n(l),f=n(3),d=n.n(f),p=n(157),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=Object(p.a)(t.to),n=Object(p.a)(this.props.to);if(Object(p.b)(e,n))return void h()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},e.prototype.perform=function(){var t=this.context.router.history,e=this.props,n=e.push,r=e.to;n?t.push(r):t.replace(r)},e.prototype.render=function(){return null},e}(s.a.Component);m.propTypes={push:c.a.bool,from:c.a.string,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired}).isRequired,staticContext:c.a.object}).isRequired},e.a=m},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"d",function(){return l});var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},o=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},a=function(t,e){return e(window.confirm(t))},s=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},u=function(){return-1===window.navigator.userAgent.indexOf("Trident")},c=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},l=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":v(e))&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":v(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),c=n(3),l=n.n(c),h=n(0),f=n.n(h),d=n(1),p=n.n(d),g=n(14),m=(n.n(g),n(18)),v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(t){var e=t.pathname,n=void 0===e?"/":e,r=t.search,i=void 0===r?"":r,o=t.hash,a=void 0===o?"":o;return{pathname:n,search:"?"===i?"":i,hash:"#"===a?"":a}},w=function(t,e){return t?y({},e,{pathname:Object(g.addLeadingSlash)(t)+e.pathname}):e},_=function(t,e){if(!t)return e;var n=Object(g.addLeadingSlash)(t);return 0!==e.pathname.indexOf(n)?e:y({},e,{pathname:e.pathname.substr(n.length)})},x=function(t){return"string"===typeof t?Object(g.parsePath)(t):b(t)},E=function(t){return"string"===typeof t?t:Object(g.createPath)(t)},A=function(t){return function(){l()(!1,"You cannot %s with <StaticRouter>",t)}},C=function(){},S=function(t){function e(){var n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,t.call.apply(t,[this].concat(u))),r.createHref=function(t){return Object(g.addLeadingSlash)(r.props.basename+E(t))},r.handlePush=function(t){var e=r.props,n=e.basename,i=e.context;i.action="PUSH",i.location=w(n,x(t)),i.url=E(i.location)},r.handleReplace=function(t){var e=r.props,n=e.basename,i=e.context;i.action="REPLACE",i.location=w(n,x(t)),i.url=E(i.location)},r.handleListen=function(){return C},r.handleBlock=function(){return C},a=n,o(r,a)}return a(e,t),e.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},e.prototype.componentWillMount=function(){u()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},e.prototype.render=function(){var t=this.props,e=t.basename,n=(t.context,t.location),i=r(t,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:_(e,x(n)),push:this.handlePush,replace:this.handleReplace,go:A("go"),goBack:A("goBack"),goForward:A("goForward"),listen:this.handleListen,block:this.handleBlock};return f.a.createElement(m.a,y({},i,{history:o}))},e}(f.a.Component);S.propTypes={basename:p.a.string,context:p.a.object.isRequired,location:p.a.oneOfType([p.a.string,p.a.object])},S.defaultProps={basename:"",location:"/"},S.childContextTypes={router:p.a.object.isRequired},e.a=S},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(1),c=n.n(u),l=n(2),h=n.n(l),f=n(3),d=n.n(f),p=n(20),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Switch> outside a <Router>")},e.prototype.componentWillReceiveProps=function(t){h()(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),h()(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},e.prototype.render=function(){var t=this.context.router.route,e=this.props.children,n=this.props.location||t.location,r=void 0,i=void 0;return s.a.Children.forEach(e,function(e){if(s.a.isValidElement(e)){var o=e.props,a=o.path,u=o.exact,c=o.strict,l=o.sensitive,h=o.from,f=a||h;null==r&&(i=e,r=f?Object(p.a)(n.pathname,{path:f,exact:u,strict:c,sensitive:l}):t.match)}}),r?s.a.cloneElement(i,{location:n,computedMatch:r}):null},e}(s.a.Component);m.contextTypes={router:c.a.shape({route:c.a.object.isRequired}).isRequired},m.propTypes={children:c.a.node,location:c.a.object},e.a=m},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var i=n(0),o=n.n(i),a=n(1),s=n.n(a),u=n(59),c=n.n(u),l=n(34),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=function(t){var e=function(e){var n=e.wrappedComponentRef,i=r(e,["wrappedComponentRef"]);return o.a.createElement(l.a,{render:function(e){return o.a.createElement(t,h({},i,e,{ref:n}))}})};return e.displayName="withRouter("+(t.displayName||t.name)+")",e.WrappedComponent=t,e.propTypes={wrappedComponentRef:s.a.func},c()(e,t)};e.a=f},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,r=e.payload;return n===o?i({},t,{location:r}):t}n.d(e,"a",function(){return o}),e.b=r;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o="@@router/LOCATION_CHANGE",a={location:null}},function(t,e,n){"use strict";function r(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return{type:i,payload:{method:t,args:n}}}}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var i="@@router/CALL_HISTORY_METHOD",o=r("push");r("replace"),r("go"),r("goBack"),r("goForward")},function(t,e,n){"use strict";var r=n(13),i=n(166),o=n.n(i),a=n(79),s=n(172),u=n(208),c=n(95),l=Object(a.a)(),h={},f=[],d=[l,o.a,c.b],p=r.d.apply(void 0,[r.a.apply(void 0,d)].concat(f))(r.e),g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=p(s.a,t);return e.runSaga=l.run(u.a),e}();e.a=g},function(t,e,n){"use strict";var r=n(167),i=(n(81),n(8),n(21),n(83),n(4));n.d(e,"b",function(){return i.j});n(7),n(36),n(171);e.a=r.a},function(t,e,n){"use strict";function r(t){try{o(),t()}finally{a()}}function i(t){u.push(t),c||(o(),s())}function o(){c++}function a(){c--}function s(){a();for(var t=void 0;!c&&void 0!==(t=u.shift());)r(t)}e.a=i,e.c=o,e.b=s;var u=[],c=0},function(t,e,n){"use strict";function r(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var u=void 0;i.n.iterator(t)?(u=t,t=e):(Object(i.g)(e,i.n.func,s),u=e.apply(void 0,r),Object(i.g)(u,i.n.iterator,s));var c=t,l=c.subscribe,h=c.dispatch,f=c.getState,d=c.context,p=c.sagaMonitor,g=c.logger,m=c.onError,v=Object(i.v)();p&&(p.effectTriggered=p.effectTriggered||i.r,p.effectResolved=p.effectResolved||i.r,p.effectRejected=p.effectRejected||i.r,p.effectCancelled=p.effectCancelled||i.r,p.actionDispatched=p.actionDispatched||i.r,p.effectTriggered({effectId:v,root:!0,parentEffectId:0,effect:{root:!0,saga:e,args:r}}));var y=Object(o.a)(u,l,Object(i.x)(h),f,d,{sagaMonitor:p,logger:g,onError:m},v,e.name);return p&&p.effectResolved(v,y),y}e.a=r;var i=n(4),o=n(82),a="runSaga(storeInterface, saga, ...args)",s=a+": saga argument must be a Generator function!"},function(t,e,n){"use strict";function r(t,e){for(var n in e){var r=e[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n,r)}return t}function i(t){return("*"===t?b.wildcard:u.n.array(t)?b.array:u.n.stringableFunc(t)?b.default:u.n.func(t)?b.predicate:b.default)(t)}function o(t,e,n){function r(t){o(),n(t,!0)}function i(t){a.push(t),t.cont=function(i,o){c||(Object(u.t)(a,t),t.cont=u.r,o?r(i):(t===e&&(s=i),a.length||(c=!0,n(s))))}}function o(){c||(c=!0,a.forEach(function(t){t.cont=u.r,t.cancel()}),a=[])}var a=[],s=void 0,c=!1;return i(e),{addTask:i,cancelAll:o,abort:r,getTasks:function(){return a},taskNames:function(){return a.map(function(t){return t.name})}}}function a(t){var e=t.context,n=t.fn,r=t.args;if(u.n.iterator(n))return n;var i=void 0,o=void 0;try{i=n.apply(e,r)}catch(t){o=t}return u.n.iterator(i)?i:o?Object(u.q)(function(){throw o}):Object(u.q)(function(){var t=void 0,e={done:!1,value:i},n=function(t){return{done:!0,value:t}};return function(r){return t?n(r):(t=!0,e)}}())}function s(t){function e(){et.isRunning&&!et.isCancelled&&(et.isCancelled=!0,d(y))}function n(){t._isRunning&&!t._isCancelled&&(t._isCancelled=!0,nt.cancelAll(),g(y))}function d(e,n){if(!et.isRunning)throw new Error("Trying to resume an already finished generator");try{var r=void 0;n?r=t.throw(e):e===y?(et.isCancelled=!0,d.cancel(),r=u.n.func(t.return)?t.return(y):{done:!0,value:y}):r=e===v?u.n.func(t.return)?t.return():{done:!0}:t.next(e),r.done?(et.isMainRunning=!1,et.cont&&et.cont(r.value)):b(r.value,H,"",d)}catch(t){et.isCancelled&&Z(t),et.isMainRunning=!1,et.cont(t,!0)}}function g(e,n){t._isRunning=!1,J.close(),n?(e instanceof Error&&Object.defineProperty(e,"sagaStack",{value:"at "+V+" \n "+(e.sagaStack||e.stack),configurable:!0}),tt.cont||(e instanceof Error&&Y?Y(e):Z(e)),t._error=e,t._isAborted=!0,t._deferredEnd&&t._deferredEnd.reject(e)):(t._result=e,t._deferredEnd&&t._deferredEnd.resolve(e)),tt.cont&&tt.cont(e,n),tt.joiners.forEach(function(t){return t.cb(e,n)}),tt.joiners=null}function b(t,e){function n(t,e){a||(a=!0,i.cancel=u.r,q&&(e?q.effectRejected(o,t):q.effectResolved(o,t)),i(t,e))}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments[3],o=Object(u.v)();q&&q.effectTriggered({effectId:o,parentEffectId:e,label:r,effect:t});var a=void 0;n.cancel=u.r,i.cancel=function(){if(!a){a=!0;try{n.cancel()}catch(t){Z(t)}n.cancel=u.r,q&&q.effectCancelled(o)}};var s=void 0;return u.n.promise(t)?_(t,n):u.n.helper(t)?M(w(t),o,n):u.n.iterator(t)?x(t,o,V,n):u.n.array(t)?G(t,o,n):(s=l.c.take(t))?E(s,n):(s=l.c.put(t))?A(s,n):(s=l.c.all(t))?O(s,o,n):(s=l.c.race(t))?F(s,o,n):(s=l.c.call(t))?C(s,o,n):(s=l.c.cps(t))?S(s,n):(s=l.c.fork(t))?M(s,o,n):(s=l.c.join(t))?T(s,n):(s=l.c.cancel(t))?k(s,n):(s=l.c.select(t))?P(s,n):(s=l.c.actionChannel(t))?L(s,n):(s=l.c.flush(t))?D(s,n):(s=l.c.cancelled(t))?R(s,n):(s=l.c.getContext(t))?B(s,n):(s=l.c.setContext(t))?I(s,n):n(t)}function _(t,e){var n=t[u.a];u.n.func(n)?e.cancel=n:u.n.func(t.abort)&&(e.cancel=function(){return t.abort()}),t.then(e,function(t){return e(t,!0)})}function x(t,e,n,r){s(t,N,j,U,Q,z,e,n,r)}function E(t,e){var n=t.channel,r=t.pattern,o=t.maybe;n=n||J;var a=function(t){return t instanceof Error?e(t,!0):e(Object(h.d)(t)&&!o?v:t)};try{n.take(a,i(r))}catch(t){return e(t,!0)}e.cancel=a.cancel}function A(t,e){var n=t.channel,r=t.action,i=t.resolve;Object(c.a)(function(){var t=void 0;try{t=(n?n.put:j)(r)}catch(t){if(n||i)return e(t,!0);Z(t)}if(!i||!u.n.promise(t))return e(t);_(t,e)})}function C(t,e,n){var r=t.context,i=t.fn,o=t.args,a=void 0;try{a=i.apply(r,o)}catch(t){return n(t,!0)}return u.n.promise(a)?_(a,n):u.n.iterator(a)?x(a,e,i.name,n):n(a)}function S(t,e){var n=t.context,r=t.fn,i=t.args;try{var o=function(t,n){return u.n.undef(t)?e(n):e(t,!0)};r.apply(n,i.concat(o)),o.cancel&&(e.cancel=function(){return o.cancel()})}catch(t){return e(t,!0)}}function M(t,e,n){var r=t.context,i=t.fn,o=t.args,l=t.detached,h=a({context:r,fn:i,args:o});try{Object(c.c)();var f=s(h,N,j,U,Q,z,e,i.name,l?null:u.r);l?n(f):h._isRunning?(nt.addTask(f),n(f)):h._error?nt.abort(h._error):n(f)}finally{Object(c.b)()}}function T(t,e){if(t.isRunning()){var n={task:tt,cb:e};e.cancel=function(){return Object(u.t)(t.joiners,n)},t.joiners.push(n)}else t.isAborted()?e(t.error(),!0):e(t.result())}function k(t,e){t===u.d&&(t=tt),t.isRunning()&&t.cancel(),e()}function O(t,e,n){function r(){o===i.length&&(a=!0,n(u.n.array(t)?u.f.from(p({},s,{length:i.length})):s))}var i=Object.keys(t);if(!i.length)return n(u.n.array(t)?[]:{});var o=0,a=void 0,s={},c={};i.forEach(function(t){var e=function(e,i){a||(i||Object(h.d)(e)||e===v||e===y?(n.cancel(),n(e,i)):(s[t]=e,o++,r()))};e.cancel=u.r,c[t]=e}),n.cancel=function(){a||(a=!0,i.forEach(function(t){return c[t].cancel()}))},i.forEach(function(n){return b(t[n],e,n,c[n])})}function F(t,e,n){var r=void 0,i=Object.keys(t),o={};i.forEach(function(e){var a=function(o,a){if(!r)if(a)n.cancel(),n(o,!0);else if(!Object(h.d)(o)&&o!==v&&o!==y){var s;n.cancel(),r=!0;var c=(s={},s[e]=o,s);n(u.n.array(t)?[].slice.call(p({},c,{length:i.length})):c)}};a.cancel=u.r,o[e]=a}),n.cancel=function(){r||(r=!0,i.forEach(function(t){return o[t].cancel()}))},i.forEach(function(n){r||b(t[n],e,n,o[n])})}function P(t,e){var n=t.selector,r=t.args;try{var i=n.apply(void 0,[U()].concat(r));e(i)}catch(t){e(t,!0)}}function L(t,e){var n=t.pattern,r=t.buffer,o=i(n);o.pattern=n,e(Object(h.c)(N,r||f.a.fixed(),o))}function R(t,e){e(!!et.isCancelled)}function D(t,e){t.flush(e)}function B(t,e){e(Q[t])}function I(t,e){u.s.assign(Q,t),e()}var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return u.r},j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.r,U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.r,$=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,V=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",W=arguments[8];Object(u.g)(t,u.n.iterator,m);var G=Object(u.k)(O,Object(u.w)("[...effects]","all([...effects])")),q=z.sagaMonitor,X=z.logger,Y=z.onError,K=X||u.p,Z=function(t){var e=t.sagaStack;!e&&t.stack&&(e=-1!==t.stack.split("\n")[0].indexOf(t.message)?t.stack:"Error: "+t.message+"\n"+t.stack),K("error","uncaught at "+V,e||t.message||t)},J=Object(h.e)(N),Q=Object.create($);d.cancel=u.r;var tt=function(t,e,i,o){var a,s,c;return i._deferredEnd=null,s={},s[u.e]=!0,s.id=t,s.name=e,a="done",c={},c[a]=c[a]||{},c[a].get=function(){if(i._deferredEnd)return i._deferredEnd.promise;var t=Object(u.i)();return i._deferredEnd=t,i._isRunning||(i._error?t.reject(i._error):t.resolve(i._result)),t.promise},s.cont=o,s.joiners=[],s.cancel=n,s.isRunning=function(){return i._isRunning},s.isCancelled=function(){return i._isCancelled},s.isAborted=function(){return i._isAborted},s.result=function(){return i._result},s.error=function(){return i._error},s.setContext=function(t){Object(u.g)(t,u.n.object,Object(u.h)("task",t)),u.s.assign(Q,t)},r(s,c),s}(H,V,t,W),et={name:V,cancel:e,isRunning:!0},nt=o(V,et,g);return W&&(W.cancel=n),t._isRunning=!0,d(),tt}e.a=s;var u=n(4),c=n(80),l=n(7),h=n(8),f=n(21),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g="function"===typeof Symbol&&"symbol"===d(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":d(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":d(t)},m="proc first argument (Saga function result) must be an iterator",v={toString:function(){return"@@redux-saga/CHANNEL_END"}},y={toString:function(){return"@@redux-saga/TASK_CANCEL"}},b={wildcard:function(){return u.o},default:function(t){return"symbol"===("undefined"===typeof t?"undefined":g(t))?function(e){return e.type===t}:function(e){return e.type===String(t)}},array:function(t){return function(e){return t.some(function(t){return i(t)(e)})}},predicate:function(t){return function(e){return t(e)}}},w=function(t){return{fn:t}}},function(t,e,n){"use strict";var r=n(168),i=n(169),o=n(170),a=n(4);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return o.a});var s=function(t){return"import { "+t+" } from 'redux-saga' has been deprecated in favor of import { "+t+" } from 'redux-saga/effects'.\nThe latter will not work with yield*, as helper effects are wrapped automatically for you in fork effect.\nTherefore yield "+t+" will return task descriptor to your saga and execute next lines of code."};r.a,i.a,o.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(41),a=n(43),s=n(202),u=n(204),c=n(93),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(){function t(){r(this,t),this.awm=null,this.current=null,this.locked=!1}return l(t,[{key:"init",value:function(t){var e=this;return this.awm=t,c.a.initer(t).then(function(){return e.loadUserObject()})}},{key:"loadUserObject",value:function(){var t=this,e=new s.a(this.awm);return this.awm.objectManager.user._dispose(),e.createDefault(this.awm.projector.meterToAdsumDistance(3),{placeId:Symbol("UserPlace")},Symbol("UserPositionId")).then(function(e){var n=o.a.config.device;return t.awm.objectManager.user=e,t.awm.setDeviceId(n,!1)})}},{key:"goTo",value:function(t){var e=this;null!==this.current&&this.awm.wayfindingManager.removePath(this.current);var n=this.awm.wayfindingManager.locationRepository.get(t.placeId);return this.current=new i.d(null,n),this.awm.wayfindingManager.computePath(this.current).then(function(){c.a.buildMerged(e.current.pathSections);var t=Promise.resolve(),n=!0,r=!1,i=void 0;try{for(var o,s=e.current.pathSections[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;!function(n){var r=n.ground.isFloor?n.ground:null;t=t.then(function(){return a.a.setCurrentFloor(null===r?null:r.id)}),t=t.then(function(){return e.awm.cameraManager.centerOnFloor(r)}),t=t.then(function(){return e.drawPathSection(n)}),t=t.then(function(){return new Promise(function(t){setTimeout(t,1e3)})})}(u)}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return t})}},{key:"drawPathSection",value:function(t){this.awm.wayfindingManager.removePathSection(t);var e=c.a.build(t);return new u.a(e,this.awm.cameraManager,this.awm.wayfindingManager.projector).draw()}}]),t}(),f=new h;e.a=f},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){g&&d&&(g=!1,d.length?p=d.concat(p):m=-1,p.length&&s())}function s(){if(!g){var t=i(a);g=!0;for(var e=p.length;e;){for(d=p,p=[];++m<e;)d&&d[m].run();m=-1,e=p.length}d=null,g=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"===typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"===typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,p=[],g=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||g||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return o});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.fromJSON(e)}return i(t,[{key:"reset",value:function(){}},{key:"fromJSON",value:function(e){var n=this;this.reset(),Object.keys(e).forEach(function(r){n.hasOwnProperty(r)&&(n[r]instanceof t?n[r].fromJSON(e[r]):n[r]=e[r])})}},{key:"toJSON",value:function(){var e=this,n={};return Object.keys(this).forEach(function(r){e.hasOwnProperty(r)&&(e[r]instanceof t?n[r]=e[r].toJSON():n[r]=e[r])}),n}}]),t}()},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"c",function(){return un}),n.d(e,"d",function(){return tt}),n.d(e,"a",function(){return mt}),n.d(e,"b",function(){return yt}),n.d(e,"e",function(){return It});var u=n(86),c=n(175),l=n(176),h=n.n(l),f=n(177),d=n.n(f),p=n(196),g=n.n(p),m=n(197),v=n.n(m),y=n(198),b=n.n(y),w=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},_=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),A={DRAFT:"DRAFT",PUBLISHED:"PUBLISHED"},C=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"reset",value:function(){this.endpoint=null,this.username=null,this.key=null,this.site=null,this.locale=null,this.state=A.PUBLISHED,this.logger=new c.c,this.cacheManager=null}},{key:"getEndpoint",value:function(){return this.constructor.formatApiEndpoint(this.endpoint)}},{key:"validate",value:function(){if("string"!=typeof this.endpoint)throw new TypeError("AdsumClientApi.Options.endpoint: Should be a string");if("string"!=typeof this.username)throw new TypeError("AdsumClientApi.Options.username: Should be a string");if("string"!=typeof this.key)throw new TypeError("AdsumClientApi.Options.key: Should be a string");if(!Number.isInteger(this.site))throw new TypeError("AdsumClientApi.Options.site: Should be an integer");if(this.site<=0)throw new TypeError("AdsumClientApi.Options.site: Should be positive");var t=c.a.isValidLogger(this.logger),e=t.isValid,n=t.reasons;if(!e)throw new TypeError(n.join(", "))}}],[{key:"getApiVersion",value:function(){return"2.3"}},{key:"formatApiEndpoint",value:function(t){return"/"!==t.charAt(t.length-1)?t+"/2.3":t+"2.3"}}]),e}(u.a),S=function(){var t=0;return function(){return++t}}(),M=new WeakMap,T=new h.a,k=function(){function t(){throw o(this,t),new Error("EventDispatcher couldn't be instantiated")}return E(t,null,[{key:"_getObjectId",value:function(t){return M.has(t)||M.set(t,S()),M.get(t)}},{key:"_getUniversalEventName",value:function(t,e){return t.constructor.name+e+this._getObjectId(t)}},{key:"subscribe",value:function(t,e,n){var r=this._getUniversalEventName(t,e);T.on(r,n)}},{key:"unsubscribe",value:function(t,e,n){var r=this._getUniversalEventName(t,e);T.removeListener(r,n)}},{key:"publish",value:function(t,e,n){T.emit(this._getUniversalEventName(t,e),n)}}]),t}(),O={CREATE:"CREATE",UPDATE:"UPDATE",REMOVE:"REMOVE",IDENTIFIER_WILL_CHANGE:"IDENTIFIER_WILL_CHANGE",IDENTIFIER_DID_CHANGE:"IDENTIFIER_DID_CHANGE"},F={INITIAL:"INITIAL",LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"},P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t),this.x=e,this.y=n,this.z=r}return E(t,null,[{key:"fromJSON",value:function(e){var n=new t;return n.set(e),n}}]),E(t,[{key:"set",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,z:this.z}}}]),t}(),L={INVALID:"Must be valid",SYMBOL:"Must be a Symbol"},R=function(){function t(){if(o(this,t),this.constructor===t)throw new TypeError("AbstractValidator is abstract");if(void 0===this.isValid)throw new TypeError("#isValid is abstract")}return E(t,null,[{key:"message",get:function(){return L.INVALID}}]),t}(),D=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.validators=t,n}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){for(var r=0;r<this.validators.length;r++)if(this.validators[r].isValid(t,e,n))return!0;return!1}}]),e}(R),B=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.validators=t,n}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){for(var r=0;r<this.validators.length;r++)if(!this.validators[r].isValid(t,e,n))return!1;return!0}}]),e}(R),I=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return null===e[n]}}]),e}(R),N=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"symbol"==x(e[n])}}],[{key:"message",get:function(){return L.SYMBOL}}]),e}(R),j=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isInteger(e[n])}}]),e}(R),U=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isFinite(e[n])&&e[n]<0}}]),e}(R),$=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.validator=t,n}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return!this.validator.isValid(t,e,n)}}]),e}(R),z=function(){function t(){o(this,t)}return E(t,null,[{key:"toJSON",value:function(t){for(var e=Array.from(t.values()),n=0;n<e.length;n++)"object"==x(e[n])&&null!==e[n]&&"function"==typeof e[n].toJSON&&(e[n]=e[n].toJSON());return e}},{key:"set",value:function(t,e){t.clear(),e.forEach(function(e){t.add(e)})}}]),t}(),H=function(){function t(){o(this,t)}return E(t,null,[{key:"toJSON",value:function(t){var e=Object.create(null);return t.forEach(function(t,n){e[n]=t}),e}},{key:"set",value:function(t,e){t.clear(),"object"==("undefined"===typeof e?"undefined":x(e))?Object.keys(e).forEach(function(n){t.set(n,e[n])}):e.forEach(function(e){var n=_(e,2),r=n[0],i=n[1];t.set(r,i)})}}]),t}(),V=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this.classOf=e,this.value=null,this.set(n)}return E(t,null,[{key:"cast",value:function(e,n){if(null===n||"symbol"==("undefined"===typeof n?"undefined":x(n))||Number.isInteger(n))return n;if("object"!=("undefined"===typeof n?"undefined":x(n)))throw new TypeError("Expected integer, null, "+e+" or Reference<"+e+"> but got "+("undefined"===typeof n?"undefined":x(n)));if(n instanceof t){if(n.classOf!==e)throw new TypeError("Expected reference of "+e+" but got reference of "+n.classOf);return n.value}var r=null;switch(n.constructor.getName()){case"Label":case"Picto":r="CustomObject";break;case"Kiosk":case"Mobile":case"Web":r="Device";break;case"MapAoDae":case"MapConfig":case"MapDae":case"MapHelper":case"MapLight":case"MapPath":r="MapFile";break;case"MediaImage":case"MediaPdf":case"MediaText":case"MediaUrl":case"MediaVideo":case"Movie":r="Media";break;case"Exhibitor":case"Person":case"Product":case"Room":case"Service":case"Store":r="Poi";break;default:r=n.constructor.name}if(!n._isEntity)throw new TypeError("Expected integer, null or "+e+" or Reference<"+e+">");if(r!==e)throw new TypeError("Expected integer, null or "+e+" or Reference<"+e+"> but got "+n.constructor.getName());return n.id}}]),E(t,[{key:"set",value:function(t){return this.value=this.constructor.cast(this.classOf,t),this}},{key:"toJSON",value:function(){return this.value}},{key:"is",value:function(t){return this.constructor.cast(this.classOf,t)===this.value}}]),t}(),W=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this.classOf=e,this.values=new Set,n&&this.set(n)}return E(t,[{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(t){return this.values.forEach(t),this}},{key:"set",value:function(t){var e=this;return this.clear(),t.forEach(function(t){e.add(t)}),this}},{key:"at",value:function(t){var e=0,n=null;return this.values.forEach(function(r){e===t&&(n=r),e++}),n}},{key:"add",value:function(t){return this.has(t)?this:(this.values.add(new V(this.classOf,t)),this)}},{key:"remove",value:function(t){var e=this;return this.forEach(function(n){n.is(t)&&e.values.delete(n)}),this}},{key:"has",value:function(t){var e=!1;return this.forEach(function(n){!e&&n.is(t)&&(e=!0)}),e}},{key:"indexOf",value:function(t){var e=-1,n=0;return this.forEach(function(r){-1===e&&r.is(t)&&(e=n),n++}),e}},{key:"clear",value:function(){return this.values.clear()}},{key:"toJSON",value:function(){var t=[];return this.forEach(function(e){t.push(e.toJSON())}),t}},{key:"size",get:function(){return this.values.size}}]),t}(),G=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this.classOf=e,this.values=[],n&&this.set(n)}return E(t,null,[{key:"castPosition",value:function(t,e){var n=t;if(null===t||void 0===t)return null;if("string"==typeof t&&(n=Number.isNaN(Number(t))?t:parseInt(t,10)),!Number.isInteger(n))throw new TypeError("Position has to be an integer.");return n>=e?null:n}},{key:"order",value:function(t){var e=-1;return t.map(function(t){if(e++,null===t)throw new TypeError("OrderedCollection should not have null value");return"object"!=("undefined"===typeof t?"undefined":x(t))?{id:t,position:e}:t instanceof V||t._isEntity?{id:t,position:e}:t}).sort(function(e,n){return n.position!==e.position?n.position-e.position:"symbol"==x(e.id)&&"symbol"==x(n.id)?t.indexOf(e)-t.indexOf(n):"symbol"==x(e.id)?1:"symbol"==x(n.id)?-1:e.id-n.id}).map(function(t){return t.id})}}]),E(t,[{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(t){this.values.forEach(function(e){t(e)})}},{key:"set",value:function(t){var e=this;return this.clear(),this.constructor.order(t).forEach(function(t){e.values.push(new V(e.classOf,t))}),this}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.constructor.castPosition(e,this.size),r=this.indexOf(t);return-1!==r&&this.removeAt(r),null===n?this.values.push(new V(this.classOf,t)):this.values.splice(n,0,new V(this.classOf,t)),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return e>-1&&this.removeAt(e),this}},{key:"removeAt",value:function(t){return this.values.splice(t,1),this}},{key:"has",value:function(t){var e=!1;return this.forEach(function(n){!e&&n.is(t)&&(e=!0)}),e}},{key:"indexOf",value:function(t){var e=-1,n=0;return this.forEach(function(r){-1===e&&r.is(t)&&(e=n),n++}),e}},{key:"at",value:function(t){var e=0,n=null;return this.values.forEach(function(r){e===t&&(n=r),e++}),n}},{key:"clear",value:function(){return this.values.length=0,this}},{key:"toJSON",value:function(){var t=this.size;return this.values.map(function(e){return{id:e.toJSON(),position:--t}})}},{key:"size",get:function(){return this.values.length}}]),t}(),q=new Map,X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t),this.constructor._isAbstract()&&this._throwIsAbstract(),this._isEntity=!0,this._reset(),null!==e&&this.fromJSON(e)}return E(t,[{key:"set",value:function(t,e){return this[t]instanceof Set?z.set(this[t],e):this[t]instanceof Map?H.set(this[t],e):this[t]instanceof V||this[t]instanceof W||this[t]instanceof G||this[t]instanceof P?this[t].set(e):this[t]=e,this}}],[{key:"getName",value:function(){return"AbstractEntity"}},{key:"create",value:function(){return new this(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}},{key:"keys",get:function(){var t=[];return t.push("id"),t}}]),E(t,[{key:"toJSON",value:function(){var t=this,e={};return this.constructor.keys.forEach(function(n){t[n]instanceof Date||t[n]instanceof V||t[n]instanceof W||t[n]instanceof G||t[n]instanceof P?e[n]=t[n].toJSON():t[n]instanceof Set?e[n]=z.toJSON(t[n]):t[n]instanceof Map?e[n]=H.toJSON(t[n]):e[n]=t[n]}),e}},{key:"fromJSON",value:function(t){var e=this;return this.constructor.keys.forEach(function(n){t.hasOwnProperty(n)&&e.set(n,t[n])}),this}},{key:"clone",value:function(){return this.constructor.create(this.constructor._deepClone(this.toJSON()))}},{key:"_reset",value:function(){this.id=null}},{key:"_throwIsAbstract",value:function(){throw new TypeError(this.constructor.getName()+" is abstract")}}],[{key:"_deepClone",value:function(t){if(null===t||"object"!=("undefined"===typeof t?"undefined":x(t)))return t;if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(this._deepClone(t[n]));return e}for(var r={},i=Object.keys(t),o=0;o<i.length;o++){var a=i[o];r[a]=this._deepClone(t[a])}return r}},{key:"_setPropertyValidator",value:function(t,e){q.get(this.getName()).set(t,e)}},{key:"_isAbstract",value:function(){return!0}},{key:"_buildValidators",value:function(){q.set(this.getName(),new Map),this._setPropertyValidator("id",new D([new I,new N,new B([new j,new $(new U)])]))}},{key:"_validators",get:function(){return q.has(this.getName())||this._buildValidators(),q.get(this.getName())}}]),t}(),Y=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.site=new V("Site",null)}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("site"),t}}]),e}(t)},K=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"string"==typeof e[n]&&e[n].length>0&&e[n].length<=255}}]),e}(R),Z=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.name=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("name",new K)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("name"),t}}]),e}(t)},J=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.metadata=new Map}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("metadata"),t}}]),e}(t)},Q=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.enum=t,n.enumKeys=Object.keys(n.enum),n.enumValues=[],n.enumKeys.forEach(function(t){n.enumValues.push(n.enum[t])}),n}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return this.enumValues.includes(e[n])}}]),e}(R),tt={DEFAULT:"default",TEXTURE:"texture",TEXTURE_MODEL:"texture_model",MEDIA:"media",MEDIA_FILE:"media_file",MEDIA_PREVIEW:"media_preview",MAP:"map",PICTO:"picto",CATEGORY:"category",SITE:"site",POI:"poi",TEXTURE_LOW:"texture_low",TEXTURE_OCCLUSION:"texture_occlusion",TEXTURE_HELPER:"texture_helper"},et=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"fromBlob",value:function(t){throw new Error("File#fromBlob is available in Browser environment")}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.reference=null,this.content_hash=null,this.file_type=null,this.uri=null,this.context=tt.DEFAULT}}],[{key:"getName",value:function(){return"File"}},{key:"_isAbstract",value:function(){return!1}},{key:"fromFileEntity",value:function(t){if(!(t instanceof this))throw new TypeError("Expected an instance of File");var e=new this;return e.name=t.name,e.uri=t.uri,e.file_type=t.file_type,e.content_hash=t.content_hash,e.site=t.site,e}},{key:"fromBlob",value:function(t){var e=new this;return e.fromBlob(t),e}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("uri",new K),this._setPropertyValidator("context",new Q(tt))}},{key:"_getBlobFromUri",value:function(t){throw new Error("File#_getBlobFromUri is available in Browser environment")}},{key:"_addBlobUri",value:function(t,e){throw new Error("File#_addBlobUri is available in Browser environment")}},{key:"_getBufferFromUri",value:function(t){throw new Error("File#_getBufferFromUri is available in Node environment")}},{key:"_addBufferUri",value:function(t,e){throw new Error("File#_addBufferUri is available in Node environment")}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("reference"),t.push("context"),t.push("file_type"),t.push("content_hash"),t.push("uri"),t}}]),e}(Z(Y(J(X)))),nt=new Map,rt=new Map,it=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"fromBlob",value:function(t){if(!(t instanceof Blob))throw new TypeError("Expected an instance of Blob");this.name="blob",this.file_type=t.type,this.uri=nt.has(t)?nt.get(t):URL.createObjectURL(t),rt.set(this.uri,t),nt.set(t,this.uri),t instanceof window.File&&(this.name=t.name)}}],[{key:"_getBlobFromUri",value:function(t){return null===t?null:rt.has(t)?rt.get(t):null}},{key:"_addBlobUri",value:function(t,e){rt.set(t,e)}}]),e}(et),ot=new WeakMap,at=d.a.create({timeout:0,maxContentLength:-1}),st=function(){function t(){o(this,t),this.parameters={},this.headers={},this.method="GET",this.url=null,this.data=null,this.responseType="json"}return E(t,null,[{key:"sendRequest",value:function(t){if(!(t instanceof this))throw new Error("Request instance expected");return at.request({headers:t.headers,method:t.method,url:t.url,params:t.parameters,data:t.data,responseType:t.responseType}).then(function(e){return"document"===t.responseType&&(e.responseXML=e.data),e})}},{key:"getUriContentHash",value:function(t){var e=this;return this._getBufferFromUri(t).then(function(t){return e.getBufferContentHash(t)})}},{key:"getBufferContentHash",value:function(t){throw new Error("This is abstract")}},{key:"_getBufferFromUri",value:function(t){var e=it._getBufferFromUri(t);if(null!==e)return Promise.resolve(e);var n=new this;return n.method="get",n.responseType="arraybuffer",n.url=t,this.sendRequest(n).then(function(n){return e=n.data,it._addBufferUri(t,e),e})}},{key:"formatRequestContext",value:function(t){return{request:{headers:t.headers,method:t.method,url:t.url,params:t.parameters,data:t.data,responseType:t.responseType}}}},{key:"formatApiError",value:function(t,e){var n=this.formatRequestContext(e),r=null,i=null;if(t.response){var o=t.response,a=o.status,s=o.data,u=o.headers;a>=400&&a<500?(r=403===a?"Authentication failed; check your credentials, clock and authorizations":"Request failed due to invalid request",i={response:{data:s,headers:u},request:n}):503===a?(r="Server is busy",i={response:{data:s,headers:u},request:n}):(r="Server error",i={response:{data:s,headers:u},request:n})}else t.request?(r="No response from Server",i={request:n}):(r="No response from Server",i=t);return{message:r,context:i}}}]),E(t,[{key:"addParameter",value:function(t,e){return this.parameters[t]=e,this}},{key:"addParameters",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n];this.addParameter(r,t[r])}return this}},{key:"formattedParameters",value:function(){for(var t=[],e=Object.keys(this.parameters),n=0;n<e.length;n++){var r=e[n],i=this.parameters[r];t.push(r+"="+i)}return t.join("&")}},{key:"addHeader",value:function(t,e){return this.headers[t]=e,this}},{key:"addHeaders",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n];this.addHeader(r,t[r])}return this}},{key:"formattedUrl",value:function(){return this.url+"?"+this.formattedParameters()}},{key:"url",get:function(){return ot.get(this)},set:function(t){var e=t;if(null!==t&&-1!==t.indexOf("?")){var n=t.split("?"),r=n.splice(0,1);e=_(r,1)[0];for(var i=n.join("?").split("&"),o=0;o<i.length;o++){var a=i[o].split("="),s=a.splice(0,1)[0],u=a.join("=");this.addParameter(s,u)}}return ot.set(this,e),this}}]),t}(),ut=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getBufferContentHash",value:function(t){return g()(v.a.create(t,t.length)).toString()}},{key:"formatRequestContext",value:function(t){var n=w(e.__proto__||Object.getPrototypeOf(e),"formatRequestContext",this).call(this,t);if(n.data instanceof FormData){var r={};n.data.entries().forEach(function(t){var e=_(t,2),n=e[0],i=e[1];r[n]=i instanceof Blob?"Blob":i}),n.data=r}return n}}]),e}(st),ct=function(){function t(){o(this,t),this._idToEntityMap=new Map,this._entityList=null}return E(t,[{key:Symbol.iterator,value:function(){return this.getAll()[Symbol.iterator]()}},{key:"store",value:function(t){return this._idToEntityMap.set(t.id,t),this._entityList=null,t}},{key:"remove",value:function(t){this.has(t.id)&&(this._idToEntityMap.delete(t.id),this._entityList=null)}},{key:"getAll",value:function(){var t=this;return null===this._entityList&&(this._entityList=[],this._idToEntityMap.forEach(function(e){t._entityList.push(e)})),this._entityList}},{key:"get",value:function(t){return this.has(t)?this._idToEntityMap.get(t):null}},{key:"has",value:function(t){return this._idToEntityMap.has(t)}},{key:"clone",value:function(){var e=new t;return this.getAll().forEach(function(t){e._idToEntityMap.set(t.id,t.clone())}),e}}]),t}(),lt=function(){function t(e){o(this,t),this._expectedClassOf=this.constructor.getEntityClass().getName(),this._logger=new c.b(e.options.logger,this._expectedClassOf),this._init(e)}return E(t,[{key:"isLoaded",value:function(){return this._status===F.LOADED}},{key:"isLoading",value:function(){return this._status===F.LOADING}},{key:"load",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isLoading()||this.isLoaded())return this.isLoading()?this._task:Promise.resolve();this._logger.info("loading start"),this._status=F.LOADING;var n=this._loadIntoNewStorage(e).then(function(e){t._logger.debug("loading storing data"),t._storage=e,t._status=F.LOADED,t._logger.info("loading success")}).catch(function(e){return t._logger.error("loading fail",{error:e}),t._status=F.ERROR,Promise.reject(e)});return this._task=n,n}},{key:"loadFromCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isLoading()||this.isLoaded())return this.isLoading()?this._task:Promise.resolve();this._logger.info("loading start"),this._status=F.LOADING;var n=this._loadFromCacheIntoNewStorage(e).then(function(e){t._logger.debug("loading storing data"),t._storage=e,t._status=F.LOADED,t._logger.info("loading success")}).catch(function(e){return t._logger.error("loading fail",{error:e}),t._status=F.ERROR,Promise.reject(e)});return this._task=n,n}},{key:"getAll",value:function(){return this._assertIsLoaded(),this._storage.getAll()}},{key:"get",value:function(t){switch(this._assertIsLoaded(),!0){case t instanceof V:if(t.classOf!==this._expectedClassOf)throw new TypeError("Expected a Reference<"+this._expectedClassOf+"> but got Reference<"+t.classOf+">");return this._storage.get(t.value);case"object"==("undefined"===typeof t?"undefined":x(t))&&null!==t:return this._storage.get(t.id);case"string"==typeof t:return this._storage.get(parseInt(t,10));default:return this._storage.get(t)}}},{key:"getList",value:function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.get(t))}),n}},{key:"findBy",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t)))throw new Error("Filters need to be specified");var e=Object.keys(t);return this.getAll().filter(function(n){for(var r=0;r<e.length;r++){var i=e[r],o=t[i],a=!1;switch("undefined"===typeof o?"undefined":x(o)){case"function":a=o(n[i]);break;default:a=n[i]===o}if(!a)return!1}return!0})}},{key:"findOneBy",value:function(t){var e=this.findBy(t);if(e.length>1)throw new Error("Result isn't unique, please use #findBy method instead");return 0===e.length?null:e[0]}},{key:"persist",value:function(t){this._logger.info("persist entity",{entity:t}),this.em._assertIsNotLocked(),this._persist(t)}},{key:"remove",value:function(t){this._logger.info("remove entity",{id:t}),this.em._assertIsNotLocked(),this._remove(t)}},{key:"validate",value:function(t){return this._logger.info("validate entity",{entity:t}),this.constructor._throwExceptionIfNotSupported(t),this._assertIsLoaded(),this._validate(t)}},{key:"validateProperty",value:function(t,e){return this._logger.info("validate entity",{entity:t}),this.constructor._throwExceptionIfNotSupported(t),this._assertIsLoaded(),this._validateProperty(t,e)}},{key:"isValid",value:function(t){return 0===this.validate(t).size}},{key:"_init",value:function(t){this._logger.debug("initialisation"),this.em=t,this._eventDispatcher=k,this._storage=new ct,this._status=F.INITIAL,this._task=null}},{key:"_loadFromCacheIntoNewStorage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.em.options.cacheManager;return null===n?Promise.reject(new Error("AbstractRepository.loadFromCache: no CacheManager")):n.get(this.constructor.getName(),this.em.options,e).then(function(e){return t._putResultIntoNewStorage(e)})}},{key:"_validateProperty",value:function(t,e){var n=t.constructor._validators;if(!n.has(e))return null;var r=n.get(e);return r.isValid(this.em,t,e)?null:r.constructor.message}},{key:"_getLoadRequest",value:function(t){var e=new ut;return e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint,e.parameters.start=t||0,e}},{key:"_getCreateRequest",value:function(t){var e=new ut,n=t.toJSON();return delete n.id,this.constructor._readOnlyKeys.forEach(function(t){delete n[t]}),e.method="POST",e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint,e.data=JSON.stringify(n),e.addHeader("Content-Type","application/json"),e}},{key:"_getUpdateRequest",value:function(t,e){var n=new ut,r=t.toJSON(),i=this.constructor._readOnlyKeys;return Object.keys(r).forEach(function(t){-1!==e.indexOf(t)&&-1===i.indexOf(t)||delete r[t]}),n.method="POST",n.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+t.id,n.data=JSON.stringify(r),n.addHeader("Content-Type","application/json"),n}},{key:"_getRemoveRequest",value:function(t){var e=new ut;e.method="DELETE",e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint;var n=t.map(function(t){return t.id}).join(",");return e.addParameter("id",n),e}},{key:"_assertIsLoaded",value:function(){if(!this.isLoaded())throw this._logger.error("is not loaded"),new Error("The repository "+this.constructor.getName()+" must be loaded but it's in "+this._status+" state for now !")}},{key:"_loadIntoNewStorage",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._logger.verbose("loading first page"),this._loadFromCacheIntoNewStorage(!1).catch(function(){return t._loadFromApiIntoNewStorage()}).catch(function(n){return e?(t._logger.error("loading failed, fallback to outdated cache",{error:n}),t._loadFromCacheIntoNewStorage(!0).catch(function(){return Promise.reject(n)})):Promise.reject(n)})}},{key:"_loadFromApiIntoNewStorage",value:function(){var t=this;return this.em._xhr(this._getLoadRequest(),200).then(function(e){t._logger.verbose("loading first page success");var n=[],r=e.headers["content-range"];if(!r)throw new Error("Content-Range is not present");var i=r.match(/^(-?[0-9]+)-(-?[0-9]+)\/([0-9]+)$/);if(!i)throw new Error("Content-Range invalid");var o=parseInt(i[1],10),a=parseInt(i[2],10),s=parseInt(i[3],10),u=a-o;for(n.push(Promise.resolve(e));a+1<s;)t._logger.verbose("loading next page"),a=(o=a+1)+u,n.push(t.em._xhr(t._getLoadRequest(o),200));return Promise.all(n).then(function(e){t._logger.verbose("loading all pages success");for(var n=[],r=0;r<e.length;r++){var i=e[r].data;if(!Array.isArray(i)){var o="Return format expected to be an array while loading "+t.constructor.getName();throw new Error(o)}n=n.concat(i)}if(n.length!==s)throw new Error('"Expected '+s+" results for but got "+n.length);return n})}).then(function(e){return t._putResultIntoNewStorage(e)})}},{key:"_putResultIntoNewStorage",value:function(t){for(var e=new ct,n=0;n<t.length;n++){var r=this.constructor.fromJSON(t[n]);null!==r&&e.store(r)}return e}},{key:"_replaceStorage",value:function(t){var e,n=this,r=this._storage;this._storage=t;var o=(e={},i(e,O.CREATE,[]),i(e,O.UPDATE,[]),i(e,O.REMOVE,[]),e);return r.getAll().forEach(function(t){null===n.get(t.id)&&o[O.REMOVE].push(t)}),this.getAll().forEach(function(t){if(!r.has(t.id))return void(o[O.CREATE]=t);var e=r.get(t.id),i=n.constructor._compare(e,t);0!==i.length&&(o[O.UPDATE]={current:t,previous:e,changes:i})}),o}},{key:"_persist",value:function(t,e){this._logger.debug("persist",{entity:t,internal:e}),this._assertIsLoaded(),this.constructor._throwExceptionIfNotSupported(t),this._assertIsValid(t),null===t.id?this._create(t,e):this._update(t,e)}},{key:"_remove",value:function(t,e){this._logger.debug("remove",{id:t,internal:e}),this._assertIsLoaded();var n=this.get(t);if(null!==n&&(this._storage.remove(n),this._eventDispatcher.publish(this,O.REMOVE,n),!e)){var r=[this,O.REMOVE,[n.clone()]];this._logger.debug("commit",{commit:r}),this.em._uow.commits.add(r)}}},{key:"_validate",value:function(t){var e=this,n=t.constructor._validators,r=new Map;return n.forEach(function(n){var i=_(n,2),o=i[0],a=i[1];a.isValid(e.em,t,o)||r.set(o,a.constructor.message)}),r}},{key:"_assertIsValid",value:function(t){if(!this.isValid(t)){var e="Given "+t.constructor.getName()+" is not valid";throw this.validate(t).forEach(function(t){var n=_(t,2),r=n[0],i=n[1];e+="\n\t"+r+": "+i}),new TypeError(e)}}},{key:"_create",value:function(t,e){if(null===t.id&&(t.id=Symbol("AdsumClientApi_entity_id")),this._overrideSiteEntity(t),this._storage.store(t),this._logger.debug("create",{entity:t,internal:e}),this._eventDispatcher.publish(this,O.CREATE,t),!e){var n=[this,O.CREATE,t.clone()];this._logger.debug("commit",{commit:n}),this.em._uow.commits.add(n)}}},{key:"_update",value:function(t,e){var n=this.get(t.id);if(null===n)throw new TypeError("Provided entity has id set but is not found, are you sure the entity is not remove ?");if(n.constructor!==t.constructor)return void this._switchType(t,n,e);var r=this.constructor._compare(n,t);if(0!==r.length&&(this._logger.debug("update",{entity:t,previous:n,changes:r,internal:e}),this._storage.store(t),this._eventDispatcher.publish(this,O.UPDATE,{current:t,previous:n,changes:r}),!e)){var i=[this,O.UPDATE,{current:t.clone(),previous:n,changes:r}];this._logger.debug("commit",{commit:i}),this.em._uow.commits.add(i)}}},{key:"_overrideSiteEntity",value:function(t){-1!==t.constructor.keys.indexOf("site")&&(t.site=this.em.options.site)}},{key:"_switchType",value:function(t,e,n){this._logger.debug("switch type",{entity:t,previous:e,internal:n}),t.id=null,this._create(t,n),this._remove(e,n)}}],[{key:"getName",value:function(){return this.getEntityClass().getName()}},{key:"getEntityClass",value:function(){throw new Error("You must implements #getEntityClass")}},{key:"fromJSON",value:function(t){return this.getEntityClass().create(t)}},{key:"_compare",value:function(t,e){var n=this;if(this._throwExceptionIfNotSupported(t),this._throwExceptionIfNotSupported(e),e.constructor!==t.constructor)throw new TypeError("Cannot compare two entity of different classes");var r=t.toJSON(),i=e.toJSON(),o=[];return Object.keys(r).forEach(function(t){var e=r[t],a=i[t];n._areDeepEqual(e,a)||o.push(t)}),o}},{key:"_areDeepEqual",value:function(t,e){if(t===e)return!0;if("object"!=("undefined"===typeof t?"undefined":x(t))||("undefined"===typeof t?"undefined":x(t))!=("undefined"===typeof e?"undefined":x(e)))return!1;if(null===t||null===e)return!1;if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(var n=new Set,r=0;r<t.length;r++){for(var i=t[r],o=!1,a=0;a<e.length;a++)if(!n.has(a)&&this._areDeepEqual(i,e[a])){n.add(a),o=!0;break}if(!o)return!1}return!0}var s=Object.keys(t);if(!this._areDeepEqual(s,Object.keys(e)))return!1;for(var u=0;u<s.length;u++){var c=s[u];if(!this._areDeepEqual(t[c],e[c]))return!1}return!0}},{key:"_throwExceptionIfNotSupported",value:function(t){if(!(t instanceof this.getEntityClass()))throw new TypeError("Unsupported entity")}},{key:"_readOnlyKeys",get:function(){return[]}},{key:"_endpoint",get:function(){return this.getEntityClass().getName().toLowerCase()}}]),t}(),ht=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return this.constructor.isReference(t,e[n])}}],[{key:"isReference",value:function(t,e){if(!(e instanceof V))return!1;var n=t.getRepository(e.classOf);return null!==n&&(e.is(null)||null!==n.get(e))}}]),e}(R),ft=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,n,r){return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isValid",this).call(this,t,n,r)&&!n[r].is(null)}}]),e}(ht),dt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){var r=e[n];return r instanceof P&&Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)}}]),e}(R),pt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isFinite(e[n])}}]),e}(R),gt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"boolean"==typeof e[n]}}]),e}(R),mt={BILLBOARD:"BILLBOARD",STATIC:"STATIC",FLIP:"FLIP"},vt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null,this.place=new V("Place",null),this.poi=new V("Poi",null),this.offset=new P,this.autoscale=!1,this.rotation=0,this.priority=0,this.orientation_mode=mt.BILLBOARD,this.permanent_display=!0}}],[{key:"getName",value:function(){return"CustomObject"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("place",new ft),this._setPropertyValidator("poi",new ht),this._setPropertyValidator("offset",new dt),this._setPropertyValidator("autoscale",new gt),this._setPropertyValidator("rotation",new pt),this._setPropertyValidator("priority",new j),this._setPropertyValidator("orientation_mode",new Q(mt)),this._setPropertyValidator("permanent_display",new gt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("place"),t.push("poi"),t.push("offset"),t.push("autoscale"),t.push("rotation"),t.push("priority"),t.push("orientation_mode"),t.push("permanent_display"),t}}]),e}(Y(J(X))),yt={PICTO:"picto",LABEL:"label"},bt={LEFT:"left",RIGHT:"right",CENTER:"center"},wt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return Number.isFinite(e[n])&&e[n]>0}}]),e}(R),_t=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.constant=t,n}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return e[n]===this.constant}}]),e}(R),xt=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n.regex=t,n}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"string"==typeof e[n]&&null!==e[n].match(this.regex)}}]),e}(R),Et=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=yt.LABEL,this.alignment=bt.CENTER,this.font="Arial",this.font_size=5,this.font_color="#000000",this.background_color=null,this.label=null}}],[{key:"getName",value:function(){return"Label"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(yt.LABEL)),this._setPropertyValidator("font",new D([new I,new K])),this._setPropertyValidator("alignment",new Q(bt)),this._setPropertyValidator("font_size",new B([new j,new wt])),this._setPropertyValidator("background_color",new D([new I,new xt(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])),this._setPropertyValidator("font_color",new xt(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)),this._setPropertyValidator("label",new K)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("font"),t.push("alignment"),t.push("font_size"),t.push("font_color"),t.push("background_color"),t.push("label"),t}}]),e}(vt),At=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.file=new V("File",null)}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("file",new ft)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("file"),t}}]),e}(t)},Ct=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=yt.PICTO,this.width=null,this.height=null,this.original_md5=null}}],[{key:"getName",value:function(){return"Picto"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(yt.PICTO)),this._setPropertyValidator("width",new wt),this._setPropertyValidator("height",new wt),this._setPropertyValidator("original_md5",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("width"),t.push("height"),t.push("original_md5"),t}}]),e}(At(vt)),St=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return vt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"label":return new Et(t);case"picto":return new Ct(t);default:throw new Error("Unable to parse CustomObject "+t.type)}}}]),e}(lt),Mt=function(){function t(){o(this,t)}return E(t,null,[{key:"fromJSON",value:function(t){if(null===t||void 0===t)return null;if(t instanceof Date)return Number.isFinite(t.getTime())?t:null;if("string"!=typeof t&&!Number.isFinite(t))return null;var e=new Date;return e.setTime("string"==typeof t?Date.parse(t):t),Number.isFinite(e.getTime())?e:null}}]),t}(),Tt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return e[n]instanceof Date&&Number.isFinite(e[n].getTime())}}]),e}(R),kt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"set",value:function(t,n){return"validate_at"===t?(this[t]=Mt.fromJSON(n),this):w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n)}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null,this.core_version=null,this.width=null,this.height=null,this.validate_at=null,this.site_calibration=new V("SiteCalibration",null)}}],[{key:"getName",value:function(){return"Device"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("site_calibration",new ht),this._setPropertyValidator("core_version",new D([new I,new K])),this._setPropertyValidator("width",new D([new I,new j])),this._setPropertyValidator("height",new D([new I,new j])),this._setPropertyValidator("validate_at",new D([new I,new Tt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("site_calibration"),t.push("core_version"),t.push("width"),t.push("height"),t.push("validate_at"),t}}]),e}(Z(Y(J(X)))),Ot={KIOSK:"kiosk",MOBILE:"mobile",WEB:"web"},Ft=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Ot.KIOSK,this.position=new P,this.os=null,this.location=null}}],[{key:"getName",value:function(){return"Kiosk"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Ot.KIOSK)),this._setPropertyValidator("position",new dt),this._setPropertyValidator("os",new D([new K,new I])),this._setPropertyValidator("location",new D([new K,new I]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("position"),t.push("os"),t.push("location"),t}}]),e}(kt),Pt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Ot.MOBILE}}],[{key:"getName",value:function(){return"Mobile"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Ot.MOBILE))}}]),e}(kt),Lt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Ot.WEB}}],[{key:"getName",value:function(){return"Web"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Ot.WEB))}}]),e}(kt),Rt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return kt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"kiosk":return new Ft(t);case"mobile":return new Pt(t);case"web":return new Lt(t);default:throw new Error("Unable to parse Device "+t.type)}}}]),e}(lt),Dt=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"set",value:function(t,n){return"created_at"===t||"updated_at"===t?(this[t]=Mt.fromJSON(n),this):w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n)}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.version=null,this.created_at=null,this.updated_at=null}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("version"),t.push("created_at"),t.push("updated_at"),t}}]),e}(t)},Bt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null}}],[{key:"getName",value:function(){return"MapFile"}},{key:"_isAbstract",value:function(){return!0}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t}}]),e}(Z(Dt(Y(At(J(X)))))),It={AO_DAE:"aoDae",CONFIG:"config",DAE:"dae",HELPER:"helper",IVE:"ive",LIGHT:"light",OSG:"osg",PATH:"path"},Nt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.CONFIG}}],[{key:"getName",value:function(){return"MapConfig"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.CONFIG))}}]),e}(Bt),jt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.DAE}}],[{key:"getName",value:function(){return"MapDae"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.DAE))}}]),e}(Bt),Ut=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.AO_DAE}}],[{key:"getName",value:function(){return"MapAoDae"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.AO_DAE))}}]),e}(Bt),$t=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.LIGHT}}],[{key:"getName",value:function(){return"MapLight"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.LIGHT))}}]),e}(Bt),zt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.HELPER}}],[{key:"getName",value:function(){return"MapHelper"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.HELPER))}}]),e}(Bt),Ht=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=It.PATH,this.paths=new Map}}],[{key:"getName",value:function(){return"MapPath"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(It.PATH))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("paths"),t}}]),e}(Bt),Vt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Bt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"config":return new Nt(t);case"dae":return new jt(t);case"aoDae":return new Ut(t);case"light":return new $t(t);case"helper":return new zt(t);case"path":return new Ht(t);case"ive":case"osg":case"model":case"aoOsg":return null;default:throw new Error("Unable to parse MapFile "+t.type)}}},{key:"_endpoint",get:function(){return"map"}}]),e}(lt),Wt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){return"string"==typeof e[n]}}]),e}(R),Gt=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.description=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("description",new D([new I,new Wt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("description"),t}}]),e}(t)},qt=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.signature=null}}],[{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("signature"),t}}]),e}(t)},Xt=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.client_id=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("client_id",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("client_id"),t}}]),e}(t)},Yt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){var r=e[n];if(!(r instanceof W))return!1;var i=!0;return r.forEach(function(e){if(null===e)return void(i=!1);var n=new V(r.classOf,e);ht.isReference(t,n)&&!n.is(null)||(i=!1)}),i}}]),e}(R),Kt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){var r=e[n];if(!(r instanceof G))return!1;var i=!0;return r.forEach(function(e){if(null===e)return void(i=!1);var n=new V(r.classOf,e);ht.isReference(t,n)&&!n.is(null)||(i=!1)}),i}}]),e}(R),Zt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"set",value:function(t,n){return"start_at"!==t&&"end_at"!==t?w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n):(this[t]=Mt.fromJSON(n),this)}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=null,this.start_at=null,this.end_at=null,this.tags=new W("Tag"),this.playlists=new G("Playlist"),this.pois=new W("Poi"),this.preview=new V("File",null)}}],[{key:"getName",value:function(){return"Media"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("tags",new Yt),this._setPropertyValidator("playlists",new Kt),this._setPropertyValidator("pois",new Yt),this._setPropertyValidator("preview",new ht),this._setPropertyValidator("start_at",new D([new I,new Tt])),this._setPropertyValidator("end_at",new D([new I,new Tt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("tags"),t.push("playlists"),t.push("pois"),t.push("preview"),t.push("start_at"),t.push("end_at"),t}}]),e}(Xt(qt(Dt(Gt(Z(Y(J(X)))))))),Jt={IMAGE:"image",PDF:"pdf",TEXT:"text",URL:"url",VIDEO:"video",MOVIE:"movie"},Qt=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.TEXT,this.format=null,this.identifier=null,this.content=null}}],[{key:"getName",value:function(){return"MediaText"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.TEXT)),this._setPropertyValidator("format",new D([new I,new K])),this._setPropertyValidator("identifier",new D([new I,new K])),this._setPropertyValidator("content",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("format"),t.push("identifier"),t.push("content"),t}}]),e}(Zt),te=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.IMAGE}}],[{key:"getName",value:function(){return"MediaImage"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.IMAGE))}}]),e}(At(Zt)),ee=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.PDF}}],[{key:"getName",value:function(){return"MediaPdf"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.PDF))}}]),e}(At(Zt)),ne=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.URL,this.link=null}}],[{key:"getName",value:function(){return"MediaUrl"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.URL)),this._setPropertyValidator("link",new K)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("link"),t}}]),e}(Zt),re=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.VIDEO}}],[{key:"getName",value:function(){return"MediaVideo"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.VIDEO))}}]),e}(At(Zt)),ie=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o(this,e),t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.validator=n,t}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){if(null===this.validator)return!0;if(!(e[n]instanceof Set))return!1;for(var r=Array.from(e[n]),i=0;i<r.length;i++)if(!this.validator.isValid(t,r,i))return!1;return!0}}]),e}(R),oe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"set",value:function(t,n){if("coming_sessions"!==t)return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n);var r=[];return n.forEach(function(t){var e=Mt.fromJSON(t);r.push(e)}),z.set(this.coming_sessions,r),this}},{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=Jt.MOVIE,this.actors=new Set,this.coming_sessions=new Set,this.director=null,this.certification=null,this.duration=null}}],[{key:"getName",value:function(){return"Movie"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(Jt.MOVIE)),this._setPropertyValidator("actors",new ie(new Wt)),this._setPropertyValidator("coming_sessions",new ie(new Tt)),this._setPropertyValidator("director",new D([new I,new K])),this._setPropertyValidator("certification",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("actors"),t.push("coming_sessions"),t.push("director"),t.push("certification"),t.push("duration"),t}}]),e}(At(Zt)),ae=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Zt}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"text":return new Qt(t);case"image":return new te(t);case"pdf":return new ee(t);case"url":return new ne(t);case"video":return new re(t);case"movie":return new oe(t);default:throw new Error("Unable to parse Media "+t.type)}}}]),e}(lt),se=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.categories=new W("Category"),this.children=new G("Poi"),this.custom_objects=new W("CustomObject"),this.logos=new G("File"),this.medias=new G("Media"),this.new=!0,this.parents=new W("Poi"),this.pictures=new G("File"),this.places=new W("Place"),this.tags=new W("Tag"),this.type=null}}],[{key:"getName",value:function(){return"Poi"}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("new",new gt),this._setPropertyValidator("categories",new Yt),this._setPropertyValidator("custom_objects",new Yt),this._setPropertyValidator("places",new Yt),this._setPropertyValidator("tags",new Yt),this._setPropertyValidator("parents",new Yt),this._setPropertyValidator("children",new Kt),this._setPropertyValidator("logos",new Kt),this._setPropertyValidator("pictures",new Kt),this._setPropertyValidator("medias",new Kt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("type"),t.push("new"),t.push("categories"),t.push("custom_objects"),t.push("places"),t.push("tags"),t.push("parents"),t.push("children"),t.push("logos"),t.push("pictures"),t.push("medias"),t}}]),e}(Gt(Z(Dt(J(qt(Xt(Y(X)))))))),ue={EXHIBITOR:"exhibitor",PERSON:"person",PRODUCT:"product",ROOM:"room",SERVICE:"service",STORE:"store"},ce=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ue.EXHIBITOR,this.phone=null,this.url=null}}],[{key:"getName",value:function(){return"Exhibitor"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ue.EXHIBITOR)),this._setPropertyValidator("phone",new D([new I,new K])),this._setPropertyValidator("url",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("phone"),t.push("url"),t}}]),e}(se),le=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ue.PERSON,this.firstname=null,this.lastname=null,this.desk_phone=null,this.mobile_phone=null}}],[{key:"getName",value:function(){return"Person"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ue.PERSON)),this._setPropertyValidator("firstname",new D([new I,new K])),this._setPropertyValidator("lastname",new D([new I,new K])),this._setPropertyValidator("desk_phone",new D([new I,new K])),this._setPropertyValidator("mobile_phone",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("firstname"),t.push("lastname"),t.push("desk_phone"),t.push("mobile_phone"),t}}]),e}(se),he=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ue.PRODUCT,this.brand_name=null,this.currency=null,this.description1=null,this.description2=null,this.discount_value=null,this.ean=null,this.full_description=null,this.full_name=null,this.price=null,this.priority=null,this.rating=null,this.rating_count=null,this.reference=null,this.remaining_quantity=null,this.status=null,this.url=null,this.values=new W("FeatureValue")}}],[{key:"getName",value:function(){return"Product"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ue.PRODUCT)),this._setPropertyValidator("priority",new D([new I,new j])),this._setPropertyValidator("reference",new D([new I,new K])),this._setPropertyValidator("full_name",new D([new I,new K])),this._setPropertyValidator("description1",new D([new I,new Wt])),this._setPropertyValidator("description2",new D([new I,new Wt])),this._setPropertyValidator("full_description",new D([new I,new Wt])),this._setPropertyValidator("brand_name",new D([new I,new K])),this._setPropertyValidator("url",new D([new I,new K])),this._setPropertyValidator("status",new D([new I,new K])),this._setPropertyValidator("price",new D([new I,new pt])),this._setPropertyValidator("currency",new D([new I,new K])),this._setPropertyValidator("rating",new D([new I,new pt])),this._setPropertyValidator("rating_count",new D([new I,new j])),this._setPropertyValidator("remaining_quantity",new D([new I,new j])),this._setPropertyValidator("discount_value",new D([new I,new j])),this._setPropertyValidator("ean",new D([new I,new xt(/^[0-9]{8,13}$/)])),this._setPropertyValidator("values",new Yt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("priority"),t.push("reference"),t.push("full_name"),t.push("description1"),t.push("description2"),t.push("full_description"),t.push("brand_name"),t.push("url"),t.push("status"),t.push("price"),t.push("currency"),t.push("rating"),t.push("rating_count"),t.push("remaining_quantity"),t.push("discount_value"),t.push("ean"),t.push("values"),t}}]),e}(se),fe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ue.ROOM,this.reference=null,this.kind=null,this.capacity=null,this.phone=null}}],[{key:"getName",value:function(){return"Room"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ue.ROOM)),this._setPropertyValidator("reference",new D([new I,new K])),this._setPropertyValidator("kind",new D([new I,new K])),this._setPropertyValidator("capacity",new D([new I,new j])),this._setPropertyValidator("phone",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("reference"),t.push("kind"),t.push("capacity"),t.push("phone"),t}}]),e}(se),de=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ue.SERVICE,this.schedule=new Map}}],[{key:"getName",value:function(){return"Service"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ue.SERVICE))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("schedule"),t}}]),e}(se),pe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.type=ue.STORE,this.priority=0,this.opening_time=null,this.phone=null,this.url=null}}],[{key:"getName",value:function(){return"Store"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _t(ue.STORE)),this._setPropertyValidator("priority",new j),this._setPropertyValidator("opening_time",new D([new I,new Wt])),this._setPropertyValidator("phone",new D([new I,new K])),this._setPropertyValidator("url",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("priority"),t.push("opening_time"),t.push("phone"),t.push("url"),t}}]),e}(se),ge=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_switchType",value:function(t,n,r){if(null!==n.signature){var i=n.clone();i.signature=null,this._persist(i,r)}w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_switchType",this).call(this,t,n,r)}}],[{key:"getEntityClass",value:function(){return se}},{key:"fromJSON",value:function(t){if("object"!=("undefined"===typeof t?"undefined":x(t))||null===t)throw new TypeError("Expected an object");switch(t.type){case"exhibitor":return new ce(t);case"person":return new le(t);case"product":return new he(t);case"room":return new fe(t);case"service":return new de(t);case"store":return new pe(t);default:throw new Error("Unable to parse Poi "+t.type)}}}]),e}(lt),me=function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.logo=new V("File",null)}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("logo",new ht)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("logo"),t}}]),e}(t)},ve=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.color=null,this.rank=0,this.type=null,this.parameters=new Set,this.parents=new W("Category"),this.children=new G("Category"),this.pois=new W("Poi"),this.tags=new W("Tag")}}],[{key:"getName",value:function(){return"Category"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("color",new D([new I,new xt(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])),this._setPropertyValidator("parameters",new ie(new Wt)),this._setPropertyValidator("parents",new Yt),this._setPropertyValidator("children",new Kt),this._setPropertyValidator("pois",new Yt),this._setPropertyValidator("tags",new Yt),this._setPropertyValidator("rank",new j),this._setPropertyValidator("type",new D([new K,new I]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("children"),t.push("color"),t.push("parameters"),t.push("parents"),t.push("pois"),t.push("rank"),t.push("type"),t.push("tags"),t}}]),e}(Y(Dt(J(me(Xt(qt(Z(X)))))))),ye=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return ve}}]),e}(lt),be=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.values=new W("FeatureValue"),this.parents=new W("Feature"),this.children=new G("Feature")}}],[{key:"getName",value:function(){return"Feature"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("values",new Yt),this._setPropertyValidator("parents",new Yt),this._setPropertyValidator("children",new Kt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("values"),t.push("parents"),t.push("children"),t}}]),e}(Y(J(qt(Xt(Z(X)))))),we=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return be}}]),e}(lt),_e=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.rank=0,this.unit=null,this.feature=new V("Feature",null),this.products=new W("Product")}}],[{key:"getName",value:function(){return"FeatureValue"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("feature",new ht),this._setPropertyValidator("products",new Yt),this._setPropertyValidator("rank",new j),this._setPropertyValidator("unit",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("feature"),t.push("products"),t.push("rank"),t.push("unit"),t}}]),e}(qt(Xt(Z(Y(J(X)))))),xe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return _e}},{key:"_endpoint",get:function(){return"feature-value"}}]),e}(lt),Ee=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return it}}]),e}(lt),Ae=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_getCreateRequest",value:function(t){if(null===t.uri.match(/^blob/))return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getCreateRequest",this).call(this,t);var n=new FormData;n.set("name",t.name),n.set("context",t.context);var r=it._getBlobFromUri(t.uri);n.set("file",r,r instanceof File?r.name:"blob"),n.set("site",t.site.value);var i=new ut;return i.method="POST",i.url=this.options.getEndpoint()+"/"+this.constructor._endpoint,i.data=n,i}},{key:"_getUpdateRequest",value:function(t,n){if(-1===n.indexOf("uri")||null===it._getBlobFromUri(t.uri))return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getUpdateRequest",this).call(this,t,n);var r=new FormData;-1!==n.indexOf("name")&&r.set("name",t.name),-1!==n.indexOf("context")&&r.set("context",t.context),r.set("file",it._getBlobFromUri(t.uri)),-1!==n.indexOf("site")&&r.set("site",t.site.value);var i=new ut;return i.method="POST",i.url=this.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+t.id,i.data=r,i}}]),e}(Ee),Ce=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.floor_id=null,this.eye=new P,this.target=new P,this.up=new P,this.zoom_max=null,this.zoom_min=null,this.site_calibration=new V("SiteCalibration",null)}}],[{key:"getName",value:function(){return"FloorCalibration"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("site_calibration",new ft),this._setPropertyValidator("floor_id",new j),this._setPropertyValidator("eye",new dt),this._setPropertyValidator("target",new dt),this._setPropertyValidator("up",new dt),this._setPropertyValidator("zoom_min",new D([new I,new pt])),this._setPropertyValidator("zoom_max",new D([new I,new pt]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("site_calibration"),t.push("floor_id"),t.push("eye"),t.push("target"),t.push("up"),t.push("zoom_min"),t.push("zoom_max"),t}}]),e}(Y(J(X))),Se=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Ce}}]),e}(lt),Me=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.building_id=null,this.floor_id=null,this.shape_id=null,this.position=new P,this.pois=new W("Poi"),this.custom_objects=new W("CustomObject")}}],[{key:"getName",value:function(){return"Place"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("pois",new Yt),this._setPropertyValidator("custom_objects",new Yt),this._setPropertyValidator("building_id",new D([new I,new j])),this._setPropertyValidator("floor_id",new D([new I,new j])),this._setPropertyValidator("shape_id",new D([new I,new j])),this._setPropertyValidator("position",new dt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("pois"),t.push("custom_objects"),t.push("building_id"),t.push("floor_id"),t.push("shape_id"),t.push("position"),t}}]),e}(Dt(qt(Z(Y(J(X)))))),Te=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Me}}]),e}(lt),ke=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.tags=new W("Tag"),this.medias=new G("Media"),this.parameters=new Set}}],[{key:"getName",value:function(){return"Playlist"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("tags",new Yt),this._setPropertyValidator("medias",new Kt),this._setPropertyValidator("parameters",new ie(new Wt))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("tags"),t.push("medias"),t.push("parameters"),t}}]),e}(Y(Dt(qt(Xt(Gt(Z(J(X)))))))),Oe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return ke}}]),e}(lt),Fe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.device=new V("Device",null),this.floor_calibrations=new W("FloorCalibration"),this.start_floor=null,this.start_point_floor=null,this.start_point_position=new P}}],[{key:"getName",value:function(){return"SiteCalibration"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("device",new ft),this._setPropertyValidator("floor_calibrations",new Yt),this._setPropertyValidator("start_floor",new j),this._setPropertyValidator("start_point_floor",new D([new j,new I])),this._setPropertyValidator("start_point_position",new D([new dt,new I]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("device"),t.push("floor_calibrations"),t.push("start_floor"),t.push("start_point_floor"),t.push("start_point_position"),t}}]),e}(Y(J(X))),Pe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Fe}}]),e}(lt),Le=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"isValid",value:function(t,e,n){var r=e[n];return"object"==("undefined"===typeof r?"undefined":x(r))&&null!==r&&Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)&&Number.isFinite(r.latitude)&&Number.isFinite(r.longitude)&&Number.isFinite(r.altitude)}}]),e}(R),Re=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.opening=null,this.direction=null,this.city=null,this.cp=null,this.address=null,this.phone=null,this.locale=null,this.languages=new Set,this.gps_positions=new Set,this.gps_transform=new Set,this.gps_translate=new Set,this.target_platforms=new Set}}],[{key:"getName",value:function(){return"Site"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("opening",new D([new I,new Wt])),this._setPropertyValidator("direction",new D([new I,new Wt])),this._setPropertyValidator("city",new D([new I,new K])),this._setPropertyValidator("cp",new D([new I,new K])),this._setPropertyValidator("address",new D([new I,new K])),this._setPropertyValidator("phone",new D([new I,new K])),this._setPropertyValidator("locale",new D([new I,new K])),this._setPropertyValidator("languages",new ie(new Wt)),this._setPropertyValidator("gps_positions",new ie(new Le)),this._setPropertyValidator("gps_transform",new ie(new pt)),this._setPropertyValidator("gps_translate",new ie(new pt)),this._setPropertyValidator("target_platforms",new ie(new Wt))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("opening"),t.push("direction"),t.push("city"),t.push("cp"),t.push("address"),t.push("phone"),t.push("locale"),t.push("languages"),t.push("gps_positions"),t.push("gps_transform"),t.push("gps_translate"),t.push("target_platforms"),t}}]),e}(J(Dt(me(qt(Xt(function(t){return function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.email=null}}],[{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("email",new D([new I,new K]))}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("email"),t}}]),e}(t)}(Gt(Z(X))))))))),De=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"getCurrent",value:function(){return this.get(this.em.options.site)}},{key:"_getLoadRequest",value:function(){var t=new ut;return t.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+this.em.options.site,t}},{key:"_loadFromApiIntoNewStorage",value:function(){var t=this;return this.em._xhr(this._getLoadRequest(),200).then(function(e){var n=new ct;return n.store(t.constructor.fromJSON(e.data)),n})}}],[{key:"getEntityClass",value:function(){return Re}}]),e}(lt),Be=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_reset",this).call(this),this.categories=new W("Category"),this.medias=new W("Media"),this.pois=new W("Poi"),this.playlists=new W("Playlist")}}],[{key:"getName",value:function(){return"Tag"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(e.__proto__||Object.getPrototypeOf(e),"_buildValidators",this).call(this),this._setPropertyValidator("categories",new Yt),this._setPropertyValidator("medias",new Yt),this._setPropertyValidator("pois",new Yt),this._setPropertyValidator("playlists",new Yt)}},{key:"keys",get:function(){var t=w(e.__proto__||Object.getPrototypeOf(e),"keys",this);return t.push("categories"),t.push("medias"),t.push("pois"),t.push("playlists"),t}}]),e}(Dt(qt(Z(Y(J(X)))))),Ie=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"getEntityClass",value:function(){return Be}}]),e}(lt),Ne=function(){function t(e){o(this,t),this._init(e)}return E(t,[{key:"_init",value:function(e){if(this.em=e,this.eventDispatcher=k,this.constructor===t)throw new TypeError("Cannot construct AbstractListener instances directly");this._subscribe()}},{key:"_subscribe",value:function(){var t=this.constructor.getEntityClass().getName(),e=this.em.getRepository(t);this.eventDispatcher.subscribe(e,O.CREATE,this.onCreate.bind(this)),this.eventDispatcher.subscribe(e,O.UPDATE,this.onUpdate.bind(this)),this.eventDispatcher.subscribe(e,O.REMOVE,this.onRemove.bind(this))}},{key:"onCreate",value:function(t){}},{key:"onUpdate",value:function(t){}},{key:"onRemove",value:function(t){}},{key:"_cascadeRemove",value:function(t,e,n){var r=this,i=this.em.getRepository(t[e].classOf);if(t[e]instanceof V){var o=i.get(t[e]);this.constructor._isAssociatedTo(t,o,n)&&i._remove(o,!0)}t[e]instanceof W&&t[e].forEach(function(e){var o=i.get(e);r.constructor._isAssociatedTo(t,o,n)&&i._remove(o,!0)}),t[e]instanceof G&&t[e].forEach(function(e){var o=e.id,a=i.get(o);r.constructor._isAssociatedTo(t,a,n)&&i._remove(a,!0)})}},{key:"_unsetFromInversed",value:function(t,e,n){var r=this.em.getRepository(t[e].classOf);if(t[e]instanceof V&&null!==t[e].value){var i=r.get(t[e]);if(null!==i){var o=i.clone();o[n]=null,r._persist(o,!0)}}t[e]instanceof W&&t[e].forEach(function(t){var e=r.get(t);if(null!==e){var i=e.clone();i[n]=null,r._persist(i,!0)}})}},{key:"_removeFromInversed",value:function(t,e,n){var r=this.em.getRepository(t[e].classOf);if(t[e]instanceof V&&null!==t[e].value){var i=r.get(t[e]);if(null!==i){var o=i.clone();o[n].remove(t),r._persist(o,!0)}}t[e]instanceof W&&t[e].forEach(function(e){var i=r.get(e);if(null!==i){var o=i.clone();o[n].remove(t),r._persist(o,!0)}}),t[e]instanceof G&&t[e].forEach(function(e){var i=e.id,o=r.get(i);if(null!==o){var a=o.clone();a[n].remove(t),r._persist(a,!0)}})}},{key:"_onManyToManyOrToLinkPropertyChange",value:function(t,e,n,r,i,o){var a=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=this.em.getRepository(t[n].classOf);t[n].forEach(function(i){null!==e&&e[n].has(i)||a.constructor._addToNewlyInversed(t,null,u,i,r,o)}),null!==e&&e[n].forEach(function(e){t[n].has(e)||(null!==s&&s(u.get(e),t),a.constructor._removeFromFormerInversed(t,u,e,r,i))})}},{key:"_onLinkToManyOrToLinkPropertyChange",value:function(t,e,n,r,i,o){var a=this,s=this.em.getRepository(t[n].classOf);t[n].forEach(function(i){var u=i.id,c=i.position;null!==e&&e[n].has(u)&&e[n].getPositionOf(u)===c||a.constructor._addToNewlyInversed(t,c,s,u,r,o)}),null!==e&&e[n].forEach(function(e){var o=e.id;t[n].has(o)||a.constructor._removeFromFormerInversed(t,s,o,r,i)})}},{key:"_onOneToManyPropertyChange",value:function(t,e,n,r,i,o){var a=this,s=this.em.getRepository(t[n].classOf);t[n].forEach(function(i){null!==e&&e[n].has(i)||a.constructor._setToNewlyInversed(t,s,i,r,o)}),null!==e&&e[n].forEach(function(e){!t[n].has(e)&&a.constructor._isAssociatedTo(t,s.get(e),r)&&a.constructor._unsetFromFormerInversed(t,s,e,r,i)})}},{key:"_onManyToOnePropertyChange",value:function(t,e,n,r,i,o){var a=this.em.getRepository(t[n].classOf);this.constructor._addToNewlyInversed(t,null,a,t[n],r,o),null!==e&&this.constructor._removeFromFormerInversed(t,a,e[n],r,i)}},{key:"_onOneToOnePropertyChange",value:function(t,e,n,r,i,o){var a=this.em.getRepository(t[n].classOf);r&&this.constructor._setToNewlyInversed(t,a,t[n],r,o),null!==e&&this.constructor._unsetFromFormerInversed(t,a,e[n],r,i)}}],[{key:"getEntityClass",value:function(){throw new TypeError("You need to implement static getEntityClass in AbstractListener inheritance")}},{key:"_isAssociatedTo",value:function(t,e,n){return null===n||null===e?Boolean(e):e[n]instanceof V&&e[n].is(t)?e[n].is(t):(e[n]instanceof W||e[n]instanceof G)&&e[n].has(t)}},{key:"_isPropertyChanged",value:function(t,e,n,r){return!!e.constructor.keys.includes(t)&&(null===n||-1!==r.indexOf(t))}},{key:"_addToNewlyInversed",value:function(t,e,n,r,i,o){if(i||o){var a=n.get(r);if(null!==a){var s=a.clone();i&&s[i].add(t,e),o&&o(s),n._persist(s,!0)}}}},{key:"_removeFromFormerInversed",value:function(t,e,n,r,i){if(r){var o=e.get(n);if(null!==o&&this._isAssociatedTo(t,o,r)){var a=o.clone();a[r].remove(t),i&&0===a[r].size?e._remove(a,!0):e._persist(a,!0)}}}},{key:"_setToNewlyInversed",value:function(t,e,n,r,i){if(r||i){var o=e.get(n);if(null!==o){var a=o.clone();r&&(a[r]=t),i&&i(a),e._persist(a,!0)}}}},{key:"_unsetFromFormerInversed",value:function(t,e,n,r,i){if(r||i){var o=e.get(n);if(null!==o&&this._isAssociatedTo(t,o,r)){var a=o.clone();i?e._remove(a,!0):(a[r]=null,e._persist(a,!0))}}}}]),t}(),je=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"place","custom_objects"),this._removeFromInversed(t,"poi","custom_objects"),t instanceof Ct&&this._cascadeRemove(t,"file",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("place",t,e,n)&&this._onManyToOnePropertyChange(t,e,"place","custom_objects"),this.constructor._isPropertyChanged("poi",t,e,n)&&this._onManyToOnePropertyChange(t,e,"poi","custom_objects"),this.constructor._isPropertyChanged("file",t,e,n)&&this._onManyToOnePropertyChange(t,e,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return vt}},{key:"_onNewFile",value:function(t){t.context=tt.PICTO}}]),e}(Ne),Ue=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._cascadeRemove(t,"site_calibration","device")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("site_calibration",t,e,n)&&this._onOneToOnePropertyChange(t,e,"site_calibration","device",!0)}}],[{key:"getEntityClass",value:function(){return kt}}]),e}(Ne),$e=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._cascadeRemove(t,"file",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("file",t,e,n)&&this._onManyToOnePropertyChange(t,e,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return Bt}},{key:"_onNewFile",value:function(t){null!==t&&(t.context="map")}}]),e}(Ne),ze=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"tags","medias"),this._removeFromInversed(t,"playlists","medias"),this._removeFromInversed(t,"pois","medias"),(t instanceof te||t instanceof re||t instanceof ee||t instanceof oe)&&this._cascadeRemove(t,"file",null),this._cascadeRemove(t,"preview",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","medias"),this.constructor._isPropertyChanged("playlists",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"playlists","medias"),this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","medias"),this.constructor._isPropertyChanged("preview",t,e,n)&&this._onManyToOnePropertyChange(t,e,"preview",null,!0,this.constructor._onNewPreview),this.constructor._isPropertyChanged("file",t,e,n)&&this._onManyToOnePropertyChange(t,e,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return Zt}},{key:"_onNewPreview",value:function(t){t.context="media_preview"}},{key:"_onNewFile",value:function(t){t.context="media_file"}}]),e}(Ne),He=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"parents","children"),this._removeFromInversed(t,"children","parents"),this._removeFromInversed(t,"categories","pois"),this._removeFromInversed(t,"tags","pois"),this._removeFromInversed(t,"medias","pois"),this._removeFromInversed(t,"places","pois"),this._cascadeRemove(t,"custom_objects","poi"),t instanceof he&&this._removeFromInversed(t,"values","products")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("name",t,e,n)&&this._onNameUpdated(t),this.constructor._isPropertyChanged("parents",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"parents","children"),this.constructor._isPropertyChanged("children",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"children","parents"),this.constructor._isPropertyChanged("categories",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"categories","pois"),this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","pois"),this.constructor._isPropertyChanged("medias",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"medias","pois"),this.constructor._isPropertyChanged("places",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"places","pois",!1,null,this._onPlaceRemoved.bind(this)),this.constructor._isPropertyChanged("custom_objects",t,e,n)&&this._onOneToManyPropertyChange(t,e,"custom_objects","poi",!1,this._onNewCustomObject.bind(this)),this.constructor._isPropertyChanged("logos",t,e,n)&&(this._onLinkToManyOrToLinkPropertyChange(t,e,"logos",null,!0,this.constructor._onNewLogo),this.constructor._onLogoUpdated(t,this.em)),this.constructor._isPropertyChanged("pictures",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"pictures",null,!0,this.constructor._onNewPicture),this.constructor._isPropertyChanged("values",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"values","products")}},{key:"_onNameUpdated",value:function(t){var e=this;this.em.getRepository(t.custom_objects.classOf).getList(t.custom_objects).forEach(function(n){n instanceof Et&&e._updateLabelNameFromPoi(n,t)})}},{key:"_onPlaceRemoved",value:function(t,e){var n=this.em.getRepository(e.custom_objects.classOf);n.getList(e.custom_objects).forEach(function(e){null!==e&&e.place.is(t)&&n._remove(e,!0)})}},{key:"_onNewCustomObject",value:function(t){var e=this.em.getRepository("Poi").get(t.poi);if(t instanceof Et&&this._updateLabelNameFromPoi(t,e),t instanceof Ct){var n=this.constructor._getFirstPoiLogo(e,this.em);this.constructor._updatePictoFileFromPoiLogo(t,n,this.em)}}},{key:"_updateLabelNameFromPoi",value:function(t,e){if(t.label!==e.name){var n=t.clone();n.label=e.name,this.em.getRepository("CustomObject")._persist(n,!0)}}}],[{key:"getEntityClass",value:function(){return se}},{key:"_onNewLogo",value:function(t){t.context="poi"}},{key:"_onNewPicture",value:function(t){t.context="poi"}},{key:"_onLogoUpdated",value:function(t,e){var n=this,r=e.getRepository(t.custom_objects.classOf).getList(t.custom_objects),i=this._getFirstPoiLogo(t,e);r.forEach(function(t){t instanceof Ct&&n._updatePictoFileFromPoiLogo(t,i,e)})}},{key:"_isFirstLogo",value:function(t,e){return t.logos.size>0&&t.logos.values[0].id===e.id}},{key:"_getFirstPoiLogo",value:function(t,e){var n=e.getRepository(t.logos.classOf).getList(t.logos);return 0===n.length?null:n[0]}},{key:"_updatePictoFileFromPoiLogo",value:function(t,e,n){return null===e?(n.getRepository("CustomObject")._remove(t,!0),!1):null===e.content_hash?(n.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: logo content hash is not computed, skipping"),!1):t.original_md5!==e.content_hash}}]),e}(Ne),Ve=function(){function t(e){o(this,t),this.src={uri:e,image:null,width:null,height:null},this.target={uri:null,image:null,width:null,height:null,offset:{x:0,y:0}}}return E(t,[{key:"init",value:function(){return Promise.reject(new Error("ImageResizer is not available on NodeJS"))}},{key:"isSrcPowerOfTwo",value:function(){return this.isPowerOfTwoNumber(this.src.width)&&this.isPowerOfTwoNumber(this.src.height)}},{key:"isTargetPowerOfTwo",value:function(){return this.isPowerOfTwoNumber(this.target.width)&&this.isPowerOfTwoNumber(this.target.height)}},{key:"isPowerOfTwoNumber",value:function(t){return t>1&&0==(t&t-1)}},{key:"getNextPowerOfTwoNumber",value:function(t){for(var e=2;e<t;)e*=2;return e}},{key:"getWidthStretching",value:function(){return this.target.width/(this.target.width-2*this.target.offset.x)}},{key:"getHeightStretching",value:function(){return this.target.height/(this.target.height-2*this.target.offset.y)}},{key:"makePowerOfTwo",value:function(){if(!this.isTargetPowerOfTwo()){var t=this.isPowerOfTwoNumber(this.target.width),e=this.isPowerOfTwoNumber(this.target.height),n=this.getNextPowerOfTwoNumber(this.target.width),r=this.getNextPowerOfTwoNumber(this.target.height);if(!e&&!t)return this.resize(Math.max(n,r),!0),void this.makePowerOfTwo();e?(this.target.offset.x=Math.round((n-this.target.width)/2),this.target.width=n):(this.target.offset.y=Math.round((r-this.target.height)/2),this.target.height=r),this.resize()}}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512;if(!(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.target.width<t&&this.target.height<t)){var e=void 0;e=this.target.height>this.target.width?t/this.target.height:t/this.target.width,this.target.width=Math.round(this.target.width*e),this.target.height=Math.round(this.target.height*e),this.target.offset.x=Math.round(this.target.offset.x*e),this.target.offset.y=Math.round(this.target.offset.y*e)}}},{key:"save",value:function(){return Promise.reject(new Error("ImageResizer is not available on NodeJS"))}}]),t}(),We=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"init",value:function(){var t=this;return new Promise(function(e,n){try{var r=new Image;r.onload=function(){t.src.image=r,t.src.width=r.width,t.src.height=r.height,t.target.width=r.width,t.target.height=r.height,e()},r.onerror=function(t){n(t)},r.src=t.src.uri}catch(e){n(e)}})}},{key:"save",value:function(){var t=this;return new Promise(function(e,n){try{var r=document.createElement("canvas");r.width=t.target.width,r.height=t.target.height,r.getContext("2d").drawImage(t.src.image,t.target.offset.x,t.target.offset.y,t.target.width/t.getWidthStretching(),t.target.height/t.getHeightStretching()),r.toBlob(function(n){var r=URL.createObjectURL(n);it._addBlobUri(r,n),t.target.uri=r,e(r)})}catch(e){n(e)}})}}]),e}(Ve),Ge=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,null,[{key:"_updatePictoFileFromPoiLogo",value:function(t,n,r){var i=this;if(!w(e.__proto__||Object.getPrototypeOf(e),"_updatePictoFileFromPoiLogo",this).call(this,t,n,r)){var o=r.getRepository("Poi"),a=r.getRepository("CustomObject"),s=r.getRepository("File"),u=s.get(n);if(null!==u){var c=new We(u.uri),l=c.init().then(function(){return c.makePowerOfTwo(),c.save()}).then(function(e){var l=a.get(t),h=o.get(l.poi);u=s.get(u);var f=s.get(l.file);if(null!==l&&null!==h&&null!==u&&i._isFirstLogo(h,u)){var d=l.clone();c.target.height/c.getHeightStretching()>c.target.width/c.getWidthStretching()?(d.height=Math.round(l.height*c.getHeightStretching()),d.width=Math.round(l.height*c.target.width/c.target.height)):(d.width=Math.round(l.width*c.getWidthStretching()),d.height=Math.round(l.width*c.target.height/c.target.width));var p=f.clone();p.uri=e,p.file_type=u.file_type,p.site=u.site;var g={resizer:{src:{width:c.src.width,height:c.src.height},target:{width:c.target.width,height:c.target.height}},picto:{src:{width:t.width,height:t.height},target:{width:d.width,height:d.height}}};r.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: updating picto file",g),r.getRepository("File")._persist(p,!0),d.file=p,d.original_md5=n.content_hash,r.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: updating picto",g),r.getRepository("CustomObject")._persist(d,!0)}}).catch(function(t){throw r.logger.warn("PoiListener#_updatePictoFileFromPoiLogo: Failed",{error:t}),t});r._waitFor(l)}}}}]),e}(He),qe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"parents","children"),this._removeFromInversed(t,"children","parents"),this._removeFromInversed(t,"pois","categories"),this._removeFromInversed(t,"tags","categories"),this._cascadeRemove(t,"logo",null)}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("parents",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"parents","children"),this.constructor._isPropertyChanged("children",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"children","parents"),this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","categories"),this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","categories"),this.constructor._isPropertyChanged("logo",t,e,n)&&this._onManyToOnePropertyChange(t,e,"logo",null,!0,this.constructor._onNewLogo)}}],[{key:"getEntityClass",value:function(){return ve}},{key:"_onNewLogo",value:function(t){null!==t&&(t.context=tt.CATEGORY)}}]),e}(Ne),Xe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"parents","children"),this._removeFromInversed(t,"children","parents"),this._cascadeRemove(t,"values","feature")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("parents",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"parents","children"),this.constructor._isPropertyChanged("children",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"children","parents"),this.constructor._isPropertyChanged("values",t,e,n)&&this._onManyToOnePropertyChange(t,e,"values","feature",!0)}}],[{key:"getEntityClass",value:function(){return be}}]),e}(Ne),Ye=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"products","values"),this._removeFromInversed(t,"feature","values")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("feature",t,e,n)&&this._onManyToOnePropertyChange(t,e,"feature","values"),this.constructor._isPropertyChanged("products",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"products","values")}}],[{key:"getEntityClass",value:function(){return _e}}]),e}(Ne),Ke=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("uri",t,e,n)&&this._onUriUpdated(t),this.constructor._isPropertyChanged("context",t,e,n)&&this._onContextUpdated(t),this.constructor._isPropertyChanged("content_hash",t,e,n)&&this._onContentHashUpdated(t)}},{key:"_onUriUpdated",value:function(t){t.context===tt.PICTO&&(this.em.logger.debug("FileListener#_onUriUpdated: make picto file pow2"),this._makePictoFilePow2(t)),this.em.logger.debug("FileListener#_onUriUpdated: force update content hash"),this._updateContentHash(t,!0)}},{key:"_onContentHashUpdated",value:function(t){if(t.context===tt.POI){var e=this.constructor._getPoiFromFile(t,this.em);null!==e&&Ge._getFirstPoiLogo(e,this.em)===t&&(this.em.logger.debug("FileListener#_onContentHashUpdated: update associated picto"),Ge._onLogoUpdated(e,this.em))}}},{key:"_onContextUpdated",value:function(t){t.context===tt.PICTO&&(this.em.logger.debug("FileListener#_onContextUpdated: make picto pow2"),this._makePictoFilePow2(t))}},{key:"_updateContentHash",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===t.content_hash||n){var r=ut.getUriContentHash(t.uri).then(function(n){var r=e.em.getRepository("File"),i=r.get(t);if(null===i||i.uri!==t.uri)return void e.em.logger.debug("FileListener#_updateContentHash: File has been removed or binary has been updated while computing ==> Skip");var o=i.clone();o.content_hash=n,r._persist(o,!0)}).catch(function(t){throw t});this.em._waitFor(r)}}},{key:"_makePictoFilePow2",value:function(t){return this.em.logger.warn("Cannot make an image Pow2 yet"),Promise.resolve(!1)}}],[{key:"getEntityClass",value:function(){return it}},{key:"_getPictoFromFile",value:function(t,e){var n=e.getRepository("CustomObject").findBy({type:yt.PICTO,file:function(e){return e.is(t)}});return 0===n.length?null:n[0]}},{key:"_getPoiFromFile",value:function(t,e){var n=e.getRepository("Poi").findBy({logos:function(e){return e.has(t)}});return 0===n.length?null:n[0]}}]),e}(Ne),Ze=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"_makePictoFilePow2",value:function(t){var e=this,n=new We(t.uri),r=n.init().then(function(){return n.isSrcPowerOfTwo()?Promise.resolve(!0):(n.makePowerOfTwo(),n.save().then(function(r){var i=e.em.getRepository("File"),o=i.get(t);if(null!==o&&o.uri===t.uri&&o.context===tt.PICTO){var a=o.clone(),s=e.constructor._getPictoFromFile(o,e.em);if(null!==s){a.uri=r,a.content_hash=null;var u=s.clone();u.width=Math.round(s.width*n.getWidthStretching()),u.height=Math.round(s.height*n.getHeightStretching()),e.em.logger.debug("FileListener#_makePictoFilePow2: updating picto to fit new image",{src_picto:{width:s.width,height:s.height},target_picto:{width:u.width,height:u.height},src_file:{width:n.src.width,height:n.src.height},target_file:{width:n.target.width,height:n.target.height}}),e.em.getRepository("CustomObject")._persist(u,!0)}else a.context=tt.DEFAULT;e.em.logger.debug("FileListener#_makePictoFilePow2: updating picto file",{src_file:{width:n.src.width,height:n.src.height},target_file:{width:n.target.width,height:n.target.height}}),i._persist(a,!0)}}))}).catch(function(t){throw e.em.logger.warn("FileListener#_makePictoFilePow2: Failed",{error:t}),t});return this.em._waitFor(r),r}}],[{key:"_getPictoFromFile",value:function(t,e){var n=e.getRepository("CustomObject").findBy({type:yt.PICTO,file:function(e){return e.is(t)}});return 0===n.length?null:n[0]}},{key:"_getPoiFromFile",value:function(t,e){var n=e.getRepository("Poi").findBy({logos:function(e){return e.has(t)}});return 0===n.length?null:n[0]}}]),e}(Ke),Je=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"site_calibration","floor_calibrations")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("site_calibration",t,e,n)&&this._onManyToOnePropertyChange(t,e,"site_calibration","floor_calibrations")}}],[{key:"getEntityClass",value:function(){return Ce}}]),e}(Ne),Qe=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"pois","places"),this._cascadeRemove(t,"custom_objects","place")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","places"),this.constructor._isPropertyChanged("custom_objects",t,e,n)&&this._onOneToManyPropertyChange(t,e,"custom_objects","place",!0)}}],[{key:"getEntityClass",value:function(){return Me}}]),e}(Ne),tn=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"medias","playlists"),this._removeFromInversed(t,"tags","playlists")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("medias",t,e,n)&&this._onLinkToManyOrToLinkPropertyChange(t,e,"medias","playlists"),this.constructor._isPropertyChanged("tags",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"tags","playlists")}}],[{key:"getEntityClass",value:function(){return ke}}]),e}(Ne),en=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._unsetFromInversed(t,"device","site_calibration"),this._cascadeRemove(t,"floor_calibrations","site_calibration")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("floor_calibrations",t,e,n)&&this._onOneToManyPropertyChange(t,e,"floor_calibrations","site_calibration",!0),this.constructor._isPropertyChanged("device",t,e,n)&&this._onOneToOnePropertyChange(t,e,"device","site_calibration")}}],[{key:"getEntityClass",value:function(){return Fe}}]),e}(Ne),nn=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){throw new TypeError("You cannot remove the Site !")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("logo",t,e,n)&&this._onManyToOnePropertyChange(t,e,"logo",null,!0,this.constructor._onNewLogo)}}],[{key:"getEntityClass",value:function(){return Re}},{key:"_onNewLogo",value:function(t){null!==t&&(t.context="site")}}]),e}(Ne),rn=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"onCreate",value:function(t){this._onChange(t,null)}},{key:"onUpdate",value:function(t){this._onChange(t.current,t.previous,t.changes)}},{key:"onRemove",value:function(t){this._removeFromInversed(t,"categories","tags"),this._removeFromInversed(t,"pois","tags"),this._removeFromInversed(t,"playlists","tags"),this._removeFromInversed(t,"medias","tags")}},{key:"_onChange",value:function(t,e,n){this.constructor._isPropertyChanged("pois",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"pois","tags"),this.constructor._isPropertyChanged("categories",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"categories","tags"),this.constructor._isPropertyChanged("medias",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"medias","tags"),this.constructor._isPropertyChanged("playlists",t,e,n)&&this._onManyToManyOrToLinkPropertyChange(t,e,"playlists","tags")}}],[{key:"getEntityClass",value:function(){return Be}}]),e}(Ne),on=function(){function t(e){o(this,t),this.em=e,this.em.logger.debug("UnitOfWork: instantiate"),this._reset()}return E(t,[{key:"flush",value:function(){var t=this;this.em.logger.debug("UnitOfWork: flush start"),this._prepare();var e=new Set(this.commits)[Symbol.iterator]();return this._flushCommits(e).then(function(){return t._finish()})}},{key:"_reset",value:function(){this.em.logger.debug("UnitOfWork: reset"),this.commits=new Set,this._symbolToId=new Map,this._symbolToRepository=new Map}},{key:"_prepare",value:function(){this.em.logger.debug("UnitOfWork: prepare"),this._mergeConsecutiveCommits()}},{key:"_mergeConsecutiveCommits",value:function(){var t=this;this.em.logger.debug("UnitOfWork: merge commits");var e=new Set,n=null;this.commits.forEach(function(r){var i,o,a=t.constructor._mergeTwoConsecutiveCommits(n,r);switch(t.em.logger.debug("UnitOfWork: merge two consecutive commits",{previous:n,commit:r,merged:a}),a.length){case 0:n=null;break;case 1:var s=_(a,1);n=s[0];break;case 2:e.add(a[0]),i=a,o=_(i,2),n=o[1];break;default:throw new Error("Unexpected")}}),null!==n&&e.add(n),this.commits=e}},{key:"_finish",value:function(){var t=this;this.em.logger.debug("UnitOfWork: finish");var e=new Set;return this._symbolToId.entries().forEach(function(n){var r=_(n,2),i=r[0],o=r[1],a=t._symbolToRepository.get(i);e.add({id:o,symbol:i,repository:a})}),this._reset(),e}},{key:"_replaceFileReferenceSymbolToId",value:function(t){"symbol"==x(t.value)&&(t.value=this._symbolToId.get(t.value))}},{key:"_replaceFileCollectionSymbolToId",value:function(t){var e=this;t.forEach(function(n){"symbol"==("undefined"===typeof n?"undefined":x(n))&&(t.add(e._symbolToId.get(n)),t.remove(n))})}},{key:"_replaceFileOrderedCollectionSymbolToId",value:function(t){var e=this;t.forEach(function(n){var r=_(n,2),i=r[0],o=r[1];"symbol"==("undefined"===typeof i?"undefined":x(i))&&(t.add(e._symbolToId.get(i),o),t.remove(i))})}},{key:"_flushCommits",value:function(t){var e=this,n=t.next(),r=n.value;return n.done?Promise.resolve():(this.em.logger.info("UnitOfWork: "+this.commits.size+" request to send"),this.em.logger.debug("UnitOfWork: flush commits start",{commit:r}),this._flushCommit(r).then(function(){return e.em.logger.debug("UnitOfWork: flush commits next",{commit:r}),e.commits.delete(r),e._flushCommits(t)}))}},{key:"_flushCommit",value:function(t){var e=_(t,3),n=e[0],r=e[1],i=e[2];switch(r){case O.CREATE:return this._flushCreateCommit(n,i);case O.UPDATE:return this._flushUpdateCommit(n,i.current,i.changes);case O.REMOVE:return this._flushRemoveCommit(n,i);default:return Promise.reject(new Error("UOW: Unhandled event "+r))}}},{key:"_flushCreateCommit",value:function(t,e){var n=this;this._replaceAssociatedSymbolToId(e);var r=t._getCreateRequest(e);return this.em._xhr(r,200).then(function(r){var i=r.data;return n._symbolToId.set(e.id,i.id),n._symbolToRepository.set(e.id,t),n.em.logger.debug("UnitOfWork: retrieved identifier",{symbol:e.id,id:i.id}),i.id})}},{key:"_flushUpdateCommit",value:function(t,e,n){this._replaceAssociatedSymbolToId(e);var r=t._getUpdateRequest(e,n);return this.em._xhr(r,204)}},{key:"_flushRemoveCommit",value:function(t,e){var n=this;e.forEach(function(t){n._replaceAssociatedSymbolToId(t)});for(var r=[],i=0;i<e.length;i+=50)!function(i){var o=e.slice(i,i+50),a=t._getRemoveRequest(o);r.push(n.em._xhr(a,204).catch(function(e){if(e instanceof Error)return Promise.reject(e);var r=e.data;if(!r.hasOwnProperty("errors"))return Promise.reject(new Error("Server error"));var i=r.errors;if(e.status>=500)return Promise.reject(i);n.em.logger.warn("UnitOfWork: flush remove commit invalid data supplied",{json:r});var a=Object.keys(i);if(1!==a.length||!a.includes("id"))return Promise.reject(i);for(var s=Object.keys(i.id).map(function(t){return parseInt(t.replace("#",""),10)}),u=[],c=0;c<o.length;c++)s.includes(c)||u.push(o[c]);return 0===u.length?Promise.resolve():n._flushRemoveCommit(t,u)}))}(i);return Promise.all(r)}},{key:"_replaceAssociatedSymbolToId",value:function(t){var e=this;this.em.logger.debug("UnitOfWork: replace associated symbol to id",{entity:t}),"symbol"==x(t.id)&&this._symbolToId.has(t.id)&&(t.id=this._symbolToId.get(t.id),this.em.logger.debug("UnitOfWork: replace associated symbol to id (own id replaced)",{entity:t})),t.constructor.keys.forEach(function(n){t[n]instanceof V&&e._replaceReferenceAssociatedSymbol(n,t),t[n]instanceof W&&e._replaceCollectionAssociatedSymbol(n,t),t[n]instanceof G&&e._replaceOrderedCollectionAssociatedSymbol(n,t)})}},{key:"_replaceReferenceAssociatedSymbol",value:function(t,e){var n=e[t].value;if("symbol"==("undefined"===typeof n?"undefined":x(n))){if(!this._symbolToId.has(n))throw this.em.logger.error("UnitOfWork: replace associated symbol to id (reference id not found)",{key:t}),new Error("Unable to find Symbol <--\x3e Id matching");this.em.logger.debug("UnitOfWork: replace associated symbol to id (reference id replaced)",{key:t}),e[t]=this._symbolToId.get(n)}}},{key:"_replaceCollectionAssociatedSymbol",value:function(t,e){var n=this,r=[];e[t].forEach(function(e){if("symbol"!=("undefined"===typeof e?"undefined":x(e)))r.push(e);else{if(!n._symbolToId.has(e))throw n.em.logger.error("UnitOfWork: replace associated symbol to id (collection item id not found)",{key:t}),new Error("Unable to find Symbol <--\x3e Id matching");n.em.logger.debug("UnitOfWork: replace associated symbol to id (collection item id replaced)",{key:t}),r.push(n._symbolToId.get(e))}}),e[t]=r}},{key:"_replaceOrderedCollectionAssociatedSymbol",value:function(t,e){var n=this,r=[];e[t].forEach(function(e){var i=e.id,o=e.position;if("symbol"!=("undefined"===typeof i?"undefined":x(i)))r.push({id:i,position:o});else{if(!n._symbolToId.has(i))throw n.em.logger.error("UnitOfWork: replace associated symbol to id (ordered collection item id not found)",{key:t}),new Error("Unable to find Symbol <--\x3e Id matching");n.em.logger.debug("UnitOfWork: replace associated symbol to id (ordered collection item id replaced)",{key:t}),r.push({id:n._symbolToId.get(i),position:o})}}),e[t]=r}},{key:"_hasPendingChanges",get:function(){return this._mergeConsecutiveCommits(),0!==this.commits.size}}],[{key:"_mergeTwoConsecutiveCommits",value:function(t,e){if(null===t)return[e];var n=_(t,3),i=n[0],o=n[1],a=n[2],s=_(e,3),u=s[0],c=s[1],l=s[2];if(i!==u)return[t,e];switch(o){case O.UPDATE:if(c===O.UPDATE&&a.current===l.previous){var h=a.previous,f=l.current,d=i.constructor._compare(h,f);return 0===d.length?[]:[[i,O.UPDATE,{current:f,previous:h,changes:d}]]}break;case O.CREATE:if(c===O.REMOVE&&l.includes(a))return[];if(c===O.UPDATE&&a===l.previous)return[[i,O.CREATE,l.current]];break;case O.REMOVE:if(c===O.REMOVE&&i===u)return[[i,O.REMOVE,[].concat(r(a),r(l))]];break;default:throw new Error("Unexpected")}return[t,e]}}]),t}(),an=[De,Vt,Ae,ye,ge,we,xe,Te,St,Oe,ae,Rt,Pe,Se,Ie],sn=[nn,$e,Ze,qe,Ge,Xe,Ye,Qe,je,tn,ze,Ue,en,Je,rn],un=function(){function t(e){o(this,t),this.options=null,this.logger=null,this._repositories=new Map,this._listeners=new Map,this.locale=null,this._uow=null,this.locked=!1,this._waiting=new Set,this._init(new C(e))}return E(t,null,[{key:"generateNonce",value:function(){var t=Date.now()*Math.random();return g()(t.toString(),1)}},{key:"now",value:function(){return Math.round(Date.now()/1e3).toString()}}]),E(t,[{key:"_init",value:function(t){t.validate(),this.options=t,this.logger=this.options.logger,this.logger.info("EntityManager: instantiate",{options:t}),this._uow=new on(this);for(var e=0;e<an.length;e++)this._repositories.set(an[e].getName(),new an[e](this));for(var n=0;n<sn.length;n++)this._listeners.set(sn[n].getEntityClass().getName(),new sn[n](this));this.locale=this.options.locale}},{key:"_lock",value:function(){this.logger.info("EntityManager: locked"),this.locked=!0}},{key:"_unlock",value:function(){this.logger.info("EntityManager: unlocked"),this.locked=!1}},{key:"hasPendingChanges",value:function(){return this._uow._hasPendingChanges}},{key:"isFullyLoaded",value:function(){for(var t=this.getRepositories(),e=0;e<t.length;e++)if(t[e]._status!==F.LOADED)return!1;return!0}},{key:"getRepository",value:function(t){return this._repositories.has(t)?this._repositories.get(t):null}},{key:"getRepositoryNames",value:function(){return Array.from(this._repositories.keys())}},{key:"getRepositories",value:function(){return Array.from(this._repositories.values())}},{key:"load",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise(function(n,r){t.logger.info("EntityManager: loading start");var i=[];t.getRepositories().forEach(function(t){i.push(t.load(e))}),Promise.all(i).then(function(){t.logger.info("EntityManager: loading success"),n()},function(e){t.logger.error("EntityManager: loading failed",{error:e}),r(e)})})}},{key:"loadFromCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(n,r){t.logger.info("EntityManager: loading start");var i=[];t.getRepositories().forEach(function(t){i.push(t.loadFromCache(e))}),Promise.all(i).then(function(){t.logger.info("EntityManager: loading success"),n()},function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t.logger.error("EntityManager: loading failed",{error:n}),r.apply(void 0,n)})})}},{key:"flush",value:function(){var t=this;return new Promise(function(e,n){t.options.state===A.PUBLISHED&&t.logger.warn("EntityManager: your are about to flush into PUBLISHED state"),t.logger.info("EntityManager: flush start"),t._assertIsNotLocked(),t._assertIsFullyLoaded(),t.logger.info("EntityManager: waiting listeners to be completed before send data"),t._wait().then(e,n)}).then(function(){return t._lock(),t._uow.flush()}).then(function(e){return t._unlock(),e.forEach(function(t){k.publish(t.repository,O.IDENTIFIER_WILL_CHANGE,[t.id,t.symbol])}),t.pull().then(function(){e.forEach(function(t){k.publish(t.repository,O.IDENTIFIER_DID_CHANGE,[t.id,t.symbol])})})}).catch(function(e){throw t.logger.error("EntityManager: flush failed",{error:e}),t._unlock(),e})}},{key:"pull",value:function(){var t=this;if(this.logger.info("EntityManager: pull start"),this.hasPendingChanges())throw this.logger.error("EntityManager: pull failed (pending changes)."),new Error("You cannot pull while there is unsaved modifications");this._lock();var e=[];return this.getRepositories().forEach(function(t){e.push(t._loadIntoNewStorage(!1).then(function(e){var n=t._replaceStorage(e);return[t,n]}))}),Promise.all(e).then(function(t){t.forEach(function(t){var e=_(t,2),n=e[0];e[1][O.REMOVE].forEach(function(t){k.publish(n,O.REMOVE,t)})}),t.forEach(function(t){var e=_(t,2),n=e[0];e[1][O.CREATE].forEach(function(t){k.publish(n,O.CREATE,t)})}),t.forEach(function(t){var e=_(t,2),n=e[0];e[1][O.UPDATE].forEach(function(t){k.publish(n,O.UPDATE,t)})})}).then(function(){t._unlock()}).catch(function(e){return t._unlock(),Promise.reject(e)})}},{key:"_assertIsFullyLoaded",value:function(){if(!this.isFullyLoaded())throw this.logger.error("EntityManager: not fully failed."),new TypeError("You need to fully load EntityManager to use write features")}},{key:"_assertIsNotLocked",value:function(){if(this.locked)throw this.logger.error("EntityManager: locked."),new Error("The EntityManager is locked, readonly operations are permitted")}},{key:"_xhr",value:function(t,e){var n=this;return t.addParameter("site",this.options.site),t.addHeaders(this.constructor.getHeaders(this.options.username,this.options.key,this.options.locale,this.options.state)),t.validateStatus=function(t){return t===e},ut.sendRequest(t).then(function(r){if(r.status!==e){var i="Unexpected status while requesting API\n\n                Got "+r.status+" instead of "+e+" on route "+t.formattedUrl();return n.logger.error(i,{response:r,request:t,expectedStatus:e}),Promise.reject(r)}return r}).catch(function(e){return n._onRequestError(e,t)})}},{key:"_onRequestError",value:function(t,e){var n=ut.formatApiError(t,e),r=n.message,i=n.context;return this.logger.error(r,i),Promise.reject(new Error(r))}},{key:"_waitFor",value:function(t){this._waiting.add(t.catch(function(){}))}},{key:"_wait",value:function(){var t=this,e=this._waiting;return this._waiting=new Set,0===e.size?Promise.resolve():Promise.all(e).then(function(){return t._wait()})}},{key:"wait",value:function(){return this._wait()}}],[{key:"getHeaders",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={Authorization:'WSSE profile="UsernameToken"',"X-WSSE":this.getWsseHeader(t,e),"X-API-MODE":"get"};return null!==r&&(i["X-API-STATE"]=r),null!==n&&(i["X-API-LOCALE"]=n),i}},{key:"getWsseHeader",value:function(t,e){var n=this.generateNonce(),r=this.now();return'UsernameToken Username="'+t+'", PasswordDigest="'+b()(n+r+e,1)+'", Nonce="'+n+'", Created="'+r+'"'}}]),t}(),cn=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),E(e,[{key:"reset",value:function(){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.endpoint=null,this.username=null,this.key=null,this.additionalLocales=null,this.state=A.PUBLISHED,this.binDownloadPolicy={ignoredContexts:[tt.TEXTURE_LOW,tt.TEXTURE_HELPER,tt.TEXTURE_MODEL],ignoredIds:[],ignoredFileType:[]}}},{key:"areSameAdditionalLocales",value:function(t){return t===this.additionalLocales||null!==t&&null!==this.additionalLocales&&this.constructor._areSameArrays(t,this.additionalLocales)}},{key:"areSameBinDownloadPolicy",value:function(t){return!!t&&(!!this.constructor._areSameArrays(t.ignoredContexts,this.binDownloadPolicy.ignoredContexts)&&!!this.constructor._areSameArrays(t.ignoredIds,this.binDownloadPolicy.ignoredIds)&&this.constructor._areSameArrays(t.ignoredFileType,this.binDownloadPolicy.ignoredFileType))}}],[{key:"_areSameArrays",value:function(t,e){if(t.length!==e.length)return!1;var n=!0;return t.forEach(function(t){n&&!e.includes(t)&&(n=!1)}),n}}]),e}(u.a),ln=function(){function t(e){o(this,t),this.directory=e,this.runningUpdates=new Map,this.runningClean=null,this.logger=new c.c}return E(t,null,[{key:"getTranslatableRepositories",value:function(){return[Re.getName(),ve.getName(),vt.getName(),be.getName(),_e.getName(),Zt.getName(),ke.getName(),se.getName(),Be.getName()]}}]),E(t,[{key:"getLastPublishDate",value:function(t,e){var n=this;if(e.state!==A.PUBLISHED)return Promise.resolve(new Date);var r=C.formatApiEndpoint(e.endpoint),i=new ut;return i.url=r+"/published-version/last/"+t,i.addHeaders(un.getHeaders(e.username,e.key)),ut.sendRequest(i).then(function(t){var e=t.data;return new Date(e.date)}).catch(function(t){if(!t.response)return null;if(t.response)switch(t.response.status){case 400:case 404:return new Date;case 503:return null}var e=ut.formatApiError(t,i),r=e.message,o=e.context;return n.logger.error(r,o),Promise.reject(new Error(r))})}},{key:"getCacheMetadata",value:function(t){return this._readFile(this._getSiteCacheDirector(t)+"/metadata.json").then(function(t){return JSON.parse(t)}).catch(function(){return null})}},{key:"clean",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return null!==this.runningClean?this.runningClean:e&&this.runningUpdates.size>0?Promise.all(Array.from(this.runningUpdates.values())).then(function(){return t.clean()}):(this.runningClean=Promise.all([this._getBinRegistry(),this._readdir(this._getBinCacheDirector())]).then(function(e){var n=_(e,2),r=n[0],i=n[1],o=[];Object.keys(r).forEach(function(t){r[t].forEach(function(t){o.includes(t)||o.push(t)})});var a=[];return i.forEach(function(e){o.includes(e)||a.push(t._rmrf(t._getBinCacheDirector()+"/"+e))}),Promise.all(a).then(function(){t.runningClean=null})}),this.runningClean)}},{key:"_cleanUnusedBins",value:function(t,e){var n=this;return this._getBinRegistry().then(function(r){return r[t]=e,n._writeFile(n.directory+"/binRegistry.json",JSON.stringify(r))}).then(function(){return n.clean(!1)})}},{key:"_getBinRegistry",value:function(){return this._readFile(this.directory+"/binRegistry.json").then(function(t){return JSON.parse(t)}).catch(function(){return{}})}},{key:"update",value:function(t,e){var n=this;if(this.runningUpdates.has(t))return this.runningUpdates.get(t);if(null!==this.runningClean)return this.runningClean.then(function(){return n.update(t,e)});var r=new cn(e),i=this.needsUpdate(t,r).then(function(e){var i=e.needsUpdate,o=e.hasCache;return e.hasInternetConnexion?i?(console.log("Will update"),n._doUpdate(t,r)):(console.log("Skip update as it's valid"),!0):o?(console.warn("No Internet connexion"),!1):Promise.reject(new Error("No Internet connexion and no cache"))});return this.runningUpdates.set(t,i),i.then(function(){n.runningUpdates.delete(t)}),i}},{key:"needsUpdate",value:function(t,e){var n=new cn(e);return Promise.all([this.getCacheMetadata(t),this.getLastPublishDate(t,n)]).then(function(t){var e=_(t,2),r=e[0],i=e[1],o=null!==r,a=null!==i,s=o?new Date(r.date):null;if(!a)return{needsUpdate:!o,lastPublishedDate:i,hasCache:o,hasInternetConnexion:a,lastCacheUpdateDate:s};var u=!1;return o?r.apiVersion!==C.getApiVersion()?u=!0:r.endpoint!==n.endpoint?u=!0:r.state!==n.state?u=!0:s<=i?u=!0:n.areSameAdditionalLocales(r.additionalLocales)&&n.areSameBinDownloadPolicy(r.binDownloadPolicy)||(u=!0):u=!0,{needsUpdate:u,lastPublishedDate:i,hasCache:o,hasInternetConnexion:a,lastCacheUpdateDate:s}})}},{key:"_getSiteCacheDirector",value:function(t){return this.directory+"/"+t}},{key:"_getBinCacheDirector",value:function(){return this.directory+"/bin"}},{key:"get",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new C(e);return this.getCacheMetadata(i.site).then(function(t){if(null===t)return Promise.reject(new Error("CacheManager: no cache"));if(t.apiVersion!==C.getApiVersion())return Promise.reject(new Error("CacheManager: cache was created from another api version, please update it"));if(t.endpoint!==i.endpoint)return Promise.reject(new Error("CacheManager: cache was created from another endpoint, please update it"));if(t.state!==i.state)return Promise.reject(new Error("CacheManager: cache was created from state, please update it"));var e=null===i.locale||i===t.defaultLocale;return e||t.availableLocales.includes(i.locale)?r?e:n.getLastPublishDate(i.site,i).then(function(n){return null===n||n>new Date(t.date)?Promise.reject(new Error("CacheManger: is outdated")):e}):Promise.reject(new Error("CacheManager: requested locale is not in the cache"))}).then(function(e){var r=null;r=e||!n.constructor.getTranslatableRepositories().includes(t)?n._getSiteCacheDirector(i.site)+"/"+t+".json":n._getSiteCacheDirector(i.site)+"/"+i.locale+"/"+t+".json";var o=null;return t===it.getName()&&(o=n._getBinRegistry()),Promise.all([n._readFile(r).then(function(t){return JSON.parse(t)}),o])}).then(function(e){var r=_(e,2),o=r[0],a=r[1];if(t===it.getName()){var s=a[i.site];o.forEach(function(t){s.includes(t.reference)&&(t.uri=n._getBinCacheDirector()+"/"+t.reference)})}return o})}},{key:"_doUpdate",value:function(t,e){var n=this,i=this._createEm(t,null,e),o=[],a=this._getSiteCacheDirector(t);return i.load().then(function(){var r,a=i.getRepository("Site").getCurrent();null===i.locale&&(i.locale=a.locale);var s=null;null===e.additionalLocales?(s=[],a.languages.forEach(function(t){t!==a.locale&&s.push(t)})):(r=e,s=r.additionalLocales);var u=[];return s.forEach(function(r){var i=n._createEm(t,r,e);o.push(i),n.constructor.getTranslatableRepositories().forEach(function(t){u.push(i.getRepository(t).load())})}),Promise.all(u)}).then(function(){return console.log("Cleaning"),n._rmrf(a)}).then(function(){console.log("Creating dirs");var t=[n._mkdirp(a),n._mkdirp(n._getBinCacheDirector())];return o.forEach(function(e){t.push(n._mkdirp(a+"/"+e.locale))}),console.log("Creating dir"),Promise.all(t)}).then(function(){var t,o={ignoredContexts:e.binDownloadPolicy.ignoredContexts,ignoredIds:[].concat(r(e.binDownloadPolicy.ignoredIds)),ignoredFileType:e.binDownloadPolicy.ignoredFileType},a=i.getRepository("MapFile").findBy({type:function(t){return[It.PATH,It.CONFIG,It.HELPER,It.IVE,It.LIGHT,It.OSG].includes(t)}}).map(function(t){return t.file.value});return(t=o.ignoredIds).push.apply(t,r(a)),n._downloadFiles(i,o)}).then(function(t){console.log("Saving");var e=[];return i.getRepositories().forEach(function(t){t.isLoaded()&&e.push(n._writeFile(a+"/"+t.constructor.getName()+".json",JSON.stringify(t.getAll())))}),o.forEach(function(t){t.getRepositories().forEach(function(r){r.isLoaded()&&e.push(n._writeFile(a+"/"+t.locale+"/"+r.constructor.getName()+".json",JSON.stringify(r.getAll())))})}),Promise.all(e).then(function(){return t})}).then(function(e){return n._cleanUnusedBins(t,e)}).then(function(){var t=i.getRepository("Site").getCurrent(),r={endpoint:e.endpoint,state:e.state,date:new Date,additionalLocales:e.additionalLocales,defaultLocale:t.default,availableLocales:Array.from(t.languages),binDownloadPolicy:e.binDownloadPolicy,apiVersion:C.getApiVersion()};return n._writeFile(a+"/metadata.json",JSON.stringify(r))})}},{key:"_downloadFiles",value:function(t,e){var n=this,r=[];if(t.getRepository("File").getAll().forEach(function(t){e.ignoredContexts.includes(t.context)||e.ignoredIds.includes(t.id)||e.ignoredFileType.includes(t.file_type)||r.push(t)}),0===r.length)return Promise.resolve([]);var i=[];r.forEach(function(t){i.includes(t.reference)||i.push(t.reference)});for(var o=[],a=0;a<10;a++)o.push(Promise.resolve());for(var s=0;s<r.length;s++)!function(t){var e=t%10;o[e]=o[e].then(function(){return n._downloadFile(r[t])})}(s);return Promise.all(o).then(function(){return i})}},{key:"_createEm",value:function(t,e,n){return new un(new C({site:t,endpoint:n.endpoint,username:n.username,key:n.key,state:n.state,locale:e}))}},{key:"_downloadFile",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_exists",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_mkdirp",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_readFile",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_writeFile",value:function(t,e){return Promise.reject(new Error("Not implemented"))}},{key:"_rmrf",value:function(t){return Promise.reject(new Error("Not implemented"))}},{key:"_readdir",value:function(t){return Promise.reject(new Error("Not implemented"))}}]),t}();(function(t){function e(){throw o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"")),new Error("Not supported in browser")}s(e,t)})(ln),function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//localhost:8080/adsum/cache";return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}s(e,t),E(e,[{key:"update",value:function(t,e){return Promise.reject(new Error("Not supported"))}},{key:"clean",value:function(t,e){return Promise.reject(new Error("Not supported"))}},{key:"_readFile",value:function(t){return d.a.get(t).then(function(t){return"object"==x(t.data)?JSON.stringify(t.data):t.data})}}])}(ln)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(5),i=n(182),o=n(184),a=n(185),s=n(186),u=n(90),c="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(187);t.exports=function(t){return new Promise(function(e,l){var h=t.data,f=t.headers;r.isFormData(h)&&delete f["Content-Type"];var d=new XMLHttpRequest,p="onreadystatechange",g=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in d||s(t.url)||(d=new window.XDomainRequest,p="onload",g=!0,d.onprogress=function(){},d.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";f.Authorization="Basic "+c(m+":"+v)}if(d.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d[p]=function(){if(d&&(4===d.readyState||g)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?d.response:d.responseText,o={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:t,request:d};i(e,l,o),d=null}},d.onerror=function(){l(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var y=n(188),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;b&&(f[t.xsrfHeaderName]=b)}if("setRequestHeader"in d&&r.forEach(f,function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete f[e]:d.setRequestHeader(e,t)}),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){d&&(d.abort(),l(t),d=null)}),void 0===h&&(h=null),d.send(h)})}},function(t,e,n){"use strict";var r=n(183);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(10),a=n(9),s=n(205),u=n(44),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){function t(){i(this,t),this.projector=null,this.objectManager=null,this.options=null,this.awm=null,this.mergePathSectionObject=[],this.mergePathSections=null,this.objectsLoader=null,this.pathPattern=null}return c(t,[{key:"init",value:function(t,e){this.projector=t,this.objectManager=e}},{key:"initer",value:function(t){return this.awm=t,this.objectsLoader=new u.a(this.awm),this.options={patternSpace:1,patternSize:1},this.loadPathPattern()}},{key:"loadPathPattern",value:function(){var t=this;return new Promise(function(e,n){t.objectsLoader.createJSON3DObj("assets/3dModels/path_default.json").then(function(n){if(n instanceof o.Scene&&1===n.children.length){var r=new o.Group;r.add(n.children[0]),n=r}n.scale.multiplyScalar(t.projector.meterToAdsumDistance(t.options.patternSize)),n.traverse(function(t){"outline"===t.name&&t.position.set(.05,.68,-.33),t.updateMatrixWorld()}),t.pathPattern=n,e()})})}},{key:"buildMerged",value:function(t){this.pathSections=t;var e=[];this.pathSections.forEach(function(t){e=[].concat(r(e),r(t.nodes))});var n=this.pathSections[0],i=this.pathSections[this.pathSections.length-1],u=new s.a(n.from,n.ground,i.to,e);this.mergePathSections=u;for(var c=new o.Group,l=u.interpolate(this.projector.meterToAdsumDistance(this.options.patternSpace),this.projector),h=0;h<l.length-1;h++){var f=l[h].position,d=l[h+1].position,p=l[h].ground,g=this.pathPattern.clone();g.position.copy(f);var m=d.clone().sub(g.position),v=0;v=0===m.y?m.x>0?Math.PI/2:-Math.PI/2:Math.atan(m.x/m.y),m.y<0&&(v+=Math.PI),g.setRotationFromAxisAngle(new o.Vector3(-0,-0,-1),v),g.ground=p,c.add(g),c.visible=!1}var y=a.e._createFromPathSection(u,c,this.options.patternSpace);u.ground._addChild(y),y.update(),this.objectManager.pathSectionObjects.set(y.id,y),this.mergePathSectionObject=y}},{key:"build",value:function(t){for(var e=new o.Group,n=this.mergePathSectionObject._mesh.children,r=0;r<n.length;r++){var i=n[r];if(i.up.set(0,0,1),r<n.length-1){var s=n[r+1];i.lookAt(new o.Vector3(s.position.x,s.position.y,0))}else if(this.mergePathSectionObject.pathSection.to){var u=this.projector.utmToAdsum(this.mergePathSectionObject.pathSection.to.pathNode.utmPosition);i.lookAt(new o.Vector3(u.x,u.y,0))}}this.mergePathSectionObject._mesh.children.forEach(function(n,r){n.ground.id===t.ground.id&&e.add(n.clone())});var c=a.e._createFromPathSection(t,e,this.options.patternSpace);return t.ground._addChild(c),c.update(),this.objectManager.pathSectionObjects.set(c.id,c),c}}]),t}(),h=new l;e.a=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(10),a=n(45),s=n(41),u=n(43),c=n(38),l=n(84),h=n(206),f=n(44),d=n(93),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(){function t(){r(this,t),this.awm=null,this.objectsLoader=null}return p(t,[{key:"init",value:function(){var t=this,e=s.a.config.device;return this.adsumLoader=new i.a({entityManager:a.a.entityManager,deviceId:e}),this.awm=new i.b({loader:this.adsumLoader,engine:{container:document.getElementById("adsum-web-map-container")},wayfinding:{pathBuilder:d.a}}),window.awm=this.awm,window.three=o,window.THREE=o,this.awm.init().then(function(){return u.a.init(t.awm),c.a.init(t.awm),h.a.init(t.awm),t.objectsLoader=new f.a(t.awm),l.a.init(t.awm)}).then(function(){console.log("AdsumWebMap is ready to start");var e=new o.TextureLoader;e.crossOrigin="";var n=e.load("assets/textures/background.png");return n.wrapS=o.RepeatWrapping,n.wrapT=o.RepeatWrapping,n.repeat.set(1,1),t.awm.sceneManager.scene.background=n,t.awm.start()})}},{key:"switchMode",value:function(t){}}]),t}(),m=new g;e.a=m},function(t,e,n){"use strict";var r=n(96),i=n(210);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a})},function(t,e,n){"use strict";var r=n(97),i=n.n(r);e.a=i()()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":i(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":i(t)},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(2),u=r(s),c=n(3),l=r(c),h=n(31),f=n(14),d=n(32),p=r(d),g=n(98),m=function(){try{return window.history.state||{}}catch(t){return{}}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(g.canUseDOM,"Browser history needs a DOM");var e=window.history,n=(0,g.supportsHistory)(),r=!(0,g.supportsPopStateOnHashChange)(),i=t.forceRefresh,s=void 0!==i&&i,c=t.getUserConfirmation,d=void 0===c?g.getConfirmation:c,v=t.keyLength,y=void 0===v?6:v,b=t.basename?(0,f.stripTrailingSlash)((0,f.addLeadingSlash)(t.basename)):"",w=function(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname,a=i.search,s=i.hash,c=o+a+s;return(0,u.default)(!b||(0,f.hasBasename)(c,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+c+'" to begin with "'+b+'".'),b&&(c=(0,f.stripBasename)(c,b)),(0,h.createLocation)(c,r,n)},_=function(){return Math.random().toString(36).substr(2,y)},x=(0,p.default)(),E=function(t){a(z,t),z.length=e.length,x.notifyListeners(z.location,z.action)},A=function(t){(0,g.isExtraneousPopstateEvent)(t)||M(w(t.state))},C=function(){M(w(m()))},S=!1,M=function(t){if(S)S=!1,E();else{x.confirmTransitionTo(t,"POP",d,function(e){e?E({action:"POP",location:t}):T(t)})}},T=function(t){var e=z.location,n=O.indexOf(e.key);-1===n&&(n=0);var r=O.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(S=!0,R(i))},k=w(m()),O=[k.key],F=function(t){return b+(0,f.createPath)(t)},P=function(t,r){(0,u.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,h.createLocation)(t,r,_(),z.location);x.confirmTransitionTo(i,"PUSH",d,function(t){if(t){var r=F(i),o=i.key,a=i.state;if(n)if(e.pushState({key:o,state:a},null,r),s)window.location.href=r;else{var c=O.indexOf(z.location.key),l=O.slice(0,-1===c?0:c+1);l.push(i.key),O=l,E({action:"PUSH",location:i})}else(0,u.default)(void 0===a,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},L=function(t,r){(0,u.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,h.createLocation)(t,r,_(),z.location);x.confirmTransitionTo(i,"REPLACE",d,function(t){if(t){var r=F(i),o=i.key,a=i.state;if(n)if(e.replaceState({key:o,state:a},null,r),s)window.location.replace(r);else{var c=O.indexOf(z.location.key);-1!==c&&(O[c]=i.key),E({action:"REPLACE",location:i})}else(0,u.default)(void 0===a,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},R=function(t){e.go(t)},D=function(){return R(-1)},B=function(){return R(1)},I=0,N=function(t){I+=t,1===I?((0,g.addEventListener)(window,"popstate",A),r&&(0,g.addEventListener)(window,"hashchange",C)):0===I&&((0,g.removeEventListener)(window,"popstate",A),r&&(0,g.removeEventListener)(window,"hashchange",C))},j=!1,U=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=x.setPrompt(t);return j||(N(1),j=!0),function(){return j&&(j=!1,N(-1)),e()}},$=function(t){var e=x.appendListener(t);return N(1),function(){N(-1),e()}},z={length:e.length,action:"POP",location:k,createHref:F,push:P,replace:L,go:R,goBack:D,goForward:B,block:U,listen:$};return z};e.default=v},function(t,e,n){"use strict";e.__esModule=!0;e.canUseDOM=!("undefined"===typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":d(e))&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(3),f=n.n(h),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},m=function(t){function e(){var n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,t.call.apply(t,[this].concat(u))),r.handleClick=function(t){if(r.props.onClick&&r.props.onClick(t),!t.defaultPrevented&&0===t.button&&!r.props.target&&!g(t)){t.preventDefault();var e=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?e.replace(o):e.push(o)}},a=n,o(r,a)}return a(e,t),e.prototype.render=function(){var t=this.props,e=(t.replace,t.to),n=t.innerRef,i=r(t,["replace","to","innerRef"]);f()(this.context.router,"You should not use <Link> outside a <Router>");var o=this.context.router.history.createHref("string"===typeof e?{pathname:e}:e);return u.a.createElement("a",p({},i,{onClick:this.handleClick,href:o,ref:n}))},e}(u.a.Component);m.propTypes={onClick:l.a.func,target:l.a.string,replace:l.a.bool,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired,innerRef:l.a.oneOfType([l.a.string,l.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired,createHref:l.a.func.isRequired}).isRequired}).isRequired},e.a=m},function(t,e,n){"use strict";var r=n(34);e.a=r.a},function(t,e,n){"use strict";var r=(n(229),n(37));n.d(e,"a",function(){return r})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){(function(t,n){function r(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function i(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function o(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function a(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function s(t,e){return t.has(e)}function u(t,e){return null==t?void 0:t[e]}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function l(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(){this.__data__=Ce?Ce(null):{},this.size=0}function d(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function p(t){var e=this.__data__;if(Ce){var n=e[t];return n===bt?void 0:n}return se.call(e,t)?e[t]:void 0}function g(t){var e=this.__data__;return Ce?void 0!==e[t]:se.call(e,t)}function m(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ce&&void 0===e?bt:e,this}function v(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function y(){this.__data__=[],this.size=0}function b(t){var e=this.__data__,n=j(e,t);return!(n<0)&&(n==e.length-1?e.pop():ge.call(e,n,1),--this.size,!0)}function w(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]}function _(t){return j(this.__data__,t)>-1}function x(t,e){var n=this.__data__,r=j(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function E(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function A(){this.size=0,this.__data__={hash:new h,map:new(_e||v),string:new h}}function C(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e}function S(t){return J(this,t).get(t)}function M(t){return J(this,t).has(t)}function T(t,e){var n=J(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function k(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new E;++e<n;)this.add(t[e])}function O(t){return this.__data__.set(t,bt),this}function F(t){return this.__data__.has(t)}function P(t){var e=this.__data__=new v(t);this.size=e.size}function L(){this.__data__=new v,this.size=0}function R(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function D(t){return this.__data__.get(t)}function B(t){return this.__data__.has(t)}function I(t,e){var n=this.__data__;if(n instanceof v){var r=n.__data__;if(!_e||r.length<yt-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new E(r)}return n.set(t,e),this.size=n.size,this}function N(t,e){var n=Be(t),r=!n&&De(t),i=!n&&!r&&Ie(t),o=!n&&!r&&!i&&Ne(t),s=n||r||i||o,u=s?a(t.length,String):[],c=u.length;for(var l in t)!e&&!se.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||et(l,c))||u.push(l);return u}function j(t,e){for(var n=t.length;n--;)if(st(t[n][0],e))return n;return-1}function U(t,e,n){var r=e(t);return Be(t)?r:i(r,n(t))}function $(t){return null==t?void 0===t?Ut:Lt:me&&me in Object(t)?tt(t):ot(t)}function z(t){return dt(t)&&$(t)==Et}function H(t,e,n,r,i){return t===e||(null==t||null==e||!dt(t)&&!dt(e)?t!==t&&e!==e:V(t,e,n,r,H,i))}function V(t,e,n,r,i,o){var a=Be(t),s=Be(e),u=a?At:Re(t),c=s?At:Re(e);u=u==Et?Rt:u,c=c==Et?Rt:c;var l=u==Rt,h=c==Rt,f=u==c;if(f&&Ie(t)){if(!Ie(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new P),a||Ne(t)?X(t,e,n,r,i,o):Y(t,e,u,n,r,i,o);if(!(n&wt)){var d=l&&se.call(t,"__wrapped__"),p=h&&se.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return o||(o=new P),i(g,m,n,r,o)}}return!!f&&(o||(o=new P),K(t,e,n,r,i,o))}function W(t){return!(!ft(t)||rt(t))&&(lt(t)?le:Vt).test(at(t))}function G(t){return dt(t)&&ht(t.length)&&!!Gt[$(t)]}function q(t){if(!it(t))return be(t);var e=[];for(var n in Object(t))se.call(t,n)&&"constructor"!=n&&e.push(n);return e}function X(t,e,n,r,i,a){var u=n&wt,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var h=a.get(t);if(h&&a.get(e))return h==e;var f=-1,d=!0,p=n&_t?new k:void 0;for(a.set(t,e),a.set(e,t);++f<c;){var g=t[f],m=e[f];if(r)var v=u?r(m,g,f,e,t,a):r(g,m,f,t,e,a);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!o(e,function(t,e){if(!s(p,e)&&(g===t||i(g,t,n,r,a)))return p.push(e)})){d=!1;break}}else if(g!==m&&!i(g,m,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Y(t,e,n,r,i,o,a){switch(n){case zt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $t:return!(t.byteLength!=e.byteLength||!o(new de(t),new de(e)));case St:case Mt:case Pt:return st(+t,+e);case Tt:return t.name==e.name&&t.message==e.message;case Bt:case Nt:return t==e+"";case Ft:var s=c;case It:var u=r&wt;if(s||(s=l),t.size!=e.size&&!u)return!1;var h=a.get(t);if(h)return h==e;r|=_t,a.set(t,e);var f=X(s(t),s(e),r,i,o,a);return a.delete(t),f;case jt:if(Pe)return Pe.call(t)==Pe.call(e)}return!1}function K(t,e,n,r,i,o){var a=n&wt,s=Z(t),u=s.length;if(u!=Z(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:se.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){l=s[c];var p=t[l],g=e[l];if(r)var m=a?r(g,p,l,e,t,o):r(p,g,l,t,e,o);if(!(void 0===m?p===g||i(p,g,n,r,o):m)){f=!1;break}d||(d="constructor"==l)}if(f&&!d){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f}function Z(t){return U(t,pt,Le)}function J(t,e){var n=t.__data__;return nt(e)?n["string"==typeof e?"string":"hash"]:n.map}function Q(t,e){var n=u(t,e);return W(n)?n:void 0}function tt(t){var e=se.call(t,me),n=t[me];try{t[me]=void 0;var r=!0}catch(t){}var i=ce.call(t);return r&&(e?t[me]=n:delete t[me]),i}function et(t,e){return!!(e=null==e?xt:e)&&("number"==typeof t||Wt.test(t))&&t>-1&&t%1==0&&t<e}function nt(t){var e="undefined"===typeof t?"undefined":vt(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function rt(t){return!!ue&&ue in t}function it(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ie)}function ot(t){return ce.call(t)}function at(t){if(null!=t){try{return ae.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function st(t,e){return t===e||t!==t&&e!==e}function ut(t){return null!=t&&ht(t.length)&&!lt(t)}function ct(t,e){return H(t,e)}function lt(t){if(!ft(t))return!1;var e=$(t);return e==kt||e==Ot||e==Ct||e==Dt}function ht(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=xt}function ft(t){var e="undefined"===typeof t?"undefined":vt(t);return null!=t&&("object"==e||"function"==e)}function dt(t){return null!=t&&"object"==("undefined"===typeof t?"undefined":vt(t))}function pt(t){return ut(t)?N(t):q(t)}function gt(){return[]}function mt(){return!1}var vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt=200,bt="__lodash_hash_undefined__",wt=1,_t=2,xt=9007199254740991,Et="[object Arguments]",At="[object Array]",Ct="[object AsyncFunction]",St="[object Boolean]",Mt="[object Date]",Tt="[object Error]",kt="[object Function]",Ot="[object GeneratorFunction]",Ft="[object Map]",Pt="[object Number]",Lt="[object Null]",Rt="[object Object]",Dt="[object Proxy]",Bt="[object RegExp]",It="[object Set]",Nt="[object String]",jt="[object Symbol]",Ut="[object Undefined]",$t="[object ArrayBuffer]",zt="[object DataView]",Ht=/[\\^$.*+?()[\]{}|]/g,Vt=/^\[object .+?Constructor\]$/,Wt=/^(?:0|[1-9]\d*)$/,Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt[Et]=Gt[At]=Gt[$t]=Gt[St]=Gt[zt]=Gt[Mt]=Gt[Tt]=Gt[kt]=Gt[Ft]=Gt[Pt]=Gt[Rt]=Gt[Bt]=Gt[It]=Gt[Nt]=Gt["[object WeakMap]"]=!1;var qt="object"==("undefined"===typeof t?"undefined":vt(t))&&t&&t.Object===Object&&t,Xt="object"==("undefined"===typeof self?"undefined":vt(self))&&self&&self.Object===Object&&self,Yt=qt||Xt||Function("return this")(),Kt="object"==vt(e)&&e&&!e.nodeType&&e,Zt=Kt&&"object"==vt(n)&&n&&!n.nodeType&&n,Jt=Zt&&Zt.exports===Kt,Qt=Jt&&qt.process,te=function(){try{return Qt&&Qt.binding&&Qt.binding("util")}catch(t){}}(),ee=te&&te.isTypedArray,ne=Array.prototype,re=Function.prototype,ie=Object.prototype,oe=Yt["__core-js_shared__"],ae=re.toString,se=ie.hasOwnProperty,ue=function(){var t=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ce=ie.toString,le=RegExp("^"+ae.call(se).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=Jt?Yt.Buffer:void 0,fe=Yt.Symbol,de=Yt.Uint8Array,pe=ie.propertyIsEnumerable,ge=ne.splice,me=fe?fe.toStringTag:void 0,ve=Object.getOwnPropertySymbols,ye=he?he.isBuffer:void 0,be=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),we=Q(Yt,"DataView"),_e=Q(Yt,"Map"),xe=Q(Yt,"Promise"),Ee=Q(Yt,"Set"),Ae=Q(Yt,"WeakMap"),Ce=Q(Object,"create"),Se=at(we),Me=at(_e),Te=at(xe),ke=at(Ee),Oe=at(Ae),Fe=fe?fe.prototype:void 0,Pe=Fe?Fe.valueOf:void 0;h.prototype.clear=f,h.prototype.delete=d,h.prototype.get=p,h.prototype.has=g,h.prototype.set=m,v.prototype.clear=y,v.prototype.delete=b,v.prototype.get=w,v.prototype.has=_,v.prototype.set=x,E.prototype.clear=A,E.prototype.delete=C,E.prototype.get=S,E.prototype.has=M,E.prototype.set=T,k.prototype.add=k.prototype.push=O,k.prototype.has=F,P.prototype.clear=L,P.prototype.delete=R,P.prototype.get=D,P.prototype.has=B,P.prototype.set=I;var Le=ve?function(t){return null==t?[]:(t=Object(t),r(ve(t),function(e){return pe.call(t,e)}))}:gt,Re=$;(we&&Re(new we(new ArrayBuffer(1)))!=zt||_e&&Re(new _e)!=Ft||xe&&"[object Promise]"!=Re(xe.resolve())||Ee&&Re(new Ee)!=It||Ae&&"[object WeakMap]"!=Re(new Ae))&&(Re=function(t){var e=$(t),n=e==Rt?t.constructor:void 0,r=n?at(n):"";if(r)switch(r){case Se:return zt;case Me:return Ft;case Te:return"[object Promise]";case ke:return It;case Oe:return"[object WeakMap]"}return e});var De=z(function(){return arguments}())?z:function(t){return dt(t)&&se.call(t,"callee")&&!pe.call(t,"callee")},Be=Array.isArray,Ie=ye||mt,Ne=ee?function(t){return function(e){return t(e)}}(ee):G;n.exports=ct}).call(e,n(6),n(42)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],i=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"],o=function(t,e){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(r,i)},e)}};e.editorOptions=r,e.editorEvents=i,e.debounce=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":s(e))&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(48),h=r(l),f=n(0),d=r(f),p=n(1),g=r(p),m=n(103),v=r(m),y=n(237),b=r(y),w=n(104);n(238);var _=h.default.acequire("ace/range"),x=_.Range,E=h.default.acequire("ace/split"),A=E.Split,C=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return w.editorEvents.forEach(function(t){n[t]=n[t].bind(n)}),n.debounce=w.debounce,n}return a(e,t),c(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.className,r=e.onBeforeLoad,i=e.mode,o=e.focus,a=e.theme,s=e.fontSize,u=e.value,c=e.defaultValue,f=e.cursorStart,d=e.showGutter,p=e.wrapEnabled,g=e.showPrintMargin,m=e.scrollMargin,v=void 0===m?[0,0,0,0]:m,y=e.keyboardHandler,_=e.onLoad,x=e.commands,E=e.annotations,C=e.markers,S=e.splits;this.editor=h.default.edit(this.refEditor),r&&r(h.default);var M=Object.keys(this.props.editorProps),T=new A(this.editor.container,"ace/theme/"+a,S);this.editor.env.split=T,this.splitEditor=T.getEditor(0),this.split=T,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var k=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),T.forEach(function(e,n){for(var r=0;r<M.length;r++)e[M[r]]=t.props.editorProps[M[r]];var o=(0,b.default)(c,n),h=(0,b.default)(u,n,"");e.session.setUndoManager(new l.UndoManager),e.setTheme("ace/theme/"+a),e.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),e.getSession().setMode("ace/mode/"+i),e.setFontSize(s),e.renderer.setShowGutter(d),e.getSession().setUseWrapMode(p),e.setShowPrintMargin(g),e.on("focus",t.onFocus),e.on("blur",t.onBlur),e.on("input",t.onInput),e.on("copy",t.onCopy),e.on("paste",t.onPaste),e.on("change",t.onChange),e.getSession().selection.on("changeSelection",t.onSelectionChange),e.getSession().selection.on("changeCursor",t.onCursorChange),e.session.on("changeScrollTop",t.onScroll),e.setValue(void 0===o?h:o,f);var m=(0,b.default)(E,n,[]),_=(0,b.default)(C,n,[]);e.getSession().setAnnotations(m),_&&_.length>0&&t.handleMarkers(_,e);for(var A=0;A<w.editorOptions.length;A++){var S=w.editorOptions[A];k.hasOwnProperty(S)?e.setOption(S,t.props[S]):t.props[S]&&console.warn("ReaceAce: editor option "+S+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}t.handleOptions(t.props,e),Array.isArray(x)&&x.forEach(function(t){"string"==typeof t.exec?e.commands.bindKey(t.bindKey,t.exec):e.commands.addCommand(t)}),y&&e.setKeyboardHandler("ace/keyboard/"+y)}),n&&(this.refEditor.className+=" "+n),o&&this.splitEditor.focus();var O=this.editor.env.split;O.setOrientation("below"===this.props.orientation?O.BELOW:O.BESIDE),O.resize(!0),_&&_(O)}},{key:"componentWillReceiveProps",value:function(t){var e=this,n=this.props,r=this.editor.env.split;if(t.splits!==n.splits&&r.setSplits(t.splits),t.orientation!==n.orientation&&r.setOrientation("below"===t.orientation?r.BELOW:r.BESIDE),r.forEach(function(r,i){t.mode!==n.mode&&r.getSession().setMode("ace/mode/"+t.mode),t.keyboardHandler!==n.keyboardHandler&&(t.keyboardHandler?r.setKeyboardHandler("ace/keyboard/"+t.keyboardHandler):r.setKeyboardHandler(null)),t.fontSize!==n.fontSize&&r.setFontSize(t.fontSize),t.wrapEnabled!==n.wrapEnabled&&r.getSession().setUseWrapMode(t.wrapEnabled),t.showPrintMargin!==n.showPrintMargin&&r.setShowPrintMargin(t.showPrintMargin),t.showGutter!==n.showGutter&&r.renderer.setShowGutter(t.showGutter);for(var o=0;o<w.editorOptions.length;o++){var a=w.editorOptions[o];t[a]!==n[a]&&r.setOption(a,t[a])}(0,v.default)(t.setOptions,n.setOptions)||e.handleOptions(t,r);var s=(0,b.default)(t.value,i,"");if(r.getValue()!==s){e.silent=!0;var u=r.session.selection.toJSON();r.setValue(s,t.cursorStart),r.session.selection.fromJSON(u),e.silent=!1}var c=(0,b.default)(t.annotations,i,[]),l=(0,b.default)(n.annotations,i,[]);(0,v.default)(c,l)||r.getSession().setAnnotations(c);var h=(0,b.default)(t.markers,i,[]),f=(0,b.default)(n.markers,i,[]);!(0,v.default)(h,f)&&Array.isArray(h)&&e.handleMarkers(h,r)}),t.className!==n.className){var i=this.refEditor.className,o=i.trim().split(" ");n.className.trim().split(" ").forEach(function(t){var e=o.indexOf(t);o.splice(e,1)}),this.refEditor.className=" "+t.className+" "+o.join(" ")}t.theme!==n.theme&&r.setTheme("ace/theme/"+t.theme),t.focus&&!n.focus&&this.splitEditor.focus(),t.height===this.props.height&&t.width===this.props.width||this.editor.resize()}},{key:"componentWillUnmount",value:function(){this.editor.destroy(),this.editor=null}},{key:"onChange",value:function(t){if(this.props.onChange&&!this.silent){var e=[];this.editor.env.split.forEach(function(t){e.push(t.getValue())}),this.props.onChange(e,t)}}},{key:"onSelectionChange",value:function(t){if(this.props.onSelectionChange){var e=[];this.editor.env.split.forEach(function(t){e.push(t.getSelection())}),this.props.onSelectionChange(e,t)}}},{key:"onCursorChange",value:function(t){if(this.props.onCursorChange){var e=[];this.editor.env.split.forEach(function(t){e.push(t.getSelection())}),this.props.onCursorChange(e,t)}}},{key:"onFocus",value:function(t){this.props.onFocus&&this.props.onFocus(t)}},{key:"onInput",value:function(t){this.props.onInput&&this.props.onInput(t)}},{key:"onBlur",value:function(t){this.props.onBlur&&this.props.onBlur(t)}},{key:"onCopy",value:function(t){this.props.onCopy&&this.props.onCopy(t)}},{key:"onPaste",value:function(t){this.props.onPaste&&this.props.onPaste(t)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(t,e){for(var n=Object.keys(t.setOptions),r=0;r<n.length;r++)e.setOption(n[r],t.setOptions[n[r]])}},{key:"handleMarkers",value:function(t,e){var n=e.getSession().getMarkers(!0);for(var r in n)n.hasOwnProperty(r)&&e.getSession().removeMarker(n[r].id);n=e.getSession().getMarkers(!1);for(var i in n)n.hasOwnProperty(i)&&e.getSession().removeMarker(n[i].id);t.forEach(function(t){var n=t.startRow,r=t.startCol,i=t.endRow,o=t.endCol,a=t.className,s=t.type,u=t.inFront,c=void 0!==u&&u,l=new x(n,r,i,o);e.getSession().addMarker(l,a,s,c)})}},{key:"updateRef",value:function(t){this.refEditor=t}},{key:"render",value:function(){var t=this.props,e=t.name,n=t.width,r=t.height,i=t.style,o=u({width:n,height:r},i);return d.default.createElement("div",{ref:this.updateRef,id:e,style:o})}}]),e}(f.Component);e.default=C,C.propTypes={mode:g.default.string,splits:g.default.number,orientation:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.oneOfType([g.default.number,g.default.string]),showGutter:g.default.bool,onChange:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onInput:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.arrayOf(g.default.string),defaultValue:g.default.arrayOf(g.default.string),debounceChangePeriod:g.default.number,onLoad:g.default.func,onSelectionChange:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,editorProps:g.default.object,setOptions:g.default.object,style:g.default.object,scrollMargin:g.default.array,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array},C.defaultProps={name:"brace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=Math.PI/180,i=180/Math.PI},function(t,e,n){"use strict";function r(t){return function(e){var n,r,o=e.length,a=new Array(o),s=new Array(o),u=new Array(o);for(n=0;n<o;++n)r=Object(i.f)(e[n]),a[n]=r.r||0,s[n]=r.g||0,u[n]=r.b||0;return a=t(a),s=t(s),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=u(t),r+""}}}n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c});var i=n(12),o=n(54),a=n(108),s=n(16);e.a=function t(e){function n(t,e){var n=r((t=Object(i.f)(t)).r,(e=Object(i.f)(e)).r),o=r(t.g,e.g),a=r(t.b,e.b),u=Object(s.a)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}var r=Object(s.b)(e);return n.gamma=t,n}(1);var u=r(o.b),c=r(a.a)},function(t,e,n){"use strict";var r=n(54);e.a=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],a=t[i%e],s=t[(i+1)%e],u=t[(i+2)%e];return Object(r.a)((n-i/e)*e,o,a,s,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(51);e.a=function(t,e){var n,i=e?e.length:0,o=t?Math.min(i,t.length):0,a=new Array(o),s=new Array(i);for(n=0;n<o;++n)a[n]=Object(r.a)(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=a[n](t);return s}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}},function(t,e,n){"use strict";var r=n(51),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(t,e){var n,o={},a={};null!==t&&"object"===("undefined"===typeof t?"undefined":i(t))||(t={}),null!==e&&"object"===("undefined"===typeof e?"undefined":i(e))||(e={});for(n in e)n in t?o[n]=Object(r.a)(t[n],e[n]):a[n]=e[n];return function(t){for(n in o)a[n]=o[n](t);return a}}},function(t,e,n){"use strict";function r(t){return function(){return t}}function i(t){return function(e){return t(e)+""}}var o=n(24),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(a.source,"g");e.a=function(t,e){var n,u,c,l=a.lastIndex=s.lastIndex=0,h=-1,f=[],d=[];for(t+="",e+="";(n=a.exec(t))&&(u=s.exec(e));)(c=u.index)>l&&(c=e.slice(l,c),f[h]?f[h]+=c:f[++h]=c),(n=n[0])===(u=u[0])?f[h]?f[h]+=u:f[++h]=u:(f[++h]=null,d.push({i:h,x:Object(o.a)(n,u)})),l=s.lastIndex;return l<e.length&&(c=e.slice(l),f[h]?f[h]+=c:f[++h]=c),f.length<2?d[0]?i(d[0].x):r(e):(e=d.length,function(t){for(var n,r=0;r<e;++r)f[(n=d[r]).i]=n.x(t);return f.join("")})}},function(t,e,n){n(115),t.exports=n(120)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(116).enable(),window.Promise=n(118)),n(119),Object.assign=n(25)},function(t,e,n){"use strict";function r(){c=!1,s._47=null,s._71=null}function i(t){function e(e){(t.allRejections||a(h[e].error,t.whitelist||u))&&(h[e].displayId=l++,t.onUnhandled?(h[e].logged=!0,t.onUnhandled(h[e].displayId,h[e].error)):(h[e].logged=!0,o(h[e].displayId,h[e].error)))}function n(e){h[e].logged&&(t.onHandled?t.onHandled(h[e].displayId,h[e].error):h[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[e].displayId+".")))}t=t||{},c&&r(),c=!0;var i=0,l=0,h={};s._47=function(t){2===t._83&&h[t._56]&&(h[t._56].logged?n(t._56):clearTimeout(h[t._56].timeout),delete h[t._56])},s._71=function(t,n){0===t._75&&(t._56=i++,h[t._56]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._56),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(55),u=[ReferenceError,TypeError,RangeError],c=!1;e.disable=r,e.enable=i},function(t,e,n){"use strict";(function(e){function n(t){a.length||(o(),s=!0),a[a.length]=t}function r(){for(;u<a.length;){var t=u;if(u+=1,a[t].call(),u>c){for(var e=0,n=a.length-u;e<n;e++)a[e]=a[e+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var o,a=[],s=!1,u=0,c=1024,l="undefined"!==typeof e?e:self,h=l.MutationObserver||l.WebKitMutationObserver;o="function"===typeof h?function(t){var e=1,n=new h(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(e,n(6))},function(t,e,n){"use strict";function r(t){var e=new o(o._44);return e._83=1,e._18=t,e}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(55);t.exports=o;var a=r(!0),s=r(!1),u=r(null),c=r(void 0),l=r(0),h=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return u;if(void 0===t)return c;if(!0===t)return a;if(!1===t)return s;if(0===t)return l;if(""===t)return h;if("object"===("undefined"===typeof t?"undefined":i(t))||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,n){n(t)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(s,u){if(u&&("object"===("undefined"===typeof u?"undefined":i(u))||"function"===typeof u)){if(u instanceof o&&u.then===o.prototype.then){for(;3===u._83;)u=u._18;return 1===u._83?r(s,u._18):(2===u._83&&n(u._18),void u.then(function(t){r(s,t)},n))}var c=u.then;if("function"===typeof c){return void new o(c.bind(u)).then(function(t){r(s,t)},n)}}e[s]=u,0===--a&&t(e)}if(0===e.length)return t([]);for(var a=e.length,s=0;s<e.length;s++)r(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!==typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&b(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function g(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(122),a=n.n(o),s=n(28),u=n(17),c=n(165),l=n(78),h=n(95),f=n(45),d=n(211),p=n(284),g=(n.n(p),document.getElementById("root")),m=i.a.createElement(s.a,{store:l.a},i.a.createElement(u.a,{history:h.a},i.a.createElement("div",null,i.a.createElement(d.a,null))));g&&f.a.init().then(function(){return f.a.entityManager.load()}).then(function(){a.a.render(m,g),Object(c.a)()})},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);b(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||P}function o(){}function a(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||P}function s(t,e,n){var r=void 0,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)D.call(e,r)&&!B.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:E,type:t,key:o,ref:a,props:i,_owner:R.current}}function u(t){return"object"===("undefined"===typeof t?"undefined":v(t))&&null!==t&&t.$$typeof===E}function c(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function l(t,e,n,r){if(N.length){var i=N.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function h(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>N.length&&N.push(t)}function f(t,e,n,i){var o="undefined"===typeof t?"undefined":v(t);"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case E:case A:a=!0}}if(a)return n(i,t,""===e?"."+d(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){o=t[s];var u=e+d(o,s);a+=f(o,u,n,i)}else if(null===t||"undefined"===typeof t?u=null:(u=F&&t[F]||t["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=e+d(o,s++),a+=f(o,u,n,i);else"object"===o&&(n=""+t,r("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function d(t,e){return"object"===("undefined"===typeof t?"undefined":v(t))&&null!==t&&null!=t.key?c(t.key):e.toString(36)}function p(t,e){t.func.call(t.context,e,t.count++)}function g(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?m(t,r,n,_.thatReturnsArgument):null!=t&&(u(t)&&(e=i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+n,t={$$typeof:E,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),r.push(t))}function m(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(I,"$&/")+"/"),e=l(e,o,r,i),null==t||f(t,"",g,e),h(e)}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=n(25),b=n(26),w=n(56),_=n(27),x="function"===typeof Symbol&&Symbol.for,E=x?Symbol.for("react.element"):60103,A=x?Symbol.for("react.portal"):60106,C=x?Symbol.for("react.fragment"):60107,S=x?Symbol.for("react.strict_mode"):60108,M=x?Symbol.for("react.provider"):60109,T=x?Symbol.for("react.context"):60110,k=x?Symbol.for("react.async_mode"):60111,O=x?Symbol.for("react.forward_ref"):60112,F="function"===typeof Symbol&&Symbol.iterator,P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!==("undefined"===typeof t?"undefined":v(t))&&"function"!==typeof t&&null!=t&&r("85"),this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=i.prototype;var L=a.prototype=new o;L.constructor=a,y(L,i.prototype),L.isPureReactComponent=!0;var R={current:null},D=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0},I=/\/+/g,N=[],j={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return m(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=l(null,null,e,n),null==t||f(t,"",p,e),h(e)},count:function(t){return null==t?0:f(t,"",_.thatReturnsNull,null)},toArray:function(t){var e=[];return m(t,e,null,_.thatReturnsArgument),e},only:function(t){return u(t)||r("143"),t}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:T,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_changedBits:0,Provider:null,Consumer:null},t.Provider={$$typeof:M,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:O,render:t}},Fragment:C,StrictMode:S,unstable_AsyncMode:k,createElement:s,cloneElement:function(t,e,n){(null===t||void 0===t)&&r("267",t);var i=void 0,o=y({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,u=R.current),void 0!==e.key&&(a=""+e.key);var c=void 0;t.type&&t.type.defaultProps&&(c=t.type.defaultProps);for(i in e)D.call(e,i)&&!B.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){c=Array(i);for(var l=0;l<i;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:E,type:t.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(t){var e=s.bind(null,t);return e.type=t,e},isValidElement:u,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:y}},U=Object.freeze({default:j}),$=U&&j||U;t.exports=$.default?$.default:$},function(t,e,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}r(),t.exports=n(123)},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);ln(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n,r,i,o,a,s,u){this._hasCaughtError=!1,this._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this._caughtError=t,this._hasCaughtError=!0}}function o(){if(bn._hasRethrowError){var t=bn._rethrowError;throw bn._rethrowError=null,bn._hasRethrowError=!1,t}}function a(){if(wn)for(var t in _n){var e=_n[t],n=wn.indexOf(t);if(-1<n||r("96",t),!xn[n]){e.extractEvents||r("97",t),xn[n]=e,n=e.eventTypes;for(var i in n){var o=void 0,a=n[i],u=e,c=i;En.hasOwnProperty(c)&&r("99",c),En[c]=a;var l=a.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&s(l[o],u,c);o=!0}else a.registrationName?(s(a.registrationName,u,c),o=!0):o=!1;o||r("98",i,t)}}}}function s(t,e,n){An[t]&&r("100",t),An[t]=e,Cn[t]=e.eventTypes[n].dependencies}function u(t){wn&&r("101"),wn=Array.prototype.slice.call(t),a()}function c(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];_n.hasOwnProperty(e)&&_n[e]===i||(_n[e]&&r("102",e),_n[e]=i,n=!0)}n&&a()}function l(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=kn(r),bn.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function h(t,e){return null==e&&r("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function f(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}function d(t,e){if(t){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)l(t,e,n[i],r[i]);else n&&l(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function p(t){return d(t,!0)}function g(t){return d(t,!1)}function m(t,e){var n=t.stateNode;if(!n)return null;var i=Mn(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(t=t.type,i=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&r("231",e,"undefined"===typeof n?"undefined":cn(n)),n)}function v(t,e){null!==t&&(On=h(On,t)),t=On,On=null,t&&(e?f(t,p):f(t,g),On&&r("95"),bn.rethrowCaughtError())}function y(t,e,n,r){for(var i=null,o=0;o<xn.length;o++){var a=xn[o];a&&(a=a.extractEvents(t,e,n,r))&&(i=h(i,a))}v(i,!1)}function b(t){if(t[Rn])return t[Rn];for(;!t[Rn];){if(!t.parentNode)return null;t=t.parentNode}return t=t[Rn],5===t.tag||6===t.tag?t:null}function w(t){if(5===t.tag||6===t.tag)return t.stateNode;r("33")}function _(t){return t[Dn]||null}function x(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function E(t,e,n){for(var r=[];t;)r.push(t),t=x(t);for(t=r.length;0<t--;)e(r[t],"captured",n);for(t=0;t<r.length;t++)e(r[t],"bubbled",n)}function A(t,e,n){(e=m(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=h(n._dispatchListeners,e),n._dispatchInstances=h(n._dispatchInstances,t))}function C(t){t&&t.dispatchConfig.phasedRegistrationNames&&E(t._targetInst,A,t)}function S(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;e=e?x(e):null,E(e,A,t)}}function M(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=m(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,e),n._dispatchInstances=h(n._dispatchInstances,t))}function T(t){t&&t.dispatchConfig.registrationName&&M(t._targetInst,null,t)}function k(t){f(t,C)}function O(t,e,n,r){if(n&&r)t:{for(var i=n,o=r,a=0,s=i;s;s=x(s))a++;s=0;for(var u=o;u;u=x(u))s++;for(;0<a-s;)i=x(i),a--;for(;0<s-a;)o=x(o),s--;for(;a--;){if(i===o||i===o.alternate)break t;i=x(i),o=x(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=x(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=x(r);for(r=0;r<i.length;r++)M(i[r],"bubbled",t);for(t=n.length;0<t--;)M(n[t],"captured",e)}function F(){return!Nn&&fn.canUseDOM&&(Nn="textContent"in document.documentElement?"textContent":"innerText"),Nn}function P(){if(jn._fallbackText)return jn._fallbackText;var t,e,n=jn._startText,r=n.length,i=L(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return jn._fallbackText=i.slice(t,1<e?1-e:void 0),jn._fallbackText}function L(){return"value"in jn._root?jn._root.value:jn._root[F()]}function R(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var i in t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?pn.thatReturnsTrue:pn.thatReturnsFalse,this.isPropagationStopped=pn.thatReturnsFalse,this}function D(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function B(t){t instanceof this||r("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function I(t){t.eventPool=[],t.getPooled=D,t.release=B}function N(t,e){switch(t){case"topKeyUp":return-1!==Vn.indexOf(e.keyCode);case"topKeyDown":return 229!==e.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function j(t){return t=t.detail,"object"===("undefined"===typeof t?"undefined":cn(t))&&"data"in t?t.data:null}function U(t,e){switch(t){case"topCompositionEnd":return j(e);case"topKeyPress":return 32!==e.which?null:(Zn=!0,Yn);case"topTextInput":return t=e.data,t===Yn&&Zn?null:t;default:return null}}function $(t,e){if(Jn)return"topCompositionEnd"===t||!Wn&&N(t,e)?(t=P(),jn._root=null,jn._startText=null,jn._fallbackText=null,Jn=!1,t):null;switch(t){case"topPaste":return null;case"topKeyPress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"topCompositionEnd":return Xn?null:e.data;default:return null}}function z(t){if(t=Tn(t)){tr&&"function"===typeof tr.restoreControlledState||r("194");var e=Mn(t.stateNode);tr.restoreControlledState(t.stateNode,t.type,e)}}function H(t){nr?rr?rr.push(t):rr=[t]:nr=t}function V(){return null!==nr||null!==rr}function W(){if(nr){var t=nr,e=rr;if(rr=nr=null,z(t),e)for(t=0;t<e.length;t++)z(e[t])}}function G(t,e){return t(e)}function q(t,e,n){return t(e,n)}function X(){}function Y(t,e){if(or)return t(e);or=!0;try{return G(t,e)}finally{or=!1,V()&&(X(),W())}}function K(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ar[t.type]:"textarea"===e}function Z(t){return t=t.target||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function J(t,e){return!(!fn.canUseDOM||e&&!("addEventListener"in document))&&(t="on"+t,e=t in document,e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e)}function Q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function tt(t){var e=Q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.get.call(this)},set:function(t){r=""+t,n.set.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}function et(t){t._valueTracker||(t._valueTracker=tt(t))}function nt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function rt(t){return null===t||"undefined"===typeof t?null:(t=br&&t[br]||t["@@iterator"],"function"===typeof t?t:null)}function it(t){if("function"===typeof(t=t.type))return t.displayName||t.name;if("string"===typeof t)return t;switch(t){case dr:return"ReactFragment";case fr:return"ReactPortal";case lr:return"ReactCall";case hr:return"ReactReturn"}if("object"===("undefined"===typeof t?"undefined":cn(t))&&null!==t)switch(t.$$typeof){case yr:return t=t.render.displayName||t.render.name||"",""!==t?"ForwardRef("+t+")":"ForwardRef"}return null}function ot(t){var e="";do{t:switch(t.tag){case 0:case 1:case 2:case 5:var n=t._debugOwner,r=t._debugSource,i=it(t),o=null;n&&(o=it(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break t;default:i=""}e+=i,t=t.return}while(t);return e}function at(t){return!!xr.hasOwnProperty(t)||!_r.hasOwnProperty(t)&&(wr.test(t)?xr[t]=!0:(_r[t]=!0,!1))}function st(t,e,n,r){if(null!==n&&0===n.type)return!1;switch("undefined"===typeof e?"undefined":cn(e)){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}function ut(t,e,n,r){if(null===e||"undefined"===typeof e||st(t,e,n,r))return!0;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}function lt(t){return t[1].toUpperCase()}function ht(t,e,n,r){var i=Er.hasOwnProperty(e)?Er[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(ut(e,n,i,r)&&(n=null),r||null===i?at(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ft(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function dt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=yt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function pt(t,e){null!=(e=e.checked)&&ht(t,"checked",e,!1)}function gt(t,e){pt(t,e);var n=yt(e.value);null!=n&&("number"===e.type?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n)),e.hasOwnProperty("value")?vt(t,e.type,n):e.hasOwnProperty("defaultValue")&&vt(t,e.type,yt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function mt(t,e){(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue"))&&(""===t.value&&(t.value=""+t._wrapperState.initialValue),t.defaultValue=""+t._wrapperState.initialValue),e=t.name,""!==e&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==e&&(t.name=e)}function vt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function yt(t){switch("undefined"===typeof t?"undefined":cn(t)){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t,e,n){return t=R.getPooled(Cr.change,t,e,n),t.type="change",H(n),k(t),t}function wt(t){v(t,!1)}function _t(t){if(nt(w(t)))return t}function xt(t,e){if("topChange"===t)return e}function Et(){Sr&&(Sr.detachEvent("onpropertychange",At),Mr=Sr=null)}function At(t){"value"===t.propertyName&&_t(Mr)&&(t=bt(Mr,t,Z(t)),Y(wt,t))}function Ct(t,e,n){"topFocus"===t?(Et(),Sr=e,Mr=n,Sr.attachEvent("onpropertychange",At)):"topBlur"===t&&Et()}function St(t){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return _t(Mr)}function Mt(t,e){if("topClick"===t)return _t(e)}function Tt(t,e){if("topInput"===t||"topChange"===t)return _t(e)}function kt(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Fr[t])&&!!e[t]}function Ot(){return kt}function Ft(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(e=e.return,0!==(2&e.effectTag))return 1}return 3===e.tag?2:3}function Pt(t){return!!(t=t._reactInternalFiber)&&2===Ft(t)}function Lt(t){2!==Ft(t)&&r("188")}function Rt(t){var e=t.alternate;if(!e)return e=Ft(t),3===e&&r("188"),1===e?null:t;for(var n=t,i=e;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Lt(o),t;if(s===i)return Lt(o),e;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?t:e}function Dt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Bt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function It(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Nt(t,e){var n=t[0].toUpperCase()+t.slice(1),r="on"+n;n="top"+n,e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},Wr[t]=e,Gr[n]=e}function jt(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n;for(n=e;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(e),e=b(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],y(t.topLevelType,e,t.nativeEvent,Z(t.nativeEvent))}function Ut(t){Kr=!!t}function $t(t,e,n){if(!n)return null;t=(Xr(t)?Ht:Vt).bind(null,t),n.addEventListener(e,t,!1)}function zt(t,e,n){if(!n)return null;t=(Xr(t)?Ht:Vt).bind(null,t),n.addEventListener(e,t,!0)}function Ht(t,e){q(Vt,t,e)}function Vt(t,e){if(Kr){var n=Z(e);if(n=b(n),null!==n&&"number"===typeof n.tag&&2!==Ft(n)&&(n=null),Yr.length){var r=Yr.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Y(jt,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Yr.length&&Yr.push(t)}}}function Wt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function Gt(t){if(Qr[t])return Qr[t];if(!Jr[t])return t;var e,n=Jr[t];for(e in n)if(n.hasOwnProperty(e)&&e in ti)return Qr[t]=n[e];return t}function qt(t){return Object.prototype.hasOwnProperty.call(t,oi)||(t[oi]=ii++,ri[t[oi]]={}),ri[t[oi]]}function Xt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yt(t,e){var n=Xt(t);t=0;for(var r;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Xt(n)}}function Kt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)}function Zt(t,e){if(hi||null==ui||ui!==gn())return null;var n=ui;return"selectionStart"in n&&Kt(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,li&&mn(li,n)?null:(li=n,t=R.getPooled(si.select,ci,t,e),t.type="select",t.target=ui,k(t),t)}function Jt(t,e,n,r){this.tag=t,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=e,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Qt(t,e,n){var r=t.alternate;return null===r?(r=new Jt(t.tag,e,t.key,t.mode),r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function te(t,e,n){var i=t.type,o=t.key;t=t.props;var a=void 0;if("function"===typeof i)a=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"===typeof i)a=5;else switch(i){case dr:return ee(t.children,e,n,o);case vr:a=11,e|=3;break;case pr:a=11,e|=2;break;case lr:a=7;break;case hr:a=9;break;default:if("object"===("undefined"===typeof i?"undefined":cn(i))&&null!==i)switch(i.$$typeof){case gr:a=13;break;case mr:a=12;break;case yr:a=14;break;default:if("number"===typeof i.tag)return e=i,e.pendingProps=t,e.expirationTime=n,e;r("130",null==i?i:"undefined"===typeof i?"undefined":cn(i),"")}else r("130",null==i?i:"undefined"===typeof i?"undefined":cn(i),"")}return e=new Jt(a,t,o,e),e.type=i,e.expirationTime=n,e}function ee(t,e,n,r){return t=new Jt(10,t,r,e),t.expirationTime=n,t}function ne(t,e,n){return t=new Jt(6,t,null,e),t.expirationTime=n,t}function re(t,e,n){return e=new Jt(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ie(t){return function(e){try{return t(e)}catch(t){}}}function oe(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);di=ie(function(t){return e.onCommitFiberRoot(n,t)}),pi=ie(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0}function ae(t){"function"===typeof di&&di(t)}function se(t){"function"===typeof pi&&pi(t)}function ue(t){return{baseState:t,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function ce(t,e){null===t.last?t.first=t.last=e:(t.last.next=e,t.last=e),(0===t.expirationTime||t.expirationTime>e.expirationTime)&&(t.expirationTime=e.expirationTime)}function le(t){gi=mi=null;var e=t.alternate,n=t.updateQueue;null===n&&(n=t.updateQueue=ue(null)),null!==e?null===(t=e.updateQueue)&&(t=e.updateQueue=ue(null)):t=null,gi=n,mi=t!==n?t:null}function he(t,e){le(t),t=gi;var n=mi;null===n?ce(t,e):null===t.last||null===n.last?(ce(t,e),ce(n,e)):(ce(t,e),n.last=e)}function fe(t,e,n,r){return t=t.partialState,"function"===typeof t?t.call(e,n,r):t}function de(t,e,n,r,i,o){null!==t&&t.updateQueue===n&&(n=e.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?t=n.baseState:(t=n.baseState=e.memoizedState,n.isInitialized=!0);for(var a=!0,s=n.first,u=!1;null!==s;){var c=s.expirationTime;if(c>o){var l=n.expirationTime;(0===l||l>c)&&(n.expirationTime=c),u||(u=!0,n.baseState=t)}else u||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(t=fe(s,r,t,i),a=!0):(c=fe(s,r,t,i))&&(t=a?dn({},t,c):dn(t,c),a=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(c=n.callbackList,null===c&&(c=n.callbackList=[]),c.push(s)),null!==s.capturedValue&&(c=n.capturedValues,null===c?n.capturedValues=[s.capturedValue]:c.push(s.capturedValue));s=s.next}return null!==n.callbackList?e.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(e.updateQueue=null),u||(n.baseState=t),t}function pe(t,e){var n=t.callbackList;if(null!==n)for(t.callbackList=null,t=0;t<n.length;t++){var i=n[t],o=i.callback;i.callback=null,"function"!==typeof o&&r("191",o),o.call(e)}}function ge(t,e,n,r,i){function o(t,e,n,r,i,o){if(null===e||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)return!0;var a=t.stateNode;return t=t.type,"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!mn(e,n)||!mn(r,i))}function a(t,e){e.updater=p,t.stateNode=e,e._reactInternalFiber=t}function s(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&p.enqueueReplaceState(e,e.state,null)}function u(t,e,n,r){if(t=t.type,"function"===typeof t.getDerivedStateFromProps)return t.getDerivedStateFromProps.call(null,n,r)}var c=t.cacheContext,l=t.getMaskedContext,h=t.getUnmaskedContext,f=t.isContextConsumer,d=t.hasContextChanged,p={isMounted:Pt,enqueueSetState:function(t,r,i){t=t._reactInternalFiber,i=void 0===i?null:i;var o=n(t);he(t,{expirationTime:o,partialState:r,callback:i,isReplace:!1,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueReplaceState:function(t,r,i){t=t._reactInternalFiber,i=void 0===i?null:i;var o=n(t);he(t,{expirationTime:o,partialState:r,callback:i,isReplace:!0,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueForceUpdate:function(t,r){t=t._reactInternalFiber,r=void 0===r?null:r;var i=n(t);he(t,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,capturedValue:null,next:null}),e(t,i)}};return{adoptClassInstance:a,callGetDerivedStateFromProps:u,constructClassInstance:function(t,e){var n=t.type,r=h(t),i=f(t),o=i?l(t,r):yn;n=new n(e,o);var s=null!==n.state&&void 0!==n.state?n.state:null;return a(t,n),t.memoizedState=s,e=u(t,n,e,s),null!==e&&void 0!==e&&(t.memoizedState=dn({},t.memoizedState,e)),i&&c(t,r,o),n},mountClassInstance:function(t,e){var n=t.type,r=t.alternate,i=t.stateNode,o=t.pendingProps,a=h(t);i.props=o,i.state=t.memoizedState,i.refs=yn,i.context=l(t,a),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(n=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&p.enqueueReplaceState(i,i.state,null),null!==(n=t.updateQueue)&&(i.state=de(r,t,n,i,o,e))),"function"===typeof i.componentDidMount&&(t.effectTag|=4)},resumeMountClassInstance:function(t,e){var n=t.type,a=t.stateNode;a.props=t.memoizedProps,a.state=t.memoizedState;var c=t.memoizedProps,f=t.pendingProps,p=a.context,g=h(t);g=l(t,g),(n="function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(c!==f||p!==g)&&s(t,a,f,g),p=t.memoizedState,e=null!==t.updateQueue?de(null,t,t.updateQueue,a,f,e):p;var m=void 0;if(c!==f&&(m=u(t,a,f,e)),null!==m&&void 0!==m){e=null===e||void 0===e?m:dn({},e,m);var v=t.updateQueue;null!==v&&(v.baseState=dn({},v.baseState,m))}return c!==f||p!==e||d()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((c=o(t,c,f,p,e,g))?(n||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r(t,f),i(t,e)),a.props=f,a.state=e,a.context=g,c):("function"===typeof a.componentDidMount&&(t.effectTag|=4),!1)},updateClassInstance:function(t,e,n){var a=e.type,c=e.stateNode;c.props=e.memoizedProps,c.state=e.memoizedState;var f=e.memoizedProps,p=e.pendingProps,g=c.context,m=h(e);m=l(e,m),(a="function"===typeof a.getDerivedStateFromProps||"function"===typeof c.getSnapshotBeforeUpdate)||"function"!==typeof c.UNSAFE_componentWillReceiveProps&&"function"!==typeof c.componentWillReceiveProps||(f!==p||g!==m)&&s(e,c,p,m),g=e.memoizedState,n=null!==e.updateQueue?de(t,e,e.updateQueue,c,p,n):g;var v=void 0;if(f!==p&&(v=u(e,c,p,n)),null!==v&&void 0!==v){n=null===n||void 0===n?v:dn({},n,v);var y=e.updateQueue;null!==y&&(y.baseState=dn({},y.baseState,v))}return f!==p||g!==n||d()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((v=o(e,f,p,g,n,m))?(a||"function"!==typeof c.UNSAFE_componentWillUpdate&&"function"!==typeof c.componentWillUpdate||("function"===typeof c.componentWillUpdate&&c.componentWillUpdate(p,n,m),"function"===typeof c.UNSAFE_componentWillUpdate&&c.UNSAFE_componentWillUpdate(p,n,m)),"function"===typeof c.componentDidUpdate&&(e.effectTag|=4),"function"===typeof c.getSnapshotBeforeUpdate&&(e.effectTag|=2048)):("function"!==typeof c.componentDidUpdate||f===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=4),"function"!==typeof c.getSnapshotBeforeUpdate||f===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=2048),r(e,p),i(e,n)),c.props=p,c.state=n,c.context=m,v):("function"!==typeof c.componentDidUpdate||f===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=4),"function"!==typeof c.getSnapshotBeforeUpdate||f===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=2048),!1)}}}function me(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==("undefined"===typeof t?"undefined":cn(t))){if(n._owner){n=n._owner;var i=void 0;n&&(2!==n.tag&&r("110"),i=n.stateNode),i||r("147",t);var o=""+t;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs===yn?i.refs={}:i.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}"string"!==typeof t&&r("148"),n._owner||r("254",t)}return t}function ve(t,e){"textarea"!==t.type&&r("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function ye(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,n){return t=Qt(t,e,n),t.index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=2,n):r):(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?(e=ne(n,t.mode,r),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function c(t,e,n,r){return null!==e&&e.type===n.type?(r=o(e,n.props,r),r.ref=me(t,e,n),r.return=t,r):(r=te(n,t.mode,r),r.ref=me(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=re(n,t.mode,r),e.return=t,e):(e=o(e,n.children||[],r),e.return=t,e)}function h(t,e,n,r,i){return null===e||10!==e.tag?(e=ee(n,t.mode,r,i),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return e=ne(""+e,t.mode,n),e.return=t,e;if("object"===("undefined"===typeof e?"undefined":cn(e))&&null!==e){switch(e.$$typeof){case cr:return n=te(e,t.mode,n),n.ref=me(t,null,e),n.return=t,n;case fr:return e=re(e,t.mode,n),e.return=t,e}if(vi(e)||rt(e))return e=ee(e,t.mode,n,null),e.return=t,e;ve(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===("undefined"===typeof n?"undefined":cn(n))&&null!==n){switch(n.$$typeof){case cr:return n.key===i?n.type===dr?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case fr:return n.key===i?l(t,e,n,r):null}if(vi(n)||rt(n))return null!==i?null:h(t,e,n,r,null);ve(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return t=t.get(n)||null,u(e,t,""+r,i);if("object"===("undefined"===typeof r?"undefined":cn(r))&&null!==r){switch(r.$$typeof){case cr:return t=t.get(null===r.key?n:r.key)||null,r.type===dr?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case fr:return t=t.get(null===r.key?n:r.key)||null,l(e,t,r,i)}if(vi(r)||rt(r))return t=t.get(n)||null,h(e,t,r,i,null);ve(e,r)}return null}function g(r,o,s,u){for(var c=null,l=null,h=o,g=o=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=d(r,h,s[g],u);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),o=a(v,o,g),null===l?c=v:l.sibling=v,l=v,h=m}if(g===s.length)return n(r,h),c;if(null===h){for(;g<s.length;g++)(h=f(r,s[g],u))&&(o=a(h,o,g),null===l?c=h:l.sibling=h,l=h);return c}for(h=i(r,h);g<s.length;g++)(m=p(h,r,g,s[g],u))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=a(m,o,g),null===l?c=m:l.sibling=m,l=m);return t&&h.forEach(function(t){return e(r,t)}),c}function m(o,s,u,c){var l=rt(u);"function"!==typeof l&&r("150"),null==(u=l.call(u))&&r("151");for(var h=l=null,g=s,m=s=0,v=null,y=u.next();null!==g&&!y.done;m++,y=u.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=d(o,g,y.value,c);if(null===b){g||(g=v);break}t&&g&&null===b.alternate&&e(o,g),s=a(b,s,m),null===h?l=b:h.sibling=b,h=b,g=v}if(y.done)return n(o,g),l;if(null===g){for(;!y.done;m++,y=u.next())null!==(y=f(o,y.value,c))&&(s=a(y,s,m),null===h?l=y:h.sibling=y,h=y);return l}for(g=i(o,g);!y.done;m++,y=u.next())null!==(y=p(g,o,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===h?l=y:h.sibling=y,h=y);return t&&g.forEach(function(t){return e(o,t)}),l}return function(t,i,a,u){"object"===("undefined"===typeof a?"undefined":cn(a))&&null!==a&&a.type===dr&&null===a.key&&(a=a.props.children);var c="object"===("undefined"===typeof a?"undefined":cn(a))&&null!==a;if(c)switch(a.$$typeof){case cr:t:{var l=a.key;for(c=i;null!==c;){if(c.key===l){if(10===c.tag?a.type===dr:c.type===a.type){n(t,c.sibling),i=o(c,a.type===dr?a.props.children:a.props,u),i.ref=me(t,c,a),i.return=t,t=i;break t}n(t,c);break}e(t,c),c=c.sibling}a.type===dr?(i=ee(a.props.children,t.mode,u,a.key),i.return=t,t=i):(u=te(a,t.mode,u),u.ref=me(t,i,a),u.return=t,t=u)}return s(t);case fr:t:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),i=o(i,a.children||[],u),i.return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}i=re(a,t.mode,u),i.return=t,t=i}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),i=o(i,a,u),i.return=t,t=i):(n(t,i),i=ne(a,t.mode,u),i.return=t,t=i),s(t);if(vi(a))return g(t,i,a,u);if(rt(a))return m(t,i,a,u);if(c&&ve(t,a),"undefined"===typeof a)switch(t.tag){case 2:case 1:u=t.type,r("152",u.displayName||u.name||"Component")}return n(t,i)}}function be(t,e,n,i,o,a,s){function u(t,e,n){c(t,e,n,e.expirationTime)}function c(t,e,n,r){e.child=null===t?bi(e,null,n,r):yi(e,t.child,n,r)}function l(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function h(t,e,n,r,i,o){if(l(t,e),!n&&!i)return r&&S(e,!1),g(t,e);n=e.stateNode,sr.current=e;var a=i?null:n.render();return e.effectTag|=1,i&&(c(t,e,null,o),e.child=null),c(t,e,a,o),e.memoizedState=n.state,e.memoizedProps=n.props,r&&S(e,!0),e.child}function f(t){var e=t.stateNode;e.pendingContext?C(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C(t,e.context,!1),b(t,e.containerInfo)}function d(t,e,n,r){var i=t.child;for(null!==i&&(i.return=t);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===e&&0!==(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===t.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){o=i;break}o=o.return}i=o}}function p(t,e,n){var r=e.type._context,i=e.pendingProps,o=e.memoizedProps;if(!E()&&o===i)return e.stateNode=0,w(e),g(t,e);var a=i.value;if(e.memoizedProps=i,null===o)a=1073741823;else if(o.value===i.value){if(o.children===i.children)return e.stateNode=0,w(e),g(t,e);a=0}else{var s=o.value;if(s===a&&(0!==s||1/s===1/a)||s!==s&&a!==a){if(o.children===i.children)return e.stateNode=0,w(e),g(t,e);a=0}else if(a="function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823,0===(a|=0)){if(o.children===i.children)return e.stateNode=0,w(e),g(t,e)}else d(e,r,a,n)}return e.stateNode=a,w(e),u(t,e,i.children),e.child}function g(t,e){if(null!==t&&e.child!==t.child&&r("153"),null!==e.child){t=e.child;var n=Qt(t,t.pendingProps,t.expirationTime);for(e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=Qt(t,t.pendingProps,t.expirationTime),n.return=e;n.sibling=null}return e.child}var m=t.shouldSetTextContent,v=t.shouldDeprioritizeSubtree,y=e.pushHostContext,b=e.pushHostContainer,w=i.pushProvider,_=n.getMaskedContext,x=n.getUnmaskedContext,E=n.hasContextChanged,A=n.pushContextProvider,C=n.pushTopLevelContextObject,S=n.invalidateContextProvider,M=o.enterHydrationState,T=o.resetHydrationState,k=o.tryToClaimNextHydratableInstance;t=ge(n,a,s,function(t,e){t.memoizedProps=e},function(t,e){t.memoizedState=e});var O=t.adoptClassInstance,F=t.callGetDerivedStateFromProps,P=t.constructClassInstance,L=t.mountClassInstance,R=t.resumeMountClassInstance,D=t.updateClassInstance;return{beginWork:function(t,e,n){if(0===e.expirationTime||e.expirationTime>n){switch(e.tag){case 3:f(e);break;case 2:A(e);break;case 4:b(e,e.stateNode.containerInfo);break;case 13:w(e)}return null}switch(e.tag){case 0:null!==t&&r("155");var i=e.type,o=e.pendingProps,a=x(e);return a=_(e,a),i=i(o,a),e.effectTag|=1,"object"===("undefined"===typeof i?"undefined":cn(i))&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(a=e.type,e.tag=2,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,"function"===typeof a.getDerivedStateFromProps&&null!==(o=F(e,i,o,e.memoizedState))&&void 0!==o&&(e.memoizedState=dn({},e.memoizedState,o)),o=A(e),O(e,i),L(e,n),t=h(t,e,!0,o,!1,n)):(e.tag=1,u(t,e,i),e.memoizedProps=o,t=e.child),t;case 1:return o=e.type,n=e.pendingProps,E()||e.memoizedProps!==n?(i=x(e),i=_(e,i),o=o(n,i),e.effectTag|=1,u(t,e,o),e.memoizedProps=n,t=e.child):t=g(t,e),t;case 2:o=A(e),null===t?null===e.stateNode?(P(e,e.pendingProps),L(e,n),i=!0):i=R(e,n):i=D(t,e,n),a=!1;var s=e.updateQueue;return null!==s&&null!==s.capturedValues&&(a=i=!0),h(t,e,i,o,a,n);case 3:t:if(f(e),null!==(i=e.updateQueue)){if(a=e.memoizedState,o=de(t,e,i,null,null,n),e.memoizedState=o,null!==(i=e.updateQueue)&&null!==i.capturedValues)i=null;else{if(a===o){T(),t=g(t,e);break t}i=o.element}a=e.stateNode,(null===t||null===t.child)&&a.hydrate&&M(e)?(e.effectTag|=2,e.child=bi(e,null,i,n)):(T(),u(t,e,i)),e.memoizedState=o,t=e.child}else T(),t=g(t,e);return t;case 5:return y(e),null===t&&k(e),o=e.type,s=e.memoizedProps,i=e.pendingProps,a=null!==t?t.memoizedProps:null,E()||s!==i||((s=1&e.mode&&v(o,i))&&(e.expirationTime=1073741823),s&&1073741823===n)?(s=i.children,m(o,i)?s=null:a&&m(o,a)&&(e.effectTag|=16),l(t,e),1073741823!==n&&1&e.mode&&v(o,i)?(e.expirationTime=1073741823,e.memoizedProps=i,t=null):(u(t,e,s),e.memoizedProps=i,t=e.child)):t=g(t,e),t;case 6:return null===t&&k(e),e.memoizedProps=e.pendingProps,null;case 8:e.tag=7;case 7:return o=e.pendingProps,E()||e.memoizedProps!==o||(o=e.memoizedProps),i=o.children,e.stateNode=null===t?bi(e,e.stateNode,i,n):yi(e,t.stateNode,i,n),e.memoizedProps=o,e.stateNode;case 9:return null;case 4:return b(e,e.stateNode.containerInfo),o=e.pendingProps,E()||e.memoizedProps!==o?(null===t?e.child=yi(e,null,o,n):u(t,e,o),e.memoizedProps=o,t=e.child):t=g(t,e),t;case 14:return n=e.type.render,n=n(e.pendingProps,e.ref),u(t,e,n),e.memoizedProps=n,e.child;case 10:return n=e.pendingProps,E()||e.memoizedProps!==n?(u(t,e,n),e.memoizedProps=n,t=e.child):t=g(t,e),t;case 11:return n=e.pendingProps.children,E()||null!==n&&e.memoizedProps!==n?(u(t,e,n),e.memoizedProps=n,t=e.child):t=g(t,e),t;case 13:return p(t,e,n);case 12:t:{i=e.type,a=e.pendingProps,s=e.memoizedProps,o=i._currentValue;var c=i._changedBits;if(E()||0!==c||s!==a){e.memoizedProps=a;var C=a.unstable_observedBits;if(void 0!==C&&null!==C||(C=1073741823),e.stateNode=C,0!==(c&C))d(e,i,c,n);else if(s===a){t=g(t,e);break t}n=a.children,n=n(o),u(t,e,n),t=e.child}else t=g(t,e)}return t;default:r("156")}}}}function we(t,e,n,i,o){function a(t){t.effectTag|=4}var s=t.createInstance,u=t.createTextInstance,c=t.appendInitialChild,l=t.finalizeInitialChildren,h=t.prepareUpdate,f=t.persistence,d=e.getRootHostContainer,p=e.popHostContext,g=e.getHostContext,m=e.popHostContainer,v=n.popContextProvider,y=n.popTopLevelContextObject,b=i.popProvider,w=o.prepareToHydrateHostInstance,_=o.prepareToHydrateHostTextInstance,x=o.popHydrationState,E=void 0,A=void 0,C=void 0;return t.mutation?(E=function(){},A=function(t,e,n){(e.updateQueue=n)&&a(e)},C=function(t,e,n,r){n!==r&&a(e)}):r(f?"235":"236"),{completeWork:function(t,e,n){var i=e.pendingProps;switch(e.tag){case 1:return null;case 2:return v(e),t=e.stateNode,i=e.updateQueue,null!==i&&null!==i.capturedValues&&(e.effectTag&=-65,"function"===typeof t.componentDidCatch?e.effectTag|=256:i.capturedValues=null),null;case 3:return m(e),y(e),i=e.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(x(e),e.effectTag&=-3),E(e),t=e.updateQueue,null!==t&&null!==t.capturedValues&&(e.effectTag|=256),null;case 5:p(e),n=d();var o=e.type;if(null!==t&&null!=e.stateNode){var f=t.memoizedProps,S=e.stateNode,M=g();S=h(S,o,f,i,n,M),A(t,e,S,o,f,i,n,M),t.ref!==e.ref&&(e.effectTag|=128)}else{if(!i)return null===e.stateNode&&r("166"),null;if(t=g(),x(e))w(e,n,t)&&a(e);else{f=s(o,i,n,t,e);t:for(M=e.child;null!==M;){if(5===M.tag||6===M.tag)c(f,M.stateNode);else if(4!==M.tag&&null!==M.child){M.child.return=M,M=M.child;continue}if(M===e)break;for(;null===M.sibling;){if(null===M.return||M.return===e)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}l(f,o,i,n,t)&&a(e),e.stateNode=f}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)C(t,e,t.memoizedProps,i);else{if("string"!==typeof i)return null===e.stateNode&&r("166"),null;t=d(),n=g(),x(e)?_(e)&&a(e):e.stateNode=u(i,t,n,e)}return null;case 7:(i=e.memoizedProps)||r("165"),e.tag=8,o=[];t:for((f=e.stateNode)&&(f.return=e);null!==f;){if(5===f.tag||6===f.tag||4===f.tag)r("247");else if(9===f.tag)o.push(f.pendingProps.value);else if(null!==f.child){f.child.return=f,f=f.child;continue}for(;null===f.sibling;){if(null===f.return||f.return===e)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}return f=i.handler,i=f(i.props,o),e.child=yi(e,null!==t?t.child:null,i,n),e.child;case 8:return e.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return m(e),E(e),null;case 13:return b(e),null;case 12:return null;case 0:r("167");default:r("156")}}}}function _e(t,e,n,r,i){var o=t.popHostContainer,a=t.popHostContext,s=e.popContextProvider,u=e.popTopLevelContextObject,c=n.popProvider;return{throwException:function(t,e,n){e.effectTag|=512,e.firstEffect=e.lastEffect=null,e={value:n,source:e,stack:ot(e)};do{switch(t.tag){case 3:return le(t),t.updateQueue.capturedValues=[e],void(t.effectTag|=1024);case 2:if(n=t.stateNode,0===(64&t.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&!i(n)){le(t),n=t.updateQueue;var r=n.capturedValues;return null===r?n.capturedValues=[e]:r.push(e),void(t.effectTag|=1024)}}t=t.return}while(null!==t)},unwindWork:function(t){switch(t.tag){case 2:s(t);var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return o(t),u(t),e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 5:return a(t),null;case 4:return o(t),null;case 13:return c(t),null;default:return null}},unwindInterruptedWork:function(t){switch(t.tag){case 2:s(t);break;case 3:o(t),u(t);break;case 5:a(t);break;case 4:o(t);break;case 13:c(t)}}}}function xe(t,e){var n=e.source;null===e.stack&&ot(n),null!==n&&it(n),e=e.value,null!==t&&2===t.tag&&it(t);try{e&&e.suppressReactErrorLogging||console.error(e)}catch(t){t&&t.suppressReactErrorLogging||console.error(t)}}function Ee(t,e,n,i,o){function a(t){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(n){e(t,n)}else n.current=null}function s(t){switch("function"===typeof se&&se(t),t.tag){case 2:a(t);var n=t.stateNode;if("function"===typeof n.componentWillUnmount)try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(n){e(t,n)}break;case 5:a(t);break;case 7:u(t.stateNode);break;case 4:f&&l(t)}}function u(t){for(var e=t;;)if(s(e),null===e.child||f&&4===e.tag){if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}else e.child.return=e,e=e.child}function c(t){return 5===t.tag||3===t.tag||4===t.tag}function l(t){for(var e=t,n=!1,i=void 0,o=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,o=!1;break t;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag)u(e),o?x(i,e.stateNode):_(i,e.stateNode);else if(4===e.tag?i=e.stateNode.containerInfo:s(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return,4===e.tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}var h=t.getPublicInstance,f=t.mutation;t=t.persistence,f||r(t?"235":"236");var d=f.commitMount,p=f.commitUpdate,g=f.resetTextContent,m=f.commitTextUpdate,v=f.appendChild,y=f.appendChildToContainer,b=f.insertBefore,w=f.insertInContainerBefore,_=f.removeChild,x=f.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(t,e){switch(e.tag){case 2:if(2048&e.effectTag&&null!==t){var n=t.memoizedProps,i=t.memoizedState;t=e.stateNode,t.props=e.memoizedProps,t.state=e.memoizedState,e=t.getSnapshotBeforeUpdate(n,i),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:break;default:r("163")}},commitResetTextContent:function(t){g(t.stateNode)},commitPlacement:function(t){t:{for(var e=t.return;null!==e;){if(c(e)){var n=e;break t}e=e.return}r("160"),n=void 0}var i=e=void 0;switch(n.tag){case 5:e=n.stateNode,i=!1;break;case 3:case 4:e=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(g(e),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||c(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var o=t;;){if(5===o.tag||6===o.tag)n?i?w(e,o.stateNode,n):b(e,o.stateNode,n):i?y(e,o.stateNode):v(e,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(t){l(t),t.return=null,t.child=null,t.alternate&&(t.alternate.child=null,t.alternate.return=null)},commitWork:function(t,e){switch(e.tag){case 2:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var o=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&p(n,a,o,t,i,e)}break;case 6:null===e.stateNode&&r("162"),n=e.memoizedProps,m(e.stateNode,null!==t?t.memoizedProps:n,n);break;case 3:break;default:r("163")}},commitLifeCycles:function(t,e,n){switch(n.tag){case 2:if(t=n.stateNode,4&n.effectTag)if(null===e)t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidMount();else{var i=e.memoizedProps;e=e.memoizedState,t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}n=n.updateQueue,null!==n&&pe(n,t);break;case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=h(n.child.stateNode);break;case 2:t=n.child.stateNode}pe(e,t)}break;case 5:t=n.stateNode,null===e&&4&n.effectTag&&d(t,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:r("163")}},commitErrorLogging:function(t,e){switch(t.tag){case 2:var n=t.type;e=t.stateNode;var i=t.updateQueue;(null===i||null===i.capturedValues)&&r("264");var a=i.capturedValues;for(i.capturedValues=null,"function"!==typeof n.getDerivedStateFromCatch&&o(e),e.props=t.memoizedProps,e.state=t.memoizedState,n=0;n<a.length;n++){i=a[n];var s=i.value,u=i.stack;xe(t,i),e.componentDidCatch(s,{componentStack:null!==u?u:""})}break;case 3:for(n=t.updateQueue,(null===n||null===n.capturedValues)&&r("264"),a=n.capturedValues,n.capturedValues=null,n=0;n<a.length;n++)i=a[n],xe(t,i),e(i.value);break;default:r("265")}},commitAttachRef:function(t){var e=t.ref;if(null!==e){var n=t.stateNode;switch(t.tag){case 5:t=h(n);break;default:t=n}"function"===typeof e?e(t):e.current=t}},commitDetachRef:function(t){null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null)}}}function Ae(t,e){function n(t){return t===wi&&r("174"),t}var i=t.getChildHostContext,o=t.getRootHostContext;t=e.createCursor;var a=e.push,s=e.pop,u=t(wi),c=t(wi),l=t(wi);return{getHostContext:function(){return n(u.current)},getRootHostContainer:function(){return n(l.current)},popHostContainer:function(t){s(u,t),s(c,t),s(l,t)},popHostContext:function(t){c.current===t&&(s(u,t),s(c,t))},pushHostContainer:function(t,e){a(l,e,t),a(c,t,t),a(u,wi,t),e=o(e),s(u,t),a(u,e,t)},pushHostContext:function(t){var e=n(l.current),r=n(u.current);e=i(r,t.type,e),r!==e&&(a(c,t,t),a(u,e,t))}}}function Ce(t){function e(t,e){var n=new Jt(5,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function n(t,e){switch(t.tag){case 5:return null!==(e=a(e,t.type,t.pendingProps))&&(t.stateNode=e,!0);case 6:return null!==(e=s(e,t.pendingProps))&&(t.stateNode=e,!0);default:return!1}}function i(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;f=t}var o=t.shouldSetTextContent;if(!(t=t.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var a=t.canHydrateInstance,s=t.canHydrateTextInstance,u=t.getNextHydratableSibling,c=t.getFirstHydratableChild,l=t.hydrateInstance,h=t.hydrateTextInstance,f=null,d=null,p=!1;return{enterHydrationState:function(t){return d=c(t.stateNode.containerInfo),f=t,p=!0},resetHydrationState:function(){d=f=null,p=!1},tryToClaimNextHydratableInstance:function(t){if(p){var r=d;if(r){if(!n(t,r)){if(!(r=u(r))||!n(t,r))return t.effectTag|=2,p=!1,void(f=t);e(f,d)}f=t,d=c(r)}else t.effectTag|=2,p=!1,f=t}},prepareToHydrateHostInstance:function(t,e,n){return e=l(t.stateNode,t.type,t.memoizedProps,e,n,t),t.updateQueue=e,null!==e},prepareToHydrateHostTextInstance:function(t){return h(t.stateNode,t.memoizedProps,t)},popHydrationState:function(t){if(t!==f)return!1;if(!p)return i(t),p=!0,!1;var n=t.type;if(5!==t.tag||"head"!==n&&"body"!==n&&!o(n,t.memoizedProps))for(n=d;n;)e(t,n),n=u(n);return i(t),d=f?u(t.stateNode):null,!0}}}function Se(t){function e(t,e,n){t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n}function n(t){return 2===t.tag&&null!=t.type.childContextTypes}function i(t,e){var n=t.stateNode,i=t.type.childContextTypes;if("function"!==typeof n.getChildContext)return e;n=n.getChildContext();for(var o in n)o in i||r("108",it(t)||"Unknown",o);return dn({},e,n)}var o=t.createCursor,a=t.push,s=t.pop,u=o(yn),c=o(!1),l=yn;return{getUnmaskedContext:function(t){return n(t)?l:u.current},cacheContext:e,getMaskedContext:function(t,n){var r=t.type.contextTypes;if(!r)return yn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in r)a[o]=n[o];return i&&e(t,n,a),a},hasContextChanged:function(){return c.current},isContextConsumer:function(t){return 2===t.tag&&null!=t.type.contextTypes},isContextProvider:n,popContextProvider:function(t){n(t)&&(s(c,t),s(u,t))},popTopLevelContextObject:function(t){s(c,t),s(u,t)},pushTopLevelContextObject:function(t,e,n){null!=u.cursor&&r("168"),a(u,e,t),a(c,n,t)},processChildContext:i,pushContextProvider:function(t){if(!n(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||yn,l=u.current,a(u,e,t),a(c,c.current,t),!0},invalidateContextProvider:function(t,e){var n=t.stateNode;if(n||r("169"),e){var o=i(t,l);n.__reactInternalMemoizedMergedChildContext=o,s(c,t),s(u,t),a(u,o,t)}else s(c,t);a(c,e,t)},findCurrentUnmaskedContext:function(t){for(2!==Ft(t)||2!==t.tag?r("170"):void 0;3!==t.tag;){if(n(t))return t.stateNode.__reactInternalMemoizedMergedChildContext;(t=t.return)||r("171")}return t.stateNode.context}}}function Me(t){var e=t.createCursor,n=t.push,r=t.pop,i=e(null),o=e(null),a=e(0);return{pushProvider:function(t){var e=t.type._context;n(a,e._changedBits,t),n(o,e._currentValue,t),n(i,t,t),e._currentValue=t.pendingProps.value,e._changedBits=t.stateNode},popProvider:function(t){var e=a.current,n=o.current;r(i,t),r(o,t),r(a,t),t=t.type._context,t._currentValue=n,t._changedBits=e}}}function Te(){var t=[],e=-1;return{createCursor:function(t){return{current:t}},isEmpty:function(){return-1===e},pop:function(n){0>e||(n.current=t[e],t[e]=null,e--)},push:function(n,r){e++,t[e]=n.current,n.current=r},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}function ke(t){function e(){if(null!==Q)for(var t=Q.return;null!==t;)P(t),t=t.return;tt=null,et=0,Q=null,it=!1}function n(t){return null!==at&&at.has(t)}function i(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(512&t.effectTag)){e=k(e,t,et);var i=t;if(1073741823===et||1073741823!==i.expirationTime){t:switch(i.tag){case 3:case 2:var o=i.updateQueue;o=null===o?0:o.expirationTime;break t;default:o=0}for(var a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==e)return e;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==r)return r;if(null===n){it=!0;break}t=n}else{if(null!==(t=F(t)))return t.effectTag&=2559,t;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;t=n}}return null}function o(t){var e=T(t.alternate,t,et);return null===e&&(e=i(t)),sr.current=null,e}function a(t,n,a){J&&r("243"),J=!0,n===et&&t===tt&&null!==Q||(e(),tt=t,et=n,Q=Qt(tt.current,null,et),t.pendingCommitExpirationTime=0);for(var s=!1;;){try{if(a)for(;null!==Q&&!x();)Q=o(Q);else for(;null!==Q;)Q=o(Q)}catch(t){if(null===Q){s=!0,E(t);break}a=Q;var u=a.return;if(null===u){s=!0,E(t);break}O(u,a,t),Q=i(a)}break}return J=!1,s||null!==Q?null:it?(t.pendingCommitExpirationTime=n,t.current.alternate):void r("262")}function s(t,e,n,r){t={value:n,source:t,stack:ot(t)},he(e,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:t,next:null}),l(e,r)}function u(t,e){t:{J&&!rt&&r("263");for(var i=t.return;null!==i;){switch(i.tag){case 2:var o=i.stateNode;if("function"===typeof i.type.getDerivedStateFromCatch||"function"===typeof o.componentDidCatch&&!n(o)){s(t,i,e,1),t=void 0;break t}break;case 3:s(t,i,e,1),t=void 0;break t}i=i.return}3===t.tag&&s(t,t,e,1),t=void 0}return t}function c(t){return t=0!==Z?Z:J?rt?1:et:1&t.mode?_t?10*(1+((h()+15)/10|0)):25*(1+((h()+500)/25|0)):1,_t&&(0===pt||t>pt)&&(pt=t),t}function l(t,n){t:{for(;null!==t;){if((0===t.expirationTime||t.expirationTime>n)&&(t.expirationTime=n),null!==t.alternate&&(0===t.alternate.expirationTime||t.alternate.expirationTime>n)&&(t.alternate.expirationTime=n),null===t.return){if(3!==t.tag){n=void 0;break t}var i=t.stateNode;!J&&0!==et&&n<et&&e(),J&&!rt&&tt===i||p(i,n),At>Et&&r("185")}t=t.return}n=void 0}return n}function h(){return Y=z()-q,X=2+(Y/10|0)}function f(t,e,n,r,i){var o=Z;Z=1;try{return t(e,n,r,i)}finally{Z=o}}function d(t){if(0!==ct){if(t>ct)return;V(lt)}var e=z()-q;ct=t,lt=H(m,{timeout:10*(t-2)-e})}function p(t,e){if(null===t.nextScheduledRoot)t.remainingExpirationTime=e,null===ut?(st=ut=t,t.nextScheduledRoot=t):(ut=ut.nextScheduledRoot=t,ut.nextScheduledRoot=st);else{var n=t.remainingExpirationTime;(0===n||e<n)&&(t.remainingExpirationTime=e)}ht||(bt?wt&&(ft=t,dt=1,w(t,1,!1)):1===e?v():d(e))}function g(){var t=0,e=null;if(null!==ut)for(var n=ut,i=st;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===ut)&&r("244"),i===i.nextScheduledRoot){st=ut=i.nextScheduledRoot=null;break}if(i===st)st=o=i.nextScheduledRoot,ut.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===ut){ut=n,ut.nextScheduledRoot=st,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===t||o<t)&&(t=o,e=i),i===ut)break;n=i,i=i.nextScheduledRoot}}n=ft,null!==n&&n===e&&1===t?At++:At=0,ft=e,dt=t}function m(t){y(0,!0,t)}function v(){y(1,!1,null)}function y(t,e,n){if(yt=n,g(),e)for(;null!==ft&&0!==dt&&(0===t||t>=dt)&&(!gt||h()>=dt);)w(ft,dt,!gt),g();else for(;null!==ft&&0!==dt&&(0===t||t>=dt);)w(ft,dt,!1),g();null!==yt&&(ct=0,lt=-1),0!==dt&&d(dt),yt=null,gt=!1,b()}function b(){if(At=0,null!==xt){var t=xt;xt=null;for(var e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){mt||(mt=!0,vt=t)}}}if(mt)throw t=vt,vt=null,mt=!1,t}function w(t,e,n){ht&&r("245"),ht=!0,n?(n=t.finishedWork,null!==n?_(t,n,e):(t.finishedWork=null,null!==(n=a(t,e,!0))&&(x()?t.finishedWork=n:_(t,n,e)))):(n=t.finishedWork,null!==n?_(t,n,e):(t.finishedWork=null,null!==(n=a(t,e,!1))&&_(t,n,e))),ht=!1}function _(t,e,n){var i=t.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===xt?xt=[i]:xt.push(i),i._defer))return t.finishedWork=e,void(t.remainingExpirationTime=0);t.finishedWork=null,rt=J=!0,n=e.stateNode,n.current===e&&r("177"),i=n.pendingCommitExpirationTime,0===i&&r("261"),n.pendingCommitExpirationTime=0;var o=h();if(sr.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var a=e.firstEffect}else a=e;else a=e.firstEffect;for(W(n.containerInfo),nt=a;null!==nt;){var s=!1,c=void 0;try{for(;null!==nt;)2048&nt.effectTag&&L(nt.alternate,nt),nt=nt.nextEffect}catch(t){s=!0,c=t}s&&(null===nt&&r("178"),u(nt,c),null!==nt&&(nt=nt.nextEffect))}for(nt=a;null!==nt;){s=!1,c=void 0;try{for(;null!==nt;){var l=nt.effectTag;if(16&l&&R(nt),128&l){var f=nt.alternate;null!==f&&$(f)}switch(14&l){case 2:D(nt),nt.effectTag&=-3;break;case 6:D(nt),nt.effectTag&=-3,I(nt.alternate,nt);break;case 4:I(nt.alternate,nt);break;case 8:B(nt)}nt=nt.nextEffect}}catch(t){s=!0,c=t}s&&(null===nt&&r("178"),u(nt,c),null!==nt&&(nt=nt.nextEffect))}for(G(n.containerInfo),n.current=e,nt=a;null!==nt;){l=!1,f=void 0;try{for(a=n,s=o,c=i;null!==nt;){var d=nt.effectTag;36&d&&N(a,nt.alternate,nt,s,c),256&d&&j(nt,E),128&d&&U(nt);var p=nt.nextEffect;nt.nextEffect=null,nt=p}}catch(t){l=!0,f=t}l&&(null===nt&&r("178"),u(nt,f),null!==nt&&(nt=nt.nextEffect))}J=rt=!1,"function"===typeof ae&&ae(e.stateNode),e=n.current.expirationTime,0===e&&(at=null),t.remainingExpirationTime=e}function x(){return!(null===yt||yt.timeRemaining()>Ct)&&(gt=!0)}function E(t){null===ft&&r("246"),ft.remainingExpirationTime=0,mt||(mt=!0,vt=t)}var A=Te(),C=Ae(t,A),S=Se(A);A=Me(A);var M=Ce(t),T=be(t,C,S,A,M,l,c).beginWork,k=we(t,C,S,A,M).completeWork;C=_e(C,S,A,l,n);var O=C.throwException,F=C.unwindWork,P=C.unwindInterruptedWork;C=Ee(t,u,l,c,function(t){null===at?at=new Set([t]):at.add(t)},h);var L=C.commitBeforeMutationLifeCycles,R=C.commitResetTextContent,D=C.commitPlacement,B=C.commitDeletion,I=C.commitWork,N=C.commitLifeCycles,j=C.commitErrorLogging,U=C.commitAttachRef,$=C.commitDetachRef,z=t.now,H=t.scheduleDeferredCallback,V=t.cancelDeferredCallback,W=t.prepareForCommit,G=t.resetAfterCommit,q=z(),X=2,Y=q,K=0,Z=0,J=!1,Q=null,tt=null,et=0,nt=null,rt=!1,it=!1,at=null,st=null,ut=null,ct=0,lt=-1,ht=!1,ft=null,dt=0,pt=0,gt=!1,mt=!1,vt=null,yt=null,bt=!1,wt=!1,_t=!1,xt=null,Et=1e3,At=0,Ct=1;return{recalculateCurrentTime:h,computeExpirationForFiber:c,scheduleWork:l,requestWork:p,flushRoot:function(t,e){ht&&r("253"),ft=t,dt=e,w(t,e,!1),v(),b()},batchedUpdates:function(t,e){var n=bt;bt=!0;try{return t(e)}finally{(bt=n)||ht||v()}},unbatchedUpdates:function(t,e){if(bt&&!wt){wt=!0;try{return t(e)}finally{wt=!1}}return t(e)},flushSync:function(t,e){ht&&r("187");var n=bt;bt=!0;try{return f(t,e)}finally{bt=n,v()}},flushControlled:function(t){var e=bt;bt=!0;try{f(t)}finally{(bt=e)||ht||y(1,!1,null)}},deferredUpdates:function(t){var e=Z;Z=25*(1+((h()+500)/25|0));try{return t()}finally{Z=e}},syncUpdates:f,interactiveUpdates:function(t,e,n){if(_t)return t(e,n);bt||ht||0===pt||(y(pt,!1,null),pt=0);var r=_t,i=bt;bt=_t=!0;try{return t(e,n)}finally{_t=r,(bt=i)||ht||v()}},flushInteractiveUpdates:function(){ht||0===pt||(y(pt,!1,null),pt=0)},computeUniqueAsyncExpiration:function(){var t=25*(1+((h()+500)/25|0));return t<=K&&(t=K+1),K=t},legacyContext:S}}function Oe(t){function e(t,e,n,r,i,o){if(r=e.current,n){n=n._reactInternalFiber;var s=u(n);n=c(n)?l(n,s):s}else n=yn;return null===e.context?e.context=n:e.pendingContext=n,e=o,he(r,{expirationTime:i,partialState:{element:t},callback:void 0===e?null:e,isReplace:!1,isForced:!1,capturedValue:null,next:null}),a(r,i),i}var n=t.getPublicInstance;t=ke(t);var i=t.recalculateCurrentTime,o=t.computeExpirationForFiber,a=t.scheduleWork,s=t.legacyContext,u=s.findCurrentUnmaskedContext,c=s.isContextProvider,l=s.processChildContext;return{createContainer:function(t,e,n){return e=new Jt(3,null,null,e?3:0),t={current:e,containerInfo:t,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},e.stateNode=t},updateContainer:function(t,n,r,a){var s=n.current,u=i();return s=o(s),e(t,n,r,u,s,a)},updateContainerAtExpirationTime:function(t,n,r,o,a){return e(t,n,r,i(),o,a)},flushRoot:t.flushRoot,requestWork:t.requestWork,computeUniqueAsyncExpiration:t.computeUniqueAsyncExpiration,batchedUpdates:t.batchedUpdates,unbatchedUpdates:t.unbatchedUpdates,deferredUpdates:t.deferredUpdates,syncUpdates:t.syncUpdates,interactiveUpdates:t.interactiveUpdates,flushInteractiveUpdates:t.flushInteractiveUpdates,flushControlled:t.flushControlled,flushSync:t.flushSync,getPublicRootInstance:function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return n(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:function(t){var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?r("188"):r("268",Object.keys(t))),t=Dt(e),null===t?null:t.stateNode},findHostInstanceWithNoPortals:function(t){return t=Bt(t),null===t?null:t.stateNode},injectIntoDevTools:function(t){var e=t.findFiberByHostInstance;return oe(dn({},t,{findHostInstanceByFiber:function(t){return t=Dt(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}}}function Fe(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:fr,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Pe(t){var e="";return hn.Children.forEach(t,function(t){null==t||"string"!==typeof t&&"number"!==typeof t||(e+=t)}),e}function Le(t,e){return t=dn({children:void 0},e),(e=Pe(e.children))&&(t.children=e),t}function Re(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+n,e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function De(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}}function Be(t,e){return null!=e.dangerouslySetInnerHTML&&r("91"),dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ie(t,e){var n=e.value;null==n&&(n=e.defaultValue,e=e.children,null!=e&&(null!=n&&r("92"),Array.isArray(e)&&(1>=e.length||r("93"),e=e[0]),n=""+e),null==n&&(n="")),t._wrapperState={initialValue:""+n}}function Ne(t,e){var n=e.value;null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)}function je(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function Ue(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Ue(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function ze(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function He(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=e[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||$i.hasOwnProperty(i)&&$i[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}function Ve(t,e,n){e&&(Hi[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&r("137",t,n()),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&r("60"),"object"===cn(e.dangerouslySetInnerHTML)&&"__html"in e.dangerouslySetInnerHTML||r("61")),null!=e.style&&"object"!==cn(e.style)&&r("62",n()))}function We(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ge(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=qt(t);e=Cn[e];for(var r=0;r<e.length;r++){var i=e[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?zt("topScroll","scroll",t):"topFocus"===i||"topBlur"===i?(zt("topFocus","focus",t),zt("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(J("cancel",!0)&&zt("topCancel","cancel",t),n.topCancel=!0):"topClose"===i?(J("close",!0)&&zt("topClose","close",t),n.topClose=!0):ei.hasOwnProperty(i)&&$t(i,ei[i],t),n[i]=!0)}}function qe(t,e,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===Ni.html&&(r=Ue(t)),r===Ni.html?"script"===t?(t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):t="string"===typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(r,t),t}function Xe(t,e){return(9===e.nodeType?e:e.ownerDocument).createTextNode(t)}function Ye(t,e,n,r){var i=We(e,n);switch(e){case"iframe":case"object":$t("topLoad","load",t);var o=n;break;case"video":case"audio":for(o in ni)ni.hasOwnProperty(o)&&$t(o,ni[o],t);o=n;break;case"source":$t("topError","error",t),o=n;break;case"img":case"image":case"link":$t("topError","error",t),$t("topLoad","load",t),o=n;break;case"form":$t("topReset","reset",t),$t("topSubmit","submit",t),o=n;break;case"details":$t("topToggle","toggle",t),o=n;break;case"input":dt(t,n),o=ft(t,n),$t("topInvalid","invalid",t),Ge(r,"onChange");break;case"option":o=Le(t,n);break;case"select":De(t,n),o=dn({},n,{value:void 0}),$t("topInvalid","invalid",t),Ge(r,"onChange");break;case"textarea":Ie(t,n),o=Be(t,n),$t("topInvalid","invalid",t),Ge(r,"onChange");break;default:o=n}Ve(e,o,Vi);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?He(t,u,Vi):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&Ui(t,u):"children"===a?"string"===typeof u?("textarea"!==e||""!==u)&&ze(t,u):"number"===typeof u&&ze(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(An.hasOwnProperty(a)?null!=u&&Ge(r,a):null!=u&&ht(t,a,u,i))}switch(e){case"input":et(t),mt(t,n);break;case"textarea":et(t),je(t,n);break;case"option":null!=n.value&&t.setAttribute("value",n.value);break;case"select":t.multiple=!!n.multiple,e=n.value,null!=e?Re(t,!!n.multiple,e,!1):null!=n.defaultValue&&Re(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=pn)}}function Ke(t,e,n,r,i){var o=null;switch(e){case"input":n=ft(t,n),r=ft(t,r),o=[];break;case"option":n=Le(t,n),r=Le(t,r),o=[];break;case"select":n=dn({},n,{value:void 0}),r=dn({},r,{value:void 0}),o=[];break;case"textarea":n=Be(t,n),r=Be(t,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(t.onclick=pn)}Ve(e,r,Vi),e=t=void 0;var a=null;for(t in n)if(!r.hasOwnProperty(t)&&n.hasOwnProperty(t)&&null!=n[t])if("style"===t){var s=n[t];for(e in s)s.hasOwnProperty(e)&&(a||(a={}),a[e]="")}else"dangerouslySetInnerHTML"!==t&&"children"!==t&&"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&"autoFocus"!==t&&(An.hasOwnProperty(t)?o||(o=[]):(o=o||[]).push(t,null));for(t in r){var u=r[t];if(s=null!=n?n[t]:void 0,r.hasOwnProperty(t)&&u!==s&&(null!=u||null!=s))if("style"===t)if(s){for(e in s)!s.hasOwnProperty(e)||u&&u.hasOwnProperty(e)||(a||(a={}),a[e]="");for(e in u)u.hasOwnProperty(e)&&s[e]!==u[e]&&(a||(a={}),a[e]=u[e])}else a||(o||(o=[]),o.push(t,a)),a=u;else"dangerouslySetInnerHTML"===t?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(o=o||[]).push(t,""+u)):"children"===t?s===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(t,""+u):"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&(An.hasOwnProperty(t)?(null!=u&&Ge(i,t),o||s===u||(o=[])):(o=o||[]).push(t,u))}return a&&(o=o||[]).push("style",a),o}function Ze(t,e,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&pt(t,i),We(n,r),r=We(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?He(t,s,Vi):"dangerouslySetInnerHTML"===a?Ui(t,s):"children"===a?ze(t,s):ht(t,a,s,r)}switch(n){case"input":gt(t,i);break;case"textarea":Ne(t,i);break;case"select":t._wrapperState.initialValue=void 0,e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?Re(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Re(t,!!i.multiple,i.defaultValue,!0):Re(t,!!i.multiple,i.multiple?[]:"",!1))}}function Je(t,e,n,r,i){switch(e){case"iframe":case"object":$t("topLoad","load",t);break;case"video":case"audio":for(var o in ni)ni.hasOwnProperty(o)&&$t(o,ni[o],t);break;case"source":$t("topError","error",t);break;case"img":case"image":case"link":$t("topError","error",t),$t("topLoad","load",t);break;case"form":$t("topReset","reset",t),$t("topSubmit","submit",t);break;case"details":$t("topToggle","toggle",t);break;case"input":dt(t,n),$t("topInvalid","invalid",t),Ge(i,"onChange");break;case"select":De(t,n),$t("topInvalid","invalid",t),Ge(i,"onChange");break;case"textarea":Ie(t,n),$t("topInvalid","invalid",t),Ge(i,"onChange")}Ve(e,n,Vi),r=null;for(var a in n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"===typeof o?t.textContent!==o&&(r=["children",o]):"number"===typeof o&&t.textContent!==""+o&&(r=["children",""+o]):An.hasOwnProperty(a)&&null!=o&&Ge(i,a));switch(e){case"input":et(t),mt(t,n);break;case"textarea":et(t),je(t,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(t.onclick=pn)}return r}function Qe(t,e){return t.nodeValue!==e}function tn(t){this._expirationTime=Xi.computeUniqueAsyncExpiration(),this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function en(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function nn(t,e,n){this._internalRoot=Xi.createContainer(t,e,n)}function rn(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function on(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function an(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new nn(t,!1,e)}function sn(t,e,n,i,o){rn(n)||r("200");var a=n._reactRootContainer;if(a){if("function"===typeof o){var s=o;o=function(){var t=Xi.getPublicRootInstance(a._internalRoot);s.call(t)}}null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)}else{if(a=n._reactRootContainer=an(n,i),"function"===typeof o){var u=o;o=function(){var t=Xi.getPublicRootInstance(a._internalRoot);u.call(t)}}Xi.unbatchedUpdates(function(){null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)})}return Xi.getPublicRootInstance(a._internalRoot)}function un(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return rn(e)||r("200"),Fe(t,e,null,n)}var cn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln=n(26),hn=n(0),fn=n(124),dn=n(25),pn=n(27),gn=n(125),mn=n(126),vn=n(127),yn=n(56);hn||r("227");var bn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(t,e,n,r,o,a,s,u,c){i.apply(bn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,r,i,o,a,s,u){if(bn.invokeGuardedCallback.apply(this,arguments),bn.hasCaughtError()){var c=bn.clearCaughtError();bn._hasRethrowError||(bn._hasRethrowError=!0,bn._rethrowError=c)}},rethrowCaughtError:function(){return o.apply(bn,arguments)},hasCaughtError:function(){return bn._hasCaughtError},clearCaughtError:function(){if(bn._hasCaughtError){var t=bn._caughtError;return bn._caughtError=null,bn._hasCaughtError=!1,t}r("198")}},wn=null,_n={},xn=[],En={},An={},Cn={},Sn=Object.freeze({plugins:xn,eventNameDispatchConfigs:En,registrationNameModules:An,registrationNameDependencies:Cn,possibleRegistrationNames:null,injectEventPluginOrder:u,injectEventPluginsByName:c}),Mn=null,Tn=null,kn=null,On=null,Fn={injectEventPluginOrder:u,injectEventPluginsByName:c},Pn=Object.freeze({injection:Fn,getListener:m,runEventsInBatch:v,runExtractedEventsInBatch:y}),Ln=Math.random().toString(36).slice(2),Rn="__reactInternalInstance$"+Ln,Dn="__reactEventHandlers$"+Ln,Bn=Object.freeze({precacheFiberNode:function(t,e){e[Rn]=t},getClosestInstanceFromNode:b,getInstanceFromNode:function(t){return t=t[Rn],!t||5!==t.tag&&6!==t.tag?null:t},getNodeFromInstance:w,getFiberCurrentPropsFromNode:_,updateFiberProps:function(t,e){t[Dn]=e}}),In=Object.freeze({accumulateTwoPhaseDispatches:k,accumulateTwoPhaseDispatchesSkipTarget:function(t){f(t,S)},accumulateEnterLeaveDispatches:O,accumulateDirectDispatches:function(t){f(t,T)}}),Nn=null,jn={_root:null,_startText:null,_fallbackText:null},Un="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),$n={type:null,target:null,currentTarget:pn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};dn(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=pn.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=pn.thatReturnsTrue)},persist:function(){this.isPersistent=pn.thatReturnsTrue},isPersistent:pn.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<Un.length;e++)this[Un[e]]=null}}),R.Interface=$n,R.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return dn(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=dn({},r.Interface,t),n.extend=r.extend,I(n),n},I(R);var zn=R.extend({data:null}),Hn=R.extend({data:null}),Vn=[9,13,27,32],Wn=fn.canUseDOM&&"CompositionEvent"in window,Gn=null;fn.canUseDOM&&"documentMode"in document&&(Gn=document.documentMode);var qn=fn.canUseDOM&&"TextEvent"in window&&!Gn,Xn=fn.canUseDOM&&(!Wn||Gn&&8<Gn&&11>=Gn),Yn=String.fromCharCode(32),Kn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Zn=!1,Jn=!1,Qn={eventTypes:Kn,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(Wn)t:{switch(t){case"topCompositionStart":i=Kn.compositionStart;break t;case"topCompositionEnd":i=Kn.compositionEnd;break t;case"topCompositionUpdate":i=Kn.compositionUpdate;break t}i=void 0}else Jn?N(t,n)&&(i=Kn.compositionEnd):"topKeyDown"===t&&229===n.keyCode&&(i=Kn.compositionStart);return i?(Xn&&(Jn||i!==Kn.compositionStart?i===Kn.compositionEnd&&Jn&&(o=P()):(jn._root=r,jn._startText=L(),Jn=!0)),i=zn.getPooled(i,e,n,r),o?i.data=o:null!==(o=j(n))&&(i.data=o),k(i),o=i):o=null,(t=qn?U(t,n):$(t,n))?(e=Hn.getPooled(Kn.beforeInput,e,n,r),e.data=t,k(e)):e=null,null===o?e:null===e?o:[o,e]}},tr=null,er={injectFiberControlledHostComponent:function(t){tr=t}},nr=null,rr=null,ir=Object.freeze({injection:er,enqueueStateRestore:H,needsStateRestore:V,restoreStateIfNeeded:W}),or=!1,ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},sr=hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ur="function"===typeof Symbol&&Symbol.for,cr=ur?Symbol.for("react.element"):60103,lr=ur?Symbol.for("react.call"):60104,hr=ur?Symbol.for("react.return"):60105,fr=ur?Symbol.for("react.portal"):60106,dr=ur?Symbol.for("react.fragment"):60107,pr=ur?Symbol.for("react.strict_mode"):60108,gr=ur?Symbol.for("react.provider"):60109,mr=ur?Symbol.for("react.context"):60110,vr=ur?Symbol.for("react.async_mode"):60111,yr=ur?Symbol.for("react.forward_ref"):60112,br="function"===typeof Symbol&&Symbol.iterator,wr=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_r={},xr={},Er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Er[t]=new ct(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Er[e]=new ct(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){Er[t]=new ct(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(t){Er[t]=new ct(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Er[t]=new ct(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){Er[t]=new ct(t,3,!0,t.toLowerCase(),null)}),["capture","download"].forEach(function(t){Er[t]=new ct(t,4,!1,t.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(t){Er[t]=new ct(t,6,!1,t.toLowerCase(),null)}),["rowSpan","start"].forEach(function(t){Er[t]=new ct(t,5,!1,t.toLowerCase(),null)});var Ar=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ar,lt);Er[e]=new ct(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ar,lt);Er[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ar,lt);Er[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),Er.tabIndex=new ct("tabIndex",1,!1,"tabindex",null);var Cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Sr=null,Mr=null,Tr=!1;fn.canUseDOM&&(Tr=J("input")&&(!document.documentMode||9<document.documentMode));var kr={eventTypes:Cr,_isInputEventSupported:Tr,extractEvents:function(t,e,n,r){var i=e?w(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=xt:K(i)?Tr?o=Tt:(o=St,a=Ct):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Mt),o&&(o=o(t,e)))return bt(o,n,r);a&&a(t,i,e),"topBlur"===t&&null!=e&&(t=e._wrapperState||i._wrapperState)&&t.controlled&&"number"===i.type&&vt(i,"number",i.value)}},Or=R.extend({view:null,detail:null}),Fr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Pr=Or.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ot,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Rr={eventTypes:Lr,extractEvents:function(t,e,n,r){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==t&&"topMouseOver"!==t)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===t?(t=e,e=(e=n.relatedTarget||n.toElement)?b(e):null):t=null,t===e)return null;var o=null==t?i:w(t);i=null==e?i:w(e);var a=Pr.getPooled(Lr.mouseLeave,t,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,n=Pr.getPooled(Lr.mouseEnter,e,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=o,O(a,n,t,e),[a,n]}},Dr=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Br=R.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ir=Or.extend({relatedTarget:null}),Nr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ur=Or.extend({key:function(t){if(t.key){var e=Nr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=It(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?jr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ot,charCode:function(t){return"keypress"===t.type?It(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?It(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),$r=Pr.extend({dataTransfer:null}),zr=Or.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ot}),Hr=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Vr=Pr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),Wr={},Gr={};"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(t){Nt(t,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(t){Nt(t,!1)});var qr={eventTypes:Wr,isInteractiveTopLevelEventType:function(t){return void 0!==(t=Gr[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=Gr[t];if(!i)return null;switch(t){case"topKeyPress":if(0===It(n))return null;case"topKeyDown":case"topKeyUp":t=Ur;break;case"topBlur":case"topFocus":t=Ir;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":t=Pr;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":t=$r;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":t=zr;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":t=Dr;break;case"topTransitionEnd":t=Hr;break;case"topScroll":t=Or;break;case"topWheel":t=Vr;break;case"topCopy":case"topCut":case"topPaste":t=Br;break;default:t=R}return e=t.getPooled(i,e,n,r),k(e),e}},Xr=qr.isInteractiveTopLevelEventType,Yr=[],Kr=!0,Zr=Object.freeze({get _enabled(){return Kr},setEnabled:Ut,isEnabled:function(){return Kr},trapBubbledEvent:$t,trapCapturedEvent:zt,dispatchEvent:Vt}),Jr={animationend:Wt("Animation","AnimationEnd"),animationiteration:Wt("Animation","AnimationIteration"),animationstart:Wt("Animation","AnimationStart"),transitionend:Wt("Transition","TransitionEnd")},Qr={},ti={};fn.canUseDOM&&(ti=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);var ei={topAnimationEnd:Gt("animationend"),topAnimationIteration:Gt("animationiteration"),topAnimationStart:Gt("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Gt("transitionend"),topWheel:"wheel"},ni={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ri={},ii=0,oi="_reactListenersID"+(""+Math.random()).slice(2),ai=fn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,si={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},ui=null,ci=null,li=null,hi=!1,fi={eventTypes:si,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=qt(o),i=Cn.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?w(e):window,t){case"topFocus":(K(o)||"true"===o.contentEditable)&&(ui=o,ci=e,li=null);break;case"topBlur":li=ci=ui=null;break;case"topMouseDown":hi=!0;break;case"topContextMenu":case"topMouseUp":return hi=!1,Zt(n,r);case"topSelectionChange":if(ai)break;case"topKeyDown":case"topKeyUp":return Zt(n,r)}return null}};Fn.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Mn=Bn.getFiberCurrentPropsFromNode,Tn=Bn.getInstanceFromNode,kn=Bn.getNodeFromInstance,Fn.injectEventPluginsByName({SimpleEventPlugin:qr,EnterLeaveEventPlugin:Rr,ChangeEventPlugin:kr,SelectEventPlugin:fi,BeforeInputEventPlugin:Qn});var di=null,pi=null;new Set;var gi=void 0,mi=void 0,vi=Array.isArray,yi=ye(!0),bi=ye(!1),wi={},_i=Object.freeze({default:Oe}),xi=_i&&Oe||_i,Ei=xi.default?xi.default:xi,Ai="object"===("undefined"===typeof performance?"undefined":cn(performance))&&"function"===typeof performance.now,Ci=void 0;Ci=Ai?function(){return performance.now()}:function(){return Date.now()};var Si=void 0,Mi=void 0;if(fn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Ti=null,ki=!1,Oi=-1,Fi=!1,Pi=0,Li=33,Ri=33,Di=void 0;Di=Ai?{didTimeout:!1,timeRemaining:function(){var t=Pi-performance.now();return 0<t?t:0}}:{didTimeout:!1,timeRemaining:function(){var t=Pi-Date.now();return 0<t?t:0}};var Bi="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===Bi){if(ki=!1,t=Ci(),0>=Pi-t){if(!(-1!==Oi&&Oi<=t))return void(Fi||(Fi=!0,requestAnimationFrame(Ii)));Di.didTimeout=!0}else Di.didTimeout=!1;Oi=-1,t=Ti,Ti=null,null!==t&&t(Di)}},!1);var Ii=function(t){Fi=!1;var e=t-Pi+Ri;e<Ri&&Li<Ri?(8>e&&(e=8),Ri=e<Li?Li:e):Li=e,Pi=t+Ri,ki||(ki=!0,window.postMessage(Bi,"*"))};Si=function(t,e){return Ti=t,null!=e&&"number"===typeof e.timeout&&(Oi=Ci()+e.timeout),Fi||(Fi=!0,requestAnimationFrame(Ii)),0},Mi=function(){Ti=null,ki=!1,Oi=-1}}else Si=window.requestIdleCallback,Mi=window.cancelIdleCallback;else Si=function(t){return setTimeout(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})})},Mi=function(t){clearTimeout(t)};var Ni={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},ji=void 0,Ui=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n)})}:t}(function(t,e){if(t.namespaceURI!==Ni.svg||"innerHTML"in t)t.innerHTML=e;else{for(ji=ji||document.createElement("div"),ji.innerHTML="<svg>"+e+"</svg>",e=ji.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}),$i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zi=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(t){zi.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$i[e]=$i[t]})});var Hi=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Vi=pn.thatReturns(""),Wi=Object.freeze({createElement:qe,createTextNode:Xe,setInitialProperties:Ye,diffProperties:Ke,updateProperties:Ze,diffHydratedProperties:Je,diffHydratedText:Qe,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":if(gt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=_(i);o||r("90"),nt(i),gt(i,o)}}}break;case"textarea":Ne(t,n);break;case"select":null!=(e=n.value)&&Re(t,!!n.multiple,e,!1)}}});er.injectFiberControlledHostComponent(Wi);var Gi=null,qi=null;tn.prototype.render=function(t){this._defer||r("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new en;return Xi.updateContainerAtExpirationTime(t,e,null,n,i._onCommit),i},tn.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},tn.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||r("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,o=e;o!==this;)i=o,o=o._next;null===i&&r("251"),i._next=o._next,this._next=e,t.firstBatch=this}this._defer=!1,Xi.flushRoot(t,n),e=this._next,this._next=null,e=t.firstBatch=e,null!==e&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},tn.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},en.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},en.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&r("191",n),n()}}},nn.prototype.render=function(t,e){var n=this._internalRoot,r=new en;return e=void 0===e?null:e,null!==e&&r.then(e),Xi.updateContainer(t,n,null,r._onCommit),r},nn.prototype.unmount=function(t){var e=this._internalRoot,n=new en;return t=void 0===t?null:t,null!==t&&n.then(t),Xi.updateContainer(null,e,null,n._onCommit),n},nn.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new en;return n=void 0===n?null:n,null!==n&&i.then(n),Xi.updateContainer(e,r,t,i._onCommit),i},nn.prototype.createBatch=function(){var t=new tn(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime<=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t};var Xi=Ei({getRootHostContext:function(t){var e=t.nodeType;switch(e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$e(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$e(t,e)}return t},getChildHostContext:function(t,e){return $e(t,e)},getPublicInstance:function(t){return t},prepareForCommit:function(){Gi=Kr;var t=gn();if(Kt(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{e.nodeType,i.nodeType}catch(t){e=null;break t}var o=0,a=-1,s=-1,u=0,c=0,l=t,h=null;e:for(;;){for(var f;l!==e||0!==r&&3!==l.nodeType||(a=o+r),l!==i||0!==n&&3!==l.nodeType||(s=o+n),3===l.nodeType&&(o+=l.nodeValue.length),null!==(f=l.firstChild);)h=l,l=f;for(;;){if(l===t)break e;if(h===e&&++u===r&&(a=o),h===i&&++c===n&&(s=o),null!==(f=l.nextSibling))break;l=h,h=l.parentNode}l=f}e=-1===a||-1===s?null:{start:a,end:s}}else e=null}e=e||{start:0,end:0}}else e=null;qi={focusedElem:t,selectionRange:e},Ut(!1)},resetAfterCommit:function(){var t=qi,e=gn(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&vn(document.documentElement,n)){if(Kt(n))if(e=r.start,t=r.end,void 0===t&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(window.getSelection){e=window.getSelection();var i=n[F()].length;t=Math.min(r.start,i),r=void 0===r.end?t:Math.min(r.end,i),!e.extend&&t>r&&(i=r,r=t,t=i),i=Yt(n,t);var o=Yt(n,r);if(i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)){var a=document.createRange();a.setStart(i.node,i.offset),e.removeAllRanges(),t>r?(e.addRange(a),e.extend(o.node,o.offset)):(a.setEnd(o.node,o.offset),e.addRange(a))}}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}qi=null,Ut(Gi),Gi=null},createInstance:function(t,e,n,r,i){return t=qe(t,e,n,r),t[Rn]=i,t[Dn]=e,t},appendInitialChild:function(t,e){t.appendChild(e)},finalizeInitialChildren:function(t,e,n,r){return Ye(t,e,n,r),on(e,n)},prepareUpdate:function(t,e,n,r,i){return Ke(t,e,n,r,i)},shouldSetTextContent:function(t,e){return"textarea"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===cn(e.dangerouslySetInnerHTML)&&null!==e.dangerouslySetInnerHTML&&"string"===typeof e.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(t,e){return!!e.hidden},createTextInstance:function(t,e,n,r){return t=Xe(t,e),t[Rn]=r,t},now:Ci,mutation:{commitMount:function(t,e,n){on(e,n)&&t.focus()},commitUpdate:function(t,e,n,r,i){t[Dn]=i,Ze(t,e,n,r,i)},resetTextContent:function(t){ze(t,"")},commitTextUpdate:function(t,e,n){t.nodeValue=n},appendChild:function(t,e){t.appendChild(e)},appendChildToContainer:function(t,e){8===t.nodeType?t.parentNode.insertBefore(e,t):t.appendChild(e)},insertBefore:function(t,e,n){t.insertBefore(e,n)},insertInContainerBefore:function(t,e,n){8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){8===t.nodeType?t.parentNode.removeChild(e):t.removeChild(e)}},hydration:{canHydrateInstance:function(t,e){return 1!==t.nodeType||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t},canHydrateTextInstance:function(t,e){return""===e||3!==t.nodeType?null:t},getNextHydratableSibling:function(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},getFirstHydratableChild:function(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},hydrateInstance:function(t,e,n,r,i,o){return t[Rn]=o,t[Dn]=n,Je(t,e,n,i,r)},hydrateTextInstance:function(t,e,n){return t[Rn]=n,Qe(t,e)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Si,cancelDeferredCallback:Mi}),Yi=Xi;G=Yi.batchedUpdates,q=Yi.interactiveUpdates,X=Yi.flushInteractiveUpdates;var Ki={createPortal:un,findDOMNode:function(t){return null==t?null:1===t.nodeType?t:Xi.findHostInstance(t)},hydrate:function(t,e,n){return sn(null,t,e,!0,n)},render:function(t,e,n){return sn(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return(null==t||void 0===t._reactInternalFiber)&&r("38"),sn(t,e,n,!1,i)},unmountComponentAtNode:function(t){return rn(t)||r("40"),!!t._reactRootContainer&&(Xi.unbatchedUpdates(function(){sn(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return un.apply(void 0,arguments)},unstable_batchedUpdates:Xi.batchedUpdates,unstable_deferredUpdates:Xi.deferredUpdates,flushSync:Xi.flushSync,unstable_flushControlled:Xi.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Pn,EventPluginRegistry:Sn,EventPropagators:In,ReactControlledComponent:ir,ReactDOMComponentTree:Bn,ReactDOMEventListener:Zr},unstable_createRoot:function(t,e){return new nn(t,!0,null!=e&&!0===e.hydrate)}};Xi.injectIntoDevTools({findFiberByHostInstance:b,bundleType:0,version:"16.3.2",rendererPackageName:"react-dom"});var Zi=Object.freeze({default:Ki}),Ji=Zi&&Ki||Zi;t.exports=Ji.default?Ji.default:Ji},function(t,e,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},function(t,e,n){"use strict";function r(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==("undefined"===typeof t?"undefined":o(t))||null===t||"object"!==("undefined"===typeof e?"undefined":o(e))||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(!a.call(e,n[s])||!r(t[n[s]],e[n[s]]))return!1;return!0}var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.prototype.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(128);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(129);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"===typeof n.Node?t instanceof n.Node:"object"===("undefined"===typeof t?"undefined":i(t))&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName))}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":l(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),u=n.n(s),c=n(57),l=(n(29),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});e.a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],s=n||e+"Subscription",l=function(t){function n(o,a){r(this,n);var s=i(this,t.call(this,o,a));return s[e]=o.store,s}return o(n,t),n.prototype.getChildContext=function(){var t;return t={},t[e]=this[e],t[s]=null,t},n.prototype.render=function(){return a.Children.only(this.props.children)},n}(a.Component);return l.propTypes={store:c.a.isRequired,children:u.a.element.isRequired},l.childContextTypes=(t={},t[e]=c.a.isRequired,t[s]=c.b,t),l}()},function(t,e,n){"use strict";var r=n(27),i=n(26),o=n(132);t.exports=function(){function t(t,e,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){var t=[],e=[];return{clear:function(){e=o,t=o},notify:function(){for(var n=t=e,r=0;r<n.length;r++)n[r]()},get:function(){return e},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==o&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}n.d(e,"a",function(){return s});var o=null,a={notify:function(){}},s=function(){function t(e,n,i){r(this,t),this.store=e,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=a}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=i())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},t}()},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(e,r){throw new Error("Invalid value of type "+("undefined"===typeof t?"undefined":f(t))+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function o(t,e){return t===e}var a=n(58),s=n(135),u=n(136),c=n(151),l=n(152),h=n(153),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?a.a:e,f=t.mapStateToPropsFactories,p=void 0===f?c.a:f,g=t.mapDispatchToPropsFactories,m=void 0===g?u.a:g,v=t.mergePropsFactories,y=void 0===v?l.a:v,b=t.selectorFactory,w=void 0===b?h.a:b;return function(t,e,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=u.pure,l=void 0===c||c,h=u.areStatesEqual,f=void 0===h?o:h,g=u.areOwnPropsEqual,v=void 0===g?s.a:g,b=u.areStatePropsEqual,_=void 0===b?s.a:b,x=u.areMergedPropsEqual,E=void 0===x?s.a:x,A=r(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=i(t,p,"mapStateToProps"),S=i(e,m,"mapDispatchToProps"),M=i(a,y,"mergeProps");return n(w,d({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:C,initMapDispatchToProps:S,initMergeProps:M,pure:l,areStatesEqual:f,areOwnPropsEqual:v,areStatePropsEqual:_,areMergedPropsEqual:E},A))}}()},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==("undefined"===typeof t?"undefined":o(t))||null===t||"object"!==("undefined"===typeof e?"undefined":o(e))||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(!a.call(e,n[s])||!r(t[n[s]],e[n[s]]))return!1;return!0}e.a=i;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function r(t){return"function"===typeof t?Object(s.b)(t,"mapDispatchToProps"):void 0}function i(t){return t?void 0:Object(s.a)(function(t){return{dispatch:t}})}function o(t){return t&&"object"===("undefined"===typeof t?"undefined":u(t))?Object(s.a)(function(e){return Object(a.b)(t,e)}):void 0}var a=n(13),s=n(64),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=[r,i,o]},function(t,e,n){"use strict";function r(t){return null==t?void 0===t?u:s:c&&c in Object(t)?Object(o.a)(t):Object(a.a)(t)}var i=n(61),o=n(140),a=n(141),s="[object Null]",u="[object Undefined]",c=i.a?i.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";var r=n(139),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="object"==("undefined"===typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,a=r.a||o||Function("return this")();e.a=a},function(t,e,n){"use strict";(function(t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==("undefined"===typeof t?"undefined":n(t))&&t&&t.Object===Object&&t;e.a=r}).call(e,n(6))},function(t,e,n){"use strict";function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(61),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i.a?i.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";function r(t){return o.call(t)}var i=Object.prototype,o=i.toString;e.a=r},function(t,e,n){"use strict";var r=n(143),i=Object(r.a)(Object.getPrototypeOf,Object);e.a=i},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}e.a=r},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==("undefined"===typeof t?"undefined":i(t))}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=r},function(t,e,n){"use strict";(function(t,r){var i,o=n(147);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:r;var a=Object(o.a)(i);e.a=a}).call(e,n(6),n(146)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function i(t){Object.keys(t).forEach(function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:a.a.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+a.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(t){for(var e=Object.keys(t),n={},o=0;o<e.length;o++){var a=e[o];"function"===typeof t[a]&&(n[a]=t[a])}var s=Object.keys(n),u=void 0;try{i(n)}catch(t){u=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(u)throw u;for(var i=!1,o={},a=0;a<s.length;a++){var c=s[a],l=n[c],h=t[c],f=l(h,e);if("undefined"===typeof f){var d=r(c,e);throw new Error(d)}o[c]=f,i=i||f!==h}return i?o:t}}e.a=o;var a=n(60);n(30),n(62)},function(t,e,n){"use strict";function r(t,e){return function(){return e(t.apply(void 0,arguments))}}function i(t,e){if("function"===typeof t)return r(t,e);if("object"!==("undefined"===typeof t?"undefined":o(t))||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":"undefined"===typeof t?"undefined":o(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),i={},a=0;a<n.length;a++){var s=n[a],u=t[s];"function"===typeof u&&(i[s]=r(u,e))}return i}e.a=i;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,a){var s=t(n,r,a),u=s.dispatch,c=[],l={getState:s.getState,dispatch:function(t){return u(t)}};return c=e.map(function(t){return t(l)}),u=i.a.apply(void 0,c)(s.dispatch),o({},s,{dispatch:u})}}}e.a=r;var i=n(63),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";function r(t){return"function"===typeof t?Object(o.b)(t,"mapStateToProps"):void 0}function i(t){return t?void 0:Object(o.a)(function(){return{}})}var o=n(64);e.a=[r,i]},function(t,e,n){"use strict";function r(t,e,n){return s({},n,t,e)}function i(t){return function(e,n){var r=(n.displayName,n.pure),i=n.areMergedPropsEqual,o=!1,a=void 0;return function(e,n,s){var u=t(e,n,s);return o?r&&i(u,a)||(a=u):(o=!0,a=u),a}}}function o(t){return"function"===typeof t?i(t):void 0}function a(t){return t?void 0:function(){return r}}var s=(n(65),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t});e.a=[o,a]},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e,n,r){return function(i,o){return n(t(i,o),e(r,o),o)}}function o(t,e,n,r,i){function o(i,o){return p=i,g=o,m=t(p,g),v=e(r,g),y=n(m,v,g),d=!0,y}function a(){return m=t(p,g),e.dependsOnOwnProps&&(v=e(r,g)),y=n(m,v,g)}function s(){return t.dependsOnOwnProps&&(m=t(p,g)),e.dependsOnOwnProps&&(v=e(r,g)),y=n(m,v,g)}function u(){var e=t(p,g),r=!f(e,m);return m=e,r&&(y=n(m,v,g)),y}function c(t,e){var n=!h(e,g),r=!l(t,p);return p=t,g=e,n&&r?a():n?s():r?u():y}var l=i.areStatesEqual,h=i.areOwnPropsEqual,f=i.areStatePropsEqual,d=!1,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;return function(t,e){return d?c(t,e):o(t,e)}}function a(t,e){var n=e.initMapStateToProps,a=e.initMapDispatchToProps,s=e.initMergeProps,u=r(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),c=n(t,u),l=a(t,u),h=s(t,u);return(u.pure?o:i)(c,l,h,t,u)}e.a=a;n(154)},function(t,e,n){"use strict";n(29)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":f(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":f(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(1),c=n.n(u),l=n(66),h=n(76),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.handleLocationChange=function(t){o.store.dispatch({type:h.a,payload:t})},a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){var t=this.props,e=t.store,n=t.history,r=t.isSSR;this.store=e||this.context.store,this.handleLocationChange(n.location),r||(this.unsubscribeFromHistory=n.listen(this.handleLocationChange))},e.prototype.componentWillUnmount=function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()},e.prototype.render=function(){return s.a.createElement(l.a,this.props)},e}(a.Component);d.propTypes={store:c.a.object,history:c.a.object.isRequired,children:c.a.node,isSSR:c.a.bool},d.contextTypes={store:c.a.object},e.a=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":i(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":i(t)},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(2),u=r(s),c=n(14),l=n(31),h=n(32),f=r(h),d=function(t,e,n){return Math.min(Math.max(t,e),n)},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,i=t.initialIndex,s=void 0===i?0:i,h=t.keyLength,p=void 0===h?6:h,g=(0,f.default)(),m=function(t){a(k,t),k.length=k.entries.length,g.notifyListeners(k.location,k.action)},v=function(){return Math.random().toString(36).substr(2,p)},y=d(s,0,r.length-1),b=r.map(function(t){return"string"===typeof t?(0,l.createLocation)(t,void 0,v()):(0,l.createLocation)(t,void 0,t.key||v())}),w=c.createPath,_=function(t,n){(0,u.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,l.createLocation)(t,n,v(),k.location);g.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=k.index,n=e+1,i=k.entries.slice(0);i.length>n?i.splice(n,i.length-n,r):i.push(r),m({action:"PUSH",location:r,index:n,entries:i})}})},x=function(t,n){(0,u.default)(!("object"===("undefined"===typeof t?"undefined":o(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,l.createLocation)(t,n,v(),k.location);g.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(k.entries[k.index]=r,m({action:"REPLACE",location:r}))})},E=function(t){var n=d(k.index+t,0,k.entries.length-1),r=k.entries[n];g.confirmTransitionTo(r,"POP",e,function(t){t?m({action:"POP",location:r,index:n}):m()})},A=function(){return E(-1)},C=function(){return E(1)},S=function(t){var e=k.index+t;return e>=0&&e<k.entries.length},M=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g.setPrompt(t)},T=function(t){return g.appendListener(t)},k={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:w,push:_,replace:x,go:E,goBack:A,goForward:C,canGo:S,block:M,listen:T};return k};e.default=p},function(t,e,n){"use strict";var r=(n(158),n(159),n(160),n(19));n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b});n(15)},function(t,e,n){"use strict";var r=n(2),i=(n.n(r),n(3)),o=(n.n(i),n(19),n(15),n(33),n(72),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});"function"===typeof Symbol&&o(Symbol.iterator),Object.assign},function(t,e,n){"use strict";var r=n(2),i=(n.n(r),n(3)),o=(n.n(i),n(19),n(15));n(33),n(72),Object.assign,o.f,o.a,o.a,o.a},function(t,e,n){"use strict";var r=n(2),i=(n.n(r),n(15),n(19),n(33),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});"function"===typeof Symbol&&i(Symbol.iterator),Object.assign},function(t,e,n){function r(t,e){for(var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";null!=(n=b.exec(t));){var l=n[0],h=n[1],f=n.index;if(a+=t.slice(o,f),o=f+l.length,h)a+=h[1];else{var d=t[o],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],w=n[7];a&&(r.push(a),a="");var _=null!=p&&null!=d&&d!==p,x="+"===y||"*"===y,E="?"===y||"*"===y,A=n[2]||s,C=m||v;r.push({name:g||i++,prefix:p||"",delimiter:A,optional:E,repeat:x,partial:_,asterisk:!!w,pattern:C?c(C):w?".*":"[^"+u(A)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&r.push(a),r}function i(t,e){return s(r(t,e))}function o(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"===v(t[n])&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",s=n||{},u=r||{},c=u.pretty?o:encodeURIComponent,l=0;l<t.length;l++){var h=t[l];if("string"!==typeof h){var f,d=s[h.name];if(null==d){if(h.optional){h.partial&&(i+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(y(d)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(f=c(d[p]),!e[l].test(f))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(0===p?h.prefix:h.delimiter)+f}}else{if(f=h.asterisk?a(d):c(d),!e[l].test(f))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+f+'"');i+=h.prefix+f}}else i+=h}return i}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function l(t,e){return t.keys=e,t}function h(t){return t.sensitive?"":"i"}function f(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(t,e)}function d(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(m(t[i],e,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),e)}function p(t,e,n){return g(r(t,n),e,n)}function g(t,e,n){y(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"===typeof s)o+=u(s);else{var c=u(s.prefix),f="(?:"+s.pattern+")";e.push(s),s.repeat&&(f+="(?:"+c+f+")*"),f=s.optional?s.partial?c+"("+f+")?":"(?:"+c+"("+f+"))?":c+"("+f+")",o+=f}}var d=u(n.delimiter||"/"),p=o.slice(-d.length)===d;return r||(o=(p?o.slice(0,-d.length):o)+"(?:"+d+"(?=$))?"),o+=i?"$":r&&p?"":"(?="+d+"|$)",l(new RegExp("^"+o,h(n)),e)}function m(t,e,n){return y(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?f(t,e):y(t)?d(t,e,n):p(t,e,n)}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=n(162);t.exports=m,t.exports.parse=r,t.exports.compile=i,t.exports.tokensToFunction=s,t.exports.tokensToRegExp=g;var b=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";n(66)},function(t,e,n){"use strict";function r(t){return function(){return function(e){return function(n){if(n.type!==i.a)return e(n);var r=n.payload,o=r.method,a=r.args;t[o].apply(t,a)}}}}e.a=r;var i=n(77)},function(t,e,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="/service-worker.js";a?(o(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(t)})}}function i(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function o(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):i(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}e.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},function(t,e,n){"use strict";function r(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"===typeof i?i(n,r,t):e(i)}}}}e.__esModule=!0;var i=r();i.withExtraArgument=r,e.default=i},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(){function t(e){var n=e.getState,r=e.dispatch,f=Object(a.b)();return f.emit=(u.emitter||o.l)(f.emit),t.run=s.a.bind(null,{context:i,subscribe:f.subscribe,dispatch:r,getState:n,sagaMonitor:c,logger:l,onError:h}),function(t){return function(e){c&&c.actionDispatched&&c.actionDispatched(e);var n=t(e);return f.emit(e),n}}}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.context,i=void 0===n?{}:n,u=r(e,["context"]),c=u.sagaMonitor,l=u.logger,h=u.onError;if(o.n.func(u))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(l&&!o.n.func(l))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(h&&!o.n.func(h))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(u.emitter&&!o.n.func(u.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");return t.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},t.setContext=function(t){Object(o.g)(t,o.n.object,Object(o.h)("sagaMiddleware",t)),o.s.assign(i,t)},t}e.a=i;var o=n(4),a=n(8),s=n(81)},function(t,e,n){"use strict";function r(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var u={done:!1,value:Object(o.h)(t)},c=function(t){return{done:!1,value:o.f.apply(void 0,[e].concat(r,[t]))}},l=void 0,h=function(t){return l=t};return Object(i.a)({q1:function(){return["q2",u,h]},q2:function(){return l===a.a?[i.b]:["q1",c(l)]}},"q1","takeEvery("+Object(i.c)(t)+", "+e.name+")")}e.a=r;var i=n(35),o=n(7),a=n(8)},function(t,e,n){"use strict";function r(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var u={done:!1,value:Object(o.h)(t)},c=function(t){return{done:!1,value:o.f.apply(void 0,[e].concat(r,[t]))}},l=function(t){return{done:!1,value:Object(o.e)(t)}},h=void 0,f=void 0,d=function(t){return h=t},p=function(t){return f=t};return Object(i.a)({q1:function(){return["q2",u,p]},q2:function(){return f===a.a?[i.b]:h?["q3",l(h)]:["q1",c(f),d]},q3:function(){return["q1",c(f),d]}},"q1","takeLatest("+Object(i.c)(t)+", "+e.name+")")}e.a=r;var i=n(35),o=n(7),a=n(8)},function(t,e,n){"use strict";function r(t,e,n){for(var r=arguments.length,c=Array(r>3?r-3:0),l=3;l<r;l++)c[l-3]=arguments[l];var h=void 0,f=void 0,d={done:!1,value:Object(o.a)(e,s.a.sliding(1))},p=function(){return{done:!1,value:Object(o.h)(f)}},g=function(t){return{done:!1,value:o.f.apply(void 0,[n].concat(c,[t]))}},m={done:!1,value:Object(o.d)(u.j,t)},v=function(t){return h=t},y=function(t){return f=t};return Object(i.a)({q1:function(){return["q2",d,y]},q2:function(){return["q3",p(),v]},q3:function(){return h===a.a?[i.b]:["q4",g(h)]},q4:function(){return["q2",m]}},"q1","throttle("+Object(i.c)(e)+", "+n.name+")")}e.a=r;var i=n(35),o=n(7),a=n(8),s=n(21),u=n(4)},function(t,e,n){"use strict";n(4),n(7),n(82)},function(t,e,n){"use strict";var r=n(13),i=n(17),o=n(173),a={routing:i.d,map:o.a};e.a=Object(r.c)(a)},function(t,e,n){"use strict";var r=n(37),i=n(207),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a,e=arguments[1];switch(e.type){case r.types.DID_INIT:var n=e.floors,o=e.buildings,a=e.currentFloor;return Object.assign({},t,{state:"idle",floors:n,buildings:o,currentFloor:a});case r.types.FLOOR_WILL_CHANGE:return Object.assign({},t,{state:"transition"});case r.types.FLOOR_DID_CHANGE:var s=e.currentFloor,u=e.previousFloor;return Object.assign({},t,{state:"idle",currentFloor:s,previousFloor:u});case r.types.ON_CLICK:var c=e.currentClickedEvent;return Object.assign({},t,{currentClickedEvent:c});case r.types.SWITCH_MODE:return Object.assign({},t,{mode:e.mode});case r.types.WILL_INIT:default:return t}};e.a=o},function(t,e,n){var r,i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,a,s,u){"use strict";function c(t,e,n){return setTimeout(p(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(h(t,n[e],n),!0)}function h(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==u)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function f(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,r,n),t.apply(this,arguments)}}function d(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&gt(r,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function g(t,e){return("undefined"===typeof t?"undefined":i(t))==yt?t.apply(e?e[0]||u:u,e):t}function m(t,e){return t===u?e:t}function v(t,e,n){h(_(e),function(e){t.addEventListener(e,n,!1)})}function y(t,e,n){h(_(e),function(e){t.removeEventListener(e,n,!1)})}function b(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function w(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function E(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function C(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<mt.length;){if(n=mt[o],(r=n?n+i:e)in t)return r;o++}return u}function S(){return At++}function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function T(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){g(t.options.enable,[t])&&n.handler(e)},this.init()}function k(t){var e=t.options.inputClass;return new(e||(Mt?H:Tt?G:St?X:z))(t,O)}function O(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&Ot&&r-i===0,a=e&(Pt|Lt)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,F(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function F(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=R(e)),i>1&&!n.firstMultiple?n.firstMultiple=R(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=D(r);e.timeStamp=_t(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=j(s,u),e.distance=N(s,u),P(n,e),e.offsetDirection=I(e.deltaX,e.deltaY);var c=B(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=wt(c.x)>wt(c.y)?c.x:c.y,e.scale=a?$(a.pointers,r):1,e.rotation=a?U(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,L(n,e);var l=t.element;b(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function P(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Ot&&o.eventType!==Pt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function L(t,e){var n,r,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!=Lt&&(s>kt||a.velocity===u)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,h=B(s,c,l);r=h.x,i=h.y,n=wt(h.x)>wt(h.y)?h.x:h.y,o=I(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function R(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:bt(t.pointers[n].clientX),clientY:bt(t.pointers[n].clientY)},n++;return{timeStamp:_t(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:bt(t[0].clientX),y:bt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:bt(n/e),y:bt(r/e)}}function B(t,e,n){return{x:e/t||0,y:n/t||0}}function I(t,e){return t===e?Rt:wt(t)>=wt(e)?t<0?Dt:Bt:e<0?It:Nt}function N(t,e,n){n||(n=zt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function j(t,e,n){n||(n=zt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function U(t,e){return j(e[1],e[0],Ht)+j(t[1],t[0],Ht)}function $(t,e){return N(e[0],e[1],Ht)/N(t[0],t[1],Ht)}function z(){this.evEl=Wt,this.evWin=Gt,this.pressed=!1,T.apply(this,arguments)}function H(){this.evEl=Yt,this.evWin=Kt,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Jt,this.evWin=Qt,this.started=!1,T.apply(this,arguments)}function W(t,e){var n=E(t.touches),r=E(t.changedTouches);return e&(Pt|Lt)&&(n=A(n.concat(r),"identifier",!0)),[n,r]}function G(){this.evTarget=ee,this.targetIds={},T.apply(this,arguments)}function q(t,e){var n=E(t.touches),r=this.targetIds;if(e&(Ot|Ft)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=E(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return b(t.target,u)}),e===Ot)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Pt|Lt)&&delete r[a[i].identifier],i++;return s.length?[A(o.concat(s),"identifier",!0),s]:void 0}function X(){T.apply(this,arguments);var t=p(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Y(t,e){t&Ot?(this.primaryTouch=e.changedPointers[0].identifier,K.call(this,e)):t&(Pt|Lt)&&K.call(this,e)}function K(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ne)}}function Z(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=re&&a<=re)return!0}return!1}function J(t,e){this.manager=t,this.set(e)}function Q(t){if(w(t,ue))return ue;var e=w(t,ce),n=w(t,le);return e&&n?ue:e||n?e?ce:le:w(t,se)?se:ae}function tt(t){this.options=gt({},this.defaults,t||{}),this.id=S(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=fe,this.simultaneous={},this.requireFail=[]}function et(t){return t&ve?"cancel":t&ge?"end":t&pe?"move":t&de?"start":""}function nt(t){return t==Nt?"down":t==It?"up":t==Dt?"left":t==Bt?"right":""}function rt(t,e){var n=e.manager;return n?n.get(t):t}function it(){tt.apply(this,arguments)}function ot(){it.apply(this,arguments),this.pX=null,this.pY=null}function at(){it.apply(this,arguments)}function st(){tt.apply(this,arguments),this._timer=null,this._input=null}function ut(){it.apply(this,arguments)}function ct(){it.apply(this,arguments)}function lt(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=m(e.recognizers,ht.defaults.preset),new ft(t,e)}function ft(t,e){this.options=gt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=k(this),this.touchAction=new J(this,this.options.touchAction),dt(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function dt(t,e){var n=t.element;if(n.style){var r;h(t.options.cssProps,function(i,o){r=C(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function pt(t,e){var n=a.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var gt,mt=["","webkit","Moz","MS","ms","o"],vt=a.createElement("div"),yt="function",bt=Math.round,wt=Math.abs,_t=Date.now;gt="function"!==typeof Object.assign?function(t){if(t===u||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==u&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var xt=f(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===u)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),Et=f(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),At=1,Ct=/mobile|tablet|ip(ad|hone|od)|android/i,St="ontouchstart"in o,Mt=C(o,"PointerEvent")!==u,Tt=St&&Ct.test(navigator.userAgent),kt=25,Ot=1,Ft=2,Pt=4,Lt=8,Rt=1,Dt=2,Bt=4,It=8,Nt=16,jt=Dt|Bt,Ut=It|Nt,$t=jt|Ut,zt=["x","y"],Ht=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(M(this.element),this.evWin,this.domHandler)}};var Vt={mousedown:Ot,mousemove:Ft,mouseup:Pt},Wt="mousedown",Gt="mousemove mouseup";d(z,T,{handler:function(t){var e=Vt[t.type];e&Ot&&0===t.button&&(this.pressed=!0),e&Ft&&1!==t.which&&(e=Pt),this.pressed&&(e&Pt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var qt={pointerdown:Ot,pointermove:Ft,pointerup:Pt,pointercancel:Lt,pointerout:Lt},Xt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Yt="pointerdown",Kt="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Yt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),d(H,T,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=qt[r],o=Xt[t.pointerType]||t.pointerType,a="touch"==o,s=x(e,t.pointerId,"pointerId");i&Ot&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Pt|Lt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Zt={touchstart:Ot,touchmove:Ft,touchend:Pt,touchcancel:Lt},Jt="touchstart",Qt="touchstart touchmove touchend touchcancel";d(V,T,{handler:function(t){var e=Zt[t.type];if(e===Ot&&(this.started=!0),this.started){var n=W.call(this,t,e);e&(Pt|Lt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var te={touchstart:Ot,touchmove:Ft,touchend:Pt,touchcancel:Lt},ee="touchstart touchmove touchend touchcancel";d(G,T,{handler:function(t){var e=te[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ne=2500,re=25;d(X,T,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Y.call(this,e,n);else if(i&&Z.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ie=C(vt.style,"touchAction"),oe=ie!==u,ae="auto",se="manipulation",ue="none",ce="pan-x",le="pan-y",he=function(){if(!oe)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}();J.prototype={set:function(t){"compute"==t&&(t=this.compute()),oe&&this.manager.element.style&&he[t]&&(this.manager.element.style[ie]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){g(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=w(r,ue)&&!he[ue],o=w(r,le)&&!he[le],a=w(r,ce)&&!he[ce];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}return a&&o?void 0:i||o&&n&jt||a&&n&Ut?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var fe=1,de=2,pe=4,ge=8,me=ge,ve=16;tt.prototype={defaults:{},set:function(t){return gt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=rt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=rt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=rt(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=rt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<ge&&e(n.options.event+et(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=ge&&e(n.options.event+et(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|fe)))return!1;t++}return!0},recognize:function(t){var e=gt({},t);if(!g(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(me|ve|32)&&(this.state=fe),this.state=this.process(e),this.state&(de|pe|ge|ve)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},d(it,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(de|pe),i=this.attrTest(t);return r&&(n&Lt||!i)?e|ve:r||i?n&Pt?e|ge:e&de?e|pe:de:32}}),d(ot,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:$t},getTouchAction:function(){var t=this.options.direction,e=[];return t&jt&&e.push(le),t&Ut&&e.push(ce),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&jt?(i=0===o?Rt:o<0?Dt:Bt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Rt:a<0?It:Nt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&de||!(this.state&de)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),d(at,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&de)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),d(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Pt|Lt)&&!i)this.reset();else if(t.eventType&Ot)this.reset(),this._timer=c(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&Pt)return me;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&Pt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=_t(),this.manager.emit(this.options.event,this._input)))}}),d(ut,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&de)}}),d(ct,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:jt|Ut,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(jt|Ut)?e=t.overallVelocity:n&jt?e=t.overallVelocityX:n&Ut&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&wt(e)>this.options.velocity&&t.eventType&Pt},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),d(lt,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&Ot&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Pt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=me,this.tryEmit()},e.interval,this),de):me}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ut,{enable:!1}],[at,{enable:!1},["rotate"]],[ct,{direction:jt}],[ot,{direction:jt},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ft.prototype={set:function(t){return gt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&me)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(de|pe|ge)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==u&&e!==u){var n=this.handlers;return h(_(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==u){var n=this.handlers;return h(_(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&dt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},gt(ht,{INPUT_START:Ot,INPUT_MOVE:Ft,INPUT_END:Pt,INPUT_CANCEL:Lt,STATE_POSSIBLE:fe,STATE_BEGAN:de,STATE_CHANGED:pe,STATE_ENDED:ge,STATE_RECOGNIZED:me,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:Rt,DIRECTION_LEFT:Dt,DIRECTION_RIGHT:Bt,DIRECTION_UP:It,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:jt,DIRECTION_VERTICAL:Ut,DIRECTION_ALL:$t,Manager:ft,Input:T,TouchAction:J,TouchInput:G,MouseInput:z,PointerEventInput:H,TouchMouseInput:X,SingleTouchInput:V,Recognizer:tt,AttrRecognizer:it,Tap:lt,Pan:ot,Swipe:ct,Pinch:at,Rotate:ut,Press:st,on:v,off:y,each:h,merge:Et,extend:xt,assign:gt,inherit:d,bindFn:p,prefixed:C}),("undefined"!==typeof o?o:"undefined"!==typeof self?self:{}).Hammer=ht,(r=function(){return ht}.call(e,n,e,t))!==u&&(t.exports=r)}(window,document)},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return h});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u={ERROR:"error",WARN:"warn",INFO:"info",VERBOSE:"verbose",DEBUG:"debug",SILLY:"silly"},c=function(){function t(){o(this,t)}return s(t,[{key:"log",value:function(t,e,n){throw new Error("This is an interface")}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(u.ERROR,t,e)}},{key:"warn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(u.WARN,t,e)}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(u.INFO,t,e)}},{key:"verbose",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(u.VERBOSE,t,e)}},{key:"debug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(u.DEBUG,t,e)}},{key:"silly",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(u.SILLY,t,e)}}],[{key:"isValidLogger",value:function(t){var e={isValid:!0,reasons:[]};return"object"!=("undefined"===typeof t?"undefined":a(t))||null===t?(e.isValid=!1,e.reasons.push("Logger must be a not null object"),e):(Object.keys(u).forEach(function(n){var r=u[n];"function"!=typeof t[r]&&(e.isValid=!1,e.reasons.push("Logger must implement method "+r))}),e)}},{key:"_getLevelValue",value:function(t){switch(t){case u.ERROR:return 0;case u.WARN:return 1;case u.INFO:return 2;case u.VERBOSE:return 3;case u.DEBUG:return 4;case u.SILLY:return 5;default:return 2}}}]),t}(),l=(function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}i(e,t),s(e,[{key:"log",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}])}(c),function(t){function e(t,n){var i;return o(this,e),i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i.logger=t,i.tag=n,i}return i(e,t),s(e,[{key:"log",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.logger.log(t,"["+this.tag+"]"+e,n)}}]),e}(c)),h=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.WARN,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,e),t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.level=n,t.tag=i,t}return i(e,t),s(e,[{key:"log",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(this.constructor._getLevelValue(this.level)<this.constructor._getLevelValue(t))){var r=null;r=null!==this.tag?"["+t+"]["+this.tag+"]: "+e:"["+t+"]: "+e,n?console.log(r,n):console.log(r)}}}]),e}(c)},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,r||t,o),s=c?c+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(c=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)u.call(t,e)&&n.push(c?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=c?c+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},s.prototype.listenerCount=function(t){var e=c?c+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,r,i,o){var a=c?c+t:t;if(!this._events[a])return!1;var s,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(u=1,s=new Array(h-1);u<h;u++)s[u-1]=arguments[u];l.fn.apply(l.context,s)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!s)for(f=1,s=new Array(h-1);f<h;f++)s[f-1]=arguments[f];l[u].fn.apply(l[u].context,s)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,r){var i=c?c+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||a(this,i);else{for(var s=0,u=[],l=o.length;s<l;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=c?c+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,t.exports=s},function(t,e,n){t.exports=n(178)},function(t,e,n){"use strict";function r(t){var e=new a(t),n=o(a.prototype.request,e);return i.extend(n,a.prototype,e),i.extend(n,e),n}var i=n(5),o=n(88),a=n(180),s=n(40),u=r(s);u.Axios=a,u.create=function(t){return r(i.merge(s,t))},u.Cancel=n(92),u.CancelToken=n(194),u.isCancel=n(91),u.all=function(t){return Promise.all(t)},u.spread=n(195),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function r(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var i=n(40),o=n(5),a=n(189),s=n(190);r.prototype.request=function(t){"string"===typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(90);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(5);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(5),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(5);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";function r(){this.message="String contains an invalid character"}function i(t){for(var e,n,i=String(t),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;e=e<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=i},function(t,e,n){"use strict";var r=n(5);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(5);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=n(5),o=n(191),a=n(91),s=n(40),u=n(192),c=n(193);t.exports=function(t){return r(t),t.baseURL&&!u(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return r(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(r(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";function r(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}var i=n(92);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var r,i,o,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,u){"object"===a(e)?t.exports=e=u(n(11)):(i=[n(11)],r=u,void 0!==(o="function"===typeof r?r.apply(e,i):r)&&(t.exports=o))}(0,function(t){return function(e){function n(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function r(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function i(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function o(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}var a=t,s=a.lib,u=s.WordArray,c=s.Hasher,l=a.algo,h=[];!function(){for(var t=0;t<64;t++)h[t]=4294967296*e.abs(e.sin(t+1))|0}();var f=l.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var a=0;a<16;a++){var s=e+a,u=t[s];t[s]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,l=t[e+0],f=t[e+1],d=t[e+2],p=t[e+3],g=t[e+4],m=t[e+5],v=t[e+6],y=t[e+7],b=t[e+8],w=t[e+9],_=t[e+10],x=t[e+11],E=t[e+12],A=t[e+13],C=t[e+14],S=t[e+15],M=c[0],T=c[1],k=c[2],O=c[3];M=n(M,T,k,O,l,7,h[0]),O=n(O,M,T,k,f,12,h[1]),k=n(k,O,M,T,d,17,h[2]),T=n(T,k,O,M,p,22,h[3]),M=n(M,T,k,O,g,7,h[4]),O=n(O,M,T,k,m,12,h[5]),k=n(k,O,M,T,v,17,h[6]),T=n(T,k,O,M,y,22,h[7]),M=n(M,T,k,O,b,7,h[8]),O=n(O,M,T,k,w,12,h[9]),k=n(k,O,M,T,_,17,h[10]),T=n(T,k,O,M,x,22,h[11]),M=n(M,T,k,O,E,7,h[12]),O=n(O,M,T,k,A,12,h[13]),k=n(k,O,M,T,C,17,h[14]),T=n(T,k,O,M,S,22,h[15]),M=r(M,T,k,O,f,5,h[16]),O=r(O,M,T,k,v,9,h[17]),k=r(k,O,M,T,x,14,h[18]),T=r(T,k,O,M,l,20,h[19]),M=r(M,T,k,O,m,5,h[20]),O=r(O,M,T,k,_,9,h[21]),k=r(k,O,M,T,S,14,h[22]),T=r(T,k,O,M,g,20,h[23]),M=r(M,T,k,O,w,5,h[24]),O=r(O,M,T,k,C,9,h[25]),k=r(k,O,M,T,p,14,h[26]),T=r(T,k,O,M,b,20,h[27]),M=r(M,T,k,O,A,5,h[28]),O=r(O,M,T,k,d,9,h[29]),k=r(k,O,M,T,y,14,h[30]),T=r(T,k,O,M,E,20,h[31]),M=i(M,T,k,O,m,4,h[32]),O=i(O,M,T,k,b,11,h[33]),k=i(k,O,M,T,x,16,h[34]),T=i(T,k,O,M,C,23,h[35]),M=i(M,T,k,O,f,4,h[36]),O=i(O,M,T,k,g,11,h[37]),k=i(k,O,M,T,y,16,h[38]),T=i(T,k,O,M,_,23,h[39]),M=i(M,T,k,O,A,4,h[40]),O=i(O,M,T,k,l,11,h[41]),k=i(k,O,M,T,p,16,h[42]),T=i(T,k,O,M,v,23,h[43]),M=i(M,T,k,O,w,4,h[44]),O=i(O,M,T,k,E,11,h[45]),k=i(k,O,M,T,S,16,h[46]),T=i(T,k,O,M,d,23,h[47]),M=o(M,T,k,O,l,6,h[48]),O=o(O,M,T,k,y,10,h[49]),k=o(k,O,M,T,C,15,h[50]),T=o(T,k,O,M,m,21,h[51]),M=o(M,T,k,O,E,6,h[52]),O=o(O,M,T,k,p,10,h[53]),k=o(k,O,M,T,_,15,h[54]),T=o(T,k,O,M,f,21,h[55]),M=o(M,T,k,O,b,6,h[56]),O=o(O,M,T,k,S,10,h[57]),k=o(k,O,M,T,v,15,h[58]),T=o(T,k,O,M,A,21,h[59]),M=o(M,T,k,O,g,6,h[60]),O=o(O,M,T,k,x,10,h[61]),k=o(k,O,M,T,d,15,h[62]),T=o(T,k,O,M,w,21,h[63]),c[0]=c[0]+M|0,c[1]=c[1]+T|0,c[2]=c[2]+k|0,c[3]=c[3]+O|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}});a.MD5=c._createHelper(f),a.HmacMD5=c._createHmacHelper(f)}(Math),t.MD5})},function(t,e,n){var r,i,o,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,u){"object"===a(e)?t.exports=e=u(n(11)):(i=[n(11)],r=u,void 0!==(o="function"===typeof r?r.apply(e,i):r)&&(t.exports=o))}(0,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,n=e.lib,r=n.WordArray,i=r.init;(r.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],r=0;r<e;r++)n[r>>>2]|=t[r]<<24-r%4*8;i.call(this,n,e)}else i.apply(this,arguments)}).prototype=r}}(),t.lib.WordArray})},function(t,e,n){var r,i,o,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,u){"object"===a(e)?t.exports=e=u(n(11)):(i=[n(11)],r=u,void 0!==(o="function"===typeof r?r.apply(e,i):r)&&(t.exports=o))}(0,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)a[c]=0|t[e+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+u+a[c];h+=c<20?1518500249+(i&o|~i&s):c<40?1859775393+(i^o^s):c<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,u=s,s=o,o=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=i._createHelper(s),e.HmacSHA1=i._createHmacHelper(s)}(),t.SHA1})},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return v}),n.d(e,"c",function(){return m}),n.d(e,"b",function(){return y}),n.d(e,"d",function(){return c});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){i(this,t)}return o(t,null,[{key:"toDegree",value:function(t){return 180*t/Math.PI}},{key:"toRadian",value:function(t){return t*Math.PI/180}}]),t}(),s=function(){function t(e,n,r){i(this,t),this.a=e,this.e=n,this.f=r,this.k0=.9996,this.ePow2=Math.pow(this.e,2),this.ePow4=Math.pow(this.e,4),this.ePow6=Math.pow(this.e,6),this.e1sq=this.ePow2/(1-this.ePow2)}return o(t,null,[{key:"fromFlattening",value:function(t,e){return new this(t,Math.sqrt(2*e-Math.pow(e,2)),e)}}]),t}(),u=s.fromFlattening(6378137,1/298.257223563),c=function t(e){i(this,t),this.k=u.k0,this.E=5e5;var n=a.toDegree(e.long);this.zone=n<0?Math.floor((180+n)/6+1):Math.floor(n/6+31),this.long=a.toRadian(6*(this.zone-30)-3),this.N=e.lat<0?1e7:0,this.hemi=0===this.N?1:-1},l=1-u.ePow2/4-3/64*u.ePow4-5/256*u.ePow6,h=3/8*u.ePow2+3/32*u.ePow4+45/1024*u.ePow6,f=15/256*u.ePow4+45/1024*u.ePow6,d=35/3072*u.ePow6,p=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this.gps=e,this.utmGridZone=n||new c(this.gps),this.deltaLong=this.gps.long-this.utmGridZone.long,this.Nu=1/Math.sqrt(1-u.ePow2*Math.pow(Math.sin(this.gps.lat),2)),this.A=this.deltaLong*Math.cos(this.gps.lat),this.APow2=Math.pow(this.A,2),this.APow3=Math.pow(this.A,3),this.APow4=Math.pow(this.A,4),this.APow5=Math.pow(this.A,5),this.APow6=Math.pow(this.A,6);var r=Math.sin(2*this.gps.lat),o=Math.sin(4*this.gps.lat),a=Math.sin(6*this.gps.lat);this.S=l*this.gps.lat-h*r+f*o-d*a,this.T=Math.pow(Math.tan(this.gps.lat),2),this.TPow2=Math.pow(this.T,2),this.C=u.ePow2/(1-u.ePow2)*Math.pow(Math.cos(this.gps.lat),2),this.CPow2=Math.pow(this.C,2),this.E=this.A+(1-this.T+this.C)/6*this.APow3,this.E+=(5-18*this.T+this.TPow2)*this.APow5/120,this.E*=this.utmGridZone.k*u.a*this.Nu,this.E+=this.utmGridZone.E,this.N=this.APow2/2,this.N+=(5-this.T+9*this.C+4*this.CPow2)*this.APow4/24,this.N+=(61-58*this.T+this.TPow2)*this.APow6/720,this.N*=this.Nu*Math.tan(this.gps.lat),this.N+=this.S,this.N*=u.a*this.utmGridZone.k,this.N+=this.utmGridZone.N},g=function t(e){i(this,t);var n=e.N,r=1===e.hemi;r||(n=1e7-n);var o=n/u.k0/(u.a*(1-Math.pow(u.e,2)/4-3*Math.pow(u.e,4)/64-5*Math.pow(u.e,6)/256)),a=(1-Math.pow(1-u.ePow2,.5))/(1+Math.pow(1-u.ePow2,.5)),s=21*Math.pow(a,2)/16-55*Math.pow(a,4)/32,c=151*Math.pow(a,3)/96,l=1097*Math.pow(a,4)/512,h=o+(3*a/2-27*Math.pow(a,3)/32)*Math.sin(2*o)+s*Math.sin(4*o)+c*Math.sin(6*o)+l*Math.sin(8*o),f=u.a/Math.pow(1-Math.pow(u.e*Math.sin(h),2),.5),d=u.a*(1-u.ePow2)/Math.pow(1-Math.pow(u.e*Math.sin(h),2),1.5),p=f*Math.tan(h)/d,g=5e5-e.E,m=g/(f*u.k0),v=m*m/2,y=Math.pow(Math.tan(h),2),b=u.e1sq*Math.pow(Math.cos(h),2),w=(5+3*y+10*b-4*b*b-9*u.e1sq)*Math.pow(m,4)/24,_=(61+90*y+298*b+45*y*y-252*u.e1sq-3*b*b)*Math.pow(m,6)/720,x=(g/(f*u.k0)-(1+2*y+b)*Math.pow(m,3)/6+(5-2*b+28*y-3*Math.pow(b,2)+8*u.e1sq+24*Math.pow(y,2))*Math.pow(m,5)/120)/Math.cos(h)*180/Math.PI;this.latitude=180*(h-p*(v+w+_))/Math.PI,r||(this.latitude=-this.latitude);var E=e.zone>0?6*e.zone-183:3;this.longitude=E-x},m=function t(e,n,r,o,a){i(this,t),this.E=e,this.N=n,this.alt=r,this.hemi=o,this.zone=a},v=function(){function t(e,n,r){i(this,t),this.lat=e,this.long=n,this.alt=r}return o(t,[{key:"latInDegree",get:function(){return a.toDegree(this.lat)}},{key:"longInDegree",get:function(){return a.toDegree(this.long)}}],[{key:"fromDegree",value:function(t,e,n){return new this(a.toRadian(t),a.toRadian(e),n)}}]),t}(),y=function(){function t(){i(this,t)}return o(t,null,[{key:"toUtm",value:function(t,e){var n=new p(t,e);return new m(n.E,n.N,t.alt,n.utmGridZone.hemi,n.utmGridZone.zone)}},{key:"toGps",value:function(t){var e=new g(t);return v.fromDegree(e.latitude,e.longitude,t.alt)}}]),t}(),b=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this.n=e,this.m=n,null===r?(this.values=new Array(this.n*this.m),this.values.fill(0)):this.values=r}return o(t,[{key:"get",value:function(t,e){return this.values[this.getIndex(t,e)]}},{key:"set",value:function(t,e,n){return this.values[this.getIndex(t,e)]=n,this}},{key:"getIndex",value:function(t,e){if("number"!=typeof t||t>=this.n)throw new Error("Invalid row index");if("number"!=typeof e||e>=this.m)throw new Error("Invalid column index");return t*this.m+e}},{key:"transpose",value:function(){for(var e=new t(this.m,this.n),n=0;n<this.n;n++)for(var r=0;r<this.m;r++)e.set(r,n,this.get(n,r));return e}},{key:"multiply",value:function(t){if("number"!=typeof t)throw new Error("Expected a number");return this.values=this.values.map(function(e){return e*t}),this}},{key:"extractColumn",value:function(e){for(var n=new t(this.n,1),r=0;r<this.n;r++)n.set(r,0,this.get(r,e));return n}}],[{key:"sum",value:function(e,n){if(e.m!==n.m||e.n!==n.n)throw new Error("Invalid given matrices");return new t(e.n,e.m,e.values.map(function(t,e){return t+n.values[e]}))}},{key:"identity",value:function(e){for(var n=new t(e,e),r=0;r<e;r++)n.set(r,r,1);return n}},{key:"additiveInverse",value:function(e){return new t(e.n,e.m,e.values.map(function(t){return-1*t}))}},{key:"product",value:function(e,n){if(!(e instanceof t&&n instanceof t))throw new Error("Expected two Matrices");if(e.m!==n.n)throw new Error("Invalid given matrices");for(var r=e.m,i=new t(e.n,n.m),o=0;o<i.n;o++)for(var a=0;a<i.m;a++){for(var s=0,u=0;u<r;u++)s+=e.get(o,u)*n.get(u,a);i.set(o,a,s)}return i}},{key:"inverseMatrix3",value:function(e){if(3!==e.n||3!==e.m)throw new Error("Works only with Matrix 3");var n=e.extractColumn(0),r=e.extractColumn(1),i=e.extractColumn(2),o=this.determinantMatrix3(e);if(0===o)throw new Error("Not inversible matrix");var a=this.crossProductVector3(r,i).transpose().multiply(1/o),s=this.crossProductVector3(i,n).transpose().multiply(1/o),u=this.crossProductVector3(n,r).transpose().multiply(1/o),c=new t(3,3);return c.set(0,0,a.get(0,0)),c.set(0,1,a.get(0,1)),c.set(0,2,a.get(0,2)),c.set(1,0,s.get(0,0)),c.set(1,1,s.get(0,1)),c.set(1,2,s.get(0,2)),c.set(2,0,u.get(0,0)),c.set(2,1,u.get(0,1)),c.set(2,2,u.get(0,2)),c}},{key:"determinantMatrix3",value:function(e){if(3!==e.n||3!==e.m)throw new Error("Works only with Matrix 3");var n=e.extractColumn(0),r=e.extractColumn(1),i=e.extractColumn(2);return t.dotProductVector(n,t.crossProductVector3(r,i))}},{key:"crossProductVector3",value:function(e,n){if(3!==e.n||1!==e.m||3!==n.n||1!==n.m)throw new Error("Works only with Matrix 3x1");var r=new t(3,1);return r.set(0,0,e.get(1,0)*n.get(2,0)-e.get(2,0)*n.get(1,0)),r.set(1,0,e.get(2,0)*n.get(0,0)-e.get(0,0)*n.get(2,0)),r.set(2,0,e.get(0,0)*n.get(1,0)-e.get(1,0)*n.get(0,0)),r}},{key:"dotProductVector",value:function(t,e){if(1!==t.m||1!==e.m||t.n!==e.n)throw new Error("Works only with Matrix nx1");for(var n=0,r=0;r<t.n;r++)n+=t.get(r,0)*e.get(r,0);return n}}]),t}(),w=function(){function t(){i(this,t)}return o(t,null,[{key:"compute2ParametersRegression",value:function(t){for(var e=t.length,n=new b(e,3),r=new b(e,1),i=0;i<e;i++)n.set(i,0,1),n.set(i,1,t[i].parameters.get(0,0)),n.set(i,2,t[i].parameters.get(1,0)),r.set(i,0,t[i].result);var o=n.transpose();return b.product(b.product(b.inverseMatrix3(b.product(o,n)),o),r)}}]),t}();!function(){function t(e,n){i(this,t),this.transformMatrix=e,this.translateMatrix=n,this._reverseTransform=null}o(t,[{key:"convert",value:function(t){var e=new b(3,1,[t.x,t.y,t.z]),n=b.sum(b.product(this.transformMatrix,e),this.translateMatrix);return{x:n.get(0,0),y:n.get(1,0),z:n.get(2,0)}}},{key:"revert",value:function(t){return this.reverseTransform.convert(t)}},{key:"getDistanceAverageError",value:function(t,e){for(var n=t.length,r=0,i=0;i<n;i++){var o=t[i],a=e[i];r+=this.constructor._getDistance(this.convert(o),a)}return r/n}},{key:"getDistanceErrorRepartitionFromAverage",value:function(t,e){var n=t.length,r=this.getDistanceAverageError(t,e),i=new Array(10);i.fill(0);for(var o=0;o<n;o++){var a=t[o],s=e[o],u=this.constructor._getDistance(this.convert(a),s),c=Math.abs(r-u)/r*100,l=Math.trunc(c/10);l>9&&(l=9),i[l]++}return i.map(function(t){return Math.floor(t/n*100)})}},{key:"getRelativeDistanceErrorFromAverage",value:function(t,e){for(var n=t.length,r=this.getDistanceAverageError(t,e),i=[],o=0;o<n;o++){var a=t[o],s=e[o],u=this.constructor._getDistance(this.convert(a),s);i[o]=Math.abs(r-u)/r*100}return i}},{key:"getAmplitudeError",value:function(t,e){for(var n=t.length,r={x:1/0,y:1/0,z:1/0},i={x:-1/0,y:-1/0,z:-1/0},o=0;o<n;o++){var a=t[o],s=e[o],u=this.convert(a),c=Math.abs(u.x-s.x),l=Math.abs(u.y-s.y);c<r.x&&(r.x=c),c>i.x&&(i.x=c),l<r.y&&(r.y=l),l>i.y&&(i.y=l)}return{x:i.x-r.x,y:i.y-r.y}}},{key:"reverseTransform",get:function(){if(null===this._reverseTransform){var e=b.inverseMatrix3(this.transformMatrix),n=b.additiveInverse(b.product(e,this.translateMatrix));this._reverseTransform=new t(e,n),this._reverseTransform._reverseTransform=this}return this._reverseTransform}}],[{key:"computeSample",value:function(t,e){return this._leastSquareComputeSample(t,e)}},{key:"_leastSquareComputeSample",value:function(t,e){for(var n=[],i=0;i<t.length;i++){var o=[].concat(r(t)),a=[].concat(r(e)),s=o[i],u=a[i];o[i]=o[0],a[i]=a[0],o[0]=s,a[0]=u,n.push(this._leastSquareComputeSampleWithOrigin(o,a))}return this._selectResultLeastAverageDistanceError(n,t,e)}},{key:"_leastSquareComputeSampleWithOrigin",value:function(e,n){for(var r=[],i=[],o=e[0],a=n[0],s=1;s<e.length;s++){var u=e[s],c=n[s],l=new b(2,1);l.set(0,0,u.x-o.x),l.set(1,0,u.y-o.y);var h=new b(2,1);h.set(0,0,c.x-a.x),h.set(1,0,c.y-a.y),r.push({parameters:l,result:h.get(0,0)}),i.push({parameters:l,result:h.get(1,0)})}var f=w.compute2ParametersRegression(r),d=w.compute2ParametersRegression(i),p=new b(3,3);p.set(0,0,f.get(1,0)),p.set(0,1,f.get(2,0)),p.set(0,2,0),p.set(1,0,d.get(1,0)),p.set(1,1,d.get(2,0)),p.set(1,2,0),p.set(2,0,0),p.set(2,1,0),p.set(2,2,1);var g=new b(3,1);return g.set(0,0,a.x+f.get(0,0)-f.get(1,0)*o.x-f.get(2,0)*o.y),g.set(1,0,a.y+d.get(0,0)-d.get(1,0)*o.x-d.get(2,0)*o.y),g.set(2,0,0),new t(p,g)}},{key:"_linearComputeSample",value:function(t,e){for(var n=t.length,r=[],i=0;i<n-2;i++)for(var o=t[i],a=e[i],s=i+1;s<n-1;s++)for(var u=t[s],c=e[s],l=s+1;l<n;l++){var h=t[l],f=e[l],d=this._linearComputeTripletSample(o,u,h,a,c,f);r.push(d)}return this._selectResultLeastAverageDistanceError(r,t,e)}},{key:"_linearComputeTripletSample",value:function(e,n,r,i,o,a){var s=n.x-e.x,u=n.y-e.y,c=r.x-e.x,l=r.y-e.y,h=o.x-i.x,f=o.y-i.y,d=((a.x-i.x)*s-h*c)/(l*s-c*u),p=((a.y-i.y)*s-f*c)/(l*s-c*u),g=(h-d*u)/s,m=(f-p*u)/s,v=new b(3,3);v.set(0,0,g),v.set(0,1,d),v.set(0,2,0),v.set(1,0,m),v.set(1,1,p),v.set(1,2,0),v.set(2,0,0),v.set(2,1,0),v.set(2,2,1);var y=new b(3,1);return y.set(0,0,i.x-g*e.x-d*e.y),y.set(1,0,i.y-m*e.x-p*e.y),y.set(2,0,0),new t(v,y)}},{key:"_selectResultLeastAverageDistanceError",value:function(t,e,n){var r=null,i=1/0;if(!Array.isArray(t)||0===t.length)throw new Error("Expected a non empty array");return t.forEach(function(t){var o=t.getDistanceAverageError(e,n);o<i&&(r=t,i=o)}),r}},{key:"_getDistance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}])}()},function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(201),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e,n){(function(t){var e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){"use strict";function r(t,e,n,r){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),s=new p(r||[]);return a._invoke=l(t,n,s),a}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function a(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){function n(r,o,a,s){var u=i(t[r],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===("undefined"===typeof l?"undefined":e(l))&&b.call(l,"__await")?Promise.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):Promise.resolve(l).then(function(t){c.value=t,a(c)},s)}s(u.arg)}function r(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}var o;this._invoke=r}function l(t,e,n){var r=S;return function(o,a){if(r===T)throw new Error("Generator is already running");if(r===k){if("throw"===o)throw a;return m()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=h(s,n);if(u){if(u===O)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===S)throw r=k,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=T;var c=i(t,e,n);if("normal"===c.type){if(r=n.done?k:M,c.arg===O)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=k,n.method="throw",n.arg=c.arg)}}}function h(t,e){var n=t.iterator[e.method];if(n===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,h(t,e),"throw"===e.method))return O;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,O;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,O):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function g(t){if(t){var e=t[_];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(b.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype,b=y.hasOwnProperty,w="function"===typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",E=w.toStringTag||"@@toStringTag",A="object"===e(t),C=n.regeneratorRuntime;if(C)return void(A&&(t.exports=C));C=n.regeneratorRuntime=A?t.exports:{},C.wrap=r;var S="suspendedStart",M="suspendedYield",T="executing",k="completed",O={},F={};F[_]=function(){return this};var P=Object.getPrototypeOf,L=P&&P(P(g([])));L&&L!==y&&b.call(L,_)&&(F=L);var R=s.prototype=o.prototype=Object.create(F);a.prototype=R.constructor=s,s.constructor=a,s[E]=a.displayName="GeneratorFunction",C.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},C.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,E in t||(t[E]="GeneratorFunction")),t.prototype=Object.create(R),t},C.awrap=function(t){return{__await:t}},u(c.prototype),c.prototype[x]=function(){return this},C.AsyncIterator=c,C.async=function(t,e,n,i){var o=new c(r(t,e,n,i));return C.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(R),R[E]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},C.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},C.values=g,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&b.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),s=b.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),O},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),O}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:g(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),O}}}(function(){return this}()||Function("return this")())}).call(e,n(42)(t))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(39),s=(n.n(a),n(9)),u=n(44),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.awm=t,n.objectsLoader=new u.a(n.awm),n}return o(e,t),c(e,[{key:"createDefault",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId");return new Promise(function(t,i){e.objectsLoader.createJSON3DObj("assets/3dModels/youarehere.json").then(function(e){e.visible=!0,e.scale.set(7,7,7),e.rotateX(Math.PI/2);e.scale.multiplyScalar(2),new a.Tween(e.rotation).to({y:2*Math.PI},2e3).repeat(1/0).on("update",function(){e.updateMatrixWorld()}).start(),t(s.g._createFromMesh(e,n,r))})})}}]),e}(s.g);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"===typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"===typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},addColor:function(t,e,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,e,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[t+0],r[t+1]),i.push(r[e+0],r[e+1]),i.push(r[n+0],r[n+1])},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,r,i,o,a,s,u){var c=this.vertices.length,l=this.parseVertexIndex(t,c),h=this.parseVertexIndex(e,c),f=this.parseVertexIndex(n,c);if(this.addVertex(l,h,f),void 0!==r&&""!==r){var d=this.uvs.length;l=this.parseUVIndex(r,d),h=this.parseUVIndex(i,d),f=this.parseUVIndex(o,d),this.addUV(l,h,f)}if(void 0!==a&&""!==a){var p=this.normals.length;l=this.parseNormalIndex(a,p),h=a===s?l:this.parseNormalIndex(s,p),f=a===u?l:this.parseNormalIndex(u,p),this.addNormal(l,h,f)}this.colors.length>0&&this.addColor(l,h,f)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,n=0,r=t.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(t[n],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,o=t.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(t[i],n));for(var a=0,s=e.length;a<s;a++)this.addUVLine(this.parseUVIndex(e[a],r))}};return t.startObject("",!1),t}var o=n(10),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=/^[og]\s*(.+)?/,u=/^mtllib /,c=/^usemtl /,l=function(){function t(e){r(this,t),this.manager=void 0!==e?e:o.DefaultLoadingManager,this.materials=null}return a(t,[{key:"load",value:function(t,e,n,r){var i=this,a=new o.FileLoader(i.manager);a.setPath(this.path),a.load(t,function(t){e(i.parse(t))},n,r)}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setMaterials",value:function(t){return this.materials=t,this}},{key:"parse",value:function(t){console.time("OBJLoader");var e=new i;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var n=t.split("\n"),r="",a="",l=[],h="function"===typeof"".trimLeft,f=0,d=n.length;f<d;f++)if(r=n[f],r=h?r.trimLeft():r.trim(),0!==r.length&&"#"!==(a=r.charAt(0)))if("v"===a){var p=r.split(/\s+/);switch(p[0]){case"v":e.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&e.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":e.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":e.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===a){for(var g=r.substr(1).trim(),m=g.split(/\s+/),v=[],y=0,b=m.length;y<b;y++){var w=m[y];if(w.length>0){var _=w.split("/");v.push(_)}}for(var x=v[0],E=1,A=v.length-1;E<A;E++){var C=v[E],S=v[E+1];e.addFace(x[0],C[0],S[0],x[1],C[1],S[1],x[2],C[2],S[2])}}else if("l"===a){var M=r.substring(1).trim().split(" "),T=[],k=[];if(-1===r.indexOf("/"))T=M;else for(var O=0,F=M.length;O<F;O++){var P=M[O].split("/");""!==P[0]&&T.push(P[0]),""!==P[1]&&k.push(P[1])}e.addLineGeometry(T,k)}else if("p"===a){var L=r.substr(1).trim(),R=L.split(" ");e.addPointGeometry(R)}else if(null!==(l=s.exec(r))){var D=(" "+l[0].substr(1).trim()).substr(1);e.startObject(D)}else if(c.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(u.test(r))e.materialLibraries.push(r.substring(7).trim());else{if("s"!==a){if("\0"===r)continue;throw new Error('three.OBJLoader: Unexpected line: "'+r+'"')}if(l=r.split(" "),l.length>1){var B=l[1].trim().toLowerCase();e.object.smooth="0"!==B&&"off"!==B}else e.object.smooth=!0;var I=e.object.currentMaterial();I&&(I.smooth=e.object.smooth)}e.finalize();var N=new o.Group;N.materialLibraries=[].concat(e.materialLibraries);for(var j=0,U=e.objects.length;j<U;j++){var $=e.objects[j],z=$.geometry,H=$.materials,V="Line"===z.type,W="Points"===z.type,G=!1;if(0!==z.vertices.length){var q=new o.BufferGeometry;q.addAttribute("position",new o.Float32BufferAttribute(z.vertices,3)),z.normals.length>0?q.addAttribute("normal",new o.Float32BufferAttribute(z.normals,3)):q.computeVertexNormals(),z.colors.length>0&&(G=!0,q.addAttribute("color",new o.Float32BufferAttribute(z.colors,3))),z.uvs.length>0&&q.addAttribute("uv",new o.Float32BufferAttribute(z.uvs,2));for(var X=[],Y=0,K=H.length;Y<K;Y++){var Z=H[Y],J=void 0;if(null!==this.materials)if(J=this.materials.create(Z.name),!V||!J||J instanceof o.LineBasicMaterial){if(W&&J&&!(J instanceof o.PointsMaterial)){var Q=new o.PointsMaterial({size:10,sizeAttenuation:!1});tt.copy(J),J=Q}}else{var tt=new o.LineBasicMaterial;tt.copy(J),tt.lights=!1,J=tt}J||(J=V?new o.LineBasicMaterial:W?new o.PointsMaterial({size:1,sizeAttenuation:!1}):new o.MeshPhongMaterial,J.name=Z.name),J.flatShading=!Z.smooth,J.vertexColors=G?o.VertexColors:o.NoColors,X.push(J)}var et;if(X.length>1){for(var nt=0,rt=H.length;nt<rt;nt++){var it=H[nt];q.addGroup(it.groupStart,it.groupCount,nt)}et=V?new o.LineSegments(q,X):W?new o.Points(q,X):new o.Mesh(q,X)}else et=V?new o.LineSegments(q,X[0]):W?new o.Points(q,X[0]):new o.Mesh(q,X[0]);et.name=$.name,N.add(et)}}return console.timeEnd("OBJLoader"),N}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(39),o=(n.n(i),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),a=function(){function t(e,n,i){r(this,t),this.pathSectionObject=e,this.cameraManager=n,this.projector=i,this.speed=5,this.center=!1,this.tweens=[]}return o(t,[{key:"draw",value:function(){for(var t=[],e=this.pathSectionObject._mesh.children,n=0;n<e.length;n++){var r=this.projector.adsumDistanceToMeter(this.pathSectionObject.patternSpace),i=r/this.speed*n*1e3;t.push(this._showPattern(n,i))}return this.pathSectionObject._mesh.visible=!0,this.center&&t.push(this.cameraManager.centerOn(this.pathSectionObject)),this.pathSectionObject.animations.push(this),Promise.all(t).then(function(){})}},{key:"stop",value:function(){this.tweens.forEach(function(t){t.stop()})}},{key:"_showPattern",value:function(t,e){var n=this,r=this.pathSectionObject._mesh.children[t],o={opacity:0},a={z:50};r.traverse(function(t){t.material&&(t.material=t.material.clone(),t.material.opacity=o.opacity,t.material.transparent=!0)}),r.position.setZ(a.z);var s=new Promise(function(t,a){var s=new i.Tween(o).to({opacity:1},500).delay(e).easing(i.Easing.Exponential.In).on("update",function(){r.traverse(function(t){t.material&&(t.material.opacity=o.opacity)})}).on("complete",function(){t(!0)}).on("stop",function(){a(new Error("Path was stopped"))}).start();n.tweens.push(s)}),u=new Promise(function(t,o){var s=new i.Tween(a).to({z:1},1e3).delay(e).easing(i.Easing.Bounce.Out).on("update",function(){r.position.setZ(a.z),r.updateMatrixWorld()}).on("complete",function(){t(!0)}).on("stop",function(){o(new Error("Path was stopped"))}).start();n.tweens.push(s)});return Promise.all([s,u])}}]),t}();e.a=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(10),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];r(this,t),this.from=e,this.to=i,this.ground=n,this.nodes=o,this._distance=null,this._curve=null}return o(t,[{key:"getDistance",value:function(){if(null===this._distance){this._distance=0;for(var t=0;t<this.nodes.length-1;t++){var e=this.nodes[t].getLinkTo(this.nodes[t+1]);this._distance+=e.distance}}return this._distance}},{key:"getCurve",value:function(){if(this.nodes.length<2)return null;if(null===this._curve){this._curve=[];for(var t=0;t<this.nodes.length-1;t++)this._curve.push({from:this.nodes[t].groundPosition,to:this.nodes[t+1].groundPosition,ground:this.nodes[t+1].ground})}return this._curve}},{key:"interpolate",value:function(t,e){var n=this.getCurve();if(null===n)return[];var r=t;t>this.getDistance()/3&&(console.warn("AdsumWebMap.PathSection.interpolate: short pathSection"),r=this.getDistance()/3);var o=Math.floor(this.getDistance()/r)-1,a=this.getDistance()/(o+1),s=[],u=a,c=new i.Vector3;return n.forEach(function(t){var n=t.from,r=t.to,i=t.ground,o=e.adsumDistanceToMeter(c.subVectors(n,r).length());if(o<u)return void(u-=o);for(var l=u/o;l<=1;)c.lerpVectors(n,r,l),s.push({position:c.clone(),ground:i}),l+=a/o;u=o*(l-1)}),s}}]),t}();e.a=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.awm=null,this.locked=!1}return i(t,[{key:"init",value:function(t){return this.awm=t,this}}]),t}(),a=new o;e.a=a},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={state:"initial",mode:"3D",buildings:null,floors:null,zoom:{current:0,max:0,min:0},currentFloor:null,previousFloor:null,currentPath:{},currentClickedEvent:null,cameraMoved:!1,sortedPlaces:[]}},function(t,e,n){"use strict";function r(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(a.a)([Object(s.a)()]);case 2:case"end":return t.stop()}},u,this)}e.a=r;var i=n(22),o=n.n(i),a=n(36),s=n(209),u=o.a.mark(r)},function(t,e,n){"use strict";function r(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(200);case 2:return e.next=4,Object(c.b)([f.a,b]);case 4:return E(),t=d.a.getCurrentFloor(),e.next=8,Object(c.c)({type:h.types.DID_INIT,floors:w.bind(d.a),buildings:_.bind(d.a),currentFloor:null===t?null:t.id});case 8:case"end":return e.stop()}},m,this)}function i(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(200);case 2:return e.next=4,Object(c.b)([d.a,x],t.floorID);case 4:case"end":return e.stop()}},v,this)}function o(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.d)(h.types.WILL_INIT,r);case 2:return t.next=4,Object(c.d)(h.types.FLOOR_WILL_CHANGE,i);case 4:case"end":return t.stop()}},y,this)}var a=n(22),s=n.n(a),u=n(79),c=n(36),l=n(9),h=n(37),f=n(94),d=n(43),p=n(38),g=n(78),m=s.a.mark(r),v=s.a.mark(i),y=s.a.mark(o),b=f.a.init,w=d.a.getAllFloors,_=d.a.getAllBuildings,x=d.a.setCurrentFloor,E=function(){f.a.awm.sceneManager.addEventListener(l.f.floor.didChanged,function(t){var e=t.current,n=null===t.previous?null:t.previous;g.a.dispatch(Object(h.floorDidChanged)(null===e?null:e.id,null===n?null:n.id))}),f.a.awm.mouseManager.addEventListener(l.c.click,function(t){p.a.setEvent(t),g.a.dispatch(Object(h.onClick)(p.a.getEvent.bind(p.a)))})};e.a=o},function(t,e,n){"use strict";var r=n(17),i=n(96),o=Object(r.c)(i.a);e.a=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(212),n(224)),u=(n(227),n(232),n(48)),c=(n.n(u),n(235)),l=n.n(c),h=n(241),f=(n.n(h),n(242)),d=(n.n(f),n(243)),p=(n.n(d),n(244)),g=n(45),m=n(46),v=n.n(m),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onItemClicked=n.onItemClicked.bind(n),n.getItemsWithLogo=n.getItemsWithLogo.bind(n),n.getItemsWithoutLogo=n.getItemsWithoutLogo.bind(n),n}return o(e,t),y(e,[{key:"onItemClicked",value:function(t){console.log("[ITEM CLICKED] :: ",t)}},{key:"componentDidMount",value:function(){console.log("[ACA] : ",g.a)}},{key:"getItemsWithLogo",value:function(){var t=g.a.getAllCategories();return v.a.map(t,function(t){return t.logo&&t.logo.value?t.logo=g.a.getFile(t.logo.value):t.logo=null,t}),t}},{key:"getItemsWithoutLogo",value:function(){var t=g.a.getAllCategories();return v.a.map(t,function(t){return delete t.logo,t}),t}},{key:"render",value:function(){var t=this.getItemsWithoutLogo(),e=this.getItemsWithLogo(),n={position:"relative",left:"15px"},r={height:"100px",width:"180px"},i={background:"black",color:"white"},o={height:"50px"},u={background:"grey",color:"white"},c={borderColor:"red"},h={fontSize:"1em",color:"white"},f={border:"0",background:"transparent",fontSize:"24px",lineHeight:"line-height",padding:"10px",display:"block",outline:"0"},d=function(t){var e=t.previousSlide;return a.createElement("button",{style:f,onClick:e},a.createElement("img",{src:"assets/arrow-left.png"}))},g=function(t){var e=t.nextSlide;return a.createElement("button",{style:f,onClick:e},a.createElement("img",{src:"assets/arrow-right.png"}))},m={renderCenterLeftControls:d,renderCenterRightControls:g,wrapAround:!0};return a.createElement("div",{className:"App"},a.createElement(s.a,{logo:"http://adactivesas.github.io/adsum-react-components/logo.jpg"}),a.createElement("div",null,a.createElement("div",{className:"wrapper"},a.createElement("div",{className:"comp"},a.createElement(p.a,{isOpen:!0,items:t,itemsPerPage:9,onItemClicked:this.onItemClicked,listWrapperCSS:n})),a.createElement("div",{className:"code"},a.createElement(l.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:'import AdsumItemCarousel from "@adactive/arc-itemcarousel";\n...\n\nonItemClicked(item) {\n    console.log("[ITEM CLICKED] :: ", item);\n}\n\nconst itemsWithoutLogo = [\n    {\n        name: \'Food\'\n    },\n    ...\n    {\n        name: \'Carpark\'\n    }\n];\n\nconst listWrapperCSS = {\n    position: "relative",\n    left: "5px"\n}\n\n<AdsumItemCarousel\n    isOpen={true}\n    items={itemsWithoutLogo}\n    itemsPerPage={9}\n    onItemClicked={this.onItemClicked}\n    listWrapperCSS={listWrapperCSS}\n/>\n',height:"650px",width:"700px"}))),a.createElement("div",{className:"wrapper"},a.createElement("div",{className:"comp comp-12"},a.createElement(p.a,{isOpen:!0,items:e,itemsPerPage:12,onItemClicked:this.onItemClicked,logoWrapperCSS:i,logoCSS:o,dashCSS:c,titleWrapperCSS:u,titleCSS:h,thumbNailWrapperCSS:r,carouselOptions:m,listWrapperCSS:n})),a.createElement("div",{className:"code"},a.createElement(l.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:'import AdsumItemCarousel from "@adactive/arc-itemcarousel";\n...\n\nonItemClicked(item) {\n    console.log("[ITEM CLICKED] :: ", item);\n}\n\nconst itemsWithLogo = [\n    {\n        name: \'Food\',\n        logo: {\n            uri: url of image\n        }\n    },\n    ...\n    {\n        name: \'Carpark\',\n        logo: {\n            uri: url of image\n        }\n    }\n];\n\nconst listWrapperCSS = {\n    position: "relative",\n    left: "15px"\n}\n\nconst thumbnailWrapperCSS = {\n    height: "100px",\n    width: "180px"\n}\n\nconst logoWrapperCSS = {\n    background: "black",\n    color: "white"\n}\n\nconst logoCSS = {\n    height: "50px"\n}\n\nconst titleWrapperCSS = {\n    background: "grey",\n    color: "white"\n}\n\nconst dashCSS = {\n    borderColor: "red"\n}\n\nconst titleCSS = {\n    fontSize: "1em",\n    color: "white"\n}\n\nconst buttonStyle = {\n    border: "0",\n    background: "transparent",\n    fontSize: "24px",\n    lineHeight: "line-height",\n    padding: "10px",\n    display: "block",\n    outline: "0"\n}\n\nconst renderCenterLeftControls = ({ previousSlide }) =>\n    <button style={buttonStyle} onClick={previousSlide}>\n        <img src="assets/arrow-left.png" />\n    </button>;\n\nconst renderCenterRightControls = ({ nextSlide }) =>\n    <button style={buttonStyle} onClick={nextSlide}>\n        <img src="assets/arrow-right.png" />\n    </button>;\n\nconst carouselOptions = {\n    renderCenterLeftControls: renderCenterLeftControls,\n    renderCenterRightControls: renderCenterRightControls,\n    wrapAround: true //For infinite scrolling\n};\n\n<AdsumItemCarousel\n    isOpen={true}\n    items={itemsWithLogo}\n    itemsPerPage={12}\n    onItemClicked={this.onItemClicked}\n    logoWrapperCSS={logoWrapperCSS}\n    logoCSS={logoCSS}\n    dashCSS={dashCSS}\n    titleWrapperCSS={titleWrapperCSS}\n    titleCSS={titleCSS}\n    thumbNailWrapperCSS={thumbnailWrapperCSS}\n    carouselOptions={carouselOptions}\n/>\n\n',height:"500px",width:"700px"})))))}}]),e}(a.Component);e.a=b},function(t,e,n){"use strict";n(213),n(214),n(99),n(216),n(217),n(218),n(219),n(100),n(47),n(220),n(221),n(222),n(223)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(0),c=n.n(u),l=n(1),h=n.n(l),f=n(97),d=n.n(f),p=n(47),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.history=d()(o.props),a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){s()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},e.prototype.render=function(){return c.a.createElement(p.a,{history:this.history,children:this.props.children})},e}(c.a.Component);m.propTypes={basename:h.a.string,forceRefresh:h.a.bool,getUserConfirmation:h.a.func,keyLength:h.a.number,children:h.a.node}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":g(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":g(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(0),c=n.n(u),l=n(1),h=n.n(l),f=n(215),d=n.n(f),p=n(47),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.history=d()(o.props),a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){s()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},e.prototype.render=function(){return c.a.createElement(p.a,{history:this.history,children:this.props.children})},e}(c.a.Component);m.propTypes={basename:h.a.string,getUserConfirmation:h.a.func,hashType:h.a.oneOf(["hashbang","noslash","slash"]),children:h.a.node}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(2),a=r(o),s=n(3),u=r(s),c=n(31),l=n(14),h=n(32),f=r(h),d=n(98),p={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,l.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:l.stripLeadingSlash,decodePath:l.addLeadingSlash},slash:{encodePath:l.addLeadingSlash,decodePath:l.addLeadingSlash}},g=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},m=function(t){return window.location.hash=t},v=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(d.canUseDOM,"Hash history needs a DOM");var e=window.history,n=(0,d.supportsGoWithoutReloadUsingHash)(),r=t.getUserConfirmation,o=void 0===r?d.getConfirmation:r,s=t.hashType,h=void 0===s?"slash":s,y=t.basename?(0,l.stripTrailingSlash)((0,l.addLeadingSlash)(t.basename)):"",b=p[h],w=b.encodePath,_=b.decodePath,x=function(){var t=_(g());return(0,a.default)(!y||(0,l.hasBasename)(t,y),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+y+'".'),y&&(t=(0,l.stripBasename)(t,y)),(0,c.createLocation)(t)},E=(0,f.default)(),A=function(t){i(W,t),W.length=e.length,E.notifyListeners(W.location,W.action)},C=!1,S=null,M=function(){var t=g(),e=w(t);if(t!==e)v(e);else{var n=x(),r=W.location;if(!C&&(0,c.locationsAreEqual)(r,n))return;if(S===(0,l.createPath)(n))return;S=null,T(n)}},T=function(t){if(C)C=!1,A();else{E.confirmTransitionTo(t,"POP",o,function(e){e?A({action:"POP",location:t}):k(t)})}},k=function(t){var e=W.location,n=L.lastIndexOf((0,l.createPath)(e));-1===n&&(n=0);var r=L.lastIndexOf((0,l.createPath)(t));-1===r&&(r=0);var i=n-r;i&&(C=!0,I(i))},O=g(),F=w(O);O!==F&&v(F);var P=x(),L=[(0,l.createPath)(P)],R=function(t){return"#"+w(y+(0,l.createPath)(t))},D=function(t,e){(0,a.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,c.createLocation)(t,void 0,void 0,W.location);E.confirmTransitionTo(n,"PUSH",o,function(t){if(t){var e=(0,l.createPath)(n),r=w(y+e);if(g()!==r){S=e,m(r);var i=L.lastIndexOf((0,l.createPath)(W.location)),o=L.slice(0,-1===i?0:i+1);o.push(e),L=o,A({action:"PUSH",location:n})}else(0,a.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),A()}})},B=function(t,e){(0,a.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,c.createLocation)(t,void 0,void 0,W.location);E.confirmTransitionTo(n,"REPLACE",o,function(t){if(t){var e=(0,l.createPath)(n),r=w(y+e);g()!==r&&(S=e,v(r));var i=L.indexOf((0,l.createPath)(W.location));-1!==i&&(L[i]=e),A({action:"REPLACE",location:n})}})},I=function(t){(0,a.default)(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},N=function(){return I(-1)},j=function(){return I(1)},U=0,$=function(t){U+=t,1===U?(0,d.addEventListener)(window,"hashchange",M):0===U&&(0,d.removeEventListener)(window,"hashchange",M)},z=!1,H=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=E.setPrompt(t);return z||($(1),z=!0),function(){return z&&(z=!1,$(-1)),e()}},V=function(t){var e=E.appendListener(t);return $(1),function(){$(-1),e()}},W={length:e.length,action:"POP",location:P,createHref:R,push:D,replace:B,go:I,goBack:N,goForward:j,block:H,listen:V};return W};e.default=y},function(t,e,n){"use strict";var r=n(67);r.a},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var i=n(0),o=n.n(i),a=n(1),s=n.n(a),u=n(100),c=n(99),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":l(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":l(t)},d=function(t){var e=t.to,n=t.exact,i=t.strict,a=t.location,s=t.activeClassName,l=t.className,d=t.activeStyle,p=t.style,g=t.isActive,m=t.ariaCurrent,v=r(t,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return o.a.createElement(u.a,{path:"object"===("undefined"===typeof e?"undefined":f(e))?e.pathname:e,exact:n,strict:i,location:a,children:function(t){var n=t.location,r=t.match,i=!!(g?g(r,n):r);return o.a.createElement(c.a,h({to:e,className:i?[l,s].filter(function(t){return t}).join(" "):l,style:i?h({},p,d):p,"aria-current":i&&m},v))}})};d.propTypes={to:c.a.propTypes.to,exact:s.a.bool,strict:s.a.bool,location:s.a.object,activeClassName:s.a.string,className:s.a.string,activeStyle:s.a.object,style:s.a.object,isActive:s.a.func,ariaCurrent:s.a.oneOf(["page","step","location","true"])},d.defaultProps={activeClassName:"active",ariaCurrent:"true"}},function(t,e,n){"use strict";var r=n(70);r.a},function(t,e,n){"use strict";var r=n(71);r.a},function(t,e,n){"use strict";var r=n(73);r.a},function(t,e,n){"use strict";var r=n(74);r.a},function(t,e,n){"use strict";var r=n(20);r.a},function(t,e,n){"use strict";var r=n(75);r.a},function(t,e,n){"use strict";var r=n(225);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";var r=n(0),i=(n.n(r),n(226));n.n(i);e.a=function(t){return r.createElement("header",{className:"App-header"},r.createElement("img",{src:t.logo,className:"App-logo",alt:"logo"}),r.createElement("h1",{className:"App-title"},"Adsum Component demo"))}},function(t,e){},function(t,e,n){"use strict";n(228)},function(t,e,n){"use strict";var r=n(0),i=(n.n(r),n(17)),o=n(13),a=n(28),s=(n(101),n(231)),u=(n.n(s),function(t){return r.createElement("div",null,r.createElement("h1",null,"Home"))}),c=function(t){return Object(o.b)({changePage:function(){return Object(i.b)("/about-us")}},t)};Object(a.b)(null,c)(u)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(13)),u=n(28),c=n(101),l=n(230),h=(n.n(l),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),f=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),h(e,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){return a.createElement("div",{className:"map-wrapper"},a.createElement("div",{id:"adsum-web-map-container"}))}}]),e}(a.Component),d=function(t){return{mapState:t.map.state}},p=function(t){return Object(s.b)({init:function(){return t(c.a.init())}},t)};Object(u.b)(d,p)(f)},function(t,e){},function(t,e){},function(t,e,n){"use strict";n(233)},function(t,e,n){"use strict";var r=n(0),i=(n.n(r),n(234));n.n(i)},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.diff=e.split=void 0;var i=n(236),o=r(i),a=n(105),s=r(a),u=n(239),c=r(u);e.split=s.default,e.diff=c.default,e.default=o.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":s(e))&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(48),h=r(l),f=n(0),d=r(f),p=n(1),g=r(p),m=n(103),v=r(m),y=n(104),b=h.default.acequire("ace/range"),w=b.Range,_=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return y.editorEvents.forEach(function(t){n[t]=n[t].bind(n)}),n.debounce=y.debounce,n}return a(e,t),c(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.className,r=e.onBeforeLoad,i=e.onValidate,o=e.mode,a=e.focus,s=e.theme,u=e.fontSize,c=e.value,l=e.defaultValue,f=e.cursorStart,d=e.showGutter,p=e.wrapEnabled,g=e.showPrintMargin,m=e.scrollMargin,v=void 0===m?[0,0,0,0]:m,b=e.keyboardHandler,w=e.onLoad,_=e.commands,x=e.annotations,E=e.markers;this.editor=h.default.edit(this.refEditor),r&&r(h.default);for(var A=Object.keys(this.props.editorProps),C=0;C<A.length;C++)this.editor[A[C]]=this.props.editorProps[A[C]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),this.editor.getSession().setMode("ace/mode/"+o),this.editor.setTheme("ace/theme/"+s),this.editor.setFontSize(u),this.editor.getSession().setValue(l||c,f),this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(d),this.editor.getSession().setUseWrapMode(p),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),i&&this.editor.getSession().on("changeAnnotation",function(){var e=t.editor.getSession().getAnnotations();t.props.onValidate(e)}),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(x||[]),E&&E.length>0&&this.handleMarkers(E);for(var S=this.editor.$options,M=0;M<y.editorOptions.length;M++){var T=y.editorOptions[M];S.hasOwnProperty(T)?this.editor.setOption(T,this.props[T]):this.props[T]&&console.warn("ReactAce: editor option "+T+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}this.handleOptions(this.props),Array.isArray(_)&&_.forEach(function(e){"string"==typeof e.exec?t.editor.commands.bindKey(e.bindKey,e.exec):t.editor.commands.addCommand(e)}),b&&this.editor.setKeyboardHandler("ace/keyboard/"+b),n&&(this.refEditor.className+=" "+n),a&&this.editor.focus(),w&&w(this.editor),this.editor.resize()}},{key:"componentWillReceiveProps",value:function(t){for(var e=this.props,n=0;n<y.editorOptions.length;n++){var r=y.editorOptions[n];t[r]!==e[r]&&this.editor.setOption(r,t[r])}if(t.className!==e.className){var i=this.refEditor.className,o=i.trim().split(" ");e.className.trim().split(" ").forEach(function(t){var e=o.indexOf(t);o.splice(e,1)}),this.refEditor.className=" "+t.className+" "+o.join(" ")}if(t.mode!==e.mode&&this.editor.getSession().setMode("ace/mode/"+t.mode),t.theme!==e.theme&&this.editor.setTheme("ace/theme/"+t.theme),t.keyboardHandler!==e.keyboardHandler&&(t.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+t.keyboardHandler):this.editor.setKeyboardHandler(null)),t.fontSize!==e.fontSize&&this.editor.setFontSize(t.fontSize),t.wrapEnabled!==e.wrapEnabled&&this.editor.getSession().setUseWrapMode(t.wrapEnabled),t.showPrintMargin!==e.showPrintMargin&&this.editor.setShowPrintMargin(t.showPrintMargin),t.showGutter!==e.showGutter&&this.editor.renderer.setShowGutter(t.showGutter),(0,v.default)(t.setOptions,e.setOptions)||this.handleOptions(t),(0,v.default)(t.annotations,e.annotations)||this.editor.getSession().setAnnotations(t.annotations||[]),!(0,v.default)(t.markers,e.markers)&&Array.isArray(t.markers)&&this.handleMarkers(t.markers),(0,v.default)(t.scrollMargin,e.scrollMargin)||this.handleScrollMargins(t.scrollMargin),this.editor&&this.editor.getValue()!==t.value){this.silent=!0;var a=this.editor.session.selection.toJSON();this.editor.setValue(t.value,t.cursorStart),this.editor.session.selection.fromJSON(a),this.silent=!1}t.focus&&!e.focus&&this.editor.focus()}},{key:"componentDidUpdate",value:function(t){t.height===this.props.height&&t.width===this.props.width||this.editor.resize()}},{key:"handleScrollMargins",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0];this.editor.renderer.setScrollMargins(t[0],t[1],t[2],t[3])}},{key:"componentWillUnmount",value:function(){this.editor.destroy(),this.editor=null}},{key:"onChange",value:function(t){if(this.props.onChange&&!this.silent){var e=this.editor.getValue();this.props.onChange(e,t)}}},{key:"onSelectionChange",value:function(t){if(this.props.onSelectionChange){var e=this.editor.getSelection();this.props.onSelectionChange(e,t)}}},{key:"onCursorChange",value:function(t){if(this.props.onCursorChange){var e=this.editor.getSelection();this.props.onCursorChange(e,t)}}},{key:"onInput",value:function(t){this.props.onInput&&this.props.onInput(t)}},{key:"onFocus",value:function(t){this.props.onFocus&&this.props.onFocus(t)}},{key:"onBlur",value:function(t){this.props.onBlur&&this.props.onBlur(t,this.editor)}},{key:"onCopy",value:function(t){this.props.onCopy&&this.props.onCopy(t)}},{key:"onPaste",value:function(t){this.props.onPaste&&this.props.onPaste(t)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(t){for(var e=Object.keys(t.setOptions),n=0;n<e.length;n++)this.editor.setOption(e[n],t.setOptions[e[n]])}},{key:"handleMarkers",value:function(t){var e=this,n=this.editor.getSession().getMarkers(!0);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);n=this.editor.getSession().getMarkers(!1);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);t.forEach(function(t){var n=t.startRow,r=t.startCol,i=t.endRow,o=t.endCol,a=t.className,s=t.type,u=t.inFront,c=void 0!==u&&u,l=new w(n,r,i,o);e.editor.getSession().addMarker(l,a,s,c)})}},{key:"updateRef",value:function(t){this.refEditor=t}},{key:"render",value:function(){var t=this.props,e=t.name,n=t.width,r=t.height,i=t.style,o=u({width:n,height:r},i);return d.default.createElement("div",{ref:this.updateRef,id:e,style:o})}}]),e}(f.Component);e.default=_,_.propTypes={mode:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.oneOfType([g.default.number,g.default.string]),showGutter:g.default.bool,onChange:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onInput:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.string,defaultValue:g.default.string,onLoad:g.default.func,onSelectionChange:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,onValidate:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,debounceChangePeriod:g.default.number,editorProps:g.default.object,setOptions:g.default.object,style:g.default.object,scrollMargin:g.default.array,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array},_.defaultProps={name:"brace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}},function(t,e,n){(function(e){function n(t,e){return null==t?void 0:t[e]}function r(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function o(){this.__data__=vt?vt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(vt){var n=e[t];return n===V?void 0:n}return ht.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return vt?void 0!==e[t]:ht.call(e,t)}function c(t,e){return this.__data__[t]=vt&&void 0===e?V:e,this}function l(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function h(){this.__data__=[]}function f(t){var e=this.__data__,n=x(e,t);return!(n<0)&&(n==e.length-1?e.pop():gt.call(e,n,1),!0)}function d(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]}function p(t){return x(this.__data__,t)>-1}function g(t,e){var n=this.__data__,r=x(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function m(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function v(){this.__data__={hash:new i,map:new(mt||l),string:new i}}function y(t){return M(this,t).delete(t)}function b(t){return M(this,t).get(t)}function w(t){return M(this,t).has(t)}function _(t,e){return M(this,t).set(t,e),this}function x(t,e){for(var n=t.length;n--;)if(D(t[n][0],e))return n;return-1}function E(t,e){e=k(e,t)?[e]:S(e);for(var n=0,r=e.length;null!=t&&n<r;)t=t[P(e[n++])];return n&&n==r?t:void 0}function A(t){return!(!I(t)||F(t))&&(B(t)||r(t)?dt:et).test(L(t))}function C(t){if("string"==typeof t)return t;if(j(t))return bt?bt.call(t):"";var e=t+"";return"0"==e&&1/t==-W?"-0":e}function S(t){return _t(t)?t:wt(t)}function M(t,e){var n=t.__data__;return O(e)?n["string"==typeof e?"string":"hash"]:n.map}function T(t,e){var r=n(t,e);return A(r)?r:void 0}function k(t,e){if(_t(t))return!1;var n="undefined"===typeof t?"undefined":z(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!j(t))||(K.test(t)||!Y.test(t)||null!=e&&t in Object(e))}function O(t){var e="undefined"===typeof t?"undefined":z(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function F(t){return!!ct&&ct in t}function P(t){if("string"==typeof t||j(t))return t;var e=t+"";return"0"==e&&1/t==-W?"-0":e}function L(t){if(null!=t){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(H);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(R.Cache||m),n}function D(t,e){return t===e||t!==t&&e!==e}function B(t){var e=I(t)?ft.call(t):"";return e==G||e==q}function I(t){var e="undefined"===typeof t?"undefined":z(t);return!!t&&("object"==e||"function"==e)}function N(t){return!!t&&"object"==("undefined"===typeof t?"undefined":z(t))}function j(t){return"symbol"==("undefined"===typeof t?"undefined":z(t))||N(t)&&ft.call(t)==X}function U(t){return null==t?"":C(t)}function $(t,e,n){var r=null==t?void 0:E(t,e);return void 0===r?n:r}var z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H="Expected a function",V="__lodash_hash_undefined__",W=1/0,G="[object Function]",q="[object GeneratorFunction]",X="[object Symbol]",Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,Z=/^\./,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,tt=/\\(\\)?/g,et=/^\[object .+?Constructor\]$/,nt="object"==("undefined"===typeof e?"undefined":z(e))&&e&&e.Object===Object&&e,rt="object"==("undefined"===typeof self?"undefined":z(self))&&self&&self.Object===Object&&self,it=nt||rt||Function("return this")(),ot=Array.prototype,at=Function.prototype,st=Object.prototype,ut=it["__core-js_shared__"],ct=function(){var t=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lt=at.toString,ht=st.hasOwnProperty,ft=st.toString,dt=RegExp("^"+lt.call(ht).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=it.Symbol,gt=ot.splice,mt=T(it,"Map"),vt=T(Object,"create"),yt=pt?pt.prototype:void 0,bt=yt?yt.toString:void 0;i.prototype.clear=o,i.prototype.delete=a,i.prototype.get=s,i.prototype.has=u,i.prototype.set=c,l.prototype.clear=h,l.prototype.delete=f,l.prototype.get=d,l.prototype.has=p,l.prototype.set=g,m.prototype.clear=v,m.prototype.delete=y,m.prototype.get=b,m.prototype.has=w,m.prototype.set=_;var wt=R(function(t){t=U(t);var e=[];return Z.test(t)&&e.push(""),t.replace(J,function(t,n,r,i){e.push(r?i.replace(tt,"$1"):n||t)}),e});R.Cache=m;var _t=Array.isArray;t.exports=$}).call(e,n(6))},function(t,e){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],function(t,e,n){"use strict";function r(t,e){this.$u=t,this.$doc=e}var i=t("./lib/oop"),o=t("./lib/lang"),a=t("./lib/event_emitter").EventEmitter,s=t("./editor").Editor,u=t("./virtual_renderer").VirtualRenderer,c=t("./edit_session").EditSession,l=function(t,e,n){this.BELOW=1,this.BESIDE=0,this.$container=t,this.$theme=e,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(t){this.$cEditor=t}.bind(this))};(function(){i.implement(this,a),this.$createEditor=function(){var t=document.createElement("div");t.className=this.$editorCSS,t.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(t);var e=new s(new u(t,this.$theme));return e.on("focus",function(){this._emit("focus",e)}.bind(this)),this.$editors.push(e),e.setFontSize(this.$fontSize),e},this.setSplits=function(t){var e;if(t<1)throw"The number of splits have to be > 0!";if(t!=this.$splits){if(t>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<t;)e=this.$editors[this.$splits],this.$container.appendChild(e.container),e.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<t;)this.$createEditor(),this.$splits++}else for(;this.$splits>t;)e=this.$editors[this.$splits-1],this.$container.removeChild(e.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(t){return this.$editors[t]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(t){this.$editors.forEach(function(e){e.setTheme(t)})},this.setKeyboardHandler=function(t){this.$editors.forEach(function(e){e.setKeyboardHandler(t)})},this.forEach=function(t,e){this.$editors.forEach(t,e)},this.$fontSize="",this.setFontSize=function(t){this.$fontSize=t,this.forEach(function(e){e.setFontSize(t)})},this.$cloneSession=function(t){var e=new c(t.getDocument(),t.getMode()),n=t.getUndoManager();if(n){var i=new r(n,e);e.setUndoManager(i)}return e.$informUndoManager=o.delayedCall(function(){e.$deltas=[]}),e.setTabSize(t.getTabSize()),e.setUseSoftTabs(t.getUseSoftTabs()),e.setOverwrite(t.getOverwrite()),e.setBreakpoints(t.getBreakpoints()),e.setUseWrapMode(t.getUseWrapMode()),e.setUseWorker(t.getUseWorker()),e.setWrapLimitRange(t.$wrapLimitRange.min,t.$wrapLimitRange.max),e.$foldData=t.$cloneFoldData(),e},this.setSession=function(t,e){var n;return n=null==e?this.$cEditor:this.$editors[e],this.$editors.some(function(e){return e.session===t})&&(t=this.$cloneSession(t)),n.setSession(t),t},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(t){this.$orientation!=t&&(this.$orientation=t,this.resize())},this.resize=function(){var t,e=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var r=e/this.$splits,i=0;i<this.$splits;i++)t=this.$editors[i],t.container.style.width=r+"px",t.container.style.top="0px",t.container.style.left=i*r+"px",t.container.style.height=n+"px",t.resize();else for(var o=n/this.$splits,i=0;i<this.$splits;i++)t=this.$editors[i],t.container.style.width=e+"px",t.container.style.top=i*o+"px",t.container.style.left="0px",t.container.style.height=o+"px",t.resize()}}).call(l.prototype),function(){this.execute=function(t){this.$u.execute(t)},this.undo=function(){var t=this.$u.undo(!0);t&&this.$doc.selection.setSelectionRange(t)},this.redo=function(){var t=this.$u.redo(!0);t&&this.$doc.selection.setSelectionRange(t)},this.reset=function(){this.$u.reset()},this.hasUndo=function(){return this.$u.hasUndo()},this.hasRedo=function(){return this.$u.hasRedo()}}.call(r.prototype),e.Split=l}),ace.define("ace/ext/split",["require","exports","module","ace/split"],function(t,e,n){"use strict";n.exports=t("../split")}),function(){ace.acequire(["ace/ext/split"],function(){})}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":s(e))&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(105),l=r(c),h=n(0),f=r(h),d=n(1),p=r(d),g=n(240),m=r(g),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return a(e,t),u(e,[{key:"onChange",value:function(t){this.setState({value:t}),this.props.onChange&&this.props.onChange(t)}},{key:"diff",value:function(){var t=new m.default,e=this.state.value[0],n=this.state.value[1];if(0===e.length&&0===n.length)return[];var r=t.diff_main(e,n);t.diff_cleanupSemantic(r);var i=this.generateDiffedLines(r);return this.setCodeMarkers(i)}},{key:"generateDiffedLines",value:function(t){var e={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1},n={left:[],right:[]},r={left:1,right:1};return t.forEach(function(t){var i=t[0],o=t[1],a=o.split("\n").length-1;if(0!==o.length){var s=o[0],u=o[o.length-1],c=0;switch(i){case e.DIFF_EQUAL:r.left+=a,r.right+=a;break;case e.DIFF_DELETE:"\n"===s&&(r.left++,a--),c=a,0===c&&n.right.push({startLine:r.right,endLine:r.right}),"\n"===u&&(c-=1),n.left.push({startLine:r.left,endLine:r.left+c}),r.left+=a;break;case e.DIFF_INSERT:"\n"===s&&(r.right++,a--),c=a,0===c&&n.left.push({startLine:r.left,endLine:r.left}),"\n"===u&&(c-=1),n.right.push({startLine:r.right,endLine:r.right+c}),r.right+=a;break;default:throw new Error("Diff type was not defined.")}}}),n}},{key:"setCodeMarkers",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:[],right:[]},e=[],n={left:[],right:[]},r=0;r<t.left.length;r++){var i={startRow:t.left[r].startLine-1,endRow:t.left[r].endLine,type:"text",className:"codeMarker"};n.left.push(i)}for(var o=0;o<t.right.length;o++){var a={startRow:t.right[o].startLine-1,endRow:t.right[o].endLine,type:"text",className:"codeMarker"};n.right.push(a)}return e[0]=n.left,e[1]=n.right,e}},{key:"render",value:function(){var t=this.diff();return f.default.createElement(l.default,{name:this.props.name,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:t})}}]),e}(h.Component);e.default=v,v.propTypes={cursorStart:p.default.number,editorProps:p.default.object,enableBasicAutocompletion:p.default.bool,enableLiveAutocompletion:p.default.bool,focus:p.default.bool,fontSize:p.default.number,height:p.default.string,highlightActiveLine:p.default.bool,maxLines:p.default.func,minLines:p.default.func,mode:p.default.string,name:p.default.string,onLoad:p.default.func,onPaste:p.default.func,onScroll:p.default.func,onChange:p.default.func,orientation:p.default.string,readOnly:p.default.bool,scrollMargin:p.default.array,setOptions:p.default.object,showGutter:p.default.bool,showPrintMargin:p.default.bool,splits:p.default.number,style:p.default.object,tabSize:p.default.number,theme:p.default.string,value:p.default.array,width:p.default.string,wrapEnabled:p.default.bool},v.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"brace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0}},function(t,e,n){"use strict";function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.Diff,r.prototype.diff_main=function(t,e,n,r){"undefined"==typeof r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];"undefined"==typeof n&&(n=!0);var o=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var u=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var c=this.diff_compute_(t,e,o,i);return s&&c.unshift([0,s]),u&&c.push([0,u]),this.diff_cleanupMerge(c),c},r.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,a=t.length>e.length?e:t,s=o.indexOf(a);if(-1!=s)return i=[[1,o.substring(0,s)],[0,a],[1,o.substring(s+a.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==a.length)return[[-1,t],[1,e]];var u=this.diff_halfMatch_(t,e);if(u){var c=u[0],l=u[1],h=u[2],f=u[3],d=u[4],p=this.diff_main(c,h,n,r),g=this.diff_main(l,f,n,r);return p.concat([[0,d]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},r.prototype.diff_lineMode_=function(t,e,n){var r=this.diff_linesToChars_(t,e);t=r.chars1,e=r.chars2;var i=r.lineArray,o=this.diff_main(t,e,!1,n);this.diff_charsToLines_(o,i),this.diff_cleanupSemantic(o),o.push([0,""]);for(var a=0,s=0,u=0,c="",l="";a<o.length;){switch(o[a][0]){case 1:u++,l+=o[a][1];break;case-1:s++,c+=o[a][1];break;case 0:if(s>=1&&u>=1){o.splice(a-s-u,s+u),a=a-s-u;for(var r=this.diff_main(c,l,!1,n),h=r.length-1;h>=0;h--)o.splice(a,0,r[h]);a+=r.length}u=0,s=0,c="",l=""}a++}return o.pop(),o},r.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,o=Math.ceil((r+i)/2),a=o,s=2*o,u=new Array(s),c=new Array(s),l=0;l<s;l++)u[l]=-1,c[l]=-1;u[a+1]=0,c[a+1]=0;for(var h=r-i,f=h%2!=0,d=0,p=0,g=0,m=0,v=0;v<o&&!((new Date).getTime()>n);v++){for(var y=-v+d;y<=v-p;y+=2){var b,w=a+y;b=y==-v||y!=v&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1;for(var _=b-y;b<r&&_<i&&t.charAt(b)==e.charAt(_);)b++,_++;if(u[w]=b,b>r)p+=2;else if(_>i)d+=2;else if(f){var x=a+h-y;if(x>=0&&x<s&&-1!=c[x]){var E=r-c[x];if(b>=E)return this.diff_bisectSplit_(t,e,b,_,n)}}}for(var A=-v+g;A<=v-m;A+=2){var E,x=a+A;E=A==-v||A!=v&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1;for(var C=E-A;E<r&&C<i&&t.charAt(r-E-1)==e.charAt(i-C-1);)E++,C++;if(c[x]=E,E>r)m+=2;else if(C>i)g+=2;else if(!f){var w=a+h-A;if(w>=0&&w<s&&-1!=u[w]){var b=u[w],_=a+b-w;if(E=r-E,b>=E)return this.diff_bisectSplit_(t,e,b,_,n)}}}}return[[-1,t],[1,e]]},r.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),u=e.substring(r),c=this.diff_main(o,a,!1,i),l=this.diff_main(s,u,!1,i);return c.concat(l)},r.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,o=-1,a=r.length;o<t.length-1;){o=t.indexOf("\n",n),-1==o&&(o=t.length-1);var s=t.substring(n,o+1);n=o+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?e+=String.fromCharCode(i[s]):(e+=String.fromCharCode(a),i[s]=a,r[a++]=s)}return e}var r=[],i={};return r[0]="",{chars1:n(t),chars2:n(e),lineArray:r}},r.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},r.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,a=1;;){var s=t.substring(i-a),u=e.indexOf(s);if(-1==u)return o;a+=u,0!=u&&t.substring(i-a)!=e.substring(0,a)||(o=a,a++)}},r.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var r,i,o,s,u=t.substring(n,n+Math.floor(t.length/4)),c=-1,l="";-1!=(c=e.indexOf(u,c+1));){var h=a.diff_commonPrefix(t.substring(n),e.substring(c)),f=a.diff_commonSuffix(t.substring(0,n),e.substring(0,c));l.length<f+h&&(l=e.substring(c-f,c)+e.substring(c,c+h),r=t.substring(0,n-f),i=t.substring(n+h),o=e.substring(0,c-f),s=e.substring(c+h))}return 2*l.length>=t.length?[r,i,o,s,l]:null}if(this.Diff_Timeout<=0)return null;var r=t.length>e.length?t:e,i=t.length>e.length?e:t;if(r.length<4||2*i.length<r.length)return null;var o,a=this,s=n(r,i,Math.ceil(r.length/4)),u=n(r,i,Math.ceil(r.length/2));if(!s&&!u)return null;o=u?s&&s[4].length>u[4].length?s:u:s;var c,l,h,f;return t.length>e.length?(c=o[0],l=o[1],h=o[2],f=o[3]):(h=o[0],f=o[1],c=o[2],l=o[3]),[c,l,h,f,o[4]]},r.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,o=0,a=0,s=0,u=0,c=0;o<t.length;)0==t[o][0]?(n[r++]=o,a=u,s=c,u=0,c=0,i=t[o][1]):(1==t[o][0]?u+=t[o][1].length:c+=t[o][1].length,i&&i.length<=Math.max(a,s)&&i.length<=Math.max(u,c)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,r--,o=r>0?n[r-1]:-1,a=0,s=0,u=0,c=0,i=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var l=t[o-1][1],h=t[o][1],f=this.diff_commonOverlap_(l,h),d=this.diff_commonOverlap_(h,l);f>=d?(f>=l.length/2||f>=h.length/2)&&(t.splice(o,0,[0,h.substring(0,f)]),t[o-1][1]=l.substring(0,l.length-f),t[o+1][1]=h.substring(f),o++):(d>=l.length/2||d>=h.length/2)&&(t.splice(o,0,[0,l.substring(0,d)]),t[o-1][0]=1,t[o-1][1]=h.substring(0,h.length-d),t[o+1][0]=-1,t[o+1][1]=l.substring(d),o++),o++}o++}},r.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),o=n.match(r.nonAlphaNumericRegex_),a=i.match(r.nonAlphaNumericRegex_),s=o&&n.match(r.whitespaceRegex_),u=a&&i.match(r.whitespaceRegex_),c=s&&n.match(r.linebreakRegex_),l=u&&i.match(r.linebreakRegex_),h=c&&t.match(r.blanklineEndRegex_),f=l&&e.match(r.blanklineStartRegex_);return h||f?5:c||l?4:o&&!s&&u?3:s||u?2:o||a?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var i=t[n-1][1],o=t[n][1],a=t[n+1][1],s=this.diff_commonSuffix(i,o);if(s){var u=o.substring(o.length-s);i=i.substring(0,i.length-s),o=u+o.substring(0,o.length-s),a=u+a}for(var c=i,l=o,h=a,f=e(i,o)+e(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var d=e(i,o)+e(o,a);d>=f&&(f=d,c=i,l=o,h=a)}t[n-1][1]!=c&&(c?t[n-1][1]=c:(t.splice(n-1,1),n--),t[n][1]=l,h?t[n+1][1]=h:(t.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,o=0,a=!1,s=!1,u=!1,c=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(u||c)?(n[r++]=o,a=u,s=c,i=t[o][1]):(r=0,i=null),u=c=!1):(-1==t[o][0]?c=!0:u=!0,i&&(a&&s&&u&&c||i.length<this.Diff_EditCost/2&&a+s+u+c==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,a&&s?(u=c=!0,r=0):(r--,o=r>0?n[r-1]:-1,u=c=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,o="",a="";n<t.length;)switch(t[n][0]){case 1:i++,a+=t[n][1],n++;break;case-1:r++,o+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(e=this.diff_commonPrefix(a,o),0!==e&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=a.substring(0,e):(t.splice(0,0,[0,a.substring(0,e)]),n++),a=a.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(a,o))&&(t[n][1]=a.substring(a.length-e)+t[n][1],a=a.substring(0,a.length-e),o=o.substring(0,o.length-e))),0===r?t.splice(n-i,r+i,[1,a]):0===i?t.splice(n-r,r+i,[-1,o]):t.splice(n-r-i,r+i,[-1,o],[1,a]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,o="",a=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,o=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(r>e));n++)o=r,a=i;return t.length!=n&&-1===t[n][0]?a:a+(e-o)},r.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,a=0;a<t.length;a++){var s=t[a][0],u=t[a][1],c=u.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(s){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},r.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t[i][0],a=t[i][1];switch(o){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},r.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,o=e.split(/\t/g),a=0;a<o.length;a++){var s=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[r++]=[1,decodeURI(s)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var u=parseInt(s,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+s);var c=t.substring(i,i+=u);"="==o[a].charAt(0)?n[r++]=[0,c]:n[r++]=[-1,c];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},r.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},r.prototype.match_bitap_=function(t,e,n){function r(t,r){var i=t/e.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),o=this,a=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(a=Math.min(r(0,s),a),-1!=(s=t.lastIndexOf(e,n+e.length))&&(a=Math.min(r(0,s),a)));var u=1<<e.length-1;s=-1;for(var c,l,h,f=e.length+t.length,d=0;d<e.length;d++){for(c=0,l=f;c<l;)r(d,n+l)<=a?c=l:f=l,l=Math.floor((f-c)/2+c);f=l;var p=Math.max(1,n-l+1),g=Math.min(n+l,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<d)-1;for(var v=g;v>=p;v--){var y=i[t.charAt(v-1)];if(m[v]=0===d?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(h[v+1]|h[v])<<1|1|h[v+1],m[v]&u){var b=r(d,v-1);if(b<=a){if(a=b,!((s=v-1)>n))break;p=Math.max(1,2*n-s)}}}if(r(d+1,n)>a)break;h=m}return s},r.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},r.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+r);o&&t.diffs.push([0,o]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+o.length,t.length2+=i.length+o.length}},r.prototype.patch_make=function(t,e,n){var o,a;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof n)o=t,a=this.diff_main(o,e,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&"object"==("undefined"===typeof t?"undefined":i(t))&&"undefined"==typeof e&&"undefined"==typeof n)a=t,o=this.diff_text1(a);else if("string"==typeof t&&e&&"object"==("undefined"===typeof e?"undefined":i(e))&&"undefined"==typeof n)o=t,a=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=("undefined"===typeof n?"undefined":i(n)))throw new Error("Unknown call format to patch_make.");o=t,a=n}if(0===a.length)return[];for(var s=[],u=new r.patch_obj,c=0,l=0,h=0,f=o,d=o,p=0;p<a.length;p++){var g=a[p][0],m=a[p][1];switch(c||0===g||(u.start1=l,u.start2=h),g){case 1:u.diffs[c++]=a[p],u.length2+=m.length,d=d.substring(0,h)+m+d.substring(h);break;case-1:u.length1+=m.length,u.diffs[c++]=a[p],d=d.substring(0,h)+d.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&c&&a.length!=p+1?(u.diffs[c++]=a[p],u.length1+=m.length,u.length2+=m.length):m.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(u,f),s.push(u),u=new r.patch_obj,c=0,f=d,l=h)}1!==g&&(l+=m.length),-1!==g&&(h+=m.length)}return c&&(this.patch_addContext_(u,f),s.push(u)),s},r.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],o=new r.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=i.diffs[a].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,e[n]=o}return e},r.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],o=0;o<t.length;o++){var a,s=t[o].start2+r,u=this.diff_text1(t[o].diffs),c=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(e,u.substring(0,this.Match_MaxBits),s))&&(-1==(c=this.match_main(e,u.substring(u.length-this.Match_MaxBits),s+u.length-this.Match_MaxBits))||a>=c)&&(a=-1):a=this.match_main(e,u,s),-1==a)i[o]=!1,r-=t[o].length2-t[o].length1;else{i[o]=!0,r=a-s;var l;if(l=-1==c?e.substring(a,a+u.length):e.substring(a,c+this.Match_MaxBits),u==l)e=e.substring(0,a)+this.diff_text2(t[o].diffs)+e.substring(a+u.length);else{var h=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(h)/u.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,d=0,p=0;p<t[o].diffs.length;p++){var g=t[o].diffs[p];0!==g[0]&&(f=this.diff_xIndex(h,d)),1===g[0]?e=e.substring(0,a+f)+g[1]+e.substring(a+f):-1===g[0]&&(e=e.substring(0,a+f)+e.substring(a+this.diff_xIndex(h,d+g[1].length))),-1!==g[0]&&(d+=g[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,i]},r.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>o[0][1].length){var a=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}if(i=t[t.length-1],o=i.diffs,0==o.length||0!=o[o.length-1][0])o.push([0,n]),i.length1+=e,i.length2+=e;else if(e>o[o.length-1][1].length){var a=e-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),i.length1+=a,i.length2+=a}return n},r.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var o=i.start1,a=i.start2,s="";0!==i.diffs.length;){var u=new r.patch_obj,c=!0;for(u.start1=o-s.length,u.start2=a-s.length,""!==s&&(u.length1=u.length2=s.length,u.diffs.push([0,s]));0!==i.diffs.length&&u.length1<e-this.Patch_Margin;){var l=i.diffs[0][0],h=i.diffs[0][1];1===l?(u.length2+=h.length,a+=h.length,u.diffs.push(i.diffs.shift()),c=!1):-1===l&&1==u.diffs.length&&0==u.diffs[0][0]&&h.length>2*e?(u.length1+=h.length,o+=h.length,c=!1,u.diffs.push([l,h]),i.diffs.shift()):(h=h.substring(0,e-u.length1-this.Patch_Margin),u.length1+=h.length,o+=h.length,0===l?(u.length2+=h.length,a+=h.length):c=!1,u.diffs.push([l,h]),h==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}s=this.diff_text2(u.diffs),s=s.substring(s.length-this.Patch_Margin);var f=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==f&&(u.length1+=f.length,u.length2+=f.length,0!==u.diffs.length&&0===u.diffs[u.diffs.length-1][0]?u.diffs[u.diffs.length-1][1]+=f:u.diffs.push([0,f])),c||t.splice(++n,0,u)}}},r.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},r.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var a=n[i].match(o);if(!a)throw new Error("Invalid patch string: "+n[i]);var s=new r.patch_obj;for(e.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),i++;i<n.length;){var u=n[i].charAt(0);try{var c=decodeURI(n[i].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==u)s.diffs.push([-1,c]);else if("+"==u)s.diffs.push([1,c]);else if(" "==u)s.diffs.push([0,c]);else{if("@"==u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+c)}i++}}return e},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,r=["@@ -"+t+" +"+e+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}r[i+1]=n+encodeURI(this.diffs[i][1])+"\n"}return r.join("").replace(/%20/g," ")},t.exports=r,t.exports.diff_match_patch=r,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0},function(t,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,e,n){"use strict";var r=t("../lib/oop"),i=t("./text_highlight_rules").TextHighlightRules,o=function t(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},t.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};r.inherits(o,i),o.getTagRule=function(t){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(t){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:t}},o.getEndRule=function(t){return{token:"comment.doc",regex:"\\*\\/",next:t}},e.DocCommentHighlightRules=o}),ace.define("ace/mode/jsx_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,e,n){var r=t("../lib/oop"),i=t("../lib/lang"),o=t("./doc_comment_highlight_rules").DocCommentHighlightRules,a=t("./text_highlight_rules").TextHighlightRules,s=function(){var t=i.arrayToMap("break|do|instanceof|typeof|case|else|new|var|catch|finally|return|void|continue|for|switch|default|while|function|this|if|throw|delete|in|try|class|extends|super|import|from|into|implements|interface|static|mixin|override|abstract|final|number|int|string|boolean|variant|log|assert".split("|")),e=i.arrayToMap("null|true|false|NaN|Infinity|__FILE__|__LINE__|undefined".split("|")),n=i.arrayToMap("debugger|with|const|export|let|private|public|yield|protected|extern|native|as|operator|__fake__|__readonly__".split("|"));this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},o.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:["storage.type","text","entity.name.function"],regex:"(function)(\\s+)([a-zA-Z_][a-zA-Z0-9_]*\\b)"},{token:function(r){return"this"==r?"variable.language":"function"==r?"storage.type":t.hasOwnProperty(r)||n.hasOwnProperty(r)?"keyword":e.hasOwnProperty(r)?"constant.language":/^_?[A-Z][a-zA-Z0-9_]*$/.test(r)?"language.support.class":"identifier"},regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|==|=|!=|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({<]"},{token:"paren.rparen",regex:"[\\])}>]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]},this.embedRules(o,"doc-",[o.getEndRule("start")])};r.inherits(s,a),e.JsxHighlightRules=s}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,e,n){"use strict";var r=t("../range").Range,i=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var n=t.getLine(e),i=n.match(/^(\s*\})/);if(!i)return 0;var o=i[1].length,a=t.findMatchingBracket({row:e,column:o});if(!a||a.row==e)return 0;var s=this.$getIndent(t.getLine(a.row));t.replace(new r(e,0,e,o-1),s)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(i.prototype),e.MatchingBraceOutdent=i}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,e,n){"use strict";var r=t("../../lib/oop"),i=t("../../range").Range,o=t("./fold_mode").FoldMode,a=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};r.inherits(a,o),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,n){var r=t.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(t,e,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(t,e,n,r){var i=t.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(t,i,n);var o=i.match(this.foldingStartMarker);if(o){var a=o.index;if(o[1])return this.openingBracketBlock(t,o[1],n,a);var s=t.getCommentFoldRange(n,a+o[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(t,n):"all"!=e&&(s=null)),s}if("markbegin"!==e){var o=i.match(this.foldingStopMarker);if(o){var a=o.index+o[0].length;return o[1]?this.closingBracketBlock(t,o[1],n,a):t.getCommentFoldRange(n,a,-1)}}},this.getSectionRange=function(t,e){var n=t.getLine(e),r=n.search(/\S/),o=e,a=n.length;e+=1;for(var s=e,u=t.getLength();++e<u;){n=t.getLine(e);var c=n.search(/\S/);if(-1!==c){if(r>c)break;var l=this.getFoldWidgetRange(t,"all",e);if(l){if(l.start.row<=o)break;if(l.isMultiLine())e=l.end.row;else if(r==c)break}s=e}}return new i(o,a,s,t.getLine(s).length)},this.getCommentRegionBlock=function(t,e,n){for(var r=e.search(/\s*$/),o=t.getLength(),a=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,u=1;++n<o;){e=t.getLine(n);var c=s.exec(e);if(c&&(c[1]?u--:u++,!u))break}var l=n;if(l>a)return new i(a,r,l,e.length)}}.call(a.prototype)}),ace.define("ace/mode/jsx",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/jsx_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,e,n){"use strict";function r(){this.HighlightRules=a,this.$outdent=new s,this.$behaviour=new u,this.foldingRules=new c}var i=t("../lib/oop"),o=t("./text").Mode,a=t("./jsx_highlight_rules").JsxHighlightRules,s=t("./matching_brace_outdent").MatchingBraceOutdent,u=t("./behaviour/cstyle").CstyleBehaviour,c=t("./folding/cstyle").FoldMode;i.inherits(r,o),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(t,e,n){var r=this.$getIndent(e),i=this.getTokenizer().getLineTokens(e,t),o=i.tokens;if(o.length&&"comment"==o[o.length-1].type)return r;if("start"==t){e.match(/^.*[\{\(\[]\s*$/)&&(r+=n)}return r},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.$id="ace/mode/jsx"}.call(r.prototype),e.Mode=r})},function(t,e){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(t,e,n){e.isDark=!0,e.cssClass="ace-monokai",e.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",t("../lib/dom").importCssString(e.cssText,e.cssClass)})},function(t,e){},function(t,e,n){"use strict";var r=n(245);e.a=r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(46)),u=n.n(s),c=n(246),l=n(283),h=(n.n(l),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.bindAll(),n}return o(e,t),h(e,[{key:"bindAll",value:function(){this.generateThumbNails=this.generateThumbNails.bind(this),this.generatePagination=this.generatePagination.bind(this),this.createPagination=this.createPagination.bind(this),this.displayLogo=this.displayLogo.bind(this),this.onItemClicked=this.onItemClicked.bind(this)}},{key:"onItemClicked",value:function(t){(0,this.props.onItemClicked)(t)}},{key:"createPagination",value:function(){var t=this.props,e=t.items,n=t.itemsPerPage,r=[],i=[],o=0;return u.a.each(e,function(t,a){a===e.length-1?(r.push(t),i.push(r)):o<n?(r.push(t),o++):o===n&&(i.push(r),r=[],r.push(t),o=1)}),i}},{key:"generatePagination",value:function(t){var e=this,n=this.props.listWrapperCSS;return t.length>0?u.a.map(t,function(t,r){return a.createElement("ul",{className:"row item",key:r,style:n},e.generateThumbNails(t))}):a.createElement("ul",{className:"row item",key:"0",style:n},a.createElement("li",{className:"no-result"},"No items"))}},{key:"displayLogo",value:function(t){var e=this.props.logoCSS;return t.logo&&t.logo.uri?a.createElement("img",{className:"thumbnail-panel-logo",src:t.logo.uri,style:e}):a.createElement("span",{className:"thumbnail-panel-logo",style:e},t.name)}},{key:"generateThumbNails",value:function(t){var e=this,n=this.props,r=n.thumbNailWrapperCSS,i=n.logoWrapperCSS,o=n.titleWrapperCSS,s=n.dashCSS,c=n.titleCSS;return u.a.map(t,function(t,n){return a.createElement("li",{className:"thumbnail-wrapper",key:n,onClick:function(){return e.onItemClicked(t)},style:r},a.createElement("span",{className:"btn btn-standard width height"},a.createElement("div",{className:"flex-center"},a.createElement("div",{className:"thumbnail-panel"},a.createElement("div",{className:"thumbnail-panel-logo-div",style:i},e.displayLogo(t)),a.createElement("div",{className:"thumbnail-panel-title-div",style:o},a.createElement("div",{className:"thumbnail-panel-dash-div"},a.createElement("span",{className:"thumbnail-panel-dash",style:s})),a.createElement("div",{className:"thumbnail-panel-title-wrapper"},a.createElement("span",{className:"thumbnail-panel-title",style:c},t.name)))))))})}},{key:"render",value:function(){var t=this.props,e=t.isOpen,n=t.carouselOptions;if(!e)return null;var r=this.createPagination();return a.createElement("div",{className:"templateCarousel-container"},a.createElement("div",{className:"templateCarousel"},a.createElement(c.a,n,this.generatePagination(r))))}}]),e}(a.Component);f.defaultProps={isOpen:!1,items:[],itemsPerPage:0,onItemClicked:null},e.a=f},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===_(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":_(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":_(t)})(t)}function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?l(t):e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return A});var h=n(0),f=n.n(h),d=n(1),p=n.n(d),g=n(247),m=n.n(g),v=n(248),y=n.n(v),b=n(271),w=n(282),_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x=function(t,e,n){null!==t&&"undefined"!==typeof t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on".concat(e),n):t["on".concat(e)]=n)},E=function(t,e,n){null!==t&&"undefined"!==typeof t&&(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on".concat(e),n):t["on".concat(e)]=null)},A=function(t){function e(){var t;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments)),t.displayName="Carousel",t.clickSafe=!0,t.controlsMap=[{func:t.props.renderTopLeftControls,key:"TopLeft"},{func:t.props.renderTopCenterControls,key:"TopCenter"},{func:t.props.renderTopRightControls,key:"TopRight"},{func:t.props.renderCenterLeftControls,key:"CenterLeft"},{func:t.props.renderCenterCenterControls,key:"CenterCenter"},{func:t.props.renderCenterRightControls,key:"CenterRight"},{func:t.props.renderBottomLeftControls,key:"BottomLeft"},{func:t.props.renderBottomCenterControls,key:"BottomCenter"},{func:t.props.renderBottomRightControls,key:"BottomRight"}],t.touchObject={},t.state={currentSlide:t.props.slideIndex,dragging:!1,frameWidth:0,left:0,slideCount:0,slidesToScroll:t.props.slidesToScroll,slideWidth:0,top:0,easing:b.easeCircleOut,isWrappingAround:!1,wrapToIndex:null,resetWrapAroundPosition:!1},t.getTouchEvents=t.getTouchEvents.bind(l(t)),t.getMouseEvents=t.getMouseEvents.bind(l(t)),t.handleMouseOver=t.handleMouseOver.bind(l(t)),t.handleMouseOut=t.handleMouseOut.bind(l(t)),t.handleClick=t.handleClick.bind(l(t)),t.handleSwipe=t.handleSwipe.bind(l(t)),t.swipeDirection=t.swipeDirection.bind(l(t)),t.autoplayIterator=t.autoplayIterator.bind(l(t)),t.startAutoplay=t.startAutoplay.bind(l(t)),t.stopAutoplay=t.stopAutoplay.bind(l(t)),t.resetAutoplay=t.resetAutoplay.bind(l(t)),t.goToSlide=t.goToSlide.bind(l(t)),t.nextSlide=t.nextSlide.bind(l(t)),t.previousSlide=t.previousSlide.bind(l(t)),t.getTargetLeft=t.getTargetLeft.bind(l(t)),t.onResize=t.onResize.bind(l(t)),t.onReadyStateChange=t.onReadyStateChange.bind(l(t)),t.onVisibilityChange=t.onVisibilityChange.bind(l(t)),t.setInitialDimensions=t.setInitialDimensions.bind(l(t)),t.setDimensions=t.setDimensions.bind(l(t)),t.setLeft=t.setLeft.bind(l(t)),t.getListStyles=t.getListStyles.bind(l(t)),t.getFrameStyles=t.getFrameStyles.bind(l(t)),t.getSlideStyles=t.getSlideStyles.bind(l(t)),t.getSlideTargetPosition=t.getSlideTargetPosition.bind(l(t)),t.getSliderStyles=t.getSliderStyles.bind(l(t)),t.getOffsetDeltas=t.getOffsetDeltas.bind(l(t)),t.formatChildren=t.formatChildren.bind(l(t)),t.getChildNodes=t.getChildNodes.bind(l(t)),t.getSlideHeight=t.getSlideHeight.bind(l(t)),t.findMaxHeightSlide=t.findMaxHeightSlide.bind(l(t)),t}return c(e,t),s(e,[{key:"componentWillMount",value:function(){this.setInitialDimensions()}},{key:"componentDidMount",value:function(){this.mounted=!0,this.setDimensions(),this.bindEvents(),this.props.autoplay&&this.startAutoplay()}},{key:"componentWillReceiveProps",value:function(t){var e=f.a.Children.count(t.children);this.setState({slideCount:e}),e<=this.state.currentSlide&&this.goToSlide(Math.max(e-1,0)),this.setDimensions(t),this.props.slideIndex===t.slideIndex||t.slideIndex===this.state.currentSlide||this.state.isWrappingAround||this.goToSlide(t.slideIndex),this.props.autoplay!==t.autoplay&&(t.autoplay?this.startAutoplay():this.stopAutoplay())}},{key:"componentWillUnmount",value:function(){this.unbindEvents(),this.stopAutoplay(),this.mounted=!1}},{key:"getTouchEvents",value:function(){var t=this;return!1===this.props.swiping?null:{onTouchStart:function(e){t.touchObject={startX:e.touches[0].pageX,startY:e.touches[0].pageY},t.handleMouseOver()},onTouchMove:function(e){var n=t.swipeDirection(t.touchObject.startX,e.touches[0].pageX,t.touchObject.startY,e.touches[0].pageY);0!==n&&e.preventDefault();var r=t.props.vertical?Math.round(Math.sqrt(Math.pow(e.touches[0].pageY-t.touchObject.startY,2))):Math.round(Math.sqrt(Math.pow(e.touches[0].pageX-t.touchObject.startX,2)));t.touchObject={startX:t.touchObject.startX,startY:t.touchObject.startY,endX:e.touches[0].pageX,endY:e.touches[0].pageY,length:r,direction:n},t.setState({left:t.props.vertical?0:t.getTargetLeft(t.touchObject.length*t.touchObject.direction),top:t.props.vertical?t.getTargetLeft(t.touchObject.length*t.touchObject.direction):0})},onTouchEnd:function(e){t.handleSwipe(e),t.handleMouseOut()},onTouchCancel:function(e){t.handleSwipe(e)}}}},{key:"getMouseEvents",value:function(){var t=this;return!1===this.props.dragging?null:{onMouseOver:function(){return t.handleMouseOver()},onMouseOut:function(){return t.handleMouseOut()},onMouseDown:function(e){t.touchObject={startX:e.clientX,startY:e.clientY},t.setState({dragging:!0})},onMouseMove:function(e){if(t.state.dragging){var n=t.swipeDirection(t.touchObject.startX,e.clientX,t.touchObject.startY,e.clientY);0!==n&&e.preventDefault();var r=t.props.vertical?Math.round(Math.sqrt(Math.pow(e.clientY-t.touchObject.startY,2))):Math.round(Math.sqrt(Math.pow(e.clientX-t.touchObject.startX,2)));t.touchObject={startX:t.touchObject.startX,startY:t.touchObject.startY,endX:e.clientX,endY:e.clientY,length:r,direction:n},t.setState({left:t.props.vertical?0:t.getTargetLeft(t.touchObject.length*t.touchObject.direction),top:t.props.vertical?t.getTargetLeft(t.touchObject.length*t.touchObject.direction):0})}},onMouseUp:function(e){t.state.dragging&&t.handleSwipe(e)},onMouseLeave:function(e){t.state.dragging&&t.handleSwipe(e)}}}},{key:"pauseAutoplay",value:function(){this.props.autoplay&&(this.autoplayPaused=!0,this.stopAutoplay())}},{key:"unpauseAutoplay",value:function(){this.props.autoplay&&this.autoplayPaused&&(this.startAutoplay(),this.autoplayPaused=null)}},{key:"handleMouseOver",value:function(){this.pauseAutoplay()}},{key:"handleMouseOut",value:function(){this.unpauseAutoplay()}},{key:"handleClick",value:function(t){!0===this.clickSafe&&(t.preventDefault(),t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopPropagation())}},{key:"handleSwipe",value:function(){"undefined"!==typeof this.touchObject.length&&this.touchObject.length>44?this.clickSafe=!0:this.clickSafe=!1;var t=this.props.slidesToShow;"auto"===this.props.slidesToScroll&&(t=this.state.slidesToScroll),this.touchObject.length>this.state.slideWidth/t/5?1===this.touchObject.direction?this.state.currentSlide>=f.a.Children.count(this.props.children)-t&&!this.props.wrapAround?this.setState({easing:b[this.props.edgeEasing]}):this.nextSlide():-1===this.touchObject.direction&&(this.state.currentSlide<=0&&!this.props.wrapAround?this.setState({easing:b[this.props.edgeEasing]}):this.previousSlide()):this.goToSlide(this.state.currentSlide),this.touchObject={},this.setState({dragging:!1})}},{key:"swipeDirection",value:function(t,e,n,r){var i=t-e,o=n-r,a=Math.atan2(o,i),s=Math.round(180*a/Math.PI);return s<0&&(s=360-Math.abs(s)),s<=45&&s>=0?1:s<=360&&s>=315?1:s>=135&&s<=225?-1:!0===this.props.vertical?s>=35&&s<=135?1:-1:0}},{key:"autoplayIterator",value:function(){if(this.props.wrapAround)return void this.nextSlide();this.state.currentSlide!==this.state.slideCount-this.state.slidesToShow?this.nextSlide():this.stopAutoplay()}},{key:"startAutoplay",value:function(){this.autoplayID=setInterval(this.autoplayIterator,this.props.autoplayInterval)}},{key:"resetAutoplay",value:function(){this.props.autoplay&&!this.autoplayPaused&&(this.stopAutoplay(),this.startAutoplay())}},{key:"stopAutoplay",value:function(){this.autoplayID&&clearInterval(this.autoplayID)}},{key:"goToSlide",value:function(t){var e=this;if(this.setState({easing:b[this.props.easing]}),t>=f.a.Children.count(this.props.children)||t<0){if(!this.props.wrapAround)return;if(t>=f.a.Children.count(this.props.children))return this.props.beforeSlide(this.state.currentSlide,0),void this.setState(function(n){return{left:e.props.vertical?0:e.getTargetLeft(e.state.slideWidth,n.currentSlide),top:e.props.vertical?e.getTargetLeft(e.state.slideWidth,n.currentSlide):0,currentSlide:0,isWrappingAround:!0,wrapToIndex:t}},function(){return setTimeout(function(){e.setState({isWrappingAround:!1,resetWrapAroundPosition:!0},function(){e.setState({resetWrapAroundPosition:!1}),e.props.afterSlide(0),e.resetAutoplay()})},e.props.speed)});var n=f.a.Children.count(this.props.children)-this.state.slidesToScroll;return this.props.beforeSlide(this.state.currentSlide,n),void this.setState(function(r){return{left:e.props.vertical?0:e.getTargetLeft(-1,r.currentSlide),top:e.props.vertical?e.getTargetLeft(-1,r.currentSlide):0,currentSlide:n,isWrappingAround:!0,wrapToIndex:t}},function(){return setTimeout(function(){e.setState({isWrappingAround:!1,resetWrapAroundPosition:!0},function(){e.setState({resetWrapAroundPosition:!1}),e.props.afterSlide(n),e.resetAutoplay()})},e.props.speed)})}this.props.beforeSlide(this.state.currentSlide,t),t!==this.state.currentSlide&&this.props.afterSlide(t),this.setState({currentSlide:t},function(){e.resetAutoplay()})}},{key:"nextSlide",value:function(){var t=f.a.Children.count(this.props.children),e=this.props.slidesToShow;if("auto"===this.props.slidesToScroll&&(e=this.state.slidesToScroll),!(this.state.currentSlide>=t-e)||this.props.wrapAround||"left"!==this.props.cellAlign)if(this.props.wrapAround)this.goToSlide(this.state.currentSlide+this.state.slidesToScroll);else{if(1!==this.props.slideWidth)return void this.goToSlide(this.state.currentSlide+this.state.slidesToScroll);var n=this.state.currentSlide+this.state.slidesToScroll,r="left"!==this.props.cellAlign?n:Math.min(n,t-e);this.goToSlide(r)}}},{key:"previousSlide",value:function(){this.state.currentSlide<=0&&!this.props.wrapAround||(this.props.wrapAround?this.goToSlide(this.state.currentSlide-this.state.slidesToScroll):this.goToSlide(Math.max(0,this.state.currentSlide-this.state.slidesToScroll)))}},{key:"getTargetLeft",value:function(t,e){var n,r=e||this.state.currentSlide;switch(this.props.cellAlign){case"left":n=0,n-=this.props.cellSpacing*r;break;case"center":n=(this.state.frameWidth-this.state.slideWidth)/2,n-=this.props.cellSpacing*r;break;case"right":n=this.state.frameWidth-this.state.slideWidth,n-=this.props.cellSpacing*r}var i=this.state.slideWidth*r;return this.state.currentSlide>0&&r+this.state.slidesToScroll>=this.state.slideCount&&1!==this.props.slideWidth&&!this.props.wrapAround&&"auto"===this.props.slidesToScroll&&(i=this.state.slideWidth*this.state.slideCount-this.state.frameWidth,n=0,n-=this.props.cellSpacing*(this.state.slideCount-1)),n-=t||0,-1*(i-n)}},{key:"bindEvents",value:function(){m.a.canUseDOM&&(x(window,"resize",this.onResize),x(document,"readystatechange",this.onReadyStateChange),x(document,"visibilitychange",this.onVisibilityChange))}},{key:"onResize",value:function(){this.setDimensions(null,this.props.onResize)}},{key:"onReadyStateChange",value:function(){this.setDimensions()}},{key:"onVisibilityChange",value:function(){document.hidden?this.pauseAutoplay():this.unpauseAutoplay()}},{key:"unbindEvents",value:function(){m.a.canUseDOM&&(E(window,"resize",this.onResize),E(document,"readystatechange",this.onReadyStateChange))}},{key:"formatChildren",value:function(t){var e=this,n=this.props.vertical?this.state.top:this.state.left;return f.a.Children.map(t,function(t,r){return f.a.createElement("li",{className:"slider-slide",style:e.getSlideStyles(r,n),key:r},t)})}},{key:"setInitialDimensions",value:function(){var t=this,e=this.props.vertical?this.props.initialSlideHeight||0:this.props.initialSlideWidth||0,n=this.props.initialSlideHeight?this.props.initialSlideHeight*this.props.slidesToShow:0,r=n+this.props.cellSpacing*(this.props.slidesToShow-1);this.setState({slideHeight:n,frameWidth:this.props.vertical?r:"100%",slideCount:f.a.Children.count(this.props.children),slideWidth:e},function(){t.setLeft()})}},{key:"findMaxHeightSlide",value:function(t){for(var e=0,n=0;n<t.length;n++)t[n].offsetHeight>e&&(e=t[n].offsetHeight);return e}},{key:"getSlideHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.heightMode,r=t.vertical,i=e[0];return i&&"first"===n?r?i.offsetHeight*t.slidesToShow:i.offsetHeight:"max"===n?this.findMaxHeightSlide(e):"current"===t.heightMode?e[this.state.currentSlide].offsetHeight:100}},{key:"setDimensions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t=t||this.props;var r,i,o=this.frame,a=this.getChildNodes(),s=this.getSlideHeight(t,a);i=t.slidesToScroll,r="number"!==typeof t.slideWidth?parseInt(t.slideWidth):t.vertical?s/t.slidesToShow*t.slideWidth:o.offsetWidth/t.slidesToShow*t.slideWidth,t.vertical||(r-=t.cellSpacing*((100-100/t.slidesToShow)/100));var u=s+t.cellSpacing*(t.slidesToShow-1),c=t.vertical?u:o.offsetWidth;"auto"===t.slidesToScroll&&(i=Math.floor(c/(r+t.cellSpacing))),this.setState({slideHeight:s,frameWidth:c,slideWidth:r,slidesToScroll:i,left:t.vertical?0:this.getTargetLeft(),top:t.vertical?this.getTargetLeft():0},function(){n(),e.setLeft()})}},{key:"getChildNodes",value:function(){return this.frame.childNodes[0].childNodes}},{key:"setLeft",value:function(){this.setState({left:this.props.vertical?0:this.getTargetLeft(),top:this.props.vertical?this.getTargetLeft():0})}},{key:"getListStyles",value:function(t){var e=t.tx,n=t.ty,r=this.state.slideWidth*f.a.Children.count(this.props.children),i=this.props.cellSpacing*f.a.Children.count(this.props.children),o="translate3d(".concat(e,"px, ").concat(n,"px, 0)");return{transform:o,WebkitTransform:o,msTransform:"translate(".concat(e,"px, ").concat(n,"px)"),position:"relative",display:"block",margin:this.props.vertical?"".concat(this.props.cellSpacing/2*-1,"px 0px"):"0px ".concat(this.props.cellSpacing/2*-1,"px"),padding:0,height:this.props.vertical?r+i:this.state.slideHeight,width:this.props.vertical?"auto":r+i,cursor:!0===this.state.dragging?"pointer":"inherit",boxSizing:"border-box",MozBoxSizing:"border-box"}}},{key:"getFrameStyles",value:function(){return{position:"relative",display:"block",overflow:this.props.frameOverflow,height:this.props.vertical?this.state.frameWidth||"initial":"auto",margin:this.props.framePadding,padding:0,transform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",msTransform:"translate(0, 0)",boxSizing:"border-box",MozBoxSizing:"border-box",touchAction:"pinch-zoom ".concat(this.props.vertical?"pan-x":"pan-y")}}},{key:"getSlideStyles",value:function(t,e){var n=this.getSlideTargetPosition(t,e);return{position:"absolute",left:this.props.vertical?0:n,top:this.props.vertical?n:0,display:this.props.vertical?"block":"inline-block",listStyleType:"none",verticalAlign:"top",width:this.props.vertical?"100%":this.state.slideWidth,height:"auto",minHeight:"100%",boxSizing:"border-box",MozBoxSizing:"border-box",marginLeft:this.props.vertical?"auto":this.props.cellSpacing/2,marginRight:this.props.vertical?"auto":this.props.cellSpacing/2,marginTop:this.props.vertical?this.props.cellSpacing/2:"auto",marginBottom:this.props.vertical?this.props.cellSpacing/2:"auto"}}},{key:"getSlideTargetPosition",value:function(t,e){var n=this.state.frameWidth/this.state.slideWidth,r=(this.state.slideWidth+this.props.cellSpacing)*t,i=(this.state.slideWidth+this.props.cellSpacing)*n*-1;if(this.props.wrapAround&&(this.state.isWrappingAround||this.state.dragging)){var o=Math.ceil(e/this.state.slideWidth);if(this.state.slideCount-o<=t)return(this.state.slideWidth+this.props.cellSpacing)*(this.state.slideCount-t)*-1;var a=Math.ceil((Math.abs(e)-Math.abs(i))/this.state.slideWidth);if(1!==this.state.slideWidth&&(a=Math.ceil((Math.abs(e)-this.state.slideWidth)/this.state.slideWidth)),t<=a-1)return(this.state.slideWidth+this.props.cellSpacing)*(this.state.slideCount+t)}return r}},{key:"getSliderStyles",value:function(){return{position:"relative",display:"block",width:this.props.width,height:"auto",boxSizing:"border-box",MozBoxSizing:"border-box",visibility:this.state.slideWidth?"visible":"hidden"}}},{key:"getStyleTagStyles",value:function(){return".slider-slide > img {width: 100%; display: block;}"}},{key:"getDecoratorStyles",value:function(t){switch(t){case"TopLeft":return{position:"absolute",top:0,left:0};case"TopCenter":return{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",WebkitTransform:"translateX(-50%)",msTransform:"translateX(-50%)"};case"TopRight":return{position:"absolute",top:0,right:0};case"CenterLeft":return{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",WebkitTransform:"translateY(-50%)",msTransform:"translateY(-50%)"};case"CenterCenter":return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"};case"CenterRight":return{position:"absolute",top:"50%",right:0,transform:"translateY(-50%)",WebkitTransform:"translateY(-50%)",msTransform:"translateY(-50%)"};case"BottomLeft":return{position:"absolute",bottom:0,left:0};case"BottomCenter":return{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",WebkitTransform:"translateX(-50%)",msTransform:"translateX(-50%)"};case"BottomRight":return{position:"absolute",bottom:0,right:0};default:return{position:"absolute",top:0,left:0}}}},{key:"getOffsetDeltas",value:function(){var t=0;return t=this.state.isWrappingAround?this.getTargetLeft(null,this.state.wrapToIndex):this.getTargetLeft(this.touchObject.length*this.touchObject.direction),{tx:[this.props.vertical?0:t],ty:[this.props.vertical?t:0]}}},{key:"renderControls",value:function(){var t=this;return this.controlsMap.map(function(e){var n=e.func,r=e.key;return n&&"function"===typeof n&&f.a.createElement("div",{className:"slider-control-".concat(r.toLowerCase()),style:t.getDecoratorStyles(r),key:r},n({currentSlide:t.state.currentSlide,slideCount:t.state.slideCount,frameWidth:t.state.frameWidth,slideWidth:t.state.slideWidth,slidesToScroll:t.state.slidesToScroll,cellSpacing:t.props.cellSpacing,slidesToShow:t.props.slidesToShow,wrapAround:t.props.wrapAround,nextSlide:function(){return t.nextSlide()},previousSlide:function(){return t.previousSlide()},goToSlide:function(e){return t.goToSlide(e)}}))})}},{key:"render",value:function(){var t=this,e=this.formatChildren(this.props.children),n=this.state.dragging||this.state.resetWrapAroundPosition?0:this.props.speed,r=this.getFrameStyles(),o=this.getTouchEvents(),a=this.getMouseEvents();return f.a.createElement("div",{className:["slider",this.props.className||""].join(" "),style:i({},this.getSliderStyles(),this.props.style)},f.a.createElement(y.a,{show:!0,start:{tx:0,ty:0},update:i({},this.getOffsetDeltas(),{timing:{duration:n,ease:this.state.easing}}),children:function(n){var s=n.tx,u=n.ty;return f.a.createElement("div",i({className:"slider-frame",ref:function(e){return t.frame=e},style:r},o,a,{onClick:t.handleClick}),f.a.createElement("ul",{className:"slider-list",style:t.getListStyles({tx:s,ty:u})},e))}}),this.renderControls(),f.a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:this.getStyleTagStyles()}}))}}]),e}(f.a.Component);A.propTypes={afterSlide:p.a.func,autoplay:p.a.bool,autoplayInterval:p.a.number,beforeSlide:p.a.func,cellAlign:p.a.oneOf(["left","center","right"]),cellSpacing:p.a.number,dragging:p.a.bool,easing:p.a.string,edgeEasing:p.a.string,frameOverflow:p.a.string,framePadding:p.a.string,heightMode:p.a.oneOf(["first","current","max"]),initialSlideHeight:p.a.number,initialSlideWidth:p.a.number,onResize:p.a.func,renderTopLeftControls:p.a.func,renderTopCenterControls:p.a.func,renderTopRightControls:p.a.func,renderCenterLeftControls:p.a.func,renderCenterCenterControls:p.a.func,renderCenterRightControls:p.a.func,renderBottomLeftControls:p.a.func,renderBottomCenterControls:p.a.func,renderBottomRightControls:p.a.func,slideIndex:p.a.number,slidesToScroll:p.a.oneOfType([p.a.number,p.a.oneOf(["auto"])]),slidesToShow:p.a.number,slideWidth:p.a.oneOfType([p.a.string,p.a.number]),speed:p.a.number,swiping:p.a.bool,vertical:p.a.bool,width:p.a.string,wrapAround:p.a.bool},A.defaultProps={afterSlide:function(){},autoplay:!1,autoplayInterval:3e3,beforeSlide:function(){},cellAlign:"left",cellSpacing:0,dragging:!0,easing:"easeCircleOut",edgeEasing:"easeElasticOut",framePadding:"0px",frameOverflow:"hidden",heightMode:"first",onResize:function(){},slideIndex:0,slidesToScroll:1,slidesToShow:1,style:{},renderCenterLeftControls:function(t){return f.a.createElement(w.c,t)},renderCenterRightControls:function(t){return f.a.createElement(w.a,t)},renderBottomCenterControls:function(t){return f.a.createElement(w.b,t)},slideWidth:1,speed:500,swiping:!0,vertical:!1,width:"100%",wrapAround:!1}},function(t,e,n){var r,i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){"use strict";var o=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:o,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};"object"===i(n(23))&&n(23)?void 0!==(r=function(){return a}.call(e,n,e,t))&&(t.exports=r):"undefined"!==typeof t&&t.exports?t.exports=a:window.ExecutionEnvironment=a}()},function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=n(249),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":a(e))&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=n(49),l=n(252),h=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.state="function"===typeof o.props.start?o.props.start():o.props.start,o.checkTransitionStatus=function(){o.TRANSITION_SCHEDULES||(o.interval.stop(),!1===o.props.show&&(o.renderNull=!0,o.setState(function(t){return t})))},o.interval=null,o.renderNull=!0,a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){!0===this.props.show&&(this.renderNull=!1)},e.prototype.componentDidMount=function(){var t=this.props,e=t.enter,n=t.show;e&&!0===n&&l.transition.call(this,"function"===typeof e?e():e)},e.prototype.componentWillReceiveProps=function(t){var e=this,n=t.show,r=t.start,i=t.enter,o=t.update,a=t.leave;!1===this.props.show&&!0===this.renderNull&&!0===n?(this.renderNull=!1,this.setState(function(){return"function"===typeof r?r():r},function(){i&&l.transition.call(e,"function"===typeof i?i():i)})):!0===this.props.show&&!1===n?a?(l.transition.call(this,"function"===typeof a?a():a),this.interval=(0,c.interval)(this.checkTransitionStatus)):(this.renderNull=!0,this.setState(function(t){return t})):!0===n&&o&&(this.interval&&this.interval.stop(),l.transition.call(this,"function"===typeof o?o():o))},e.prototype.componentWillUnmount=function(){this.interval&&this.interval.stop(),l.stop.call(this)},e.prototype.render=function(){if(!0===this.renderNull)return null;var t=this.props.children(this.state);return t&&u.default.Children.only(t)},e}(s.Component);h.defaultProps={show:!0},e.default=h},function(t,e,n){"use strict";var r=n(50);e.a=function(t,e,n){var i=new r.a;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}},function(t,e,n){"use strict";var r=n(50);e.a=function(t,e,n){var i=new r.a,o=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Object(r.b)():+n,i.restart(function r(a){a+=o,i.restart(r,o+=e,n),t(a)},e,n),i)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(253);Object.defineProperty(e,"transition",{enumerable:!0,get:function(){return r(i).default}});var o=n(270);Object.defineProperty(e,"stop",{enumerable:!0,get:function(){return r(o).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=!1;return function(){e||(e=!0,t.call(this))}}function o(){return++v}function a(t){return+t}function s(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=h({},e),r=n.events||{};delete n.events,Object.keys(r).forEach(function(t){if("function"!==typeof r[t])throw new Error("Event handlers must be a function");r[t]=i(r[t])});var a=n.timing||{};delete n.timing,Object.keys(n).forEach(function(e){var i=[];if("object"===l(n[e])&&!1===Array.isArray(n[e]))Object.keys(n[e]).forEach(function(r){var o=n[e][r];if(Array.isArray(o))1===o.length?i.push(p.default.call(t,e,r,o[0])):(t.setState(function(t){var n,i;return i={},i[e]=h({},t[e],(n={},n[r]=o[0],n)),i}),i.push(p.default.call(t,e,r,o[1])));else if("function"===typeof o){var a=function(){return function(n){t.setState(function(t){var i,a;return a={},a[e]=h({},t[e],(i={},i[r]=o(n),i)),a})}};i.push(a)}else t.setState(function(t){var n,i;return i={},i[e]=h({},t[e],(n={},n[r]=o,n)),i}),i.push(p.default.call(t,e,r,o))});else{var s=n[e];if(Array.isArray(s))1===s.length?i.push(p.default.call(t,null,e,s[0])):(t.setState(function(){var t;return t={},t[e]=s[0],t}),i.push(p.default.call(t,null,e,s[1])));else if("function"===typeof s){var u=function(){return function(n){t.setState(function(){var t;return t={},t[e]=s(n),t})}};i.push(u)}else t.setState(function(){var t;return t={},t[e]=s,t}),i.push(p.default.call(t,null,e,s))}var c=h({},y,a,{time:(0,f.now)()});(0,m.default)(t,e,o(),c,i,r)})}function u(t){var e=this;Array.isArray(t)?t.forEach(function(t){s.call(e,t)}):s.call(this,t)}var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0,e.preset=void 0;var l="function"===typeof Symbol&&"symbol"===c(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":c(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":c(t)},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.newId=o,e.default=u;var f=n(49),d=n(254),p=r(d),g=n(269),m=r(g),v=0,y=e.preset={time:null,delay:0,duration:250,ease:a}},function(t,e,n){"use strict";function r(t){return"transform"===t?a.interpolateTransformSvg:a.interpolate}function i(t,e,n){return function(){var i=this,a=t?this.state[t][e]:this.state[e];if(a===n)return null;var s=r(e)(a,n);return null===t?function(t){i.setState(function(){var n;return n={},n[e]=s(t),n})}:function(n){i.setState(function(r){var i,a;return a={},a[t]=o({},r[t],(i={},i[e]=s(n),i)),a})}}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.getInterpolator=r,e.default=function(t,e,n){return i.call(this,t,e,n)};var a=n(255)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(51);n.d(e,"interpolate",function(){return r.a});var i=n(110);n.d(e,"interpolateArray",function(){return i.a});var o=n(54);n.d(e,"interpolateBasis",function(){return o.b});var a=n(108);n.d(e,"interpolateBasisClosed",function(){return a.a});var s=n(111);n.d(e,"interpolateDate",function(){return s.a});var u=n(24);n.d(e,"interpolateNumber",function(){return u.a});var c=n(112);n.d(e,"interpolateObject",function(){return c.a});var l=n(258);n.d(e,"interpolateRound",function(){return l.a});var h=n(113);n.d(e,"interpolateString",function(){return h.a});var f=n(259);n.d(e,"interpolateTransformCss",function(){return f.a}),n.d(e,"interpolateTransformSvg",function(){return f.b});var d=n(262);n.d(e,"interpolateZoom",function(){return d.a});var p=n(107);n.d(e,"interpolateRgb",function(){return p.a}),n.d(e,"interpolateRgbBasis",function(){return p.b}),n.d(e,"interpolateRgbBasisClosed",function(){return p.c});var g=n(263);n.d(e,"interpolateHsl",function(){return g.a}),n.d(e,"interpolateHslLong",function(){return g.b});var m=n(264);n.d(e,"interpolateLab",function(){return m.a});var v=n(265);n.d(e,"interpolateHcl",function(){return v.a}),n.d(e,"interpolateHclLong",function(){return v.b});var y=n(266);n.d(e,"interpolateCubehelix",function(){return y.b}),n.d(e,"interpolateCubehelixLong",function(){return y.a});var b=n(267);n.d(e,"piecewise",function(){return b.a});var w=n(268);n.d(e,"quantize",function(){return w.a})},function(t,e,n){"use strict";function r(t){if(t instanceof o)return new o(t.l,t.a,t.b,t.opacity);if(t instanceof f){if(isNaN(t.h))return new o(t.l,0,0,t.opacity);var e=t.h*g.a;return new o(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof p.b||(t=Object(p.h)(t));var n,r,i=c(t.r),s=c(t.g),u=c(t.b),l=a((.2225045*i+.7168786*s+.0606169*u)/v);return i===s&&s===u?n=r=l:(n=a((.4360747*i+.3850649*s+.1430804*u)/m),r=a((.0139322*i+.0971045*s+.7141733*u)/y)),new o(116*l-16,500*(n-l),200*(l-r),t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new o(t,e,n,null==i?1:i)}function o(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function a(t){return t>x?Math.pow(t,1/3):t/_+b}function s(t){return t>w?t*t*t:_*(t-b)}function u(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function c(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function l(t){if(t instanceof f)return new f(t.h,t.c,t.l,t.opacity);if(t instanceof o||(t=r(t)),0===t.a&&0===t.b)return new f(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*g.b;return new f(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function h(t,e,n,r){return 1===arguments.length?l(t):new f(t,e,n,null==r?1:r)}function f(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}e.a=i,e.b=h;var d=n(53),p=n(52),g=n(106),m=.96422,v=1,y=.82521,b=4/29,w=6/29,_=3*w*w,x=w*w*w;Object(d.a)(o,i,Object(d.b)(p.a,{brighter:function(t){return new o(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new o(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=m*s(e),t=v*s(t),n=y*s(n),new p.b(u(3.1338561*e-1.6168667*t-.4906146*n),u(-.9787684*e+1.9161415*t+.033454*n),u(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Object(d.a)(f,h,Object(d.b)(p.a,{brighter:function(t){return new f(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new f(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return r(this).rgb()}}))},function(t,e,n){"use strict";function r(t){if(t instanceof o)return new o(t.h,t.s,t.l,t.opacity);t instanceof s.b||(t=Object(s.h)(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(m*r+p*e-g*n)/(m+p-g),a=r-i,c=(d*(n-i)-h*a)/f,l=Math.sqrt(c*c+a*a)/(d*i*(1-i)),v=l?Math.atan2(c,a)*u.b-120:NaN;return new o(v<0?v+360:v,l,i,t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new o(t,e,n,null==i?1:i)}function o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e.a=i;var a=n(53),s=n(52),u=n(106),c=-.14861,l=1.78277,h=-.29227,f=-.90649,d=1.97294,p=d*f,g=d*l,m=l*h-f*c;Object(a.a)(o,i,Object(a.b)(s.a,{brighter:function(t){return t=null==t?s.c:Math.pow(s.c,t),new o(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?s.d:Math.pow(s.d,t),new o(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*u.a,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new s.b(255*(e+n*(c*r+l*i)),255*(e+n*(h*r+f*i)),255*(e+n*(d*r)),this.opacity)}}))},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}},function(t,e,n){"use strict";function r(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}function a(t,r,o,a,s,u){if(t!==o||r!==a){var c=s.push("translate(",null,e,null,n);u.push({i:c-4,x:Object(i.a)(t,o)},{i:c-2,x:Object(i.a)(r,a)})}else(o||a)&&s.push("translate("+o+e+a+n)}function s(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Object(i.a)(t,e)})):e&&n.push(o(n)+"rotate("+e+r)}function u(t,e,n,a){t!==e?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Object(i.a)(t,e)}):e&&n.push(o(n)+"skewX("+e+r)}function c(t,e,n,r,a,s){if(t!==n||e!==r){var u=a.push(o(a)+"scale(",null,",",null,")");s.push({i:u-4,x:Object(i.a)(t,n)},{i:u-2,x:Object(i.a)(e,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),s(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),c(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s});var i=n(24),o=n(260),a=r(o.a,"px, ","px)","deg)"),s=r(o.b,", ",")",")")},function(t,e,n){"use strict";function r(t){return"none"===t?c.b:(o||(o=document.createElement("DIV"),a=document.documentElement,s=document.defaultView),o.style.transform=t,t=s.getComputedStyle(a.appendChild(o),null).getPropertyValue("transform"),a.removeChild(o),t=t.slice(7,-1).split(","),Object(c.a)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function i(t){return null==t?c.b:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",t),(t=u.transform.baseVal.consolidate())?(t=t.matrix,Object(c.a)(t.a,t.b,t.c,t.d,t.e,t.f)):c.b)}e.a=r,e.b=i;var o,a,s,u,c=n(261)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.a=function(t,e,n,i,o,a){var s,u,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,c/=u),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*r,skewX:Math.atan(c)*r,scaleX:s,scaleY:u}}},function(t,e,n){"use strict";function r(t){return((t=Math.exp(t))+1/t)/2}function i(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}var a=Math.SQRT2;e.a=function(t,e){var n,s,u=t[0],c=t[1],l=t[2],h=e[0],f=e[1],d=e[2],p=h-u,g=f-c,m=p*p+g*g;if(m<1e-12)s=Math.log(d/l)/a,n=function(t){return[u+t*p,c+t*g,l*Math.exp(a*t*s)]};else{var v=Math.sqrt(m),y=(d*d-l*l+4*m)/(2*l*2*v),b=(d*d-l*l-4*m)/(2*d*2*v),w=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(b*b+1)-b);s=(_-w)/a,n=function(t){var e=t*s,n=r(w),h=l/(2*v)*(n*o(a*e+w)-i(w));return[u+h*p,c+h*g,l*n/r(a*e+w)]}}return n.duration=1e3*s,n}},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(i.d)(e)).h,(n=Object(i.d)(n)).h),a=Object(o.a)(e.s,n.s),s=Object(o.a)(e.l,n.l),u=Object(o.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=s(t),e.opacity=u(t),e+""}}}n.d(e,"b",function(){return a});var i=n(12),o=n(16);e.a=r(o.c);var a=r(o.a)},function(t,e,n){"use strict";function r(t,e){var n=Object(o.a)((t=Object(i.e)(t)).l,(e=Object(i.e)(e)).l),r=Object(o.a)(t.a,e.a),a=Object(o.a)(t.b,e.b),s=Object(o.a)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=a(e),t.opacity=s(e),t+""}}e.a=r;var i=n(12),o=n(16)},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(i.c)(e)).h,(n=Object(i.c)(n)).h),a=Object(o.a)(e.c,n.c),s=Object(o.a)(e.l,n.l),u=Object(o.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=a(t),e.l=s(t),e.opacity=u(t),e+""}}}n.d(e,"b",function(){return a});var i=n(12),o=n(16);e.a=r(o.c);var a=r(o.a)},function(t,e,n){"use strict";function r(t){return function e(n){function r(e,r){var a=t((e=Object(i.b)(e)).h,(r=Object(i.b)(r)).h),s=Object(o.a)(e.s,r.s),u=Object(o.a)(e.l,r.l),c=Object(o.a)(e.opacity,r.opacity);return function(t){return e.h=a(t),e.s=s(t),e.l=u(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,r.gamma=e,r}(1)}n.d(e,"a",function(){return a});var i=n(12),o=n(16);e.b=r(o.c);var a=r(o.a)},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}e.a=r},function(t,e,n){"use strict";e.a=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}},function(t,e,n){"use strict";function r(t,e,n){function r(t){m.state=s,m.timer.restart(a,m.delay,m.time),m.delay<=t&&a(t-m.delay)}function a(n){if(m.state!==s)return p();for(var r in g){var i=g[r];if(i.stateKey===m.stateKey){if(i.state===c)return(0,o.timeout)(a);i.state===l?(i.state=f,i.timer.stop(),i.events.interrupt&&"function"===typeof i.events.interrupt&&i.events.interrupt.call(this),delete g[r]):+r<e&&(i.state=f,i.timer.stop(),delete g[r])}}if((0,o.timeout)(function(){m.state===c&&(m.state=l,m.timer.restart(d,m.delay,m.time),d(n))}),m.state=u,m.events.start&&"function"===typeof m.events.start&&m.events.start.call(t),m.state===u){m.state=c;for(var h=-1,b=0;b<v;++b){var w=m.tweens[b].call(t);w&&(y[++h]=w)}y.length=h+1}}function d(e){var n=1;e<m.duration?n=m.ease.call(null,e/m.duration):(m.timer.restart(p),m.state=h);for(var r=-1;++r<y.length;)y[r].call(null,n);m.state===h&&(m.events.end&&"function"===typeof m.events.end&&m.events.end.call(t),p())}function p(){m.state=f,m.timer.stop(),delete g[e];for(var n in g)return;delete t.TRANSITION_SCHEDULES}var g=t.TRANSITION_SCHEDULES,m=i({},n),v=m.tweens.length,y=new Array(v);g[e]=m,m.timer=(0,o.timer)(r,0,m.time)}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e,n,o,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=t.TRANSITION_SCHEDULES;if(c){if(n in c)return}else t.TRANSITION_SCHEDULES={};r(t,n,i({stateKey:e,events:u,tweens:s},o,{timer:null,state:a}))};var o=n(49),a=0,s=1,u=2,c=3,l=4,h=5,f=6},function(t,e,n){"use strict";function r(){var t=this.TRANSITION_SCHEDULES;t&&Object.keys(t).forEach(function(e){t[e].timer.stop()})}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(272);n.d(e,"easeLinear",function(){return r.a});var i=n(273);n.d(e,"easeQuad",function(){return i.b}),n.d(e,"easeQuadIn",function(){return i.a}),n.d(e,"easeQuadOut",function(){return i.c}),n.d(e,"easeQuadInOut",function(){return i.b});var o=n(274);n.d(e,"easeCubic",function(){return o.b}),n.d(e,"easeCubicIn",function(){return o.a}),n.d(e,"easeCubicOut",function(){return o.c}),n.d(e,"easeCubicInOut",function(){return o.b});var a=n(275);n.d(e,"easePoly",function(){return a.b}),n.d(e,"easePolyIn",function(){return a.a}),n.d(e,"easePolyOut",function(){return a.c}),n.d(e,"easePolyInOut",function(){return a.b});var s=n(276);n.d(e,"easeSin",function(){return s.b}),n.d(e,"easeSinIn",function(){return s.a}),n.d(e,"easeSinOut",function(){return s.c}),n.d(e,"easeSinInOut",function(){return s.b});var u=n(277);n.d(e,"easeExp",function(){return u.b}),n.d(e,"easeExpIn",function(){return u.a}),n.d(e,"easeExpOut",function(){return u.c}),n.d(e,"easeExpInOut",function(){return u.b});var c=n(278);n.d(e,"easeCircle",function(){return c.b}),n.d(e,"easeCircleIn",function(){return c.a}),n.d(e,"easeCircleOut",function(){return c.c}),n.d(e,"easeCircleInOut",function(){return c.b});var l=n(279);n.d(e,"easeBounce",function(){return l.c}),n.d(e,"easeBounceIn",function(){return l.a}),n.d(e,"easeBounceOut",function(){return l.c}),n.d(e,"easeBounceInOut",function(){return l.b});var h=n(280);n.d(e,"easeBack",function(){return h.b}),n.d(e,"easeBackIn",function(){return h.a}),n.d(e,"easeBackOut",function(){return h.c}),n.d(e,"easeBackInOut",function(){return h.b});var f=n(281);n.d(e,"easeElastic",function(){return f.c}),n.d(e,"easeElasticIn",function(){return f.a}),n.d(e,"easeElasticOut",function(){return f.c}),n.d(e,"easeElasticInOut",function(){return f.b})},function(t,e,n){"use strict";function r(t){return+t}e.a=r},function(t,e,n){"use strict";function r(t){return t*t}function i(t){return t*(2-t)}function o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}e.a=r,e.c=i,e.b=o},function(t,e,n){"use strict";function r(t){return t*t*t}function i(t){return--t*t*t+1}function o(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}e.a=r,e.c=i,e.b=o},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),i=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),o=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3)},function(t,e,n){"use strict";function r(t){return 1-Math.cos(t*s)}function i(t){return Math.sin(t*s)}function o(t){return(1-Math.cos(a*t))/2}e.a=r,e.c=i,e.b=o;var a=Math.PI,s=a/2},function(t,e,n){"use strict";function r(t){return Math.pow(2,10*t-10)}function i(t){return 1-Math.pow(2,-10*t)}function o(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}e.a=r,e.c=i,e.b=o},function(t,e,n){"use strict";function r(t){return 1-Math.sqrt(1-t*t)}function i(t){return Math.sqrt(1- --t*t)}function o(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}e.a=r,e.c=i,e.b=o},function(t,e,n){"use strict";function r(t){return 1-i(1-t)}function i(t){return(t=+t)<a?g*t*t:t<u?g*(t-=s)*t+c:t<h?g*(t-=l)*t+f:g*(t-=d)*t+p}function o(t){return((t*=2)<=1?1-i(1-t):i(t-1)+1)/2}e.a=r,e.c=i,e.b=o;var a=4/11,s=6/11,u=8/11,c=.75,l=9/11,h=10/11,f=.9375,d=21/22,p=63/64,g=1/a/a},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),i=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),o=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a});var r=2*Math.PI,i=function t(e,n){function i(t){return e*Math.pow(2,10*--t)*Math.sin((o-t)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3),o=function t(e,n){function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+o)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3),a=function t(e,n){function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((o-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((o+t)/n))/2}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3)},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===f(Symbol.iterator)?function(t){return"undefined"===typeof t?"undefined":f(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"===typeof t?"undefined":f(t)})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?c(t):e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"c",function(){return p}),n.d(e,"a",function(){return g}),n.d(e,"b",function(){return m});var l=n(0),h=n.n(l),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t){return{border:0,background:"rgba(0,0,0,0.4)",color:"white",padding:10,outline:0,opacity:t?.3:1,cursor:t?"not-allowed":"pointer"}},p=function(t){function e(){var t;return i(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments)),t.handleClick=t.handleClick.bind(c(t)),t}return u(e,t),a(e,[{key:"handleClick",value:function(t){t.preventDefault(),this.props.previousSlide()}},{key:"render",value:function(){var t=0===this.props.currentSlide&&!this.props.wrapAround||0===this.props.slideCount;return h.a.createElement("button",{style:d(t),disabled:t,onClick:this.handleClick},"PREV")}}]),e}(h.a.Component),g=function(t){function e(){var t;return i(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments)),t.handleClick=t.handleClick.bind(c(t)),t}return u(e,t),a(e,[{key:"handleClick",value:function(t){t.preventDefault(),this.props.nextSlide()}},{key:"render",value:function(){var t=this.props.currentSlide+this.props.slidesToScroll>=this.props.slideCount&&!this.props.wrapAround;return h.a.createElement("button",{style:d(t),disabled:t,onClick:this.handleClick},"NEXT")}}]),e}(h.a.Component),m=function(t){function e(){return i(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"getIndexes",value:function(t,e){for(var n=[],r=0;r<t;r+=e)n.push(r);return n}},{key:"getListStyles",value:function(){return{position:"relative",margin:0,top:-10,padding:0}}},{key:"getListItemStyles",value:function(){return{listStyleType:"none",display:"inline-block"}}},{key:"getButtonStyles",value:function(t){return{border:0,background:"transparent",color:"black",cursor:"pointer",padding:10,outline:0,fontSize:24,opacity:t?1:.5}}},{key:"render",value:function(){var t=this,e=this.getIndexes(this.props.slideCount,this.props.slidesToScroll);return h.a.createElement("ul",{style:this.getListStyles()},e.map(function(e){return h.a.createElement("li",{style:t.getListItemStyles(),key:e},h.a.createElement("button",{style:t.getButtonStyles(t.props.currentSlide===e),onClick:t.props.goToSlide.bind(null,e)},"\u2022"))}))}}]),e}(h.a.Component)},function(t,e){},function(t,e){}]);
//# sourceMappingURL=main.c2db43d4.js.map