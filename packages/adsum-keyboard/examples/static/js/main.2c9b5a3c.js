!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=95)}([function(e,t,n){"use strict";e.exports=n(102)},function(e,t,n){"function"===typeof Symbol&&Symbol.iterator;e.exports=n(112)()},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,o,s,a],u=0;c=new Error(t.replace(/%s/g,function(){return l[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};e.exports=i},function(e,t,n){"use strict";function i(e,t,n){if(!t(e))throw l("error","uncaught at check",n),new Error(n)}function r(e,t){return S.notUndef(e)&&C.call(e,t)}function o(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,i=new Promise(function(i){n=setTimeout(function(){return i(t)},e)});return i[y]=function(){return clearTimeout(n)},i}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments[3],r={name:n,next:e,throw:t,return:O};return i&&(r[m]=!0),"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"===typeof window?console.log("redux-saga "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)}function u(e,t){return function(){return e.apply(void 0,arguments)}}n.d(t,"u",function(){return p}),n.d(t,"e",function(){return g}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return y}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return w}),n.d(t,"o",function(){return x}),n.d(t,"r",function(){return E}),n.d(t,"l",function(){return A}),t.g=i,n.d(t,"n",function(){return S}),n.d(t,"s",function(){return M}),t.t=o,n.d(t,"f",function(){return k}),t.i=s,t.j=a,n.d(t,"v",function(){return T}),t.q=c,t.p=l,t.k=u,n.d(t,"w",function(){return P}),n.d(t,"m",function(){return L}),n.d(t,"h",function(){return R}),n.d(t,"x",function(){return D});var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f="function"===typeof Symbol&&"symbol"===h(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":h(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":h(e)},p=function(e){return"@@redux-saga/"+e},g=p("TASK"),m=p("HELPER"),v=p("MATCH"),y=p("CANCEL_PROMISE"),b=p("SAGA_ACTION"),w=p("SELF_CANCELLATION"),_=function(e){return function(){return e}},x=_(!0),E=function(){},A=function(e){return e},C=Object.prototype.hasOwnProperty,S={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"===typeof e},number:function(e){return"number"===typeof e},string:function(e){return"string"===typeof e},array:Array.isArray,object:function(e){return e&&!S.array(e)&&"object"===("undefined"===typeof e?"undefined":f(e))},promise:function(e){return e&&S.func(e.then)},iterator:function(e){return e&&S.func(e.next)&&S.func(e.throw)},iterable:function(e){return e&&S.func(Symbol)?S.func(e[Symbol.iterator]):S.array(e)},task:function(e){return e&&e[g]},observable:function(e){return e&&S.func(e.subscribe)},buffer:function(e){return e&&S.func(e.isEmpty)&&S.func(e.take)&&S.func(e.put)},pattern:function(e){return e&&(S.string(e)||"symbol"===("undefined"===typeof e?"undefined":f(e))||S.func(e)||S.array(e))},channel:function(e){return e&&S.func(e.take)&&S.func(e.close)},helper:function(e){return e&&e[m]},stringableFunc:function(e){return S.func(e)&&r(e,"toString")}},M={assign:function(e,t){for(var n in t)r(t,n)&&(e[n]=t[n])}},k={from:function(e){var t=Array(e.length);for(var n in e)r(e,n)&&(t[n]=e[n]);return t}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),F=function(e){throw e},O=function(e){return{value:e,done:!0}},P=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},L=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},R=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},D=function(e){return function(t){return e(Object.defineProperty(t,b,{value:!0}))}}},function(e,t,n){"use strict";function i(e){return"[object Array]"===C.call(e)}function r(e){return"[object ArrayBuffer]"===C.call(e)}function o(e){return"undefined"!==typeof FormData&&e instanceof FormData}function s(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function a(e){return"string"===typeof e}function c(e){return"number"===typeof e}function l(e){return"undefined"===typeof e}function u(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":x(e))}function h(e){return"[object Date]"===C.call(e)}function d(e){return"[object File]"===C.call(e)}function f(e){return"[object Blob]"===C.call(e)}function p(e){return"[object Function]"===C.call(e)}function g(e){return u(e)&&p(e.pipe)}function m(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function b(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==("undefined"===typeof e?"undefined":x(e))&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function w(){function e(e,n){"object"===x(t[n])&&"object"===("undefined"===typeof e?"undefined":x(e))?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,i=arguments.length;n<i;n++)b(arguments[n],e);return t}function _(e,t,n){return b(t,function(t,i){e[i]=n&&"function"===typeof t?E(t,n):t}),e}var x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=n(75),A=n(160),C=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:r,isBuffer:A,isFormData:o,isArrayBufferView:s,isString:a,isNumber:c,isObject:u,isUndefined:l,isDate:h,isFile:d,isBlob:f,isFunction:p,isStream:g,isURLSearchParams:m,isStandardBrowserEnv:y,forEach:b,merge:w,extend:_,trim:v}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(d.g)(arguments[0],d.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),d.n.pattern(e))return O(g,{pattern:e});if(d.n.channel(e))return O(g,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}function r(e,t){return arguments.length>1?(Object(d.g)(e,d.n.notUndef,"put(channel, action): argument channel is undefined"),Object(d.g)(e,d.n.channel,"put(channel, action): argument "+e+" is not a valid channel"),Object(d.g)(t,d.n.notUndef,"put(channel, action): argument action is undefined")):(Object(d.g)(e,d.n.notUndef,"put(action): argument action is undefined"),t=e,e=null),O(m,{channel:e,action:t})}function o(e){return O(v,e)}function s(e,t,n){Object(d.g)(t,d.n.notUndef,e+": argument fn is undefined");var i=null;if(d.n.array(t)){var r=t;i=r[0],t=r[1]}else if(t.fn){var o=t;i=o.context,t=o.fn}return i&&d.n.string(t)&&d.n.func(i[t])&&(t=i[t]),Object(d.g)(t,d.n.func,e+": argument "+t+" is not a function"),{context:i,fn:t,args:n}}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return O(b,s("call",e,n))}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return O(_,s("fork",e,n))}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return o(t.map(function(e){return l(e)}));var i=t[0];return 1===t.length&&(Object(d.g)(i,d.n.notUndef,"cancel(task): argument task is undefined"),Object(d.g)(i,d.n.task,"cancel(task): argument "+i+" is not a valid Task object "+F)),O(E,i||d.d)}function u(e,t){return Object(d.g)(e,d.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(d.g)(t,d.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(d.g)(t,d.n.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),O(C,{pattern:e,buffer:t})}function h(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return c.apply(void 0,[f.b,e,t].concat(i))}t.h=i,t.g=r,t.b=o,t.d=a,t.f=c,t.e=l,t.a=u,t.i=h,n.d(t,"c",function(){return L});var d=n(4),f=n(70),p=Object(d.u)("IO"),g="TAKE",m="PUT",v="ALL",y="RACE",b="CALL",w="CPS",_="FORK",x="JOIN",E="CANCEL",A="SELECT",C="ACTION_CHANNEL",S="CANCELLED",M="FLUSH",k="GET_CONTEXT",T="SET_CONTEXT",F="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",O=function(e,t){var n;return n={},n[p]=!0,n[e]=t,n};i.maybe=function(){var e=i.apply(void 0,arguments);return e[g].maybe=!0,e};i.maybe;r.resolve=function(){var e=r.apply(void 0,arguments);return e[m].resolve=!0,e},r.sync=Object(d.k)(r.resolve,Object(d.w)("put.sync","put.resolve"));var P=function(e){return function(t){return t&&t[p]&&t[e]}},L={take:P(g),put:P(m),all:P(v),race:P(y),call:P(b),cps:P(w),fork:P(_),join:P(x),cancel:P(E),select:P(A),actionChannel:P(C),cancelled:P(S),flush:P(M),getContext:P(k),setContext:P(T)}},function(e,t){var n,i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"===typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(){function e(e){return n.push(e),function(){return Object(a.t)(n,e)}}function t(e){for(var t=n.slice(),i=0,r=t.length;i<r;i++)t[i](e)}var n=[];return{subscribe:e,emit:t}}function r(){function e(){if(s&&l.length)throw Object(a.m)("Cannot have a closed channel with pending takers");if(l.length&&!o.isEmpty())throw Object(a.m)("Cannot have pending takers with non empty buffer")}function t(t){if(e(),Object(a.g)(t,a.n.notUndef,p),!s){if(!l.length)return o.put(t);for(var n=0;n<l.length;n++){var i=l[n];if(!i[a.b]||i[a.b](t))return l.splice(n,1),i(t)}}}function n(t){e(),Object(a.g)(t,a.n.func,"channel.take's callback must be a function"),s&&o.isEmpty()?t(h):o.isEmpty()?(l.push(t),t.cancel=function(){return Object(a.t)(l,t)}):t(o.take())}function i(t){if(e(),Object(a.g)(t,a.n.func,"channel.flush' callback must be a function"),s&&o.isEmpty())return void t(h);t(o.flush())}function r(){if(e(),!s&&(s=!0,l.length)){var t=l;l=[];for(var n=0,i=t.length;n<i;n++)t[n](h)}}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a.fixed(),s=!1,l=[];return Object(a.g)(o,a.n.buffer,f),{take:n,put:t,flush:i,close:r,get __takers__(){return l},get __closed__(){return s}}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.none(),n=arguments[2];arguments.length>2&&Object(a.g)(n,a.n.func,"Invalid match function passed to eventChannel");var i=r(t),o=function(){i.__closed__||(s&&s(),i.close())},s=e(function(e){if(d(e))return void o();n&&!n(e)||i.put(e)});if(i.__closed__&&s(),!a.n.func(s))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:i.take,flush:i.flush,close:o}}function s(e){var t=o(function(t){return e(function(e){if(e[a.c])return void t(e);Object(l.a)(function(){return t(e)})})});return u({},t,{take:function(e,n){arguments.length>1&&(Object(a.g)(n,a.n.func,"channel.take's matcher argument must be a function"),e[a.b]=n),t.take(e)}})}n.d(t,"a",function(){return h}),n.d(t,"d",function(){return d}),t.b=i,t.c=o,t.e=s;var a=n(4),c=n(19),l=n(67),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h={type:"@@redux-saga/CHANNEL_END"},d=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type},f="invalid buffer passed to channel factory function",p="Saga was provided with an undefined action"},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=null,n=null;switch(e.getType()){case E.SiteObject:case E.FloorObject:t=e;break;case E.BuildingObject:t=e.site,n=e._mesh.position.clone();break;case E.SpaceObject:case E.UserObject:t=e.parent,n=e._mesh.position.clone();break;case E.LabelObject:case E.LabelTextObject:case E.LabelImageObject:n=e._mesh.position.clone();var i=e.parent;i.isSpace?(t=i.parent,n.applyMatrix4(i.matrix)):i.isBuilding?(t=i.site,n.applyMatrix4(i.matrix)):t=i;break;default:throw new Error("Unexpected")}return{ground:t,groundPosition:n}}function c(e,t,n){var i=e._mesh.localToWorld(t.clone());return i.setZ(e.isSite?0:e.altitude),n.adsumToUtm(i)}function l(){function e(e,n,i){if(de=(new DOMParser).parseFromString(e,"text/xml"),n=n||pe,void 0!==i){var r=i.split("/");r.pop(),we=(r.length<1?".":r.join("/"))+"/"}!function(){var e=de.querySelectorAll("asset")[0];if(e&&e.childNodes)for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"unit":var i=n.getAttribute("meter");i&&(Pe=parseFloat(i));break;case"up_axis":Le=n.textContent.charAt(0)}}}(),function(){if(!0!==Oe.convertUpAxis||Le===Oe.upAxis)Re=null;else switch(Le){case"X":Re="Y"===Oe.upAxis?"XtoY":"XtoZ";break;case"Y":Re="X"===Oe.upAxis?"YtoX":"YtoZ";break;case"Z":Re="X"===Oe.upAxis?"ZtoX":"ZtoY"}}(),Ee=t("library_images image",h,"image"),Me=t("library_materials material",O,"material"),ke=t("library_effects effect",B,"effect"),Se=t("library_geometries geometry",_,"geometry"),Te=t("library_cameras camera",z,"camera"),Fe=t("library_lights light",V,"light"),Ce=t("library_controllers controller",d,"controller"),Ae=t("library_animations animation",N,"animation"),ye=t("library_visual_scenes visual_scene",g,"visual_scene"),be=t("library_kinematics_models kinematics_model",G,"kinematics_model"),_e=[],xe=[],ue=function(){var e=de.querySelectorAll("scene instance_visual_scene")[0];if(e){var t=e.getAttribute("url").replace(/^#/,"");return ye[t.length>0?t:"visual_scene0"]}return null}(),fe=new ae.Scene;for(var o=0;o<ue.nodes.length;o++)fe.add(s(ue.nodes[o]));fe.scale.multiplyScalar(Pe),me=[],function e(t){var n=ue.getChildById(t.colladaId,!0),i=null;if(n&&n.keys){i={fps:60,hierarchy:[{node:n,keys:n.keys,sids:n.sids}],node:t,name:"animation_"+t.name,length:0},me.push(i);for(var r=0,o=n.keys.length;r<o;r++)i.length=Math.max(i.length,n.keys[r].time)}else i={hierarchy:[{keys:[],sids:[]}]};for(var r=0,o=t.children.length;r<o;r++)for(var s=e(t.children[r]),a=0,c=s.hierarchy.length;a<c;a++)i.hierarchy.push({keys:[],sids:[]});return i}(fe),he=function(){var e=de.querySelectorAll("instance_kinematics_model")[0];if(e){var t=e.getAttribute("url").replace(/^#/,"");return be[t.length>0?t:"kinematics_model0"]}return null}(),function(){if(he&&0===he.joints.length)return void(ve=void 0);var e={};ve={joints:he&&he.joints,getJointValue:function(t){var n=e[t];if(n)return n.position;console.log("getJointValue: joint "+t+" doesn't exist")},setJointValue:function(t,i){var r=e[t];if(r){var o=r.joint;if(i>o.limits.max||i<o.limits.min)console.log("setJointValue: joint "+t+" value "+i+" outside of limits (min: "+o.limits.min+", max: "+o.limits.max+")");else if(o.static)console.log("setJointValue: joint "+t+" is static");else{var s=r.node,a=o.axis,c=r.transforms,l=new ae.Matrix4,u=new ae.Matrix4;for(n=0;n<c.length;n++){var h=c[n];if(h.sid&&-1!==h.sid.indexOf("joint"+t))switch(o.type){case"revolute":l.multiply(u.makeRotationAxis(a,ae.Math.degToRad(i)));break;case"prismatic":l.multiply(u.makeTranslation(a.x*i,a.y*i,a.z*i));break;default:console.warn("setJointValue: unknown joint type: "+o.type)}else switch(h.type){case"matrix":l.multiply(h.obj);break;case"translate":l.multiply(u.makeTranslation(h.obj.x,h.obj.y,h.obj.z));break;case"rotate":l.multiply(u.makeRotationAxis(h.obj,h.angle))}}var d=l.elements,f=Array.prototype.slice.call(d),p=[f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15]];s.matrix.set.apply(s.matrix,p),s.matrix.decompose(s.position,s.quaternion,s.scale),e[t].position=i}}else console.log("setJointValue: joint "+t+" doesn't exist")}};var t=de.querySelector("scene instance_kinematics_scene");if(t)for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"bind_joint_axis":var r=i.getAttribute("target").split("/").pop(),o=i.querySelector("axis param").textContent,s=parseInt(o.split("joint").pop().split(".")[0]),a=de.querySelector('[sid="'+r+'"]');if(a){var c=a.parentElement;!function(t,n){var i=n.getAttribute("id"),r=ue.getChildById(i,!0),o=he.joints[t];fe.traverse(function(n){n.colladaId==i&&(e[t]={node:n,transforms:r.transforms,joint:o,position:o.zeroPosition})})}(s,c)}}}}();var a={scene:fe,morphs:_e,skins:xe,animations:me,kinematics:ve,dae:{images:Ee,materials:Me,cameras:Te,lights:Fe,effects:ke,geometries:Se,controllers:Ce,animations:Ae,visualScenes:ye,visualScene:ue,scene:ue,kinematicsModels:be,kinematicsModel:he}};return n&&n(a),a}function t(e,t,n){for(var i=de.querySelectorAll(e),r={},o=0,s=i.length,a=0;a<s;a++){var c=i[a],l=(new t).parse(c);l.id&&0!==l.id.length||(l.id=n+o++),r[l.id]=l}return r}function n(e,t){var n=t instanceof y?Ce[t.url]:t;if(!n||!n.morph)return void console.log("could not find morph controller!");for(var i=n.morph,r=0;r<i.targets.length;r++){var o=i.targets[r],s=Se[o];if(s.mesh&&s.mesh.primitives&&s.mesh.primitives.length){var a=s.mesh.primitives[0].geometry;a.vertices.length===e.vertices.length&&e.morphTargets.push({name:"target_1",vertices:a.vertices})}}e.morphTargets.push({name:"target_Z",vertices:e.vertices})}function i(e,t,n,r){if(e.world=e.world||new ae.Matrix4,e.localworld=e.localworld||new ae.Matrix4,e.world.copy(e.matrix),e.localworld.copy(e.matrix),e.channels&&e.channels.length){var o=e.channels[0].sampler.output[n];o instanceof ae.Matrix4&&(e.world.copy(o),e.localworld.copy(o),0===n&&e.matrix.copy(o))}r&&e.world.multiplyMatrices(r,e.world),t.push(e);for(var s=0;s<e.nodes.length;s++)i(e.nodes[s],t,n,e.world)}function r(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=-1;if("JOINT"==i.type){for(var o=0;o<t.joints.length;o++)if(i.sid===t.joints[o]){r=o;break}if(r>=0){var s=t.invBindMatrices[r];for(i.invBindMatrix=s,i.skinningMatrix=new ae.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,s),i.animatrix=new ae.Matrix4,i.animatrix.copy(i.localworld),i.weights=[],o=0;o<t.weights.length;o++)for(var a=0;a<t.weights[o].length;a++){var c=t.weights[o][a];c.joint===r&&i.weights.push(c)}}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new ae.Matrix4,i.weights=[]}}}function o(e,t,n){void 0===n&&(n=40);var o=Ce[t.url];if(!o||!o.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!t.skeleton||!t.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var s=function(){var e=void 0,t=1e6,n=-t,i=0;for(var r in Ae){var o=Ae[r];e=e||o.id;for(var s=0;s<o.sampler.length;s++){var a=o.sampler[s];a.create(),t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),i=Math.max(i,a.input.length)}}return{start:t,end:n,frames:i,ID:e}}(),a=ue.getChildById(t.skeleton[0],!0)||ue.getChildBySid(t.skeleton[0],!0),c=function(e){var t=[];return function e(t,n,i){var r={};r.name=n.sid,r.parent=t,r.matrix=n.matrix;var o=[new ae.Vector3,new ae.Quaternion,new ae.Vector3];r.matrix.decompose(o[0],o[1],o[2]),r.pos=[o[0].x,o[0].y,o[0].z],r.scl=[o[2].x,o[2].y,o[2].z],r.rotq=[o[1].x,o[1].y,o[1].z,o[1].w],i.push(r);for(var s in n.nodes)e(n.sid,n.nodes[s],i)}(-1,e,t),t}(a),l=o.skin.joints,u=[],h=0;h<l.length;h++)for(var d=0;d<c.length;d++)c[d].name===l[h]&&(u[h]=c[d]);for(h=0;h<u.length;h++)for(d=0;d<u.length;d++)u[h].parent===u[d].name&&(u[h].parent=d);for(new ae.Vector3,h=0;h<e.vertices.length;h++)e.vertices[h].applyMatrix4(o.skin.bindShapeMatrix);var f=[],p=[],g=o.skin.weights;for(h=0;h<g.length;h++){var m=new ae.Vector4(g[h][0]?g[h][0].joint:0,g[h][1]?g[h][1].joint:0,g[h][2]?g[h][2].joint:0,g[h][3]?g[h][3].joint:0),v=new ae.Vector4(g[h][0]?g[h][0].weight:0,g[h][1]?g[h][1].weight:0,g[h][2]?g[h][2].weight:0,g[h][3]?g[h][3].weight:0);f.push(m),p.push(v)}e.skinIndices=f,e.skinWeights=p,e.bones=u;var y={name:s.ID,fps:30,length:s.frames/30,hierarchy:[]};for(d=0;d<u.length;d++)y.hierarchy.push({parent:u[d].parent,name:u[d].name,keys:[]});for(console.log("ColladaLoader:",s.ID+" has "+u.length+" bones."),function(e,t,n){var o=[];i(t,o,-1),r(o,n.skin);for(var s=new ae.Vector3,a=[],c=0;c<e.vertices.length;c++)a.push(new ae.Vector3);for(c=0;c<o.length;c++)if("JOINT"==o[c].type)for(var l=0;l<o[c].weights.length;l++){var u=o[c].weights[l],h=u.index,d=u.weight,f=e.vertices[h],p=a[h];s.x=f.x,s.y=f.y,s.z=f.z,s.applyMatrix4(o[c].skinningMatrix),p.x+=s.x*d,p.y+=s.y*d,p.z+=s.z*d}for(c=0;c<e.vertices.length;c++)e.vertices[c]=a[c]}(e,a,o),n=0;n<s.frames;n++){var b=[];for(i(a,b,n),r(b,o.skin),h=0;h<b.length;h++)for(d=0;d<y.hierarchy.length;d++)if(y.hierarchy[d].name===b[h].sid){var w={};w.time=n/30,w.matrix=b[h].animatrix,0===n&&(b[h].matrix=w.matrix);var _=[new ae.Vector3,new ae.Quaternion,new ae.Vector3];w.matrix.decompose(_[0],_[1],_[2]),w.pos=[_[0].x,_[0].y,_[0].z],w.scl=[_[2].x,_[2].y,_[2].z],w.rot=_[1],y.hierarchy[d].keys.push(w)}e.animation=y}}function s(e,t){var i=new ae.Object3D,r=void 0,a=void 0,c=void 0,l=void 0;for(c=0;c<e.controllers.length;c++){var u=Ce[e.controllers[c].url];switch(u.type){case"skin":if(Se[u.skin.source])(d=new w).url=u.skin.source,d.instance_material=e.controllers[c].instance_material,e.geometries.push(d),r=e.controllers[c];else if(Ce[u.skin.source]){var h=Ce[u.skin.source];a=h,h.morph&&Se[h.morph.source]&&((d=new w).url=h.morph.source,d.instance_material=e.controllers[c].instance_material,e.geometries.push(d))}break;case"morph":var d;Se[u.morph.source]&&((d=new w).url=u.morph.source,d.instance_material=e.controllers[c].instance_material,e.geometries.push(d),a=e.controllers[c]),console.log("ColladaLoader: Morph-controller partially supported.")}}var f={};for(c=0;c<e.geometries.length;c++){var p,g=e.geometries[c],m=g.instance_material,v=Se[g.url],y={},b=[],_=0;if(v){if(!v.mesh||!v.mesh.primitives)continue;if(0===i.name.length&&(i.name=v.id),m)for(l=0;l<m.length;l++){var x=m[l],E=Me[x.target],A=E.instance_effect.url,C=ke[A].shader.material;if(v.doubleSided){if(!(x.symbol in f)){var S=C.clone();S.side=ae.DoubleSide,f[x.symbol]=S}C=f[x.symbol]}C.opacity=C.opacity?C.opacity:1,y[x.symbol]=_,b.push(C),(p=C).name=null===E.name||""===E.name?E.id:E.name,_++}var M,k=p||new ae.MeshLambertMaterial({color:14540253,side:v.doubleSided?ae.DoubleSide:ae.FrontSide}),T=v.mesh.geometry3js;if(_>1)for(k=new ae.MultiMaterial(b),l=0;l<T.faces.length;l++){var F=T.faces[l];F.materialIndex=y[F.daeMaterial]}void 0!==r?(o(T,r),T.morphTargets.length>0?(k.morphTargets=!0,k.skinning=!1):(k.morphTargets=!1,k.skinning=!0),(M=new ae.SkinnedMesh(T,k,!1)).name="skin_"+xe.length,xe.push(M)):void 0!==a?(n(T,a),k.morphTargets=!0,(M=new ae.Mesh(T,k)).name="morph_"+_e.length,_e.push(M)):M=!0===T.isLineStrip?new ae.Line(T):new ae.Mesh(T,k),i.add(M)}}for(c=0;c<e.cameras.length;c++){var O=e.cameras[c],P=Te[O.url],L=new ae.PerspectiveCamera(P.yfov,parseFloat(P.aspect_ratio),parseFloat(P.znear),parseFloat(P.zfar));i.add(L)}for(c=0;c<e.lights.length;c++){var R=null,D=e.lights[c],B=Fe[D.url];if(B&&B.technique){var I=B.color.getHex(),N=B.intensity,j=B.distance,U=B.falloff_angle;switch(B.technique){case"directional":(R=new ae.DirectionalLight(I,N,j)).position.set(0,0,1);break;case"point":R=new ae.PointLight(I,N,j);break;case"spot":(R=new ae.SpotLight(I,N,j,U)).position.set(0,0,1);break;case"ambient":R=new ae.AmbientLight(I)}}R&&i.add(R)}if(i.name=e.name||e.id||"",i.colladaId=e.id||"",i.layer=e.layer||"",i.matrix=e.matrix,i.matrix.decompose(i.position,i.quaternion,i.scale),Oe.centerGeometry&&i.geometry){var $=new ae.Vector3;object.geometry.computeBoundingBox(),object.geometry.boundingBox.getCenter($),i.geometry.center(),$.multiply(i.scale),$.applyQuaternion(i.quaternion),i.position.add($)}for(c=0;c<e.nodes.length;c++)i.add(s(e.nodes[c],e));return i}function a(e){for(var t=de.querySelectorAll("library_nodes node"),n=0;n<t.length;n++){var i=t[n].attributes.getNamedItem("id");if(i&&i.value===e)return t[n]}}function c(e,t){for(var n=null,i=0,r=e.length;i<r&&null===n;i++){var o=e[i];if(o.time===t)n=o;else if(o.time>t)break}return n}function l(e,t){for(var n=-1,i=0,r=e.length;i<r&&-1===n;i++)e[i].time>=t&&(n=i);return n}function u(e,t,n,i){var r=function(e,t,n){for(n=n>=0?n:n+e.length;n>=0;n--){var i=e[n];if(i.hasTarget(t))return i}return null}(e,i,n?n-1:0),o=function(e,t,n){for(;n<e.length;n++){var i=e[n];if(i.hasTarget(t))return i}return null}(e,i,n+1);if(r&&o){var s=void 0,a=(t.time-r.time)/(o.time-r.time),c=r.getTarget(i),l=o.getTarget(i).data,u=c.data;if("matrix"===c.type)s=u;else if(u.length){s=[];for(var h=0;h<u.length;++h)s[h]=u[h]+(l[h]-u[h])*a}else s=u+(l-u)*a;t.addTarget(i,c.transform,c.member,s)}}function h(){this.id="",this.init_from=""}function d(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function f(){this.method=null,this.source=null,this.targets=null,this.weights=null}function p(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function g(){this.id="",this.name="",this.nodes=[],this.scene=new ae.Group}function m(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new ae.Matrix4}function v(){this.sid="",this.type="",this.data=[],this.obj=null}function y(){this.url="",this.skeleton=[],this.instance_material=[]}function b(){this.symbol="",this.target=""}function w(){this.url="",this.instance_material=[]}function _(){this.id="",this.mesh=null}function x(e){this.geometry=e.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function E(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new ae.Geometry}function A(){E.call(this),this.vcount=[]}function C(){E.call(this),this.vcount=1}function S(){E.call(this),this.vcount=3}function M(){this.source="",this.count=0,this.stride=0,this.params=[]}function k(){this.input={}}function T(){this.semantic="",this.offset=0,this.source="",this.set=0}function F(e){this.id=e,this.type=null}function O(){this.id="",this.name="",this.instance_effect=null}function P(){this.color=new ae.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function L(e,t){this.type=e,this.effect=t,this.material=null}function R(e){this.effect=e,this.init_from=null,this.format=null}function D(e){this.effect=e,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function B(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function I(){this.url=""}function N(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function j(e){this.animation=e,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function U(e){this.id="",this.animation=e,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function $(e){this.targets=[],this.time=e}function z(){this.id="",this.name="",this.technique=""}function H(){this.url=""}function V(){this.id="",this.name="",this.technique=""}function W(){this.url=""}function G(){this.id="",this.name="",this.joints=[],this.links=[]}function q(){this.sid="",this.name="",this.axis=new ae.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function X(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function K(){this.joint="",this.transforms=[],this.links=[]}function Y(e){var t=e.getAttribute("id");return void 0!=ge[t]?ge[t]:(ge[t]=new F(t).parse(e),ge[t])}function Z(e){for(var t=ee(e),n=[],i=0,r=t.length;i<r;i++)n.push(!("true"!==t[i]&&"1"!==t[i]));return n}function J(e){for(var t=ee(e),n=[],i=0,r=t.length;i<r;i++)n.push(parseFloat(t[i]));return n}function Q(e){for(var t=ee(e),n=[],i=0,r=t.length;i<r;i++)n.push(parseInt(t[i],10));return n}function ee(e){return e.length>0?function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}(e).split(/\s+/):[]}function te(e,t,n){return e.hasAttribute(t)?parseInt(e.getAttribute(t),10):n}function ne(e,t){(new ae.ImageLoader).load(t,function(t){e.image=t,e.needsUpdate=!0})}function ie(e,t){e.doubleSided=!1;var n=t.querySelectorAll("extra double_sided")[0];n&&n&&1===parseInt(n.textContent,10)&&(e.doubleSided=!0)}function re(e,t){if(!0===Oe.convertUpAxis&&Le!==Oe.upAxis)switch(Re){case"XtoY":var n=e[0];e[0]=t*e[1],e[1]=n;break;case"XtoZ":n=e[2],e[2]=e[1],e[1]=e[0],e[0]=n;break;case"YtoX":n=e[0],e[0]=e[1],e[1]=t*n;break;case"YtoZ":n=e[1],e[1]=t*e[2],e[2]=n;break;case"ZtoX":n=e[0],e[0]=e[1],e[1]=e[2],e[2]=n;break;case"ZtoY":n=e[1],e[1]=e[2],e[2]=t*n}}function oe(e,t){var n=[e[t],e[t+1],e[t+2]];return re(n,-1),new ae.Vector3(n[0],n[1],n[2])}function se(e){if(Oe.convertUpAxis){var t=[e[0],e[4],e[8]];re(t,-1),e[0]=t[0],e[4]=t[1],e[8]=t[2],re(t=[e[1],e[5],e[9]],-1),e[1]=t[0],e[5]=t[1],e[9]=t[2],re(t=[e[2],e[6],e[10]],-1),e[2]=t[0],e[6]=t[1],e[10]=t[2],re(t=[e[0],e[1],e[2]],-1),e[0]=t[0],e[1]=t[1],e[2]=t[2],re(t=[e[4],e[5],e[6]],-1),e[4]=t[0],e[5]=t[1],e[6]=t[2],re(t=[e[8],e[9],e[10]],-1),e[8]=t[0],e[9]=t[1],e[10]=t[2],re(t=[e[3],e[7],e[11]],-1),e[3]=t[0],e[7]=t[1],e[11]=t[2]}return(new ae.Matrix4).set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ce(e){return e>-1&&e<3&&(e={X:0,Y:1,Z:2}[e=le(["X","Y","Z"][e])]),e}function le(e){if(Oe.convertUpAxis)switch(e){case"X":switch(Re){case"XtoY":case"XtoZ":case"YtoX":e="Y";break;case"ZtoX":e="Z"}break;case"Y":switch(Re){case"XtoY":case"YtoX":case"ZtoX":e="X";break;case"XtoZ":case"YtoZ":case"ZtoY":e="Z"}break;case"Z":switch(Re){case"XtoZ":e="X";break;case"YtoZ":case"ZtoX":case"ZtoY":e="Y"}}return e}var ue=void 0,he=void 0,de=null,fe=null,pe=null,ge={},me=void 0,ve=void 0,ye=void 0,be=void 0,we=void 0,_e=void 0,xe=void 0,Ee={},Ae={},Ce={},Se={},Me={},ke={},Te={},Fe={},Oe={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},Pe=1,Le="Y",Re=null;return h.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];"init_from"===n.nodeName&&(this.init_from=n.textContent)}return this},d.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.type="none";for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"skin":this.skin=(new p).parse(n),this.type=n.nodeName;break;case"morph":this.morph=(new f).parse(n),this.type=n.nodeName}}return this},f.prototype.parse=function(e){var t={},n=void 0,i=[];for(this.method=e.getAttribute("method"),this.source=e.getAttribute("source").replace(/^#/,""),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"source":t[(s=(new F).parse(r)).id]=s;break;case"targets":i=this.parseInputs(r);break;default:console.log(r.nodeName)}}for(n=0;n<i.length;n++){var o=i[n],s=t[o.source];switch(o.semantic){case"MORPH_TARGET":this.targets=s.read();break;case"MORPH_WEIGHT":this.weights=s.read()}}return this},f.prototype.parseInputs=function(e){for(var t=[],n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"input":t.push((new T).parse(i))}}return t},p.prototype.parse=function(e){var t={},n=void 0,i=void 0;this.source=e.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(1==o.nodeType)switch(o.nodeName){case"bind_shape_matrix":var s=J(o.textContent);this.bindShapeMatrix=se(s);break;case"source":var a=(new F).parse(o);t[a.id]=a;break;case"joints":n=o;break;case"vertex_weights":i=o;break;default:console.log(o.nodeName)}}return this.parseJoints(n,t),this.parseWeights(i,t),this},p.prototype.parseJoints=function(e,t){for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"input":var r=(new T).parse(i),o=t[r.source];"JOINT"===r.semantic?this.joints=o.read():"INV_BIND_MATRIX"===r.semantic&&(this.invBindMatrices=o.read())}}},p.prototype.parseWeights=function(e,t){for(var n=void 0,i=void 0,r=[],o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];if(1==s.nodeType)switch(s.nodeName){case"input":r.push((new T).parse(s));break;case"v":n=Q(s.textContent);break;case"vcount":i=Q(s.textContent)}}var a=0;for(o=0;o<i.length;o++){for(var c=i[o],l=[],u=0;u<c;u++){for(var h={},d=0;d<r.length;d++){var f=r[d],p=n[a+f.offset];switch(f.semantic){case"JOINT":h.joint=p;break;case"WEIGHT":h.weight=t[f.source].data[p]}}l.push(h),a+=r.length}for(u=0;u<l.length;u++)l[u].index=o;this.weights.push(l)}},g.prototype.getChildById=function(e,t){for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildById(e,t);if(i)return i}return null},g.prototype.getChildBySid=function(e,t){for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildBySid(e,t);if(i)return i}return null},g.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.nodes=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push((new m).parse(n))}}return this},m.prototype.getChannelForTransform=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t],i=n.target.split("/");i.shift();var r,o=i.shift(),s=o.indexOf(".")>=0,a=o.indexOf("(")>=0;if(s)o=(i=o.split(".")).shift();else if(a){o=(r=o.split("(")).shift();for(var c=0;c<r.length;c++)r[c]=parseInt(r[c].replace(/\)/,""))}if(o===e)return n.info={sid:o,dotSyntax:s,arrSyntax:a,arrIndices:r},n}return null},m.prototype.getChildById=function(e,t){if(this.id===e)return this;if(t)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildById(e,t);if(i)return i}return null},m.prototype.getChildBySid=function(e,t){if(this.sid===e)return this;if(t)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildBySid(e,t);if(i)return i}return null},m.prototype.getTransformBySid=function(e){for(var t=0;t<this.transforms.length;t++)if(this.transforms[t].sid===e)return this.transforms[t];return null},m.prototype.parse=function(e){var t=void 0;this.id=e.getAttribute("id"),this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.type=e.getAttribute("type"),this.layer=e.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new ae.Matrix4;for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push((new m).parse(i));break;case"instance_camera":this.cameras.push((new H).parse(i));break;case"instance_controller":this.controllers.push((new y).parse(i));break;case"instance_geometry":this.geometries.push((new w).parse(i));break;case"instance_light":this.lights.push((new W).parse(i));break;case"instance_node":var r=a(t=i.getAttribute("url").replace(/^#/,""));r&&this.nodes.push((new m).parse(r));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new v).parse(i));break;case"extra":break;default:console.log(i.nodeName)}}return this.channels=function(e){var t=[],n=1e6,i=-1e6;for(var r in Ae)for(var o=Ae[r],s=0;s<o.channel.length;s++){var a=o.channel[s],c=o.sampler[s];(r=a.target.split("/")[0])==e.id&&(c.create(),a.sampler=c,n=Math.min(n,c.startTime),i=Math.max(i,c.endTime),t.push(a))}return t.length&&(e.startTime=n,e.endTime=i),t}(this),function(e){if(e.channels&&e.channels.length){for(var t=[],n=[],i=0,r=e.channels.length;i<r;i++){var o,s=e.channels[i],a=s.fullSid,h=s.sampler,d=h.input,f=e.getTransformBySid(s.sid);if(s.arrIndices){o=[];for(var p=0,g=s.arrIndices.length;p<g;p++)o[p]=ce(s.arrIndices[p])}else o=le(s.member);if(f)for(-1===n.indexOf(a)&&n.push(a),p=0,g=d.length;p<g;p++){var m=d[p],v=h.getData(f.type,p,o);if(!(w=c(t,m))){w=new $(m);var y=l(t,m);t.splice(-1===y?t.length:y,0,w)}w.addTarget(a,f,o,v)}else console.log('Could not find transform "'+s.sid+'" in node '+e.id)}for(i=0;i<n.length;i++){var b=n[i];for(p=0;p<t.length;p++){var w;(w=t[p]).hasTarget(b)||u(t,w,p,b)}}e.keys=t,e.sids=n}}(this),this.updateMatrix(),this},m.prototype.updateMatrix=function(){this.matrix.identity();for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(this.matrix)},v.prototype.parse=function(e){return this.sid=e.getAttribute("sid"),this.type=e.nodeName,this.data=J(e.textContent),this.convert(),this},v.prototype.convert=function(){switch(this.type){case"matrix":this.obj=se(this.data);break;case"rotate":this.angle=ae.Math.degToRad(this.data[3]);case"translate":re(this.data,-1),this.obj=new ae.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":re(this.data,1),this.obj=new ae.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},v.prototype.apply=function(){var e=new ae.Matrix4;return function(t){switch(this.type){case"matrix":t.multiply(this.obj);break;case"translate":t.multiply(e.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":t.multiply(e.makeRotationAxis(this.obj,this.angle));break;case"scale":t.scale(this.obj)}}}(),v.prototype.update=function(e,t){var n=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(t)if(1===t.length)switch(t[0]){case 0:this.obj.n11=e[0],this.obj.n21=e[1],this.obj.n31=e[2],this.obj.n41=e[3];break;case 1:this.obj.n12=e[0],this.obj.n22=e[1],this.obj.n32=e[2],this.obj.n42=e[3];break;case 2:this.obj.n13=e[0],this.obj.n23=e[1],this.obj.n33=e[2],this.obj.n43=e[3];break;case 3:this.obj.n14=e[0],this.obj.n24=e[1],this.obj.n34=e[2],this.obj.n44=e[3]}else if(2===t.length){var i="n"+(t[0]+1)+(t[1]+1);this.obj[i]=e}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(e);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(t)&&(t=n[t[0]]),t){case"X":this.obj.x=e;break;case"Y":this.obj.y=e;break;case"Z":this.obj.z=e;break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(t)&&(t=n[t[0]]),t){case"X":this.obj.x=e;break;case"Y":this.obj.y=e;break;case"Z":this.obj.z=e;break;case"ANGLE":this.angle=ae.Math.degToRad(e);break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2],this.angle=ae.Math.degToRad(e[3])}}},y.prototype.parse=function(e){this.url=e.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1===n.nodeType)switch(n.nodeName){case"skeleton":this.skeleton.push(n.textContent.replace(/^#/,""));break;case"bind_material":for(var i=n.querySelectorAll("instance_material"),r=0;r<i.length;r++){var o=i[r];this.instance_material.push((new b).parse(o))}}}return this},b.prototype.parse=function(e){return this.symbol=e.getAttribute("symbol"),this.target=e.getAttribute("target").replace(/^#/,""),this},w.prototype.parse=function(e){this.url=e.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType&&"bind_material"===n.nodeName){for(var i=n.querySelectorAll("instance_material"),r=0;r<i.length;r++){var o=i[r];this.instance_material.push((new b).parse(o))}break}}return this},_.prototype.parse=function(e){this.id=e.getAttribute("id"),ie(this,e);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"mesh":this.mesh=new x(this).parse(n)}}return this},x.prototype.parse=function(e){this.primitives=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"source":Y(n);break;case"vertices":this.vertices=(new k).parse(n);break;case"linestrips":this.primitives.push((new C).parse(n));break;case"triangles":this.primitives.push((new S).parse(n));break;case"polygons":this.primitives.push((new E).parse(n));break;case"polylist":this.primitives.push((new A).parse(n))}}if(this.geometry3js=new ae.Geometry,null===this.vertices)return this;var i=ge[this.vertices.input.POSITION.source].data;for(t=0;t<i.length;t+=3)this.geometry3js.vertices.push(oe(i,t).clone());for(t=0;t<this.primitives.length;t++){var r=this.primitives[t];r.setVertices(this.vertices),this.handlePrimitive(r,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},x.prototype.handlePrimitive=function(e,t){if(e instanceof C)return void(t.isLineStrip=!0);var n=void 0,i=void 0,r=void 0,o=void 0,s=void 0,a=void 0,c=void 0,l=void 0,u=e.p,h=e.inputs,d=0,f=0,p=[];for(n=0;n<h.length;n++){var g=(r=h[n]).offset+1;switch(f=f<g?g:f,r.semantic){case"TEXCOORD":p.push(r.set)}}for(var m=0;m<u.length;++m)for(var v=u[m],y=0;y<v.length;){var b=[],w=[],_=null,x=[];for(l=e.vcount?e.vcount.length?e.vcount[d++]:e.vcount:v.length/f,n=0;n<l;n++)for(i=0;i<h.length;i++)switch(r=h[i],a=ge[r.source],s=(o=v[y+n*f+r.offset])*(c=a.accessor.params.length),r.semantic){case"VERTEX":b.push(o);break;case"NORMAL":w.push(oe(a.data,s));break;case"TEXCOORD":void 0===(_=_||{})[r.set]&&(_[r.set]=[]),_[r.set].push(new ae.Vector2(a.data[s],a.data[s+1]));break;case"COLOR":x.push((new ae.Color).setRGB(a.data[s],a.data[s+1],a.data[s+2]))}if(0===w.length)if(r=this.vertices.input.NORMAL){c=(a=ge[r.source]).accessor.params.length;for(var E=0,A=b.length;E<A;E++)w.push(oe(a.data,b[E]*c))}else t.calcNormals=!0;if(!_&&(_={},r=this.vertices.input.TEXCOORD))for(p.push(r.set),c=(a=ge[r.source]).accessor.params.length,E=0,A=b.length;E<A;E++)s=b[E]*c,void 0===_[r.set]&&(_[r.set]=[]),_[r.set].push(new ae.Vector2(a.data[s],1-a.data[s+1]));if(0===x.length&&(r=this.vertices.input.COLOR))for(c=(a=ge[r.source]).accessor.params.length,E=0,A=b.length;E<A;E++)s=b[E]*c,x.push((new ae.Color).setRGB(a.data[s],a.data[s+1],a.data[s+2]));var S,M,k=null,T=[];if(3===l)T.push(new ae.Face3(b[0],b[1],b[2],w,x.length?x:new ae.Color));else if(4===l)T.push(new ae.Face3(b[0],b[1],b[3],w.length?[w[0].clone(),w[1].clone(),w[3].clone()]:[],x.length?[x[0],x[1],x[3]]:new ae.Color)),T.push(new ae.Face3(b[1],b[2],b[3],w.length?[w[1].clone(),w[2].clone(),w[3].clone()]:[],x.length?[x[1],x[2],x[3]]:new ae.Color));else if(l>4&&Oe.subdivideFaces){var F=x.length?x:new ae.Color;for(i=1;i<l-1;)T.push(new ae.Face3(b[0],b[i],b[i+1],w.length?[w[0].clone(),w[i++].clone(),w[i].clone()]:[],F))}if(T.length)for(E=0,A=T.length;E<A;E++)for((k=T[E]).daeMaterial=e.material,t.faces.push(k),i=0;i<p.length;i++)S=_[p[i]],M=l>4?[S[0],S[E+1],S[E+2]]:4===l?0===E?[S[0],S[1],S[3]]:[S[1].clone(),S[2],S[3].clone()]:[S[0],S[1],S[2]],void 0===t.faceVertexUvs[i]&&(t.faceVertexUvs[i]=[]),t.faceVertexUvs[i].push(M);else console.log("dropped face with vcount "+l+" for geometry with id: "+t.id);y+=f*l}},E.prototype.setVertices=function(e){for(var t=0;t<this.inputs.length;t++)this.inputs[t].source===e.id&&(this.inputs[t].source=e.input.POSITION.source)},E.prototype.parse=function(e){this.material=e.getAttribute("material"),this.count=te(e,"count",0);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"input":this.inputs.push((new T).parse(e.childNodes[t]));break;case"vcount":this.vcount=Q(n.textContent);break;case"p":this.p.push(Q(n.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},A.prototype=Object.create(E.prototype),A.prototype.constructor=A,C.prototype=Object.create(E.prototype),C.prototype.constructor=C,S.prototype=Object.create(E.prototype),S.prototype.constructor=S,M.prototype.parse=function(e){this.params=[],this.source=e.getAttribute("source"),this.count=te(e,"count",0),this.stride=te(e,"stride",0);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if("param"===n.nodeName){var i={};i.name=n.getAttribute("name"),i.type=n.getAttribute("type"),this.params.push(i)}}return this},k.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++)if("input"===e.childNodes[t].nodeName){var n=(new T).parse(e.childNodes[t]);this.input[n.semantic]=n}return this},T.prototype.parse=function(e){return this.semantic=e.getAttribute("semantic"),this.source=e.getAttribute("source").replace(/^#/,""),this.set=te(e,"set",-1),this.offset=te(e,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},F.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"bool_array":this.data=Z(n.textContent),this.type=n.nodeName;break;case"float_array":this.data=J(n.textContent),this.type=n.nodeName;break;case"int_array":this.data=Q(n.textContent),this.type=n.nodeName;break;case"IDREF_array":case"Name_array":this.data=ee(n.textContent),this.type=n.nodeName;break;case"technique_common":for(var i=0;i<n.childNodes.length;i++)if("accessor"===n.childNodes[i].nodeName){this.accessor=(new M).parse(n.childNodes[i]);break}}}return this},F.prototype.read=function(){var e=[],t=this.accessor.params[0];switch(t.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var n=0;n<this.data.length;n+=16){var i=se(this.data.slice(n,n+16));e.push(i)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+t.type+".")}return e},O.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++)if("instance_effect"===e.childNodes[t].nodeName){this.instance_effect=(new I).parse(e.childNodes[t]);break}return this},P.prototype.isColor=function(){return null===this.texture},P.prototype.isTexture=function(){return null!=this.texture},P.prototype.parse=function(e){"transparent"===e.nodeName&&(this.opaque=e.getAttribute("opaque"));for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"color":var i=J(n.textContent);this.color=new ae.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=n.getAttribute("texture"),this.texcoord=n.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(n)}}return this},P.prototype.parseTexture=function(e){if(!e.childNodes)return this;e.childNodes[1]&&"extra"===e.childNodes[1].nodeName&&(e=e.childNodes[1]).childNodes[1]&&"technique"===e.childNodes[1].nodeName&&(e=e.childNodes[1]);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?this.texOpts[n.nodeName]=1:this.texOpts[n.nodeName]=parseInt(n.textContent);break;default:this.texOpts[n.nodeName]=n.textContent}}return this},L.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"ambient":case"emission":case"diffuse":case"specular":case"transparent":this[n.nodeName]=(new P).parse(n);break;case"bump":var i=n.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=(new P).parse(n):"normalmap"===i.toLowerCase()?this.normal=(new P).parse(n):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+i+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new P).parse(n)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new P).parse(n));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var r=n.querySelectorAll("float");r.length>0&&(this[n.nodeName]=parseFloat(r[0].textContent))}}return this.create(),this},L.prototype.create=function(){var e={},t=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var n=(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency;n>0&&(t=!0,e.transparent=!0,e.opacity=1-n)}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var r in this)switch(r){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var o=this[r];if(o instanceof P)if(o.isTexture()){var s=o.texture,a=this.effect.sampler[s];if(void 0!==a&&void 0!==a.source){var c=this.effect.surface[a.source];if(void 0!==c){var l=Ee[c.init_from];if(l){var u,h=we+l.init_from,d=ae.Loader.Handlers.get(h);null!==d?u=d.load(h):ne(u=new ae.Texture,h),"MIRROR"===a.wrap_s?u.wrapS=ae.MirroredRepeatWrapping:"WRAP"===a.wrap_s||o.texOpts.wrapU?u.wrapS=ae.RepeatWrapping:u.wrapS=ae.ClampToEdgeWrapping,"MIRROR"===a.wrap_t?u.wrapT=ae.MirroredRepeatWrapping:"WRAP"===a.wrap_t||o.texOpts.wrapV?u.wrapT=ae.RepeatWrapping:u.wrapT=ae.ClampToEdgeWrapping,u.offset.x=o.texOpts.offsetU,u.offset.y=o.texOpts.offsetV,u.repeat.x=o.texOpts.repeatU,u.repeat.y=o.texOpts.repeatV,e[i[r]]=u,"emission"===r&&(e.emissive=16777215)}}}}else"diffuse"!==r&&t||("emission"===r?e.emissive=o.color.getHex():e[r]=o.color.getHex());break;case"shininess":e[r]=this[r];break;case"reflectivity":e[r]=this[r],e[r]>0&&(e.envMap=Oe.defaultEnvMap),e.combine=ae.MixOperation;break;case"index_of_refraction":e.refractionRatio=this[r],1!==this[r]&&(e.envMap=Oe.defaultEnvMap)}switch(e.side=this.effect.doubleSided?ae.DoubleSide:ae.FrontSide,void 0!==e.diffuse&&(e.color=e.diffuse,delete e.diffuse),void 0!==e.ambient&&delete e.ambient,this.type){case"constant":void 0!=e.emissive&&(e.color=e.emissive),this.material=new ae.MeshBasicMaterial(e);break;case"phong":case"blinn":this.material=new ae.MeshPhongMaterial(e);break;case"lambert":default:this.material=new ae.MeshLambertMaterial(e)}return this.material},R.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"init_from":this.init_from=n.textContent;break;case"format":this.format=n.textContent;break;default:console.log("unhandled Surface prop: "+n.nodeName)}}return this},D.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"source":this.source=n.textContent;break;case"minfilter":this.minfilter=n.textContent;break;case"magfilter":this.magfilter=n.textContent;break;case"mipfilter":this.mipfilter=n.textContent;break;case"wrap_s":this.wrap_s=n.textContent;break;case"wrap_t":this.wrap_t=n.textContent;break;default:console.log("unhandled Sampler2D prop: "+n.nodeName)}}return this},B.prototype.create=function(){if(null===this.shader)return null},B.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),ie(this,e),this.shader=null;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(n))}}return this},B.prototype.parseNewparam=function(e){for(var t=e.getAttribute("sid"),n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"surface":this.surface[t]=new R(this).parse(i);break;case"sampler2D":this.sampler[t]=new D(this).parse(i);break;case"extra":break;default:console.log(i.nodeName)}}},B.prototype.parseProfileCOMMON=function(e){for(var t=void 0,n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"profile_COMMON":this.parseProfileCOMMON(i);break;case"technique":t=i;break;case"newparam":this.parseNewparam(i);break;case"image":var r=(new h).parse(i);Ee[r.id]=r;break;case"extra":break;default:console.log(i.nodeName)}}return t},B.prototype.parseTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new L(n.nodeName,this).parse(n);break;case"extra":this.parseExtra(n)}}},B.prototype.parseExtra=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"technique":this.parseExtraTechnique(n)}}},B.prototype.parseExtraTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"bump":this.shader.parse(e)}}},I.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},N.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.source={};for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"animation":var i=(new N).parse(n);for(var r in i.source)this.source[r]=i.source[r];for(var o=0;o<i.channel.length;o++)this.channel.push(i.channel[o]),this.sampler.push(i.sampler[o]);break;case"source":r=(new F).parse(n),this.source[r.id]=r;break;case"sampler":this.sampler.push(new U(this).parse(n));break;case"channel":this.channel.push(new j(this).parse(n))}}return this},j.prototype.parse=function(e){this.source=e.getAttribute("source").replace(/^#/,""),this.target=e.getAttribute("target");var t=this.target.split("/");t.shift();var n=t.shift(),i=n.indexOf(".")>=0,r=n.indexOf("(")>=0;if(i)t=n.split("."),this.sid=t.shift(),this.member=t.shift();else if(r){var o=n.split("(");this.sid=o.shift();for(var s=0;s<o.length;s++)o[s]=parseInt(o[s].replace(/\)/,""));this.arrIndices=o}else this.sid=n;return this.fullSid=n,this.dotSyntax=i,this.arrSyntax=r,this},U.prototype.parse=function(e){this.id=e.getAttribute("id"),this.inputs=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"input":this.inputs.push((new T).parse(n))}}return this},U.prototype.create=function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=this.animation.source[t.source];switch(t.semantic){case"INPUT":this.input=n.read();break;case"OUTPUT":this.output=n.read(),this.strideOut=n.accessor.stride;break;case"INTERPOLATION":this.interpolation=n.read();break;case"IN_TANGENT":case"OUT_TANGENT":break;default:console.log(t.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){for(this.startTime=1e8,this.endTime=-1e8,e=0;e<this.input.length;e++)this.startTime=Math.min(this.startTime,this.input[e]),this.endTime=Math.max(this.endTime,this.input[e]);this.duration=this.endTime-this.startTime}},U.prototype.getData=function(e,t,n){var i=void 0;if("matrix"===e&&16===this.strideOut)i=this.output[t];else if(this.strideOut>1){i=[],t*=this.strideOut;for(var r=0;r<this.strideOut;++r)i[r]=this.output[t+r];if(3===this.strideOut)switch(e){case"rotate":case"translate":re(i,-1);break;case"scale":re(i,1)}else 4===this.strideOut&&"matrix"===e&&re(i,-1)}else i=this.output[t],n&&"translate"===e&&(i=function(e,t){if(!0!==Oe.convertUpAxis||Le===Oe.upAxis)return t;switch(e){case"X":t="XtoY"===Re?-1*t:t;break;case"Y":t="YtoZ"===Re||"YtoX"===Re?-1*t:t;break;case"Z":t="ZtoY"===Re?-1*t:t}return t}(n,i));return i},$.prototype.addTarget=function(e,t,n,i){this.targets.push({sid:e,member:n,transform:t,data:i})},$.prototype.apply=function(e){for(var t=0;t<this.targets.length;++t){var n=this.targets[t];e&&n.sid!==e||n.transform.update(n.data,n.member)}},$.prototype.getTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return this.targets[t];return null},$.prototype.hasTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return!0;return!1},$.prototype.interpolate=function(e,t){for(var n=0,i=this.targets.length;n<i;n++){var r,o=this.targets[n],s=e.getTarget(o.sid);if("matrix"!==o.transform.type&&s){var a=(t-this.time)/(e.time-this.time),c=s.data,l=o.data;if(a<0&&(a=0),a>1&&(a=1),l.length){r=[];for(var u=0;u<l.length;++u)r[u]=l[u]+(c[u]-l[u])*a}else r=l+(c-l)*a}else r=o.data;o.transform.update(r,o.member)}},z.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"optics":this.parseOptics(n)}}return this},z.prototype.parseOptics=function(e){for(var t=0;t<e.childNodes.length;t++)if("technique_common"===e.childNodes[t].nodeName)for(var n=e.childNodes[t],i=0;i<n.childNodes.length;i++)if(this.technique=n.childNodes[i].nodeName,"perspective"===this.technique)for(var r=n.childNodes[i],o=0;o<r.childNodes.length;o++)switch((a=r.childNodes[o]).nodeName){case"yfov":this.yfov=a.textContent;break;case"xfov":this.xfov=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}else if("orthographic"===this.technique){var s=n.childNodes[i];for(o=0;o<s.childNodes.length;o++){var a;switch((a=s.childNodes[o]).nodeName){case"xmag":this.xmag=a.textContent;break;case"ymag":this.ymag=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}}}return this},H.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},V.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);break;case"technique":this.parseTechnique(n)}}return this},V.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++)switch(e.childNodes[t].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=e.childNodes[t].nodeName;for(var n=e.childNodes[t],i=0;i<n.childNodes.length;i++){var r=n.childNodes[i];switch(r.nodeName){case"color":var o=J(r.textContent);this.color=new ae.Color(0),this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"falloff_angle":this.falloff_angle=parseFloat(r.textContent);break;case"quadratic_attenuation":var s=parseFloat(r.textContent);this.distance=s?Math.sqrt(1/s):0}}}return this},V.prototype.parseTechnique=function(e){this.profile=e.getAttribute("profile");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"intensity":this.intensity=parseFloat(n.textContent)}}return this},W.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},G.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.joints=[],this.links=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n)}}return this},G.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(e.childNodes[t].nodeName){case"joint":this.joints.push((new q).parse(n));break;case"link":this.links.push((new X).parse(n))}}return this},q.prototype.parse=function(e){this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.axis=new ae.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var t=J(e.querySelector("axis").textContent);this.axis=oe(t,0);var n=e.querySelector("limits min")?parseFloat(e.querySelector("limits min").textContent):-360,i=e.querySelector("limits max")?parseFloat(e.querySelector("limits max").textContent):360;this.limits={min:n,max:i};for(var r=["prismatic","revolute"],o=0;o<r.length;o++){var s=r[o];e.querySelector(s)&&(this.type=s)}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},X.prototype.parse=function(e){this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.transforms=[],this.attachments=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"attachment_full":this.attachments.push((new K).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new v).parse(n))}}return this},K.prototype.parse=function(e){this.joint=e.getAttribute("joint").split("/").pop(),this.links=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"link":this.links.push((new X).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new v).parse(n))}}return this},{load:function(t,n,i,r){var o=0;if(document.implementation&&document.implementation.createDocument){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState?0===s.status||200===s.status?s.response?(pe=n,e(s.response,void 0,t)):r?r({type:"error",url:t}):console.error("ColladaLoader: Empty or non-existing file ("+t+")"):r?r({type:"error",url:t}):console.error("ColladaLoader: Couldn't load \""+t+'" ('+s.status+")"):3===s.readyState&&i&&(0===o&&(o=s.getResponseHeader("Content-Length")),i({total:o,loaded:s.responseText.length}))},s.open("GET",t,!0),s.send(null)}else alert("Don't know how to parse XML!")},parse:e,applySkin:o,geometries:Se,options:Oe}}n.d(t,"b",function(){return re}),n.d(t,"a",function(){return Se}),n.d(t,"c",function(){return N}),n.d(t,"f",function(){return k}),n.d(t,"d",function(){return Me}),n.d(t,"e",function(){return Q}),n.d(t,"g",function(){return S});var u=n(10),h=n(35),d=(n.n(h),n(73)),f=n(155),p=(n.n(f),n(74)),g=n(180),m=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w={NONE:"none",VISIBLE:"visible",TRANSPARENT:"transparent"},_=new u.Vector3,x=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"setFromObject",value:function(e){var t=this;return this.makeEmpty(),e.updateMatrixWorld(!0),e.traverseVisible(function(e){var n=e.geometry;if(void 0!==n)if(n.isGeometry)for(var i=n.vertices,r=0,o=i.length;r<o;r++)_.copy(i[r]),_.applyMatrix4(e.matrixWorld),t.expandByPoint(_);else if(n.isBufferGeometry){var s=n.attributes.position;if(void 0!==s)for(var a=0,c=s.count;a<c;a++)_.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),t.expandByPoint(_)}}),this}}]),t}(u.Box3),E={AdsumObject3D:"AdsumObject3D",BuildingObject:"BuildingObject",FloorObject:"FloorObject",LabelImageObject:"LabelImageObject",LabelObject:"LabelObject",LabelTextObject:"LabelTextObject",SiteObject:"SiteObject",SpaceObject:"SpaceObject",PathSectionObject:"PathSectionObject",UserObject:"UserObject"},A=new x,C=function(){function e(){r(this,e),this.id=null,this.isAdsumObject=!0,this._mesh=null,this._levelOfDetails=null,this.placeId=null}return b(e,null,[{key:"_createFromMesh",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),i=new this;return i.id=n,i._setMesh(e),t.levelOfDetails&&(i._levelOfDetails=t.levelOfDetails),t.placeId&&null!==t.placeId?i.placeId=t.placeId:i.placeId=Symbol("AdsumMapPlaceId"),i._mesh.onBeforeRender=i._onBeforeRender.bind(i),i}}]),b(e,[{key:"getType",value:function(){return E.AdsumObject3D}},{key:"_setMesh",value:function(e){return null!==this._mesh&&(this._mesh.adsumObject=null),this._mesh=e,this._mesh.adsumObject=this,this}},{key:"setDisplayMode",value:function(e){switch(e){case w.NONE:this._mesh.visible=!1;break;case w.VISIBLE:this._mesh.visible=!0,void 0!==this._mesh.material&&(this._mesh.material.visible=!0);break;case w.TRANSPARENT:if(this._mesh.visible=!0,void 0===this._mesh.material)throw new Error("AdsumWebMap.AdsumObject3D: DisplayMode transparent is not supported with the current object");this._mesh.material.visible=!1;break;default:throw new Error("Unexpected")}}},{key:"getDisplayMode",value:function(){return this._mesh.visible&&void 0!==this._mesh.material?this._mesh.material.visible?w.VISIBLE:w.TRANSPARENT:w.NONE}},{key:"moveTo",value:function(e,t,n){this._mesh.position.x=e,this._mesh.position.y=t,this._mesh.position.z=n}},{key:"moveBy",value:function(e,t,n){this._mesh.position.x+=e,this._mesh.position.y+=t,this._mesh.position.z+=n}},{key:"getSizeAndCenter",value:function(){var e=this;if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]){A.makeEmpty();var t=this._mesh.geometry.vertices,n=new u.Vector3;t.forEach(function(t){n.copy(t),n.applyMatrix4(e._mesh.matrixWorld),A.expandByPoint(n)})}else A.setFromObject(this._mesh);var i=new u.Vector3,r=new u.Vector3;return A.getCenter(i),A.getSize(r),{size:r,center:i}}},{key:"rotateZ",value:function(e){this._mesh.rotateZ(e)}},{key:"update",value:function(){this._mesh.matrixAutoUpdate||this._mesh.updateMatrix(),this._mesh.updateMatrixWorld()}},{key:"_applyLod",value:function(e){null!==this._levelOfDetails&&this._levelOfDetails.applyLod(this,e)}},{key:"_onBeforeRender",value:function(e,t,n,i,r,o){}},{key:"_raycast",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!1===this._mesh.visible)return!1;if(void 0===this._mesh.material||this._mesh.material.visible){var n=[];if(this._mesh.raycast(e,n),1===n.length){var i=n[0];t.push({object:this,distance:i.distance,position:this._mesh.worldToLocal(i.point)})}}return!0}},{key:"_addChild",value:function(e){this._mesh.add(e._mesh)}},{key:"_dispose",value:function(){var e=function(e){e.geometry&&e.geometry.dispose&&e.geometry.dispose(),e.material&&(Object.keys(e.material).forEach(function(t){var n=e.material[t];null!==n&&"object"===n&&n.dispose&&n.dispose()}),e.material.dispose&&e.material.dispose())};this._mesh.traverse(e),e(this._mesh),null!==this._mesh.parent&&this._mesh.parent.remove(this._mesh)}}]),e}(),S=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isUser=!0,e.parent=null,e}return s(t,e),b(t,null,[{key:"createDefault",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),i=new u.RingGeometry(e/2,e/2-e/8,32);i.merge(new u.CircleGeometry(e/8,16));var r=new u.MeshBasicMaterial({color:769978,side:u.DoubleSide});r.transparent=!0;var o=new u.Mesh(i,r);return this._createFromMesh(o,t,n)}}]),b(t,[{key:"getType",value:function(){return E.UserObject}}]),t}(C),M=function(){function e(){r(this,e),this.site=null,this.buildings=new Map,this.floors=new Map,this.spaces=new Map,this.labels=new Map,this.user=null,this.pathSectionObjects=new Map}return b(e,[{key:"init",value:function(e,t){this.site=e.site,this.buildings=e.buildingsMap,this.floors=e.floorsMap,this.spaces=e.spacesMap,this.labels=e.labelsMap,this.user=S.createDefault(t.meterToAdsumDistance(3),{placeId:Symbol("UserPlace")},Symbol("UserPositionId"))}},{key:"getFloor",value:function(e){return this.floors.has(e)?this.floors.get(e):null}},{key:"getBuilding",value:function(e){return this.buildings.has(e)?this.buildings.get(e):null}},{key:"getSpace",value:function(e){return this.spaces.has(e)?this.spaces.get(e):null}},{key:"getLabel",value:function(e){return this.labels.has(e)?this.labels.get(e):null}}]),e}(),k={floor:{didChanged:"scene.floor.didChanged"}},T=function(e){function t(e){var n;return r(this,t),n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.awm=e,n.scene=null,n.currentFloor=null,n}return s(t,e),b(t,[{key:"init",value:function(e){this.scene=e.scene,e.site.setDisplayMode(w.VISIBLE),e.buildingsMap.forEach(function(e){e.setDisplayMode(w.VISIBLE)}),e.floorsMap.forEach(function(e){e.setDisplayMode(w.NONE)}),this.currentFloor=null}},{key:"getCurrentFloor",value:function(){return this.currentFloor}},{key:"setCurrentFloor",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e===this.currentFloor?Promise.resolve():new Promise(function(i,r){try{n&&console.warn("AdsumWebMap.SceneManager.setCurrentFloor: animated parameter is not supported yet"),null===t.currentFloor?(t.awm.objectManager.site.setDisplayMode(w.TRANSPARENT),t.awm.objectManager.buildings.forEach(function(e){e.setDisplayMode(w.TRANSPARENT)})):t.currentFloor.setDisplayMode(w.NONE),null===e?(t.awm.objectManager.site.setDisplayMode(w.VISIBLE),t.awm.objectManager.buildings.forEach(function(e){e.setDisplayMode(w.VISIBLE)})):e.setDisplayMode(w.VISIBLE);var o=t.currentFloor;t.currentFloor=e,t.dispatchEvent({type:k.floor.didChanged,previous:o,current:e}),i()}catch(e){r(e)}})}}]),t}(u.EventDispatcher),F=function(){function e(t,n){r(this,e),this.awm=t,this.options=n,this.container=n.container,this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.renderer=new u.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:n.gpuPower,canvas:this.canvas,logarithmicDepthBuffer:!0}),this.renderer.capabilities.logarithmicDepthBuffer=null!==this.renderer.extensions.get("EXT_frag_depth"),this.container.appendChild(this.canvas),this.options.shadowEnabled&&(this.renderer.shadowMap.type=u.PCFSoftShadowMap,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.needsUpdate=!0),this.renderer.setClearColor(this.options.clearColor),this._animationFrameId=null,this._animationFrameIdTween=null}return b(e,[{key:"init",value:function(){this.options.autoCompileMaterials&&this.compileMaterials(),this._resizeCanvas()}},{key:"compileMaterials",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.renderer.compile(this.awm.sceneManager.scene,this.awm.cameraManager.camera),t&&this.renderer.domElement.addEventListener("webglcontextrestored",function(){e.compileMaterials(!1)},!1)}},{key:"start",value:function(){this._resizeCanvas(),this._animationFrameId=requestAnimationFrame(this.start.bind(this)),Object(h.update)(),this.awm.cameraManager.control.update(),this._updateLevelOfDetails(this.awm.cameraManager.camera),this.renderer.render(this.awm.sceneManager.scene,this.awm.cameraManager.camera)}},{key:"_updateLevelOfDetails",value:function(e){var t=this,n=this.awm.objectManager.site;n._applyLod(e),n.getDisplayMode()!==w.NONE&&(n.buildings.forEach(function(n){return t._updateLevelOfDetailsOnBuilding(n,e)}),n.spaces.forEach(function(n){return t._updateLevelOfDetailsOnSpace(n,e)}),n.labels.forEach(function(t){return t._applyLod(e)}))}},{key:"_updateLevelOfDetailsOnBuilding",value:function(e,t){var n=this;e._applyLod(t),e.getDisplayMode()!==w.NONE&&(e.floors.forEach(function(e){return n._updateLevelOfDetailsOnFloor(e,t)}),e.labels.forEach(function(e){return e._applyLod(t)}))}},{key:"_updateLevelOfDetailsOnFloor",value:function(e,t){var n=this;e._applyLod(t),e.getDisplayMode()!==w.NONE&&(e.spaces.forEach(function(e){return n._updateLevelOfDetailsOnSpace(e,t)}),e.labels.forEach(function(e){return e._applyLod(t)}))}},{key:"_updateLevelOfDetailsOnSpace",value:function(e,t){e._applyLod(t),e.getDisplayMode()!==w.NONE&&e.labels.forEach(function(e){return e._applyLod(t)})}},{key:"_getDevicePixelRatio",value:function(){return window.devicePixelRatio||1}},{key:"_resizeCanvas",value:function(){var e=this.renderer.getSize(),t=e.width,n=e.height,i=t!==this.container.clientWidth||n!==this.container.clientHeight,r=this.renderer.getPixelRatio()!==this._getDevicePixelRatio();if((i||r)&&(i&&this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),r&&this.renderer.setPixelRatio(this._getDevicePixelRatio()),i)){var o=this.awm.cameraManager,s=o.camera,a=o.control;s.aspect=this.container.clientWidth/this.container.clientHeight,s.updateProjectionMatrix(),a.update()}}}]),e}(),O={Vector3:u.Vector3,MOUSE:u.MOUSE,Quaternion:u.Quaternion,Spherical:u.Spherical,EventDispatcher:u.EventDispatcher,Vector2:u.Vector2};O.OrbitControls=function(e,t){function n(){return Math.pow(.95,x.zoomSpeed)}function i(e){F.theta-=e}function r(e){F.phi-=e}function o(e){x.object.isPerspectiveCamera?P/=e:x.object.isOrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom*e)),x.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function s(e){x.object.isPerspectiveCamera?P*=e:x.object.isOrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom/e)),x.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function a(e){if(!1!==x.enabled){switch(e.preventDefault(),e.button){case x.mouseButtons.ORBIT:if(!1===x.enableRotate)return;!function(e){D.set(e.clientX,e.clientY)}(e),M=S.ROTATE;break;case x.mouseButtons.ZOOM:if(!1===x.enableZoom)return;!function(e){$.set(e.clientX,e.clientY)}(e),M=S.DOLLY;break;case x.mouseButtons.PAN:if(!1===x.enablePan)return;!function(e){N.set(e.clientX,e.clientY)}(e),M=S.PAN}M!==S.NONE&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",l,!1),x.dispatchEvent(A))}}function c(e){if(!1!==x.enabled)switch(e.preventDefault(),M){case S.ROTATE:if(!1===x.enableRotate)return;!function(e){B.set(e.clientX,e.clientY),I.subVectors(B,D).multiplyScalar(x.rotateSpeed);var t=x.domElement===document?x.domElement.body:x.domElement;i(2*Math.PI*I.x/t.clientWidth),r(2*Math.PI*I.y/t.clientHeight),D.copy(B),x.update()}(e);break;case S.DOLLY:if(!1===x.enableZoom)return;!function(e){z.set(e.clientX,e.clientY),H.subVectors(z,$),H.y>0?o(n()):H.y<0&&s(n()),$.copy(z),x.update()}(e);break;case S.PAN:if(!1===x.enablePan)return;!function(e){j.set(e.clientX,e.clientY),U.subVectors(j,N).multiplyScalar(x.panSpeed),G(U.x,U.y),N.copy(j),x.update()}(e)}}function l(e){!1!==x.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",l,!1),x.dispatchEvent(C),M=S.NONE)}function u(e){!1===x.enabled||!1===x.enableZoom||M!==S.NONE&&M!==S.ROTATE||(e.preventDefault(),e.stopPropagation(),x.dispatchEvent(A),function(e){e.deltaY<0?s(n()):e.deltaY>0&&o(n()),x.update()}(e),x.dispatchEvent(C))}function h(e){!1!==x.enabled&&!1!==x.enableKeys&&!1!==x.enablePan&&function(e){switch(e.keyCode){case x.keys.UP:G(0,x.keyPanSpeed),x.update();break;case x.keys.BOTTOM:G(0,-x.keyPanSpeed),x.update();break;case x.keys.LEFT:G(x.keyPanSpeed,0),x.update();break;case x.keys.RIGHT:G(-x.keyPanSpeed,0),x.update()}}(e)}function d(e){if(!1!==x.enabled){switch(e.touches.length){case 1:if(!1===x.enableRotate)return;!function(e){D.set(e.touches[0].pageX,e.touches[0].pageY)}(e),M=S.TOUCH_ROTATE;break;case 2:if(!1===x.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);$.set(0,i)}(e),M=S.TOUCH_DOLLY;break;case 3:if(!1===x.enablePan)return;!function(e){N.set(e.touches[0].pageX,e.touches[0].pageY)}(e),M=S.TOUCH_PAN;break;default:M=S.NONE}M!==S.NONE&&x.dispatchEvent(A)}}function f(e){if(!1!==x.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===x.enableRotate)return;if(M!==S.TOUCH_ROTATE)return;!function(e){B.set(e.touches[0].pageX,e.touches[0].pageY),I.subVectors(B,D).multiplyScalar(x.rotateSpeed);var t=x.domElement===document?x.domElement.body:x.domElement;i(2*Math.PI*I.x/t.clientWidth),r(2*Math.PI*I.y/t.clientHeight),D.copy(B),x.update()}(e);break;case 2:if(!1===x.enableZoom)return;if(M!==S.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);z.set(0,r),H.subVectors(z,$),H.y>0?s(n()):H.y<0&&o(n()),$.copy(z),x.update()}(e);break;case 3:if(!1===x.enablePan)return;if(M!==S.TOUCH_PAN)return;!function(e){j.set(e.touches[0].pageX,e.touches[0].pageY),U.subVectors(j,N).multiplyScalar(x.panSpeed),G(U.x,U.y),N.copy(j),x.update()}(e);break;default:M=S.NONE}}function p(e){!1!==x.enabled&&(x.dispatchEvent(C),M=S.NONE)}function g(e){!1!==x.enabled&&e.preventDefault()}var m,v,y,b,w;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new O.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.panningMode=O.ScreenSpacePanning,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:O.MOUSE.LEFT,ZOOM:O.MOUSE.MIDDLE,PAN:O.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return T.phi},this.getAzimuthalAngle=function(){return T.theta},this.saveState=function(){x.target0.copy(x.target),x.position0.copy(x.object.position),x.zoom0=x.object.zoom},this.reset=function(){x.target.copy(x.target0),x.object.position.copy(x.position0),x.object.zoom=x.zoom0,x.object.updateProjectionMatrix(),x.dispatchEvent(E),x.update(),M=S.NONE},this.update=(m=new O.Vector3,v=(new O.Quaternion).setFromUnitVectors(e.up,new O.Vector3(0,1,0)),y=v.clone().inverse(),b=new O.Vector3,w=new O.Quaternion,function(){var e=x.object.position;return m.copy(e).sub(x.target),m.applyQuaternion(v),T.setFromVector3(m),x.autoRotate&&M===S.NONE&&i(2*Math.PI/60/60*x.autoRotateSpeed),T.theta+=F.theta,T.phi+=F.phi,T.theta=Math.max(x.minAzimuthAngle,Math.min(x.maxAzimuthAngle,T.theta)),T.phi=Math.max(x.minPolarAngle,Math.min(x.maxPolarAngle,T.phi)),T.makeSafe(),T.radius*=P,T.radius=Math.max(x.minDistance,Math.min(x.maxDistance,T.radius)),x.target.add(L),m.setFromSpherical(T),m.applyQuaternion(y),e.copy(x.target).add(m),x.object.lookAt(x.target),!0===x.enableDamping?(F.theta*=1-x.dampingFactor,F.phi*=1-x.dampingFactor,L.multiplyScalar(1-x.dampingFactor)):(F.set(0,0,0),L.set(0,0,0)),P=1,!!(R||b.distanceToSquared(x.object.position)>k||8*(1-w.dot(x.object.quaternion))>k)&&(x.dispatchEvent(E),b.copy(x.object.position),w.copy(x.object.quaternion),R=!1,!0)}),this.dispose=function(){x.domElement.removeEventListener("contextmenu",g,!1),x.domElement.removeEventListener("mousedown",a,!1),x.domElement.removeEventListener("wheel",u,!1),x.domElement.removeEventListener("touchstart",d,!1),x.domElement.removeEventListener("touchend",p,!1),x.domElement.removeEventListener("touchmove",f,!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",l,!1),window.removeEventListener("keydown",h,!1)};var _,x=this,E={type:"change"},A={type:"start"},C={type:"end"},S={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},M=S.NONE,k=1e-6,T=new O.Spherical,F=new O.Spherical,P=1,L=new O.Vector3,R=!1,D=new O.Vector2,B=new O.Vector2,I=new O.Vector2,N=new O.Vector2,j=new O.Vector2,U=new O.Vector2,$=new O.Vector2,z=new O.Vector2,H=new O.Vector2,V=(_=new O.Vector3,function(e,t){_.setFromMatrixColumn(t,0),_.multiplyScalar(-e),L.add(_)}),W=function(){var e=new O.Vector3;return function(t,n){switch(x.panningMode){case O.ScreenSpacePanning:e.setFromMatrixColumn(n,1);break;case O.HorizontalPanning:e.setFromMatrixColumn(n,0),e.crossVectors(x.object.up,e)}e.multiplyScalar(t),L.add(e)}}(),G=function(){var e=new O.Vector3;return function(t,n){var i=x.domElement===document?x.domElement.body:x.domElement;if(x.object.isPerspectiveCamera){var r=x.object.position;e.copy(r).sub(x.target);var o=e.length();o*=Math.tan(x.object.fov/2*Math.PI/180),V(2*t*o/i.clientHeight,x.object.matrix),W(2*n*o/i.clientHeight,x.object.matrix)}else x.object.isOrthographicCamera?(V(t*(x.object.right-x.object.left)/x.object.zoom/i.clientWidth,x.object.matrix),W(n*(x.object.top-x.object.bottom)/x.object.zoom/i.clientHeight,x.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),x.enablePan=!1)}}();x.domElement.addEventListener("contextmenu",g,!1),x.domElement.addEventListener("mousedown",a,!1),x.domElement.addEventListener("wheel",u,!1),x.domElement.addEventListener("touchstart",d,!1),x.domElement.addEventListener("touchend",p,!1),x.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",h,!1),this.update()},O.OrbitControls.prototype=Object.create(O.EventDispatcher.prototype),O.OrbitControls.prototype.constructor=O.OrbitControls,Object.defineProperties(O.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),O.ScreenSpacePanning=0,O.HorizontalPanning=1;var P=O.OrbitControls,L={UP:new u.Vector3(0,0,1),ZOOM_MIN:25,ZOOM_MAX:2e4},R=function e(){r(this,e),this.eye=new u.Vector3,this.up=L.UP.clone(),this.target=new u.Vector3,this.zoomMin=L.ZOOM_MIN,this.zoomMax=L.ZOOM_MAX},D=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){this.zoom=!0,this.fitRatio=1.5}}]),t}(d.a),B=new x,I=function(e){function t(e,n){var i;return r(this,t),i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i.awm=e,i.options=n,i.camera=new u.PerspectiveCamera(45,1,.1,5e4),i.control=null,i.floorPlane=new u.Plane,i.floorPlane.normal.set(0,0,-1),i.ray=new u.Ray,i.cameraCalibrations=new Map,i._tween=null,i}return s(t,e),b(t,[{key:"init",value:function(e){var t=this.awm.engineManager.canvas;this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.near=e.meterToAdsumDistance(1),this.camera.far=e.meterToAdsumDistance(1e4),this.camera.up.set(0,0,1),this.camera.updateProjectionMatrix(),this.control=new P(this.camera,this.awm.engineManager.canvas),this.control.enableZoom=!0,this.control.enableRotate=!0,this.control.minPolarAngle=Math.PI/20,this.control.maxPolarAngle=Math.PI/2,this.control.minDistance=e.meterToAdsumDistance(5),this.control.enableZoom=!0,this.control.enableDamping=!1,this.control.enableKeys=!1,this.control.panningMode=1,this.control.mouseButtons={PAN:u.MOUSE.LEFT,ZOOM:u.MOUSE.MIDDLE,ORBIT:u.MOUSE.RIGHT}}},{key:"centerOnFloor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.reset();try{var n=null;if(this.cameraCalibrations.has(e))n=this.cameraCalibrations.get(e);else{console.warn("AdsumWebMap.CameraManager: Missing calibration for centerOnFloor");var i=null===e?this.awm.objectManager.site:e;B.setFromObject(i._mesh);var r=new u.Sphere;B.getBoundingSphere(r);var o=new u.Vector3;i._mesh.getWorldPosition(o),r.center.z=o.z,(n=new R).target.copy(r.center),n.eye.copy(r.center);var s=1.5*r.radius*Math.sin(Math.PI/4);n.eye.setZ(n.eye.z+s),n.eye.setY(n.eye.y-s)}return this.floorPlane.constant=n.target.z,this.camera.up.copy(n.up),this.goTo(n.eye,n.target,t)}catch(e){return Promise.reject(e)}}},{key:"centerOn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.reset();try{var i,r=null;null===n?(i=this.options,r=i.centerOnOptions):r=new D(n);var o=e.getSizeAndCenter(),s=o.size,a=o.center,c=this.control.target.clone().sub(this.camera.position),l=a.clone().sub(c);if(r.zoom){var u=this.camera,h=u.aspect,d=u.fov,f=Math.max(s.x,s.y,s.z)/(2*Math.atan(Math.PI*d/360)),p=f/h,g=r.fitRatio*Math.max(f,p);g=Math.min(Math.max(g,this.control.minDistance),this.control.maxDistance);var m=c.normalize().multiplyScalar(g);l.copy(a).sub(m)}return 0!==this.control.target.z-a.z&&(c.normalize(),this.ray.origin.copy(l),this.ray.direction.copy(c),this.ray.intersectPlane(this.floorPlane,a)),this.goTo(l,a,t)}catch(e){return Promise.reject(e)}}},{key:"setCameraCalibrations",value:function(e){var t=this;this.cameraCalibrations=new Map,e.forEach(function(e,n){var i=t.awm.objectManager,r=null===n?i.site:i.getFloor(n);if(null!==r){r._mesh.updateMatrixWorld();var o=new u.Vector3;if(r._mesh.getWorldPosition(o),e.target.z!==o.z){console.warn("AdsumWebMap: invalid calibration target of "+r.id+", it's not on the floor");var s=new u.Plane;s.normal.set(0,0,-1),s.constant=o.z;var a=new u.Vector3;a.copy(e.target).sub(e.eye),a.normalize();var c=new u.Ray;c.origin.copy(e.eye),c.direction.copy(a),c.intersectPlane(s,e.target)}t.cameraCalibrations.set(null===n?null:r,e)}})}},{key:"goTo",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(r,o){try{if(n.reset(),i){n.control.enabled=!1;var s={positionX:n.camera.position.x,positionY:n.camera.position.y,positionZ:n.camera.position.z,targetX:n.control.target.x,targetY:n.control.target.y,targetZ:n.control.target.z};n._tween=new h.Tween(s).to({positionX:e.x,positionY:e.y,positionZ:e.z,targetX:t.x,targetY:t.y,targetZ:t.z},700).on("update",function(){n.camera.position.set(s.positionX,s.positionY,s.positionZ),n.control.target.set(s.targetX,s.targetY,s.targetZ),n.control.update()}).on("stop",function(){n._setCameraPositionAndTarget(e,t),n.control.enabled=!0,r(!1)}).on("complete",function(){n.control.enabled=!0,r(!0)}).easing(h.Easing.Quadratic.InOut).start()}n._setCameraPositionAndTarget(e,t),i||r(!0)}catch(e){o(e)}})}},{key:"reset",value:function(){return null!==this._tween&&(this._tween.stop(),this._tween=null),this}},{key:"_setCameraPositionAndTarget",value:function(e,t){this.camera.position.copy(e),this.control.target.copy(t),this.control.update()}}]),t}(u.EventDispatcher),N={click:"click",dblClick:"dblClick"},j=function(e){function t(e){var n;return r(this,t),n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.awm=e,n._dragging=!1,n._mouse=new u.Vector2,n._raycaster=new u.Raycaster,n}return s(t,e),b(t,[{key:"init",value:function(){var e=this;this.awm.engineManager.canvas.addEventListener("mousemove",this._onMouseMove.bind(this));var t=new f.Manager(this.awm.engineManager.canvas);t.add(new f.Tap({event:"doubletap",threshold:10,taps:2,posThreshold:50*window.devicePixelRatio})),t.add(new f.Tap({event:"singletap",threshold:10,time:500,interval:100})),t.get("doubletap").recognizeWith("singletap"),t.get("singletap").requireFailure("doubletap"),t.on("singletap ",this._onMouseClick.bind(this)),t.on("doubletap ",this._onMouseDblClick.bind(this)),this.awm.engineManager.canvas.addEventListener("mousedown",function(){e._dragging=!0},!1),window.document.addEventListener("mouseup",function(){e._dragging=!1},!1)}},{key:"_onMouseClick",value:function(e){this._setMouseCoordinate(e),this.dispatchEvent({type:N.click,intersects:this._raycast()})}},{key:"_onMouseDblClick",value:function(e){this._setMouseCoordinate(e),this.dispatchEvent({type:N.dblClick,intersects:this._raycast()})}},{key:"_onMouseMove",value:function(){}},{key:"_setMouseCoordinate",value:function(e){var t=0,n=0;if(void 0===e.clientX&&void 0===e.clientY){var i=e.target.getBoundingClientRect();t=e.center.x-i.left,n=e.center.y-i.top}else e.offsetX||0===e.offsetX?(t=e.offsetX,n=e.offsetY):(t=e.layerX,n=e.layerY);this._mouse.set(t/this.awm.engineManager.canvas.clientWidth*2-1,-n/this.awm.engineManager.canvas.clientHeight*2+1),this._raycaster.setFromCamera(this._mouse,this.awm.cameraManager.camera),this._raycaster.near=this.awm.cameraManager.camera.near,this._raycaster.far=this.awm.cameraManager.camera.far}},{key:"_raycast",value:function(){var e=[];return this.awm.objectManager.site._raycast(this._raycaster,e),e.sort(function(e,t){return e.distance-t.distance}),e}}]),t}(u.EventDispatcher),U=function(){function e(t,n,i,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,e),this.id=t||Symbol("PathNodeId"),this.ground=n,this.links=new Set,this.utmPosition=o,this.groundPosition=i,this.isDynamic=!1,this._isGate=s}return b(e,null,[{key:"create",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new this(e,t,n,c(t,n,i),r)}},{key:"updateFromAdsumObject",value:function(e,t,n){var i=a(t),r=i.ground,o=i.groundPosition;e.ground=r,e.groundPosition=o,e.utmPosition=c(r,o,n)}},{key:"createFromAdsumObject",value:function(e,t,n){var i=a(t),r=i.ground,o=i.groundPosition;return this.create(e,r,o,n)}}]),b(e,[{key:"getLinkTo",value:function(e){var t=null;return this.links.forEach(function(n){n.to!==e&&n.from!==e||(t=n)}),t}}]),e}(),$={STANDARD:0,ONLY_DISABLED:1,NOT_DISABLED:2,CLOSED:3},z=function(){function e(t,n,i,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];r(this,e),this.id=t,this.type=n,this.from=i,this.to=o,this.bidirectional=s,this.distance=Math.sqrt(Math.pow(i.utmPosition.N-o.utmPosition.N,2)+Math.pow(i.utmPosition.E-o.utmPosition.E,2)+Math.pow(i.utmPosition.alt-o.utmPosition.alt,2))}return b(e,[{key:"isAccessible",value:function(e){return this.type===$.STANDARD||(e?this.type===$.ONLY_DISABLED:this.type===$.NOT_DISABLED)}}]),e}(),H=function(){function e(t){r(this,e),this.pathNetwork=t,this._cache=new Map,this._computing=new Map,this._symbolStrings=new Map,this._symbolIncrement=0}return b(e,[{key:"search",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._isCached(e,t,n))return this._getFromCache(e,t,n);if(this._isComputing(e,t,n))return this._getFromComputing(e,t,n);var i=Promise.resolve().then(function(){var i=new Map,r=new Set,o=new Map;for(o.set(e.id,{d:0,parent:null}),o.set(t.id,{d:1/0,parent:null}),i.set(e.id,e);i.size>0;){var s=function(){for(var e=Array.from(i.values()),s=e[0],a=1;a<e.length;a++){var c=e[a];o.get(c.id).d<o.get(s.id).d&&(s=c)}if(s===t){for(var l=[s],u=o.get(s.id),h=u.parent;null!==h;){l.push(h);h=o.get(h.id).parent}return{v:l.reverse()}}i.delete(s.id),r.add(s.id);var d=[],f=[];s.links.forEach(function(e){e.isAccessible(n)&&(e.from===s?(d.push(e.to),f.push(e.distance)):e.to===s&&e.bidirectional&&(d.push(e.from),f.push(e.distance)))});for(var p=0;p<d.length;p++){var g=d[p];if(!r.has(g.id)){i.has(g.id)||(o.set(g.id,{d:1/0,parent:null}),i.set(g.id,g));var m=o.get(s.id).d+f[p],v=o.get(g.id);m<v.d&&(v.parent=s,v.d=m)}}}();if("object"===("undefined"===typeof s?"undefined":y(s)))return s.v}return[]});return this._addToComputing(e,t,n,i),i}},{key:"_addToCache",value:function(e,t,n,i){if(!e.isDynamic&&!t.isDynamic){var r=this._getCacheKey(e,t,n);this._cache.set(r,i.map(function(e){return e.id}))}}},{key:"_getFromCache",value:function(e,t,n){var i=this,r=this._getCacheKey(e,t,n);return Promise.resolve(this._cache.get(r).map(function(e){return i.pathNetwork.nodes.get(e)}))}},{key:"_getCacheKey",value:function(e,t,n){return this._stringifyId(e.id)+":"+this._stringifyId(t.id)+(n?":pmr":"")}},{key:"_stringifyId",value:function(e){return"symbol"!=("undefined"===typeof e?"undefined":y(e))?""+e:(this._symbolStrings.has(e)||this._symbolStrings.set(e,"s"+this._symbolIncrement++),this._symbolStrings.get(e))}},{key:"_isCached",value:function(e,t,n){return this._cache.has(this._getCacheKey(e,t,n))}},{key:"_addToComputing",value:function(e,t,n,i){var r=this,o=this._getCacheKey(e,t,n);this._computing.set(o,i),i.then(function(i){r._addToCache(e,t,n,i),r._computing.delete(o)})}},{key:"_getFromComputing",value:function(e,t,n){var i=this,r=this._getCacheKey(e,t,n);return this._computing.get(r).then(function(){return i.search(e,t,n)})}},{key:"_isComputing",value:function(e,t,n){return this._computing.has(this._getCacheKey(e,t,n))}}]),e}(),V=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];r(this,e),this.from=t,this.to=i,this.ground=n,this.nodes=o,this._distance=null,this._curve=null}return b(e,[{key:"getDistance",value:function(){if(null===this._distance){this._distance=0;for(var e=0;e<this.nodes.length-1;e++){var t=this.nodes[e].getLinkTo(this.nodes[e+1]);this._distance+=t.distance}}return this._distance}},{key:"getCurve",value:function(){if(this.nodes.length<2)return null;if(null===this._curve){this._curve=[];for(var e=0;e<this.nodes.length-1;e++)this._curve.push({from:this.nodes[e].groundPosition,to:this.nodes[e+1].groundPosition})}return this._curve}},{key:"interpolate",value:function(e,t){var n=this.getCurve();if(null===n)return[];var i=e;e>this.getDistance()/3&&(console.warn("AdsumWebMap.PathSection.interpolate: short pathSection"),i=this.getDistance()/3);var r=Math.floor(this.getDistance()/i)-1,o=this.getDistance()/(r+1),s=[],a=o,c=new u.Vector3;return n.forEach(function(e){var n=e.from,i=e.to,r=t.adsumDistanceToMeter(c.subVectors(n,i).length());if(r<a)return void(a-=r);for(var l=a/r;l<=1;)c.lerpVectors(n,i,l),s.push(c.clone()),l+=o/r;a=r*(l-1)}),s}}]),e}(),W=function(){function e(t){r(this,e),this.awm=t,this.nodes=new Map,this.spaceGatesByAdsumObjectId=new Map,this.buildingGatesByAdsumObjectId=new Map,this.aStar=new H(this)}return b(e,[{key:"init",value:function(e){var t=this;e.get("nodes").forEach(function(e){var n=t._findParentAndGround(e.location),i=n.parent,r=n.ground;if(null===i)return void console.warn("AdsumWebMap.PathNetwork: invalid node");var o=new u.Vector3(e.position.x,e.position.y,e.position.z+.1),s=U.create(e.id,r,o,t.awm.projector,e.isGate);t.nodes.set(s.id,s),e.isGate&&("STORE"===e.location.type||"SHAPE"===e.location.type?(t.spaceGatesByAdsumObjectId.has(e.location.id)||t.spaceGatesByAdsumObjectId.set(e.location.id,[]),t.spaceGatesByAdsumObjectId.get(e.location.id).push(s)):"BUILDING"===e.location.type?(t.buildingGatesByAdsumObjectId.has(e.location.id)||t.buildingGatesByAdsumObjectId.set(e.location.id,[]),t.buildingGatesByAdsumObjectId.get(e.location.id).push(s)):console.warn("AdsumWebMap.PathNetwork: Invalid node gate on "+e.type+"#"+e.id))}),e.get("links").forEach(function(e){var n=t.nodes.get(e.from),i=t.nodes.get(e.to);if(void 0===n||void 0===i)return void console.warn("AdsumWebMap.PathNetwork: invalid link");var r=new z(e.id,e.type,n,i,e.bidirectional);n.links.add(r),r.bidirectional&&i.links.add(r)})}},{key:"computePath",value:function(e){var t=this,n=e.from,i=e.to;return!n.pathNode.isDynamic&&this.nodes.has(n.pathNode.id)||this.attachNodeLocation(n),!i.pathNode.isDynamic&&this.nodes.has(i.pathNode.id)||this.attachNodeLocation(i),this.aStar.search(n.pathNode,i.pathNode,e.pmr).then(function(n){t._buildPathSections(e,n)})}},{key:"attachNodeLocation",value:function(e){var t=e.pathNode,n=t.ground,i=t.groundPosition,r=null;if(e.adsumObject&&e.adsumObject.isSpace)r=this.spaceGatesByAdsumObjectId.get(e.adsumObject.id)||[];else if(e.adsumObject&&e.adsumObject.isBuilding)r=this.buildingGatesByAdsumObjectId.get(e.adsumObject.id)||[];else{r=[];var o=1/0,s=[];if(this.nodes.forEach(function(t){if(t!==e.pathNode&&t.ground===n){var i=t.groundPosition.distanceToSquared(e.pathNode.groundPosition);i<=9*o&&s.push({squareDistance:i,node:t}),i<o&&(o=i)}}),o!==1/0){s.sort(function(e,t){return e.squareDistance-t.squareDistance});var a=new u.Raycaster(n._mesh.localToWorld(i.clone())),c=[],l=[];s.forEach(function(e){var t=e.squareDistance,i=e.node;if(!(t>9*o)){a.ray.direction=n._mesh.localToWorld(i.groundPosition.clone()),a.ray.direction.sub(a.ray.origin),a.near=0,a.far=a.ray.direction.length(),a.ray.direction.normalize();for(var s=0;s<l.length;s++)if(l[s].angleTo(a.ray.direction)<Math.PI/4)return;c.length=0;for(var u=0;u<n._mesh.children.length;u++){var h=n._mesh.children[u],d=h.adsumObject;if((!d||!d.isLabel&&!d.isUser)&&(a.intersectObject(h,!1,c),0!==c.length))return}r.push(i),l.push(a.ray.direction)}})}}e.pathNode.links.forEach(function(t){t.from.links.delete(t),t.to.links.delete(t),e.pathNode.links.delete(t)}),r.forEach(function(t){var n=new z(Symbol("PathLinkId"),$.STANDARD,e.pathNode,t);e.pathNode.links.add(n),t.links.add(n)}),this.nodes.set(e.pathNode.id,e.pathNode),e.pathNode.needsUpdate=!1}},{key:"_findParentAndGround",value:function(e){var t=null,n=null;switch(e.type){case"STORE":case"SHAPE":null!==(t=this.awm.objectManager.getSpace(e.id))&&(n=t.parent);break;case"FLOOR":null!==(t=this.awm.objectManager.getFloor(e.id))&&(n=t);break;case"BUILDING":n=(t=this.awm.objectManager.getBuilding(e.id)).site;break;case"SITE":n=t=this.awm.objectManager.site;break;default:console.warn("AdsumWebMap.WayfindingManager.PathNetwork: unknown location.type "+e.type+" ")}return null===t&&console.warn("AdsumWebMap.WayfindingManager.PathNetwork: invalid location "+e.type+"#"+e.id),{parent:t,ground:n}}},{key:"_buildPathSections",value:function(e,t){if(0===t.length)throw new Error("AdsumWebMap.PathNetwork: No path found to destination");e.clear();var n=new V(e.from,e.from.pathNode.ground);e.pathSections.push(n);for(var i=0;i<t.length;i++){var r=t[i];if(n.ground!==r.ground){n.to=null,n=new V(null,r.ground),e.pathSections.push(n)}n.nodes.push(r)}n.to=e.to}}]),e}(),G=function(){function e(t,n,i){r(this,e),this.pathSectionObject=t,this.cameraManager=n,this.projector=i,this.speed=30,this.center=!0,this.tweens=[]}return b(e,[{key:"draw",value:function(){for(var e=[],t=this.pathSectionObject._mesh.children,n=0;n<t.length;n++){var i=this.projector.adsumDistanceToMeter(this.pathSectionObject.patternSpace)/this.speed*n*1e3;e.push(this._showPattern(n,i))}return this.pathSectionObject._mesh.visible=!0,this.center&&e.push(this.cameraManager.centerOn(this.pathSectionObject)),this.pathSectionObject.animations.push(this),Promise.all(e).then(function(){})}},{key:"stop",value:function(){this.tweens.forEach(function(e){e.stop()})}},{key:"_showPattern",value:function(e,t){var n=this;return new Promise(function(i,r){var o=n.pathSectionObject._mesh.children[e];o.traverse(function(e){e.material&&(e.material.opacity=0,e.material.transparent=!0)});var s=new h.Tween({opacity:0}).to({opacity:1},1e3).delay(t).easing(h.Easing.Exponential.In).on("complete",function(){o.traverse(function(e){e.material&&(e.material.opacity=1)}),i(!0)}).on("stop",function(){r(new Error("Path was stopped"))}).start();n.tweens.push(s)})}}]),e}(),q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,e),this.isLocation=!0,this.id=t,this.pathNode=n,this.adsumObject=i}return b(e,[{key:"updateFromObjectPosition",value:function(e){U.updateFromAdsumObject(this.pathNode,this.adsumObject,e)}}]),e}(),X=function(){function e(){r(this,e),this.locations=new Map,this.locationsByAdsumObject=new Map,this.projector=null,this.objectManager=null,this.pathNetwork=null,this.userLocation=null}return b(e,[{key:"init",value:function(e,t,n){var i=this;this.projector=e,this.objectManager=n,this.pathNetwork=t,n.labels.forEach(function(e){if(!e.parent.isBuilding&&!e.parent.isSpace){var t=new q(e.placeId,U.createFromAdsumObject(null,e,i.projector),e);i.locations.set(t.id,t),i.locationsByAdsumObject.set(e,t),i.pathNetwork.attachNodeLocation(t)}}),n.spaces.forEach(function(e){var t=new q(e.placeId,U.createFromAdsumObject(null,e,i.projector),e);i.locations.set(t.id,t),i.locationsByAdsumObject.set(e,t),i.pathNetwork.attachNodeLocation(t)}),n.buildings.forEach(function(e){var t=new q(e.placeId,U.createFromAdsumObject(null,e,i.projector),e);i.locations.set(t.id,t),i.locationsByAdsumObject.set(e,t),i.pathNetwork.attachNodeLocation(t)})}},{key:"createUserLocation",value:function(){if(null!==this.userLocation)throw new Error("Unexpected");this.userLocation=new q(Symbol("UserLocation"),U.createFromAdsumObject(Symbol("UserPathNode"),this.objectManager.user,this.projector),this.objectManager.user),this.userLocation.pathNode.isDynamic=!0,this.locations.set(this.userLocation.id,this.userLocation)}},{key:"get",value:function(e){return this.locations.has(e)?this.locations.get(e):null}},{key:"getByAdsumObject",value:function(e){return this.locationsByAdsumObject.has(e)?this.locationsByAdsumObject.get(e):null}}]),e}(),K={user:{position:{didChanged:"wayfinding.user.position.didChanged"}}},Y=function(e){function t(e,n){var i;return r(this,t),i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i.awm=e,i.projector=null,i.locationRepository=new X,i.pathNetwork=new W(e),i.options=n,i}return s(t,e),b(t,[{key:"init",value:function(e){this.projector=e.projector,this.pathNetwork.init(e.paths),this.options.pathBuilder.init(this.projector,this.awm.objectManager),this.locationRepository.init(this.projector,this.pathNetwork,this.awm.objectManager)}},{key:"computePath",value:function(e){return this.removePath(e),null===e.from&&(e.from=this.locationRepository.userLocation,null===e.from)?Promise.reject(new Error("AdsumWebMap.WayfindingManager: cannot compute path because user position is not set")):null===e.to&&(e.to=this.locationRepository.userLocation,null===e.to)?Promise.reject(new Error("AdsumWebMap.WayfindingManager: cannot compute path because user position is not set")):this.pathNetwork.computePath(e)}},{key:"removePath",value:function(e){var t=this;e.pathSections.forEach(function(e){t.removePathSection(e)})}},{key:"drawPathSection",value:function(e){this.removePathSection(e);var t=this.options.pathBuilder.build(e);return new G(t,this.awm.cameraManager,this.projector).draw()}},{key:"removePathSection",value:function(e){this.awm.objectManager.pathSectionObjects.forEach(function(t){t.pathSection===e&&t._dispose()})}},{key:"getUserUtmPosition",value:function(){var e=this.locationRepository.userLocation;return null===e?null:{utm:e.pathNode.utmPosition,floor:e.adsumObject.parent.isFloor?e.adsumObject.parent:null}}},{key:"getUserGpsPosition",value:function(){if(null===this.locationRepository.userLocation)return null;var e=this.getUserUtmPosition(),t=e.utm,n=e.floor;return{gps:this.projector.utmToGps(t),floor:n}}},{key:"setUserAdsumPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.x,r=e.y,o=e.z,s=null===t?this.awm.objectManager.site:t,a=this.awm.objectManager.user;return a._mesh.position.set(i,r,o),n&&s._mesh.worldToLocal(a._mesh.position),a._mesh.position.setZ(a._mesh.position.z+.1),s._addChild(a),a.parent=s,a.update(),null===this.locationRepository.userLocation?this.locationRepository.createUserLocation():this.locationRepository.userLocation.updateFromObjectPosition(this.projector),this.dispatchEvent({type:K.user.position.didChanged,floor:t}),this}},{key:"setUserGpsPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setUserAdsumPosition(this.projector.gpsToAdsum(e),t,!0)}},{key:"setUserUtmPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setUserAdsumPosition(this.projector.utmToAdsum(e),t,!0)}},{key:"getUserDistanceFromPath",value:function(e){var t=this;return Math.min.apply(Math,i(e.pathSections.map(function(e){return t.getUserDistanceFromPathSection(e)})))}},{key:"getUserDistanceFromPathSection",value:function(e){var t=this.locationRepository.userLocation;if(null===t)throw new Error("AdsumWebMap.WayfindingManager.getUserDistanceFromPathSection: no user position set");if(e.ground!==t.pathNode.ground)return 1/0;var n=new u.Vector3,i=new u.Line3,r=e.getCurve(),o=t.pathNode.groundPosition,s=1/0;return null===r?e.nodes.length>0&&(s=o.distanceTo(e.nodes[0].groundPosition)):r.forEach(function(e){var t=e.from,r=e.to;i.set(t,r),i.closestPointToPoint(o,!0,n);var a=o.distanceTo(n);a<s&&(s=a)}),this.projector.adsumDistanceToMeter(s)}}]),t}(u.EventDispatcher),Z=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.container=null,this.gpuPower="high-performance",this.autoCompileMaterials=!0,this.clearColor=16777215,this.fogEnabled=!1,this.fogRatio=0,this.fogColor=16777215,this.backgroundImage=null,this.shadowEnabled=!1,this.shadowSize=2048}}]),t}(d.a),J=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.centerOnOptions=new D,this.force2D=!1,this.zoomEnabled=!0,this.rotationEnabled=!0,this.keepInFloorBounds=!1}}]),t}(d.a),Q=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isPathSection=!0,e.pathSection=null,e.patternSpace=null,e.animations=[],e}return s(t,e),b(t,null,[{key:"_createFromPathSection",value:function(e,t,n){var i=this._createFromMesh(t);return i.pathSection=e,i.patternSpace=n,i}}]),b(t,[{key:"getType",value:function(){return E.PathSectionObject}},{key:"_dispose",value:function(){this.animations.forEach(function(e){e.stop()}),this._mesh.traverse(function(e){e.material&&e.isMaterial&&e.material.dispose()}),null!==this._mesh.parent&&this._mesh.parent.remove(this._mesh)}}]),t}(C),ee=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.patternSpace=5,this.patternSize=1,this.patternMesh=null}}]),t}(d.a),te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.projector=null,this.objectManager=null,this.options=new ee(t)}return b(e,[{key:"init",value:function(e,t){this.projector=e,this.objectManager=t}},{key:"build",value:function(e){var t=new u.Group;t.visible=!1;for(var n=e.interpolate(this.options.patternSpace,this.projector),i=0;i<n.length-1;i++){var r=n[i],o=n[i+1],s=this._createPattern();s.position.copy(r);var a=o.clone().sub(s.position),c=0;c=0===a.y?a.x>0?Math.PI/2:-Math.PI/2:Math.atan(a.x/a.y),a.y<0&&(c+=Math.PI),s.setRotationFromAxisAngle(new u.Vector3(-0,-0,-1),c),t.add(s)}var l=Q._createFromPathSection(e,t,this.options.patternSpace);return e.ground._addChild(l),l.update(),this.objectManager.pathSectionObjects.set(l.id,l),l}},{key:"_createPattern",value:function(){null===this.options.patternMesh&&(this.options.patternMesh=this._createDefaultPattern());var e=this.options.patternMesh.clone();return e.traverse(function(e){e.material&&e.material.isMaterial&&(e.material=e.material.clone())}),e}},{key:"_createDefaultPattern",value:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=64,e.height=64;var n=.5*e.height,i=.65*e.width,r=(e.width-i)/2,o=(e.height-n)/2;t.arc(e.width/2,e.height/2,35,0,2*Math.PI),t.fillStyle="#0bbfba",t.fill(),t.beginPath(),t.moveTo(r,o+n),t.lineTo(r+i/2,o),t.lineTo(r+i,o+n),t.lineTo(r+i-10,o+n),t.lineTo(r+i/2,o+2*n*10/i),t.lineTo(r+10,o+n),t.closePath(),t.fillStyle="#ffffff",t.fill(),t.lineWidth=1,t.strokeStyle="#000000",t.stroke();var s=new u.CanvasTexture(e),a=new u.MeshBasicMaterial({color:16777215,map:s,side:u.FrontSide}),c=new u.PlaneGeometry(this.projector.meterToAdsumDistance(this.options.patternSize),this.projector.meterToAdsumDistance(this.options.patternSize));return new u.Mesh(c,a)}}]),e}(),ne=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.pathBuilder=new te}}]),t}(d.a),ie=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.engine=new Z,this.camera=new J,this.wayfinding=new ne,this.loader=null}}]),t}(d.a),re=function(){function e(t){r(this,e);var n=new ie(t);this.objectManager=new M,this.sceneManager=new T(this),this.engineManager=new F(this,n.engine),this.cameraManager=new I(this,n.camera),this.mouseManager=new j(this),this.wayfindingManager=new Y(this,n.wayfinding),this.deviceId=null,this.defaultFloor=null,this.loader=n.loader}return b(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==t&&(this.loader=t),this.loader.load().then(function(t){return e.projector=t.projector,e.objectManager.init(t,e.projector),e.sceneManager.init(t),e.cameraManager.init(e.projector),e.engineManager.init(t),e.mouseManager.init(),e.wayfindingManager.init(t),e.setDeviceId(t.deviceId,!1)})}},{key:"start",value:function(){this.engineManager.start()}},{key:"getDeviceId",value:function(){return this.deviceId}},{key:"setDeviceId",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.deviceId=e,this.defaultFloor=null,this.loader.loadCalibration(this.deviceId).then(function(e){var i=e.cameraCalibrations,r=e.defaultFloorId,o=e.userPosition;return null!==o&&(null===o.floorId?t.wayfindingManager.setUserAdsumPosition(o.position,null,!0):t.wayfindingManager.setUserAdsumPosition(o.position,t.objectManager.getFloor(o.floorId),!0)),t.cameraManager.setCameraCalibrations(i),null!==r&&(t.defaultFloor=t.objectManager.getFloor(r)),t.sceneManager.setCurrentFloor(t.defaultFloor,n)}).then(function(){return t.cameraManager.centerOnFloor(t.defaultFloor,n)}).then(function(){})}}]),e}(),oe=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"reset",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.entityManager=null,this.shadowEnabled=!1,this.shadowMapSize=2048,this.fogEnabled=!1,this.fogRatio=0,this.fogColor=16777215,this.preferAmbientOcclusion=!0,this.shapeAmbientOcclusionTopColor=16777215,this.shapeAmbientOcclusionBottomColor=8421504,this.deviceId=null}},{key:"preferLambertMaterial",value:function(){return!1}},{key:"advancedLightingEnabled",value:function(){return!0}}]),t}(d.a),se=function(){function e(t,n){var i=this;r(this,e),this.texturesByReference=new Map;var o=[p.d.TEXTURE];n&&o.push(p.d.TEXTURE_OCCLUSION),t.findBy({context:function(e){return o.includes(e)}}).forEach(function(e){i.texturesByReference.set(e.reference,e)}),this.threeLoader=new u.TextureLoader,this.regex=/\/texture\/reference\/(?:[a-f0-9]{2,3}\/)*(.*)$/}return b(e,[{key:"load",value:function(e,t,n,i){var r=this.regex.exec(e),o=e;if(null!==r){var s,a=r[1];this.texturesByReference.has(a)&&(s=this.texturesByReference.get(a),o=s.uri)}return this.threeLoader.load(o,t,n,i)}}]),e}(),ae={Group:u.Group,Matrix4:u.Matrix4,Vector3:u.Vector3,Quaternion:u.Quaternion,Vector4:u.Vector4,Math:u.Math,Object3D:u.Object3D,DoubleSide:u.DoubleSide,MeshLambertMaterial:u.MeshLambertMaterial,MeshBasicMaterial:u.MeshBasicMaterial,MeshPhongMaterial:u.MeshPhongMaterial,FrontSide:u.FrontSide,MultiMaterial:u.MultiMaterial,SkinnedMesh:u.SkinnedMesh,Mesh:u.Mesh,Line:u.Line,PerspectiveCamera:u.PerspectiveCamera,DirectionalLight:u.DirectionalLight,PointLight:u.PointLight,SpotLight:u.SpotLight,AmbientLight:u.AmbientLight,Geometry:u.Geometry,Vector2:u.Vector2,Color:u.Color,Face3:u.Face3,Loader:u.Loader,Texture:u.Texture,MirroredRepeatWrapping:u.MirroredRepeatWrapping,RepeatWrapping:u.RepeatWrapping,ClampToEdgeWrapping:u.ClampToEdgeWrapping,MixOperation:u.MixOperation,ImageLoader:u.ImageLoader,Scene:u.Scene},ce=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isSite=!0,e.buildings=new Set,e.spaces=new Set,e.labels=new Set,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.SiteObject}},{key:"addLabel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(t=n,i=t.x,r=t.y,o=t.z),null!==e.parent)throw new Error("AdsumWebMap.LabelObject#addLabel: Changing labelObject parent is not supported yet.");e.parent=this,this.labels.add(e),e.moveTo(i,r,o),this._mesh.add(e._mesh),e.update()}},{key:"_raycast",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_raycast",this).call(this,e,n,i)&&(i&&(this.buildings.forEach(function(t){t._raycast(e,n,i)}),this.labels.forEach(function(t){t._raycast(e,n,i)}),this.spaces.forEach(function(t){t._raycast(e,n,i)})),!0)}}]),t}(C),le=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isBuilding=!0,e.site=null,e.floors=new Set,e.labels=new Set,e._labelGroup=new u.Group,e._initialColor=null,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.BuildingObject}},{key:"addLabel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(t=n,i=t.x,r=t.y,o=t.z),null!==e.parent)throw new Error("AdsumWebMap.SpaceObject#addLabel: Changing labelObject parent is not supported yet.");return e.parent=this,this.labels.add(e),e.moveTo(i,r,o),this._labelGroup.add(e._mesh),this.update(),this}},{key:"setColor",value:function(e){return this._mesh.material.color.set(e),this}},{key:"isInitialColor",value:function(){return this._initialColor.equals(this._mesh.material.color)}},{key:"resetColor",value:function(){return this._mesh.material.color.copy(this._initialColor),this}},{key:"_setMesh",value:function(e){return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setMesh",this).call(this,e),this._mesh.add(this._labelGroup),this._updateLabelGroup(),this._initialColor=this._mesh.material.color.clone(),this}},{key:"_raycast",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_raycast",this).call(this,e,n,i)&&(i&&(this.floors.forEach(function(t){t._raycast(e,n,i)}),this.labels.forEach(function(t){t._raycast(e,n,i)})),!0)}},{key:"_updateLabelGroup",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.getSizeAndCenter(!1),n=e.size;this._labelGroup.position.setZ(n.z),this._labelGroup.updateMatrixWorld()}}]),t}(C),ue=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isFloor=!0,e.building=null,e.spaces=new Set,e.labels=new Set,e.altitude=null,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.FloorObject}},{key:"addLabel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(t=n,i=t.x,r=t.y,o=t.z),null!==e.parent)throw new Error("AdsumWebMap.LabelObject#addLabel: Changing labelObject parent is not supported yet.");e.parent=this,this.labels.add(e),e.moveTo(i,r,o),this._mesh.add(e._mesh),e.update()}},{key:"_raycast",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_raycast",this).call(this,e,n,i)&&(i&&(this.spaces.forEach(function(t){t._raycast(e,n,i)}),this.labels.forEach(function(t){t._raycast(e,n,i)})),!0)}}]),t}(C),he=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isSpace=!0,e.parent=null,e.labels=new Set,e._labelGroup=new u.Group,e._initialColor=null,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.SpaceObject}},{key:"_setMesh",value:function(e){return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setMesh",this).call(this,e),this._mesh.add(this._labelGroup),this._updateLabelGroup(),this._initialColor=this._mesh.material.color.clone(),this}},{key:"setColor",value:function(e){return this._mesh.material.color.set(e),this}},{key:"isInitialColor",value:function(){return this._initialColor.equals(this._mesh.material.color)}},{key:"resetColor",value:function(){return this._mesh.material.color.copy(this._initialColor),this}},{key:"isBounced",value:function(){return 1!==this._mesh.scale.z}},{key:"getBounceFactor",value:function(){return this._mesh.scale.z}},{key:"bounceUp",value:function(e){return this._mesh.scale.setZ(e),this.update(),this}},{key:"bounceDown",value:function(){return this.bounceUp(1)}},{key:"addLabel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,r=0,o=0;if(null!==n&&(t=n,i=t.x,r=t.y,o=t.z),null!==e.parent)throw new Error("AdsumWebMap.SpaceObject#addLabel: Changing labelObject parent is not supported yet.");return e.parent=this,this.labels.add(e),e.moveTo(i,r,o),this._labelGroup.add(e._mesh),this.update(),this}},{key:"_raycast",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_raycast",this).call(this,e,n,i)&&(i&&this.labels.forEach(function(t){t._raycast(e,n,i)}),!0)}},{key:"update",value:function(){this._labelGroup.scale.z!==1/this.getBounceFactor()&&this._updateLabelGroup(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"_updateLabelGroup",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.getSizeAndCenter(!1),n=e.size;this._labelGroup.scale.setZ(1/this.getBounceFactor()),this._labelGroup.position.setZ(n.z/this.getBounceFactor()),this._labelGroup.updateMatrixWorld()}}]),t}(C),de=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.scene=null,this.site=null,this.buildingsMap=new Map,this.floorsMap=new Map,this.spacesMap=new Map,this.labelsMap=new Map,this.deviceId=t,this.projector=null,this.paths=null},fe={BILLBOARD:"BILLBOARD",STATIC:"STATIC",FLIP:"FLIP"},pe=new u.Vector3,ge=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isLabel=!0,e.parent=null,e.orientationMode=fe.BILLBOARD,e.autoScale=!1,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.LabelObject}},{key:"_onBeforeRender",value:function(e,n,i,r,o,s){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onBeforeRender",this).call(this,e,n,i,r,o,s);var a=!1;this.orientationMode===fe.BILLBOARD&&(this._mesh.quaternion.setFromRotationMatrix(this._mesh.parent.matrixWorld).inverse(),this._mesh.quaternion.multiply(i.quaternion).normalize(),a=!0);var c=new u.Vector3;this._mesh.getWorldPosition(c);var l=pe.subVectors(i.position,c).length();if(this.autoScale){var h=Math.tan(i.fov*Math.PI/180/2)*l/1e3;this.orientationMode===fe.BILLBOARD?(this._mesh.geometry.computeBoundingBox(),this._mesh.position.z-=this._mesh.geometry.boundingBox.max.y*this._mesh.scale.z,this._mesh.scale.set(h,h,h),this._mesh.position.z+=this._mesh.geometry.boundingBox.max.y*this._mesh.scale.z):this._mesh.scale.set(h,h,1)}a&&this._mesh.updateMatrixWorld()}}]),t}(C),me=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isLabelImage=!0,e.width=null,e.height=null,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.LabelImageObject}}],[{key:"create",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Symbol("AdsumObjectId"),o=i.width,s=i.height,a=i.orientationMode,c=i.autoScale;return new Promise(function(t,i){n.load(e,function(e){t(new u.MeshBasicMaterial({color:16777215,side:u.FrontSide,map:e,transparent:!0,depthWrite:!1}))},void 0,i)}).then(function(e){var n=new u.PlaneGeometry(o,s),l=new u.Mesh(n,e),h=t._createFromMesh(l,i,r);if(a)switch(a){case fe.BILLBOARD:case fe.STATIC:h.orientationMode=a;break;default:console.warn("AdsumWebMap.LabelImageObject#create: Unsupported orientation mode "+a)}return c&&(h.autoScale=!0),h})}}]),t}(ge),ve=new Map,ye={TEXTURE_OVERSAMPLING:5,BACKGROUND_PADDING:10,LINE_HEIGHT_INTERVAL:1.25,renderOnTexture:function(e,t){var n=null;null===n&&(n=document.createElement("canvas"));var i=t.font,r=t.size,o=t.color,s=t.backgroundColor,a=r+"pt "+(void 0===i?"Arial":i),c=ye.getFontHeight(a),l=e.length*c,h=n.getContext("2d");h.textBaseline="hanging",h.textAlign="center",h.font=a;var d=0;e.forEach(function(e){d=Math.max(d,h.measureText(e).width)}),n.width=5*(d+10),n.height=5*(l+10),h.clearRect(0,0,n.width,n.height),s&&(h.fillStyle="rgba("+255*s.r+","+255*s.g+","+255*s.b+",0.7)",ye.fillRectRounded(h,0,0,n.width,n.height,20)),h.scale(5,5),h.textBaseline="hanging",h.font=a,h.textAlign="center",h.fillStyle="rgb("+255*o.r+","+255*o.g+","+255*o.b+")";for(var f=(c-c/1.25)/2,p=0;p<e.length;p++)h.fillText(e[p],Math.round(5+d/2),Math.round(p*c+(p+1)*f+5));var g=new u.CanvasTexture(n);return g.needsUpdate=!0,g},getFontHeight:function(e){if(ve.has(e))return ve.get(e);var t=null;null===t&&(t=document.createElement("canvas")),t.width=1e3,t.height=500;var n=t.getContext("2d");n.fillStyle="black",n.fillRect(0,0,t.width,t.height),n.textBaseline="top",n.fillStyle="white",n.font=e,n.fillText("gM",0,t.height/2);for(var i=n.getImageData(0,0,t.width,t.height).data,r=-1,o=-1,s=0;s<t.height;s++)for(var a=0;a<t.width;a++)if(0!==i[4*(s*t.width+a)]){-1===r&&(r=s),o=s+1;break}var c=1.25*(o-r);return ve.set(e,c),c},fillRectRounded:function(e,t,n,i,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill()}},be=function(e){function t(){var e;return r(this,t),e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.isLabelText=!0,e}return s(t,e),b(t,[{key:"getType",value:function(){return E.LabelTextObject}}],[{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId"),i=e.split("\n"),r=ye.renderOnTexture(i,t),o=new u.PlaneGeometry(r.image.width/ye.TEXTURE_OVERSAMPLING,r.image.height/ye.TEXTURE_OVERSAMPLING),s=new u.MeshBasicMaterial({color:16777215,map:r,side:u.FrontSide,transparent:!0,depthWrite:!1}),a=this._createFromMesh(new u.Mesh(o,s),t,n);if(t.orientationMode)switch(t.orientationMode){case fe.BILLBOARD:case fe.STATIC:a.orientationMode=t.orientationMode;break;default:console.warn("AdsumWebMap.LabelImageObject#create: Unsupported orientation mode "+t.orientationMode)}return t.autoScale&&(a.autoScale=!0),a}}]),t}(ge),we=new u.Vector3,_e=function(){function e(){r(this,e),this.levels=new Map,this.active=!0,this.currentLevel=null,this.currentDistance=null}return b(e,[{key:"addLevelState",value:function(e,t){this.levels.set(e,t)}},{key:"applyLod",value:function(e,t){if(this.active){var n=new u.Vector3,i=new u.Vector3;t.getWorldPosition(n),e._mesh.getWorldPosition(i),we.subVectors(n,i);var r=we.length();if(this.currentDistance!==r){var o=null,s=null;this.levels.forEach(function(e,t){t>r||null!==s&&t<s||(o=e,s=t)}),null!==s?(this.currentDistance=r,s!==this.currentLevel&&o.apply(e)):console.warn("AdsumWebMap.LevelOfDetails: cannot find LevelState matching, make sure you have a default one which startAt 0")}}}}]),e}(),xe=function(){function e(){r(this,e)}return b(e,[{key:"apply",value:function(e){}}]),e}(),Ee=function(e){function t(e){var n;return r(this,t),n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.displayMode=e,n}return s(t,e),b(t,[{key:"apply",value:function(e){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"apply",this).call(this,e),e.setDisplayMode(this.displayMode)}}]),t}(xe),Ae=new u.Vector3,Ce=function(){function e(t,n,i){r(this,e),this.matrix=new u.Matrix4,this.inverseMatrix=null,this.matrix.set(t[0],t[1],0,n[0],t[3],t[4],0,n[1],0,0,1,0,0,0,0,1);var o=new u.Vector3;o.setFromMatrixScale(this.matrix),this.scale=(o.x+o.y)/2;var s=g.a.fromDegree(i.latitude,i.longitude,0);this.utmGridZone=new g.d(s)}return b(e,null,[{key:"createFake",value:function(){return new this([1,0,0,0,1,0],[0,0,0],{latitude:0,longitude:0})}}]),b(e,[{key:"meterToAdsumDistance",value:function(e){return e*this.scale}},{key:"adsumDistanceToMeter",value:function(e){return e/this.scale}},{key:"gpsToAdsum",value:function(e){return this.utmToAdsum(this.gpsToUtm(e))}},{key:"gpsToUtm",value:function(e){var t=e.lat,n=e.long,i=e.alt;return g.b.toUtm(g.a.fromDegree(t,n,i),this.utmGridZone)}},{key:"utmToAdsum",value:function(e){var t=e.E,n=e.N,i=e.alt,r=new u.Vector3(t,n,i);return r.applyMatrix4(this.matrix),r}},{key:"adsumToGps",value:function(e){return this.utmToGps(this.adsumToUtm(e))}},{key:"adsumToUtm",value:function(e){return null===this.inverseMatrix&&(this.inverseMatrix=new u.Matrix4,this.inverseMatrix.getInverse(this.matrix)),Ae.copy(e),Ae.applyMatrix4(this.inverseMatrix),new g.c(Ae.x,Ae.y,Ae.z,this.utmGridZone.hemi,this.utmGridZone.zone)}},{key:"utmToGps",value:function(e){return g.b.toGps(e)}}]),e}(),Se=function(){function e(t){r(this,e),this.options=new oe(t),this.isAoMap=!0,this.result=new de(t.deviceId),this.adsumTextureLoader=null,this._registerAdsumTextureLoader()}return b(e,[{key:"load",value:function(){var e=this;return this._startEntityManagerLoading(),this._registerAdsumTextureLoader().then(function(){return Promise.all([e._loadCollada(),e._loadProjectorTransform().then(function(){return e._loadLabels()}),e._loadPaths()])}).then(function(){return e._loadLabels()}).then(function(){return e._addLabels()}).then(function(){return e.result.scene.updateMatrixWorld(!0),e.result})}},{key:"_loadCollada",value:function(){var e=this,t=this.options.entityManager.getRepository("File"),n=this.options.entityManager.getRepository("MapFile"),i=this.options.entityManager.getRepository("Place");return Promise.all([t.load(),n.load()]).then(function(){var t=e._getColladaUri();return Promise.all([e._parseCollada(t),i.load()])}).then(function(t){var n=m(t,1),r=n[0].scene;e.result.scene=r,e._parseAndTransformAdsumScene(r,i),e._adjustSceneSettings()})}},{key:"loadCalibration",value:function(e){var t=this.options.entityManager.getRepository("SiteCalibration"),n=this.options.entityManager.getRepository("FloorCalibration");return Promise.all([t.load(),n.load()]).then(function(){var i=t.findOneBy({device:function(t){return t.is(e)}}),r=null,o=null,s=new Map;if(null!==i&&(n.getList(i.floor_calibrations).forEach(function(e){var t=new R;t.eye.copy(e.eye),t.up.copy(e.up),t.target.copy(e.target),t.zoomMin=e.zoom_min||L.ZOOM_MIN,t.zoomMax=e.zoom_max||L.ZOOM_MAX;var n=-1===e.floor_id?null:e.floor_id;s.set(n,t)}),r=-1===i.start_floor?null:i.start_floor,null!==i.start_point_floor)){var a=i.start_point_floor;o={floorId:-1!==a?a:null,position:i.start_point_position}}return{cameraCalibrations:s,defaultFloorId:r,userPosition:o}})}},{key:"_loadLabels",value:function(){var e=this,t=this.options.entityManager.getRepository("CustomObject"),n=this.options.entityManager.getRepository("File");return Promise.all([t.load(),n.load()]).then(function(){var i=[];return t.getAll().forEach(function(t){var r={orientationMode:t.orientation_mode,autoScale:t.autoscale,placeId:t.place.value};if(0!==t.priority){var o=new _e;o.addLevelState(0,new Ee(w.VISIBLE)),o.addLevelState(200*t.priority,new Ee(w.NONE)),r.levelOfDetails=o}if(t.type===p.b.PICTO){var s=n.get(t.file);r.width=t.width,r.height=t.height,i.push(me.create(s.uri,e.adsumTextureLoader,r,t.id))}else{var a=t.label.replace(/<br[ ]*\/?>/gi,"\n");r.font=t.font,r.size=t.font_size,r.color=new u.Color(t.font_color),r.backgroundColor=null===t.background_color?null:new u.Color(t.background_color),i.push(Promise.resolve(be.create(a,r,t.id)))}}),Promise.all(i).then(function(t){t.forEach(function(t){e.result.labelsMap.set(t.id,t)})})})}},{key:"_startEntityManagerLoading",value:function(){this.options.entityManager.getRepository("Site").load(),this.options.entityManager.getRepository("MapFile").load(),this.options.entityManager.getRepository("File").load(),this.options.entityManager.getRepository("Place").load(),this.options.entityManager.getRepository("CustomObject").load(),this.options.entityManager.getRepository("SiteCalibration").load(),this.options.entityManager.getRepository("FloorCalibration").load()}},{key:"_registerAdsumTextureLoader",value:function(){var e=this;return this.options.entityManager.getRepository("File").load().then(function(){e.adsumTextureLoader=new se(e.options.entityManager.getRepository("File"),e.isAoMap),u.Loader.Handlers.add(e.adsumTextureLoader.regex,e.adsumTextureLoader)})}},{key:"_getColladaUri",value:function(){var e=this.options.entityManager.getRepository("File"),t=this.options.entityManager.getRepository("MapFile"),n=t.findOneBy({type:p.e.AO_DAE,file:function(e){return null!==e.value}}),i=null;if(this.isAoMap&&null!==n)i=n.file;else{var r=t.findOneBy({type:p.e.DAE,file:function(e){return null!==e.value}});if(null===r)throw new Error("AdsumWebMap.AdsumLoader: No map found");i=r.file,this.isAoMap=!1}return e.get(i).uri}},{key:"_parseCollada",value:function(e){return new Promise(function(t,n){return(new l).load(e,t,null,n)})}},{key:"_parseAndTransformAdsumScene",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e;if(!e.geometry&&!e.material&&e.children.length>0&&("Mesh"===e.children[0].type||e.children[0].isLight)){var r=e.parent;r.remove(e);var o=e.children[0];o.isLight?(o.matrix=e.matrix,o.matrix.decompose(o.position,o.quaternion,o.scale)):o.applyMatrix(e.matrix),r.add(o);for(var s=e.children.length-1;s>=0;s--){var a=e.children[s];o.add(a)}(i=o).name=e.name,i.colladaId=e.colladaId,e.dispose&&e.dispose()}var c=i.name||"";if(i.material)if(i.material.flatShading=!0,i.material.side=u.FrontSide,i.material.isMeshPhongMaterial?(i.material.emissionMap&&!i.material.map&&(i.material.map=i.material.emissionMap,i.material.emissionMap=null,i.material.color=16777215),i.material.shininess=1e-4):i.material.isMeshLambertMaterial&&i.material.emissionMap&&!i.material.map&&(i.material.map=i.material.emissionMap,i.material.emissionMap=null),i.material.lightMap)i.material=new u.MeshPhongMaterial({aoMap:i.material.lightMap,map:i.material.map,color:i.material.color});else if(this.options.preferLambertMaterial()&&i.material.isMeshPhongMaterial){for(var l=["alphaTest","blendDst","blendDstAlpha","blendEquation","blendEquationAlpha","blending","blendSrc","blendSrcAlpha","clipIntersection","clippingPlanes","clipShadows","colorWrite","depthFunc","depthTest","depthWrite","fog","lights","name","overdraw","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","precision","premultipliedAlpha","dithering","flatShading","side","transparent","vertexColors","visible","userData","alphaMap","aoMap","aoMapIntensity","color","combine","emissive","emissiveMap","emissiveIntensity","envMap","lightMap","lightMapIntensity","map","morphNormals","morphTargets","reflectivity","refractionRatio","skinning","specularMap","wireframe","wireframeLinecap","wireframeLinejoin","wireframeLinewidth"],h={},d=0;d<l.length;d++){var f=l[d];h[f]=i.material[f]}i.material=new u.MeshLambertMaterial(h)}if(c.startsWith("SITE"))this.isAoMap&&(i.rotateX(-Math.PI/2),i.updateMatrix()),this.result.site=ce._createFromMesh(i,{},-1),n=this.result.site;else if(c.startsWith("BUILDING")){var p=c.match(/BUILDING_(\d+)_.*/),g={},m=parseInt(p[1],10),v=t.findOneBy({building_id:m});null===v?console.warn("AdsumLoader: No place associated to building "+m):g.placeId=v.id;var y=le._createFromMesh(i,g,m);y.site=n,y.site.buildings.add(y),this.result.buildingsMap.set(y.id,y),n=y}else if(c.startsWith("FLOOR")){var b=c.match(/FLOOR_(\d+)_.*/),w=ue._createFromMesh(i,{},parseInt(b[1],10));w.altitude=i.position.z,w.building=n,w.building.floors.add(w),this.result.floorsMap.set(w.id,w),n=w}else if(c.startsWith("SHAPE")||c.startsWith("STORE")){var _=c.match(/(?:SHAPE|STORE)_(\d+)_.*/),x={},E=parseInt(_[1],10),A=t.findOneBy({shape_id:E});null===A?console.warn("AdsumLoader: No place associated to space "+E):x.placeId=A.id;var C=he._createFromMesh(i,x,E);C.parent=n,C.parent.spaces.add(C),this.result.spacesMap.set(C.id,C),n=C}for(var S=i.children.length-1;S>=0;S--)this._parseAndTransformAdsumScene(i.children[S],t,n)}},{key:"_adjustSceneSettings",value:function(){var e=this;this.result.scene.traverse(function(t){t instanceof u.Mesh&&(t.material.shininess=1e-5,e.options.shadowEnabled&&(t!==e.result.site._mesh&&(t.castShadow=!0),t.receiveShadow=!0))}),this._createLights(),this._createFog(),this.result.site._mesh.material.emissive&&this.result.site._mesh.material.emissive.set(0),this.result.site._mesh.material.shininess&&(this.result.site._mesh.material.shininess=1e-5),this.result.buildingsMap.forEach(function(t){var n=t._mesh;if(n.material&&n.material.specular&&n.material.specular.set(0,0,0),n.geometry){var i=new u.Vector3;n.geometry.computeBoundingBox(),n.geometry.boundingBox.getCenter(i),n.geometry.center(),n.geometry.translate(0,0,i.z),i.z=0,i.multiply(n.scale),i.applyQuaternion(n.quaternion),n.position.add(i),n.children.forEach(function(e){e.position.sub(i)}),n.updateMatrix(),n.updateMatrixWorld()}e._colorShapeVertices(n)}),this.result.floorsMap.forEach(function(e){e._mesh.material.emissive&&e._mesh.material.emissive.set(0),e._mesh.material.shininess&&(e._mesh.material.shininess=1e-5)}),this.result.spacesMap.forEach(function(t){var n=t._mesh;if(e._colorShapeVertices(n),n.geometry){var i=new u.Vector3;n.geometry.computeBoundingBox(),n.geometry.boundingBox.getCenter(i),n.geometry.center(),n.geometry.translate(0,0,i.z),i.z=0,i.multiply(n.scale),i.applyQuaternion(n.quaternion),n.position.add(i),n.updateMatrix(),n.updateMatrixWorld()}})}},{key:"_colorShapeVertices",value:function(e){if(this.isAoMap){var t=e.geometry,n=new u.Color(this.options.shapeAmbientOcclusionTopColor),i=new u.Color(this.options.shapeAmbientOcclusionBottomColor);t.faces.forEach(function(e){var r=n,o=n,s=n;t.vertices[e.a]&&0===t.vertices[e.a].z&&(r=i),t.vertices[e.b]&&0===t.vertices[e.b].z&&(o=i),t.vertices[e.c]&&0===t.vertices[e.c].z&&(s=i),e.vertexColors.push(r),e.vertexColors.push(o),e.vertexColors.push(s)}),t.colorsNeedUpdate=!0,e.material.vertexColors=u.VertexColors,e.material.needsUpdate=!0}}},{key:"_createLights",value:function(){var e=this.options.advancedLightingEnabled()?.5:1,t=new u.HemisphereLight(16777215,8947848,e);if(t.position.set(0,0,1),this.result.scene.add(t),t.updateMatrixWorld(),this.options.advancedLightingEnabled()){var n=new u.DirectionalLight(16777215,.2);n.position.set(1,0,0),this.result.scene.add(n),n.updateMatrixWorld();var i=new u.Box3,r=new u.Sphere;i.setFromObject(this.result.scene).getBoundingSphere(r);var o=r.radius,s=r.center.clone();s.z+=o/2,s.y+=o/2,s.x-=o/2;var a=new u.DirectionalLight(16777215,.85);a.position.copy(s),a.target.position.copy(r.center),this.options.shadowEnabled&&(a.castShadow=!0,a.shadow.camera.near=o/4,a.shadow.camera.far=2*o,a.shadow.camera.right=o,a.shadow.camera.left=-o,a.shadow.camera.top=o,a.shadow.camera.bottom=-o,a.shadow.mapSize.width=this.options.shadowMapSize,a.shadow.mapSize.height=this.options.shadowMapSize),this.result.scene.add(a.target),this.result.scene.add(a),a.updateMatrixWorld(),a.target.updateMatrixWorld()}}},{key:"_createFog",value:function(){this.options.fogEnabled&&(this.result.scene.fog=new u.FogExp2(this.options.fogColor,this.options.fogRatio))}},{key:"_addLabels",value:function(){var e=this,t=this.options.entityManager.getRepository("Place"),n=this.options.entityManager.getRepository("CustomObject");return t.load().then(function(){e.result.labelsMap.forEach(function(i){var r=n.get(i.id),o=t.get(r.place),s={x:r.offset.x,y:r.offset.y,z:r.offset.z};if(r.orientation_mode===p.a.BILLBOARD){var a=i.getSizeAndCenter(),c=a.size;s.z+=c.y/2}else s.z+=1.1;var l=r.orientation_mode===p.a.STATIC;r.rotation&&l&&i.rotateZ(r.rotation*Math.PI/180),r.permanent_display||i.setDisplayMode(w.NONE),null!==o.shape_id?e.result.spacesMap.get(o.shape_id).addLabel(i,s):null!==o.building_id?e.result.buildingsMap.get(o.building_id).addLabel(i,s):-1===o.floor_id?e.result.site.addLabel(i,{x:s.x+o.position.x,y:s.y+o.position.y,z:s.z+o.position.z}):e.result.floorsMap.get(o.floor_id).addLabel(i,{x:s.x+o.position.x,y:s.y+o.position.y,z:s.z+o.position.z})})})}},{key:"_loadProjectorTransform",value:function(){var e=this,t=this.options.entityManager.getRepository("Site");return t.load().then(function(){var n=t.getCurrent();if(n.gps_positions.size<4||6!==n.gps_transform.size||3!==n.gps_translate.size)return console.warn("AdsumWebMap.AdsumLoader: No gps positions available, wayfinding will not be accurate (we assume world unit match meter) !!"),void(e.result.projector=Ce.createFake());e.result.projector=new Ce(Array.from(n.gps_transform),Array.from(n.gps_translate),Array.from(n.gps_positions)[0])})}},{key:"_loadPaths",value:function(){var e=this,t=this.options.entityManager.getRepository("MapFile");return t.load().then(function(){var n=t.findOneBy({type:p.e.PATH});null===n?(console.warn("AdsumWebMap.AdsumLoader: No paths found, wayfinding will not be working !"),e.result.paths=new Map,e.result.paths.set("nodes",[]),e.result.paths.set("links",[])):e.result.paths=n.paths})}}]),e}(),Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,e),this.from=t,this.to=n,this.pmr=i,this._distance=null,this.pathSections=[],this.computed=!1}return b(e,[{key:"getDistance",value:function(){var e=this;return this.computed?(null===this._distance&&(this._distance=0,this.pathSections.forEach(function(t){e._distance+=t.getDistance()})),this._distance):null}},{key:"clear",value:function(){this.computed=!1,this.pathSections=[],this._distance=null}}]),e}()},function(e,t,n){"use strict";function i(){}function r(e,t){this.x=e||0,this.y=t||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function a(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function c(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function l(e,t,n,i,o,s,a,u,h,d){Object.defineProperty(this,"id",{value:Fc++}),this.uuid=Tc.generateUUID(),this.name="",this.image=void 0!==e?e:l.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:l.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ua,this.wrapT=void 0!==i?i:ua,this.magFilter=void 0!==o?o:ga,this.minFilter=void 0!==s?s:va,this.anisotropy=void 0!==h?h:1,this.format=void 0!==a?a:Pa,this.type=void 0!==u?u:ya,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new c,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:bc,this.version=0,this.onUpdate=null}function u(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function h(e,t,n){this.width=e,this.height=t,this.scissor=new u(0,0,e,t),this.scissorTest=!1,this.viewport=new u(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=ga),this.texture=new l(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function d(e,t,n){h.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function f(e,t,n,i,r,o,s,a,c,u,h,d){l.call(this,null,o,s,a,c,u,i,r,h,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:da,this.minFilter=void 0!==u?u:da,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function p(e,t){this.min=void 0!==e?e:new a(1/0,1/0,1/0),this.max=void 0!==t?t:new a(-1/0,-1/0,-1/0)}function g(e,t){this.center=void 0!==e?e:new a,this.radius=void 0!==t?t:0}function m(e,t){this.normal=void 0!==e?e:new a(1,0,0),this.constant=void 0!==t?t:0}function v(e,t,n,i,r,o){this.planes=[void 0!==e?e:new m,void 0!==t?t:new m,void 0!==n?n:new m,void 0!==i?i:new m,void 0!==r?r:new m,void 0!==o?o:new m]}function y(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function b(e){function t(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();var s=e.FLOAT;return i instanceof Float32Array?s=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?s=e.UNSIGNED_SHORT:i instanceof Int16Array?s=e.SHORT:i instanceof Uint32Array?s=e.UNSIGNED_INT:i instanceof Int32Array?s=e.INT:i instanceof Int8Array?s=e.BYTE:i instanceof Uint8Array&&(s=e.UNSIGNED_BYTE),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function n(t,n,i){var r=n.array,o=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===o.count?e.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(e){return e.isInterleavedBufferAttribute&&(e=e.data),s.get(e)}function r(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=s.get(t);n&&(e.deleteBuffer(n.buffer),s.delete(t))}function o(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var r=s.get(e);void 0===r?s.set(e,t(e,i)):r.version<e.version&&(n(r.buffer,e,i),r.version=e.version)}var s=new WeakMap;return{get:i,remove:r,update:o}}function w(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||w.DefaultOrder}function _(){this.mask=1}function x(){function e(){r.setFromEuler(i,!1)}function t(){i.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Bc++}),this.uuid=Tc.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=x.DefaultUp.clone();var n=new a,i=new w,r=new s,l=new a(1,1,1);i.onChange(e),r.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:i},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new o},normalMatrix:{value:new c}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function E(){x.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function A(e,t,n,i,r,o){E.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function C(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new a,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new y,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function S(){Object.defineProperty(this,"id",{value:Ic+=2}),this.uuid=Tc.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function M(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function k(e,t,n){M.call(this,new Int8Array(e),t,n)}function T(e,t,n){M.call(this,new Uint8Array(e),t,n)}function F(e,t,n){M.call(this,new Uint8ClampedArray(e),t,n)}function O(e,t,n){M.call(this,new Int16Array(e),t,n)}function P(e,t,n){M.call(this,new Uint16Array(e),t,n)}function L(e,t,n){M.call(this,new Int32Array(e),t,n)}function R(e,t,n){M.call(this,new Uint32Array(e),t,n)}function D(e,t,n){M.call(this,new Float32Array(e),t,n)}function B(e,t,n){M.call(this,new Float64Array(e),t,n)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function N(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}function j(){Object.defineProperty(this,"id",{value:Nc+=2}),this.uuid=Tc.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function U(e,t,n,i,r,o){S.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new $(e,t,n,i,r,o)),this.mergeVertices()}function $(e,t,n,i,r,o){function s(e,t,n,i,r,o,s,g,m,v,y){var b,w,_=o/m,x=s/v,E=o/2,A=s/2,C=g/2,S=m+1,M=v+1,k=0,T=0,F=new a;for(w=0;w<M;w++){var O=w*x-A;for(b=0;b<S;b++){var P=b*_-E;F[e]=P*i,F[t]=O*r,F[n]=C,u.push(F.x,F.y,F.z),F[e]=0,F[t]=0,F[n]=g>0?1:-1,h.push(F.x,F.y,F.z),d.push(b/m),d.push(1-w/v),k+=1}}for(w=0;w<v;w++)for(b=0;b<m;b++){var L=f+b+S*w,R=f+b+S*(w+1),D=f+(b+1)+S*(w+1),B=f+(b+1)+S*w;l.push(L,R,B),l.push(R,D,B),T+=6}c.addGroup(p,T,y),p+=T,f+=k}j.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var c=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var l=[],u=[],h=[],d=[],f=0,p=0;s("z","y","x",-1,-1,n,t,e,o,r,0),s("z","y","x",1,-1,n,t,-e,o,r,1),s("x","z","y",1,1,e,n,t,i,o,2),s("x","z","y",1,-1,e,n,-t,i,o,3),s("x","y","z",1,-1,e,t,n,i,r,4),s("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(d,2))}function z(e,t,n,i){S.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new H(e,t,n,i)),this.mergeVertices()}function H(e,t,n,i){j.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},e=e||1,t=t||1;var r,o,s=e/2,a=t/2,c=Math.floor(n)||1,l=Math.floor(i)||1,u=c+1,h=l+1,d=e/c,f=t/l,p=[],g=[],m=[],v=[];for(o=0;o<h;o++){var y=o*f-a;for(r=0;r<u;r++){var b=r*d-s;g.push(b,-y,0),m.push(0,0,1),v.push(r/c),v.push(1-o/l)}}for(o=0;o<l;o++)for(r=0;r<c;r++){var w=r+u*o,_=r+u*(o+1),x=r+1+u*(o+1),E=r+1+u*o;p.push(w,_,E),p.push(_,x,E)}this.setIndex(p),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(m,3)),this.addAttribute("uv",new D(v,2))}function V(){Object.defineProperty(this,"id",{value:jc++}),this.uuid=Tc.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ys,this.side=ls,this.flatShading=!1,this.vertexColors=ps,this.opacity=1,this.transparent=!1,this.blendSrc=Ps,this.blendDst=Ls,this.blendEquation=Es,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zs,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(e){V.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function G(e){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function q(e,t){this.origin=void 0!==e?e:new a,this.direction=void 0!==t?t:new a}function X(e,t){this.start=void 0!==e?e:new a,this.end=void 0!==t?t:new a}function K(e,t,n){this.a=void 0!==e?e:new a,this.b=void 0!==t?t:new a,this.c=void 0!==n?n:new a}function Y(e,t){x.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new j,this.material=void 0!==t?t:new W({color:16777215*Math.random()}),this.drawMode=mc,this.updateMorphTargets()}function Z(e,t,n,i){function r(t,i,r,h){var d=i.background;null===d?o(l,u):d&&d.isColor&&(o(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===c&&(c=new Y(new $(1,1,1),new G({uniforms:Dc.cube.uniforms,vertexShader:Dc.cube.vertexShader,fragmentShader:Dc.cube.fragmentShader,side:us,depthTest:!0,depthWrite:!1,fog:!1})),c.geometry.removeAttribute("normal"),c.geometry.removeAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(c.geometry)),c.material.uniforms.tCube.value=d,t.push(c,c.geometry,c.material,0,null)):d&&d.isTexture&&(void 0===s&&(s=new A(-1,1,1,-1,0,1),a=new Y(new H(2,2),new W({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a.geometry)),a.material.map=d,e.renderBufferDirect(s,null,a.geometry,a.material,a,null))}function o(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}var s,a,c,l=new y(0),u=0;return{getClearColor:function(){return l},setClearColor:function(e,t){l.set(e),u=void 0!==t?t:1,o(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,o(l,u)},render:r}}function J(e,t,n){function i(e){s=e}function r(t,i){e.drawArrays(s,t,i),n.update(i,s)}function o(e,i,r){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=e.attributes.position;a.isInterleavedBufferAttribute?(r=a.data.count,o.drawArraysInstancedANGLE(s,0,r,e.maxInstancedCount)):o.drawArraysInstancedANGLE(s,i,r,e.maxInstancedCount),n.update(r,s,e.maxInstancedCount)}var s;this.setMode=i,this.render=r,this.renderInstances=o}function Q(e,t,n){function i(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==n.precision?n.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var c=!0===n.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,y=!!t.get("OES_texture_float");return{getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function ee(){function e(){u.value!==i&&(u.value=i,u.needsUpdate=r>0),n.numPlanes=r,n.numIntersection=0}function t(e,t,i,r){var o=null!==e?e.length:0,s=null;if(0!==o){if(s=u.value,!0!==r||null===s){var c=i+4*o,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===s||s.length<c)&&(s=new Float32Array(c));for(var d=0,f=i;d!==o;++d,f+=4)a.copy(e[d]).applyMatrix4(h,l),a.normal.toArray(s,f),s[f+3]=a.constant}u.value=s,u.needsUpdate=!0}return n.numPlanes=o,s}var n=this,i=null,r=0,o=!1,s=!1,a=new m,l=new c,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,s){var a=0!==e.length||n||0!==r||o;return o=n,i=t(e,s,0),r=e.length,a},this.beginShadows=function(){s=!0,t(null)},this.endShadows=function(){s=!1,e()},this.setState=function(n,a,c,l,h,d){if(!o||null===n||0===n.length||s&&!c)s?t(null):e();else{var f=s?0:r,p=4*f,g=h.clippingState||null;u.value=g,g=t(n,l,p,d);for(var m=0;m!==p;++m)g[m]=i[m];h.clippingState=g,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function te(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function ne(e,t,n){function i(e){var r=e.target,o=a[r.id];null!==o.index&&t.remove(o.index);for(var s in o.attributes)t.remove(o.attributes[s]);r.removeEventListener("dispose",i),delete a[r.id];var l=c[r.id];l&&(t.remove(l),delete c[r.id]),l=c[o.id],l&&(t.remove(l),delete c[o.id]),n.memory.geometries--}function r(e,t){var r=a[t.id];return r||(t.addEventListener("dispose",i),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new j).setFromObject(e)),r=t._bufferGeometry),a[t.id]=r,n.memory.geometries++,r)}function o(n){var i=n.index,r=n.attributes;null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER);for(var o in r)t.update(r[o],e.ARRAY_BUFFER);var s=n.morphAttributes;for(var o in s)for(var a=s[o],c=0,l=a.length;c<l;c++)t.update(a[c],e.ARRAY_BUFFER)}function s(n){var i=c[n.id];if(i)return i;var r=[],o=n.index,s=n.attributes;if(null!==o)for(var a=o.array,l=0,u=a.length;l<u;l+=3){var h=a[l+0],d=a[l+1],f=a[l+2];r.push(h,d,d,f,f,h)}else for(var a=s.position.array,l=0,u=a.length/3-1;l<u;l+=3){var h=l+0,d=l+1,f=l+2;r.push(h,d,d,f,f,h)}return i=new(N(r)>65535?R:P)(r,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),c[n.id]=i,i}var a={},c={};return{get:r,update:o,getWireframeAttribute:s}}function ie(e,t,n){function i(e){a=e}function r(e){c=e.type,l=e.bytesPerElement}function o(t,i){e.drawElements(a,i,c,t*l),n.update(i,a)}function s(e,i,r){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(a,r,c,i*l,e.maxInstancedCount),n.update(r,a,e.maxInstancedCount)}var a,c,l;this.setMode=i,this.setIndex=r,this.render=o,this.renderInstances=s}function re(e){function t(t,n,i){switch(i=i||1,r.calls++,n){case e.TRIANGLES:r.triangles+=i*(t/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:r.triangles+=i*(t-2);break;case e.LINES:r.lines+=i*(t/2);break;case e.LINE_STRIP:r.lines+=i*(t-1);break;case e.LINE_LOOP:r.lines+=i*t;break;case e.POINTS:r.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}var i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:i,render:r,programs:null,autoReset:!0,reset:n,update:t}}function oe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function se(e){function t(t,r,o,s){var a=t.morphTargetInfluences,c=a.length,l=n[r.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];n[r.id]=l}for(var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal,u=0;u<c;u++){var f=l[u];0!==f[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u))}for(var u=0;u<c;u++){var f=l[u];f[0]=u,f[1]=a[u]}l.sort(oe);for(var u=0;u<8;u++){var f=l[u];if(f){var p=f[0],g=f[1];if(g){h&&r.addAttribute("morphTarget"+u,h[p]),d&&r.addAttribute("morphNormal"+u,d[p]),i[u]=g;continue}}i[u]=0}s.getUniforms().setValue(e,"morphTargetInfluences",i)}var n={},i=new Float32Array(8);return{update:t}}function ae(e,t){function n(n){var i=t.render.frame,o=n.geometry,s=e.get(n,o);return r[s.id]!==i&&(o.isGeometry&&s.updateFromObject(n),e.update(s),r[s.id]=i),s}function i(){r={}}var r={};return{update:n,dispose:i}}function ce(e,t,n,i,r,o,s,a,c,u){e=void 0!==e?e:[],t=void 0!==t?t:na,l.call(this,e,t,n,i,r,o,s,a,c,u),this.flipY=!1}function le(){this.seq=[],this.map={}}function ue(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,o=zc[r];if(void 0===o&&(o=new Float32Array(r),zc[r]=o),0!==t){i.toArray(o,0);for(var s=1,a=0;s!==t;++s)a+=n,e[s].toArray(o,a)}return o}function he(e,t){var n=Hc[t];void 0===n&&(n=new Int32Array(t),Hc[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function de(e,t){e.uniform1f(this.addr,t)}function fe(e,t){e.uniform1i(this.addr,t)}function pe(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function ge(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function me(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function ve(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function ye(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Wc.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Wc))}function be(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Vc.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Vc))}function we(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||Uc,i)}function _e(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||$c,i)}function xe(e,t){e.uniform2iv(this.addr,t)}function Ee(e,t){e.uniform3iv(this.addr,t)}function Ae(e,t){e.uniform4iv(this.addr,t)}function Ce(e){switch(e){case 5126:return de;case 35664:return pe;case 35665:return ge;case 35666:return me;case 35674:return ve;case 35675:return ye;case 35676:return be;case 35678:case 36198:return we;case 35680:return _e;case 5124:case 35670:return fe;case 35667:case 35671:return xe;case 35668:case 35672:return Ee;case 35669:case 35673:return Ae}}function Se(e,t){e.uniform1fv(this.addr,t)}function Me(e,t){e.uniform1iv(this.addr,t)}function ke(e,t){e.uniform2fv(this.addr,ue(t,this.size,2))}function Te(e,t){e.uniform3fv(this.addr,ue(t,this.size,3))}function Fe(e,t){e.uniform4fv(this.addr,ue(t,this.size,4))}function Oe(e,t){e.uniformMatrix2fv(this.addr,!1,ue(t,this.size,4))}function Pe(e,t){e.uniformMatrix3fv(this.addr,!1,ue(t,this.size,9))}function Le(e,t){e.uniformMatrix4fv(this.addr,!1,ue(t,this.size,16))}function Re(e,t,n){var i=t.length,r=he(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Uc,r[o])}function De(e,t,n){var i=t.length,r=he(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTextureCube(t[o]||$c,r[o])}function Be(e){switch(e){case 5126:return Se;case 35664:return ke;case 35665:return Te;case 35666:return Fe;case 35674:return Oe;case 35675:return Pe;case 35676:return Le;case 35678:return Re;case 35680:return De;case 5124:case 35670:return Me;case 35667:case 35671:return xe;case 35668:case 35672:return Ee;case 35669:case 35673:return Ae}}function Ie(e,t,n){this.id=e,this.addr=n,this.setValue=Ce(t.type)}function Ne(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=Be(t.type)}function je(e){this.id=e,le.call(this)}function Ue(e,t){e.seq.push(t),e.map[t.id]=t}function $e(e,t,n){var i=e.name,r=i.length;for(Gc.lastIndex=0;;){var o=Gc.exec(i),s=Gc.lastIndex,a=o[1],c="]"===o[2],l=o[3];if(c&&(a|=0),void 0===l||"["===l&&s+2===r){Ue(n,void 0===l?new Ie(a,e,t):new Ne(a,e,t));break}var u=n.map,h=u[a];void 0===h&&(h=new je(a),Ue(n,h)),n=h}}function ze(e,t,n){le.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=e.getActiveUniform(t,r),s=o.name;$e(o,e.getUniformLocation(t,s),this)}}function He(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Ve(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),He(n)),i}function We(e){switch(e){case bc:return["Linear","( value )"];case wc:return["sRGB","( value )"];case xc:return["RGBE","( value )"];case Ac:return["RGBM","( value, 7.0 )"];case Cc:return["RGBM","( value, 16.0 )"];case Sc:return["RGBD","( value, 256.0 )"];case _c:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ge(e,t){var n=We(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function qe(e,t){var n=We(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xe(e,t){var n;switch(t){case Zs:n="Linear";break;case Js:n="Reinhard";break;case Qs:n="Uncharted2";break;case ea:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ke(e,t,n){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Je).join("\n")}function Ye(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function Ze(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=e.getActiveAttrib(t,r),s=o.name;n[s]=e.getAttribLocation(t,s)}return n}function Je(e){return""!==e}function Qe(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function et(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function tt(e){function t(e,t){var n=Oc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return tt(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(n,t)}function nt(e){function t(e,t,n,i){for(var r="",o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function it(e,t,n,i,r,o){var s=e.context,a=i.defines,c=r.vertexShader,l=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";o.shadowMapType===as?u="SHADOWMAP_TYPE_PCF":o.shadowMapType===cs&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case na:case ia:h="ENVMAP_TYPE_CUBE";break;case aa:case ca:h="ENVMAP_TYPE_CUBE_UV";break;case ra:case oa:h="ENVMAP_TYPE_EQUIREC";break;case sa:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ia:case oa:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case qs:f="ENVMAP_BLENDING_MULTIPLY";break;case Xs:f="ENVMAP_BLENDING_MIX";break;case Ks:f="ENVMAP_BLENDING_ADD"}}var p,g,m=e.gammaFactor>0?e.gammaFactor:1,v=Ke(i.extensions,o,t),y=Ye(a),b=s.createProgram();i.isRawShaderMaterial?(p=[y].filter(Je).join("\n"),p.length>0&&(p+="\n"),g=[v,y].filter(Je).join("\n"),g.length>0&&(g+="\n")):(p=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Je).join("\n"),g=[v,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ys?"#define TONE_MAPPING":"",o.toneMapping!==Ys?Oc.tonemapping_pars_fragment:"",o.toneMapping!==Ys?Xe("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Oc.encodings_pars_fragment:"",o.mapEncoding?Ge("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Ge("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ge("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?qe("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Je).join("\n")),c=tt(c),c=Qe(c,o),c=et(c,o),l=tt(l),l=Qe(l,o),l=et(l,o),c=nt(c),l=nt(l);var w=p+c,_=g+l,x=Ve(s,s.VERTEX_SHADER,w),E=Ve(s,s.FRAGMENT_SHADER,_);s.attachShader(b,x),s.attachShader(b,E),void 0!==i.index0AttributeName?s.bindAttribLocation(b,0,i.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(b,0,"position"),s.linkProgram(b);var A=s.getProgramInfoLog(b).trim(),C=s.getShaderInfoLog(x).trim(),S=s.getShaderInfoLog(E).trim(),M=!0,k=!0;!1===s.getProgramParameter(b,s.LINK_STATUS)?(M=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(b,s.VALIDATE_STATUS),"gl.getProgramInfoLog",A,C,S)):""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==C&&""!==S||(k=!1),k&&(this.diagnostics={runnable:M,material:i,programLog:A,vertexShader:{log:C,prefix:p},fragmentShader:{log:S,prefix:g}}),s.deleteShader(x),s.deleteShader(E);var T;this.getUniforms=function(){return void 0===T&&(T=new ze(s,b,e)),T};var F;return this.getAttributes=function(){return void 0===F&&(F=Ze(s,b)),F},this.destroy=function(){s.deleteProgram(b),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=qc++,this.code=n,this.usedTimes=1,this.program=b,this.vertexShader=x,this.fragmentShader=E,this}function rt(e,t,n){function i(e){var t=e.skeleton,i=t.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,o=Math.floor((r-20)/4),s=Math.min(o,i.length);return s<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+s+"."),0):s}function r(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=bc,n===bc&&t&&(n=_c),n}var o=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,a,c,l,u,h){var d=s[t.type],f=h.isSkinnedMesh?i(h):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var g=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:r(g?g.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:r(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:r(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===aa||t.envMap.mapping===ca),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:r(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!c,useFog:t.fog,fogExp:c&&c.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===hs,flipSided:t.side===us,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(n,i,r,s){for(var a,c=0,l=o.length;c<l;c++){var u=o[c];if(u.code===s){a=u,++a.usedTimes;break}}return void 0===a&&(a=new it(e,t,s,n,i,r),o.push(a)),a},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},this.programs=o}function ot(){function e(e){var t=r.get(e);return void 0===t&&(t={},r.set(e,t)),t}function t(e){r.delete(e)}function n(e,t,n){r.get(e)[t]=n}function i(){r=new WeakMap}var r=new WeakMap;return{get:e,remove:t,update:n,dispose:i}}function st(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function at(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ct(){function e(){r=0,o.length=0,s.length=0}function t(e,t,n,a,c){var l=i[r];void 0===l?(l={id:e.id,object:e,geometry:t,material:n,program:n.program,renderOrder:e.renderOrder,z:a,group:c},i[r]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.program=n.program,l.renderOrder=e.renderOrder,l.z=a,l.group=c),(!0===n.transparent?s:o).push(l),r++}function n(){o.length>1&&o.sort(st),s.length>1&&s.sort(at)}var i=[],r=0,o=[],s=[];return{opaque:o,transparent:s,init:e,push:t,sort:n}}function lt(){function e(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new ct,n[i]=r),r}function t(){n={}}var n={};return{get:e,dispose:t}}function ut(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new a,color:new y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new a,direction:new a,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new a,color:new y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new a,skyColor:new y,groundColor:new y};break;case"RectAreaLight":n={color:new y,position:new a,halfWidth:new a,halfHeight:new a}}return e[t.id]=n,n}}}function ht(){function e(e,o,a){for(var c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=a.matrixWorldInverse,v=0,y=e.length;v<y;v++){var b=e[v],w=b.color,_=b.intensity,x=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)c+=w.r*_,l+=w.g*_,u+=w.b*_;else if(b.isDirectionalLight){var A=t.get(b);if(A.color.copy(b.color).multiplyScalar(b.intensity),A.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(m),A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize}n.directionalShadowMap[h]=E,n.directionalShadowMatrix[h]=b.shadow.matrix,n.directional[h]=A,h++}else if(b.isSpotLight){var A=t.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),A.color.copy(w).multiplyScalar(_),A.distance=x,A.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(m),A.coneCos=Math.cos(b.angle),A.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),A.decay=0===b.distance?0:b.decay,A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize}n.spotShadowMap[f]=E,n.spotShadowMatrix[f]=b.shadow.matrix,n.spot[f]=A,f++}else if(b.isRectAreaLight){var A=t.get(b);A.color.copy(w).multiplyScalar(_),A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),s.identity(),r.copy(b.matrixWorld),r.premultiply(m),s.extractRotation(r),A.halfWidth.set(.5*b.width,0,0),A.halfHeight.set(0,.5*b.height,0),A.halfWidth.applyMatrix4(s),A.halfHeight.applyMatrix4(s),n.rectArea[p]=A,p++}else if(b.isPointLight){var A=t.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(m),A.color.copy(b.color).multiplyScalar(b.intensity),A.distance=b.distance,A.decay=0===b.distance?0:b.decay,A.shadow=b.castShadow,b.castShadow){var C=b.shadow;A.shadowBias=C.bias,A.shadowRadius=C.radius,A.shadowMapSize=C.mapSize,A.shadowCameraNear=C.camera.near,A.shadowCameraFar=C.camera.far}n.pointShadowMap[d]=E,n.pointShadowMatrix[d]=b.shadow.matrix,n.point[d]=A,d++}else if(b.isHemisphereLight){var A=t.get(b);A.direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(m),A.direction.normalize(),A.skyColor.copy(b.color).multiplyScalar(_),A.groundColor.copy(b.groundColor).multiplyScalar(_),n.hemi[g]=A,g++}}n.ambient[0]=c,n.ambient[1]=l,n.ambient[2]=u,n.directional.length=h,n.spot.length=f,n.rectArea.length=p,n.point.length=d,n.hemi.length=g,n.hash=n.id+","+h+","+d+","+f+","+p+","+g+","+o.length}var t=new ut,n={id:Xc++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new a,r=new o,s=new o;return{setup:e,state:n}}function dt(){function e(){s.length=0,a.length=0,c.length=0}function t(e){s.push(e)}function n(e){a.push(e)}function i(e){c.push(e)}function r(e){o.setup(s,a,e)}var o=new ht,s=[],a=[],c=[];return{init:e,state:{lightsArray:s,shadowsArray:a,spritesArray:c,lights:o},setupLights:r,pushLight:t,pushShadow:n,pushSprite:i}}function ft(){function e(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new dt,n[i]=r),r}function t(){n={}}var n={};return{get:e,dispose:t}}function pt(e){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mc,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function gt(e){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function mt(e,t,n){function i(t,n,i,r,o,s){var a=t.geometry,c=null,l=w,u=t.customDepthMaterial;if(i&&(l=_,u=t.customDistanceMaterial),u)c=u;else{var h=!1;n.morphTargets&&(a&&a.isBufferGeometry?h=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(h=a.morphTargets&&a.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var d=t.isSkinnedMesh&&n.skinning,f=0;h&&(f|=m),d&&(f|=y),c=l[f]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var p=c.uuid,g=n.uuid,v=x[p];void 0===v&&(v={},x[p]=v);var b=v[g];void 0===b&&(b=c.clone(),v[g]=b),c=b}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:E[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,i&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(r),c.nearDistance=o,c.farDistance=s),c}function s(n,r,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||c.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var h=l.groups,d=0,f=h.length;d<f;d++){var p=h[d],m=u[p.materialIndex];if(m&&m.visible){var v=i(n,m,a,g,o.near,o.far);e.renderBufferDirect(o,null,l,v,n,p)}}else if(u.visible){var v=i(n,u,a,g,o.near,o.far);e.renderBufferDirect(o,null,l,v,n,null)}}for(var y=n.children,b=0,w=y.length;b<w;b++)s(y[b],r,o,a)}}for(var c=new v,l=new o,d=new r,f=new r(n,n),p=new a,g=new a,m=1,y=2,b=1+(m|y),w=new Array(b),_=new Array(b),x={},E={0:us,1:ls,2:hs},A=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],C=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],S=[new u,new u,new u,new u,new u,new u],M=0;M!==b;++M){var k=0!==(M&m),T=0!==(M&y),F=new pt({depthPacking:kc,morphTargets:k,skinning:T});w[M]=F;var O=new gt({morphTargets:k,skinning:T});_[M]=O}var P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=as,this.render=function(t,n,i){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==t.length){var r=e.context,o=e.state;o.disable(r.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var a,u=0,m=t.length;u<m;u++){var v=t[u],y=v.shadow,b=v&&v.isPointLight;if(void 0!==y){var w=y.camera;if(d.copy(y.mapSize),d.min(f),b){var _=d.x,x=d.y;S[0].set(2*_,x,_,x),S[1].set(0,x,_,x),S[2].set(3*_,x,_,x),S[3].set(_,x,_,x),S[4].set(3*_,0,_,x),S[5].set(_,0,_,x),d.x*=4,d.y*=2}if(null===y.map){var E={minFilter:da,magFilter:da,format:Pa};y.map=new h(d.x,d.y,E),y.map.texture.name=v.name+".shadowMap",w.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(v);var M=y.map,k=y.matrix;g.setFromMatrixPosition(v.matrixWorld),w.position.copy(g),b?(a=6,k.makeTranslation(-g.x,-g.y,-g.z)):(a=1,p.setFromMatrixPosition(v.target.matrixWorld),w.lookAt(p),w.updateMatrixWorld(),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(w.projectionMatrix),k.multiply(w.matrixWorldInverse)),e.setRenderTarget(M),e.clear();for(var T=0;T<a;T++){if(b){p.copy(w.position),p.add(A[T]),w.up.copy(C[T]),w.lookAt(p),w.updateMatrixWorld();var F=S[T];o.viewport(F)}l.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),c.setFromMatrix(l),s(n,i,w,b)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}P.needsUpdate=!1}}}function vt(e,t,n,i,r,o,s,a,c){l.call(this,e,t,n,i,r,o,s,a,c),this.needsUpdate=!0}function yt(e,t,n,i,r){function o(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);u=t.createBuffer(),h=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),d=c(),f={position:t.getAttribLocation(d,"position"),uv:t.getAttribLocation(d,"uv")},p={uvOffset:t.getUniformLocation(d,"uvOffset"),uvScale:t.getUniformLocation(d,"uvScale"),rotation:t.getUniformLocation(d,"rotation"),center:t.getUniformLocation(d,"center"),scale:t.getUniformLocation(d,"scale"),color:t.getUniformLocation(d,"color"),map:t.getUniformLocation(d,"map"),opacity:t.getUniformLocation(d,"opacity"),modelViewMatrix:t.getUniformLocation(d,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(d,"projectionMatrix"),fogType:t.getUniformLocation(d,"fogType"),fogDensity:t.getUniformLocation(d,"fogDensity"),fogNear:t.getUniformLocation(d,"fogNear"),fogFar:t.getUniformLocation(d,"fogFar"),fogColor:t.getUniformLocation(d,"fogColor"),fogDepth:t.getUniformLocation(d,"fogDepth"),alphaTest:t.getUniformLocation(d,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),g=new vt(i)}function c(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(i),t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),e}function l(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var u,h,d,f,p,g,m=new a,v=new s,y=new a;this.render=function(r,s,a){if(0!==r.length){void 0===d&&o(),n.useProgram(d),n.initAttributes(),n.enableAttribute(f.position),n.enableAttribute(f.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,u),t.vertexAttribPointer(f.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(f.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.uniformMatrix4fv(p.projectionMatrix,!1,a.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(p.map,0);var c=0,b=0,w=s.fog;w?(t.uniform3f(p.fogColor,w.color.r,w.color.g,w.color.b),w.isFog?(t.uniform1f(p.fogNear,w.near),t.uniform1f(p.fogFar,w.far),t.uniform1i(p.fogType,1),c=1,b=1):w.isFogExp2&&(t.uniform1f(p.fogDensity,w.density),t.uniform1i(p.fogType,2),c=2,b=2)):(t.uniform1i(p.fogType,0),c=0,b=0);for(var _=0,x=r.length;_<x;_++){var E=r[_];E.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}r.sort(l);for(var A=[],C=[],_=0,x=r.length;_<x;_++){var E=r[_],S=E.material;if(!1!==S.visible){E.onBeforeRender(e,s,a,void 0,S,void 0),t.uniform1f(p.alphaTest,S.alphaTest),t.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(m,v,y),A[0]=y.x,A[1]=y.y,C[0]=E.center.x-.5,C[1]=E.center.y-.5;var M=0;s.fog&&S.fog&&(M=b),c!==M&&(t.uniform1i(p.fogType,M),c=M),null!==S.map?(t.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),t.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(t.uniform2f(p.uvOffset,0,0),t.uniform2f(p.uvScale,1,1)),t.uniform1f(p.opacity,S.opacity),t.uniform3f(p.color,S.color.r,S.color.g,S.color.b),t.uniform1f(p.rotation,S.rotation),t.uniform2fv(p.center,C),t.uniform2fv(p.scale,A),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),i.setTexture2D(S.map||g,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),E.onAfterRender(e,s,a,void 0,S,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function bt(e,t,n){function i(){var t=!1,n=new u,i=null,r=new u(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,s,a){!0===a&&(t*=s,i*=s,o*=s),n.set(t,i,o,s),!1===r.equals(n)&&(e.clearColor(t,i,o,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function r(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?d(e.DEPTH_TEST):f(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case js:e.depthFunc(e.NEVER);break;case Us:e.depthFunc(e.ALWAYS);break;case $s:e.depthFunc(e.LESS);break;case zs:e.depthFunc(e.LEQUAL);break;case Hs:e.depthFunc(e.EQUAL);break;case Vs:e.depthFunc(e.GEQUAL);break;case Ws:e.depthFunc(e.GREATER);break;case Gs:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function o(){var t=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null;return{setTest:function(t){t?d(e.STENCIL_TEST):f(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&c===i||(e.stencilOp(t,n,i),s=t,a=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null}}}function s(t,n,i){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<i;s++)e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}function a(){for(var e=0,t=R.length;e<t;e++)R[e]=0}function c(n){if(R[n]=1,0===D[n]&&(e.enableVertexAttribArray(n),D[n]=1),0!==B[n]){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),B[n]=0}}function l(n,i){if(R[n]=1,0===D[n]&&(e.enableVertexAttribArray(n),D[n]=1),B[n]!==i){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),B[n]=i}}function h(){for(var t=0,n=D.length;t!==n;++t)D[t]!==R[t]&&(e.disableVertexAttribArray(t),D[t]=0)}function d(t){!0!==I[t]&&(e.enable(t),I[t]=!0)}function f(t){!1!==I[t]&&(e.disable(t),I[t]=!1)}function p(){if(null===N&&(N=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)N.push(n[i]);return N}function g(t){return j!==t&&(e.useProgram(t),j=t,!0)}function m(t,i,r,o,s,a,c,l){if(t!==vs?d(e.BLEND):f(e.BLEND),t!==xs){if(t!==U||l!==q)switch(t){case bs:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case ws:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case _s:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}$=null,z=null,H=null,V=null,W=null,G=null}else s=s||i,a=a||r,c=c||o,i===$&&s===V||(e.blendEquationSeparate(n.convert(i),n.convert(s)),$=i,V=s),r===z&&o===H&&a===W&&c===G||(e.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(a),n.convert(c)),z=r,H=o,W=a,G=c);U=t,q=l}function v(t,n){t.side===hs?f(e.CULL_FACE):d(e.CULL_FACE);var i=t.side===us;n&&(i=!i),y(i),!0===t.transparent?m(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):m(vs),O.setFunc(t.depthFunc),O.setTest(t.depthTest),O.setMask(t.depthWrite),F.setMask(t.colorWrite),_(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function y(t){X!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),X=t)}function b(t){t!==es?(d(e.CULL_FACE),t!==K&&(t===ts?e.cullFace(e.BACK):t===ns?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):f(e.CULL_FACE),K=t}function w(t){t!==Y&&(ee&&e.lineWidth(t),Y=t)}function _(t,n,i){t?(d(e.POLYGON_OFFSET_FILL),Z===n&&J===i||(e.polygonOffset(n,i),Z=n,J=i)):f(e.POLYGON_OFFSET_FILL)}function x(t){t?d(e.SCISSOR_TEST):f(e.SCISSOR_TEST)}function E(t){void 0===t&&(t=e.TEXTURE0+Q-1),ie!==t&&(e.activeTexture(t),ie=t)}function A(t,n){null===ie&&E();var i=re[ie];void 0===i&&(i={type:void 0,texture:void 0},re[ie]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||ae[t]),i.type=t,i.texture=n)}function C(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function S(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function M(t){!1===oe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),oe.copy(t))}function k(t){!1===se.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),se.copy(t))}function T(){for(var t=0;t<D.length;t++)1===D[t]&&(e.disableVertexAttribArray(t),D[t]=0);I={},N=null,ie=null,re={},j=null,U=null,X=null,K=null,F.reset(),O.reset(),P.reset()}var F=new i,O=new r,P=new o,L=e.getParameter(e.MAX_VERTEX_ATTRIBS),R=new Uint8Array(L),D=new Uint8Array(L),B=new Uint8Array(L),I={},N=null,j=null,U=null,$=null,z=null,H=null,V=null,W=null,G=null,q=!1,X=null,K=null,Y=null,Z=null,J=null,Q=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ee=!1,te=0,ne=e.getParameter(e.VERSION);-1!==ne.indexOf("WebGL")?(te=parseFloat(/^WebGL\ ([0-9])/.exec(ne)[1]),ee=te>=1):-1!==ne.indexOf("OpenGL ES")&&(te=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ne)[1]),ee=te>=2);var ie=null,re={},oe=new u,se=new u,ae={};return ae[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),ae[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F.setClear(0,0,0,1),O.setClear(1),P.setClear(0),d(e.DEPTH_TEST),O.setFunc(zs),y(!1),b(ts),d(e.CULL_FACE),d(e.BLEND),m(ys),{buffers:{color:F,depth:O,stencil:P},initAttributes:a,enableAttribute:c,enableAttributeAndDivisor:l,disableUnusedAttributes:h,enable:d,disable:f,getCompressedTextureFormats:p,useProgram:g,setBlending:m,setMaterial:v,setFlipSided:y,setCullFace:b,setLineWidth:w,setPolygonOffset:_,setScissorTest:x,activeTexture:E,bindTexture:A,compressedTexImage2D:C,texImage2D:S,scissor:M,viewport:k,reset:T}}function wt(e,t,n,i,r,o,s){function a(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n);return i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function c(e){return Tc.isPowerOfTwo(e.width)&&Tc.isPowerOfTwo(e.height)}function l(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===F&&(F=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),F.width=Tc.floorPowerOfTwo(e.width),F.height=Tc.floorPowerOfTwo(e.height);return F.getContext("2d").drawImage(e,0,0,F.width,F.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+F.width+"x"+F.height,e),F}return e}function u(e){return e.wrapS!==ua||e.wrapT!==ua||e.minFilter!==da&&e.minFilter!==ga}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==da&&e.minFilter!==ga}function d(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log2(Math.max(r,o))}function f(t){return t===da||t===fa||t===pa?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),m(t),t.isVideoTexture&&delete P[t.id],s.memory.textures--}function g(e){var t=e.target;t.removeEventListener("dispose",g),v(t),s.memory.textures--}function m(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}function v(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}function y(t,r){var o=i.get(t);if(t.isVideoTexture&&T(t),t.version>0&&o.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==s.complete)return void x(o,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function b(t,l){var u=i.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",p),u.__image__webglTextureCube=e.createTexture(),s.memory.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f=t&&t.isCompressedTexture,g=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=f||g?g?t.image[v].image:t.image[v]:a(t.image[v],r.maxCubemapSize);var y=m[0],b=c(y),w=o.convert(t.format),x=o.convert(t.type);_(e.TEXTURE_CUBE_MAP,t,b);for(var v=0;v<6;v++)if(f)for(var E,A=m[v].mipmaps,C=0,S=A.length;C<S;C++)E=A[C],t.format!==Pa&&t.format!==Oa?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,C,w,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,C,w,E.width,E.height,0,w,x,E.data);else g?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,m[v].width,m[v].height,0,w,x,m[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,w,x,m[v]);u.__maxMipLevel=f?A.length-1:0,h(t,b)&&d(e.TEXTURE_CUBE_MAP,t,y.width,y.height),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function w(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function _(n,s,a){var c;if(a?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(s.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(s.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(s.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),s.wrapS===ua&&s.wrapT===ua||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(s.minFilter)),s.minFilter!==da&&s.minFilter!==ga&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),c=t.get("EXT_texture_filter_anisotropic")){if(s.type===Aa&&null===t.get("OES_texture_float_linear"))return;if(s.type===Ca&&null===t.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function x(t,i,f){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),s.memory.textures++),n.activeTexture(e.TEXTURE0+f),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var g=a(i.image,r.maxTextureSize);u(i)&&!1===c(g)&&(g=l(g));var m=c(g),v=o.convert(i.format),y=o.convert(i.type);_(e.TEXTURE_2D,i,m);var b,w=i.mipmaps;if(i.isDepthTexture){var x=e.DEPTH_COMPONENT;if(i.type===Aa){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");x=e.DEPTH_COMPONENT32F}else O&&(x=e.DEPTH_COMPONENT16);i.format===Ba&&x===e.DEPTH_COMPONENT&&i.type!==_a&&i.type!==Ea&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=_a,y=o.convert(i.type)),i.format===Ia&&(x=e.DEPTH_STENCIL,i.type!==Ta&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ta,y=o.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,x,g.width,g.height,0,v,y,null)}else if(i.isDataTexture)if(w.length>0&&m){for(var E=0,A=w.length;E<A;E++)b=w[E],n.texImage2D(e.TEXTURE_2D,E,v,b.width,b.height,0,v,y,b.data);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,g.width,g.height,0,v,y,g.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(var E=0,A=w.length;E<A;E++)b=w[E],i.format!==Pa&&i.format!==Oa?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,v,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,v,b.width,b.height,0,v,y,b.data);t.__maxMipLevel=w.length-1}else if(w.length>0&&m){for(var E=0,A=w.length;E<A;E++)b=w[E],n.texImage2D(e.TEXTURE_2D,E,v,v,y,b);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,v,y,g),t.__maxMipLevel=0;h(i,m)&&d(e.TEXTURE_2D,i,g.width,g.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function E(t,r,s,a){var c=o.convert(r.texture.format),l=o.convert(r.texture.type);n.texImage2D(a,0,c,r.width,r.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,s,a,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function A(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function C(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ba)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ia)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}function S(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");C(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),A(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),A(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t){var r=i.get(t),o=i.get(t.texture);t.addEventListener("dispose",g),o.__webglTexture=e.createTexture(),s.memory.textures++;var a=!0===t.isWebGLRenderTargetCube,l=c(t);if(a){r.__webglFramebuffer=[];for(var u=0;u<6;u++)r.__webglFramebuffer[u]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(a){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),_(e.TEXTURE_CUBE_MAP,t.texture,l);for(var u=0;u<6;u++)E(r.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);h(t.texture,l)&&d(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),_(e.TEXTURE_2D,t.texture,l),E(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,l)&&d(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&S(t)}function k(t){var r=t.texture;if(h(r,c(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=i.get(r).__webglTexture;n.bindTexture(o,s),d(o,r,t.width,t.height),n.bindTexture(o,null)}}function T(e){var t=e.id,n=s.render.frame;P[t]!==n&&(P[t]=n,e.update())}var F,O="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,P={};this.setTexture2D=y,this.setTextureCube=b,this.setTextureCubeDynamic=w,this.setupRenderTarget=M,this.updateRenderTargetMipmap=k}function _t(e,t){function n(n){var i;if(n===la)return e.REPEAT;if(n===ua)return e.CLAMP_TO_EDGE;if(n===ha)return e.MIRRORED_REPEAT;if(n===da)return e.NEAREST;if(n===fa)return e.NEAREST_MIPMAP_NEAREST;if(n===pa)return e.NEAREST_MIPMAP_LINEAR;if(n===ga)return e.LINEAR;if(n===ma)return e.LINEAR_MIPMAP_NEAREST;if(n===va)return e.LINEAR_MIPMAP_LINEAR;if(n===ya)return e.UNSIGNED_BYTE;if(n===Sa)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ma)return e.UNSIGNED_SHORT_5_5_5_1;if(n===ka)return e.UNSIGNED_SHORT_5_6_5;if(n===ba)return e.BYTE;if(n===wa)return e.SHORT;if(n===_a)return e.UNSIGNED_SHORT;if(n===xa)return e.INT;if(n===Ea)return e.UNSIGNED_INT;if(n===Aa)return e.FLOAT;if(n===Ca&&null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===Fa)return e.ALPHA;if(n===Oa)return e.RGB;if(n===Pa)return e.RGBA;if(n===La)return e.LUMINANCE;if(n===Ra)return e.LUMINANCE_ALPHA;if(n===Ba)return e.DEPTH_COMPONENT;if(n===Ia)return e.DEPTH_STENCIL;if(n===Es)return e.FUNC_ADD;if(n===As)return e.FUNC_SUBTRACT;if(n===Cs)return e.FUNC_REVERSE_SUBTRACT;if(n===ks)return e.ZERO;if(n===Ts)return e.ONE;if(n===Fs)return e.SRC_COLOR;if(n===Os)return e.ONE_MINUS_SRC_COLOR;if(n===Ps)return e.SRC_ALPHA;if(n===Ls)return e.ONE_MINUS_SRC_ALPHA;if(n===Rs)return e.DST_ALPHA;if(n===Ds)return e.ONE_MINUS_DST_ALPHA;if(n===Bs)return e.DST_COLOR;if(n===Is)return e.ONE_MINUS_DST_COLOR;if(n===Ns)return e.SRC_ALPHA_SATURATE;if((n===Na||n===ja||n===Ua||n===$a)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Na)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ja)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ua)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===$a)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===za||n===Ha||n===Va||n===Wa)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===za)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ha)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Va)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Wa)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ga&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===qa||n===Xa||n===Ka||n===Ya||n===Za||n===Ja||n===Qa||n===ec||n===tc||n===nc||n===ic||n===rc||n===oc||n===sc)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if((n===Ss||n===Ms)&&null!==(i=t.get("EXT_blend_minmax"))){if(n===Ss)return i.MIN_EXT;if(n===Ms)return i.MAX_EXT}return n===Ta&&null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function xt(e,t,n,i){E.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Et(e){xt.call(this),this.cameras=e||[]}function At(e){function t(){if(null!==i&&i.isPresenting){var t=i.getEyeParameters("left"),r=t.renderWidth,o=t.renderHeight;b=e.getPixelRatio(),y=e.getSize(),e.setDrawingBufferSize(2*r,o,1)}else n.enabled&&e.setDrawingBufferSize(y.width,y.height,b)}var n=this,i=null,r=null,c=null,l=new o,h=new o;"undefined"!==typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData);var d=new o,f=new s,p=new a,g=new xt;g.bounds=new u(0,0,.5,1),g.layers.enable(1);var m=new xt;m.bounds=new u(.5,0,.5,1),m.layers.enable(2);var v=new Et([g,m]);v.layers.enable(1),v.layers.enable(2);var y,b;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e)},this.setPoseTarget=function(e){void 0!==e&&(c=e)},this.getCamera=function(e){if(null===i)return e;i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(r);var t=i.stageParameters;t?l.fromArray(t.sittingToStandingTransform):l.makeTranslation(0,n.userHeight,0);var o=r.pose,s=null!==c?c:e;if(s.matrix.copy(l),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==o.orientation&&(f.fromArray(o.orientation),s.quaternion.multiply(f)),null!==o.position&&(f.setFromRotationMatrix(l),p.fromArray(o.position),p.applyQuaternion(f),s.position.add(p)),s.updateMatrixWorld(),!1===i.isPresenting)return e;g.near=e.near,m.near=e.near,g.far=e.far,m.far=e.far,v.matrixWorld.copy(e.matrixWorld),v.matrixWorldInverse.copy(e.matrixWorldInverse),g.matrixWorldInverse.fromArray(r.leftViewMatrix),m.matrixWorldInverse.fromArray(r.rightViewMatrix),h.getInverse(l),g.matrixWorldInverse.multiply(h),m.matrixWorldInverse.multiply(h);var a=s.parent;null!==a&&(d.getInverse(a.matrixWorld),g.matrixWorldInverse.multiply(d),m.matrixWorldInverse.multiply(d)),g.matrixWorld.getInverse(g.matrixWorldInverse),m.matrixWorld.getInverse(m.matrixWorldInverse),g.projectionMatrix.fromArray(r.leftProjectionMatrix),m.projectionMatrix.fromArray(r.rightProjectionMatrix),v.projectionMatrix.copy(g.projectionMatrix);var u=i.getLayers();if(u.length){var y=u[0];null!==y.leftBounds&&4===y.leftBounds.length&&g.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&m.bounds.fromArray(y.rightBounds)}return v},this.getStandingMatrix=function(){return l},this.submitFrame=function(){i&&i.isPresenting&&i.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}function Ct(e){function t(){return null===ue?xe:1}function n(){Le=new te(oe),Le.get("WEBGL_depth_texture"),Le.get("OES_texture_float"),Le.get("OES_texture_float_linear"),Le.get("OES_texture_half_float"),Le.get("OES_texture_half_float_linear"),Le.get("OES_standard_derivatives"),Le.get("OES_element_index_uint"),Le.get("ANGLE_instanced_arrays"),Ze=new _t(oe,Le),Re=new Q(oe,Le,e),De=new bt(oe,Le,Ze),De.scissor(ve.copy(Ae).multiplyScalar(xe)),De.viewport(me.copy(Ee).multiplyScalar(xe)),Be=new re(oe),Ie=new ot,Ne=new wt(oe,Le,De,Ie,Re,Ze,Be),je=new b(oe),Ue=new ne(oe,je,Be),$e=new ae(Ue,Be),qe=new se(oe),He=new rt(ce,Le,Re),Ve=new lt,We=new ft,Ge=new Z(ce,De,Ue,G),Xe=new J(oe,Le,Be),Ke=new ie(oe,Le,Be),Ye=new yt(ce,oe,De,Ne,Re),Be.programs=He.programs,ce.context=oe,ce.capabilities=Re,ce.extensions=Le,ce.properties=Ie,ce.renderLists=Ve,ce.state=De,ce.info=Be}function i(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),le=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),le=!1,n()}function s(e){var t=e.target;t.removeEventListener("dispose",s),c(t)}function c(e){l(e),Ie.remove(e)}function l(e){var t=Ie.get(e).program;e.program=void 0,void 0!==t&&He.releaseProgram(t)}function h(e,t,n){e.render(function(e){ce.renderBufferImmediate(e,t,n)})}function d(e,t,n,i){if(n&&n.isInstancedBufferGeometry&&null===Le.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),De.initAttributes();var r=n.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var a in o){var c=o[a];if(c>=0){var l=r[a];if(void 0!==l){var u=l.normalized,h=l.itemSize,d=je.get(l);if(void 0===d)continue;var f=d.buffer,p=d.type,g=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,v=m.stride,y=l.offset;m&&m.isInstancedInterleavedBuffer?(De.enableAttributeAndDivisor(c,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):De.enableAttribute(c),oe.bindBuffer(oe.ARRAY_BUFFER,f),oe.vertexAttribPointer(c,h,p,u,v*g,(i*v+y)*g)}else l.isInstancedBufferAttribute?(De.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):De.enableAttribute(c),oe.bindBuffer(oe.ARRAY_BUFFER,f),oe.vertexAttribPointer(c,h,p,u,0,i*h*g)}else if(void 0!==s){var b=s[a];if(void 0!==b)switch(b.length){case 2:oe.vertexAttrib2fv(c,b);break;case 3:oe.vertexAttrib3fv(c,b);break;case 4:oe.vertexAttrib4fv(c,b);break;default:oe.vertexAttrib1fv(c,b)}}}}De.disableUnusedAttributes()}function p(){et||(m(),et=!0)}function g(){et=!1}function m(){var e=Je.getDevice();e&&e.isPresenting?e.requestAnimationFrame(y):window.requestAnimationFrame(y)}function y(e){!1!==et&&(tt(e),m())}function w(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)Y.pushLight(e),e.castShadow&&Y.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!Se.intersectsSprite(e)||Y.pushSprite(e);else if(e.isImmediateRenderObject)n&&Oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Fe),K.push(e,null,e.material,Oe.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Se.intersectsObject(e))){n&&Oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Fe);var i=$e.update(e),r=e.material;if(Array.isArray(r))for(var o=i.groups,s=0,a=o.length;s<a;s++){var c=o[s],l=r[c.materialIndex];l&&l.visible&&K.push(e,i,l,Oe.z,c)}else r.visible&&K.push(e,i,r,Oe.z,null)}for(var u=e.children,s=0,a=u.length;s<a;s++)w(u[s],t,n)}}function _(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var s=e[r],a=s.object,c=s.geometry,l=void 0===i?s.material:i,u=s.group;if(n.isArrayCamera){ge=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(a.layers.test(p.layers)){var g=p.bounds,m=g.x*we,v=g.y*_e,y=g.z*we,b=g.w*_e;De.viewport(me.set(m,v,y,b).multiplyScalar(xe)),x(a,t,p,c,l,u)}}}else ge=null,x(a,t,n,c,l,u)}}function x(e,t,n,i,r,o){if(e.onBeforeRender(ce,t,n,i,r,o),Y=We.get(t,ge||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var s=e.isMesh&&e.matrixWorld.determinant()<0;De.setMaterial(r,s);var a=A(n,t.fog,r,e);fe="",h(e,a,r)}else ce.renderBufferDirect(n,t.fog,i,r,e,o);e.onAfterRender(ce,t,n,i,r,o),Y=We.get(t,ge||n)}function E(e,t,n){var i=Ie.get(e),r=Y.state.lights,o=Y.state.shadowsArray,a=He.getParameters(e,r.state,o,t,Me.numPlanes,Me.numIntersection,n),c=He.getProgramCode(e,a),u=i.program,h=!0;if(void 0===u)e.addEventListener("dispose",s);else if(u.code!==c)l(e);else if(i.lightsHash!==r.state.hash)Ie.update(e,"lightsHash",r.state.hash),h=!1;else{if(void 0!==a.shaderID)return;h=!1}if(h){if(a.shaderID){var d=Dc[a.shaderID];i.shader={name:e.type,uniforms:Pc.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,ce),u=He.acquireProgram(e,i.shader,a,c),i.program=u,e.program=u}var f=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<ce.maxMorphTargets;p++)f["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<ce.maxMorphNormals;p++)f["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var g=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=Me.numPlanes,i.numIntersection=Me.numIntersection,g.clippingPlanes=Me.uniform),i.fog=t,i.lightsHash=r.state.hash,e.lights&&(g.ambientLightColor.value=r.state.ambient,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),v=ze.seqWithValue(m.seq,g);i.uniformsList=v}function A(e,t,n,i){be=0;var r=Ie.get(n),o=Y.state.lights;if(ke&&(Te||e!==pe)){var s=e===pe&&n.id===de;Me.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,s)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Me.numPlanes&&r.numIntersection===Me.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(E(n,t,i),n.needsUpdate=!1);var a=!1,c=!1,l=!1,u=r.program,h=u.getUniforms(),d=r.shader.uniforms;if(De.useProgram(u.program)&&(a=!0,c=!0,l=!0),n.id!==de&&(de=n.id,c=!0),a||e!==pe){if(h.setValue(oe,"projectionMatrix",e.projectionMatrix),Re.logarithmicDepthBuffer&&h.setValue(oe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),pe!==(ge||e)&&(pe=ge||e,c=!0,l=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(oe,Oe.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(oe,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){h.setOptional(oe,i,"bindMatrix"),h.setOptional(oe,i,"bindMatrixInverse");var g=i.skeleton;if(g){var m=g.bones;if(Re.floatVertexTextures){if(void 0===g.boneTexture){var v=Math.sqrt(4*m.length);v=Tc.ceilPowerOfTwo(v),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(g.boneMatrices);var b=new f(y,v,v,Pa,Aa);b.needsUpdate=!0,g.boneMatrices=y,g.boneTexture=b,g.boneTextureSize=v}h.setValue(oe,"boneTexture",g.boneTexture),h.setValue(oe,"boneTextureSize",g.boneTextureSize)}else h.setOptional(oe,g,"boneMatrices")}}return c&&(h.setValue(oe,"toneMappingExposure",ce.toneMappingExposure),h.setValue(oe,"toneMappingWhitePoint",ce.toneMappingWhitePoint),n.lights&&N(d,l),t&&n.fog&&T(d,t),n.isMeshBasicMaterial?C(d,n):n.isMeshLambertMaterial?(C(d,n),F(d,n)):n.isMeshPhongMaterial?(C(d,n),n.isMeshToonMaterial?P(d,n):O(d,n)):n.isMeshStandardMaterial?(C(d,n),n.isMeshPhysicalMaterial?R(d,n):L(d,n)):n.isMeshDepthMaterial?(C(d,n),D(d,n)):n.isMeshDistanceMaterial?(C(d,n),B(d,n)):n.isMeshNormalMaterial?(C(d,n),I(d,n)):n.isLineBasicMaterial?(S(d,n),n.isLineDashedMaterial&&M(d,n)):n.isPointsMaterial?k(d,n):n.isShadowMaterial&&(d.color.value=n.color,d.opacity.value=n.opacity),void 0!==d.ltc_1&&(d.ltc_1.value=Rc.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=Rc.LTC_2),ze.upload(oe,r.uniformsList,d,ce)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ze.upload(oe,r.uniformsList,d,ce),n.uniformsNeedUpdate=!1),h.setValue(oe,"modelViewMatrix",i.modelViewMatrix),h.setValue(oe,"normalMatrix",i.normalMatrix),h.setValue(oe,"modelMatrix",i.matrixWorld),u}function C(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=Ie.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var i=n.offset,r=n.repeat,o=n.rotation,s=n.center;n.matrix.setUvTransform(i.x,i.y,r.x,r.y,o,s.x,s.y)}e.uvTransform.value.copy(n.matrix)}}function S(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function M(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function k(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*xe,e.scale.value=.5*_e,e.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var n=t.map.offset,i=t.map.repeat,r=t.map.rotation,o=t.map.center;t.map.matrix.setUvTransform(n.x,n.y,i.x,i.y,r,o.x,o.y)}e.uvTransform.value.copy(t.map.matrix)}}function T(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function F(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function O(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function P(e,t){O(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function L(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function R(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,L(e,t)}function D(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function B(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function I(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function N(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function j(){var e=be;return e>=Re.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Re.maxTextures),be+=1,e}console.log("THREE.WebGLRenderer",Jo),e=e||{};var U=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),$=void 0!==e.context?e.context:null,z=void 0!==e.alpha&&e.alpha,H=void 0===e.depth||e.depth,V=void 0===e.stencil||e.stencil,W=void 0!==e.antialias&&e.antialias,G=void 0===e.premultipliedAlpha||e.premultipliedAlpha,q=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,X=void 0!==e.powerPreference?e.powerPreference:"default",K=null,Y=null;this.domElement=U,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Zs,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var oe,ce=this,le=!1,ue=null,he=null,de=-1,fe="",pe=null,ge=null,me=new u,ve=new u,ye=null,be=0,we=U.width,_e=U.height,xe=1,Ee=new u(0,0,we,_e),Ae=new u(0,0,we,_e),Ce=!1,Se=new v,Me=new ee,ke=!1,Te=!1,Fe=new o,Oe=new a;try{var Pe={alpha:z,depth:H,stencil:V,antialias:W,premultipliedAlpha:G,preserveDrawingBuffer:q,powerPreference:X};if(U.addEventListener("webglcontextlost",i,!1),U.addEventListener("webglcontextrestored",r,!1),null===(oe=$||U.getContext("webgl",Pe)||U.getContext("experimental-webgl",Pe)))throw null!==U.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===oe.getShaderPrecisionFormat&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var Le,Re,De,Be,Ie,Ne,je,Ue,$e,He,Ve,We,Ge,qe,Xe,Ke,Ye,Ze;n();var Je=new At(ce);this.vr=Je;var Qe=new mt(ce,$e,Re.maxTextureSize);this.shadowMap=Qe,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){var e=Le.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Le.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return xe},this.setPixelRatio=function(e){void 0!==e&&(xe=e,this.setSize(we,_e,!1))},this.getSize=function(){return{width:we,height:_e}},this.setSize=function(e,t,n){var i=Je.getDevice();if(i&&i.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");we=e,_e=t,U.width=e*xe,U.height=t*xe,!1!==n&&(U.style.width=e+"px",U.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(){return{width:we*xe,height:_e*xe}},this.setDrawingBufferSize=function(e,t,n){we=e,_e=t,xe=n,U.width=e*n,U.height=t*n,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return me},this.setViewport=function(e,t,n,i){Ee.set(e,_e-t-i,n,i),De.viewport(me.copy(Ee).multiplyScalar(xe))},this.setScissor=function(e,t,n,i){Ae.set(e,_e-t-i,n,i),De.scissor(ve.copy(Ae).multiplyScalar(xe))},this.setScissorTest=function(e){De.setScissorTest(Ce=e)},this.getClearColor=function(){return Ge.getClearColor()},this.setClearColor=function(){Ge.setClearColor.apply(Ge,arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha.apply(Ge,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=oe.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=oe.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=oe.STENCIL_BUFFER_BIT),oe.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.dispose=function(){U.removeEventListener("webglcontextlost",i,!1),U.removeEventListener("webglcontextrestored",r,!1),Ve.dispose(),We.dispose(),Ie.dispose(),$e.dispose(),Je.dispose(),g()},this.renderBufferImmediate=function(e,t,n){De.initAttributes();var i=Ie.get(e);e.hasPositions&&!i.position&&(i.position=oe.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=oe.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=oe.createBuffer()),e.hasColors&&!i.color&&(i.color=oe.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(oe.bindBuffer(oe.ARRAY_BUFFER,i.position),oe.bufferData(oe.ARRAY_BUFFER,e.positionArray,oe.DYNAMIC_DRAW),De.enableAttribute(r.position),oe.vertexAttribPointer(r.position,3,oe.FLOAT,!1,0,0)),e.hasNormals){if(oe.bindBuffer(oe.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,s=3*e.count;o<s;o+=9){var a=e.normalArray,c=(a[o+0]+a[o+3]+a[o+6])/3,l=(a[o+1]+a[o+4]+a[o+7])/3,u=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=c,a[o+1]=l,a[o+2]=u,a[o+3]=c,a[o+4]=l,a[o+5]=u,a[o+6]=c,a[o+7]=l,a[o+8]=u}oe.bufferData(oe.ARRAY_BUFFER,e.normalArray,oe.DYNAMIC_DRAW),De.enableAttribute(r.normal),oe.vertexAttribPointer(r.normal,3,oe.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(oe.bindBuffer(oe.ARRAY_BUFFER,i.uv),oe.bufferData(oe.ARRAY_BUFFER,e.uvArray,oe.DYNAMIC_DRAW),De.enableAttribute(r.uv),oe.vertexAttribPointer(r.uv,2,oe.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==ps&&(oe.bindBuffer(oe.ARRAY_BUFFER,i.color),oe.bufferData(oe.ARRAY_BUFFER,e.colorArray,oe.DYNAMIC_DRAW),De.enableAttribute(r.color),oe.vertexAttribPointer(r.color,3,oe.FLOAT,!1,0,0)),De.disableUnusedAttributes(),oe.drawArrays(oe.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,i,r,o,s){var a=o.isMesh&&o.matrixWorld.determinant()<0;De.setMaterial(r,a);var c=A(e,n,r,o),l=i.id+"_"+c.id+"_"+(!0===r.wireframe),u=!1;l!==fe&&(fe=l,u=!0),o.morphTargetInfluences&&(qe.update(o,i,r,c),u=!0);var h=i.index,f=i.attributes.position,p=1;!0===r.wireframe&&(h=Ue.getWireframeAttribute(i),p=2);var g,m=Xe;null!==h&&(g=je.get(h),m=Ke,m.setIndex(g)),u&&(d(r,c,i),null!==h&&oe.bindBuffer(oe.ELEMENT_ARRAY_BUFFER,g.buffer));var v=1/0;null!==h?v=h.count:void 0!==f&&(v=f.count);var y=i.drawRange.start*p,b=i.drawRange.count*p,w=null!==s?s.start*p:0,_=null!==s?s.count*p:1/0,x=Math.max(y,w),E=Math.min(v,y+b,w+_)-1,C=Math.max(0,E-x+1);if(0!==C){if(o.isMesh)if(!0===r.wireframe)De.setLineWidth(r.wireframeLinewidth*t()),m.setMode(oe.LINES);else switch(o.drawMode){case mc:m.setMode(oe.TRIANGLES);break;case vc:m.setMode(oe.TRIANGLE_STRIP);break;case yc:m.setMode(oe.TRIANGLE_FAN)}else if(o.isLine){var S=r.linewidth;void 0===S&&(S=1),De.setLineWidth(S*t()),o.isLineSegments?m.setMode(oe.LINES):o.isLineLoop?m.setMode(oe.LINE_LOOP):m.setMode(oe.LINE_STRIP)}else o.isPoints&&m.setMode(oe.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&m.renderInstances(i,x,C):m.render(x,C)}},this.compile=function(e,t){Y=We.get(e,t),Y.init(),e.traverse(function(e){e.isLight&&(Y.pushLight(e),e.castShadow&&Y.pushShadow(e))}),Y.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)E(t.material[n],e.fog,t);else E(t.material,e.fog,t)})};var et=!1,tt=null;this.animate=function(e){tt=e,null!==tt?p():g()},this.render=function(e,t,n,i){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!le){fe="",de=-1,pe=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Je.enabled&&(t=Je.getCamera(t)),Y=We.get(e,t),Y.init(),e.onBeforeRender(ce,e,t,n),Fe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Se.setFromMatrix(Fe),Te=this.localClippingEnabled,ke=Me.init(this.clippingPlanes,Te,t),K=Ve.get(e,t),K.init(),w(e,t,ce.sortObjects),!0===ce.sortObjects&&K.sort(),ke&&Me.beginShadows();var r=Y.state.shadowsArray;Qe.render(r,e,t),Y.setupLights(t),ke&&Me.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),Ge.render(K,e,t,i);var o=K.opaque,s=K.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;o.length&&_(o,e,t,a),s.length&&_(s,e,t,a)}else o.length&&_(o,e,t),s.length&&_(s,e,t);var c=Y.state.spritesArray;Ye.render(c,e,t),n&&Ne.updateRenderTargetMipmap(n),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1),e.onAfterRender(ce,e,t),Je.enabled&&Je.submitFrame(),K=null,Y=null}},this.allocTextureUnit=j,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),Ne.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Ne.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Ne.setTextureCube(t,n):Ne.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return ue},this.setRenderTarget=function(e){ue=e,e&&void 0===Ie.get(e).__webglFramebuffer&&Ne.setupRenderTarget(e);var t=null,n=!1;if(e){var i=Ie.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,me.copy(e.viewport),ve.copy(e.scissor),ye=e.scissorTest}else me.copy(Ee).multiplyScalar(xe),ve.copy(Ae).multiplyScalar(xe),ye=Ce;if(he!==t&&(oe.bindFramebuffer(oe.FRAMEBUFFER,t),he=t),De.viewport(me),De.scissor(ve),De.setScissorTest(ye),n){var r=Ie.get(e.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Ie.get(e).__webglFramebuffer;if(s){var a=!1;s!==he&&(oe.bindFramebuffer(oe.FRAMEBUFFER,s),a=!0);try{var c=e.texture,l=c.format,u=c.type;if(l!==Pa&&Ze.convert(l)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(u!==ya&&Ze.convert(u)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_TYPE)&&(u!==Aa||!Le.get("OES_texture_float")&&!Le.get("WEBGL_color_buffer_float"))&&(u!==Ca||!Le.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");oe.checkFramebufferStatus(oe.FRAMEBUFFER)===oe.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&oe.readPixels(t,n,i,r,Ze.convert(l),Ze.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&oe.bindFramebuffer(oe.FRAMEBUFFER,he)}}},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,o=Ze.convert(t.format);this.setTexture2D(t,0),oe.copyTexImage2D(oe.TEXTURE_2D,n||0,o,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,o=t.image.height,s=Ze.convert(n.format),a=Ze.convert(n.type),c=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),oe.texSubImage2D(oe.TEXTURE_2D,i||0,e.x,e.y,r,o,s,a,c)}}function St(e,t){this.name="",this.color=new y(e),this.density=void 0!==t?t:25e-5}function Mt(e,t,n){this.name="",this.color=new y(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function kt(){x.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Tt(e){V.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Ft(e){x.call(this),this.type="Sprite",this.material=void 0!==e?e:new Tt,this.center=new r(.5,.5)}function Ot(){x.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Pt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new o)}}function Lt(){x.call(this),this.type="Bone"}function Rt(e,t){Y.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=this.initBones(),i=new Pt(n);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function Dt(e){V.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Bt(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new It(e,t);x.call(this),this.type="Line",this.geometry=void 0!==e?e:new j,this.material=void 0!==t?t:new Dt({color:16777215*Math.random()})}function It(e,t){Bt.call(this,e,t),this.type="LineSegments"}function Nt(e,t){Bt.call(this,e,t),this.type="LineLoop"}function jt(e){V.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Ut(e,t){x.call(this),this.type="Points",this.geometry=void 0!==e?e:new j,this.material=void 0!==t?t:new jt({color:16777215*Math.random()})}function $t(){x.call(this),this.type="Group"}function zt(e,t,n,i,r,o,s,a,c){l.call(this,e,t,n,i,r,o,s,a,c),this.generateMipmaps=!1}function Ht(e,t,n,i,r,o,s,a,c,u,h,d){l.call(this,null,o,s,a,c,u,i,r,h,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Vt(e,t,n,i,r,o,s,a,c,u){if((u=void 0!==u?u:Ba)!==Ba&&u!==Ia)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ba&&(n=_a),void 0===n&&u===Ia&&(n=Ta),l.call(this,null,i,r,o,s,a,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==s?s:da,this.minFilter=void 0!==a?a:da,this.flipY=!1,this.generateMipmaps=!1}function Wt(e){j.call(this),this.type="WireframeGeometry";var t,n,i,r,o,s,c,l,u,h,d=[],f=[0,0],p={},g=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var v=m[t];for(n=0;n<3;n++)c=v[g[n]],l=v[g[(n+1)%3]],f[0]=Math.min(c,l),f[1]=Math.max(c,l),u=f[0]+","+f[1],void 0===p[u]&&(p[u]={index1:f[0],index2:f[1]})}for(u in p)s=p[u],h=e.vertices[s.index1],d.push(h.x,h.y,h.z),h=e.vertices[s.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,b,w,_,x,E,A,C;if(h=new a,null!==e.index){for(y=e.attributes.position,b=e.index,w=e.groups,0===w.length&&(w=[{start:0,count:b.count,materialIndex:0}]),r=0,o=w.length;r<o;++r)for(_=w[r],x=_.start,E=_.count,t=x,i=x+E;t<i;t+=3)for(n=0;n<3;n++)c=b.getX(t+n),l=b.getX(t+(n+1)%3),f[0]=Math.min(c,l),f[1]=Math.max(c,l),u=f[0]+","+f[1],void 0===p[u]&&(p[u]={index1:f[0],index2:f[1]});for(u in p)s=p[u],h.fromBufferAttribute(y,s.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,s.index2),d.push(h.x,h.y,h.z)}else for(y=e.attributes.position,t=0,i=y.count/3;t<i;t++)for(n=0;n<3;n++)A=3*t+n,h.fromBufferAttribute(y,A),d.push(h.x,h.y,h.z),C=3*t+(n+1)%3,h.fromBufferAttribute(y,C),d.push(h.x,h.y,h.z)}this.addAttribute("position",new D(d,3))}function Gt(e,t,n){S.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new qt(e,t,n)),this.mergeVertices()}function qt(e,t,n){j.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,o=[],s=[],c=[],l=[],u=new a,h=new a,d=new a,f=new a,p=new a,g=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var v=r/t;e(v,m,h),s.push(h.x,h.y,h.z),v-1e-5>=0?(e(v-1e-5,m,d),f.subVectors(h,d)):(e(v+1e-5,m,d),f.subVectors(d,h)),m-1e-5>=0?(e(v,m-1e-5,d),p.subVectors(h,d)):(e(v,m+1e-5,d),p.subVectors(d,h)),u.crossVectors(f,p).normalize(),c.push(u.x,u.y,u.z),l.push(v,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var y=i*g+r,b=i*g+r+1,w=(i+1)*g+r+1,_=(i+1)*g+r;o.push(y,b,_),o.push(b,w,_)}this.setIndex(o),this.addAttribute("position",new D(s,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(l,2))}function Xt(e,t,n,i){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Kt(e,t,n,i)),this.mergeVertices()}function Kt(e,t,n,i){function o(e,t,n,i){var r,o,s=Math.pow(2,i),a=[];for(r=0;r<=s;r++){a[r]=[];var l=e.clone().lerp(n,r/s),u=t.clone().lerp(n,r/s),h=s-r;for(o=0;o<=h;o++)a[r][o]=0===o&&r===s?l:l.clone().lerp(u,o/h)}for(r=0;r<s;r++)for(o=0;o<2*(s-r)-1;o++){var d=Math.floor(o/2);o%2===0?(c(a[r][d+1]),c(a[r+1][d]),c(a[r][d])):(c(a[r][d+1]),c(a[r+1][d+1]),c(a[r+1][d]))}}function s(){for(var e=0;e<g.length;e+=6){var t=g[e+0],n=g[e+2],i=g[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(g[e+0]+=1),n<.2&&(g[e+2]+=1),i<.2&&(g[e+4]+=1))}}function c(e){p.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function u(){for(var e=new a,t=new a,n=new a,i=new a,o=new r,s=new r,c=new r,l=0,u=0;l<p.length;l+=9,u+=6){e.set(p[l+0],p[l+1],p[l+2]),t.set(p[l+3],p[l+4],p[l+5]),n.set(p[l+6],p[l+7],p[l+8]),o.set(g[u+0],g[u+1]),s.set(g[u+2],g[u+3]),c.set(g[u+4],g[u+5]),i.copy(e).add(t).add(n).divideScalar(3);var f=d(i);h(o,u+0,e,f),h(s,u+2,t,f),h(c,u+4,n,f)}}function h(e,t,n,i){i<0&&1===e.x&&(g[t]=e.x-1),0===n.x&&0===n.z&&(g[t]=i/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}j.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1,i=i||0;var p=[],g=[];!function(e){for(var n=new a,i=new a,r=new a,s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),o(n,i,r,e)}(i),function(e){for(var t=new a,n=0;n<p.length;n+=3)t.x=p[n+0],t.y=p[n+1],t.z=p[n+2],t.normalize().multiplyScalar(e),p[n+0]=t.x,p[n+1]=t.y,p[n+2]=t.z}(n),function(){for(var e=new a,t=0;t<p.length;t+=3){e.x=p[t+0],e.y=p[t+1],e.z=p[t+2];var n=d(e)/2/Math.PI+.5,i=f(e)/Math.PI+.5;g.push(n,1-i)}u(),s()}(),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(p.slice(),3)),this.addAttribute("uv",new D(g,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Yt(e,t){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Zt(e,t)),this.mergeVertices()}function Zt(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Kt.call(this,n,i,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Jt(e,t){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Kt.call(this,n,i,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function en(e,t){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new tn(e,t)),this.mergeVertices()}function tn(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Kt.call(this,i,r,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function nn(e,t){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new rn(e,t)),this.mergeVertices()}function rn(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Kt.call(this,r,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function on(e,t,n,i,r,o){S.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new sn(e,t,n,i,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function sn(e,t,n,i,o){function s(r){m=e.getPointAt(r/t,m);var o=u.normals[r],s=u.binormals[r];for(d=0;d<=i;d++){var a=d/i*Math.PI*2,c=Math.sin(a),l=-Math.cos(a);p.x=l*o.x+c*s.x,p.y=l*o.y+c*s.y,p.z=l*o.z+c*s.z,p.normalize(),y.push(p.x,p.y,p.z),f.x=m.x+n*p.x,f.y=m.y+n*p.y,f.z=m.z+n*p.z,v.push(f.x,f.y,f.z)}}function c(){for(d=1;d<=t;d++)for(h=1;h<=i;h++){var e=(i+1)*(d-1)+(h-1),n=(i+1)*d+(h-1),r=(i+1)*d+h,o=(i+1)*(d-1)+h;w.push(e,n,o),w.push(n,r,o)}}function l(){for(h=0;h<=t;h++)for(d=0;d<=i;d++)g.x=h/t,g.y=d/i,b.push(g.x,g.y)}j.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:o},t=t||64,n=n||1,i=i||8,o=o||!1;var u=e.computeFrenetFrames(t,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var h,d,f=new a,p=new a,g=new r,m=new a,v=[],y=[],b=[],w=[];!function(){for(h=0;h<t;h++)s(h);s(!1===o?t:0),l(),c()}(),this.setIndex(w),this.addAttribute("position",new D(v,3)),this.addAttribute("normal",new D(y,3)),this.addAttribute("uv",new D(b,2))}function an(e,t,n,i,r,o,s){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new cn(e,t,n,i,r,o)),this.mergeVertices()}function cn(e,t,n,i,r,o){function s(e,t,n,i,r){var o=Math.cos(e),s=Math.sin(e),a=n/t*e,c=Math.cos(a);r.x=i*(2+c)*.5*o,r.y=i*(2+c)*s*.5,r.z=i*Math.sin(a)*.5}j.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var c,l,u=[],h=[],d=[],f=[],p=new a,g=new a,m=new a,v=new a,y=new a,b=new a,w=new a;for(c=0;c<=n;++c){var _=c/n*r*Math.PI*2;for(s(_,r,o,e,m),s(_+.01,r,o,e,v),b.subVectors(v,m),w.addVectors(v,m),y.crossVectors(b,w),w.crossVectors(y,b),y.normalize(),w.normalize(),l=0;l<=i;++l){var x=l/i*Math.PI*2,E=-t*Math.cos(x),A=t*Math.sin(x);p.x=m.x+(E*w.x+A*y.x),p.y=m.y+(E*w.y+A*y.y),p.z=m.z+(E*w.z+A*y.z),h.push(p.x,p.y,p.z),g.subVectors(p,m).normalize(),d.push(g.x,g.y,g.z),f.push(c/n),f.push(l/i)}}for(l=1;l<=n;l++)for(c=1;c<=i;c++){var C=(i+1)*(l-1)+(c-1),S=(i+1)*l+(c-1),M=(i+1)*l+c,k=(i+1)*(l-1)+c;u.push(C,S,k),u.push(S,M,k)}this.setIndex(u),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(f,2))}function ln(e,t,n,i,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new un(e,t,n,i,r)),this.mergeVertices()}function un(e,t,n,i,r){j.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,s,c=[],l=[],u=[],h=[],d=new a,f=new a,p=new a;for(o=0;o<=n;o++)for(s=0;s<=i;s++){var g=s/i*r,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(g),f.y=(e+t*Math.cos(m))*Math.sin(g),f.z=t*Math.sin(m),l.push(f.x,f.y,f.z),d.x=e*Math.cos(g),d.y=e*Math.sin(g),p.subVectors(f,d).normalize(),u.push(p.x,p.y,p.z),h.push(s/i),h.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var v=(i+1)*o+s-1,y=(i+1)*(o-1)+s-1,b=(i+1)*(o-1)+s,w=(i+1)*o+s;c.push(v,y,w),c.push(y,b,w)}this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(h,2))}function hn(e,t,n,i,r){var o,s;if(r===Nn(e,t,n,i)>0)for(o=t;o<n;o+=i)s=Dn(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=Dn(o,e[o],e[o+1],s);return s&&Tn(s,s.next)&&(Bn(s),s=s.next),s}function dn(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Tn(i,i.next)&&0!==kn(i.prev,i,i.next))i=i.next;else{if(Bn(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function fn(e,t,n,i,r,o,s){if(e){!s&&o&&xn(e,i,r,o);for(var a,c,l=e;e.prev!==e.next;)if(a=e.prev,c=e.next,o?gn(e,i,r,o):pn(e))t.push(a.i/n),t.push(e.i/n),t.push(c.i/n),Bn(e),e=c.next,l=c.next;else if((e=c)===l){s?1===s?(e=mn(e,t,n),fn(e,t,n,i,r,o,2)):2===s&&vn(e,t,n,i,r,o):fn(dn(e),t,n,i,r,o,1);break}}}function pn(e){var t=e.prev,n=e,i=e.next;if(kn(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Sn(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&kn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function gn(e,t,n,i){var r=e.prev,o=e,s=e.next;if(kn(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,c=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,l=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=An(a,c,t,n,i),d=An(l,u,t,n,i),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Sn(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&kn(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Sn(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&kn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function mn(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!Tn(r,o)&&Fn(r,i,i.next,o)&&Pn(r,o)&&Pn(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),Bn(i),Bn(i.next),i=e=o),i=i.next}while(i!==e);return i}function vn(e,t,n,i,r,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Mn(s,a)){var c=Rn(s,a);return s=dn(s,s.next),c=dn(c,c.next),fn(s,t,n,i,r,o),void fn(c,t,n,i,r,o)}a=a.next}s=s.next}while(s!==e)}function yn(e,t,n,i){var r,o,s,a,c,l=[];for(r=0,o=t.length;r<o;r++)s=t[r]*i,a=r<o-1?t[r+1]*i:e.length,c=hn(e,s,a,i,!1),c===c.next&&(c.steiner=!0),l.push(Cn(c));for(l.sort(bn),r=0;r<l.length;r++)wn(l[r],n),n=dn(n,n.next);return n}function bn(e,t){return e.x-t.x}function wn(e,t){if(t=_n(e,t)){var n=Rn(t,e);dn(n,n.next)}}function _n(e,t){var n,i=t,r=e.x,o=e.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===s)return n.prev;var c,l=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=u&&r!==i.x&&Sn(o<h?r:s,o,u,h,o<h?s:r,o,i.x,i.y)&&((c=Math.abs(o-i.y)/(r-i.x))<d||c===d&&i.x>n.x)&&Pn(i,e)&&(n=i,d=c),i=i.next;return n}function xn(e,t,n,i){var r=e;do{null===r.z&&(r.z=An(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,En(r)}function En(e){var t,n,i,r,o,s,a,c,l=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<l&&(a++,i=i.nextZ);t++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1);return e}function An(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Cn(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Sn(e,t,n,i,r,o,s,a){return(r-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(i-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function Mn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!On(e,t)&&Pn(e,t)&&Pn(t,e)&&Ln(e,t)}function kn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Tn(e,t){return e.x===t.x&&e.y===t.y}function Fn(e,t,n,i){return!!(Tn(e,t)&&Tn(n,i)||Tn(e,i)&&Tn(n,t))||kn(e,t,n)>0!==kn(e,t,i)>0&&kn(n,i,e)>0!==kn(n,i,t)>0}function On(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Fn(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Pn(e,t){return kn(e.prev,e,e.next)<0?kn(e,t,e.next)>=0&&kn(e,e.prev,t)>=0:kn(e,t,e.prev)<0||kn(e,e.next,t)<0}function Ln(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}function Rn(e,t){var n=new In(e.i,e.x,e.y),i=new In(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Dn(e,t,n,i){var r=new In(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Bn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function In(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nn(e,t,n,i){for(var r=0,o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}function jn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Un(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function $n(e,t){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new zn(e,t)),this.mergeVertices()}function zn(e,t){"undefined"!==typeof e&&(j.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function Hn(e,t){S.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Vn(e,t)),this.mergeVertices()}function Vn(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;var i=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),zn.call(this,i,t),this.type="TextBufferGeometry"}function Wn(e,t,n,i,r,o,s){S.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Gn(e,t,n,i,r,o,s)),this.mergeVertices()}function Gn(e,t,n,i,r,o,s){j.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var c,l,u=o+s,h=0,d=[],f=new a,p=new a,g=[],m=[],v=[],y=[];for(l=0;l<=n;l++){var b=[],w=l/n;for(c=0;c<=t;c++){var _=c/t;f.x=-e*Math.cos(i+_*r)*Math.sin(o+w*s),f.y=e*Math.cos(o+w*s),f.z=e*Math.sin(i+_*r)*Math.sin(o+w*s),m.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),v.push(p.x,p.y,p.z),y.push(_,1-w),b.push(h++)}d.push(b)}for(l=0;l<n;l++)for(c=0;c<t;c++){var x=d[l][c+1],E=d[l][c],A=d[l+1][c],C=d[l+1][c+1];(0!==l||o>0)&&g.push(x,E,C),(l!==n-1||u<Math.PI)&&g.push(E,A,C)}this.setIndex(g),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(y,2))}function qn(e,t,n,i,r,o){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Xn(e,t,n,i,r,o)),this.mergeVertices()}function Xn(e,t,n,i,o,s){j.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:s},e=e||.5,t=t||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var c,l,u,h=[],d=[],f=[],p=[],g=e,m=(t-e)/i,v=new a,y=new r;for(l=0;l<=i;l++){for(u=0;u<=n;u++)c=o+u/n*s,v.x=g*Math.cos(c),v.y=g*Math.sin(c),d.push(v.x,v.y,v.z),f.push(0,0,1),y.x=(v.x/t+1)/2,y.y=(v.y/t+1)/2,p.push(y.x,y.y);g+=m}for(l=0;l<i;l++){var b=l*(n+1);for(u=0;u<n;u++){c=u+b;var w=c,_=c+n+1,x=c+n+2,E=c+1;h.push(w,_,E),h.push(_,x,E)}}this.setIndex(h),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(p,2))}function Kn(e,t,n,i){S.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Yn(e,t,n,i)),this.mergeVertices()}function Yn(e,t,n,i){j.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Tc.clamp(i,0,2*Math.PI);var o,s,c,l=[],u=[],h=[],d=1/t,f=new a,p=new r;for(s=0;s<=t;s++){var g=n+s*d*i,m=Math.sin(g),v=Math.cos(g);for(c=0;c<=e.length-1;c++)f.x=e[c].x*m,f.y=e[c].y,f.z=e[c].x*v,u.push(f.x,f.y,f.z),p.x=s/t,p.y=c/(e.length-1),h.push(p.x,p.y)}for(s=0;s<t;s++)for(c=0;c<e.length-1;c++){o=c+s*e.length;var y=o,b=o+e.length,w=o+e.length+1,_=o+1;l.push(y,b,_),l.push(b,w,_)}if(this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("uv",new D(h,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,E=new a,A=new a,C=new a;for(o=t*e.length*3,s=0,c=0;s<e.length;s++,c+=3)E.x=x[c+0],E.y=x[c+1],E.z=x[c+2],A.x=x[o+c+0],A.y=x[o+c+1],A.z=x[o+c+2],C.addVectors(E,A).normalize(),x[c+0]=x[o+c+0]=C.x,x[c+1]=x[o+c+1]=C.y,x[c+2]=x[o+c+2]=C.z}}function Zn(e,t){S.call(this),this.type="ShapeGeometry","object"===("undefined"===typeof t?"undefined":Zo(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Jn(e,t)),this.mergeVertices()}function Jn(e,t){function n(e){var n,a,l,u=r.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===Yc.isClockWise(d))for(d=d.reverse(),n=0,a=f.length;n<a;n++)l=f[n],!0===Yc.isClockWise(l)&&(f[n]=l.reverse());var p=Yc.triangulateShape(d,f);for(n=0,a=f.length;n<a;n++)l=f[n],d=d.concat(l);for(n=0,a=d.length;n<a;n++){var g=d[n];r.push(g.x,g.y,0),o.push(0,0,1),s.push(g.x,g.y)}for(n=0,a=p.length;n<a;n++){var m=p[n],v=m[0]+u,y=m[1]+u,b=m[2]+u;i.push(v,y,b),c+=3}}j.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var i=[],r=[],o=[],s=[],a=0,c=0;if(!1===Array.isArray(e))n(e);else for(var l=0;l<e.length;l++)n(e[l]),this.addGroup(a,c,l),a+=c,c=0;this.setIndex(i),this.addAttribute("position",new D(r,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(s,2))}function Qn(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function ei(e,t){j.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,o,s=[],a=Math.cos(Tc.DEG2RAD*t),c=[0,0],l={},u=["a","b","c"];e.isBufferGeometry?(o=new S,o.fromBufferGeometry(e)):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,f=0,p=d.length;f<p;f++)for(var g=d[f],m=0;m<3;m++)n=g[u[m]],i=g[u[(m+1)%3]],c[0]=Math.min(n,i),c[1]=Math.max(n,i),r=c[0]+","+c[1],void 0===l[r]?l[r]={index1:c[0],index2:c[1],face1:f,face2:void 0}:l[r].face2=f;for(r in l){var v=l[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=a){var y=h[v.index1];s.push(y.x,y.y,y.z),y=h[v.index2],s.push(y.x,y.y,y.z)}}this.addAttribute("position",new D(s,3))}function ti(e,t,n,i,r,o,s,a){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new ni(e,t,n,i,r,o,s,a)),this.mergeVertices()}function ni(e,t,n,i,o,s,c,l){function u(n){var o,s,u,v=new r,w=new a,_=0,x=!0===n?e:t,E=!0===n?1:-1;for(s=m,o=1;o<=i;o++)f.push(0,y*E,0),p.push(0,E,0),g.push(.5,.5),m++;for(u=m,o=0;o<=i;o++){var A=o/i,C=A*l+c,S=Math.cos(C),M=Math.sin(C);w.x=x*M,w.y=y*E,w.z=x*S,f.push(w.x,w.y,w.z),p.push(0,E,0),v.x=.5*S+.5,v.y=.5*M*E+.5,g.push(v.x,v.y),m++}for(o=0;o<i;o++){var k=s+o,T=u+o;!0===n?d.push(T,T+1,k):d.push(T+1,T,k),_+=3}h.addGroup(b,_,!0===n?1:2),b+=_}j.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:c,thetaLength:l};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,o=Math.floor(o)||1,s=void 0!==s&&s,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI;var d=[],f=[],p=[],g=[],m=0,v=[],y=n/2,b=0;!function(){var r,s,u=new a,w=new a,_=0,x=(t-e)/n;for(s=0;s<=o;s++){var E=[],A=s/o,C=A*(t-e)+e;for(r=0;r<=i;r++){var S=r/i,M=S*l+c,k=Math.sin(M),T=Math.cos(M);w.x=C*k,w.y=-A*n+y,w.z=C*T,f.push(w.x,w.y,w.z),u.set(k,x,T).normalize(),p.push(u.x,u.y,u.z),g.push(S,1-A),E.push(m++)}v.push(E)}for(r=0;r<i;r++)for(s=0;s<o;s++){var F=v[s][r],O=v[s+1][r],P=v[s+1][r+1],L=v[s][r+1];d.push(F,O,L),d.push(O,P,L),_+=6}h.addGroup(b,_,0),b+=_}(),!1===s&&(e>0&&u(!0),t>0&&u(!1)),this.setIndex(d),this.addAttribute("position",new D(f,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(g,2))}function ii(e,t,n,i,r,o,s){ti.call(this,0,e,t,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function ri(e,t,n,i,r,o,s){ni.call(this,0,e,t,n,i,r,o,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function oi(e,t,n,i){S.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new si(e,t,n,i)),this.mergeVertices()}function si(e,t,n,i){j.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var o,s,c=[],l=[],u=[],h=[],d=new a,f=new r;for(l.push(0,0,0),u.push(0,0,1),h.push(.5,.5),s=0,o=3;s<=t;s++,o+=3){var p=n+s/t*i;d.x=e*Math.cos(p),d.y=e*Math.sin(p),l.push(d.x,d.y,d.z),u.push(0,0,1),f.x=(l[o]/e+1)/2,f.y=(l[o+1]/e+1)/2,h.push(f.x,f.y)}for(o=1;o<=t;o++)c.push(o,o+1,0);this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(h,2))}function ai(e){V.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(e)}function ci(e){G.call(this,e),this.type="RawShaderMaterial"}function li(e){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ui(e){li.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function hi(e){V.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function di(e){hi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function fi(e){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function pi(e){V.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gi(e){Dt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function mi(e,t,n){var i=this,r=!1,o=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,s),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this}}function vi(e){this.manager=void 0!==e?e:el}function yi(e){this.manager=void 0!==e?e:el,this._parser=null}function bi(e){this.manager=void 0!==e?e:el,this._parser=null}function wi(e){this.manager=void 0!==e?e:el}function _i(e){this.manager=void 0!==e?e:el}function xi(e){this.manager=void 0!==e?e:el}function Ei(){this.type="Curve",this.arcLengthDivisions=200}function Ai(e,t,n,i,r,o,s,a){Ei.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function Ci(e,t,n,i,r,o){Ai.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function Si(){function e(e,o,s,a){t=e,n=s,i=-3*e+3*o-2*s-a,r=2*e-2*o+s+a}var t=0,n=0,i=0,r=0;return{initCatmullRom:function(t,n,i,r,o){e(n,i,o*(i-t),o*(r-n))},initNonuniformCatmullRom:function(t,n,i,r,o,s,a){var c=(n-t)/o-(i-t)/(o+s)+(i-n)/s,l=(i-n)/s-(r-n)/(s+a)+(r-i)/a;c*=s,l*=s,e(n,i,c,l)},calc:function(e){var o=e*e;return t+n*e+i*o+r*(o*e)}}}function Mi(e,t,n,i){Ei.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function ki(e,t,n,i,r){var o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function Ti(e,t){var n=1-e;return n*n*t}function Fi(e,t){return 2*(1-e)*e*t}function Oi(e,t){return e*e*t}function Pi(e,t,n,i){return Ti(e,t)+Fi(e,n)+Oi(e,i)}function Li(e,t){var n=1-e;return n*n*n*t}function Ri(e,t){var n=1-e;return 3*n*n*e*t}function Di(e,t){return 3*(1-e)*e*e*t}function Bi(e,t){return e*e*e*t}function Ii(e,t,n,i,r){return Li(e,t)+Ri(e,n)+Di(e,i)+Bi(e,r)}function Ni(e,t,n,i){Ei.call(this),this.type="CubicBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r,this.v3=i||new r}function ji(e,t,n,i){Ei.call(this),this.type="CubicBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a,this.v3=i||new a}function Ui(e,t){Ei.call(this),this.type="LineCurve",this.v1=e||new r,this.v2=t||new r}function $i(e,t){Ei.call(this),this.type="LineCurve3",this.v1=e||new a,this.v2=t||new a}function zi(e,t,n){Ei.call(this),this.type="QuadraticBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r}function Hi(e,t,n){Ei.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a}function Vi(e){Ei.call(this),this.type="SplineCurve",this.points=e||[]}function Wi(){Ei.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Gi(e){Wi.call(this),this.type="Path",this.currentPoint=new r,e&&this.setFromPoints(e)}function qi(e){Gi.call(this,e),this.uuid=Tc.generateUUID(),this.type="Shape",this.holes=[]}function Xi(e,t){x.call(this),this.type="Light",this.color=new y(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ki(e,t,n){Xi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(x.DefaultUp),this.updateMatrix(),this.groundColor=new y(t)}function Yi(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new o}function Zi(){Yi.call(this,new xt(50,1,.5,500))}function Ji(e,t,n,i,r,o){Xi.call(this,e,t),this.type="SpotLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Zi}function Qi(e,t,n,i){Xi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Yi(new xt(90,1,.5,500))}function er(){Yi.call(this,new A(-5,5,5,-5,.5,500))}function tr(e,t){Xi.call(this,e,t),this.type="DirectionalLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,this.shadow=new er}function nr(e,t){Xi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ir(e,t,n,i){Xi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function rr(e,t,n,i){pr.call(this,e,t,n,i)}function or(e,t,n){pr.call(this,e,t,n)}function sr(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ar(e,t,n,i){sr.call(this,e,t,n,i)}function cr(e,t,n,i){pr.call(this,e,t,n,i)}function lr(e,t,n,i){pr.call(this,e,t,n,i)}function ur(e,t,n,i){pr.call(this,e,t,n,i)}function hr(e,t,n,i){sr.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function dr(e,t,n,i){sr.call(this,e,t,n,i)}function fr(e,t,n,i){sr.call(this,e,t,n,i)}function pr(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=al.convertArray(t,this.TimeBufferType),this.values=al.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function gr(e,t,n,i){pr.call(this,e,t,n,i)}function mr(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Tc.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function vr(e){this.manager=void 0!==e?e:el,this.textures={}}function yr(e){this.manager=void 0!==e?e:el}function br(){}function wr(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:el,this.withCredentials=!1}function _r(e){this.manager=void 0!==e?e:el,this.texturePath=""}function xr(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:el,this.options=void 0}function Er(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Ar(e){this.type="Font",this.data=e}function Cr(e,t,n,i){for(var r=String(e).split(""),o=t/i.resolution,s=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,a=[],c=0,l=0,u=0;u<r.length;u++){var h=r[u];if("\n"===h)c=0,l-=s;else{var d=Sr(h,n,o,c,l,i);c+=d.offsetX,a.push(d.path)}}return a}function Sr(e,t,n,i,r,o){var s=o.glyphs[e]||o.glyphs["?"];if(s){var a,c,l,u,h,d,f,p,g=new Er;if(s.o)for(var m=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),v=0,y=m.length;v<y;){var b=m[v++];switch(b){case"m":a=m[v++]*n+i,c=m[v++]*n+r,g.moveTo(a,c);break;case"l":a=m[v++]*n+i,c=m[v++]*n+r,g.lineTo(a,c);break;case"q":l=m[v++]*n+i,u=m[v++]*n+r,h=m[v++]*n+i,d=m[v++]*n+r,g.quadraticCurveTo(h,d,l,u);break;case"b":l=m[v++]*n+i,u=m[v++]*n+r,h=m[v++]*n+i,d=m[v++]*n+r,f=m[v++]*n+i,p=m[v++]*n+r,g.bezierCurveTo(h,d,f,p,l,u)}}return{offsetX:s.ha*n,path:g}}}function Mr(e){this.manager=void 0!==e?e:el}function kr(e){this.manager=void 0!==e?e:el}function Tr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Fr(e,t,n){x.call(this),this.type="CubeCamera";var i=new xt(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new a(1,0,0)),this.add(i);var r=new xt(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new a(-1,0,0)),this.add(r);var o=new xt(90,1,e,t);o.up.set(0,0,1),o.lookAt(new a(0,1,0)),this.add(o);var s=new xt(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new a(0,-1,0)),this.add(s);var c=new xt(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new a(0,0,1)),this.add(c);var l=new xt(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new a(0,0,-1)),this.add(l);var u={format:Oa,magFilter:ga,minFilter:ga};this.renderTarget=new d(n,n,u),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,s,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=a,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function Or(){x.call(this),this.type="AudioListener",this.context=pl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Pr(e){x.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Lr(e){Pr.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Rr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Dr(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Br(e,t,n){var i=n||Ir.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Ir(e,t,n){this.path=t,this.parsedPath=n||Ir.parseTrackName(t),this.node=Ir.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Nr(){this.uuid=Tc.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function jr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,o=new Array(r),s={endingStart:fc,endingEnd:fc},a=0;a!==r;++a){var c=i[a].createInterpolant(null);o[a]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cc,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ur(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function $r(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function zr(){j.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Hr(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Vr(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wr(e,t,n){Vr.call(this,e,t),this.meshPerAttribute=n||1}function Gr(e,t,n){M.call(this,e,t),this.meshPerAttribute=n||1}function qr(e,t,n,i){this.ray=new q(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Xr(e,t){return e.distance-t.distance}function Kr(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,o=0,s=r.length;o<s;o++)Kr(r[o],t,n,!0)}function Yr(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Zr(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Jr(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Qr(e,t){this.min=void 0!==e?e:new r(1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0)}function eo(e){x.call(this),this.material=e,this.render=function(){}}function to(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var c=new j,l=new D(2*s*3,3);c.addAttribute("position",l),It.call(this,c,new Dt({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function no(e,t){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new j,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var s=r/32*Math.PI*2,a=o/32*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}n.addAttribute("position",new D(i,3));var c=new Dt({fog:!1});this.cone=new It(n,c),this.add(this.cone),this.update()}function io(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,io(e.children[n]));return t}function ro(e){for(var t=io(e),n=new j,i=[],r=[],o=new y(0,0,1),s=new y(0,1,0),a=0;a<t.length;a++){var c=t[a];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}n.addAttribute("position",new D(i,3)),n.addAttribute("color",new D(r,3));var l=new Dt({vertexColors:ms,depthTest:!1,depthWrite:!1,transparent:!0});It.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function oo(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Gn(t,4,2),r=new W({wireframe:!0,fog:!1});Y.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function so(e,t){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Dt({fog:!1}),i=new j;i.addAttribute("position",new M(new Float32Array(15),3)),this.line=new Bt(i,n),this.add(this.line),this.update()}function ao(e,t,n){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Qt(t);i.rotateY(.5*Math.PI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ms);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new M(o,3)),this.add(new Y(i,this.material)),this.update()}function co(e,t,n,i){e=e||10,t=t||10,n=new y(void 0!==n?n:4473924),i=new y(void 0!==i?i:8947848);for(var r=t/2,o=e/t,s=e/2,a=[],c=[],l=0,u=0,h=-s;l<=t;l++,h+=o){a.push(-s,0,h,s,0,h),a.push(h,0,-s,h,0,s);var d=l===r?n:i;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var f=new j;f.addAttribute("position",new D(a,3)),f.addAttribute("color",new D(c,3));var p=new Dt({vertexColors:ms});It.call(this,f,p)}function lo(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new y(void 0!==r?r:4473924),o=new y(void 0!==o?o:8947848);var s,a,c,l,u,h,d,f=[],p=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),s=Math.sin(c)*e,a=Math.cos(c)*e,f.push(0,0,0),f.push(s,0,a),d=1&l?r:o,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?r:o,h=e-e/n*l,u=0;u<i;u++)c=u/i*(2*Math.PI),s=Math.sin(c)*h,a=Math.cos(c)*h,f.push(s,0,a),p.push(d.r,d.g,d.b),c=(u+1)/i*(2*Math.PI),s=Math.sin(c)*h,a=Math.cos(c)*h,f.push(s,0,a),p.push(d.r,d.g,d.b);var g=new j;g.addAttribute("position",new D(f,3)),g.addAttribute("color",new D(p,3));var m=new Dt({vertexColors:ms});It.call(this,g,m)}function uo(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new j,l=new D(2*s*3,3);c.addAttribute("position",l),It.call(this,c,new Dt({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ho(e,t,n){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new j;i.addAttribute("position",new D([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new Dt({fog:!1});this.lightPlane=new Bt(i,r),this.add(this.lightPlane),i=new j,i.addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new Bt(i,r),this.add(this.targetLine),this.update()}function fo(e){function t(e,t,i){n(e,i),n(t,i)}function n(e,t){o.push(0,0,0),s.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(o.length/3-1)}var i=new j,r=new Dt({color:16777215,vertexColors:gs}),o=[],s=[],a={},c=new y(16755200),l=new y(16711680),u=new y(43775),h=new y(16777215),d=new y(3355443);t("n1","n2",c),t("n2","n4",c),t("n4","n3",c),t("n3","n1",c),t("f1","f2",c),t("f2","f4",c),t("f4","f3",c),t("f3","f1",c),t("n1","f1",c),t("n2","f2",c),t("n3","f3",c),t("n4","f4",c),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",u),t("u2","u3",u),t("u3","u1",u),t("c","t",h),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),i.addAttribute("position",new D(o,3)),i.addAttribute("color",new D(s,3)),It.call(this,i,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function po(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new j;r.setIndex(new M(n,1)),r.addAttribute("position",new M(i,3)),It.call(this,r,new Dt({color:t})),this.matrixAutoUpdate=!1,this.update()}function go(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new j;o.setIndex(new M(i,1)),o.addAttribute("position",new D(r,3)),It.call(this,o,new Dt({color:n})),this.geometry.computeBoundingSphere()}function mo(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new j;o.addAttribute("position",new D(r,3)),o.computeBoundingSphere(),Bt.call(this,o,new Dt({color:i}));var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],a=new j;a.addAttribute("position",new D(s,3)),a.computeBoundingSphere(),this.add(new Y(a,new W({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function vo(e,t,n,i,r,o){x.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===ml&&(ml=new j,ml.addAttribute("position",new D([0,0,0,0,1,0],3)),vl=new ni(0,.5,1,5,1),vl.translate(0,-.5,0)),this.position.copy(t),this.line=new Bt(ml,new Dt({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Y(vl,new W({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function yo(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new j;i.addAttribute("position",new D(t,3)),i.addAttribute("color",new D(n,3));var r=new Dt({vertexColors:ms});It.call(this,i,r)}function bo(e,t,n,i,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new C(e,t,n,r,o,s)}function wo(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function _o(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function xo(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ut(e,t)}function Eo(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ft(e)}function Ao(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ut(e,t)}function Co(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new jt(e)}function So(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new jt(e)}function Mo(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new jt(e)}function ko(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(e,t,n)}function To(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new M(e,t).setDynamic(!0)}function Fo(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new k(e,t)}function Oo(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new T(e,t)}function Po(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new F(e,t)}function Lo(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new O(e,t)}function Ro(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new P(e,t)}function Do(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new L(e,t)}function Bo(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(e,t)}function Io(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new D(e,t)}function No(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new B(e,t)}function jo(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mi.call(this,e),this.type="catmullrom",this.closed=!0}function Uo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mi.call(this,e),this.type="catmullrom"}function $o(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Mi.call(this,e),this.type="catmullrom"}function zo(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yo(e)}function Ho(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new po(e,t)}function Vo(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new It(new ei(e.geometry),new Dt({color:void 0!==t?t:16777215}))}function Wo(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new It(new Wt(e.geometry),new Dt({color:void 0!==t?t:16777215}))}function Go(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new vi(e)}function qo(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new bi(e)}function Xo(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Ko(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function Yo(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WebGLRenderTargetCube",function(){return d}),n.d(t,"WebGLRenderTarget",function(){return h}),n.d(t,"WebGLRenderer",function(){return Ct}),n.d(t,"ShaderLib",function(){return Dc}),n.d(t,"UniformsLib",function(){return Rc}),n.d(t,"UniformsUtils",function(){return Pc}),n.d(t,"ShaderChunk",function(){return Oc}),n.d(t,"FogExp2",function(){return St}),n.d(t,"Fog",function(){return Mt}),n.d(t,"Scene",function(){return kt}),n.d(t,"Sprite",function(){return Ft}),n.d(t,"LOD",function(){return Ot}),n.d(t,"SkinnedMesh",function(){return Rt}),n.d(t,"Skeleton",function(){return Pt}),n.d(t,"Bone",function(){return Lt}),n.d(t,"Mesh",function(){return Y}),n.d(t,"LineSegments",function(){return It}),n.d(t,"LineLoop",function(){return Nt}),n.d(t,"Line",function(){return Bt}),n.d(t,"Points",function(){return Ut}),n.d(t,"Group",function(){return $t}),n.d(t,"VideoTexture",function(){return zt}),n.d(t,"DataTexture",function(){return f}),n.d(t,"CompressedTexture",function(){return Ht}),n.d(t,"CubeTexture",function(){return ce}),n.d(t,"CanvasTexture",function(){return vt}),n.d(t,"DepthTexture",function(){return Vt}),n.d(t,"Texture",function(){return l}),n.d(t,"CompressedTextureLoader",function(){return yi}),n.d(t,"DataTextureLoader",function(){return bi}),n.d(t,"CubeTextureLoader",function(){return _i}),n.d(t,"TextureLoader",function(){return xi}),n.d(t,"ObjectLoader",function(){return _r}),n.d(t,"MaterialLoader",function(){return vr}),n.d(t,"BufferGeometryLoader",function(){return yr}),n.d(t,"DefaultLoadingManager",function(){return el}),n.d(t,"LoadingManager",function(){return mi}),n.d(t,"JSONLoader",function(){return wr}),n.d(t,"ImageLoader",function(){return wi}),n.d(t,"ImageBitmapLoader",function(){return xr}),n.d(t,"FontLoader",function(){return Mr}),n.d(t,"FileLoader",function(){return vi}),n.d(t,"Loader",function(){return br}),n.d(t,"LoaderUtils",function(){return ll}),n.d(t,"Cache",function(){return Qc}),n.d(t,"AudioLoader",function(){return kr}),n.d(t,"SpotLightShadow",function(){return Zi}),n.d(t,"SpotLight",function(){return Ji}),n.d(t,"PointLight",function(){return Qi}),n.d(t,"RectAreaLight",function(){return ir}),n.d(t,"HemisphereLight",function(){return Ki}),n.d(t,"DirectionalLightShadow",function(){return er}),n.d(t,"DirectionalLight",function(){return tr}),n.d(t,"AmbientLight",function(){return nr}),n.d(t,"LightShadow",function(){return Yi}),n.d(t,"Light",function(){return Xi}),n.d(t,"StereoCamera",function(){return Tr}),n.d(t,"PerspectiveCamera",function(){return xt}),n.d(t,"OrthographicCamera",function(){return A}),n.d(t,"CubeCamera",function(){return Fr}),n.d(t,"ArrayCamera",function(){return Et}),n.d(t,"Camera",function(){return E}),n.d(t,"AudioListener",function(){return Or}),n.d(t,"PositionalAudio",function(){return Lr}),n.d(t,"AudioContext",function(){return pl}),n.d(t,"AudioAnalyser",function(){return Rr}),n.d(t,"Audio",function(){return Pr}),n.d(t,"VectorKeyframeTrack",function(){return gr}),n.d(t,"StringKeyframeTrack",function(){return rr}),n.d(t,"QuaternionKeyframeTrack",function(){return cr}),n.d(t,"NumberKeyframeTrack",function(){return ur}),n.d(t,"ColorKeyframeTrack",function(){return lr}),n.d(t,"BooleanKeyframeTrack",function(){return or}),n.d(t,"PropertyMixer",function(){return Dr}),n.d(t,"PropertyBinding",function(){return Ir}),n.d(t,"KeyframeTrack",function(){return pr}),n.d(t,"AnimationUtils",function(){return al}),n.d(t,"AnimationObjectGroup",function(){return Nr}),n.d(t,"AnimationMixer",function(){return Ur}),n.d(t,"AnimationClip",function(){return mr}),n.d(t,"Uniform",function(){return $r}),n.d(t,"InstancedBufferGeometry",function(){return zr}),n.d(t,"BufferGeometry",function(){return j}),n.d(t,"Geometry",function(){return S}),n.d(t,"InterleavedBufferAttribute",function(){return Hr}),n.d(t,"InstancedInterleavedBuffer",function(){return Wr}),n.d(t,"InterleavedBuffer",function(){return Vr}),n.d(t,"InstancedBufferAttribute",function(){return Gr}),n.d(t,"Face3",function(){return C}),n.d(t,"Object3D",function(){return x}),n.d(t,"Raycaster",function(){return qr}),n.d(t,"Layers",function(){return _}),n.d(t,"EventDispatcher",function(){return i}),n.d(t,"Clock",function(){return Yr}),n.d(t,"QuaternionLinearInterpolant",function(){return ar}),n.d(t,"LinearInterpolant",function(){return dr}),n.d(t,"DiscreteInterpolant",function(){return fr}),n.d(t,"CubicInterpolant",function(){return hr}),n.d(t,"Interpolant",function(){return sr}),n.d(t,"Triangle",function(){return K}),n.d(t,"Math",function(){return Tc}),n.d(t,"Spherical",function(){return Zr}),n.d(t,"Cylindrical",function(){return Jr}),n.d(t,"Plane",function(){return m}),n.d(t,"Frustum",function(){return v}),n.d(t,"Sphere",function(){return g}),n.d(t,"Ray",function(){return q}),n.d(t,"Matrix4",function(){return o}),n.d(t,"Matrix3",function(){return c}),n.d(t,"Box3",function(){return p}),n.d(t,"Box2",function(){return Qr}),n.d(t,"Line3",function(){return X}),n.d(t,"Euler",function(){return w}),n.d(t,"Vector4",function(){return u}),n.d(t,"Vector3",function(){return a}),n.d(t,"Vector2",function(){return r}),n.d(t,"Quaternion",function(){return s}),n.d(t,"Color",function(){return y}),n.d(t,"ImmediateRenderObject",function(){return eo}),n.d(t,"VertexNormalsHelper",function(){return to}),n.d(t,"SpotLightHelper",function(){return no}),n.d(t,"SkeletonHelper",function(){return ro}),n.d(t,"PointLightHelper",function(){return oo}),n.d(t,"RectAreaLightHelper",function(){return so}),n.d(t,"HemisphereLightHelper",function(){return ao}),n.d(t,"GridHelper",function(){return co}),n.d(t,"PolarGridHelper",function(){return lo}),n.d(t,"FaceNormalsHelper",function(){return uo}),n.d(t,"DirectionalLightHelper",function(){return ho}),n.d(t,"CameraHelper",function(){return fo}),n.d(t,"BoxHelper",function(){return po}),n.d(t,"Box3Helper",function(){return go}),n.d(t,"PlaneHelper",function(){return mo}),n.d(t,"ArrowHelper",function(){return vo}),n.d(t,"AxesHelper",function(){return yo}),n.d(t,"Shape",function(){return qi}),n.d(t,"Path",function(){return Gi}),n.d(t,"ShapePath",function(){return Er}),n.d(t,"Font",function(){return Ar}),n.d(t,"CurvePath",function(){return Wi}),n.d(t,"Curve",function(){return Ei}),n.d(t,"ShapeUtils",function(){return Yc}),n.d(t,"WebGLUtils",function(){return _t}),n.d(t,"WireframeGeometry",function(){return Wt}),n.d(t,"ParametricGeometry",function(){return Gt}),n.d(t,"ParametricBufferGeometry",function(){return qt}),n.d(t,"TetrahedronGeometry",function(){return Yt}),n.d(t,"TetrahedronBufferGeometry",function(){return Zt}),n.d(t,"OctahedronGeometry",function(){return Jt}),n.d(t,"OctahedronBufferGeometry",function(){return Qt}),n.d(t,"IcosahedronGeometry",function(){return en}),n.d(t,"IcosahedronBufferGeometry",function(){return tn}),n.d(t,"DodecahedronGeometry",function(){return nn}),n.d(t,"DodecahedronBufferGeometry",function(){return rn}),n.d(t,"PolyhedronGeometry",function(){return Xt}),n.d(t,"PolyhedronBufferGeometry",function(){return Kt}),n.d(t,"TubeGeometry",function(){return on}),n.d(t,"TubeBufferGeometry",function(){return sn}),n.d(t,"TorusKnotGeometry",function(){return an}),n.d(t,"TorusKnotBufferGeometry",function(){return cn}),n.d(t,"TorusGeometry",function(){return ln}),n.d(t,"TorusBufferGeometry",function(){return un}),n.d(t,"TextGeometry",function(){return Hn}),n.d(t,"TextBufferGeometry",function(){return Vn}),n.d(t,"SphereGeometry",function(){return Wn}),n.d(t,"SphereBufferGeometry",function(){return Gn}),n.d(t,"RingGeometry",function(){return qn}),n.d(t,"RingBufferGeometry",function(){return Xn}),n.d(t,"PlaneGeometry",function(){return z}),n.d(t,"PlaneBufferGeometry",function(){return H}),n.d(t,"LatheGeometry",function(){return Kn}),n.d(t,"LatheBufferGeometry",function(){return Yn}),n.d(t,"ShapeGeometry",function(){return Zn}),n.d(t,"ShapeBufferGeometry",function(){return Jn}),n.d(t,"ExtrudeGeometry",function(){return $n}),n.d(t,"ExtrudeBufferGeometry",function(){return zn}),n.d(t,"EdgesGeometry",function(){return ei}),n.d(t,"ConeGeometry",function(){return ii}),n.d(t,"ConeBufferGeometry",function(){return ri}),n.d(t,"CylinderGeometry",function(){return ti}),n.d(t,"CylinderBufferGeometry",function(){return ni}),n.d(t,"CircleGeometry",function(){return oi}),n.d(t,"CircleBufferGeometry",function(){return si}),n.d(t,"BoxGeometry",function(){return U}),n.d(t,"BoxBufferGeometry",function(){return $}),n.d(t,"ShadowMaterial",function(){return ai}),n.d(t,"SpriteMaterial",function(){return Tt}),n.d(t,"RawShaderMaterial",function(){return ci}),n.d(t,"ShaderMaterial",function(){return G}),n.d(t,"PointsMaterial",function(){return jt}),n.d(t,"MeshPhysicalMaterial",function(){return ui}),n.d(t,"MeshStandardMaterial",function(){return li}),n.d(t,"MeshPhongMaterial",function(){return hi}),n.d(t,"MeshToonMaterial",function(){return di}),n.d(t,"MeshNormalMaterial",function(){return fi}),n.d(t,"MeshLambertMaterial",function(){return pi}),n.d(t,"MeshDepthMaterial",function(){return pt}),n.d(t,"MeshDistanceMaterial",function(){return gt}),n.d(t,"MeshBasicMaterial",function(){return W});n.d(t,"LineDashedMaterial",function(){return gi}),n.d(t,"LineBasicMaterial",function(){return Dt}),n.d(t,"Material",function(){return V}),n.d(t,"Float64BufferAttribute",function(){return B}),n.d(t,"Float32BufferAttribute",function(){return D}),n.d(t,"Uint32BufferAttribute",function(){return R}),n.d(t,"Int32BufferAttribute",function(){return L}),n.d(t,"Uint16BufferAttribute",function(){return P}),n.d(t,"Int16BufferAttribute",function(){return O}),n.d(t,"Uint8ClampedBufferAttribute",function(){return F}),n.d(t,"Uint8BufferAttribute",function(){return T}),n.d(t,"Int8BufferAttribute",function(){return k}),n.d(t,"BufferAttribute",function(){return M}),n.d(t,"ArcCurve",function(){return Ci}),n.d(t,"CatmullRomCurve3",function(){return Mi}),n.d(t,"CubicBezierCurve",function(){return Ni}),n.d(t,"CubicBezierCurve3",function(){return ji}),n.d(t,"EllipseCurve",function(){return Ai}),n.d(t,"LineCurve",function(){return Ui}),n.d(t,"LineCurve3",function(){return $i}),n.d(t,"QuadraticBezierCurve",function(){return zi}),n.d(t,"QuadraticBezierCurve3",function(){return Hi}),n.d(t,"SplineCurve",function(){return Vi}),n.d(t,"REVISION",function(){return Jo}),n.d(t,"MOUSE",function(){return Qo}),n.d(t,"CullFaceNone",function(){return es}),n.d(t,"CullFaceBack",function(){return ts}),n.d(t,"CullFaceFront",function(){return ns}),n.d(t,"CullFaceFrontBack",function(){return is}),n.d(t,"FrontFaceDirectionCW",function(){return rs}),n.d(t,"FrontFaceDirectionCCW",function(){return os}),n.d(t,"BasicShadowMap",function(){return ss}),n.d(t,"PCFShadowMap",function(){return as}),n.d(t,"PCFSoftShadowMap",function(){return cs}),n.d(t,"FrontSide",function(){return ls}),n.d(t,"BackSide",function(){return us}),n.d(t,"DoubleSide",function(){return hs}),n.d(t,"FlatShading",function(){return ds}),n.d(t,"SmoothShading",function(){return fs}),n.d(t,"NoColors",function(){return ps}),n.d(t,"FaceColors",function(){return gs}),n.d(t,"VertexColors",function(){return ms}),n.d(t,"NoBlending",function(){return vs}),n.d(t,"NormalBlending",function(){return ys}),n.d(t,"AdditiveBlending",function(){return bs}),n.d(t,"SubtractiveBlending",function(){return ws}),n.d(t,"MultiplyBlending",function(){return _s}),n.d(t,"CustomBlending",function(){return xs}),n.d(t,"AddEquation",function(){return Es}),n.d(t,"SubtractEquation",function(){return As}),n.d(t,"ReverseSubtractEquation",function(){return Cs}),n.d(t,"MinEquation",function(){return Ss}),n.d(t,"MaxEquation",function(){return Ms}),n.d(t,"ZeroFactor",function(){return ks}),n.d(t,"OneFactor",function(){return Ts}),n.d(t,"SrcColorFactor",function(){return Fs}),n.d(t,"OneMinusSrcColorFactor",function(){return Os}),n.d(t,"SrcAlphaFactor",function(){return Ps}),n.d(t,"OneMinusSrcAlphaFactor",function(){return Ls}),n.d(t,"DstAlphaFactor",function(){return Rs}),n.d(t,"OneMinusDstAlphaFactor",function(){return Ds}),n.d(t,"DstColorFactor",function(){return Bs}),n.d(t,"OneMinusDstColorFactor",function(){return Is}),n.d(t,"SrcAlphaSaturateFactor",function(){return Ns}),n.d(t,"NeverDepth",function(){return js}),n.d(t,"AlwaysDepth",function(){return Us}),n.d(t,"LessDepth",function(){return $s}),n.d(t,"LessEqualDepth",function(){return zs}),n.d(t,"EqualDepth",function(){return Hs}),n.d(t,"GreaterEqualDepth",function(){return Vs}),n.d(t,"GreaterDepth",function(){return Ws}),n.d(t,"NotEqualDepth",function(){return Gs}),n.d(t,"MultiplyOperation",function(){return qs}),n.d(t,"MixOperation",function(){return Xs}),n.d(t,"AddOperation",function(){return Ks}),n.d(t,"NoToneMapping",function(){return Ys}),n.d(t,"LinearToneMapping",function(){return Zs}),n.d(t,"ReinhardToneMapping",function(){return Js}),n.d(t,"Uncharted2ToneMapping",function(){return Qs}),n.d(t,"CineonToneMapping",function(){return ea}),n.d(t,"UVMapping",function(){return ta}),n.d(t,"CubeReflectionMapping",function(){return na}),n.d(t,"CubeRefractionMapping",function(){return ia}),n.d(t,"EquirectangularReflectionMapping",function(){return ra}),n.d(t,"EquirectangularRefractionMapping",function(){return oa}),n.d(t,"SphericalReflectionMapping",function(){return sa}),n.d(t,"CubeUVReflectionMapping",function(){return aa}),n.d(t,"CubeUVRefractionMapping",function(){return ca}),n.d(t,"RepeatWrapping",function(){return la}),n.d(t,"ClampToEdgeWrapping",function(){return ua}),n.d(t,"MirroredRepeatWrapping",function(){return ha}),n.d(t,"NearestFilter",function(){return da}),n.d(t,"NearestMipMapNearestFilter",function(){return fa}),n.d(t,"NearestMipMapLinearFilter",function(){return pa}),n.d(t,"LinearFilter",function(){return ga}),n.d(t,"LinearMipMapNearestFilter",function(){return ma}),n.d(t,"LinearMipMapLinearFilter",function(){return va}),n.d(t,"UnsignedByteType",function(){return ya}),n.d(t,"ByteType",function(){return ba}),n.d(t,"ShortType",function(){return wa}),n.d(t,"UnsignedShortType",function(){return _a}),n.d(t,"IntType",function(){return xa}),n.d(t,"UnsignedIntType",function(){return Ea}),n.d(t,"FloatType",function(){return Aa}),n.d(t,"HalfFloatType",function(){return Ca}),n.d(t,"UnsignedShort4444Type",function(){return Sa}),n.d(t,"UnsignedShort5551Type",function(){return Ma}),n.d(t,"UnsignedShort565Type",function(){return ka}),n.d(t,"UnsignedInt248Type",function(){return Ta}),n.d(t,"AlphaFormat",function(){return Fa}),n.d(t,"RGBFormat",function(){return Oa}),n.d(t,"RGBAFormat",function(){return Pa}),n.d(t,"LuminanceFormat",function(){return La}),n.d(t,"LuminanceAlphaFormat",function(){return Ra}),n.d(t,"RGBEFormat",function(){return Da}),n.d(t,"DepthFormat",function(){return Ba}),n.d(t,"DepthStencilFormat",function(){return Ia}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Na}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return ja}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return Ua}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return $a}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return za}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return Ha}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Va}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return Wa}),n.d(t,"RGB_ETC1_Format",function(){return Ga}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return qa}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return Xa}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return Ka}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return Ya}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return Za}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return Ja}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return Qa}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return ec}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return tc}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return nc}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return ic}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return rc}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return oc}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return sc}),n.d(t,"LoopOnce",function(){return ac}),n.d(t,"LoopRepeat",function(){return cc}),n.d(t,"LoopPingPong",function(){return lc}),n.d(t,"InterpolateDiscrete",function(){return uc}),n.d(t,"InterpolateLinear",function(){return hc}),n.d(t,"InterpolateSmooth",function(){return dc}),n.d(t,"ZeroCurvatureEnding",function(){return fc}),n.d(t,"ZeroSlopeEnding",function(){return pc}),n.d(t,"WrapAroundEnding",function(){return gc}),n.d(t,"TrianglesDrawMode",function(){return mc}),n.d(t,"TriangleStripDrawMode",function(){return vc}),n.d(t,"TriangleFanDrawMode",function(){return yc}),n.d(t,"LinearEncoding",function(){return bc}),n.d(t,"sRGBEncoding",function(){return wc}),n.d(t,"GammaEncoding",function(){return _c}),n.d(t,"RGBEEncoding",function(){return xc}),n.d(t,"LogLuvEncoding",function(){return Ec}),n.d(t,"RGBM7Encoding",function(){return Ac}),n.d(t,"RGBM16Encoding",function(){return Cc}),n.d(t,"RGBDEncoding",function(){return Sc}),n.d(t,"BasicDepthPacking",function(){return Mc}),n.d(t,"RGBADepthPacking",function(){return kc}),n.d(t,"CubeGeometry",function(){return U}),n.d(t,"Face4",function(){return bo}),n.d(t,"LineStrip",function(){return yl}),n.d(t,"LinePieces",function(){return bl}),n.d(t,"MeshFaceMaterial",function(){return wo}),n.d(t,"MultiMaterial",function(){return _o}),n.d(t,"PointCloud",function(){return xo}),n.d(t,"Particle",function(){return Eo}),n.d(t,"ParticleSystem",function(){return Ao}),n.d(t,"PointCloudMaterial",function(){return Co}),n.d(t,"ParticleBasicMaterial",function(){return So}),n.d(t,"ParticleSystemMaterial",function(){return Mo}),n.d(t,"Vertex",function(){return ko}),n.d(t,"DynamicBufferAttribute",function(){return To}),n.d(t,"Int8Attribute",function(){return Fo}),n.d(t,"Uint8Attribute",function(){return Oo}),n.d(t,"Uint8ClampedAttribute",function(){return Po}),n.d(t,"Int16Attribute",function(){return Lo}),n.d(t,"Uint16Attribute",function(){return Ro}),n.d(t,"Int32Attribute",function(){return Do}),n.d(t,"Uint32Attribute",function(){return Bo}),n.d(t,"Float32Attribute",function(){return Io}),n.d(t,"Float64Attribute",function(){return No}),n.d(t,"ClosedSplineCurve3",function(){return jo}),n.d(t,"SplineCurve3",function(){return Uo}),n.d(t,"Spline",function(){return $o}),n.d(t,"AxisHelper",function(){return zo}),n.d(t,"BoundingBoxHelper",function(){return Ho}),n.d(t,"EdgesHelper",function(){return Vo}),n.d(t,"WireframeHelper",function(){return Wo}),n.d(t,"XHRLoader",function(){return Go}),n.d(t,"BinaryTextureLoader",function(){return qo}),n.d(t,"GeometryUtils",function(){return wl}),n.d(t,"ImageUtils",function(){return _l}),n.d(t,"Projector",function(){return Xo}),n.d(t,"CanvasRenderer",function(){return Ko}),n.d(t,"SceneUtils",function(){return xl}),n.d(t,"LensFlare",function(){return Yo});var Zo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}}(),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=n.slice(0),r=0,o=i.length;r<o;r++)i[r].call(this,e)}}}});var Jo="91",Qo={LEFT:0,MIDDLE:1,RIGHT:2},es=0,ts=1,ns=2,is=3,rs=0,os=1,ss=0,as=1,cs=2,ls=0,us=1,hs=2,ds=1,fs=2,ps=0,gs=1,ms=2,vs=0,ys=1,bs=2,ws=3,_s=4,xs=5,Es=100,As=101,Cs=102,Ss=103,Ms=104,ks=200,Ts=201,Fs=202,Os=203,Ps=204,Ls=205,Rs=206,Ds=207,Bs=208,Is=209,Ns=210,js=0,Us=1,$s=2,zs=3,Hs=4,Vs=5,Ws=6,Gs=7,qs=0,Xs=1,Ks=2,Ys=0,Zs=1,Js=2,Qs=3,ea=4,ta=300,na=301,ia=302,ra=303,oa=304,sa=305,aa=306,ca=307,la=1e3,ua=1001,ha=1002,da=1003,fa=1004,pa=1005,ga=1006,ma=1007,va=1008,ya=1009,ba=1010,wa=1011,_a=1012,xa=1013,Ea=1014,Aa=1015,Ca=1016,Sa=1017,Ma=1018,ka=1019,Ta=1020,Fa=1021,Oa=1022,Pa=1023,La=1024,Ra=1025,Da=Pa,Ba=1026,Ia=1027,Na=33776,ja=33777,Ua=33778,$a=33779,za=35840,Ha=35841,Va=35842,Wa=35843,Ga=36196,qa=37808,Xa=37809,Ka=37810,Ya=37811,Za=37812,Ja=37813,Qa=37814,ec=37815,tc=37816,nc=37817,ic=37818,rc=37819,oc=37820,sc=37821,ac=2200,cc=2201,lc=2202,uc=2300,hc=2301,dc=2302,fc=2400,pc=2401,gc=2402,mc=0,vc=1,yc=2,bc=3e3,wc=3001,_c=3007,xc=3002,Ec=3003,Ac=3004,Cc=3005,Sc=3006,Mc=3200,kc=3201,Tc={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Tc.DEG2RAD},radToDeg:function(e){return e*Tc.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(r.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new r,t=new r;return function(n,i){return e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}}),Object.assign(o.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,s,a,c,l,u,h,d,f,p,g){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=c,m[6]=l,m[10]=u,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new a;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),s=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var h=o*l,d=o*u,f=s*l,p=s*u;t[0]=a*l,t[4]=-a*u,t[8]=c,t[1]=d+f*c,t[5]=h-p*c,t[9]=-s*a,t[2]=p-h*c,t[6]=f+d*c,t[10]=o*a}else if("YXZ"===e.order){var g=a*l,m=a*u,v=c*l,y=c*u;t[0]=g+y*s,t[4]=v*s-m,t[8]=o*c,t[1]=o*u,t[5]=o*l,t[9]=-s,t[2]=m*s-v,t[6]=y+g*s,t[10]=o*a}else if("ZXY"===e.order){var g=a*l,m=a*u,v=c*l,y=c*u;t[0]=g-y*s,t[4]=-o*u,t[8]=v+m*s,t[1]=m+v*s,t[5]=o*l,t[9]=y-g*s,t[2]=-o*c,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){var h=o*l,d=o*u,f=s*l,p=s*u;t[0]=a*l,t[4]=f*c-d,t[8]=h*c+p,t[1]=a*u,t[5]=p*c+h,t[9]=d*c-f,t[2]=-c,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){var b=o*a,w=o*c,_=s*a,x=s*c;t[0]=a*l,t[4]=x-b*u,t[8]=_*u+w,t[1]=u,t[5]=o*l,t[9]=-s*l,t[2]=-c*l,t[6]=w*u+_,t[10]=b-x*u}else if("XZY"===e.order){var b=o*a,w=o*c,_=s*a,x=s*c;t[0]=a*l,t[4]=-u,t[8]=c*l,t[1]=b*u+x,t[5]=o*l,t[9]=w*u-_,t[2]=_*u-w,t[6]=s*l,t[10]=x*u+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,o=e._w,s=n+n,a=i+i,c=r+r,l=n*s,u=n*a,h=n*c,d=i*a,f=i*c,p=r*c,g=o*s,m=o*a,v=o*c;return t[0]=1-(d+p),t[4]=u-v,t[8]=h+m,t[1]=u+v,t[5]=1-(l+p),t[9]=f-g,t[2]=h-m,t[6]=f+g,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new a,t=new a,n=new a;return function(i,r,o){var s=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),s[0]=e.x,s[4]=t.x,s[8]=n.x,s[1]=e.y,s[5]=t.y,s[9]=n.y,s[2]=e.z,s[6]=t.z,s[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],b=n[11],w=n[15],_=i[0],x=i[4],E=i[8],A=i[12],C=i[1],S=i[5],M=i[9],k=i[13],T=i[2],F=i[6],O=i[10],P=i[14],L=i[3],R=i[7],D=i[11],B=i[15];return r[0]=o*_+s*C+a*T+c*L,r[4]=o*x+s*S+a*F+c*R,r[8]=o*E+s*M+a*O+c*D,r[12]=o*A+s*k+a*P+c*B,r[1]=l*_+u*C+h*T+d*L,r[5]=l*x+u*S+h*F+d*R,r[9]=l*E+u*M+h*O+d*D,r[13]=l*A+u*k+h*P+d*B,r[2]=f*_+p*C+g*T+m*L,r[6]=f*x+p*S+g*F+m*R,r[10]=f*E+p*M+g*O+m*D,r[14]=f*A+p*k+g*P+m*B,r[3]=v*_+y*C+b*T+w*L,r[7]=v*x+y*S+b*F+w*R,r[11]=v*E+y*M+b*O+w*D,r[15]=v*A+y*k+b*P+w*B,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*a*u-i*c*u-r*s*h+n*c*h+i*s*d-n*a*d)+e[7]*(+t*a*d-t*c*h+r*o*h-i*o*d+i*c*l-r*a*l)+e[11]*(+t*c*u-t*s*d-r*o*u+n*o*d+r*s*l-n*c*l)+e[15]*(-i*s*l-t*a*u+t*s*h+i*o*u-n*o*h+n*a*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],g=i[11],m=i[12],v=i[13],y=i[14],b=i[15],w=f*y*h-v*p*h+v*u*g-l*y*g-f*u*b+l*p*b,_=m*p*h-d*y*h-m*u*g+c*y*g+d*u*b-c*p*b,x=d*v*h-m*f*h+m*l*g-c*v*g-d*l*b+c*f*b,E=m*f*u-d*v*u-m*l*p+c*v*p+d*l*y-c*f*y,A=r*w+o*_+s*x+a*E;if(0===A){var C="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(C);return console.warn(C),this.identity()}var S=1/A;return n[0]=w*S,n[1]=(v*p*a-f*y*a-v*s*g+o*y*g+f*s*b-o*p*b)*S,n[2]=(l*y*a-v*u*a+v*s*h-o*y*h-l*s*b+o*u*b)*S,n[3]=(f*u*a-l*p*a-f*s*h+o*p*h+l*s*g-o*u*g)*S,n[4]=_*S,n[5]=(d*y*a-m*p*a+m*s*g-r*y*g-d*s*b+r*p*b)*S,n[6]=(m*u*a-c*y*a-m*s*h+r*y*h+c*s*b-r*u*b)*S,n[7]=(c*p*a-d*u*a+d*s*h-r*p*h-c*s*g+r*u*g)*S,n[8]=x*S,n[9]=(m*f*a-d*v*a-m*o*g+r*v*g+d*o*b-r*f*b)*S,n[10]=(c*v*a-m*l*a+m*o*h-r*v*h-c*o*b+r*l*b)*S,n[11]=(d*l*a-c*f*a-d*o*h+r*f*h+c*o*g-r*l*g)*S,n[12]=E*S,n[13]=(d*v*s-m*f*s+m*o*p-r*v*p-d*o*y+r*f*y)*S,n[14]=(m*l*s-c*v*s-m*o*u+r*v*u+c*o*y-r*l*y)*S,n[15]=(c*f*s-d*l*s+d*o*u-r*f*u-c*o*p+r*l*p)*S,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,c=r*o,l=r*s;return this.set(c*o+n,c*s-i*a,c*a+i*s,0,c*s+i*a,l*s+n,l*a-i*o,0,c*a-i*s,l*a+i*o,r*a*a+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new a,t=new o;return function(n,i,r){var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),a=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var l=1/s,u=1/a,h=1/c;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,i.setFromRotationMatrix(t),r.x=s,r.y=a,r.z=c,this}}(),makePerspective:function(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=c,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){var s=this.elements,a=1/(t-e),c=1/(n-i),l=1/(o-r),u=(t+e)*a,h=(n+i)*c,d=(o+r)*l;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(s,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,s){var a=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],f=r[o+2],p=r[o+3];if(u!==p||a!==h||c!==d||l!==f){var g=1-s,m=a*h+c*d+l*f+u*p,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),w=Math.atan2(b,m*v);g=Math.sin(g*w)/b,s=Math.sin(s*w)/b}var _=s*v;if(a=a*g+h*_,c=c*g+d*_,l=l*g+f*_,u=u*g+p*_,g===1-s){var x=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=x,c*=x,l*=x,u*=x}}e[t]=a,e[t+1]=c,e[t+2]=l,e[t+3]=u}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(s.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,o=e.order,s=Math.cos,a=Math.sin,c=s(n/2),l=s(i/2),u=s(r/2),h=a(n/2),d=a(i/2),f=a(r/2);return"XYZ"===o?(this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f):"YXZ"===o?(this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f):"ZXY"===o?(this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f):"ZYX"===o?(this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f):"YZX"===o?(this._x=h*l*u+c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u-h*d*f):"XZY"===o&&(this._x=h*l*u-c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],c=n[9],l=n[2],u=n[6],h=n[10],d=i+a+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-c)*t,this._y=(o-l)*t,this._z=(s-r)*t):i>a&&i>h?(t=2*Math.sqrt(1+i-a-h),this._w=(u-c)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(o+l)/t):a>h?(t=2*Math.sqrt(1+a-i-h),this._w=(o-l)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-i-a),this._w=(s-r)/t,this._x=(o+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new a;return function(n,i){return void 0===t&&(t=new a),e=n.dot(i)+1,e<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,c=t._z,l=t._w;return this._x=n*l+o*s+i*c-r*a,this._y=i*l+o*a+r*s-n*c,this._z=r*l+o*c+n*a-i*s,this._w=o*l-n*s-i*a-r*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,o=this._w,s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(a,s),l=Math.sin((1-t)*c)/a,u=Math.sin(t*c)/a;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new s;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new s;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,c=a*t+o*i-s*n,l=a*n+s*t-r*i,u=a*i+r*n-o*t,h=-r*t-o*n-s*i;return this.x=c*a+h*-r+l*-s-u*-o,this.y=l*a+h*-o+u*-r-c*-s,this.z=u*a+h*-s+c*-o-l*-r,this},project:function(){var e=new o;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new o;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new a,t=new a;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new a;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new a;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Tc.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(c.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,s,a,c){var l=this.elements;return l[0]=e,l[1]=i,l[2]=s,l[3]=t,l[4]=r,l[5]=a,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],g=i[3],m=i[6],v=i[1],y=i[4],b=i[7],w=i[2],_=i[5],x=i[8];return r[0]=o*p+s*v+a*w,r[3]=o*g+s*y+a*_,r[6]=o*m+s*b+a*x,r[1]=c*p+l*v+u*w,r[4]=c*g+l*y+u*_,r[7]=c*m+l*b+u*x,r[2]=h*p+d*v+f*w,r[5]=h*g+d*y+f*_,r[8]=h*m+d*b+f*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],c=e[7],l=e[8];return t*o*l-t*s*c-n*r*l+n*s*a+i*r*c-i*o*a},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],f=d*c-l*h,p=l*u-d*a,g=h*a-c*u,m=r*f+o*p+s*g;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return i[0]=f*y,i[1]=(s*h-d*o)*y,i[2]=(l*o-s*c)*y,i[3]=p*y,i[4]=(d*r-s*u)*y,i[5]=(s*a-l*r)*y,i[6]=g*y,i[7]=(o*u-h*r)*y,i[8]=(c*r-o*a)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,s){var a=Math.cos(r),c=Math.sin(r);this.set(n*a,n*c,-n*(a*o+c*s)+o+e,-i*c,i*a,-i*(-c*o+a*s)+s+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],s=i[6],a=i[1],c=i[4],l=i[7];return i[0]=t*r+n*a,i[3]=t*o+n*c,i[6]=t*s+n*l,i[1]=-n*r+t*a,i[4]=-n*o+t*c,i[7]=-n*s+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Fc=0;l.DEFAULT_IMAGE=void 0,l.DEFAULT_MAPPING=ta,l.prototype=Object.assign(Object.create(i.prototype),{constructor:l,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Tc.generateUUID()),t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===ta){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case la:e.x=e.x-Math.floor(e.x);break;case ua:e.x=e.x<0?0:1;break;case ha:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case la:e.y=e.y-Math.floor(e.y);break;case ua:e.y=e.y<0?0:1;break;case ha:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(l.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(u.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,o=e.elements,s=o[0],a=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(a-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(a+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(s+u+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var g=(s+1)/2,m=(u+1)/2,v=(p+1)/2,y=(a+l)/4,b=(c+d)/4,w=(h+f)/4;return g>m&&g>v?g<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=y/n,r=b/n):m>v?m<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(m),n=y/i,r=w/i):v<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=b/r,i=w/r),this.set(n,i,r,t),this}var _=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(l-a)*(l-a));return Math.abs(_)<.001&&(_=1),this.x=(f-h)/_,this.y=(c-d)/_,this.z=(l-a)/_,this.w=Math.acos((s+u+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new u,t=new u),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),h.prototype=Object.assign(Object.create(i.prototype),{constructor:h,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.isWebGLRenderTargetCube=!0,f.prototype=Object.create(l.prototype),f.prototype.constructor=f,f.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,c=e.length;a<c;a+=3){var l=e[a],u=e[a+1],h=e[a+2];l<t&&(t=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>s&&(s=h)}return this.min.set(t,n,i),this.max.set(r,o,s),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,c=e.count;a<c;a++){var l=e.getX(a),u=e.getY(a),h=e.getZ(a);l<t&&(t=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>s&&(s=h)}return this.min.set(t,n,i),this.max.set(r,o,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,i=s.length;n<i;n++)r.copy(s[n]),r.applyMatrix4(e.matrixWorld),t.expandByPoint(r)}else if(o.isBufferGeometry){var a=o.attributes.position;if(void 0!==a)for(n=0,i=a.count;n<i;n++)r.fromBufferAttribute(a,n).applyMatrix4(e.matrixWorld),t.expandByPoint(r)}}var t,n,i,r=new a;return function(n){return t=this,n.updateMatrixWorld(!0),n.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new a),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new a;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){function e(e){var r,o;for(r=0,o=e.length-3;r<=o;r+=3){c.fromArray(e,r);var s=u.x*Math.abs(c.x)+u.y*Math.abs(c.y)+u.z*Math.abs(c.z),a=t.dot(c),l=n.dot(c),h=i.dot(c);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>s)return!1}return!0}var t=new a,n=new a,i=new a,r=new a,o=new a,s=new a,c=new a,l=new a,u=new a,h=new a;return function(a){if(this.isEmpty())return!1;this.getCenter(l),u.subVectors(this.max,l),t.subVectors(a.a,l),n.subVectors(a.b,l),i.subVectors(a.c,l),r.subVectors(n,t),o.subVectors(i,n),s.subVectors(t,i);var c=[0,-r.z,r.y,0,-o.z,o.y,0,-s.z,s.y,r.z,0,-r.x,o.z,0,-o.x,s.z,0,-s.x,-r.y,r.x,0,-o.y,o.x,0,-s.y,s.x,0];return!!e(c)&&(c=[1,0,0,0,1,0,0,0,1],!!e(c)&&(h.crossVectors(r,o),c=[h.x,h.y,h.z],e(c)))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new a),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new a;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new g),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new a,new a,new a,new a,new a,new a,new a,new a];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(g.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new p;return function(t,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(t).getCenter(i);for(var r=0,o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new a),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new p),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(m.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new a,t=new a;return function(n,i,r){var o=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new a;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new a);var i=t.delta(e),r=this.normal.dot(i);if(0!==r){var o=-(t.start.dot(this.normal)+this.constant)/r;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new a,t=new c;return function(n,i){var r=i||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),s=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(v.prototype,{set:function(e,t,n,i,r,o){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return t[0].setComponents(s-i,u-a,p-h,y-g).normalize(),t[1].setComponents(s+i,u+a,p+h,y+g).normalize(),t[2].setComponents(s+r,u+c,p+d,y+m).normalize(),t[3].setComponents(s-r,u-c,p-d,y-m).normalize(),t[4].setComponents(s-o,u-l,p-f,y-v).normalize(),t[5].setComponents(s+o,u+l,p+f,y+v).normalize(),this},intersectsObject:function(){var e=new g;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new g;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var e=new a,t=new a;return function(n){for(var i=this.planes,r=0;r<6;r++){var o=i[r];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var s=o.distanceToPoint(e),a=o.distanceToPoint(t);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Oc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Pc={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var i in e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}},Lc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=Tc.euclideanModulo(t,1),n=Tc.clamp(n,0,1),i=Tc.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=e(o,r,t+1/3),this.g=e(o,r,t),this.b=e(o,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,a=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(s,a,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=n[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=Lc[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,o=this.b,s=Math.max(i,r,o),a=Math.min(i,r,o),c=(a+s)/2;if(a===s)t=0,n=0;else{var l=s-a;switch(n=c<=.5?l/(s+a):l/(2-s-a),s){case i:t=(r-o)/l+(r<o?6:0);break;case r:t=(o-i)/l+2;break;case o:t=(i-r)/l+4}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,i){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=i,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Rc={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new c},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new c}}},Dc={basic:{uniforms:Pc.merge([Rc.common,Rc.specularmap,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.fog]),vertexShader:Oc.meshbasic_vert,fragmentShader:Oc.meshbasic_frag},lambert:{uniforms:Pc.merge([Rc.common,Rc.specularmap,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.emissivemap,Rc.fog,Rc.lights,{emissive:{value:new y(0)}}]),vertexShader:Oc.meshlambert_vert,fragmentShader:Oc.meshlambert_frag},phong:{uniforms:Pc.merge([Rc.common,Rc.specularmap,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.emissivemap,Rc.bumpmap,Rc.normalmap,Rc.displacementmap,Rc.gradientmap,Rc.fog,Rc.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:Oc.meshphong_vert,fragmentShader:Oc.meshphong_frag},standard:{uniforms:Pc.merge([Rc.common,Rc.envmap,Rc.aomap,Rc.lightmap,Rc.emissivemap,Rc.bumpmap,Rc.normalmap,Rc.displacementmap,Rc.roughnessmap,Rc.metalnessmap,Rc.fog,Rc.lights,{emissive:{value:new y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Oc.meshphysical_vert,fragmentShader:Oc.meshphysical_frag},points:{uniforms:Pc.merge([Rc.points,Rc.fog]),vertexShader:Oc.points_vert,fragmentShader:Oc.points_frag},dashed:{uniforms:Pc.merge([Rc.common,Rc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Oc.linedashed_vert,fragmentShader:Oc.linedashed_frag},depth:{uniforms:Pc.merge([Rc.common,Rc.displacementmap]),vertexShader:Oc.depth_vert,fragmentShader:Oc.depth_frag},normal:{uniforms:Pc.merge([Rc.common,Rc.bumpmap,Rc.normalmap,Rc.displacementmap,{opacity:{value:1}}]),vertexShader:Oc.normal_vert,fragmentShader:Oc.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Oc.cube_vert,fragmentShader:Oc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Oc.equirect_vert,fragmentShader:Oc.equirect_frag},distanceRGBA:{uniforms:Pc.merge([Rc.common,Rc.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Oc.distanceRGBA_vert,fragmentShader:Oc.distanceRGBA_frag},shadow:{uniforms:Pc.merge([Rc.lights,Rc.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:Oc.shadow_vert,fragmentShader:Oc.shadow_frag}};Dc.physical={uniforms:Pc.merge([Dc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Oc.meshphysical_vert,fragmentShader:Oc.meshphysical_frag},w.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],w.DefaultOrder="XYZ",Object.defineProperties(w.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(w.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Tc.clamp,r=e.elements,o=r[0],s=r[4],a=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],f=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===t?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===t?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new o;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new s;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var Bc=0;x.DefaultUp=new a(0,1,0),x.DefaultMatrixAutoUpdate=!0,x.prototype=Object.assign(Object.create(i.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new s;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new s;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new a(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new a(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new a(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new a;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new a(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new a(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new a(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new o;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new o,t=new a;return function(n,i,r){n.isVector3?t.copy(n):t.set(n,i,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new a),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new a,t=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new a,t=new s;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new s;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new a),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}var i=void 0===e||"string"===typeof e,r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),void 0!==this.geometry){o.geometry=t(e.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var c=0,l=a.length;c<l;c++){var u=a[c];t(e.shapes,u)}else t(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],c=0,l=this.material.length;c<l;c++)h.push(t(e.materials,this.material[c]));o.material=h}else o.material=t(e.materials,this.material);if(this.children.length>0){o.children=[];for(var c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(i){var d=n(e.geometries),f=n(e.materials),p=n(e.textures),g=n(e.images),a=n(e.shapes);d.length>0&&(r.geometries=d),f.length>0&&(r.materials=f),p.length>0&&(r.textures=p),g.length>0&&(r.images=g),a.length>0&&(r.shapes=a)}return r.object=o,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),E.prototype=Object.assign(Object.create(x.prototype),{constructor:E,isCamera:!0,copy:function(e,t){return x.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new s;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new a),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){x.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),A.prototype=Object.assign(Object.create(E.prototype),{constructor:A,isOrthographicCamera:!0,copy:function(e,t){return E.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/c),o=r+u*(this.view.width/c),s-=h*(this.view.offsetY/l),a=s-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far)},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(C.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Ic=0;S.prototype=Object.assign(Object.create(i.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(e){for(var t=(new c).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(var n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,s=r.vertexNormals.length;o<s;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new o;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new o;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new o;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new o;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new o;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new x;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,i,r){var o=void 0!==c?[d[e].clone(),d[t].clone(),d[i].clone()]:[],s=void 0!==l?[n.colors[e].clone(),n.colors[t].clone(),n.colors[i].clone()]:[],a=new C(e,t,i,o,s,r);n.faces.push(a),void 0!==u&&n.faceVertexUvs[0].push([f[e].clone(),f[t].clone(),f[i].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[i].clone()])}var n=this,i=null!==e.index?e.index.array:void 0,o=e.attributes,s=o.position.array,c=void 0!==o.normal?o.normal.array:void 0,l=void 0!==o.color?o.color.array:void 0,u=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],f=[],p=[],g=0,m=0;g<s.length;g+=3,m+=2)n.vertices.push(new a(s[g],s[g+1],s[g+2])),void 0!==c&&d.push(new a(c[g],c[g+1],c[g+2])),void 0!==l&&n.colors.push(new y(l[g],l[g+1],l[g+2])),void 0!==u&&f.push(new r(u[m],u[m+1])),void 0!==h&&p.push(new r(h[m],h[m+1]));var v=e.groups;if(v.length>0)for(var g=0;g<v.length;g++)for(var b=v[g],w=b.start,_=b.count,m=w,x=w+_;m<x;m+=3)void 0!==i?t(i[m],i[m+1],i[m+2],b.materialIndex):t(m,m+1,m+2,b.materialIndex);else if(void 0!==i)for(var g=0;g<i.length;g+=3)t(i[g],i[g+1],i[g+2]);else for(var g=0;g<s.length/3;g+=3)t(g,g+1,g+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new o;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new a,t=new a,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b],c=this.vertices[r.c];e.subVectors(c,s),t.subVectors(o,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,i,r,o,s;for(s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new a;if(e){var c,l,u,h=new a,d=new a;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],c=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],h.subVectors(u,l),d.subVectors(c,l),h.cross(d),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var f=o.vertexNormals;3===f.length?(f[0].copy(s[o.a]),f[1].copy(s[o.b]),f[2].copy(s[o.c])):(f[0]=s[o.a].clone(),f[1]=s[o.b].clone(),f[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new S;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,c,l=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)s=new a,c={a:new a,b:new a,c:new a},l.push(s),u.push(c)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,c;for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],s=h.faceNormals[n],c=h.vertexNormals[n],s.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var i,r=this.vertices.length,o=this.vertices,s=e.vertices,a=this.faces,l=e.faces,u=this.faceVertexUvs[0],h=e.faceVertexUvs[0],d=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new c).getNormalMatrix(t));for(var p=0,g=s.length;p<g;p++){var m=s[p],v=m.clone();void 0!==t&&v.applyMatrix4(t),o.push(v)}for(var p=0,g=f.length;p<g;p++)d.push(f[p].clone());for(p=0,g=l.length;p<g;p++){var y,b,w,_=l[p],x=_.vertexNormals,E=_.vertexColors;y=new C(_.a+r,_.b+r,_.c+r),y.normal.copy(_.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var A=0,S=x.length;A<S;A++)b=x[A].clone(),void 0!==i&&b.applyMatrix3(i).normalize(),y.vertexNormals.push(b);y.color.copy(_.color);for(var A=0,S=E.length;A<S;A++)w=E[A],y.vertexColors.push(w.clone());y.materialIndex=_.materialIndex+n,a.push(y)}for(p=0,g=h.length;p<g;p++){var M=h[p],k=[];if(void 0!==M){for(var A=0,S=M.length;A<S;A++)k.push(M[A].clone());u.push(k)}}},mergeMesh:function(e){if(!e||!e.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,n,i,r,o,s,a,c={},l=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===c[t]?(c[t]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(p,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new a(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,i=0;i<n;i++)t[i]._id=i;t.sort(e);var r,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===n&&(r=[]),a&&a.length===n&&(o=[]);for(var i=0;i<n;i++){var c=t[i]._id;r&&r.push(s[c]),o&&o.push(a[c])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/3,h.push(e.x,e.y,e.z),d[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=f.length,f.push(e.getHex()),p[t])}function i(e){var t=e.x.toString()+e.y.toString();return void 0!==m[t]?m[t]:(m[t]=g.length/2,g.push(e.x,e.y),m[t])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(r[s]=o[s]);return r}for(var a=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];a.push(l.x,l.y,l.z)}for(var u=[],h=[],d={},f=[],p={},g=[],m={},c=0;c<this.faces.length;c++){var v=this.faces[c],y=void 0!==this.faceVertexUvs[0][c],b=v.normal.length()>0,w=v.vertexNormals.length>0,_=1!==v.color.r||1!==v.color.g||1!==v.color.b,x=v.vertexColors.length>0,E=0;if(E=e(E,0,0),E=e(E,1,!0),E=e(E,2,!1),E=e(E,3,y),E=e(E,4,b),E=e(E,5,w),E=e(E,6,_),E=e(E,7,x),u.push(E),u.push(v.a,v.b,v.c),u.push(v.materialIndex),y){var A=this.faceVertexUvs[0][c];u.push(i(A[0]),i(A[1]),i(A[2]))}if(b&&u.push(t(v.normal)),w){var C=v.vertexNormals;u.push(t(C[0]),t(C[1]),t(C[2]))}if(_&&u.push(n(v.color)),x){var S=v.vertexColors;u.push(n(S[0]),n(S[1]),n(S[2]))}}return r.data={},r.data.vertices=a,r.data.normals=h,f.length>0&&(r.data.colors=f),g.length>0&&(r.data.uvs=[g]),r.data.faces=u,r},clone:function(){return(new S).copy(this)},copy:function(e){var t,n,i,r,o,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.vertices;for(t=0,n=a.length;t<n;t++)this.vertices.push(a[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(o=0,s=h.length;o<s;o++){var f=h[o];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var g={};if(g.name=p[t].name,void 0!==p[t].vertices)for(g.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)g.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(g.normals=[],i=0,r=p[t].normals.length;i<r;i++)g.normals.push(p[t].normals[i].clone());this.morphTargets.push(g)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],i=0,r=m[t].vertexNormals.length;i<r;i++){var y=m[t].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],i=0,r=m[t].faceNormals.length;i<r;i++)v.faceNormals.push(m[t].faceNormals[i].clone());this.morphNormals.push(v)}var w=e.skinWeights;for(t=0,n=w.length;t<n;t++)this.skinWeights.push(w[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var A=e.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(M.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(M.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new y),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,o=e.length;i<o;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new r),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new a),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new u),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),k.prototype=Object.create(M.prototype),k.prototype.constructor=k,T.prototype=Object.create(M.prototype),T.prototype.constructor=T,F.prototype=Object.create(M.prototype),F.prototype.constructor=F,O.prototype=Object.create(M.prototype),O.prototype.constructor=O,P.prototype=Object.create(M.prototype),P.prototype.constructor=P,L.prototype=Object.create(M.prototype),L.prototype.constructor=L,R.prototype=Object.create(M.prototype),R.prototype.constructor=R,D.prototype=Object.create(M.prototype),D.prototype.constructor=D,B.prototype=Object.create(M.prototype),B.prototype.constructor=B,Object.assign(I.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,o=0;o<r.length;o++){var s=r[o];s.materialIndex!==i&&(i=s.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,o=e.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,c=e.morphTargets,l=c.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]=[];this.morphTargets.position=t}var h,d=e.morphNormals,f=d.length;if(f>0){h=[];for(var u=0;u<f;u++)h[u]=[];this.morphTargets.normal=h}for(var p=e.skinIndices,g=e.skinWeights,m=p.length===i.length,v=g.length===i.length,u=0;u<n.length;u++){var y=n[u];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var w=y.normal;this.normals.push(w,w,w)}var _=y.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===s){var E=o[0][u];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new r,new r,new r))}if(!0===a){var E=o[1][u];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new r,new r,new r))}for(var A=0;A<l;A++){var C=c[A].vertices;t[A].push(C[y.a],C[y.b],C[y.c])}for(var A=0;A<f;A++){var S=d[A].vertexNormals[u];h[A].push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(g[y.a],g[y.b],g[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Nc=1;j.prototype=Object.assign(Object.create(i.prototype),{constructor:j,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(N(e)>65535?R:P)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new M(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){(new c).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new o;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new o;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new o;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new o;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new o;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new x;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new D(3*t.vertices.length,3),i=new D(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new D(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new D(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var i;return!0===t.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new I).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new M(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new M(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new M(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new M(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new M(o,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var s in e.morphTargets){for(var a=[],c=e.morphTargets[s],l=0,u=c.length;l<u;l++){var h=c[l],d=new D(3*h.length,3);a.push(d.copyVector3sArray(h))}this.morphAttributes[s]=a}if(e.skinIndices.length>0){var f=new D(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new D(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new p,t=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new g);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,o=0,s=n.count;o<s;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new M(new Float32Array(i.length),3));else for(var r=t.normal.array,o=0,s=r.length;o<s;o++)r[o]=0;var c,l,u,h=t.normal.array,d=new a,f=new a,p=new a,g=new a,m=new a;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var y=0,b=n.length;y<b;++y)for(var w=n[y],_=w.start,x=w.count,o=_,s=_+x;o<s;o+=3)c=3*v[o+0],l=3*v[o+1],u=3*v[o+2],d.fromArray(i,c),f.fromArray(i,l),p.fromArray(i,u),g.subVectors(p,f),m.subVectors(d,f),g.cross(m),h[c]+=g.x,h[c+1]+=g.y,h[c+2]+=g.z,h[l]+=g.x,h[l+1]+=g.y,h[l+2]+=g.z,h[u]+=g.x,h[u+1]+=g.y,h[u+2]+=g.z}else for(var o=0,s=i.length;o<s;o+=9)d.fromArray(i,o),f.fromArray(i,o+3),p.fromArray(i,o+6),g.subVectors(p,f),m.subVectors(d,f),g.cross(m),h[o]=g.x,h[o+1]=g.y,h[o+2]=g.z,h[o+3]=g.x,h[o+4]=g.y,h[o+5]=g.z,h[o+6]=g.x,h[o+7]=g.y,h[o+8]=g.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i],o=r.array,s=e.attributes[i],a=s.array,c=s.itemSize,l=0,u=c*t;l<a.length;l++,u++)o[u]=a[l];return this},normalizeNormals:function(){var e=new a;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new j,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,s=r.itemSize,a=new o.constructor(t.length*s),c=0,l=0,u=0,h=t.length;u<h;u++){c=t[u]*s;for(var d=0;d<s;d++)a[l++]=o[c++]}e.addAttribute(i,new M(a,s))}for(var f=this.groups,u=0,h=f.length;u<h;u++){var p=f[u];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var s=o[n],r=Array.prototype.slice.call(s.array);e.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new j).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var s=o[t];this.addAttribute(t,s.clone())}var a=e.morphAttributes;for(t in a){var c=[],l=a[t];for(n=0,i=l.length;n<i;n++)c.push(l[n].clone());this.morphAttributes[t]=c}var u=e.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(S.prototype),U.prototype.constructor=U,$.prototype=Object.create(j.prototype),$.prototype.constructor=$,z.prototype=Object.create(S.prototype),z.prototype.constructor=z,H.prototype=Object.create(j.prototype),H.prototype.constructor=H;var jc=0;V.prototype=Object.assign(Object.create(i.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===ds;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}var n=void 0===e||"string"===typeof e;n&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ys&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==ls&&(i.side=this.side),this.vertexColors!==ps&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=t(e.textures),o=t(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},G.prototype=Object.create(V.prototype),G.prototype.constructor=G,G.prototype.isShaderMaterial=!0,G.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pc.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},G.prototype.toJSON=function(e){var t=V.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(q.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new a),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new a;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new a),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new a;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new a,t=new a,n=new a;return function(i,r,o,s){e.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),n.copy(this.origin).sub(e);var a,c,l,u,h=.5*i.distanceTo(r),d=-this.direction.dot(t),f=n.dot(this.direction),p=-n.dot(t),g=n.lengthSq(),m=Math.abs(1-d*d);if(m>0)if(a=d*p-f,c=d*f-p,u=h*m,a>=0)if(c>=-u)if(c<=u){var v=1/m;a*=v,c*=v,l=a*(a+d*c+2*f)+c*(d*a+c+2*p)+g}else c=h,a=Math.max(0,-(d*c+f)),l=-a*a+c*(c+2*p)+g;else c=-h,a=Math.max(0,-(d*c+f)),l=-a*a+c*(c+2*p)+g;else c<=-u?(a=Math.max(0,-(-d*h+f)),c=a>0?-h:Math.min(Math.max(-h,-p),h),l=-a*a+c*(c+2*p)+g):c<=u?(a=0,c=Math.min(Math.max(-h,-p),h),l=c*(c+2*p)+g):(a=Math.max(0,-(d*h+f)),c=a>0?h:Math.min(Math.max(-h,-p),h),l=-a*a+c*(c+2*p)+g);else c=d>0?-h:h,a=Math.max(0,-(d*c+f)),l=-a*a+c*(c+2*p)+g;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(t).multiplyScalar(c).add(e),l}}(),intersectSphere:function(){var e=new a;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,o=t.radius*t.radius;if(r>o)return null;var s=Math.sqrt(o-r),a=i-s,c=i+s;return a<0&&c<0?null:a<0?this.at(c,n):this.at(a,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,o,s,a,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(r=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||s>i?null:((s>n||n!==n)&&(n=s),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(){var e=new a;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new a,t=new a,n=new a,i=new a;return function(r,o,s,a,c){t.subVectors(o,r),n.subVectors(s,r),i.crossVectors(t,n);var l,u=this.direction.dot(i);if(u>0){if(a)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}e.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var f=-l*e.dot(i);return f<0?null:this.at(f/u,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(X.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new a),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new a),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new a),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new a,t=new a;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),o=t.dot(e),s=o/r;return i&&(s=Tc.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new a),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(K,{getNormal:function(){var e=new a;return function(t,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new a),r.subVectors(i,n),e.subVectors(t,n),r.cross(e);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var e=new a,t=new a,n=new a;return function(i,r,o,s,c){e.subVectors(s,r),t.subVectors(o,r),n.subVectors(i,r);var l=e.dot(e),u=e.dot(t),h=e.dot(n),d=t.dot(t),f=t.dot(n),p=l*d-u*u;if(void 0===c&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),c=new a),0===p)return c.set(-2,-1,-1);var g=1/p,m=(d*h-u*f)*g,v=(l*f-u*h)*g;return c.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new a;return function(t,n,i,r){return K.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(K.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new a,t=new a;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new a),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return K.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new a),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return K.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return K.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new m,t=[new X,new X,new X],n=new a,i=new a;return function(r,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new a);var s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),!0===this.containsPoint(n))o.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var c=0;c<t.length;c++){t[c].closestPointToPoint(n,!0,i);var l=n.distanceToSquared(i);l<s&&(s=l,o.copy(i))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Y.prototype=Object.assign(Object.create(x.prototype),{constructor:Y,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return x.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var s=r[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var a=i.morphTargets;if(void 0!==a&&a.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){function e(e,t,n,i,r,o,s){return K.getBarycoord(e,t,n,i,b),r.multiplyScalar(b.x),o.multiplyScalar(b.y),s.multiplyScalar(b.z),r.add(o).add(s),r.clone()}function t(e,t,n,i,r,o,s,a){if(null===(t.side===us?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,t.side!==hs,a)))return null;_.copy(a),_.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(_);return c<n.near||c>n.far?null:{distance:c,point:_.clone(),object:e}}function n(n,i,r,o,s,a,c,d){l.fromBufferAttribute(o,a),u.fromBufferAttribute(o,c),h.fromBufferAttribute(o,d);var f=t(n,n.material,i,r,l,u,h,w);if(f){s&&(m.fromBufferAttribute(s,a),v.fromBufferAttribute(s,c),y.fromBufferAttribute(s,d),f.uv=e(w,l,u,h,m,v,y));var p=new C(a,c,d);K.getNormal(l,u,h,p.normal),f.face=p,f.faceIndex=a}return f}var i=new o,s=new q,c=new g,l=new a,u=new a,h=new a,d=new a,f=new a,p=new a,m=new r,v=new r,y=new r,b=new a,w=new a,_=new a;return function(r,o){var a=this.geometry,g=this.material,b=this.matrixWorld;if(void 0!==g&&(null===a.boundingSphere&&a.computeBoundingSphere(),c.copy(a.boundingSphere),c.applyMatrix4(b),!1!==r.ray.intersectsSphere(c)&&(i.getInverse(b),s.copy(r.ray).applyMatrix4(i),null===a.boundingBox||!1!==s.intersectsBox(a.boundingBox)))){var _;if(a.isBufferGeometry){var x,E,A,C,S,M=a.index,k=a.attributes.position,T=a.attributes.uv;if(null!==M)for(C=0,S=M.count;C<S;C+=3)x=M.getX(C),E=M.getX(C+1),A=M.getX(C+2),(_=n(this,r,s,k,T,x,E,A))&&(_.faceIndex=Math.floor(C/3),o.push(_));else if(void 0!==k)for(C=0,S=k.count;C<S;C+=3)x=C,E=C+1,A=C+2,(_=n(this,r,s,k,T,x,E,A))&&(_.index=x,o.push(_))}else if(a.isGeometry){var F,O,P,L,R=Array.isArray(g),D=a.vertices,B=a.faces,I=a.faceVertexUvs[0];I.length>0&&(L=I);for(var N=0,j=B.length;N<j;N++){var U=B[N],$=R?g[U.materialIndex]:g;if(void 0!==$){if(F=D[U.a],O=D[U.b],P=D[U.c],!0===$.morphTargets){var z=a.morphTargets,H=this.morphTargetInfluences;l.set(0,0,0),u.set(0,0,0),h.set(0,0,0);for(var V=0,W=z.length;V<W;V++){var G=H[V];if(0!==G){var q=z[V].vertices;l.addScaledVector(d.subVectors(q[U.a],F),G),u.addScaledVector(f.subVectors(q[U.b],O),G),h.addScaledVector(p.subVectors(q[U.c],P),G)}}l.add(F),u.add(O),h.add(P),F=l,O=u,P=h}if(_=t(this,$,r,s,F,O,P,w)){if(L&&L[N]){var X=L[N];m.copy(X[0]),v.copy(X[1]),y.copy(X[2]),_.uv=e(w,F,O,P,m,v,y)}_.face=U,_.faceIndex=N,o.push(_)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ce.prototype=Object.create(l.prototype),ce.prototype.constructor=ce,ce.prototype.isCubeTexture=!0,Object.defineProperty(ce.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Uc=new l,$c=new ce,zc=[],Hc=[],Vc=new Float32Array(16),Wc=new Float32Array(9);je.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(e,t[o.id])}};var Gc=/([\w\d_]+)(\])?(\[|\.)?/g;ze.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},ze.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},ze.upload=function(e,t,n,i){for(var r=0,o=t.length;r!==o;++r){var s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}},ze.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var o=e[i];o.id in t&&n.push(o)}return n};var qc=0,Xc=0;pt.prototype=Object.create(V.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshDepthMaterial=!0,pt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},gt.prototype=Object.create(V.prototype),gt.prototype.constructor=gt,gt.prototype.isMeshDistanceMaterial=!0,gt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},vt.prototype=Object.create(l.prototype),vt.prototype.constructor=vt,xt.prototype=Object.assign(Object.create(E.prototype),{constructor:xt,isPerspectiveCamera:!0,copy:function(e,t){return E.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Tc.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Tc.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Tc.RAD2DEG*Math.atan(Math.tan(.5*Tc.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Tc.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/s,t-=o.offsetY*n/a,i*=o.width/s,n*=o.height/a}var c=this.filmOffset;0!==c&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Et.prototype=Object.assign(Object.create(xt.prototype),{constructor:Et,isArrayCamera:!0}),St.prototype.isFogExp2=!0,St.prototype.clone=function(){return new St(this.color.getHex(),this.density)},St.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Mt.prototype.isFog=!0,Mt.prototype.clone=function(){return new Mt(this.color.getHex(),this.near,this.far)},Mt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},kt.prototype=Object.assign(Object.create(x.prototype),{constructor:kt,copy:function(e,t){return x.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Tt.prototype=Object.create(V.prototype),Tt.prototype.constructor=Tt,Tt.prototype.isSpriteMaterial=!0,Tt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Ft.prototype=Object.assign(Object.create(x.prototype),{constructor:Ft,isSprite:!0,raycast:function(){var e=new a,t=new a,n=new a;return function(i,r){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var s=i.ray.origin.distanceTo(e);s<i.near||s>i.far||r.push({distance:s,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return x.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ot.prototype=Object.assign(Object.create(x.prototype),{constructor:Ot,copy:function(e){x.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new a;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),update:function(){var e=new a,t=new a;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,s=i.length;o<s&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<s;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=x.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Pt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new o;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new o,t=new o;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,s=0,a=n.length;s<a;s++){var c=n[s]?n[s].matrixWorld:t;e.multiplyMatrices(c,i[s]),e.toArray(r,16*s)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Pt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),Lt.prototype=Object.assign(Object.create(x.prototype),{constructor:Lt,isBone:!0}),Rt.prototype=Object.assign(Object.create(Y.prototype),{constructor:Rt,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new Lt,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],-1!==t.parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new u,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),e=1/i.manhattanLength(),e!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){Y.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Dt.prototype=Object.create(V.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isLineBasicMaterial=!0,Dt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Bt.prototype=Object.assign(Object.create(x.prototype),{constructor:Bt,isLine:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,s=i.count;o<s;o++)e.fromBufferAttribute(i,o-1),t.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var a=n.vertices,r=n.lineDistances;r[0]=0;for(var o=1,s=a.length;o<s;o++)r[o]=r[o-1],r[o]+=a[o-1].distanceTo(a[o])}return this}}(),raycast:function(){var e=new o,t=new q,n=new g;return function(i,r){var o=i.linePrecision,s=o*o,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var u=new a,h=new a,d=new a,f=new a,p=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var g=c.index,m=c.attributes,v=m.position.array;if(null!==g)for(var y=g.array,b=0,w=y.length-1;b<w;b+=p){var _=y[b],x=y[b+1];u.fromArray(v,3*_),h.fromArray(v,3*x);var E=t.distanceSqToSegment(u,h,f,d);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var A=i.ray.origin.distanceTo(f);A<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,w=v.length/3-1;b<w;b+=p){u.fromArray(v,3*b),h.fromArray(v,3*b+3);var E=t.distanceSqToSegment(u,h,f,d);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var A=i.ray.origin.distanceTo(f);A<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var C=c.vertices,S=C.length,b=0;b<S-1;b+=p){var E=t.distanceSqToSegment(C[b],C[b+1],f,d);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var A=i.ray.origin.distanceTo(f);A<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),It.prototype=Object.assign(Object.create(Bt.prototype),{constructor:It,isLineSegments:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],o=0,s=i.count;o<s;o+=2)e.fromBufferAttribute(i,o),t.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var a=n.vertices,r=n.lineDistances,o=0,s=a.length;o<s;o+=2)e.copy(a[o]),t.copy(a[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);return this}}()}),Nt.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Nt,isLineLoop:!0}),jt.prototype=Object.create(V.prototype),jt.prototype.constructor=jt,jt.prototype.isPointsMaterial=!0,jt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Ut.prototype=Object.assign(Object.create(x.prototype),{constructor:Ut,isPoints:!0,raycast:function(){var e=new o,t=new q,n=new g;return function(i,r){function o(e,n){var o=t.distanceSqToPoint(e);if(o<d){t.closestPointToPoint(e,p),p.applyMatrix4(l);var a=i.ray.origin.distanceTo(p);if(a<i.near||a>i.far)return;r.push({distance:a,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:s})}}var s=this,c=this.geometry,l=this.matrixWorld,u=i.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),n.radius+=u,!1!==i.ray.intersectsSphere(n)){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,f=new a,p=new a;if(c.isBufferGeometry){var g=c.index,m=c.attributes,v=m.position.array;if(null!==g)for(var y=g.array,b=0,w=y.length;b<w;b++){var _=y[b];f.fromArray(v,3*_),o(f,_)}else for(var b=0,x=v.length/3;b<x;b++)f.fromArray(v,3*b),o(f,b)}else for(var E=c.vertices,b=0,x=E.length;b<x;b++)o(E[b],b)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),$t.prototype=Object.assign(Object.create(x.prototype),{constructor:$t,isGroup:!0}),zt.prototype=Object.assign(Object.create(l.prototype),{constructor:zt,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ht.prototype=Object.create(l.prototype),Ht.prototype.constructor=Ht,Ht.prototype.isCompressedTexture=!0,Vt.prototype=Object.create(l.prototype),Vt.prototype.constructor=Vt,Vt.prototype.isDepthTexture=!0,Wt.prototype=Object.create(j.prototype),Wt.prototype.constructor=Wt,Gt.prototype=Object.create(S.prototype),Gt.prototype.constructor=Gt,qt.prototype=Object.create(j.prototype),qt.prototype.constructor=qt,Xt.prototype=Object.create(S.prototype),Xt.prototype.constructor=Xt,Kt.prototype=Object.create(j.prototype),Kt.prototype.constructor=Kt,Yt.prototype=Object.create(S.prototype),Yt.prototype.constructor=Yt,Zt.prototype=Object.create(Kt.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(S.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(Kt.prototype),Qt.prototype.constructor=Qt,en.prototype=Object.create(S.prototype),en.prototype.constructor=en,tn.prototype=Object.create(Kt.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(S.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Kt.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(S.prototype),on.prototype.constructor=on,sn.prototype=Object.create(j.prototype),sn.prototype.constructor=sn,an.prototype=Object.create(S.prototype),an.prototype.constructor=an,cn.prototype=Object.create(j.prototype),cn.prototype.constructor=cn,ln.prototype=Object.create(S.prototype),ln.prototype.constructor=ln,un.prototype=Object.create(j.prototype),un.prototype.constructor=un;var Kc={triangulate:function(e,t,n){n=n||2;var i=t&&t.length,r=i?t[0]*n:e.length,o=hn(e,0,r,n,!0),s=[];if(!o)return s;var a,c,l,u,h,d,f;if(i&&(o=yn(e,t,o,n)),e.length>80*n){a=l=e[0],c=u=e[1];for(var p=n;p<r;p+=n)h=e[p],d=e[p+1],h<a&&(a=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);f=Math.max(l-a,u-c),f=0!==f?1/f:0}return fn(o,s,n,a,c,f),s}},Yc={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Yc.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];jn(e),Un(n,e);var o=e.length;t.forEach(jn);for(var s=0;s<t.length;s++)i.push(o),o+=t[s].length,Un(n,t[s]);for(var a=Kc.triangulate(n,i),s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}};$n.prototype=Object.create(S.prototype),$n.prototype.constructor=$n,zn.prototype=Object.create(j.prototype),zn.prototype.constructor=zn,zn.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:t,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},zn.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var i=0;i<n;i++){var r=e[i];this.addShape(r,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new D(t.arrays.position,3)),this.addAttribute("uv",new D(t.arrays.uv,2))},zn.prototype.addShape=function(e,t){function n(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function i(e,t,n){var i,o,s,a=e.x-t.x,c=e.y-t.y,l=n.x-e.x,u=n.y-e.y,h=a*a+c*c,d=a*u-c*l;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(l*l+u*u),g=t.x-c/f,m=t.y+a/f,v=n.x-u/p,y=n.y+l/p,b=((v-g)*u-(y-m)*l)/(a*u-c*l);i=g+a*b-e.x,o=m+c*b-e.y;var w=i*i+o*o;if(w<=2)return new r(i,o);s=Math.sqrt(w/2)}else{var _=!1;a>Number.EPSILON?l>Number.EPSILON&&(_=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(_=!0):Math.sign(c)===Math.sign(u)&&(_=!0),_?(i=-c,o=a,s=Math.sqrt(h)):(i=a,o=c,s=Math.sqrt(h/2))}return new r(i/s,o/s)}function o(e,t){var n,i;for(Z=e.length;--Z>=0;){n=Z,i=Z-1,i<0&&(i=e.length-1);var r=0,o=k+2*C;for(r=0;r<o;r++){var s=X*r,a=X*(r+1);l(t+n+s,t+i+s,t+i+a,t+n+a)}}}function s(e,t,n){_.push(e),_.push(t),_.push(n)}function c(e,t,n){u(e),u(t),u(n);var i=y.length/3,r=O.generateTopUV(B,y,i-3,i-2,i-1);h(r[0]),h(r[1]),h(r[2])}function l(e,t,n,i){u(e),u(t),u(i),u(t),u(n),u(i);var r=y.length/3,o=O.generateSideWallUV(B,y,r-6,r-3,r-2,r-1);h(o[0]),h(o[1]),h(o[3]),h(o[1]),h(o[2]),h(o[3])}function u(e){b.push(y.length/3),y.push(_[3*e+0]),y.push(_[3*e+1]),y.push(_[3*e+2])}function h(e){w.push(e.x),w.push(e.y)}var d,f,p,g,m,v=t.arrays?t.arrays:this.getArrays(),y=v.position,b=v.index,w=v.uv,_=[],x=void 0!==t.amount?t.amount:100,E=void 0!==t.bevelThickness?t.bevelThickness:6,A=void 0!==t.bevelSize?t.bevelSize:E-2,C=void 0!==t.bevelSegments?t.bevelSegments:3,S=void 0===t.bevelEnabled||t.bevelEnabled,M=void 0!==t.curveSegments?t.curveSegments:12,k=void 0!==t.steps?t.steps:1,T=t.extrudePath,F=!1,O=void 0!==t.UVGenerator?t.UVGenerator:$n.WorldUVGenerator;T&&(d=T.getSpacedPoints(k),F=!0,S=!1,f=void 0!==t.frames?t.frames:T.computeFrenetFrames(k,!1),p=new a,g=new a,m=new a),S||(C=0,E=0,A=0);var P,L,R,B=this,I=e.extractPoints(M),N=I.shape,j=I.holes;if(!Yc.isClockWise(N))for(N=N.reverse(),L=0,R=j.length;L<R;L++)P=j[L],Yc.isClockWise(P)&&(j[L]=P.reverse());var U=Yc.triangulateShape(N,j),$=N;for(L=0,R=j.length;L<R;L++)P=j[L],N=N.concat(P);for(var z,H,V,W,G,q,X=N.length,K=U.length,Y=[],Z=0,J=$.length,Q=J-1,ee=Z+1;Z<J;Z++,Q++,ee++)Q===J&&(Q=0),ee===J&&(ee=0),Y[Z]=i($[Z],$[Q],$[ee]);var te,ne=[],ie=Y.concat();for(L=0,R=j.length;L<R;L++){for(P=j[L],te=[],Z=0,J=P.length,Q=J-1,ee=Z+1;Z<J;Z++,Q++,ee++)Q===J&&(Q=0),ee===J&&(ee=0),te[Z]=i(P[Z],P[Q],P[ee]);ne.push(te),ie=ie.concat(te)}for(z=0;z<C;z++){for(V=z/C,W=E*Math.cos(V*Math.PI/2),H=A*Math.sin(V*Math.PI/2),Z=0,J=$.length;Z<J;Z++)G=n($[Z],Y[Z],H),s(G.x,G.y,-W);for(L=0,R=j.length;L<R;L++)for(P=j[L],te=ne[L],Z=0,J=P.length;Z<J;Z++)G=n(P[Z],te[Z],H),s(G.x,G.y,-W)}for(H=A,Z=0;Z<X;Z++)G=S?n(N[Z],ie[Z],H):N[Z],F?(g.copy(f.normals[0]).multiplyScalar(G.x),p.copy(f.binormals[0]).multiplyScalar(G.y),m.copy(d[0]).add(g).add(p),s(m.x,m.y,m.z)):s(G.x,G.y,0);var re;for(re=1;re<=k;re++)for(Z=0;Z<X;Z++)G=S?n(N[Z],ie[Z],H):N[Z],F?(g.copy(f.normals[re]).multiplyScalar(G.x),p.copy(f.binormals[re]).multiplyScalar(G.y),m.copy(d[re]).add(g).add(p),s(m.x,m.y,m.z)):s(G.x,G.y,x/k*re);for(z=C-1;z>=0;z--){for(V=z/C,W=E*Math.cos(V*Math.PI/2),H=A*Math.sin(V*Math.PI/2),Z=0,J=$.length;Z<J;Z++)G=n($[Z],Y[Z],H),s(G.x,G.y,x+W);for(L=0,R=j.length;L<R;L++)for(P=j[L],te=ne[L],Z=0,J=P.length;Z<J;Z++)G=n(P[Z],te[Z],H),F?s(G.x,G.y+d[k-1].y,d[k-1].x+W):s(G.x,G.y,x+W)}!function(){var e=y.length/3;if(S){var t=0,n=X*t;for(Z=0;Z<K;Z++)q=U[Z],c(q[2]+n,q[1]+n,q[0]+n);for(t=k+2*C,n=X*t,Z=0;Z<K;Z++)q=U[Z],c(q[0]+n,q[1]+n,q[2]+n)}else{for(Z=0;Z<K;Z++)q=U[Z],c(q[2],q[1],q[0]);for(Z=0;Z<K;Z++)q=U[Z],c(q[0]+X*k,q[1]+X*k,q[2]+X*k)}B.addGroup(e,y.length/3-e,0)}(),function(){var e=y.length/3,t=0;for(o($,t),t+=$.length,L=0,R=j.length;L<R;L++)P=j[L],o(P,t),t+=P.length;B.addGroup(e,y.length/3-e,1)}(),t.arrays||(this.setIndex(b),this.addAttribute("position",new D(y,3)),this.addAttribute("uv",new D(w,2)))},$n.WorldUVGenerator={generateTopUV:function(e,t,n,i,o){var s=t[3*n],a=t[3*n+1],c=t[3*i],l=t[3*i+1],u=t[3*o],h=t[3*o+1];return[new r(s,a),new r(c,l),new r(u,h)]},generateSideWallUV:function(e,t,n,i,o,s){var a=t[3*n],c=t[3*n+1],l=t[3*n+2],u=t[3*i],h=t[3*i+1],d=t[3*i+2],f=t[3*o],p=t[3*o+1],g=t[3*o+2],m=t[3*s],v=t[3*s+1],y=t[3*s+2];return Math.abs(c-h)<.01?[new r(a,1-l),new r(u,1-d),new r(f,1-g),new r(m,1-y)]:[new r(c,1-l),new r(h,1-d),new r(p,1-g),new r(v,1-y)]}},Hn.prototype=Object.create(S.prototype),Hn.prototype.constructor=Hn,Vn.prototype=Object.create(zn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(S.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Object.create(j.prototype),Gn.prototype.constructor=Gn,qn.prototype=Object.create(S.prototype),qn.prototype.constructor=qn,Xn.prototype=Object.create(j.prototype),Xn.prototype.constructor=Xn,Kn.prototype=Object.create(S.prototype),Kn.prototype.constructor=Kn,Yn.prototype=Object.create(j.prototype),Yn.prototype.constructor=Yn,Zn.prototype=Object.create(S.prototype),Zn.prototype.constructor=Zn,Zn.prototype.toJSON=function(){var e=S.prototype.toJSON.call(this);return Qn(this.parameters.shapes,e)},Jn.prototype=Object.create(j.prototype),Jn.prototype.constructor=Jn,Jn.prototype.toJSON=function(){var e=j.prototype.toJSON.call(this);return Qn(this.parameters.shapes,e)},ei.prototype=Object.create(j.prototype),ei.prototype.constructor=ei,ti.prototype=Object.create(S.prototype),ti.prototype.constructor=ti,ni.prototype=Object.create(j.prototype),ni.prototype.constructor=ni,ii.prototype=Object.create(ti.prototype),ii.prototype.constructor=ii,ri.prototype=Object.create(ni.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(S.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(j.prototype),si.prototype.constructor=si;var Zc=Object.freeze({WireframeGeometry:Wt,ParametricGeometry:Gt,ParametricBufferGeometry:qt,TetrahedronGeometry:Yt,TetrahedronBufferGeometry:Zt,OctahedronGeometry:Jt,OctahedronBufferGeometry:Qt,IcosahedronGeometry:en,IcosahedronBufferGeometry:tn,DodecahedronGeometry:nn,DodecahedronBufferGeometry:rn,PolyhedronGeometry:Xt,PolyhedronBufferGeometry:Kt,TubeGeometry:on,TubeBufferGeometry:sn,TorusKnotGeometry:an,TorusKnotBufferGeometry:cn,TorusGeometry:ln,TorusBufferGeometry:un,TextGeometry:Hn,TextBufferGeometry:Vn,SphereGeometry:Wn,SphereBufferGeometry:Gn,RingGeometry:qn,RingBufferGeometry:Xn,PlaneGeometry:z,PlaneBufferGeometry:H,LatheGeometry:Kn,LatheBufferGeometry:Yn,ShapeGeometry:Zn,ShapeBufferGeometry:Jn,ExtrudeGeometry:$n,ExtrudeBufferGeometry:zn,EdgesGeometry:ei,ConeGeometry:ii,ConeBufferGeometry:ri,CylinderGeometry:ti,CylinderBufferGeometry:ni,CircleGeometry:oi,CircleBufferGeometry:si,BoxGeometry:U,BoxBufferGeometry:$});ai.prototype=Object.create(V.prototype),ai.prototype.constructor=ai,ai.prototype.isShadowMaterial=!0,ai.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this},ci.prototype=Object.create(G.prototype),ci.prototype.constructor=ci,ci.prototype.isRawShaderMaterial=!0,li.prototype=Object.create(V.prototype),li.prototype.constructor=li,li.prototype.isMeshStandardMaterial=!0,li.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ui.prototype=Object.create(li.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshPhysicalMaterial=!0,ui.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},hi.prototype=Object.create(V.prototype),hi.prototype.constructor=hi,hi.prototype.isMeshPhongMaterial=!0,hi.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},di.prototype=Object.create(hi.prototype),di.prototype.constructor=di,di.prototype.isMeshToonMaterial=!0,di.prototype.copy=function(e){return hi.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},fi.prototype=Object.create(V.prototype),fi.prototype.constructor=fi,fi.prototype.isMeshNormalMaterial=!0,fi.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},pi.prototype=Object.create(V.prototype),pi.prototype.constructor=pi,pi.prototype.isMeshLambertMaterial=!0,pi.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gi.prototype=Object.create(Dt.prototype),gi.prototype.constructor=gi,gi.prototype.isLineDashedMaterial=!0,gi.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Jc=Object.freeze({ShadowMaterial:ai,SpriteMaterial:Tt,RawShaderMaterial:ci,ShaderMaterial:G,PointsMaterial:jt,MeshPhysicalMaterial:ui,MeshStandardMaterial:li,MeshPhongMaterial:hi,MeshToonMaterial:di,MeshNormalMaterial:fi,MeshLambertMaterial:pi,MeshDepthMaterial:pt,MeshDistanceMaterial:gt,MeshBasicMaterial:W,LineDashedMaterial:gi,LineBasicMaterial:Dt,Material:V}),Qc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},el=new mi,tl={};Object.assign(vi.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Qc.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(void 0!==tl[e])return void tl[e].push({onLoad:t,onProgress:n,onError:i});var s=/^data:(.*?)(;base64)?,(.*)$/,a=e.match(s);if(a){var c=a[1],l=!!a[2],u=a[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(u.length),p=0;p<u.length;p++)f[p]=u.charCodeAt(p);h="blob"===d?new Blob([f.buffer],{type:c}):f.buffer;break;case"document":var g=new DOMParser;h=g.parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u}window.setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{tl[e]=[],tl[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Qc.add(e,n);var i=tl[e];if(delete tl[e],200===this.status){for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onLoad&&a.onLoad(n)}r.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onLoad&&a.onLoad(n)}r.manager.itemEnd(e)}else{for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=tl[e],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=tl[e];delete tl[e];for(var i=0,o=n.length;i<o;i++){var s=n[i];s.onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(yi.prototype,{load:function(e,t,n,i){var r=this,o=[],s=new Ht;s.image=o;var a=new vi(this.manager);if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,u=e.length;l<u;++l)!function(l){a.load(e[l],function(e){var n=r._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(s.minFilter=ga),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}(l);else a.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){o[a]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+c]),o[a].format=n.format,o[a].width=n.width,o[a].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=ga),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s},setPath:function(e){return this.path=e,this}}),Object.assign(bi.prototype,{load:function(e,t,n,i){var r=this,o=new f,s=new vi(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ua,o.wrapT=void 0!==n.wrapT?n.wrapT:ua,o.magFilter=void 0!==n.magFilter?n.magFilter:ga,o.minFilter=void 0!==n.minFilter?n.minFilter:va,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=ga),o.needsUpdate=!0,t&&t(o,n))},n,i),o}}),Object.assign(wi.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Qc.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Qc.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),s.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(_i.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new ce,o=new wi(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,a=0;a<e.length;++a)!function(n){o.load(e[n],function(e){r.images[n]=e,6===++s&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}(a);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(xi.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new l,o=new wi(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){r.image=n;var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Oa:Pa,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ei.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,o=i.length;n=t||e*i[o-1];for(var s,a=0,c=o-1;a<=c;)if(r=Math.floor(a+(c-a)/2),(s=i[r]-n)<0)a=r+1;else{if(!(s>0)){c=r;break}c=r-1}if(r=c,i[r]===n)return r/(o-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,s=new a,c=[],l=[],u=[],h=new a,d=new o;for(n=0;n<=e;n++)i=n/e,c[n]=this.getTangentAt(i),c[n].normalize();l[0]=new a,u[0]=new a;var f=Number.MAX_VALUE,p=Math.abs(c[0].x),g=Math.abs(c[0].y),m=Math.abs(c[0].z);for(p<=f&&(f=p,s.set(1,0,0)),g<=f&&(f=g,s.set(0,1,0)),m<=f&&s.set(0,0,1),h.crossVectors(c[0],s).normalize(),l[0].crossVectors(c[0],h),u[0].crossVectors(c[0],l[0]),n=1;n<=e;n++)l[n]=l[n-1].clone(),u[n]=u[n-1].clone(),h.crossVectors(c[n-1],c[n]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(Tc.clamp(c[n-1].dot(c[n]),-1,1)),l[n].applyMatrix4(d.makeRotationAxis(h,r))),u[n].crossVectors(c[n],l[n]);if(!0===t)for(r=Math.acos(Tc.clamp(l[0].dot(l[e]),-1,1)),r/=e,c[0].dot(h.crossVectors(l[0],l[e]))>0&&(r=-r),n=1;n<=e;n++)l[n].applyMatrix4(d.makeRotationAxis(c[n],r*n)),u[n].crossVectors(c[n],l[n]);return{tangents:c,normals:l,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ai.prototype=Object.create(Ei.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isEllipseCurve=!0,Ai.prototype.getPoint=function(e,t){for(var n=t||new r,i=2*Math.PI,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=s?0:i),!0!==this.aClockwise||s||(o===i?o=-i:o-=i);var a=this.aStartAngle+e*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=c-this.aX,f=l-this.aY;c=d*u-f*h+this.aX,l=d*h+f*u+this.aY}return n.set(c,l)},Ai.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ai.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ai.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ci.prototype=Object.create(Ai.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isArcCurve=!0;var nl=new a,il=new Si,rl=new Si,ol=new Si;Mi.prototype=Object.create(Ei.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isCatmullRomCurve3=!0,Mi.prototype.getPoint=function(e,t){var n=t||new a,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e,s=Math.floor(o),c=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i.length)+1)*i.length:0===c&&s===r-1&&(s=r-2,c=1);var l,u,h,d;if(this.closed||s>0?l=i[(s-1)%r]:(nl.subVectors(i[0],i[1]).add(i[0]),l=nl),u=i[s%r],h=i[(s+1)%r],this.closed||s+2<r?d=i[(s+2)%r]:(nl.subVectors(i[r-1],i[r-2]).add(i[r-1]),d=nl),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(l.distanceToSquared(u),f),g=Math.pow(u.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),il.initNonuniformCatmullRom(l.x,u.x,h.x,d.x,p,g,m),rl.initNonuniformCatmullRom(l.y,u.y,h.y,d.y,p,g,m),ol.initNonuniformCatmullRom(l.z,u.z,h.z,d.z,p,g,m)}else"catmullrom"===this.curveType&&(il.initCatmullRom(l.x,u.x,h.x,d.x,this.tension),rl.initCatmullRom(l.y,u.y,h.y,d.y,this.tension),ol.initCatmullRom(l.z,u.z,h.z,d.z,this.tension));return n.set(il.calc(c),rl.calc(c),ol.calc(c)),n},Mi.prototype.copy=function(e){Ei.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Mi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Mi.prototype.fromJSON=function(e){Ei.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new a).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ni.prototype=Object.create(Ei.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isCubicBezierCurve=!0,Ni.prototype.getPoint=function(e,t){var n=t||new r,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(Ii(e,i.x,o.x,s.x,a.x),Ii(e,i.y,o.y,s.y,a.y)),n},Ni.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ni.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ni.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ji.prototype=Object.create(Ei.prototype),ji.prototype.constructor=ji,ji.prototype.isCubicBezierCurve3=!0,ji.prototype.getPoint=function(e,t){var n=t||new a,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ii(e,i.x,r.x,o.x,s.x),Ii(e,i.y,r.y,o.y,s.y),Ii(e,i.z,r.z,o.z,s.z)),n},ji.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ji.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ji.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ui.prototype=Object.create(Ei.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isLineCurve=!0,Ui.prototype.getPoint=function(e,t){var n=t||new r;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ui.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ui.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ui.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ui.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ui.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$i.prototype=Object.create(Ei.prototype),$i.prototype.constructor=$i,$i.prototype.isLineCurve3=!0,$i.prototype.getPoint=function(e,t){var n=t||new a;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},$i.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},$i.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$i.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$i.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},zi.prototype=Object.create(Ei.prototype),zi.prototype.constructor=zi,zi.prototype.isQuadraticBezierCurve=!0,zi.prototype.getPoint=function(e,t){var n=t||new r,i=this.v0,o=this.v1,s=this.v2;return n.set(Pi(e,i.x,o.x,s.x),Pi(e,i.y,o.y,s.y)),n},zi.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zi.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hi.prototype=Object.create(Ei.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isQuadraticBezierCurve3=!0,Hi.prototype.getPoint=function(e,t){var n=t||new a,i=this.v0,r=this.v1,o=this.v2;return n.set(Pi(e,i.x,r.x,o.x),Pi(e,i.y,r.y,o.y),Pi(e,i.z,r.z,o.z)),n},Hi.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hi.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Vi.prototype=Object.create(Ei.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isSplineCurve=!0,Vi.prototype.getPoint=function(e,t){var n=t||new r,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,c=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(ki(a,c.x,l.x,u.x,h.x),ki(a,c.y,l.y,u.y,h.y)),n},Vi.prototype.copy=function(e){Ei.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},Vi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},Vi.prototype.fromJSON=function(e){Ei.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new r).fromArray(i))}return this};var sl=Object.freeze({ArcCurve:Ci,CatmullRomCurve3:Mi,CubicBezierCurve:Ni,CubicBezierCurve3:ji,EllipseCurve:Ai,LineCurve:Ui,LineCurve3:$i,QuadraticBezierCurve:zi,QuadraticBezierCurve3:Hi,SplineCurve:Vi});Wi.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Wi,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ui(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,o=this.curves[i],s=o.getLength(),a=0===s?0:1-r/s;return o.getPointAt(a)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],s=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s),c=0;c<a.length;c++){var l=a[c];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Ei.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ei.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Ei.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new sl[i.type]).fromJSON(i))}return this}}),Gi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Gi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Ui(this.currentPoint.clone(),new r(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var o=new zi(this.currentPoint.clone(),new r(e,t),new r(n,i));this.curves.push(o),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,o,s){var a=new Ni(this.currentPoint.clone(),new r(e,t),new r(n,i),new r(o,s));this.curves.push(a),this.currentPoint.set(o,s)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Vi(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(e+s,t+a,n,i,r,o)},absarc:function(e,t,n,i,r,o){this.absellipse(e,t,n,n,i,r,o)},ellipse:function(e,t,n,i,r,o,s,a){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,n,i,r,o,s,a)},absellipse:function(e,t,n,i,r,o,s,a){var c=new Ai(e,t,n,i,r,o,s,a);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return Wi.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Wi.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Wi.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),qi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:qi,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Gi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Gi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Gi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Gi).fromJSON(i))}return this}}),Xi.prototype=Object.assign(Object.create(x.prototype),{constructor:Xi,isLight:!0,copy:function(e){return x.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ki.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ki,isHemisphereLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Yi.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Zi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Zi,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Tc.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),Ji.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ji,isSpotLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Qi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Qi,isPointLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),er.prototype=Object.assign(Object.create(Yi.prototype),{constructor:er}),tr.prototype=Object.assign(Object.create(Xi.prototype),{constructor:tr,isDirectionalLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),nr.prototype=Object.assign(Object.create(Xi.prototype),{constructor:nr,isAmbientLight:!0}),ir.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ir,isRectAreaLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Xi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),rr.prototype=Object.assign(Object.create(pr.prototype),{constructor:rr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:uc,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),or.prototype=Object.assign(Object.create(pr.prototype),{constructor:or,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:uc,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(sr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var o;n:{i:if(!(e<i)){for(var s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}{if(e>=r)break e;var a=t[1];e<a&&(n=2,r=a);for(var s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(sr.prototype,{beforeStart_:sr.prototype.copySampleValue_,afterEnd_:sr.prototype.copySampleValue_}),ar.prototype=Object.assign(Object.create(sr.prototype),{constructor:ar,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=(n-t)/(i-t),u=c+a;c!==u;c+=4)s.slerpFlat(r,0,o,c-a,o,c,l);return r}}),cr.prototype=Object.assign(Object.create(pr.prototype),{constructor:cr,ValueTypeName:"quaternion",DefaultInterpolation:hc,InterpolantFactoryMethodLinear:function(e){return new ar(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),lr.prototype=Object.assign(Object.create(pr.prototype),{constructor:lr,ValueTypeName:"color"}),ur.prototype=Object.assign(Object.create(pr.prototype),{constructor:ur,ValueTypeName:"number"}),hr.prototype=Object.assign(Object.create(sr.prototype),{constructor:hr,DefaultSettings_:{endingStart:fc,endingEnd:fc},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case pc:r=e,s=2*t-n;break;case gc:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case pc:o=e,a=2*n-t;break;case gc:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}var c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(a-n),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,g=p*f,m=-h*g+2*h*p-h*f,v=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*g+(1.5+d)*p+.5*f,b=d*g-d*p,w=0;w!==s;++w)r[w]=m*o[l+w]+v*o[c+w]+y*o[a+w]+b*o[u+w];return r}}),dr.prototype=Object.assign(Object.create(sr.prototype),{constructor:dr,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,c=a-s,l=(n-t)/(i-t),u=1-l,h=0;h!==s;++h)r[h]=o[c+h]*u+o[a+h]*l;return r}}),fr.prototype=Object.assign(Object.create(sr.prototype),{constructor:fr,interpolate_:function(e){return this.copySampleValue_(e-1)}});var al={arraySlice:function(e,t,n){return al.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(t),i},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),o=0,s=0;s!==i;++o)for(var a=n[o]*t,c=0;c!==t;++c)r[s++]=e[a+c];return r},flattenJSON:function(e,t,n,i){for(var r=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[r++];if(void 0!==o){var s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(t.push(o.time),n.push.apply(n,s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)}}};Object.assign(pr,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=pr._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];al.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:al.convertArray(e.times,Array),values:al.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ur;case"vector":case"vector2":case"vector3":case"vector4":return gr;case"color":return lr;case"quaternion":return cr;case"bool":case"boolean":return or;case"string":return rr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(pr.prototype,{constructor:pr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:hc,InterpolantFactoryMethodDiscrete:function(e){return new fr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new dr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new hr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case uc:t=this.InterpolantFactoryMethodDiscrete;break;case hc:t=this.InterpolantFactoryMethodLinear;break;case dc:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uc;case this.InterpolantFactoryMethodLinear:return hc;case this.InterpolantFactoryMethodSmooth:return dc}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var s=this.getValueSize();this.times=al.arraySlice(n,r,o),this.values=al.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,s=0;s!==r;s++){var a=n[s];if("number"===typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),e=!1;break}if(null!==o&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),e=!1;break}o=a}if(void 0!==i&&al.isTypedArray(i))for(var s=0,c=i.length;s!==c;++s){var l=i[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===dc,r=1,o=e.length-1,s=1;s<o;++s){var a=!1,c=e[s];if(c!==e[s+1]&&(1!==s||c!==c[0]))if(i)a=!0;else for(var l=s*n,u=l-n,h=l+n,d=0;d!==n;++d){var f=t[l+d];if(f!==t[u+d]||f!==t[h+d]){a=!0;break}}if(a){if(s!==r){e[r]=e[s];for(var p=s*n,g=r*n,d=0;d!==n;++d)t[g+d]=t[p+d]}++r}}if(o>0){e[r]=e[o];for(var p=o*n,g=r*n,d=0;d!==n;++d)t[g+d]=t[p+d];++r}return r!==e.length&&(this.times=al.arraySlice(e,0,r),this.values=al.arraySlice(t,0,r*n)),this}}),gr.prototype=Object.assign(Object.create(pr.prototype),{constructor:gr,ValueTypeName:"vector"}),Object.assign(mr,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,o=n.length;r!==o;++r)t.push(pr.parse(n[r]).scale(i));return new mr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,o=n.length;r!==o;++r)t.push(pr.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,o=[],s=0;s<r;s++){var a=[],c=[];a.push((s+r-1)%r,s,(s+1)%r),c.push(0,1,0);var l=al.getKeyframeOrder(a);a=al.sortedArray(a,1,l),c=al.sortedArray(c,1,l),i||0!==a[0]||(a.push(r),c.push(c[0])),o.push(new ur(".morphTargetInfluences["+t[s].name+"]",a,c).scale(1/n))}return new mr(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,s=e.length;o<s;o++){var a=e[o],c=a.name.match(r);if(c&&c.length>1){var l=c[1],u=i[l];u||(i[l]=u=[]),u.push(a)}}var h=[];for(var l in i)h.push(mr.CreateFromMorphTargetSequence(l,i[l],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var o=[],s=[];al.flattenJSON(n,o,s,i),0!==o.length&&r.push(new e(t,o,s))}},i=[],r=e.name||"default",o=e.length||-1,s=e.fps||30,a=e.hierarchy||[],c=0;c<a.length;c++){var l=a[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var f in u){for(var p=[],g=[],d=0;d!==l[h].morphTargets.length;++d){var m=l[h];p.push(m.time),g.push(m.morphTarget===f?1:0)}i.push(new ur(".morphTargetInfluence["+f+"]",p,g))}o=u.length*(s||1)}else{var v=".bones["+t[c].name+"]";n(gr,v+".position",l,"pos",i),n(cr,v+".quaternion",l,"rot",i),n(gr,v+".scale",l,"scl",i)}}return 0===i.length?null:new mr(r,o,i)}}),Object.assign(mr.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,i=e.length;n!==i;++n){var r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(vr.prototype,{load:function(e,t,n,i){var r=this;new vi(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,i=new Jc[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=t(e.map)),void 0!==e.alphaMap&&(i.alphaMap=t(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=t(e.normalMap)),void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new r).fromArray(o)}return void 0!==e.displacementMap&&(i.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=t(e.specularMap)),void 0!==e.envMap&&(i.envMap=t(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=t(e.gradientMap)),i}}),Object.assign(yr.prototype,{load:function(e,t,n,i){var r=this;new vi(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new j,n=e.data.index;if(void 0!==n){var i=new cl[n.type](n.array);t.setIndex(new M(i,1))}var r=e.data.attributes;for(var o in r){var s=r[o],i=new cl[s.type](s.array);t.addAttribute(o,new M(i,s.itemSize,s.normalized))}var c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(var l=0,u=c.length;l!==u;++l){var h=c[l];t.addGroup(h.start,h.count,h.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new a;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new g(f,d.radius)}return t}});var cl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};br.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],o=t[n+1];if(r.test(e))return o}return null}},Object.assign(br.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:vs,NormalBlending:ys,AdditiveBlending:bs,SubtractiveBlending:ws,MultiplyBlending:_s,CustomBlending:xs},t=new y,n=new xi,i=new vr;return function(r,o,s){function a(e,t,i,r,a){var l,u=o+e,h=br.Handlers.get(u);null!==h?l=h.load(u):(n.setCrossOrigin(s),l=n.load(u)),void 0!==t&&(l.repeat.fromArray(t),1!==t[0]&&(l.wrapS=la),1!==t[1]&&(l.wrapT=la)),void 0!==i&&l.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(l.wrapS=la),"mirror"===r[0]&&(l.wrapS=ha),"repeat"===r[1]&&(l.wrapT=la),"mirror"===r[1]&&(l.wrapT=ha)),void 0!==a&&(l.anisotropy=a);var d=Tc.generateUUID();return c[d]=l,d}var c={},l={uuid:Tc.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=us;break;case"doubleSided":l.side=hs;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":!0===h&&(l.vertexColors=ms),"face"===h&&(l.vertexColors=gs);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(c),i.parse(l)}}()});var ll={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};Object.assign(wr.prototype,{load:function(e,t,n,i){var r=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:ll.extractUrlBase(e),s=new vi(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,function(n){var i=JSON.parse(n),s=i.metadata;if(void 0!==s){var a=s.type;if(void 0!==a&&"object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var c=r.parse(i,o);t(c.geometry,c.materials)},n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function n(e,t){return e&1<<t}var i,o,s,c,l,u,h,d,f,p,g,m,v,b,w,_,x,E,A,S,M,k,T,F,O,P,L,R=e.faces,D=e.vertices,B=e.normals,I=e.colors,N=e.scale,j=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&j++;for(i=0;i<j;i++)t.faceVertexUvs[i]=[]}for(c=0,l=D.length;c<l;)E=new a,E.x=D[c++]*N,E.y=D[c++]*N,E.z=D[c++]*N,t.vertices.push(E);for(c=0,l=R.length;c<l;)if(p=R[c++],g=n(p,0),m=n(p,1),v=n(p,3),b=n(p,4),w=n(p,5),_=n(p,6),x=n(p,7),g){if(S=new C,S.a=R[c],S.b=R[c+1],S.c=R[c+3],M=new C,M.a=R[c+1],M.b=R[c+2],M.c=R[c+3],c+=4,m&&(f=R[c++],S.materialIndex=f,M.materialIndex=f),s=t.faces.length,v)for(i=0;i<j;i++)for(F=e.uvs[i],t.faceVertexUvs[i][s]=[],t.faceVertexUvs[i][s+1]=[],o=0;o<4;o++)d=R[c++],P=F[2*d],L=F[2*d+1],O=new r(P,L),2!==o&&t.faceVertexUvs[i][s].push(O),0!==o&&t.faceVertexUvs[i][s+1].push(O);if(b&&(h=3*R[c++],S.normal.set(B[h++],B[h++],B[h]),M.normal.copy(S.normal)),w)for(i=0;i<4;i++)h=3*R[c++],T=new a(B[h++],B[h++],B[h]),2!==i&&S.vertexNormals.push(T),0!==i&&M.vertexNormals.push(T);if(_&&(u=R[c++],k=I[u],S.color.setHex(k),M.color.setHex(k)),x)for(i=0;i<4;i++)u=R[c++],k=I[u],2!==i&&S.vertexColors.push(new y(k)),0!==i&&M.vertexColors.push(new y(k));t.faces.push(S),t.faces.push(M)}else{if(A=new C,A.a=R[c++],A.b=R[c++],A.c=R[c++],m&&(f=R[c++],A.materialIndex=f),s=t.faces.length,v)for(i=0;i<j;i++)for(F=e.uvs[i],t.faceVertexUvs[i][s]=[],o=0;o<3;o++)d=R[c++],P=F[2*d],L=F[2*d+1],O=new r(P,L),t.faceVertexUvs[i][s].push(O);if(b&&(h=3*R[c++],A.normal.set(B[h++],B[h++],B[h])),w)for(i=0;i<3;i++)h=3*R[c++],T=new a(B[h++],B[h++],B[h]),A.vertexNormals.push(T);if(_&&(u=R[c++],A.color.setHex(I[u])),x)for(i=0;i<3;i++)u=R[c++],A.vertexColors.push(new y(I[u]));t.faces.push(A)}}function t(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var o=e.skinWeights[i],s=n>1?e.skinWeights[i+1]:0,a=n>2?e.skinWeights[i+2]:0,c=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new u(o,s,a,c))}if(e.skinIndices)for(var i=0,r=e.skinIndices.length;i<r;i+=n){var l=e.skinIndices[i],h=n>1?e.skinIndices[i+1]:0,d=n>2?e.skinIndices[i+2]:0,f=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new u(l,h,d,f))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function n(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var o=t.morphTargets[i].vertices,s=e.morphTargets[i].vertices,c=0,l=s.length;c<l;c+=3){var u=new a;u.x=s[c]*n,u.y=s[c+1]*n,u.z=s[c+2]*n,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=t.faces,d=e.morphColors[0].colors,i=0,r=h.length;i<r;i++)h[i].color.fromArray(d,3*i)}}function i(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var o=mr.parseAnimation(i[r],t.bones);o&&n.push(o)}if(t.morphTargets){var s=mr.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(s)}n.length>0&&(t.animations=n)}return function(r,o){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var s=new S;return e(r,s),t(r,s),n(r,s),i(r,s),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:s}:{geometry:s,materials:br.prototype.initMaterials(r.materials,o,this.crossOrigin)}}}()}),Object.assign(_r.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new vi(r.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");r.parse(o,t)},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),o=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,i,s);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new qi).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new wr,r=new yr,o=0,s=e.length;o<s;o++){var a,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Zc[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Zc[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Zc[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Zc[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Zc[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Zc[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Zc[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Zc[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Zc[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Zc[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Zc[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Zc[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],o=0,s=c.shapes.length;o<s;o++){var u=t[c.shapes[o]];l.push(u)}a=new Zc[c.type](l,c.curveSegments);break;case"BufferGeometry":a=r.parse(c);break;case"Geometry":a=i.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}a.uuid=c.uuid,void 0!==c.name&&(a.name=c.name),n[c.uuid]=a}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new vr;i.setTextures(t);for(var r=0,o=e.length;r<o;r++){var s=e[r];if("MultiMaterial"===s.type){for(var a=[],c=0;c<s.materials.length;c++)a.push(i.parse(s.materials[c]));n[s.uuid]=a}else n[s.uuid]=i.parse(s)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=mr.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};if(void 0!==e&&e.length>0){var r=new mi(t),o=new wi(r);o.setCrossOrigin(this.crossOrigin);for(var s=0,a=e.length;s<a;s++){var c=e[s],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;i[c.uuid]=function(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}(l)}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var a=new l(t[s.image]);a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,ul)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],hl),a.wrapT=n(s.wrap[1],hl)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,dl)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,dl)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),i[s.uuid]=a}return i},parseObject:function(e,t,n){function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}var o;switch(e.type){case"Scene":o=new kt,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new y(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Mt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new St(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new xt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new A(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new nr(e.color,e.intensity);break;case"DirectionalLight":o=new tr(e.color,e.intensity);break;case"PointLight":o=new Qi(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ir(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Ji(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ki(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=i(e.geometry),a=r(e.material);o=s.bones&&s.bones.length>0?new Rt(s,a):new Y(s,a);break;case"LOD":o=new Ot;break;case"Line":o=new Bt(i(e.geometry),r(e.material),e.mode);break;case"LineLoop":o=new Nt(i(e.geometry),r(e.material));break;case"LineSegments":o=new It(i(e.geometry),r(e.material));break;case"PointCloud":case"Points":o=new Ut(i(e.geometry),r(e.material));break;case"Sprite":o=new Ft(r(e.material));break;case"Group":o=new $t;break;default:o=new x}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var c=e.children,l=0;l<c.length;l++)o.add(this.parseObject(c[l],t,n));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var d=u[h],f=o.getObjectByProperty("uuid",d.object);void 0!==f&&o.addLevel(f,d.distance)}return o}});var ul={UVMapping:ta,CubeReflectionMapping:na,CubeRefractionMapping:ia,EquirectangularReflectionMapping:ra,EquirectangularRefractionMapping:oa,SphericalReflectionMapping:sa,CubeUVReflectionMapping:aa,CubeUVRefractionMapping:ca},hl={RepeatWrapping:la,ClampToEdgeWrapping:ua,MirroredRepeatWrapping:ha},dl={NearestFilter:da,NearestMipMapNearestFilter:fa,NearestMipMapLinearFilter:pa,LinearFilter:ga,LinearMipMapNearestFilter:ma,LinearMipMapLinearFilter:va};xr.prototype={constructor:xr,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,o=Qc.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){Qc.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Er.prototype,{moveTo:function(e,t){this.currentPath=new Gi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,o){this.currentPath.bezierCurveTo(e,t,n,i,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new qi;o.curves=r.curves,t.push(o)}return t}var i=Yc.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===t)return n(r);var o,s,a,c=[];if(1===r.length)return s=r[0],a=new qi,a.curves=s.curves,c.push(a),c;var l=!i(r[0].getPoints());l=e?!l:l;var u,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var g=0,m=r.length;g<m;g++)s=r[g],u=s.getPoints(),o=i(u),o=e?!o:o,o?(!l&&d[p]&&p++,d[p]={s:new qi,p:u},d[p].s.curves=s.curves,l&&p++,f[p]=[]):f[p].push({h:s,p:u[0]});if(!d[0])return n(r);if(d.length>1){for(var v=!1,y=[],b=0,w=d.length;b<w;b++)h[b]=[];for(var b=0,w=d.length;b<w;b++)for(var _=f[b],x=0;x<_.length;x++){for(var E=_[x],A=!0,C=0;C<d.length;C++)(function(e,t){for(var n=t.length,i=!1,r=n-1,o=0;o<n;r=o++){var s=t[r],a=t[o],c=a.x-s.x,l=a.y-s.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(s=t[o],c=-c,a=t[r],l=-l),e.y<s.y||e.y>a.y)continue;if(e.y===s.y){if(e.x===s.x)return!0}else{var u=l*(e.x-s.x)-c*(e.y-s.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==s.y)continue;if(a.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=a.x)return!0}}return i})(E.p,d[C].p)&&(b!==C&&y.push({froms:b,tos:C,hole:x}),A?(A=!1,h[C].push(E)):v=!0);A&&h[b].push(E)}y.length>0&&(v||(f=h))}for(var S,g=0,M=d.length;g<M;g++){a=d[g].s,c.push(a),S=f[g];for(var k=0,T=S.length;k<T;k++)a.holes.push(S[k].h)}return c}}),Object.assign(Ar.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var i=[],r=Cr(e,t,n,this.data),o=0,s=r.length;o<s;o++)Array.prototype.push.apply(i,r[o].toShapes());return i}}),Object.assign(Mr.prototype,{load:function(e,t,n,i){var r=this,o=new vi(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new Ar(e)},setPath:function(e){return this.path=e,this}});var fl,pl={getContext:function(){return void 0===fl&&(fl=new(window.AudioContext||window.webkitAudioContext)),fl},setContext:function(e){fl=e}};Object.assign(kr.prototype,{load:function(e,t,n,i){var r=new vi(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){pl.getContext().decodeAudioData(e,function(e){t(e)})},n,i)}}),Object.assign(Tr.prototype,{update:function(){var e,t,n,i,r,s,a,c,l=new o,u=new o;return function(o){if(e!==this||t!==o.focus||n!==o.fov||i!==o.aspect*this.aspect||r!==o.near||s!==o.far||a!==o.zoom||c!==this.eyeSep){e=this,t=o.focus,n=o.fov,i=o.aspect*this.aspect,r=o.near,s=o.far,a=o.zoom;var h=o.projectionMatrix.clone();c=this.eyeSep/2;var d,f,p=c*r/t,g=r*Math.tan(Tc.DEG2RAD*n*.5)/a;u.elements[12]=-c,l.elements[12]=c,d=-g*i+p,f=g*i+p,h.elements[0]=2*r/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(h),d=-g*i-p,f=g*i-p,h.elements[0]=2*r/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(l)}}()}),Fr.prototype=Object.create(x.prototype),Fr.prototype.constructor=Fr,Or.prototype=Object.assign(Object.create(x.prototype),{constructor:Or,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new a,t=new s,n=new a,i=new a;return function(r){x.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(s.x,this.context.currentTime),o.upY.setValueAtTime(s.y,this.context.currentTime),o.upZ.setValueAtTime(s.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z))}}()}),Pr.prototype=Object.assign(Object.create(x.prototype),{constructor:Pr,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Lr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Lr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new a;return function(t){x.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Rr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Dr.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==i;++s)n[r+s]=n[s];o=t}else{o+=t;var a=t/o;this._mixBufferRegion(n,r,0,a,i)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*t;this._mixBufferRegion(n,i,s,1-r,t)}for(var a=t,c=t+t;a!==c;++a)if(n[a]!==n[a+t]){o.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){s.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var o=1-i,s=0;s!==r;++s){var a=t+s;e[a]=e[a]*o+e[n+s]*i}}});var gl="\\[\\]\\.:\\/";Object.assign(Br.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Ir,{Composite:Br,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Ir.Composite(e,t,n):new Ir(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+gl+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+gl+"]",t="[^"+gl.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),s=new RegExp("^"+n+i+r+o+"$"),a=["material","materials","bones"];return function(e){var t=s.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==a.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var o=e(r.children);if(o)return o}return null}(e.children);if(i)return i}return null}}),Object.assign(Ir.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Ir.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var a=e[i];if(void 0===a){var c=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e)}var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===r){r=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ir.prototype,{_getValue_unbound:Ir.prototype.getValue,_setValue_unbound:Ir.prototype.setValue}),Object.assign(Nr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],d=h.uuid,f=i[d];if(void 0===f){f=t++,i[d]=f,e.push(h);for(var p=0,g=a;p!==g;++p)s[p].push(new Ir(h,r[p],o[p]))}else if(f<n){c=e[f];var m=--n,v=e[m];i[v.uuid]=f,e[f]=v,i[d]=m,e[m]=h;for(var p=0,g=a;p!==g;++p){var y=s[p],b=y[m],w=y[f];y[f]=b,void 0===w&&(w=new Ir(h,r[p],o[p])),y[m]=w}}else e[f]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,s=arguments.length;o!==s;++o){var a=arguments[o],c=a.uuid,l=n[c];if(void 0!==l&&l>=t){var u=t++,h=e[u];n[h.uuid]=l,e[l]=h,n[c]=u,e[u]=a;for(var d=0,f=r;d!==f;++d){var p=i[d],g=p[u],m=p[l];p[l]=g,p[u]=m}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,s=0,a=arguments.length;s!==a;++s){var c=arguments[s],l=c.uuid,u=i[l];if(void 0!==u)if(delete i[l],u<n){var h=--n,d=e[h],f=--t,p=e[f];i[d.uuid]=u,e[u]=d,i[p.uuid]=h,e[h]=p,e.pop();for(var g=0,m=o;g!==m;++g){var v=r[g],y=v[h],b=v[f];v[u]=y,v[h]=b,v.pop()}}else{var f=--t,p=e[f];i[p.uuid]=u,e[u]=p,e.pop();for(var g=0,m=o;g!==m;++g){var v=r[g];v[u]=v[f],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,s=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(u);for(var h=l,d=a.length;h!==d;++h){var f=a[h];u[h]=new Ir(f,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}),Object.assign(jr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,o=r/i,s=i/r;e.warp(1,o,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,c=o.sampleValues;return a[0]=r,a[1]=r+n,c[0]=e/s,c[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);var r=this._startTime;if(null!==r){var o=(e-r)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var s=this._updateTime(t),a=this._updateWeight(e);if(a>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(s),l[u].accumulate(i,a)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===ac){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=i===lc;if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var s=Math.floor(t/n);t-=n*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=pc,i.endingEnd=pc):(i.endingStart=e?this.zeroSlopeAtStart?pc:fc:gc,i.endingEnd=t?this.zeroSlopeAtEnd?pc:fc:gc)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}),Ur.prototype=Object.assign(Object.create(i.prototype),{constructor:Ur,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,c=this._bindingsByRootAndName,l=c[a];void 0===l&&(l={},c[a]=l);for(var u=0;u!==r;++u){var h=i[u],d=h.name,f=l[d];if(void 0!==f)o[u]=f;else{if(void 0!==(f=o[u])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,a,d));continue}var p=t&&t._propertyBindings[u].binding.parsedPath;f=new Dr(Ir.create(n,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,d),o[u]=f}s[u].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,o=0,s=r.length;o!==s;++o){var a=r[o];0===a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,c=a[a.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],o=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],c=e._cacheIndex;a._cacheIndex=c,t[c]=a,t.pop(),delete s[r];e:{for(var l in s)break e;delete o[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new dr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?mr.findByName(n,e):e,o=null!==r?r.uuid:e,s=this._actionsByClip[o],a=null;if(void 0!==s){var c=s.actionByRoot[i];if(void 0!==c)return c;a=s.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var l=new jr(this,r,t);return this._bindAction(l,a),this._addInactiveAction(l,o,i),l},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?mr.findByName(n,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[i]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(var r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,s=0;s!==n;++s){t[s]._update(i,e,r,o)}for(var a=this._bindings,c=this._nActiveBindings,s=0;s!==c;++s)a[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,s=0,a=o.length;s!==a;++s){var c=o[s];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,o=r[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var s=this._bindingsByRootAndName,a=s[t];if(void 0!==a)for(var c in a){var l=a[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),$r.prototype.clone=function(){return new $r(void 0===this.value.clone?this.value:this.value.clone())},zr.prototype=Object.assign(Object.create(j.prototype),{constructor:zr,isInstancedBufferGeometry:!0,copy:function(e){return j.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Hr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Hr.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(Vr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Vr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Wr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Wr,isInstancedInterleavedBuffer:!0,copy:function(e){return Vr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Gr.prototype=Object.assign(Object.create(M.prototype),{constructor:Gr,isInstancedBufferAttribute:!0,copy:function(e){return M.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(qr.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return Kr(e,this,i,t),i.sort(Xr),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=e.length;r<o;r++)Kr(e[r],this,i,t);return i.sort(Xr),i}}),Object.assign(Yr.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Zr.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Tc.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Jr.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Qr.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new r),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new r),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new r),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new r),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),eo.prototype=Object.create(x.prototype),eo.prototype.constructor=eo,eo.prototype.isImmediateRenderObject=!0,to.prototype=Object.create(It.prototype),to.prototype.constructor=to,to.prototype.update=function(){var e=new a,t=new a,n=new c;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,c=s.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],f=0,p=d.vertexNormals.length;f<p;f++){var g=a[d[i[f]]],m=d.vertexNormals[f];e.copy(g).applyMatrix4(r),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1}else if(s&&s.isBufferGeometry)for(var v=s.attributes.position,y=s.attributes.normal,l=0,f=0,p=v.count;f<p;f++)e.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(r),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1;o.needsUpdate=!0}}(),no.prototype=Object.create(x.prototype),no.prototype.constructor=no,no.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},no.prototype.update=function(){var e=new a,t=new a;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),ro.prototype=Object.create(It.prototype),ro.prototype.constructor=ro,ro.prototype.updateMatrixWorld=function(){var e=new a,t=new o,n=new o;return function(i){var r=this.bones,o=this.geometry,s=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var a=0,c=0;a<r.length;a++){var l=r[a];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,x.prototype.updateMatrixWorld.call(this,i)}}(),oo.prototype=Object.create(Y.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},oo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},so.prototype=Object.create(x.prototype),so.prototype.constructor=so,so.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},so.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ao.prototype=Object.create(x.prototype),ao.prototype.constructor=ao,ao.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ao.prototype.update=function(){var e=new a,t=new y,n=new y;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,s=r.count;o<s;o++){var a=o<s/2?t:n;r.setXYZ(o,a.r,a.g,a.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),co.prototype=Object.create(It.prototype),co.prototype.constructor=co,lo.prototype=Object.create(It.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(It.prototype),uo.prototype.constructor=uo,uo.prototype.update=function(){var e=new a,t=new a,n=new c;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=o.faces,c=0,l=0,u=a.length;l<u;l++){var h=a[l],d=h.normal;e.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(c,e.x,e.y,e.z),c+=1,r.setXYZ(c,t.x,t.y,t.z),c+=1}r.needsUpdate=!0}}(),ho.prototype=Object.create(x.prototype),ho.prototype.constructor=ho,ho.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ho.prototype.update=function(){var e=new a,t=new a,n=new a;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),fo.prototype=Object.create(It.prototype),fo.prototype.constructor=fo,fo.prototype.update=function(){function e(e,o,s,a){i.set(o,s,a).unproject(r);var c=n[e];if(void 0!==c)for(var l=t.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],i.x,i.y,i.z)}var t,n,i=new a,r=new E;return function(){t=this.geometry,n=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),po.prototype=Object.create(It.prototype),po.prototype.constructor=po,po.prototype.update=function(){var e=new p;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),po.prototype.setFromObject=function(e){return this.object=e,this.update(),this},go.prototype=Object.create(It.prototype),go.prototype.constructor=go,go.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,e))},mo.prototype=Object.create(Bt.prototype),mo.prototype.constructor=mo,mo.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),x.prototype.updateMatrixWorld.call(this,e)};var ml,vl;vo.prototype=Object.create(x.prototype),vo.prototype.constructor=vo,vo.prototype.setDirection=function(){var e,t=new a;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),vo.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},vo.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},yo.prototype=Object.create(It.prototype),yo.prototype.constructor=yo;var yl=0,bl=1;Ei.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ei.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Wi.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new S,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new a(r.x,r.y,r.z||0))}return t}}),Object.assign(Gi.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),jo.prototype=Object.create(Mi.prototype),Uo.prototype=Object.create(Mi.prototype),$o.prototype=Object.create(Mi.prototype),Object.assign($o.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),co.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ro.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(br.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ll.extractUrlBase(e)}}),Object.assign(Qr.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(p.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),X.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Tc,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Tc.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Tc.ceilPowerOfTwo(e)}}),Object.assign(c.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(o.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),m.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},s.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(q.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(K.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(K,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),K.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),K.getNormal(e,t,n,i)}}),Object.assign(qi.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new $n(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zn(this,e)}}),Object.assign(r.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(u.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(x.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(x.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ot.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Pt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ei.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),xt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Xi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(M.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(j.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(j.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($r.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new y}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===ds}}}),Object.defineProperties(hi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(G.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ct.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Ct.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(mt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(h.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(At.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Pr.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new kr).load(e,function(e){t.setBuffer(e)}),this},Rr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Fr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var wl={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},_l={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new xi;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new _i;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},xl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}}},function(e,t,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,a){"object"===s(t)?e.exports=t=a():(r=[],i=a,void 0!==(o="function"===typeof i?i.apply(t,r):i)&&(e.exports=o))}(0,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},r=i.lib={},o=r.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var o=0;o<r;o+=4)t[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,i=[],r=0;r<t;r+=4){var o=function(t){var t=t,n=987654321,i=4294967295;return function(){n=36969*(65535&n)+(n>>16)&i,t=18e3*(65535&t)+(t>>16)&i;var r=(n<<16)+t&i;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}}(4294967296*(n||e.random()));n=987654071*o(),i.push(4294967296*o()|0)}return new s.init(i,t)}}),a=i.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=4*o,c=r/a;c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);var l=c*o,u=e.min(4*l,r);if(l){for(var h=0;h<l;h+=o)this._doProcessBlock(i,h);var d=i.splice(0,l);n.sigBytes-=u}return new s.init(d,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math);return e})},function(e,t,n){"use strict";var i=n(47),r=n(129),o=n(130),s=n(131),a=n(50);n(49);n.d(t,"e",function(){return i.b}),n.d(t,"c",function(){return r.a}),n.d(t,"b",function(){return o.a}),n.d(t,"a",function(){return s.a}),n.d(t,"d",function(){return a.a})},function(e,t,n){"use strict";t.__esModule=!0;var i=(t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)});t.stripBasename=function(e,t){return i(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}},t.createPath=function(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"f",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"g",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return l});var i=function(e){return"/"===e.charAt(0)?e:"/"+e},r=function(e){return"/"===e.charAt(0)?e.substr(1):e},o=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},s=function(e,t){return o(e,t)?e.substr(t.length):e},a=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},c=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}},l=function(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}},function(e,t,n){"use strict";var i=n(136);n.d(t,"a",function(){return i.a});var r=(n(144),n(63));n.d(t,"d",function(){return r.b});var o=n(64);n.d(t,"b",function(){return o.b});var s=n(145);n.d(t,"c",function(){return s.a})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":p(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":p(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n.n(s),c=n(3),l=n.n(c),u=n(0),h=n.n(u),d=n(1),f=n.n(d),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(e){function t(){var n,o,s;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.state={match:o.computeMatch(o.props.history.location.pathname)},s=n,r(o,s)}return o(t,e),t.prototype.getChildContext=function(){return{router:g({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,i=t.history;l()(null==n||1===h.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=i.listen(function(){e.setState({match:e.computeMatch(i.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){a()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?h.a.Children.only(e):null},t}(h.a.Component);m.propTypes={history:f.a.object.isRequired,children:f.a.node},m.contextTypes={router:f.a.object},m.childContextTypes={router:f.a.object.isRequired},t.a=m},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var i=n(55),r=n(56),o=n(14),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(e,t,n,r){var a=void 0;"string"===typeof e?(a=Object(o.d)(e),a.state=t):(a=s({},e),void 0===a.pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=Object(i.default)(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a},c=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(r.default)(e.state,t.state)}},function(e,t,n){"use strict";var i=n(142),r=n.n(i),o={},s=0,a=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=o[n]||(o[n]={});if(i[e])return i[e];var a=[],c=r()(e,a,t),l={re:c,keys:a};return s<1e4&&(i[e]=l,s++),l},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof t&&(t={path:t});var n=t,i=n.path,r=void 0===i?"/":i,o=n.exact,s=void 0!==o&&o,c=n.strict,l=void 0!==c&&c,u=n.sensitive,h=void 0!==u&&u,d=a(r,{end:s,strict:l,sensitive:h}),f=d.re,p=d.keys,g=f.exec(e);if(!g)return null;var m=g[0],v=g.slice(1),y=e===m;return s&&!y?null:{path:r,url:"/"===r&&""===m?"/":m,isExact:y,params:p.reduce(function(e,t,n){return e[t.name]=v[n],e},{})}};t.a=c},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),i=0,r=0,l=0,u=function(t){n[r]=t,r=(r+1)%e,i++},h=function(){if(0!=i){var t=n[l];return n[l]=null,i--,l=(l+1)%e,t}},d=function(){for(var e=[];i;)e.push(h());return e};return{isEmpty:function(){return 0==i},put:function(h){if(i<e)u(h);else{var f=void 0;switch(t){case s:throw new Error(o);case a:n[r]=h,r=(r+1)%e,l=r;break;case c:f=2*e,n=d(),i=n.length,r=n.length,l=0,n.length=f,e=f,u(h)}}},take:h,flush:d}}n.d(t,"a",function(){return u});var r=n(4),o="Channel's Buffer overflow!",s=1,a=3,c=4,l={isEmpty:r.o,put:r.r,take:r.r},u={none:function(){return l},fixed:function(e){return i(e,s)},dropping:function(e){return i(e,2)},sliding:function(e){return i(e,a)},expanding:function(e){return i(e,c)}}},function(e,t,n){e.exports=n(181)},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,c=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(c[u]=n[u]);if(r){a=r(n);for(var h=0;h<a.length;h++)s.call(n,a[h])&&(c[a[h]]=n[a[h]])}}return c}},function(e,t,n){"use strict";function i(e,t,n,i,o,s,a,c){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,o,s,a,c],h=0;l=new Error(t.replace(/%s/g,function(){return u[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(e){};e.exports=i},function(e,t,n){"use strict";function i(e){return function(){return e}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var i=n(111),r=(n(45),n(115));n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return r.a})},function(e,t,n){"use strict";function i(e){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=i},function(e,t,n){"use strict";function i(e){if(!Object(s.a)(e)||Object(r.a)(e)!=a)return!1;var t=Object(o.a)(e);if(null===t)return!0;var n=h.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d}var r=n(118),o=n(123),s=n(125),a="[object Object]",c=Function.prototype,l=Object.prototype,u=c.toString,h=l.hasOwnProperty,d=u.call(Object);t.a=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(55),s=i(o),a=n(56),c=i(a),l=n(13);t.createLocation=function(e,t,n,i){var o=void 0;"string"===typeof e?(o=(0,l.parsePath)(e),o.state=t):(o=r({},e),void 0===o.pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=(0,s.default)(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,c.default)(e.state,t.state)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){var e=null,t=function(t){return(0,r.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,i,o){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof i?i(s,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)},i=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return i.push(n),function(){t=!1,i=i.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.forEach(function(e){return e.apply(void 0,t)})}}};t.default=o},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=function(){var e=null,t=function(t){return r()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,i,o){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof i?i(s,o):(r()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)},i=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return i.push(n),function(){t=!1,i=i.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.forEach(function(e){return e.apply(void 0,t)})}}};t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":g(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n.n(s),c=n(3),l=n.n(c),u=n(0),h=n.n(u),d=n(1),f=n.n(d),p=n(18),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(e){return 0===h.a.Children.count(e)},y=function(e){function t(){var n,o,s;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.state={match:o.computeMatch(o.props,o.context.router)},s=n,r(o,s)}return o(t,e),t.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,i=e.location,r=e.path,o=e.strict,s=e.exact,a=e.sensitive;if(n)return n;l()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,u=(i||c.location).pathname;return r?Object(p.a)(u,{path:r,strict:o,exact:s,sensitive:a}):c.match},t.prototype.componentWillMount=function(){a()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),a()(!(this.props.component&&this.props.children&&!v(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),a()(!(this.props.render&&this.props.children&&!v(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){a()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),a()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,i=t.component,r=t.render,o=this.context.router,s=o.history,a=o.route,c=o.staticContext,l=this.props.location||a.location,u={match:e,location:l,history:s,staticContext:c};return i?e?h.a.createElement(i,u):null:r?e?r(u):null:n?"function"===typeof n?n(u):v(n)?null:h.a.Children.only(n):null},t}(h.a.Component);y.propTypes={computedMatch:f.a.object,path:f.a.string,exact:f.a.bool,strict:f.a.bool,sensitive:f.a.bool,component:f.a.func,render:f.a.func,children:f.a.oneOfType([f.a.func,f.a.node]),location:f.a.object},y.contextTypes={router:f.a.shape({history:f.a.object.isRequired,route:f.a.object.isRequired,staticContext:f.a.object})},y.childContextTypes={router:f.a.object.isRequired},t.a=y},function(e,t,n){"use strict";function i(e){return o.n.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function r(e,t){function n(t,n){if(c===a)return s;if(n)throw c=a,n;r&&r(t);var i=e[c](),o=i[0],l=i[1],u=i[2];return c=o,r=u,c===a?s:l}var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",r=void 0,c=t;return Object(o.q)(n,function(e){return n(null,e)},i,!0)}n.d(t,"b",function(){return a}),t.c=i,t.a=r;var o=n(4),s={done:!0,value:void 0},a={}},function(e,t,n){"use strict";var i=n(6);n.d(t,"c",function(){return i.g}),n.d(t,"a",function(){return i.b}),n.d(t,"b",function(){return i.d}),n.d(t,"d",function(){return i.i})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return r}),n.d(t,"init",function(){return o}),n.d(t,"switchMode",function(){return a}),n.d(t,"didInit",function(){return c}),n.d(t,"changeFloor",function(){return l}),n.d(t,"floorDidChanged",function(){return u}),n.d(t,"onClick",function(){return h});var i=n(34),r={WILL_INIT:"map/WILL_INIT",DID_INIT:"map/DID_INIT",SWITCH_MODE:"map/SWITCH_MODE",FLOOR_WILL_CHANGE:"map/FLOOR_WILL_CHANGE",FLOOR_DID_CHANGE:"map/FLOOR_DID_CHANGE",ON_CLICK:"map/ON_CLICK"},o=function(){return{type:r.WILL_INIT}},s="3D",a=function(){return s="3D"===s?"2D":"3D",{type:r.SWITCH_MODE,mode:s}},c=function(){return{type:r.DID_INIT}},l=function(e){return{type:r.FLOOR_WILL_CHANGE,floorID:e}},u=function(e,t){return{type:r.FLOOR_DID_CHANGE,currentFloor:e,previousFloor:t}},h=function(e){return i.a.onClick(),{type:r.ON_CLICK,currentClickedEvent:e}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(71),o=(n(82),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=function(){function e(){i(this,e),this.awm=null,this.onClickEvent=null,this.current=null,this.locked=!1}return o(e,[{key:"init",value:function(e){return this.awm=e,this}},{key:"setEvent",value:function(e){this.onClickEvent=e}},{key:"getEvent",value:function(){return this.onClickEvent}},{key:"onClick",value:function(){var e=this.onClickEvent.intersects;if(0===e.length)return void this.updateSelection(null);var t=e[0];if(t.object.isBuilding||t.object.isSpace)this.updateSelection(t.object);else if(t.object.isLabel){var n=t.object.parent;n.isBuilding||n.isSpace?this.updateSelection(n):this.updateSelection(t.object)}else this.updateSelection(null)}},{key:"updateSelection",value:function(e){var t=this;this.locked||e===this.current||(null!==this.current&&this.current.isBuilding?this.resetBuilding(this.current):null!==this.current&&this.current.isSpace&&this.resetSpace(this.current),this.current=e,null!==this.current&&this.current.isBuilding?(this.locked=!0,this.highlightBuilding(this.current).then(function(){t.locked=!1})):null!==this.current&&this.current.isSpace?(this.locked=!0,this.highlightSpace(this.current).then(function(){return r.a.goTo(t.current)}).then(function(){t.locked=!1})):null!==this.current&&this.current.isLabel&&(this.locked=!0,this.highlightLabel(this.current).then(function(){return r.a.goTo(t.current)}).then(function(){t.locked=!1})))}},{key:"highlightBuilding",value:function(e){return this.awm.cameraManager.centerOn(e).then(function(){e.setColor(7921807)})}},{key:"resetBuilding",value:function(e){e.resetColor()}},{key:"highlightSpace",value:function(e){return Promise.resolve().then(function(){e.setColor(7921807),e.bounceUp(3)})}},{key:"highlightLabel",value:function(e){return this.awm.cameraManager.centerOn(e)}},{key:"resetSpace",value:function(e){e.resetColor(),e.bounceDown()}}]),e}(),a=new s;t.a=a},function(e,t,n){(function(n,i){var r,o,s,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,i){"object"==a(t)&&"undefined"!=typeof e?i(t):(o=[t],r=i,void 0!==(s="function"===typeof r?r.apply(t,o):r)&&(e.exports=s))}(0,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i,r,o;i=e,o=n[r=t],r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})}return e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){if(e&&e.nodeType||void 0===e||"object"!==t(e))return e;if(Array.isArray(e))return[].concat(e);if("object"===t(e)){var n={};for(var i in e)n[i]=l(e[i]);return n}return e}function u(e){return"string"!=typeof e?e:e.replace(B,I).match(R).map(function(e){return D(e)?e:+e})}function h(e,n,i,r,o){var s=i[e],a=r[e];if("string"==typeof s||"string"==typeof a){for(var c=Array.isArray(s)&&s[0]===L?s:u(s),l=Array.isArray(a)&&a[0]===L?a:u(a),d=1;d<c.length;)c[d]===l[d]&&"string"==typeof c[d-1]?(c.splice(d-1,2,c[d-1]+c[d]),l.splice(d-1,2,l[d-1]+l[d])):d++;c[d=0]===L&&c.shift(),l[0]===L&&l.shift();for(var f={isString:!0,length:c.length},p={isString:!0,length:l.length};d<f.length;)f[d]=c[d],p[d]=l[d],d++;return i[e]=f,r[e]=p,!0}if("object"===t(s)&&"object"===t(a)){if(Array.isArray(s))return s.map(function(t,i){return h(i,n[e],s,a)});for(var g in a)h(g,n[e],s,a);return!0}return!1}function d(e,n,i,r,o,s,a){var c=a?i:i[e],l=a?r:r[e];if(void 0===l)return c;if(void 0===c||"string"==typeof c||c===l)return l;if("object"===t(c)&&"object"===t(l)){if(!c||!l)return n[e];if("object"===t(c)&&c&&c.isString){for(var u="",h=0,f=c.length;h<f;h++){var p="number"==typeof c[h]&&"string"==typeof l[h]&&"="===l[h][1],g="number"!=typeof c[h]?c[h]:((p?c[h]+parseFloat(l[h][0]+l[h].substr(2))*o:c[h]+(l[h]-c[h])*o)*N|0)/N;(U(c,h)||U(c,h,j))&&(g|=0),u+=g,p&&1===s&&(c[h]=c[h]+parseFloat(l[h][0]+l[h].substr(2)))}return a||(n[e]=u),u}if(Array.isArray(c)&&c[0]!==L)for(var m=0,v=c.length;m<v;m++)c[m]!==l[m]&&d(m,n[e],c,l,o,s);else if("object"===t(c)&&c&&!c.isString)for(var y in c)c[y]!==l[y]&&d(y,n[e],c,l,o,s)}else if("number"==typeof c){var b="string"==typeof l;n[e]=((b?c+parseFloat(l[0]+l.substr(2))*o:c+(l-c)*o)*N|0)/N,b&&1===s&&(i[e]=n[e])}else"function"==typeof l&&(n[e]=l(o));return n[e]}"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var f,p,g="undefined"!=typeof window?window:"undefined"!=typeof n?n:this,m=g.requestAnimationFrame||function(e){return g.setTimeout(e,16)},v=g.cancelAnimationFrame||function(e){return g.clearTimeout(e)},y=function(){if("undefined"==typeof i||void 0===i.hrtime||i.versions&&void 0!==i.versions.electron){if(void 0!==g.performance&&void 0!==g.performance.now)return g.performance.now.bind(g.performance);var e=g.performance&&g.performance.timing&&g.performance.timing.navigationStart?g.performance.timing.navigationStart:Date.now();return function(){return Date.now()-e}}return function(){var e=i.hrtime();return 1e3*e[0]+e[1]/1e6}}(),b=[],w=!1,_=!1,x=m,E=v,A=0,C=function(e){var t=b.indexOf(e);-1<t&&b.splice(t,1),b.push(e),A=0,_&&!w&&(f=x(k),w=!0)},S=function(e){for(var t=0;t<b.length;t++)if(e===b[t])return b[t];return null},M=function(e){var t=b.indexOf(e);-1!==t&&b.splice(t,1)},k=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y(),n=1<arguments.length?arguments[1]:void 0;if(_&&w&&(f=x(e)),b.length||A++,120<A)return E(f),A=0,w=!1;for(var i=0;i<b.length;)b[i++].update(t,n);return!0},T={},F={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-F.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*F.Bounce.In(2*e):.5*F.Bounce.Out(2*e-1)+.5}},Stepped:{steps:function(e){return function(t){return(t*e|0)/e}}}},O="_chainedTweens",P="Callback",L="STRING_PROP",R=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g,D=function(e){return isNaN(+e)||("+"===e[0]||"-"===e[0])&&"="===e[1]||""===e||" "===e},B=/^#([0-9a-f]{6}|[0-9a-f]{3})$/i,I=function(e,t){var n,i,r;3===t.length&&(t=(n=t[0])+n+(i=t[1])+i+(r=t[2])+r);var o=parseInt(t,16);return"rgb("+(n=o>>16&255)+","+(i=o>>8&255)+","+(r=255&o)+")"},N=Math.pow(10,4),j="rgba(",U=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgb(";return"number"==typeof e[t]&&(e[t-1]===n||e[t-3]===n||e[t-5]===n)},$=/([.[])/g,z=/\]/g,H=function(e,n){var i=e[n],r=n.replace(z,"").split($),o=r.length-1,s=Array.isArray(e),a="object"===t(e)&&!s;return a?(e[n]=null,delete e[n]):s&&e.splice(n,1),r.reduce(function(e,t,n){s&&"."!==t&&"["!==t&&(t*=1);var c="["===r[n+1];if("."===t||"["===t)return"."===t?s=!(a=!0):"["===t&&(s=!(a=!1)),e;if(void 0===e[t]){if(s||a)return e[t]=n===o?i:s||c?[]:a?{}:null,a=s=!1,e[t]}else if(void 0!==e[t])return n===o&&(e[t]=i),e[t];return e},e)},V=function(e){if("object"===t(e)&&e)for(var n in e)if(-1!==n.indexOf(".")||-1!==n.indexOf("["))H(e,n);else if("object"===t(e[n])&&e[n]){var i=e[n];for(var r in i)if(-1!==r.indexOf(".")||-1!==r.indexOf("["))H(i,r);else if("object"===t(i[r])&&i[r]){var o=i[r];for(var s in o)-1===s.indexOf(".")&&-1===s.indexOf("[")||H(o,s)}}return e},W={Linear:function(e,t,n){var i=e.length-1,r=i*t,o=Math.floor(r),s=W.Utils.Linear;return t<0?s(e[0],e[1],r,n):1<t?s(e[i],e[i-1],i-r,n):s(e[o],e[i<o+1?i:o+1],r-o,n)},Bezier:function(e,n,i){for(var r=W.Utils.Reset(i),o=e.length-1,s=Math.pow,a=W.Utils.Bernstein,c=Array.isArray(r),l=0;l<=o;l++)if("number"==typeof r)r+=s(1-n,o-l)*s(n,l)*e[l]*a(o,l);else if(c)for(var u=0,h=r.length;u<h;u++)"number"==typeof r[u]?r[u]+=s(1-n,o-l)*s(n,l)*e[l][u]*a(o,l):r[u]=e[l][u];else if("object"===t(r))for(var d in r)"number"==typeof r[d]?r[d]+=s(1-n,o-l)*s(n,l)*e[l][d]*a(o,l):r[d]=e[l][d];else if("string"==typeof r){for(var f="",p=e[Math.round(o*n)],g=1,m=p.length;g<m;g++)f+=p[g];return f}return r},CatmullRom:function(e,t,n){var i=e.length-1,r=i*t,o=Math.floor(r),s=W.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(o=Math.floor(r=i*(1+t))),s(e[(o-1+i)%i],e[o],e[(o+1)%i],e[(o+2)%i],r-o,n)):t<0?s(e[1],e[1],e[0],e[0],-t,n):1<t?s(e[i-1],e[i-1],e[i],e[i],(0|t)-t,n):s(e[o?o-1:0],e[o],e[i<o+1?i:o+1],e[i<o+2?i:o+2],r-o,n)},Utils:{Linear:function(e,n,i,r){if("string"==typeof e)return n;if("number"==typeof e)return"function"==typeof e?e(i):e+(n-e)*i;if("object"===t(e)){if(void 0!==e.length){if(e[0]===L){for(var o="",s=1,a=e.length;s<a;s++){var c="number"==typeof e[s]?e[s]+(n[s]-e[s])*i:n[s];(U(e,s)||U(e,s,j))&&(c|=0),o+=c}return o}for(var l=0,u=r.length;l<u;l++)r[l]=W.Utils.Linear(e[l],n[l],i,r[l])}else for(var h in r)r[h]=W.Utils.Linear(e[h],n[h],i,r[h]);return r}},Reset:function(e){if(Array.isArray(e)){for(var n=0,i=e.length;n<i;n++)e[n]=W.Utils.Reset(e[n]);return e}if("object"===t(e)){for(var r in e)e[r]=W.Utils.Reset(e[r]);return e}return"number"==typeof e?0:e},Bernstein:function(e,t){var n=W.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(p=[1],function(e){var t=1;if(p[e])return p[e];for(var n=e;1<n;n--)t*=n;return p[e]=t}),CatmullRom:function(e,n,i,r,o,s){if("string"==typeof e)return n;if("number"==typeof e){var a=.5*(i-e),c=.5*(r-n),l=o*o;return(2*n-2*i+a+c)*(o*l)+(-3*n+3*i-2*a-c)*l+a*o+n}if("object"===t(e)){if(void 0!==e.length){if(e[0]===L){for(var u="",h=1,d=e.length;h<d;h++){var f="number"==typeof e[h]?W.Utils.CatmullRom(e[h],n[h],i[h],r[h],o):r[h];(U(e,h)||U(e,h,j))&&(f|=0),u+=f}return u}for(var p=0,g=s.length;p<g;p++)s[p]=W.Utils.CatmullRom(e[p],n[p],i[p],r[p],o,s[p])}else for(var m in s)s[m]=W.Utils.CatmullRom(e[m],n[m],i[m],r[m],o,s[m]);return s}}}},G={},q=function(e,n,i){if(!e||!e.nodeType)return n;var r=e.queueID||"q_"+Date.now();e.queueID||(e.queueID=r);var o=G[r];if(o){if(o.object===n&&e===o.tween.node&&i._startTime===o.tween._startTime)M(o.tween);else if("object"===t(n)&&n&&o.object){for(var a in n)a in o.object&&(i._startTime===o.tween._startTime?delete o.object[a]:o.propNormaliseRequired=!0);o.object=s({},o.object,n)}return o.object}return"object"===t(n)&&n?(G[r]={tween:i,object:n,propNormaliseRequired:!1},G[r].object):n},X=function(e,t){return t?e?e===window||e===document?[e]:"string"==typeof e?!!document.querySelectorAll&&document.querySelectorAll(e):Array.isArray(e)?e:e.nodeType?[e]:[]:null:e?e===window||e===document?e:"string"==typeof e?!!document.querySelector&&document.querySelector(e):Array.isArray(e)?e[0]:e.nodeType?e:null:null},K=0,Y=F.Linear.None,Z=function(){function e(n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=K++,!n||"object"!==t(n)||i||n.nodeType?n&&(n.nodeType||n.length||"string"==typeof n)&&(n=this.node=X(n),i=this.object=q(n,i,this)):(i=this.object=n,n=null),this._valuesEnd=null,this._valuesStart={},this._duration=1e3,this._easingFunction=Y,this._easingReverse=Y,this._interpolationFunction=W.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return o(e,null,[{key:"fromTo",value:function(t,n,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};r.quickRender=r.quickRender?r.quickRender:!i;var o=new e(t,n).to(i,r);return r.quickRender&&(o.render().update(o._startTime),o._rendered=!1,o._onStartCallbackFired=!1),o}},{key:"to",value:function(t,n,i){return e.fromTo(t,null,n,i)}},{key:"from",value:function(t,n,i){return e.fromTo(t,n,null,i)}}]),o(e,[{key:"setMaxListener",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:15;return this._maxListener=e,this}},{key:"on",value:function(e,t){for(var n=this._maxListener,i=e+P,r=0;r<n;r++){var o=i+r;if(!this[o]){this[o]=t;break}}return this}},{key:"once",value:function(e,t){return this}},{key:"off",value:function(e,t){for(var n=this._maxListener,i=e+P,r=0;r<n;r++){var o=i+r;this[o]===t&&(this[o]=null)}return this}},{key:"emit",value:function(e,t,n,i,r){var o=this._maxListener,s=e+P;if(!this[s+0])return this;for(var a=0;a<o;a++){var c=s+a;this[c]&&this[c](t,n,i,r)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(e){var t=this._reversed;return this._reversed=void 0!==e?e:!t,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,M(this),this._pausedTime=y(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=y()-this._pausedTime,this._initTime=this._startTime,C(this),this._pausedTime=y(),this.emit("play",this.object))}},{key:"restart",value:function(e){return this._repeat=this._r,this.reassignValues(),C(this),this.emit("restart",this.object)}},{key:"seek",value:function(e,t){var n=this._duration,i=this._initTime,r=this._startTime,o=this._reversed,s=i+e;return this._isPlaying=!0,s<r&&i<=r&&(this._startTime-=n,this._reversed=!o),this.update(e,!1),this.emit("seek",e,this.object),t?this:this.pause()}},{key:"duration",value:function(e){return this._duration="function"==typeof e?e(this._duration):e,this}},{key:"to",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;if(this._valuesEnd=e,"number"==typeof n||"function"==typeof n)this._duration="function"==typeof n?n(this._duration):n;else if("object"===t(n))for(var i in n)if("function"==typeof this[i]){var r=c(Array.isArray(n[i])?n[i]:[n[i]],4),o=r[0],s=void 0===o?null:o,a=r[1],l=void 0===a?null:a,u=r[2],h=void 0===u?null:u,d=r[3],f=void 0===d?null:d;this[i](s,l,h,f)}return this}},{key:"render",value:function(){if(this._rendered)return this;var t=this._valuesStart,n=this._valuesEnd,i=this.object,r=this.node,o=this.InitialValues;if(V(i),V(n),r&&r.queueID&&G[r.queueID]){var s=G[r.queueID];s.propNormaliseRequired&&s.tween!==this&&(s.normalisedProp=!0,s.propNormaliseRequired=!1)}for(var a in r&&o&&(i&&0!==Object.keys(i).length?n&&0!==Object.keys(n).length||(n=this._valuesEnd=o(r,i)):i=this.object=q(r,o(r,n),this)),n){var c=i&&i[a]&&l(i[a]),d=n[a];if(!(T[a]&&T[a].init&&(T[a].init.call(this,c,d,a,i),void 0===c&&t[a]&&(c=t[a]),T[a].skipProcess))&&!("number"==typeof c&&isNaN(c)||null===c||null===d||!1===c||!1===d||void 0===c||void 0===d||c===d)){if(Array.isArray(d)&&!Array.isArray(c)){d.unshift(c);for(var f=0,p=d.length;f<p;f++)if("string"==typeof d[f]){for(var g=u(d[f]),m={length:g.length,isString:!0},v=0,y=g.length;v<y;v++)m[v]=g[v];d[f]=m}}"number"==typeof(t[a]=c)&&"string"==typeof d&&"="===d[1]||h(a,i,t,n)}}return e.Renderer&&this.node&&e.Renderer.init&&(e.Renderer.init.call(this,i,t,n),this.__render=!0),this}},{key:"start",value:function(e){return this._startTime=void 0!==e?"string"==typeof e?y()+parseFloat(e):e:y(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,C(this),this}},{key:"stop",value:function(){var e=this._isPlaying,t=this._isFinite,n=this.object,i=this._startTime,r=this._duration,o=this._r,s=this._yoyo,a=this._reversed;if(!e)return this;var c=t?(o+1)%2==1:!a;return this._reversed=!1,s&&c?this.update(i):this.update(i+r),M(this),this.emit("stop",n)}},{key:"delay",value:function(e){return this._delayTime="function"==typeof e?e(this._delayTime):e,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var e=0,t=this._chainedTweensCount;e<t;e++)this[O+e]=arguments[e];return this}},{key:"repeat",value:function(e){return this._repeat=this._duration?"function"==typeof e?e(this._repeat):e:0,this._r=this._repeat,this._isFinite=isFinite(e),this}},{key:"reverseDelay",value:function(e){return this._reverseDelayTime="function"==typeof e?e(this._reverseDelayTime):e,this}},{key:"yoyo",value:function(e,t){return this._yoyo="function"==typeof e?e(this._yoyo):null===e?this._yoyo:e,e||(this._reversed=!1),this._easingReverse=t||null,this}},{key:"easing",value:function(e){return this._easingFunction=e,this}},{key:"interpolation",value:function(e){return"function"==typeof e&&(this._interpolationFunction=e),this}},{key:"reassignValues",value:function(e){var t=this._valuesStart,n=this.object,i=this._delayTime;for(var r in this._isPlaying=!0,this._startTime=void 0!==e?e:y(),this._startTime+=i,this._reversed=!1,C(this),t){var o=t[r];n[r]=o}return this}},{key:"update",value:function(t,n,i){var r,o,s,a=this._onStartCallbackFired,c=this._easingFunction,l=this._interpolationFunction,u=this._easingReverse,h=this._repeat,f=this._delayTime,p=this._reverseDelayTime,g=this._yoyo,m=this._reversed,v=this._startTime,b=this._prevTime,w=this._duration,_=this._valuesStart,x=this._valuesEnd,E=this.object,A=this._isFinite,C=this._isPlaying,S=this.__render,k=this._chainedTweensCount,F=0;if(w){var P=(t=void 0!==t?t:y())-b;if(this._prevTime=t,250<P&&(t-=P-50/3),!C||t<v&&!i)return!0;r=1<(r=(t-v)/w)?1:r,r=m?1-r:r}else r=1,h=0;if(a||(this._rendered||(this.render(),this._rendered=!0),this.emit("start",E),this._onStartCallbackFired=!0),o=m&&u||c,!E)return!0;for(s in x){var L=_[s];if(null!=L||T[s]&&T[s].update){var R=x[s],D=o[s]?o[s](r):"function"==typeof o?o(r):Y(r),B=l[s]?l[s]:"function"==typeof l?l:W.Linear;"number"==typeof R?E[s]=((L+(R-L)*D)*N|0)/N:Array.isArray(R)&&!Array.isArray(L)?E[s]=B(R,D,E[s]):R&&R.update?R.update(D):"function"==typeof R?E[s]=R(D):"string"==typeof R&&"number"==typeof L?E[s]=L+parseFloat(R[0]+R.substr(2))*D:d(s,E,_,x,D,r),T[s]&&T[s].update&&T[s].update.call(this,E[s],L,R,D,r,s),F++}}if(!F)return M(this),!1;if(S&&e.Renderer&&e.Renderer.update&&e.Renderer.update.call(this,E,r),this.emit("update",E,r,t),1===r||m&&0===r){if(0<h&&0<w){if(A&&this._repeat--,g)this._reversed=!m;else for(s in x){var I=x[s];"string"==typeof I&&"number"==typeof _[s]&&(_[s]+=parseFloat(I[0]+I.substr(2)))}return this.emit(g&&!m?"reverse":"repeat",E),this._startTime=m&&p?t-p:t+f,!0}if(n||(this._isPlaying=!1,M(this),K--),this.emit("complete",E),this._repeat=this._r,k)for(var j=0;j<k;j++)this[O+j].start(t+w);return!1}return!0}}]),e}();e.Plugins=T,e.Selector=X,e.Interpolator=function(e,n){var i=Array.isArray(e),r="string"==typeof e?e:i?e.slice():s({},e);if(i)for(var o=0,a=e.length;o<a;o++)h(o,r,e,n);else if("object"===t(e))for(var c in e)h(c,r,e,n);else if("string"==typeof e){e=u(e),n=u(n);for(var l=1;l<e.length;)e[l]===n[l]&&"string"==typeof e[l-1]?(e.splice(l-1,2,e[l-1]+e[l]),n.splice(l-1,2,n[l-1]+n[l])):l++;for(var f={isString:!0,length:e.length};l<f.length;)f[l]=e[l],l++}return function(o){if(i)for(var s=0,a=e.length;s<a;s++)d(s,r,e,n,o);else if("object"===t(r))for(var c in e)d(c,r,e,n,o);else"string"==typeof r&&(r=d(0,0,e,n,o,o,!0));return r}},e.onTick=function(e){return b.push({update:e})},e.has=function(e){return null!==S(e)},e.get=S,e.getAll=function(){return b},e.removeAll=function(){b.length=0},e.remove=M,e.add=C,e.now=y,e.update=k,e.autoPlay=function(e){_=e},e.isRunning=function(){return w},e.Tween=Z,e.Easing=F,e.Interpolation=W,Object.defineProperty(e,"__esModule",{value:!0})})}).call(t,n(7),n(72))},function(e,t,n){"use strict";(function(t){function i(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r=n(5),o=n(162),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=n(76):"undefined"!==typeof t&&(e=n(76)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){a.headers[e]={}}),r.forEach(["post","put","patch"],function(e){a.headers[e]=r.merge(s)}),e.exports=a}).call(t,n(72))},function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var s=t[r](o),a=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(a).then(function(e){i("next",e)},function(e){i("throw",e)});e(a)}return i("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(20),s=n.n(o),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(){r(this,e),this.config={siteId:240,map:{deviceId:170},api:{endpoint:"https://asia-api.adsum.io",site:240,username:"170-device",key:"6c15cae0c6594c063a713b91b2e0cb0c56a9d0cee823f16ff80606d1e91ef19b"},analyticsLegacy:{endpoint:"https://analytics.adsum.io/piwik.php",site:1,token:"f4a8be0670524ee957374a44dfe278e9"}}}return a(e,[{key:"init",value:function(){function e(){return t.apply(this,arguments)}var t=i(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:9001/deviceConfig");case 2:return t=e.sent,e.next=5,t.json();case 5:this.config=e.sent;case 6:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),l=new c;t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=(n(9),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),o=function(){function e(){i(this,e),this.awm=null}return r(e,[{key:"init",value:function(e){return this.awm=e,this}},{key:"getAllFloors",value:function(){return this.awm.objectManager.floors}},{key:"getAllBuildings",value:function(){return this.awm.objectManager.buildings}},{key:"getCurrentFloor",value:function(){return this.awm.sceneManager.getCurrentFloor()}},{key:"setCurrentFloor",value:function(e){var t=null===e?null:this.awm.objectManager.floors.get(e);return this.awm.sceneManager.setCurrentFloor(t)}}]),e}(),s=new o;t.a=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(10),o=n(184),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.awm=t}return s(e,[{key:"createJSON3DObj",value:function(e){return new Promise(function(t,n){var i=new r.ObjectLoader;i.setCrossOrigin("anonymous"),i.load(e,t,function(){},n)})}},{key:"createOBJ3DObj",value:function(e){return new Promise(function(t,n){(new o.a).load(e,t,function(){},n)})}},{key:"add3DObjectOnFloor",value:function(e,t,n){var i=null;if(i=e?this.awm.objectManager.floors.get(e)._mesh:this.awm.objectManager.site._mesh,t=i.worldToLocal(t.clone()),n)return n.visible=!0,n.position.copy(t),i.add(n),n}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(16);t.a=i.a},function(e,t,n){var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function e(t,n,i){if("string"!==typeof t)return void(e.original?e.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace()));2==arguments.length&&(i=n),e.modules[t]||(e.payloads[t]=i,e.modules[t]=null)};t.modules={},t.payloads={};var n=function(e,t,n){if("string"===typeof t){var r=o(e,t);if(void 0!=r)return n&&n(),r}else if("[object Array]"===Object.prototype.toString.call(t)){for(var s=[],a=0,c=t.length;a<c;++a){var l=o(e,t[a]);if(void 0==l&&i.original)return;s.push(l)}return n&&n.apply(null,s)||!0}},i=function e(t,i){var r=n("",t,i);return void 0==r&&e.original?e.original.apply(this,arguments):r},r=function e(t,n){if(-1!==n.indexOf("!")){var i=n.split("!");return e(t,i[0])+"!"+e(t,i[1])}if("."==n.charAt(0)){var r=t.split("/").slice(0,-1).join("/");for(n=r+"/"+n;-1!==n.indexOf(".")&&o!=n;){var o=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},o=function(e,i){i=r(e,i);var o=t.modules[i];if(!o){if("function"===typeof(o=t.payloads[i])){var s={},a={id:i,uri:"",exports:s,packaged:!0};s=o(function(e,t){return n(i,e,t)},s,a)||a.exports,t.modules[i]=s,delete t.payloads[i]}o=t.modules[i]=s||o}return o};!function(n){var r=e;n&&(e[n]||(e[n]={}),r=e[n]),r.define&&r.define.packaged||(t.original=r.define,r.define=t,r.define.packaged=!0),r.acequire&&r.acequire.packaged||(i.original=r.acequire,r.acequire=i,r.acequire.packaged=!0)}("ace")}(),ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,n){"use strict";function i(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function r(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var i=n||0;i<e.length;i++)if(e[i]===t)return i;return-1}var o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s=void 0===o.exec.call(/()??/,"")[1],a=function(){var e=/^/g;return o.test.call(e,""),!e.lastIndex}();a&&s||(RegExp.prototype.exec=function(e){var t,n,c=o.exec.apply(this,arguments);if("string"==typeof e&&c){if(!s&&c.length>1&&r(c,"")>-1&&(n=RegExp(this.source,o.replace.call(i(this),"g","")),o.replace.call(e.slice(c.index),n,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(c[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<c.length;l++)(t=this._xregexp.captureNames[l-1])&&(c[t]=c[l]);!a&&this.global&&!c[0].length&&this.lastIndex>c.index&&this.lastIndex--}return c},a||(RegExp.prototype.test=function(e){var t=o.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function o(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){}}function s(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError("Function.prototype.bind called on incompatible "+t);var n=g.call(arguments,1),i=function i(){if(this instanceof i){var r=t.apply(this,n.concat(g.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(g.call(arguments)))};return t.prototype&&(r.prototype=t.prototype,i.prototype=new r,r.prototype=null),i});var a,c,l,u,h,d=Function.prototype.call,f=Array.prototype,p=Object.prototype,g=f.slice,m=d.bind(p.toString),v=d.bind(p.hasOwnProperty);if((h=v(p,"__defineGetter__"))&&(a=d.bind(p.__defineGetter__),c=d.bind(p.__defineSetter__),l=d.bind(p.__lookupGetter__),u=d.bind(p.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,n=[];if(n.splice.apply(n,e(20)),n.splice.apply(n,e(26)),t=n.length,n.splice(5,0,"XXX"),n.length,t+1==n.length)return!0}()){var y=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?y.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(g.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):void 0==e?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var i=this.slice(e,e+t),r=g.call(arguments,2),o=r.length;if(e===n)o&&this.push.apply(this,r);else{var s=Math.min(t,n-e),a=e+s,c=a+o-s,l=n-a,u=n-s;if(c<a)for(var h=0;h<l;++h)this[c+h]=this[a+h];else if(c>a)for(h=l;h--;)this[c+h]=this[a+h];if(o&&e===u)this.length=u,this.push.apply(this,r);else for(this.length=u+o,h=0;h<o;++h)this[e+h]=r[h]}return i};Array.isArray||(Array.isArray=function(e){return"[object Array]"==m(e)});var b=Object("a"),w="a"!=b[0]||!(0 in b);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=P(this),n=w&&"[object String]"==m(this)?this.split(""):t,i=arguments[1],r=-1,o=n.length>>>0;if("[object Function]"!=m(e))throw new TypeError;for(;++r<o;)r in n&&e.call(i,n[r],r,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=P(this),n=w&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0,r=Array(i),o=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var s=0;s<i;s++)s in n&&(r[s]=e.call(o,n[s],s,t));return r}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=P(this),i=w&&"[object String]"==m(this)?this.split(""):n,r=i.length>>>0,o=[],s=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var a=0;a<r;a++)a in i&&(t=i[a],e.call(s,t,a,n)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=P(this),n=w&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0,r=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var o=0;o<i;o++)if(o in n&&!e.call(r,n[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=P(this),n=w&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0,r=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var o=0;o<i;o++)if(o in n&&e.call(r,n[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=P(this),n=w&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;o<i;o++)o in n&&(r=e.call(void 0,r,n[o],o,t));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=P(this),n=w&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,o=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(r=e.call(void 0,r,n[o],o,t))}while(o--);return r}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=w&&"[object String]"==m(this)?this.split(""):P(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=s(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=w&&"[object String]"==m(this)?this.split(""):P(this),n=t.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,s(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:p)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(e,t){if("object"!=("undefined"===typeof e?"undefined":i(e))&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(v(e,t)){var n,r,o;if(n={enumerable:!0,configurable:!0},h){var s=e.__proto__;e.__proto__=p;var r=l(e,t),o=u(e,t);if(e.__proto__=s,r||o)return r&&(n.get=r),o&&(n.set=o),n}return n.value=e[t],n}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var _;_=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var n;if(null===e)n=_();else{if("object"!=("undefined"===typeof e?"undefined":i(e)))throw new TypeError("typeof prototype["+("undefined"===typeof e?"undefined":i(e))+"] != 'object'");var r=function(){};r.prototype=e,n=new r,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}if(Object.defineProperty){var x=o({}),E="undefined"==typeof document||o(document.createElement("div"));if(!x||!E)var A=Object.defineProperty}if(!Object.defineProperty||A){Object.defineProperty=function(e,t,n){if("object"!=("undefined"===typeof e?"undefined":i(e))&&"function"!=typeof e||null===e)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=("undefined"===typeof n?"undefined":i(n))&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(A)try{return A.call(Object,e,t,n)}catch(e){}if(v(n,"value"))if(h&&(l(e,t)||u(e,t))){var r=e.__proto__;e.__proto__=p,delete e[t],e[t]=n.value,e.__proto__=r}else e[t]=n.value;else{if(!h)throw new TypeError("getters & setters can not be defined on this javascript engine");v(n,"get")&&a(e,t,n.get),v(n,"set")&&c(e,t,n.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var n in t)v(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(e){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(e){return!1}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";v(e,t);)t+="?";e[t]=!0;var n=v(e,t);return delete e[t],n}),!Object.keys){var C=!0,S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=S.length;for(var k in{toString:null})C=!1;Object.keys=function(e){if("object"!=("undefined"===typeof e?"undefined":i(e))&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var n in e)v(e,n)&&t.push(n);if(C)for(var r=0,o=M;r<o;r++){var s=S[r];v(e,s)&&t.push(s)}return t}}Date.now||(Date.now=function(){return(new Date).getTime()});var T="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||T.trim()){T="["+T+"]";var F=new RegExp("^"+T+T+"*"),O=new RegExp(T+T+"*$");String.prototype.trim=function(){return String(this).replace(F,"").replace(O,"")}}var P=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){"use strict";e("./regexp"),e("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(e,t,n){"use strict";if(t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var r=n.indexOf(t);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(t=t||document,t.createStyleSheet&&(n=t.styleSheets)){for(;i<n.length;)if(n[i++].owningElement.id===e)return!0}else if(n=t.getElementsByTagName("style"))for(;i<n.length;)if(n[i++].id===e)return!0;return!1},t.importCssString=function(e,n,i){if(i=i||document,n&&t.hasCssString(n,i))return null;var r;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */"),i.createStyleSheet?(r=i.createStyleSheet(),r.cssText=e,n&&(r.owningElement.id=n)):(r=t.createElement("style"),r.appendChild(i.createTextNode(e)),n&&(r.id=n),t.getDocumentHead(i).appendChild(r))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var i=t.createElement("link");i.rel="stylesheet",i.href=e,t.getDocumentHead(n).appendChild(i)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=t.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=e.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},"undefined"==typeof document)return void(t.importCssString=function(){});void 0!==window.pageYOffset?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(e,t,n){"use strict";e("./fixoldbrowsers");var i=e("./oop"),r=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(t,r),t.keyCodeToString=function(e){var t=r[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==("undefined"===typeof navigator?"undefined":i(navigator))){var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),o=navigator.userAgent;t.isWin="win"==r,t.isMac="mac"==r,t.isLinux="linux"==r,t.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((o.match(/rv:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isIPad=o.indexOf("iPad")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0)}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function r(e,t,n){var i=u(t);if(!a.isMac&&c){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(i|=8),c.altGr){if(3==(3&i))return;c.altGr=0}if(18===n||17===n){var r="location"in t?t.location:t.keyLocation;if(17===n&&1===r)1==c[n]&&(l=t.timeStamp);else if(18===n&&3===i&&2===r){var o=t.timeStamp-l;o<50&&(c.altGr=!0)}}}if(n in s.MODIFIER_KEYS&&(n=-1),8&i&&n>=91&&n<=93&&(n=-1),!i&&13===n){var r="location"in t?t.location:t.keyLocation;if(3===r&&(e(t,i,-n),t.defaultPrevented))return}if(a.isChromeOS&&8&i){if(e(t,i,n),t.defaultPrevented)return;i&=-9}return!!(i||n in s.FUNCTION_KEYS||n in s.PRINTABLE_KEYS)&&e(t,i,n)}function o(){c=Object.create(null)}var s=e("./keys"),a=e("./useragent"),c=null,l=0;t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var i=function(){n.call(e,window.event)};n._wrapper=i,e.attachEvent("on"+t,i)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||a.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,i){function r(e){n&&n(e),i&&i(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",r,!0),t.removeListener(document,"dragstart",r,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",r,!0),t.addListener(document,"dragstart",r,!0),r},t.addTouchMoveListener=function(e,n){var i,r;t.addListener(e,"touchstart",function(e){var t=e.touches,n=t[0];i=n.clientX,r=n.clientY}),t.addListener(e,"touchmove",function(e){var t=e.touches;if(!(t.length>1)){var o=t[0];e.wheelX=i-o.clientX,e.wheelY=r-o.clientY,i=o.clientX,r=o.clientY,n(e)}})},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)})},t.addMultiMouseDownListener=function(e,n,i,r){function o(e){if(0!==t.getButton(e)?h=0:e.detail>1?++h>4&&(h=1):h=1,a.isIE){var o=Math.abs(e.clientX-c)>5||Math.abs(e.clientY-l)>5;u&&!o||(h=1),u&&clearTimeout(u),u=setTimeout(function(){u=null},n[h-1]||600),1==h&&(c=e.clientX,l=e.clientY)}if(e._clicks=h,i[r]("mousedown",e),h>4)h=0;else if(h>1)return i[r](d[h],e)}function s(e){h=2,u&&clearTimeout(u),u=setTimeout(function(){u=null},n[h-1]||600),i[r]("mousedown",e),i[r](d[h],e)}var c,l,u,h=0,d={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(e)||(e=[e]),e.forEach(function(e){t.addListener(e,"mousedown",o),a.isOldIE&&t.addListener(e,"dblclick",s)})};var u=!a.isMac||!a.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};if(t.getModifierString=function(e){return s.KEY_MODS[u(e)]},t.addCommandKeyListener=function(e,n){var i=t.addListener;if(a.isOldGecko||a.isOpera&&!("KeyboardEvent"in window)){var s=null;i(e,"keydown",function(e){s=e.keyCode}),i(e,"keypress",function(e){return r(n,e,s)})}else{var l=null;i(e,"keydown",function(e){c[e.keyCode]=(c[e.keyCode]||0)+1;var t=r(n,e,e.keyCode);return l=e.defaultPrevented,t}),i(e,"keypress",function(e){l&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),l=null)}),i(e,"keyup",function(e){c[e.keyCode]=null}),c||(o(),i(window,"focus",o))}},"object"==("undefined"===typeof window?"undefined":i(window))&&window.postMessage&&!a.isOldIE){t.nextTick=function(e,n){n=n||window;t.addListener(n,"message",function i(r){"zero-timeout-message-1"==r.data&&(t.stopPropagation(r),t.removeListener(n,"message",i),e())}),n.postMessage("zero-timeout-message-1","*")}}t.nextFrame="object"==("undefined"===typeof window?"undefined":i(window))&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var r=/^\s\s*/,o=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(o,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&"object"==i(e[n])?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!==("undefined"===typeof t?"undefined":i(t))||!t)return t;var n;if(Array.isArray(t)){n=[];for(var r=0;r<t.length;r++)n[r]=e(t[r]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;n={};for(var r in t)n[r]=e(t[r]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function e(i){return e.cancel(),t=setTimeout(n,i||0),e};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i.isPending=function(){return t},i},t.delayedCall=function(e,t){var n=null,i=function(){n=null,e()},r=function(e){null==n&&(n=setTimeout(i,e||t))};return r.delay=function(e){n&&clearTimeout(n),n=setTimeout(i,e||t)},r.schedule=r,r.call=function(){this.cancel(),e()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}}),ace.define("ace/keyboard/textinput_ios",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("../lib/dom"),s=e("../lib/lang"),a=e("../lib/keys"),c=a.KEY_MODS,l=r.isChrome<18,u=r.isIE,h=function(e,t){function n(e){if(!y){if(y=!0,S)t=0,n=e?0:f.value.length-1;else var t=4,n=5;try{f.setSelectionRange(t,n)}catch(e){}y=!1}}function h(){y||(f.value=p,r.isWebKit&&E.schedule())}function d(){clearTimeout(j),j=setTimeout(function(){b&&(f.style.cssText=b,b=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var f=o.createElement("textarea");f.className=r.isIOS?"ace_text-input ace_text-input-ios":"ace_text-input",r.isTouchPad&&f.setAttribute("x-palm-disable-auto-cap",!0),f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck",!1),f.style.opacity="0",e.insertBefore(f,e.firstChild);var p="\n aaaa a\n",g=!1,m=!1,v=!1,y=!1,b="",w=!0;try{var _=document.activeElement===f}catch(e){}i.addListener(f,"blur",function(e){t.onBlur(e),_=!1}),i.addListener(f,"focus",function(e){_=!0,t.onFocus(e),n()}),this.focus=function(){if(b)return f.focus();f.style.position="fixed",f.focus()},this.blur=function(){f.blur()},this.isFocused=function(){return _};var x=s.delayedCall(function(){_&&n(w)}),E=s.delayedCall(function(){y||(f.value=p,_&&n())});r.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=w&&(w=!w,x.schedule())}),h(),_&&t.onFocus();var A=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length},C=function(e){A(f)?(t.selectAll(),n()):S&&n(t.selection.isEmpty())},S=null;this.setInputHandler=function(e){S=e},this.getInputHandler=function(){return S};var M=!1,k=function(e){4===f.selectionStart&&5===f.selectionEnd||(S&&(e=S(e),S=null),v?(n(),e&&t.onPaste(e),v=!1):e==p.substr(0)&&4===f.selectionStart?M?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):g||(e.substring(0,9)==p&&e.length>p.length?e=e.substr(9):e.substr(0,4)==p.substr(0,4)?e=e.substr(4,e.length-p.length+1):e.charAt(e.length-1)==p.charAt(0)&&(e=e.slice(0,-1)),e==p.charAt(0)||e.charAt(e.length-1)==p.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),g&&(g=!1),M&&(M=!1))},T=function(e){if(!y){var t=f.value;k(t),h()}},F=function e(t,n,i){var r=t.clipboardData||window.clipboardData;if(r&&!l){var o=u||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(t){if(!i)return e(t,n,!0)}}},O=function(e,o){var s=t.getCopyText();if(!s)return i.preventDefault(e);F(e,s)?(r.isIOS&&(m=o,f.value="\n aa"+s+"a a\n",f.setSelectionRange(4,4+s.length),g={value:s}),o?t.onCut():t.onCopy(),r.isIOS||i.preventDefault(e)):(g=!0,f.value=s,f.select(),setTimeout(function(){g=!1,h(),n(),o?t.onCut():t.onCopy()}))},P=function(e){O(e,!0)},L=function(e){O(e,!1)},R=function(e){var o=F(e);"string"==typeof o?(o&&t.onPaste(o,e),r.isIE&&setTimeout(n),i.preventDefault(e)):(f.value="",v=!0)};i.addCommandKeyListener(f,t.onCommandKey.bind(t)),i.addListener(f,"select",C),i.addListener(f,"input",T),i.addListener(f,"cut",P),i.addListener(f,"copy",L),i.addListener(f,"paste",R);var D=function(e){y||!t.onCompositionStart||t.$readOnly||(y={},y.canUndo=t.session.$undoManager,t.onCompositionStart(),setTimeout(B,0),t.on("mousedown",I),y.canUndo&&!t.selection.isEmpty()&&(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},B=function(){if(y&&t.onCompositionUpdate&&!t.$readOnly){var e=f.value.replace(/\x01/g,"");if(y.lastValue!==e&&(t.onCompositionUpdate(e),y.lastValue&&t.undo(),y.canUndo&&(y.lastValue=e),y.lastValue)){var n=t.selection.getRange();t.insert(y.lastValue),t.session.markUndoGroup(),y.range=t.selection.getRange(),t.selection.setRange(n),t.selection.clearSelection()}}},I=function e(n){if(t.onCompositionEnd&&!t.$readOnly){var i=y;y=!1;var o=setTimeout(function(){o=null;var e=f.value.replace(/\x01/g,"");y||(e==i.lastValue?h():!i.lastValue&&e&&(h(),k(e)))});S=function(e){return o&&clearTimeout(o),(e=e.replace(/\x01/g,""))==i.lastValue?"":(i.lastValue&&o&&t.undo(),e)},t.onCompositionEnd(),t.removeListener("mousedown",e),"compositionend"==n.type&&i.range&&t.selection.setRange(i.range);(!!r.isChrome&&r.isChrome>=53||!!r.isWebKit&&r.isWebKit>=603)&&T()}},N=s.delayedCall(B,50);i.addListener(f,"compositionstart",D),r.isGecko?i.addListener(f,"text",function(){N.schedule()}):(i.addListener(f,"keyup",function(){N.schedule()}),i.addListener(f,"keydown",function(){N.schedule()})),i.addListener(f,"compositionend",I),this.getElement=function(){return f},this.setReadOnly=function(e){f.readOnly=e},this.onContextMenu=function(e){M=!0,n(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,n){b||(b=f.style.cssText),f.style.cssText=(n?"z-index:100000;":"")+"height:"+f.style.height+";"+(r.isIE?"opacity:0.1;":"");var s=t.container.getBoundingClientRect(),a=o.computedStyle(t.container),c=s.top+(parseInt(a.borderTopWidth)||0),l=s.left+(parseInt(s.borderLeftWidth)||0),u=s.bottom-c-f.clientHeight-2,h=function(e){f.style.left=e.clientX-l-2+"px",f.style.top=Math.min(e.clientY-c-2,u)+"px"};h(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),clearTimeout(j),r.isWin&&i.capture(t.container,h,d))},this.onContextMenuClose=d;var j,U=function(e){t.textInput.onContextMenu(e),d()};if(i.addListener(f,"mouseup",U),i.addListener(f,"mousedown",function(e){e.preventDefault(),d()}),i.addListener(t.renderer.scroller,"contextmenu",U),i.addListener(f,"contextmenu",U),r.isIOS){var $=null,z=!1;e.addEventListener("keydown",function(e){$&&clearTimeout($),z=!0}),e.addEventListener("keyup",function(e){$=setTimeout(function(){z=!1},100)});var H=function(e){if(document.activeElement===f&&!z){if(m)return setTimeout(function(){m=!1},100);var n=f.selectionStart,i=f.selectionEnd;if(f.setSelectionRange(4,5),n==i)switch(n){case 0:t.onCommandKey(null,0,a.up);break;case 1:t.onCommandKey(null,0,a.home);break;case 2:t.onCommandKey(null,c.option,a.left);break;case 4:t.onCommandKey(null,0,a.left);break;case 5:t.onCommandKey(null,0,a.right);break;case 7:t.onCommandKey(null,c.option,a.right);break;case 8:t.onCommandKey(null,0,a.end);break;case 9:t.onCommandKey(null,0,a.down)}else{switch(i){case 6:t.onCommandKey(null,c.shift,a.right);break;case 7:t.onCommandKey(null,c.shift|c.option,a.right);break;case 8:t.onCommandKey(null,c.shift,a.end);break;case 9:t.onCommandKey(null,c.shift,a.down)}switch(n){case 0:t.onCommandKey(null,c.shift,a.up);break;case 1:t.onCommandKey(null,c.shift,a.home);break;case 2:t.onCommandKey(null,c.shift|c.option,a.left);break;case 3:t.onCommandKey(null,c.shift,a.left)}}}};document.addEventListener("selectionchange",H),t.on("destroy",function(){document.removeEventListener("selectionchange",H)})}};t.TextInput=h}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/keyboard/textinput_ios"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("../lib/dom"),s=e("../lib/lang"),a=r.isChrome<18,c=r.isIE,l=e("./textinput_ios").TextInput,u=function(e,t){function n(e){if(!m){if(m=!0,A)var t=0,n=e?0:d.value.length-1;else var t=e?2:1,n=2;try{d.setSelectionRange(t,n)}catch(e){}m=!1}}function u(){m||(d.value=f,r.isWebKit&&_.schedule())}function h(){clearTimeout(I),I=setTimeout(function(){v&&(d.style.cssText=v,v=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}if(r.isIOS)return l.call(this,e,t);var d=o.createElement("textarea");d.className="ace_text-input",d.setAttribute("wrap","off"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck",!1),d.style.opacity="0",e.insertBefore(d,e.firstChild);var f="\u2028\u2028",p=!1,g=!1,m=!1,v="",y=!0;try{var b=document.activeElement===d}catch(e){}i.addListener(d,"blur",function(e){t.onBlur(e),b=!1}),i.addListener(d,"focus",function(e){b=!0,t.onFocus(e),n()}),this.focus=function(){if(v)return d.focus();var e=d.style.top;d.style.position="fixed",d.style.top="0px",d.focus(),setTimeout(function(){d.style.position="","0px"==d.style.top&&(d.style.top=e)},0)},this.blur=function(){d.blur()},this.isFocused=function(){return b};var w=s.delayedCall(function(){b&&n(y)}),_=s.delayedCall(function(){m||(d.value=f,b&&n())});r.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=y&&(y=!y,w.schedule())}),u(),b&&t.onFocus();var x=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length},E=function(e){p?p=!1:x(d)?(t.selectAll(),n()):A&&n(t.selection.isEmpty())},A=null;this.setInputHandler=function(e){A=e},this.getInputHandler=function(){return A};var C=!1,S=function(e){A&&(e=A(e),A=null),g?(n(),e&&t.onPaste(e),g=!1):e==f.charAt(0)?C?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==f?e=e.substr(2):e.charAt(0)==f.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),C&&(C=!1)},M=function(e){if(!m){var t=d.value;S(t),u()}},k=function e(t,n,i){var r=t.clipboardData||window.clipboardData;if(r&&!a){var o=c||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(t){if(!i)return e(t,n,!0)}}},T=function(e,r){var o=t.getCopyText();if(!o)return i.preventDefault(e);k(e,o)?(r?t.onCut():t.onCopy(),i.preventDefault(e)):(p=!0,d.value=o,d.select(),setTimeout(function(){p=!1,u(),n(),r?t.onCut():t.onCopy()}))},F=function(e){T(e,!0)},O=function(e){T(e,!1)},P=function(e){var o=k(e);"string"==typeof o?(o&&t.onPaste(o,e),r.isIE&&setTimeout(n),i.preventDefault(e)):(d.value="",g=!0)};i.addCommandKeyListener(d,t.onCommandKey.bind(t)),i.addListener(d,"select",E),i.addListener(d,"input",M),i.addListener(d,"cut",F),i.addListener(d,"copy",O),i.addListener(d,"paste",P),"oncut"in d&&"oncopy"in d&&"onpaste"in d||i.addListener(e,"keydown",function(e){if((!r.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:O(e);break;case 86:P(e);break;case 88:F(e)}});var L=function(e){m||!t.onCompositionStart||t.$readOnly||(m={},m.canUndo=t.session.$undoManager,t.onCompositionStart(),setTimeout(R,0),t.on("mousedown",D),m.canUndo&&!t.selection.isEmpty()&&(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},R=function(){if(m&&t.onCompositionUpdate&&!t.$readOnly){var e=d.value.replace(/\u2028/g,"");if(m.lastValue!==e&&(t.onCompositionUpdate(e),m.lastValue&&t.undo(),m.canUndo&&(m.lastValue=e),m.lastValue)){var n=t.selection.getRange();t.insert(m.lastValue),t.session.markUndoGroup(),m.range=t.selection.getRange(),t.selection.setRange(n),t.selection.clearSelection()}}},D=function e(n){if(t.onCompositionEnd&&!t.$readOnly){var i=m;m=!1;var o=setTimeout(function(){o=null;var e=d.value.replace(/\u2028/g,"");m||(e==i.lastValue?u():!i.lastValue&&e&&(u(),S(e)))});A=function(e){return o&&clearTimeout(o),(e=e.replace(/\u2028/g,""))==i.lastValue?"":(i.lastValue&&o&&t.undo(),e)},t.onCompositionEnd(),t.removeListener("mousedown",e),"compositionend"==n.type&&i.range&&t.selection.setRange(i.range);(!!r.isChrome&&r.isChrome>=53||!!r.isWebKit&&r.isWebKit>=603)&&M()}},B=s.delayedCall(R,50);i.addListener(d,"compositionstart",L),r.isGecko?i.addListener(d,"text",function(){B.schedule()}):(i.addListener(d,"keyup",function(){B.schedule()}),i.addListener(d,"keydown",function(){B.schedule()})),i.addListener(d,"compositionend",D),this.getElement=function(){return d},this.setReadOnly=function(e){d.readOnly=e},this.onContextMenu=function(e){C=!0,n(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,n){v||(v=d.style.cssText),d.style.cssText=(n?"z-index:100000;":"")+"height:"+d.style.height+";"+(r.isIE?"opacity:0.1;":"");var s=t.container.getBoundingClientRect(),a=o.computedStyle(t.container),c=s.top+(parseInt(a.borderTopWidth)||0),l=s.left+(parseInt(s.borderLeftWidth)||0),u=s.bottom-c-d.clientHeight-2,f=function(e){d.style.left=e.clientX-l-2+"px",d.style.top=Math.min(e.clientY-c-2,u)+"px"};f(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),clearTimeout(I),r.isWin&&i.capture(t.container,f,h))},this.onContextMenuClose=h;var I,N=function(e){t.textInput.onContextMenu(e),h()};i.addListener(d,"mouseup",N),i.addListener(d,"mousedown",function(e){e.preventDefault(),h()}),i.addListener(t.renderer.scroller,"contextmenu",N),i.addListener(d,"contextmenu",N)};t.TextInput=u}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e)),t.setDefaultHandler("touchmove",this.onTouchMove.bind(e)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function r(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}function o(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)var n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var s=(e("../lib/dom"),e("../lib/event"),e("../lib/useragent"));(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,r=e.getButton();if(0!==r){var o=i.getSelectionRange(),a=o.isEmpty();return i.$blockScrolling++,(a||1==r)&&i.selection.moveToPosition(n),i.$blockScrolling--,void(2==r&&(i.textInput.onContextMenu(e.domEvent),s.isMozilla||e.preventDefault()))}return this.mousedownEvent.time=Date.now(),!t||i.isFocused()||(i.focus(),!this.$focusTimout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;n.$blockScrolling++,this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"),n.$blockScrolling--},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(t.$blockScrolling++,this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,e=r.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.$blockScrolling--,t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[e](i.row,i.column);if(n.$blockScrolling++,this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(-1==s&&a<=0)t=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==a&&s>=0)t=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(-1==s&&1==a)i=r.end,t=r.start;else{var c=o(this.$clickSelection,i);i=c.cursor,t=c.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.$blockScrolling--,n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>0||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session,r=i.getBracketRange(t);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=e.domEvent.timeStamp,r=i-n.t,o=e.wheelX/r,s=e.wheelY/r;r<250&&(o=(o+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(o/s),c=!1;if(a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(c=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(c=!0),c)n.allowed=i;else if(i-n.allowed<250){var l=Math.abs(o)<=1.1*Math.abs(n.vx)&&Math.abs(s)<=1.1*Math.abs(n.vy);l?(c=!0,n.allowed=i):n.allowed=0}return n.t=i,n.vx=o,n.vy=s,c?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}},this.onTouchMove=function(e){this.editor._emit("mousewheel",e)}}).call(i.prototype),t.DefaultHandlers=i}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function i(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=(e("./lib/oop"),e("./lib/dom"));(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){r.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){r.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(i.prototype),t.Tooltip=i}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function i(e){function t(){var t=h.getDocumentPosition().row,r=c.$annotations[t];if(!r)return n();if(t==s.session.getLength()){var o=s.renderer.pixelToScreenCoordinates(0,h.y).row,a=h.$pos;if(o>s.session.documentToScreenRow(a.row,a.column))return n()}if(d!=r)if(d=r.text.join("<br/>"),l.setHtml(d),l.show(),s._signal("showGutterTooltip",l),s.on("mousewheel",n),e.$tooltipFollowsMouse)i(h);else{var u=h.domEvent.target,f=u.getBoundingClientRect(),p=l.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px"}}function n(){u&&(u=clearTimeout(u)),d&&(l.hide(),d=null,s._signal("hideGutterTooltip",l),s.removeEventListener("mousewheel",n))}function i(e){l.setPosition(e.x,e.y)}var s=e.editor,c=s.renderer.$gutterLayer,l=new r(s.container);e.editor.setDefaultHandler("guttermousedown",function(t){if(s.isFocused()&&0==t.getButton()){if("foldWidgets"!=c.getRegion(t)){var n=t.getDocumentPosition().row,i=s.session.selection;if(t.getShiftKey())i.selectTo(n,0);else{if(2==t.domEvent.detail)return s.selectAll(),t.preventDefault();e.$clickSelection=s.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}});var u,h,d;e.editor.setDefaultHandler("guttermousemove",function(r){var s=r.domEvent.target||r.domEvent.srcElement;if(o.hasCssClass(s,"ace_fold-widget"))return n();d&&e.$tooltipFollowsMouse&&i(r),h=r,u||(u=setTimeout(function(){u=null,h&&!e.isMousePressed?t():n()},50))}),a.addListener(s.renderer.$gutter,"mouseout",function(e){h=null,d&&!u&&(u=setTimeout(function(){u=null,n()},50))}),s.on("changeSession",n)}function r(e){c.call(this,e)}var o=e("../lib/dom"),s=e("../lib/oop"),a=e("../lib/event"),c=e("../tooltip").Tooltip;s.inherits(r,c),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();e+=15,t+=15,e+r>n&&(e-=e+r-n),t+o>i&&(t-=20+o),c.prototype.setPosition.call(this,e,t)}}.call(r.prototype),t.GutterHandler=i}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function i(e){function t(e,t){var n=Date.now(),i=!t||e.row!=t.row,o=!t||e.column!=t.column;if(!M||i||o)m.$blockScrolling+=1,m.moveCursorToPosition(e),m.$blockScrolling-=1,M=n,k={x:b,y:w};else{r(k.x,k.y,b,w)>u?M=null:n-M>=l&&(m.renderer.scrollCursorIntoView(),M=null)}}function n(e,t){var n=Date.now(),i=m.renderer.layerConfig.lineHeight,r=m.renderer.layerConfig.characterWidth,o=m.renderer.scroller.getBoundingClientRect(),s={x:{left:b-o.left,right:o.right-b},y:{top:w-o.top,bottom:o.bottom-w}},a=Math.min(s.x.left,s.x.right),l=Math.min(s.y.top,s.y.bottom),u={row:e.row,column:e.column};a/r<=2&&(u.column+=s.x.left<s.x.right?-3:2),l/i<=1&&(u.row+=s.y.top<s.y.bottom?-1:1);var h=e.row!=u.row,d=e.column!=u.column,f=!t||e.row!=t.row;h||d&&!f?S?n-S>=c&&m.renderer.scrollCursorIntoView(u):S=n:S=null}function i(){var e=E;E=m.renderer.screenToTextCoordinates(b,w),t(E,e),n(E,e)}function h(){x=m.selection.toOrientedRange(),y=m.session.addMarker(x,"ace_selection",m.getSelectionStyle()),m.clearSelection(),m.isFocused()&&m.renderer.$cursorLayer.setBlinking(!1),clearInterval(_),i(),_=setInterval(i,20),F=0,s.addListener(document,"mousemove",f)}function d(){clearInterval(_),m.session.removeMarker(y),y=null,m.$blockScrolling+=1,m.selection.fromOrientedRange(x),m.$blockScrolling-=1,m.isFocused()&&!C&&m.renderer.$cursorLayer.setBlinking(!m.getReadOnly()),x=null,E=null,F=0,S=null,M=null,s.removeListener(document,"mousemove",f)}function f(){null==O&&(O=setTimeout(function(){null!=O&&y&&d()},20))}function p(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function g(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],i=a.isMac?e.altKey:e.ctrlKey,r="uninitialized";try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return i&&t.indexOf(r)>=0?o="copy":n.indexOf(r)>=0?o="move":t.indexOf(r)>=0&&(o="copy"),o}var m=e.editor,v=o.createElement("img");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(v.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(t){e[t]=this[t]},this),m.addEventListener("mousedown",this.onMouseDown.bind(e));var y,b,w,_,x,E,A,C,S,M,k,T=m.container,F=0;this.onDragStart=function(e){if(this.cancelDrag||!T.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}x=m.getSelectionRange();var n=e.dataTransfer;n.effectAllowed=m.getReadOnly()?"copy":"copyMove",a.isOpera&&(m.container.appendChild(v),v.scrollTop=0),n.setDragImage&&n.setDragImage(v,0,0),a.isOpera&&m.container.removeChild(v),n.clearData(),n.setData("Text",m.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(e){if(T.draggable=!1,C=!1,this.setState(null),!m.getReadOnly()){var t=e.dataTransfer.dropEffect;A||"move"!=t||m.session.remove(m.getSelectionRange()),m.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!m.getReadOnly()&&p(e.dataTransfer))return b=e.clientX,w=e.clientY,y||h(),F++,e.dataTransfer.dropEffect=A=g(e),s.preventDefault(e)},this.onDragOver=function(e){if(!m.getReadOnly()&&p(e.dataTransfer))return b=e.clientX,w=e.clientY,y||(h(),F++),null!==O&&(O=null),e.dataTransfer.dropEffect=A=g(e),s.preventDefault(e)},this.onDragLeave=function(e){if(--F<=0&&y)return d(),A=null,s.preventDefault(e)},this.onDrop=function(e){if(E){var t=e.dataTransfer;if(C)switch(A){case"move":x=x.contains(E.row,E.column)?{start:E,end:E}:m.moveText(x,E);break;case"copy":x=m.moveText(x,E,!0)}else{var n=t.getData("Text");x={start:E,end:m.session.insert(E,n)},m.focus(),A=null}return d(),s.preventDefault(e)}},s.addListener(T,"dragstart",this.onDragStart.bind(e)),s.addListener(T,"dragend",this.onDragEnd.bind(e)),s.addListener(T,"dragenter",this.onDragEnter.bind(e)),s.addListener(T,"dragover",this.onDragOver.bind(e)),s.addListener(T,"dragleave",this.onDragLeave.bind(e)),s.addListener(T,"drop",this.onDrop.bind(e));var O=null}function r(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}var o=e("../lib/dom"),s=e("../lib/event"),a=e("../lib/useragent"),c=200,l=200,u=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=a.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(a.isIE&&"dragReady"==this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if("dragWait"===this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),i=e.getButton();if(1===(e.domEvent.detail||1)&&0===i&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var r=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in r&&(r.unselectable="on"),t.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;t.container.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(i.prototype),t.DragdropHandler=i}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),r=document.createElement("script");r.src=e,n.appendChild(r),r.onload=r.onreadystatechange=function(e,n){!n&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r=r.onload=r.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},o=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==("undefined"===typeof t?"undefined":i(t))&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=o),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var a=0;a<n.length&&(n[a](t,this),!t.propagationStopped);a++);return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)}},r.once=function(e,t){var n=this;t&&this.addEventListener(e,function i(){n.removeEventListener(e,i),t.apply(null,arguments)})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var i=n[e],r=n._disabled_[e];r||(n._disabled_[e]=r=[]),r.push(i);var o=r.indexOf(t);-1!=o&&r.splice(o,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var i=n._disabled_[e];if(n[e]==t){n[e];i&&this.setDefaultHandler(e,i.pop())}else if(i){var r=i.indexOf(t);-1!=r&&i.splice(r,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];return i||(i=this._eventRegistry[e]=[]),-1==i.indexOf(t)&&i[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"no use strict";function r(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function o(e,t){var n=new Error(e);n.data=t,"object"==("undefined"===typeof console?"undefined":i(console))&&console.error&&console.error(n),setTimeout(function(){throw n})}var s=e("./oop"),a=e("./event_emitter").EventEmitter,c={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return r('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:r('misspelled option "'+e+'"')}},l=function(){this.$defaultOptions={}};(function(){s.implement(this,a),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var i=n[t];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=t),e.$options[i.name]=i,"initialValue"in i&&(e["$"+i.name]=i.initialValue)}),s.implement(e,c),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[t]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,t,n):i[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=r,this.reportError=o}).call(l.prototype),t.AppConfig=l}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(e,t,i){"no use strict";function r(r){if(l&&l.document){u.packaged=r||e.packaged||i.packaged||l.define&&n(91).packaged;for(var s={},a="",c=document.currentScript||document._currentScript,h=c&&c.ownerDocument||document,d=h.getElementsByTagName("script"),f=0;f<d.length;f++){var p=d[f],g=p.src||p.getAttribute("src");if(g){for(var m=p.attributes,v=0,y=m.length;v<y;v++){var b=m[v];0===b.name.indexOf("data-ace-")&&(s[o(b.name.replace(/^data-ace-/,""))]=b.value)}var w=g.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);w&&(a=w[1])}}a&&(s.base=s.base||a,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base;for(var _ in s)"undefined"!==typeof s[_]&&t.set(_,s[_])}}function o(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var s=e("./lib/lang"),a=(e("./lib/oop"),e("./lib/net")),c=e("./lib/app_config").AppConfig;i.exports=t=new c;var l=function(){return this||"undefined"!=typeof window&&window}(),u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!u.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return u[e]},t.set=function(e,t){if(!u.hasOwnProperty(e))throw new Error("Unknown config key: "+e);u[e]=t},t.all=function(){return s.copyObject(u)},t.moduleUrl=function(e,t){if(u.$moduleUrls[e])return u.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var i="snippets"==t?"/":"-",r=n[n.length-1];if("worker"==t&&"-"==i){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");r=r.replace(o,"")}(!r||r==t)&&n.length>1&&(r=n[n.length-2]);var s=u[t+"Path"];return null==s?s=u.basePath:"/"==i&&(t=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+i+r+this.get("suffix")},t.setModuleUrl=function(e,t){return u.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,i){var r,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{r=e(n)}catch(e){}if(r&&!t.$loading[n])return i&&i(r);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(i),!(t.$loading[n].length>1)){var s=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var i=t.$loading[n];t.$loading[n]=null,i.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return s();a.loadScript(t.moduleUrl(n,o),s)}},r(!0),t.init=r}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,c=e("./dragdrop_handler").DragdropHandler,l=e("../config"),u=function(e){var t=this;this.editor=e,new o(this),new s(this),new c(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},a=e.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click")),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener([a,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),i.addTouchMoveListener(e.container,this.onTouchMove.bind(this,"touchmove"));var l=e.renderer.$gutter;i.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(a,"mousedown",n),i.addListener(l,"mousedown",n),r.isIE&&e.renderer.scrollBarV&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",n),i.addListener(e.renderer.scrollBarH.element,"mousedown",n)),e.on("mousemove",function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var i=e.renderer.screenToTextCoordinates(n.x,n.y),r=e.session.selection.getRange(),o=e.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new a(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new a(t,this.editor))},this.onMouseWheel=function(e,t){var n=new a(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.onTouchMove=function(e,t){var n=new a(t,this.editor);n.speed=1,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var o=this,s=function(e){if(e){if(r.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new a(e,o.editor),o.$mouseMoved=!0}},c=function(e){clearInterval(u),l(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e)},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){c(e)});o.$onCaptureMouseMove=s,o.releaseMouse=i.capture(this.editor.container,s,c);var u=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(u.prototype),l.defineOptions(u.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=u}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){"use strict";function i(e){e.on("click",function(t){var n=t.getDocumentPosition(),i=e.session,r=i.getFoldAt(n.row,n.column,1);r&&(t.getAccelKey()?i.removeFold(r):i.expandFold(r),t.stop())}),e.on("gutterclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session,r=i.getParentFoldRangeData(n,!0),o=r.range||r.firstRange;if(o){n=o.start.row;var s=i.getFoldAt(n,i.getLine(n).length,1);s?i.removeFold(s):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=i}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var i=e("../lib/keys"),r=e("../lib/event"),o=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,i){for(var o,s=!1,a=this.$editor.commands,c=this.$handlers.length;c--&&!((o=this.$handlers[c].handleKeyboard(this.$data,e,t,n,i))&&o.command&&(s="null"==o.command||a.exec(o.command,this.$editor,o.args,i),s&&i&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),s)););return s||-1!=e||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,t)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(e,t,n){var r=i.keyCodeToString(n);this.$callKeyboardHandlers(t,r,n,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)}}).call(o.prototype),t.KeyBinding=o}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";function i(e,t,n,i){var r=a?p:f,g=null,m=null,v=null,y=0,b=null,w=-1,E=null,C=null,S=[];if(!i)for(E=0,i=[];E<n;E++)i[E]=s(e[E]);for(c=a,l=!1,u=!1,h=!1,d=!1,C=0;C<n;C++){if(g=y,S[C]=m=o(e,i,S,C),y=r[g][m],b=240&y,y&=15,t[C]=v=r[y][5],b>0)if(16==b){for(E=w;E<C;E++)t[E]=1;w=-1}else w=-1;if(r[y][6])-1==w&&(w=C);else if(w>-1){for(E=w;E<C;E++)t[E]=v;w=-1}i[C]==_&&(t[C]=0),c|=v}if(d)for(E=0;E<n;E++)if(i[E]==x){t[E]=a;for(var M=E-1;M>=0&&i[M]==A;M--)t[M]=a}}function r(e,t,n){if(!(c<e)){if(1==e&&a==g&&!h)return void n.reverse();for(var i,r,o,s,l=n.length,u=0;u<l;){if(t[u]>=e){for(i=u+1;i<l&&t[i]>=e;)i++;for(r=u,o=i-1;r<o;r++,o--)s=n[r],n[r]=n[o],n[o]=s;u=i}u++}}}function o(e,t,n,i){var r,o,s,c,f=t[i];switch(f){case m:case v:l=!1;case w:case b:return f;case y:return l?b:y;case E:return l=!0,u=!0,v;case A:return w;case C:return i<1||i+1>=t.length||(r=n[i-1])!=y&&r!=b||(o=t[i+1])!=y&&o!=b?w:(l&&(o=b),o==r?o:w);case S:return r=i>0?n[i-1]:_,r==y&&i+1<t.length&&t[i+1]==y?y:w;case M:if(i>0&&n[i-1]==y)return y;if(l)return w;for(c=i+1,s=t.length;c<s&&t[c]==M;)c++;return c<s&&t[c]==y?y:w;case k:for(s=t.length,c=i+1;c<s&&t[c]==k;)c++;if(c<s){var p=e[i],g=p>=1425&&p<=2303||64286==p;if(r=t[c],g&&(r==v||r==E))return v}return i<1||(r=t[i-1])==_?w:n[i-1];case _:return l=!1,h=!0,a;case x:return d=!0,w;case T:case F:case P:case L:case O:l=!1;case R:return w}}function s(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?m:D[t]:5==n?/[\u0591-\u05f4]/.test(e)?v:m:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?k:/[\u0660-\u0669\u066b-\u066c]/.test(e)?b:1642==t?M:/[\u06f0-\u06f9]/.test(e)?y:E:32==n&&t<=8287?B[255&t]:254==n&&t>=65136?E:w}var a=0,c=0,l=!1,u=!1,h=!1,d=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g=1,m=0,v=1,y=2,b=3,w=4,_=5,x=6,E=7,A=8,C=9,S=10,M=11,k=12,T=13,F=14,O=15,P=16,L=17,R=18,D=[R,R,R,R,R,R,R,R,R,x,_,x,A,_,R,R,R,R,R,R,R,R,R,R,R,R,R,R,_,_,_,x,A,w,w,M,M,M,w,w,w,w,w,S,C,S,C,C,y,y,y,y,y,y,y,y,y,y,C,w,w,w,w,w,w,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,w,w,w,w,w,w,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,w,w,w,w,R,R,R,R,R,R,_,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,C,w,M,M,M,M,w,w,w,w,m,w,w,R,w,w,M,M,y,y,w,m,w,w,w,y,m,w,w,w,w,w],B=[A,A,A,A,A,A,A,A,A,A,A,R,R,R,m,v,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,A,_,T,F,O,P,L,C,M,M,M,M,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,C,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,A];t.L=m,t.R=v,t.EN=y,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.DOT="\xb7",t.doBidiReorder=function(e,n,o){if(e.length<2)return{};var s=e.split(""),c=new Array(s.length),l=new Array(s.length),u=[];a=o?g:0,i(s,u,s.length,n);for(var h=0;h<c.length;c[h]=h,h++);r(2,u,c),r(1,u,c);for(var h=0;h<c.length-1;h++)n[h]===b?u[h]=t.AN:u[h]===v&&(n[h]>E&&n[h]<T||n[h]===w||n[h]===R)?u[h]=t.ON_R:h>0&&"\u0644"===s[h-1]&&/\u0622|\u0623|\u0625|\u0627/.test(s[h])&&(u[h-1]=u[h]=t.R_H,h++);s[s.length-1]===t.DOT&&(u[s.length-1]=t.B);for(var h=0;h<c.length;h++)l[h]=u[c[h]];return{logicalFromVisual:c,bidiLevels:l}},t.hasBidiCharacters=function(e,t){for(var n=!1,i=0;i<e.length;i++)t[i]=s(e.charAt(i)),n||t[i]!=v&&t[i]!=E||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("./lib/bidiutil"),r=e("./lib/lang"),o=e("./lib/useragent"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.line="",this.wrapIndent=0,this.isLastRow=!1,this.EOF="\xb6",this.seenBidi=!1};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&s.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,i=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===i;)i=n,e++;return e},this.updateRowLine=function(e,t){if(void 0===e&&(e=this.getDocumentRow()),this.wrapIndent=0,this.isLastRow=e===this.session.getLength()-1,this.line=this.session.getLine(e),this.session.$useWrapMode){var n=this.session.$wrapData[e];n&&(void 0===t&&(t=this.getSplitIndex()),t>0&&n.length?(this.wrapIndent=n.indent,this.line=t<n.length?this.line.substring(n[t-1],n[n.length-1]):this.line.substring(n[n.length-1])):this.line=this.line.substring(0,n[t]))}var o,s=this.session,a=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return"\t"===e||s.isFullWidth(e.charCodeAt(0))?(o="\t"===e?s.getScreenTabSize(t+a):2,a+=o-1,r.stringRepeat(i.DOT,o)):e})},this.updateBidiMap=function(){var e=[],t=this.isLastRow?this.EOF:this.EOL,n=this.line+(this.showInvisibles?t:i.DOT);i.hasBidiCharacters(n,e)?this.bidiMap=i.doBidiReorder(n,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.seenBidi&&this.characterWidth!==e.$characterSize.width){var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=t,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=o.isChrome?n:.45*n,this.charWidths[i.B]=0,this.currentRow=null}},this.getShowInvisibles=function(){return this.showInvisibles},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setTextDir=function(e){this.isRtlDir=e},this.getPosLeft=function(e){e-=this.wrapIndent;var t=i.getVisualFromLogicalIdx(e>0?e-1:0,this.bidiMap),n=this.bidiMap.bidiLevels,r=0;0===e&&n[t]%2!==0&&t++;for(var o=0;o<t;o++)r+=this.charWidths[n[o]];return 0!==e&&n[t]%2===0&&(r+=this.charWidths[n[t]]),this.wrapIndent&&(r+=this.wrapIndent*this.charWidths[i.L]),r},this.getSelections=function(e,t){for(var n,r,o=this.bidiMap,s=o.bidiLevels,a=this.wrapIndent*this.charWidths[i.L],c=[],l=Math.min(e,t)-this.wrapIndent,u=Math.max(e,t)-this.wrapIndent,h=!1,d=!1,f=0,p=0;p<s.length;p++)r=o.logicalFromVisual[p],n=s[p],h=r>=l&&r<u,h&&!d?f=a:!h&&d&&c.push({left:f,width:a-f}),a+=this.charWidths[n],d=h;return h&&p===s.length&&c.push({left:f,width:a-f}),c},this.offsetToCol=function(e){var t=0,e=Math.max(e,0),n=0,r=0,o=this.bidiMap.bidiLevels,s=this.charWidths[o[r]];for(this.wrapIndent&&(e-=this.wrapIndent*this.charWidths[i.L]);e>n+s/2;){if(n+=s,r===o.length-1){s=0;break}s=this.charWidths[o[++r]]}return r>0&&o[r-1]%2!==0&&o[r]%2===0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&o[r-1]%2===0&&o[r]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===o.length-1&&0===s&&o[r-1]%2===0||!this.isRtlDir&&0===r&&o[r]%2!==0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&o[r-1]%2!==0&&0!==s&&r--,t=this.bidiMap.logicalFromVisual[r]),t+this.wrapIndent}}).call(a.prototype),t.BidiHandler=a}),ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t){return e.row-t.row||e.column-t.column},o=function(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,i=e.start;return t=this.compare(n.row,n.column),1==t?(t=this.compare(i.row,i.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(i.row,i.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==("undefined"===typeof e?"undefined":i(e))?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==("undefined"===typeof e?"undefined":i(e))?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var i={row:t+1,column:0};else if(this.start.row<e)var i={row:e,column:0};return o.fromPoints(i||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var i={row:e,column:t};else var r={row:e,column:t};return o.fromPoints(i||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return o.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new o(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new o(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(o.prototype),o.fromPoints=function(e,t){return new o(e.row,e.column,t.row,t.column)},o.comparePoints=r,o.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+e);var t=this.getSelectionAnchor(),n=this.getSelectionLead(),i=this.isBackwards();i&&0===t.column||this.setSelectionAnchor(t.row,t.column+e),(i||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,!0===t?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var i=e.column,r=e.column+t;return n<0&&(i=e.column-t,r=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(i,r).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(e,null,i.row,i.column),o=r.match(/^\s*/);o[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var r=this.session.getFoldAt(e,t,1);return r?void this.moveCursorTo(r.end.row,r.end.column):(this.session.nonTokenRe.exec(i)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(t)),t>=n.length?(this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight())):(this.session.tokenRe.exec(i)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,t)))},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return void this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getFoldStringAt(t,n,-1);null==i&&(i=this.doc.getLine(t).substring(0,n));var o=r.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)},this.$shortWordEndIndex=function(e){var t,n=0,i=/\s/,r=this.session.tokenRe;if(r.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&i.test(t);)n++;if(n<1)for(r.lastIndex=0;(t=e[n])&&!r.test(t);)if(r.lastIndex=0,n++,i.test(t)){if(n>2){n--;break}for(;(t=e[n])&&i.test(t);)n++;if(n>2)break}}return r.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),r=this.session.getFoldAt(e,t,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(t==n.length){var o=this.doc.getLength();do{e++,i=this.doc.getLine(e)}while(e<o&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getLine(t).substring(0,n);if(0===n){do{t--,i=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var r=this.session.screenToDocumentPosition(i.row+e,i.column,n);0!==e&&0===t&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&(r.row>0||e>0)&&r.row++,this.moveCursorTo(r.row,r.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0;var r=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(r.charAt(t))&&r.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return s.fromPoints(t,n)}catch(e){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(a.prototype),t.Selection=a}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var i=e("./config"),r=2e3,o=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var n=this.states[t],i=[],r=0,o=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],c=0;c<n.length;c++){var l=n[c];if(l.defaultToken&&(o.defaultToken=l.defaultToken),l.caseInsensitive&&(s="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var u=l.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==h?l.token=l.token[0]:h-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:h-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"!=typeof l.token||l.onMatch||(l.onMatch=h>1?this.$applyToken:l.token),h>1&&(/\\\d/.test(l.regex)?u=l.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+r+1)}):(h=1,u=this.removeCapturingGroups(l.regex)),l.splitRegex||"string"==typeof l.token||a.push(l)),o[r]=c,r+=h,i.push(u),l.onMatch||(l.onMatch=null)}}i.length||(o[0]=0,i.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){r=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"===typeof n)return[{type:n,value:e}];for(var i=[],r=0,o=n.length;r<o;r++)t[r]&&(i[i.length]={type:n[r],value:t[r]});return i},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;r<o;r++)t[r+1]&&(n[n.length]={type:i[r],value:t[r+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,i=!1,r={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,o,s,a,c){return i?i="]"!=a:a?i=!0:s?(n==r.stack&&(r.end=c+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=c)),e}),null!=r.end&&/^\)*$/.test(e.substr(r.end))&&(e=e.substring(0,r.start)+e.substr(r.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);t=n[0],"#tmp"===t&&(n.shift(),t=n.shift())}else var n=[];var i=t||"start",o=this.states[i];o||(i="start",o=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var c,l=[],u=0,h=0,d={type:null,value:""};c=a.exec(e);){var f=s.defaultToken,p=null,g=c[0],m=a.lastIndex;if(m-g.length>u){var v=e.substring(u,m-g.length);d.type==f?d.value+=v:(d.type&&l.push(d),d={type:f,value:v})}for(var y=0;y<c.length-2;y++)if(void 0!==c[y+1]){p=o[s[y]],f=p.onMatch?p.onMatch(g,i,n,e):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),o=this.states[i],o||(this.reportError("state doesn't exist",i),i="start",o=this.states[i]),s=this.matchMappings[i],u=m,a=this.regExps[i],a.lastIndex=m),p.consumeLineEnd&&(u=m);break}if(g)if("string"===typeof f)p&&!1===p.merge||d.type!==f?(d.type&&l.push(d),d={type:f,value:g}):d.value+=g;else if(f){d.type&&l.push(d),d={type:null,value:""};for(var y=0;y<f.length;y++)l.push(f[y])}if(u==e.length)break;if(u=m,h++>r){for(h>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});u<e.length;)d.type&&l.push(d),d={value:e.substring(u,u+=2e3),type:"overflow"};i="start",n=[];break}}return d.type&&l.push(d),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:l,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),t.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var i=e("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var i=e[n],r=0;r<i.length;r++){var o=i[r];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(t)&&(o.next=t+o.next),o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState))}this.$rules[t+n]=i}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,r,o){var s="function"==typeof e?(new e).getRules():e;if(r)for(var a=0;a<r.length;a++)r[a]=t+r[a];else{r=[];for(var c in s)r.push(t+c)}if(this.addRules(s,t),n)for(var l=Array.prototype[o?"push":"unshift"],a=0;a<r.length;a++)l.apply(this.$rules[r[a]],i.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function n(o){var s=r[o];s.processed=!0;for(var a=0;a<s.length;a++){var c=s[a],l=null;Array.isArray(c)&&(l=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var u=c.next||c.push;if(u&&Array.isArray(u)){var h=c.stateName;h||(h=c.token,"string"!=typeof h&&(h=h[0]||""),r[h]&&(h+=i++)),r[h]=u,c.next=h,n(h)}else"pop"==u&&(c.next=t);if(c.push&&(c.nextState=c.next||c.push,c.next=e,delete c.push),c.rules)for(var d in c.rules)r[d]?r[d].push&&r[d].push.apply(r[d],c.rules[d]):r[d]=c.rules[d];var f="string"==typeof c?c:c.include;if(f&&(l=Array.isArray(f)?f.map(function(e){return r[e]}):r[f]),l){var p=[a,1].concat(l);c.noEscape&&(p=p.filter(function(e){return!e.next})),s.splice.apply(s,p),a--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}var i=0,r=this.$rules;Object.keys(r).forEach(n,this)},this.createKeywordMapper=function(e,t,n,i){var r=Object.create(null);return Object.keys(e).forEach(function(t){var o=e[t];n&&(o=o.toLowerCase());for(var s=o.split(i||"|"),a=s.length;a--;)r[s[a]]=t}),Object.getPrototypeOf(r)&&(r.__proto__=null),this.$keywordList=Object.keys(r),e=null,n?function(e){return r[e.toLowerCase()]||t}:function(e){return r[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),t.TextHighlightRules=r}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"===typeof e)var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(i.prototype),t.Behaviour=i}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("./range").Range,r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)t-=1,n+=e[t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new i(this.$row,t,this.$row,t+e.value.length)}}).call(r.prototype),t.TokenIterator=r}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var i,r=e("../../lib/oop"),o=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),c=["text","paren.rparen","punctuation.operator"],l=["text","paren.rparen","punctuation.operator","comment"],u={},h={'"':'"',"'":"'"},d=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,u.rangeCount!=e.multiSelect.rangeCount&&(u={rangeCount:e.multiSelect.rangeCount})),u[t])return i=u[t];i=u[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},f=function(e,t,n,i){var r=e.end.row-e.start.row;return{text:n+t+i,selection:[0,e.start.column+1,r,e.end.column+(r?0:1)]}},p=function e(t){this.add("braces","insertion",function(n,r,o,s,c){var l=o.getCursorPosition(),u=s.doc.getLine(l.row);if("{"==c){d(o);var h=o.getSelectionRange(),p=s.doc.getTextRange(h);if(""!==p&&"{"!==p&&o.getWrapBehavioursEnabled())return f(h,p,"{","}");if(e.isSaneInsertion(o,s))return/[\]\}\)]/.test(u[l.column])||o.inMultiSelectMode||t&&t.braces?(e.recordAutoInsert(o,s,"}"),{text:"{}",selection:[1,1]}):(e.recordMaybeInsert(o,s,"{"),{text:"{",selection:[1,1]})}else if("}"==c){d(o);var g=u.substring(l.column,l.column+1);if("}"==g){var m=s.$findOpeningBracket("}",{column:l.column+1,row:l.row});if(null!==m&&e.isAutoInsertedClosing(l,u,c))return e.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==c||"\r\n"==c){d(o);var v="";e.isMaybeInsertedClosing(l,u)&&(v=a.stringRepeat("}",i.maybeInsertedBrackets),e.clearMaybeInsertedClosing());var g=u.substring(l.column,l.column+1);if("}"===g){var y=s.findMatchingBracket({row:l.row,column:l.column+1},"}");if(!y)return null;var b=this.$getIndent(s.getLine(y.row))}else{if(!v)return void e.clearMaybeInsertedClosing();var b=this.$getIndent(u)}var w=b+s.getTabString();return{text:"\n"+w+"\n"+b+v,selection:[1,w.length,1,w.length]}}e.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,o){var s=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){d(n);if("}"==r.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(t,n,i,r,o){if("("==o){d(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return f(s,a,"(",")");if(e.isSaneInsertion(i,r))return e.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(")"==o){d(i);var c=i.getCursorPosition(),l=r.doc.getLine(c.row),u=l.substring(c.column,c.column+1);if(")"==u){var h=r.$findOpeningBracket(")",{column:c.column+1,row:c.row});if(null!==h&&e.isAutoInsertedClosing(c,l,o))return e.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o){d(n);if(")"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r}}),this.add("brackets","insertion",function(t,n,i,r,o){if("["==o){d(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return f(s,a,"[","]");if(e.isSaneInsertion(i,r))return e.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){d(i);var c=i.getCursorPosition(),l=r.doc.getLine(c.row),u=l.substring(c.column,c.column+1);if("]"==u){var h=r.$findOpeningBracket("]",{column:c.column+1,row:c.row});if(null!==h&&e.isAutoInsertedClosing(c,l,o))return e.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o){d(n);if("]"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r}}),this.add("string_dquotes","insertion",function(e,t,n,i,r){var o=i.$mode.$quotes||h;if(1==r.length&&o[r]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(r))return;d(n);var s=r,a=n.getSelectionRange(),c=i.doc.getTextRange(a);if(!(""===c||1==c.length&&o[c])&&n.getWrapBehavioursEnabled())return f(a,c,s,s);if(!c){var l=n.getCursorPosition(),u=i.doc.getLine(l.row),p=u.substring(l.column-1,l.column),g=u.substring(l.column,l.column+1),m=i.getTokenAt(l.row,l.column),v=i.getTokenAt(l.row,l.column+1);if("\\"==p&&m&&/escape/.test(m.type))return null;var y,b=m&&/string|escape/.test(m.type),w=!v||/string|escape/.test(v.type);if(g==s)(y=b!==w)&&/string\.end/.test(v.type)&&(y=!1);else{if(b&&!w)return null;if(b&&w)return null;var _=i.$mode.tokenRe;_.lastIndex=0;var x=_.test(p);_.lastIndex=0;var E=_.test(p);if(x||E)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;y=!0}return{text:y?s+s:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==o||"'"==o)){d(n);if(i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==o)return r.end.column++,r}})};p.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),i=new s(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",c)){var r=new s(t,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",c))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",l)},p.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},p.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),o=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},p.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),o=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(e,t,n){return i.autoInsertedBrackets>0&&e.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&t.substr(e.column)===i.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(e,t){return i.maybeInsertedBrackets>0&&e.row===i.maybeInsertedRow&&t.substr(e.column)===i.maybeInsertedLineEnd&&t.substr(0,e.column)==i.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(p,o),t.CstyleBehaviour=p}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";t.packages={},function(e){var n=/\w{4}/g;for(var i in e)t.packages[i]=e[i].replace(n,"\\u$&")}({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour/cstyle").CstyleBehaviour,a=e("../unicode"),c=e("../lib/lang"),l=e("../token_iterator").TokenIterator,u=e("../range").Range,h=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,i){function r(e){for(var t=n;t<=i;t++)e(o.getLine(t),t)}var o=t.doc,s=!0,a=!0,l=1/0,u=t.getTabSize(),h=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var d=this.lineCommentStart.map(c.escapeRegExp).join("|"),f=this.lineCommentStart[0];else var d=c.escapeRegExp(this.lineCommentStart),f=this.lineCommentStart;d=new RegExp("^(\\s*)(?:"+d+") ?"),h=t.getUseSoftTabs();var p=function(e,t){var n=e.match(d);if(n){var i=n[1].length,r=n[0].length;y(e,i,r)||" "!=n[0][r-1]||r--,o.removeInLine(t,i,r)}},g=f+" ",m=function(e,t){s&&!/\S/.test(e)||(y(e,l,l)?o.insertInLine({row:t,column:l},g):o.insertInLine({row:t,column:l},f))},v=function(e,t){return d.test(e)},y=function(e,t,n){for(var i=0;t--&&" "==e.charAt(t);)i++;if(i%u!=0)return!1;for(var i=0;" "==e.charAt(n++);)i++;return u>2?i%u!=u-1:i%u==0}}else{if(!this.blockComment)return!1;var f=this.blockComment.start,b=this.blockComment.end,d=new RegExp("^(\\s*)(?:"+c.escapeRegExp(f)+")"),w=new RegExp("(?:"+c.escapeRegExp(b)+")\\s*$"),m=function(e,t){v(e,t)||s&&!/\S/.test(e)||(o.insertInLine({row:t,column:e.length},b),o.insertInLine({row:t,column:l},f))},p=function(e,t){var n;(n=e.match(w))&&o.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(d))&&o.removeInLine(t,n[1].length,n[0].length)},v=function(e,n){if(d.test(e))return!0;for(var i=t.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}var _=1/0;r(function(e,t){var n=e.search(/\S/);-1!==n?(n<l&&(l=n),a&&!v(e,t)&&(a=!1)):_>e.length&&(_=e.length)}),l==1/0&&(l=_,s=!1,a=!1),h&&l%u!=0&&(l=Math.floor(l/u)*u),r(a?p:m)},this.toggleBlockComment=function(e,t,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,s,a=new l(t,i.row,i.column),c=a.getCurrentToken(),h=(t.selection,t.selection.toOrientedRange());if(c&&/comment/.test(c.type)){for(var d,f;c&&/comment/.test(c.type);){var p=c.value.indexOf(r.start);if(-1!=p){var g=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+p;d=new u(g,m,g,m+r.start.length);break}c=a.stepBackward()}for(var a=new l(t,i.row,i.column),c=a.getCurrentToken();c&&/comment/.test(c.type);){var p=c.value.indexOf(r.end);if(-1!=p){var g=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+p;f=new u(g,m,g,m+r.end.length);break}c=a.stepForward()}f&&t.remove(f),d&&(t.remove(d),o=d.start.row,s=-r.start.length)}else s=r.start.length,o=n.start.row,t.insert(n.end,r.end),t.insert(n.start,r.start);h.start.row==o&&(h.start.column+=s),h.end.row==o&&(h.end.column+=s),t.selection.fromOrientedRange(h)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<n.length;t++)!function(e){var i=n[t],r=e[i];e[n[t]]=function(){return this.$delegator(i,arguments,r)}}(this)},this.$delegator=function(e,t,n){var i=t[0];"string"!=typeof i&&(i=i[0]);for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o=i.split(this.$embeds[r]);if(!o[0]&&o[1]){t[0]=o[1];var s=this.$modes[this.$embeds[r]];return s[e].apply(s,t)}}var a=n.apply(this,t);return n?a:void 0},this.transformAction=function(e,t,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][t]){var a=o[s][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var o=t[r],s=0,a=o.length;s<a;s++)if("string"===typeof o[s].token)/keyword|support|storage/.test(o[s].token)&&n.push(o[s].regex);else if("object"===i(o[s].token))for(var c=0,l=o[s].token.length;c<l;c++)if(/keyword|support|storage/.test(o[s].token[c])){var r=o[s].regex.match(/\(.+?\)/g)[c];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,i){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),t.Mode=h}),ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var i=t.start.row,r=t.start.column,o=e[i]||"";switch(t.action){case"insert":if(1===t.lines.length)e[i]=o.substring(0,r)+t.lines[0]+o.substring(r);else{var s=[i,1].concat(t.lines);e.splice.apply(e,s),e[i]=o.substring(0,r)+e[i],e[i+t.lines.length-1]+=o.substring(r)}break;case"remove":var a=t.end.column,c=t.end.row;i===c?e[i]=o.substring(0,r)+o.substring(a):e.splice(i,c-i+1,o.substring(0,r)+e[c].substring(a))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,o=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var i=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&i}function t(t,n,i){var r="insert"==t.action,o=(r?1:-1)*(t.end.row-t.start.row),s=(r?1:-1)*(t.end.column-t.start.column),a=t.start,c=r?a:t.end;return e(n,a,i)?{row:n.row,column:n.column}:e(c,n,!i)?{row:n.row+o,column:n.column+(n.row==c.row?s:0)}:{row:a.row,column:a.column}}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if((e.start.row!=e.end.row||e.start.row==this.row)&&!(e.start.row>this.row)){var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(o.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,c=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){i.implement(this,o),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[t]},!0),this.clonePos(i)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var i=this.getLine(e);return void 0==t&&(t=i.length),t=Math.min(Math.max(t,0),i.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),i={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:t}),this.clonePos(i)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var i=this.clippedPos(e,t),r=this.clippedPos(e,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,i=t<this.getLength()-1,r=n?e-1:e,o=n?this.getLine(r).length:0,a=i?t+1:t,c=i?0:this.getLine(a).length,l=new s(r,o,a,c),u=this.$lines.slice(e,t+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),u},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);return t?this.insert(e.start,t):e.start},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4&&this.$splitAndapplyLargeDelta(e,2e4),r(this.$lines,e,t),this._signal("change",e))},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,i=n.length,r=e.start.row,o=e.start.column,s=0,a=0;;){s=a,a+=t-1;var c=n.slice(s,a);if(a>i){e.lines=c,e.start.row=r+s,e.start.column=o;break}c.push(""),this.applyDelta({start:this.pos(r+s,o),end:this.pos(r+a,o=0),action:e.action,lines:c},!0)}},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=t||0,o=n.length;r<o;r++)if((e-=n[r].length+i)<0)return{row:r,column:e+n[r].length+i};return{row:o-1,column:n[o-1].length}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(e.row,n.length),s=t||0;s<o;++s)r+=n[s].length+i;return r+e.column}}).call(c.prototype),t.Document=c}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,o=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,i=-1,r=n.doc,o=t;n.lines[t];)t++;var s=r.getLength(),a=0;for(n.running=!1;t<s;){n.$tokenizeRow(t),i=t;do{t++}while(n.lines[t]);if(++a%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==i&&(i=t),o<=i&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],i=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!==i.state+""?(this.states[e]=i.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=i.tokens}}).call(o.prototype),t.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var i=e("./lib/lang"),r=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,c=s;c<=a;c++){var l=this.cache[c];null==l&&(l=i.getMatchOffsets(n.getLine(c),this.regExp),l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map(function(e){return new r(c,e.offset,c,e.offset+e.length)}),this.cache[c]=l.length?l:"");for(var u=l.length;u--;)t.drawSingleLineMarker(e,l[u].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var i,r,o,s=0,a=this.folds,c=!0;null==t&&(t=this.end.row,n=this.end.column);for(var l=0;l<a.length;l++){if(i=a[l],-1==(r=i.range.compareStart(t,n)))return void e(null,t,n,s,c);if(o=e(null,i.start.row,i.start.column,s,c),(o=!o&&e(i.placeholder,i.start.row,i.start.column,s))||0===r)return;c=!i.sameRow,s=i.end.column}e(null,t,n,s,c)},this.getNextFoldTo=function(e,t){for(var n,i,r=0;r<this.folds.length;r++){if(n=this.folds[r],-1==(i=n.range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,r,o=this.getNextFoldTo(e,t);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){r=this.folds;var s=r.indexOf(i);for(0===s&&(this.start.column+=n),s;s<r.length;s++){if(i=r[s],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(r),c=o[a-1];this.end.row=c.end.row,this.end.column=c.end.column,o=o.splice(a,o.length-a);var l=new i(s,o);return s.splice(s.indexOf(this)+1,0,l),l},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((e-=i.start.column-t)<0)return{row:i.start.row,column:i.start.column+e};if((e-=i.placeholder.length)<0)return i.start;t=i.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("./range").Range,r=i.comparePoints,o=function(){this.ranges=[]};(function(){this.comparePoints=r,this.pointIndex=function(e,t,n){for(var i=this.ranges,o=n||0;o<i.length;o++){var s=i[o],a=r(e,s.end);if(!(a>0)){var c=r(e,s.start);return 0===a?t&&0!==c?-o-2:o:c>0||0===c&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var i=this.pointIndex(e.end,t,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return r(e.start,t.start)});for(var n,i=t[0],o=1;o<t.length;o++){n=i,i=t[o];var s=r(n.end,i.start);s<0||(0!=s||n.isEmpty()||i.isEmpty())&&(r(n.end,i.end)<0&&(n.end.row=i.end.row,n.end.column=i.end.column),t.splice(o,1),e.push(i),i=n,o--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});i<0&&(i=-i-1);var r=this.pointIndex({row:t,column:0},i);r<0&&(r=-r-1);for(var o=[],s=i;s<r;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){if("insert"==e.action)var t=e.start,n=e.end;else var n=e.start,t=e.end;for(var i=t.row,r=n.row,o=r-i,s=-t.column+n.column,a=this.ranges,c=0,l=a.length;c<l;c++){var u=a[c];if(!(u.end.row<i)){if(u.start.row>i)break;if(u.start.row==i&&u.start.column>=t.column&&(u.start.column==t.column&&this.$insertRight||(u.start.column+=s,u.start.row+=o)),u.end.row==i&&u.end.column>=t.column){if(u.end.column==t.column&&this.$insertRight)continue;u.end.column==t.column&&s>0&&c<l-1&&u.end.column>u.start.column&&u.end.column==a[c+1].start.column&&(u.end.column-=s),u.end.column+=s,u.end.row+=o}}}if(0!=o&&c<l)for(;c<l;c++){var u=a[c];u.start.row+=o,u.end.row+=o}}}).call(o.prototype),t.RangeList=o}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function i(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function r(e,t){i(e.start,t),i(e.end,t)}function o(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}function s(e,t){o(e.start,t),o(e.end,t)}var a=(e("../range").Range,e("../range_list").RangeList),c=e("../lib/oop"),l=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};c.inherits(l,a),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new l(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);r(e,this.start);for(var t=e.start.row,n=e.start.column,i=0,o=-1;i<this.subFolds.length&&1==(o=this.subFolds[i].range.compare(t,n));i++);var s=this.subFolds[i];if(0==o)return s.addSubFold(e);for(var t=e.range.end.row,n=e.range.end.column,a=i,o=-1;a<this.subFolds.length&&1==(o=this.subFolds[a].range.compare(t,n));a++);this.subFolds[a];if(0==o)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);this.subFolds.splice(i,a-i,e);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return s(e,this.start)}}.call(l.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";function i(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o];if(s.range.contains(e,t)){if(1==n&&s.range.isEnd(e,t))continue;if(-1==n&&s.range.isStart(e,t))continue;return s}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,i=this.$foldData,r=[];t.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=i[o].folds,c=0;c<a.length;c++){var l=a[c];if(-2==(s=l.range.compareRange(e)))break;if(2!=s){if(42==s)break;r.push(l)}}}}return t.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e},this.getFoldStringAt=function(e,t,n,i){if(!(i=i||this.getFoldLine(e)))return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){o=i.folds[a];var c=o.range.compareEnd(e,t);if(-1==c){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===c)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),-1==n?r.substring(0,t-s.end.column):1==n?r.substring(t-s.end.column):r},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.start.row<=e&&r.end.row>=e)return r;if(r.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.end.row>=e)return r}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=t){a<t&&(a>=e?i-=t-a:i=0);break}s>=e&&(i-=a>=e?s-a:s-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n,i=this.$foldData,r=!1;e instanceof s?n=e:(n=new s(t,e),n.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(n.range);var a=n.start.row,c=n.start.column,l=n.end.row,u=n.end.column;if(!(a<l||a==l&&c<=u-2))throw new Error("The range has to be at least 2 characters width");var h=this.getFoldAt(a,c,1),d=this.getFoldAt(l,u,-1);if(h&&d==h)return h.addSubFold(n);h&&!h.range.isStart(a,c)&&this.removeFold(h),d&&!d.range.isEnd(l,u)&&this.removeFold(d);var f=this.getFoldsInRange(n.range);f.length>0&&(this.removeFolds(f),f.forEach(function(e){n.addSubFold(e)}));for(var p=0;p<i.length;p++){var g=i[p];if(l==g.start.row){g.addFold(n),r=!0;break}if(a==g.end.row){if(g.addFold(n),r=!0,!n.sameRow){var m=i[p+1];if(m&&m.start.row==l){g.merge(m);break}}break}if(l<=g.start.row)break}return r||(g=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,r=this.$foldData,o=t.folds;if(1==o.length)r.splice(r.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);o=s.folds,o.shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(null==e?(n=new r(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,i=this.getFoldsInRangeList(n),t)this.removeFolds(i);else for(var o=i;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);if(i.length)return i},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,r){null==i&&(i=e.start.row),null==r&&(r=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var o=this.doc,s="";return e.walk(function(e,t,n,a){if(!(t<i)){if(t==i){if(n<r)return;a=Math.max(r,a)}s+=null!=e?e:o.getLine(t).substring(a,n)}},t,n),s},this.getDisplayLine=function(e,t,n,i){var r=this.getFoldLine(e);if(r)return this.getFoldDisplayLine(r,e,t,n,i);var o;return o=this.doc.getLine(e),o.substring(i||0,t||o.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new o(e,n)})},this.toggleFold=function(e){var t,n,i=this.selection,r=i.getRange();if(r.isEmpty()){var o=r.start;if(t=this.getFoldAt(o.row,o.column))return void this.expandFold(t);(n=this.findMatchingBracket(o))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(o.row,o.column)||r}else{var s=this.getFoldsInRange(r);if(e&&s.length)return void this.expandFolds(s);1==s.length&&(t=s[0])}if(t||(t=this.getFoldAt(r.start.row,r.start.column)),t&&t.range.toString()==r.toString())return void this.expandFold(t);var a="...";if(!r.isMultiLine()){if(a=this.getTextRange(r),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,r)},this.getCommentFoldRange=function(e,t,n){var i=new a(this,e,t),o=i.getCurrentToken(),s=o.type;if(o&&/^comment|string/.test(s)){s=s.match(/comment|string/)[0],"comment"==s&&(s+="|doc-start");var c=new RegExp(s),l=new r;if(1!=n){do{o=i.stepBackward()}while(o&&c.test(o.type));i.stepForward()}if(l.start.row=i.getCurrentTokenRow(),l.start.column=i.getCurrentTokenColumn()+2,i=new a(this,e,t),-1!=n){var u=-1;do{if(o=i.stepForward(),-1==u){var h=this.getState(i.$row);c.test(h)||(u=i.$row)}else if(i.$row>u)break}while(o&&c.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return l.end.row=i.getCurrentTokenRow(),l.end.column=i.getCurrentTokenColumn()+o.value.length-2,l}},this.foldAll=function(e,t,n){void 0==n&&(n=1e5);var i=this.foldWidgets;if(i){t=t||this.getLength(),e=e||0;for(var r=e;r<t;r++)if(null==i[r]&&(i[r]=this.getFoldWidget(r)),"start"==i[r]){var o=this.getFoldWidgetRange(r);if(o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e){r=o.end.row;try{var s=this.addFold("...",o);s&&(s.collapseChildren=n)}catch(e){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){if(this.$foldMode!=e){if(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!e||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,r=e-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var s=this.getFoldWidgetRange(r);if(i||(i=s),s&&s.end.row>=e)break}r--}return{range:-1!==r&&s,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),i=this.getLine(e),r="end"===n?-1:1,o=this.getFoldAt(e,-1===r?0:i.length,r);if(o)return t.children||t.all?this.removeFold(o):this.expandFold(o),o;var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(o.range))return this.removeFold(o),o;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var c=a.range.start.row+1,l=a.range.end.row;this.foldAll(c,l,t.all?1e4:0)}else t.children?(l=s?s.end.row:this.getLength(),this.foldAll(e+1,l,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var i=this.getParentFoldRangeData(t,!0);if(n=i.range||i.firstRange){t=n.start.row;var r=this.getFoldAt(t,this.getLine(t).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}var r=e("../range").Range,o=e("./fold_line").FoldLine,s=e("./fold").Fold,a=e("../token_iterator").TokenIterator;t.Folding=i}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";function i(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,r=n.charAt(e.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){var a=this.$findClosingBracket(s[1],e);if(!a)return null;t=o.fromPoints(e,a),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a=this.$findOpeningBracket(s[2],e);if(!a)return null;t=o.fromPoints(a,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var c=t.column-s.getCurrentTokenColumn()-2,l=a.value;;){for(;c>=0;){var u=l.charAt(c);if(u==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else u==e&&(o+=1);c-=1}do{a=s.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=a.value,c=l.length-1}return null}},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var c=t.column-s.getCurrentTokenColumn();;){for(var l=a.value,u=l.length;c<u;){var h=l.charAt(c);if(h==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else h==e&&(o+=1);c+=1}do{a=s.stepForward()}while(a&&!n.test(a.type));if(null==a)break;c=0}return null}}}var r=e("../token_iterator").TokenIterator,o=e("../range").Range;t.BracketMatch=i}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),o=e("./lib/lang"),s=e("./bidihandler").BidiHandler,a=e("./config"),c=e("./lib/event_emitter").EventEmitter,l=e("./selection").Selection,u=e("./mode/text").Mode,h=e("./range").Range,d=e("./document").Document,f=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,g=function e(t,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++e.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==("undefined"===typeof t?"undefined":i(t))&&t.getLine||(t=new d(t)),this.$bidiHandler=new s(this),this.setDocument(t),this.selection=new l(this),a.resetOptions(this),this.setMode(n),a._signal("session",this)};g.$uid=0,function(){function e(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}r.implement(this,c),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>1,o=e[r];if(t>o)n=r+1;else{if(!(t<o))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);this.$fromUndo||!this.$undoManager||e.ignore||(this.$deltasDoc.push(e),t&&0!=t.length&&this.$deltasFold.push({action:"removeFolds",folds:t}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),r=0;if(null==t){var o=i.length-1;r=this.getLine(e).length}else for(var o=0;o<i.length&&!((r+=i[o].value.length)>=t);o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,i){var r=this.$markerId++,o={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,i){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var r=new h(e,0,t,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var r=/\s/;else var r=this.nonTokenRe;var o=t;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(r));o++}for(var s=t;s<n.length&&n.charAt(s).match(r);)s++;return new h(e,o,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"===("undefined"===typeof e?"undefined":i(e))){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new u),this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]),void(t&&t());this.$modeId=r,a.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new f(n);var r=this;this.bgTokenizer.addEventListener("update",function(e){r._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){a.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=t.length,c=0;c<a;c++){if(c>s){if((c=o.end.row+1)>=a)break;o=this.$foldData[r++],s=o?o.start.row:1/0}null==n[c]&&(n[c]=this.$getStringScreenWidth(t[c])[0]),n[c]>i&&(i=n[c])}this.screenWidth=i}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,i=e.length-1;-1!=i;i--){var r=e[i];"doc"==r.group?(this.doc.revertDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!0,n)):r.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,i=0;i<e.length;i++){var r=e[i];"doc"==r.group&&(this.doc.applyDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function i(e){return t?"insert"!==e.action:"insert"===e.action}var r,o,s=e[0];i(s)?r=h.fromPoints(s.start,s.end):r=h.fromPoints(s.start,s.start);for(var a=1;a<e.length;a++)s=e[a],i(s)?(o=s.start,-1==r.compare(o.row,o.column)&&r.setStart(o),o=s.end,1==r.compare(o.row,o.column)&&r.setEnd(o),!0):(o=s.start,-1==r.compare(o.row,o.column)&&(r=h.fromPoints(s.start,s.start)),!1);if(null!=n){0===h.comparePoints(n.start,r.start)&&(n.start.column+=r.end.column-r.start.column,n.end.column+=r.end.column-r.start.column);var c=n.compareRange(r);1==c?r.setStart(n.start):-1==c&&r.setEnd(n.end)}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var i=this.getTextRange(e),r=this.getFoldsInRange(e),o=h.fromPoints(t,t);if(!n){this.remove(e);var s=e.start.row-e.end.row,a=s?-e.end.column:e.start.column-e.end.column;a&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=a),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=a)),s&&o.start.row>=e.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,i),r.length){var c=e.start,l=o.start,s=l.row-c.row,a=l.column-c.column;this.addFolds(r.map(function(e){return e=e.clone(),e.start.row==c.row&&(e.start.column+=a),e.end.row==c.row&&(e.end.column+=a),e.start.row+=s,e.end.row+=s,e}))}return o},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;i<=t;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new h(0,0,0,0),i=this.getTabSize(),r=t.start.row;r<=t.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;s<i&&" "==o.charAt(s);++s);s<i&&"\t"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){var i=this.getRowFoldStart(e+n);if(i<0)return 0;var r=i-e}else if(n>0){var i=this.getRowFoldEnd(t+n);if(i>this.doc.getLength()-1)return 0;var r=i-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var r=t-e+1}var o=new h(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(o).map(function(e){return e=e.clone(),e.start.row+=r,e.end.row+=r,e}),a=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+r,a),s.length&&this.addFolds(s),r},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var i=this.$constrainWrapLimit(e,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,i=e.start,r=e.end,o=i.row,s=r.row,a=s-o,c=null;if(this.$updating=!0,0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(o,a);var l=this.$foldData;c=this.getFoldsInRange(e),this.removeFolds(c);var u=this.getFoldLine(r.row),h=0;if(u){u.addRemoveChars(r.row,r.column,i.column-r.column),u.shiftRow(-a);var d=this.getFoldLine(o);d&&d!==u&&(d.merge(u),u=d),h=l.indexOf(u)+1}for(h;h<l.length;h++){var u=l[h];u.start.row>=r.row&&u.shiftRow(-a)}s=o}else{var f=Array(a);f.unshift(o,0);var p=t?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,f);var l=this.$foldData,u=this.getFoldLine(o),h=0;if(u){var g=u.range.compareInside(i.row,i.column);0==g?(u=u.split(i.row,i.column))&&(u.shiftRow(a),u.addRemoveChars(s,0,r.column-i.column)):-1==g&&(u.addRemoveChars(o,0,r.column-i.column),u.shiftRow(a)),h=l.indexOf(u)+1}for(h;h<l.length;h++){var u=l[h];u.start.row>=o&&u.shiftRow(a)}}else{a=Math.abs(e.start.column-e.end.column),"remove"===n&&(c=this.getFoldsInRange(e),this.removeFolds(c),a=-a);var u=this.getFoldLine(o);u&&u.addRemoveChars(o,i.column,a)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),c},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,i){var r,o,s=this.doc.getAllLines(),a=this.getTabSize(),c=this.$wrapData,l=this.$wrapLimit,u=e;for(i=Math.min(i,s.length-1);u<=i;)o=this.getFoldLine(u,o),o?(r=[],o.walk(function(e,i,o,a){var c;if(null!=e){c=this.$getDisplayTokens(e,r.length),c[0]=t;for(var l=1;l<c.length;l++)c[l]=n}else c=this.$getDisplayTokens(s[i].substring(a,o),r.length);r=r.concat(c)}.bind(this),o.end.row,s[o.end.row].length+1),c[o.start.row]=this.$computeWrapSplits(r,l,a),u=o.end.row+1):(r=this.$getDisplayTokens(s[u]),c[u]=this.$computeWrapSplits(r,l,a),u++)};var t=3,n=4,s=10,l=11,d=12;this.$computeWrapSplits=function(e,i,r){function o(){var t=0;if(0===m)return t;if(g)for(var n=0;n<e.length;n++){var i=e[n];if(i==s)t+=1;else{if(i!=l){if(i==d)continue;break}t+=r}}return p&&!1!==g&&(t+=r),Math.min(t,m)}function a(t){var n=e.slice(h,t),i=n.length;n.join("").replace(/12/g,function(){i-=1}).replace(/2/g,function(){i-=1}),c.length||(v=o(),c.indent=v),f+=i,c.push(f),h=t}if(0==e.length)return[];for(var c=[],u=e.length,h=0,f=0,p=this.$wrapAsCode,g=this.$indentedSoftWrap,m=i<=Math.max(2*r,8)||!1===g?0:Math.floor(i/2),v=0;u-h>i-v;){var y=h+i-v;if(e[y-1]>=s&&e[y]>=s)a(y);else if(e[y]!=t&&e[y]!=n){for(var b=Math.max(y-(i-(i>>2)),h-1);y>b&&e[y]<t;)y--;if(p){for(;y>b&&e[y]<t;)y--;for(;y>b&&9==e[y];)y--}else for(;y>b&&e[y]<s;)y--;y>b?a(++y):(y=h+i,2==e[y]&&y--,a(y-v))}else{for(y;y!=h-1&&e[y]!=t;y--);if(y>h){a(y);continue}for(y=h+i;y<e.length&&e[y]==n;y++);if(y==e.length)break;a(y)}}return c},this.$getDisplayTokens=function(t,n){var i,r=[];n=n||0;for(var o=0;o<t.length;o++){var a=t.charCodeAt(o);if(9==a){i=this.getScreenTabSize(r.length+n),r.push(l);for(var c=1;c<i;c++)r.push(d)}else 32==a?r.push(s):a>39&&a<48||a>57&&a<64?r.push(9):a>=4352&&e(a)?r.push(1,2):r.push(1)}return r},this.$getStringScreenWidth=function(t,n,i){if(0==n)return[0,0];null==n&&(n=1/0),i=i||0;var r,o;for(o=0;o<t.length&&(r=t.charCodeAt(o),9==r?i+=this.getScreenTabSize(i):r>=4352&&e(r)?i+=2:i+=1,!(i>n));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var i,r,o=0,s=0,a=0,c=0,l=this.$screenRowCache,u=this.$getRowCacheIndex(l,e),h=l.length;if(h&&u>=0)var a=l[u],o=this.$docRowCache[u],d=e>l[h-1];else var d=!h;for(var f=this.getLength()-1,p=this.getNextFoldLine(o),g=p?p.start.row:1/0;a<=e&&(c=this.getRowLength(o),!(a+c>e||o>=f));)a+=c,++o>g&&(o=p.end.row+1,p=this.getNextFoldLine(o,p),g=p?p.start.row:1/0),d&&(this.$docRowCache.push(o),this.$screenRowCache.push(a));if(p&&p.start.row<=o)i=this.getFoldDisplayLine(p),o=p.start.row;else{if(a+c<=e||o>f)return{row:f,column:this.getLine(f).length};i=this.getLine(o),p=null}var m=0,v=Math.floor(e-a);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(r=y[v],v>0&&y.length&&(m=y.indent,s=y[v-1]||y[y.length-1],i=i.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+v,o,v)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(i,t-m)[1],this.$useWrapMode&&s>=r&&(s=r-1),p?p.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(e,t){if("undefined"===typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var i=0,r=null,o=null;(o=this.getFoldAt(e,t,1))&&(e=o.start.row,t=o.start.column);var s,a=0,c=this.$docRowCache,l=this.$getRowCacheIndex(c,e),u=c.length;if(u&&l>=0)var a=c[l],i=this.$screenRowCache[l],h=e>c[u-1];else var h=!u;for(var d=this.getNextFoldLine(a),f=d?d.start.row:1/0;a<e;){if(a>=f){if((s=d.end.row+1)>e)break;d=this.getNextFoldLine(s,d),f=d?d.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var p="";d&&a>=f?(p=this.getFoldDisplayLine(d,e,t),r=d.start.row):(p=this.getLine(e).substring(0,t),r=e);var g=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){for(var v=0;p.length>=m[v];)i++,v++;p=p.substring(m[v-1]||0,p.length),g=v>0?m.indent:0}}return{row:i,column:g+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=0,t=this.$foldData[r++],o=t?t.start.row:1/0;i<n;){var s=this.$wrapData[i];e+=s?s.length+1:1,i++,i>o&&(i=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:1/0)}else{e=this.getLength();for(var a=this.$foldData,r=0;r<a.length;r++)t=a[r],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,i){if(0===n)return[0,0];n||(n=1/0),i=i||0;var r,o;for(o=0;o<t.length&&(r=t.charAt(o),!((i+="\t"===r?this.getScreenTabSize(i):e.getCharacterWidth(r))>n));o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=e}.call(g.prototype),e("./edit_session/folding").Folding.call(g.prototype),e("./edit_session/bracket_match").BracketMatch.call(g.prototype),a.defineOptions(g.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=g}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";function i(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}var r=e("./lib/lang"),o=e("./lib/oop"),s=e("./range").Range,a=function(){this.$options={}};(function(){this.set=function(e){return o.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var i=null;return n.forEach(function(e,n,r,o){return i=new s(e,n,r,o),!(n==o&&t.start&&t.start.start&&0!=t.skipCurrent&&i.isEqual(t.start))||(i=null,!1)}),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],a=t.re;if(t.$isMultiLine){var c,l=a.length,u=i.length-l;e:for(var h=a.offset||0;h<=u;h++){for(var d=0;d<l;d++)if(-1==i[h+d].search(a[d]))continue e;var f=i[h],p=i[h+l-1],g=f.length-f.match(a[0])[0].length,m=p.match(a[l-1])[0].length;c&&c.end.row===h&&c.end.column>g||(o.push(c=new s(h,g,h+l-1,m)),l>2&&(h=h+l-2))}}else for(var v=0;v<i.length;v++)for(var y=r.getMatchOffsets(i[v],a),d=0;d<y.length;d++){var b=y[d];o.push(new s(v,b.offset,v,b.offset+b.length))}if(n){for(var w=n.start.column,_=n.start.column,v=0,d=o.length-1;v<d&&o[v].start.column<w&&o[v].start.row==n.start.row;)v++;for(;v<d&&o[d].end.column>_&&o[d].end.row==n.end.row;)d--;for(o=o.slice(v,d+1),v=0,d=o.length;v<d;v++)o[v].start.row+=n.start.row,o[v].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var r=i.exec(e);if(!r||r[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];s&&s.toLowerCase()!=s?t[o]=t[o].toUpperCase():t[o]=t[o].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=i(n,e));var o=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,o);try{var s=new RegExp(n,o)}catch(e){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],t))}catch(e){return!1}return i},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=1==t.backwards,r=0!=t.skipCurrent,o=t.range,s=t.start;s||(s=o?o[i?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=i?"end":"start"]);var a=o?o.start.row:0,c=o?o.end.row:e.getLength()-1;if(i)var l=function(e){var n=s.row;if(!h(n,s.column,e)){for(n--;n>=a;n--)if(h(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=c,a=s.row;n>=a;n--)if(h(n,Number.MAX_VALUE,e))return}};else var l=function(e){var n=s.row;if(!h(n,s.column,e)){for(n+=1;n<=c;n++)if(h(n,0,e))return;if(0!=t.wrap)for(n=a,c=s.row;n<=c;n++)if(h(n,0,e))return}};if(t.$isMultiLine)var u=n.length,h=function(t,r,o){var s=i?t-u+1:t;if(!(s<0)){var a=e.getLine(s),c=a.search(n[0]);if(!(!i&&c<r||-1===c)){for(var l=1;l<u;l++)if(a=e.getLine(s+l),-1==a.search(n[l]))return;var h=a.match(n[u-1])[0].length;if(!(i&&h>r))return!!o(s,c,s+u-1,h)||void 0}}};else if(i)var h=function(t,i,r){var o,s=e.getLine(t),a=[],c=0;for(n.lastIndex=0;o=n.exec(s);){var l=o[0].length;if(c=o.index,!l){if(c>=s.length)break;n.lastIndex=c+=1}if(o.index+l>i)break;a.push(o.index,l)}for(var u=a.length-1;u>=0;u-=2){var h=a[u-1],l=a[u];if(r(t,h,t,h+l))return!0}};else var h=function(t,i,r){var o,s=e.getLine(t),a=i;for(n.lastIndex=i;o=n.exec(s);){var c=o[0].length;if(a=o.index,r(t,a,t,a+c))return!0;if(!c&&(n.lastIndex=a+=1,a>=s.length))return!1}};return{forEach:l}}}).call(a.prototype),t.Search=a}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function r(e,t){this.platform=t||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function o(e,t){r.call(this,e,t),this.$singleCommand=!1}var s=e("../lib/keys"),a=e("../lib/useragent"),c=s.KEY_MODS;o.prototype=r.prototype,function(){function e(e){return"object"==("undefined"===typeof e?"undefined":i(e))&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"===typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==e)delete i[r];else if(Array.isArray(o)){var s=o.indexOf(e);-1!=s&&(o.splice(s,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(e,t,n){if("object"==("undefined"===typeof e?"undefined":i(e))&&e&&(void 0==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach(function(e){var i="";if(-1!=e.indexOf(" ")){var r=e.split(/\s+/);e=r.pop(),r.forEach(function(e){var t=this.parseKeys(e),n=c[t.hashId]+t.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")},this),i+=" "}var o=this.parseKeys(e),s=c[o.hashId]+o.key;this._addCommandToBinding(i+s,t,n)},this)},this._addCommandToBinding=function(t,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[t]||this.$singleCommand)o[t]=n;else{Array.isArray(o[t])?-1!=(r=o[t].indexOf(n))&&o[t].splice(r,1):o[t]=[o[t]],"number"!=typeof i&&(i=e(n));var s=o[t];for(r=0;r<s.length;r++){var a=s[r],c=e(a);if(c>i)break}s.splice(r,0,n)}else delete o[t]},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(n){if("string"===typeof n)return this.bindKey(n,t);"function"===typeof n&&(n={exec:n}),"object"===("undefined"===typeof n?"undefined":i(n))&&(n.name||(n.name=t),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=s[n];if(s.FUNCTION_KEYS[i])n=s.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,o=t.length;o--;){var a=s.KEY_MODS[t[o]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[o]+" in "+e),!1;r|=a}return{key:n,hashId:r}},this.findKeyCommand=function(e,t){var n=c[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,i){if(!(i<0)){var r=c[t]+n,o=this.commandKeyBinding[r];return e.$keyChain&&(e.$keyChain+=" "+r,o=this.commandKeyBinding[e.$keyChain]||o),!o||"chainKeys"!=o&&"chainKeys"!=o[o.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||i>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-r.length-1)),{command:o}):(e.$keyChain=e.$keyChain||r,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(r.prototype),t.HashHandler=r,t.MultiHashHandler=o}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,s=function(e,t){r.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};i.inherits(s,r),function(){i.implement(this,o),this.exec=function(e,t,n){if(Array.isArray(e)){for(var i=e.length;i--;)if(this.exec(e[i],t,n))return!0;return!1}if("string"===typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(e.isAvailable&&!e.isAvailable(t))return!1;var r={editor:t,command:e,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),!1!==r.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(s.prototype),t.CommandManager=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function i(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),o=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(e){o.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","F4"),exec:function(e){o.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Shift-F4"),exec:function(e){o.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:i("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(e){o.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:i("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(e){},readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(e){o.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",bindKey:i("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",bindKey:i("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:i("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:i(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()),c=a.replace(/\n\s*/," ").length,l=e.session.doc.getLine(n.row),u=n.row+1;u<=i.row+1;u++){var h=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(u)));0!==h.length&&(h=" "+h),l+=h}i.row+1<e.session.doc.getLength()-1&&(l+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),l),c>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+c)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:i(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,i=e.selection.rangeList.ranges,r=[];i.length<1&&(i=[e.selection.getRange()]);for(var o=0;o<i.length;o++)o==i.length-1&&(i[o].end.row===t&&i[o].end.column===n||r.push(new s(i[o].end.row,i[o].end.column,t,n))),0===o?0===i[o].start.row&&0===i[o].start.column||r.push(new s(0,0,i[o].start.row,i[o].start.column)):r.push(new s(i[o-1].end.row,i[o-1].end.column,i[o].start.row,i[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<r.length;o++)e.selection.addRange(r[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),o=e("./lib/dom"),s=e("./lib/lang"),a=e("./lib/useragent"),c=e("./keyboard/textinput").TextInput,l=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,h=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,f=e("./search").Search,p=e("./range").Range,g=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,y=e("./config"),b=e("./token_iterator").TokenIterator,w=function e(t,n){var r=t.getContainerElement();this.container=r,this.renderer=t,this.id="editor"+ ++e.$uid,this.commands=new m(a.isMac?"mac":"win",v),"object"==("undefined"===typeof document?"undefined":i(document))&&(this.textInput=new c(t.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new u(this)),this.keyBinding=new h(this),this.$blockScrolling=0,this.$search=(new f).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(n||new d("")),y.resetOptions(this),y._signal("editor",this)};w.$uid=0,function(){r.implement(this,g),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;this._signal("beforeEndOperation");var t=this.curOp.command;t.name&&this.$blockScrolling>0&&this.$blockScrolling--;var n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,i=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var r=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(t.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"===typeof e){this.$keybindingId=e;var n=this;y.loadModule(["keybinding",e],function(i){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(i&&i.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=t.findMatchingBracket(e.getCursorPosition());if(n)var i=new p(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)var i=t.$mode.getMatching(e.session);i&&(t.$bracketHighlight=t.addMarker(i,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),i=new b(e.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1==r.type.indexOf("tag-open")||(r=i.stepForward())){var o=r.value,s=0,a=i.stepBackward();if("<"==a.value)do{a=r,(r=i.stepForward())&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(r&&s>=0);else{do{r=a,a=i.stepBackward(),r&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(a&&s<=0);i.stepForward()}if(!r)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var c=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),u=new p(c,l,c,l+r.value.length),h=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&void 0!=h&&0!==u.compareRange(h.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),u&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(u,"ace_bracket","text"))}}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(y.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new p(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column-1,i=t.end.column+1,r=e.getLine(t.start.row),o=r.length,s=r.substring(Math.max(n,0),Math.min(i,o));if(!(n>=0&&/^[\w\d]/.test(s)||i<=o&&/[\w\d]$/.test(s))&&(s=r.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(s))){return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s})}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(t);else{var n=t.split(/\r\n|\r|\n/),i=this.selection.rangeList.ranges;if(n.length>i.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,t);for(var r=i.length;r--;){var o=i[r];o.isEmpty()||this.session.remove(o),this.session.insert(o.start,n[r])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=i.transformAction(n.getState(r.row),"insertion",this,n,e);o&&(e!==o.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=o.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){var s=new p.fromPoints(r,r);s.end.column+=e.length,this.session.remove(s)}}else{var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(r.row);if(r.column>a.search(/\S|$/)){var c=a.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+c)}}this.clearSelection();var l=r.column,u=n.getState(r.row),a=n.getLine(r.row),h=i.checkOutdent(u,a,e);n.insert(r,e);if(o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new p(r.row,l+o.selection[0],r.row,l+o.selection[1])):this.selection.setSelectionRange(new p(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))),n.getDocument().isNewLine(e)){var d=i.getNextLineIndent(u,a.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},d)}h&&i.autoOutdent(u,n,r.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),r=n.getMode().transformAction(i,"deletion",this,n,t);if(0===t.end.column){var o=n.getTextRange(t);if("\n"==o[o.length-1]){var s=n.getLine(t.end.row);/^\s+$/.test(s)&&(t.end.column=s.length)}}r&&(t=r)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,r=this.session.getLine(e.row);t<r.length?(n=r.charAt(t)+r.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(n=r.charAt(t-1)+r.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"\t")}if(t.start.column<t.end.column){if(!/^\s+$/.test(e.getTextRange(t))){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"\t")}}var i=e.getLine(t.start.row),r=t.start,o=e.getTabSize(),a=e.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var c=o-a%o,l=s.stringRepeat(" ",c);else{for(var c=a%o;" "==i[t.start.column-1]&&c;)t.start.column--,c--;this.selection.setSelectionRange(t),l="\t"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var r=new p(0,0,0,0),i=e.first;i<=e.last;i++){var o=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=o.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(e);n.lastIndex<t;){var r=n.exec(i);if(r.index<=t&&r.index+r[0].length>=t){return{value:r[0],start:r.index,end:r.index+r[0].length}}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new p(t,n-1,t,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(t,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,c=parseFloat(o.value);c*=Math.pow(10,a),s!==o.end&&n<s?e*=Math.pow(10,o.end-n-1):e*=Math.pow(10,o.end-n),c+=e,c/=Math.pow(10,a);var l=c.toFixed(a),u=new p(t,o.start,t,o.end);this.session.replace(u,l),this.moveCursorTo(t,Math.max(o.start+1,n+l.length-o.value.length))}}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),i=e.isBackwards();if(n.isEmpty()){var r=n.start.row;t.duplicateLines(r,r)}else{var o=i?n.start:n.end,s=t.insert(o,t.getTextRange(n),!1);n.start=o,n.end=s,e.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var s=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,c=0,l=s.length,u=0;u<l;u++){var h=u;s[u].moveBy(a,0),n=this.$getSelectedRows(s[u]);for(var d=n.first,f=n.last;++u<l;){c&&s[u].moveBy(c,0);var p=this.$getSelectedRows(s[u]);if(t&&p.first!=f)break;if(!t&&p.first>f+1)break;f=p.last}for(u--,a=this.session.$moveLines(d,f,t?0:e),t&&-1==e&&(h=u+1);h<=u;)s[h].moveBy(a,0),h++;t||(a=0),c+=a}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,r=e*Math.floor(i.height/i.lineHeight);this.$blockScrolling++,!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(r,0)}):!1===t&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection()),this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),i=new b(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var s,a,c=!1,l={},u=n.column-o.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!c;u++)if(h[o.value[u]])switch(a=h[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(l[a])&&(l[a]=0),o.value[u]){case"(":case"[":case"{":l[a]++;break;case")":case"]":case"}":l[a]--,-1===l[a]&&(s="bracket",c=!0)}}else o&&-1!==o.type.indexOf("tag-name")&&(isNaN(l[o.value])&&(l[o.value]=0),"<"===r.value?l[o.value]++:"</"===r.value&&l[o.value]--,-1===l[o.value]&&(s="tag",c=!0));c||(r=o,o=i.stepForward(),u=0)}while(o&&!c);if(s){var d,f;if("bracket"===s)(d=this.session.getBracketRange(n))||(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1),f=d.start,(t||f.row===n.row&&Math.abs(f.column-n.column)<2)&&(d=this.session.getBracketRange(f)));else if("tag"===s){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2),0===d.compare(n.row,n.column)){c=!1;do{o=r,(r=i.stepBackward())&&(-1!==r.type.indexOf("tag-close")&&d.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===r.value?l[g]++:"</"===r.value&&l[g]--,0===l[g]&&(c=!0)))}while(r&&!c)}o&&o.type.indexOf("tag-name")&&(f=d.start,f.row==n.row&&Math.abs(f.column-n.column)<2&&(f=d.end))}f=d&&d.cursor||f,f&&(e?d&&t?this.selection.setRange(d):d&&d.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),i):i},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;this.$blockScrolling+=1;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],e)&&i++;return this.selection.setSelectionRange(r),this.$blockScrolling-=1,i},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==("undefined"===typeof e?"undefined":i(e))&&r.mixin(t,e);var o=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(o)||this.$search.$options.needle,e||(o=this.session.getWordRange(o.start.row,o.start.column),e=this.session.getTextRange(o)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:o});var s=this.$search.find(this.session);return t.preventScroll?s:s?(this.revealRange(s,n),s):(t.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",function(){i=!0}),s=this.renderer.on("beforeRender",function(){i&&(t=n.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(i&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,o=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=o.top-s.offset;i=o.top>=0&&a+t.top<0||!(o.top<s.height&&o.top+t.top+s.lineHeight>window.innerHeight)&&null,null!=i&&(r.style.top=a+"px",r.style.left=o.left+"px",r.style.height=s.lineHeight+"px",r.scrollIntoView(i)),i=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,o.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}}.call(w.prototype),y.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),t.Editor=w}),ace.define("ace/undomanager",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.reset()};(function(){function e(e){return{action:e.action,start:e.start,end:e.end,lines:1==e.lines.length?null:e.lines,text:1==e.lines.length?e.lines[0]:null}}function t(e){return{action:e.action,start:e.start,end:e.end,lines:e.lines||[e.text]}}function n(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++){for(var r=e[i],o={group:r.group,deltas:new Array(r.length)},s=0;s<r.deltas.length;s++){var a=r.deltas[s];o.deltas[s]=t(a)}n[i]=o}return n}this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(this.$deserializeDeltas(t),e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(t){return n(t,e)},this.$deserializeDeltas=function(e){return n(e,t)}}).call(i.prototype),t.UndoManager=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/dom"),r=e("../lib/oop"),o=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){r.implement(this,s),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",-1===r.text.indexOf(s)&&r.text.push(s);var a=n.type;"error"==a?r.className=" ace_error":"warning"==a&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=a||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var i=new Array(n+1);i.unshift(t,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(e){for(var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),o=t.getNextFoldLine(n),s=o?o.start.row:1/0,a=this.$showFoldWidgets&&t.foldWidgets,c=t.$breakpoints,l=t.$decorations,u=t.$firstLineNumber,h=0,d=t.gutterRenderer||this.$renderer,f=null,p=-1,g=n;;){if(g>s&&(g=o.end.row+1,o=t.getNextFoldLine(g,o),s=o?o.start.row:1/0),g>r){for(;this.$cells.length>p+1;)f=this.$cells.pop(),this.element.removeChild(f.element);break}f=this.$cells[++p],f||(f={element:null,textNode:null,foldWidget:null},f.element=i.createElement("div"),f.textNode=document.createTextNode(""),f.element.appendChild(f.textNode),this.element.appendChild(f.element),this.$cells[p]=f);var m="ace_gutter-cell ";c[g]&&(m+=c[g]),l[g]&&(m+=l[g]),this.$annotations[g]&&(m+=this.$annotations[g].className),f.element.className!=m&&(f.element.className=m);var v=t.getRowLength(g)*e.lineHeight+"px";if(v!=f.element.style.height&&(f.element.style.height=v),a){var y=a[g];null==y&&(y=a[g]=t.getFoldWidget(g))}if(y){f.foldWidget||(f.foldWidget=i.createElement("span"),f.element.appendChild(f.foldWidget));var m="ace_fold-widget ace_"+y;"start"==y&&g==s&&g<o.end.row?m+=" ace_closed":m+=" ace_open",f.foldWidget.className!=m&&(f.foldWidget.className=m);var v=e.lineHeight+"px";f.foldWidget.style.height!=v&&(f.foldWidget.style.height=v)}else f.foldWidget&&(f.element.removeChild(f.foldWidget),f.foldWidget=null);var b=h=d?d.getText(t,g):g+u;b!==f.textNode.data&&(f.textNode.data=b),g++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||t.$useWrapMode)&&(h=t.getLength()+u);var w=d?d.getWidth(t,h,e):h.toString().length*e.characterWidth,_=this.$padding||this.$computePadding();(w+=_.left+_.right)===this.gutterWidth||isNaN(w)||(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(a.prototype),t.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../range").Range,r=e("../lib/dom"),o=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,i){return(e?1:0)|(t?2:0)|(n?4:0)|(i?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){if(e){this.config=e;var t=[];for(var n in this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(e.firstRow,e.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,e),s=this.$padding+(this.session.$bidiHandler.isBidiRow(r.start.row)?this.session.$bidiHandler.getPosLeft(r.start.column):r.start.column*e.characterWidth);i.renderer(t,r,s,o,e)}else"fullLine"==i.type?this.drawFullLineMarker(t,r,i.clazz,e):"screenLine"==i.type?this.drawScreenLineMarker(t,r,i.clazz,e):r.isMultiLine()?"text"==i.type?this.drawTextMarker(t,r,i.clazz,e):this.drawMultiLineMarker(t,r,i.clazz,e):this.session.$bidiHandler.isBidiRow(r.start.row)?this.drawBidiSingleLineMarker(t,r,i.clazz+" ace_start ace_br15",e):this.drawSingleLineMarker(t,r,i.clazz+" ace_start ace_br15",e)}else i.update(t,this,this.session,e)}this.element.innerHTML=t.join("")}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,r,o,s){for(var a=this.session,c=n.start.row,l=n.end.row,u=c,h=0,d=0,f=a.getScreenLastRowColumn(u),p=null,g=new i(u,n.start.column,u,d);u<=l;u++)g.start.row=g.end.row=u,g.start.column=u==c?n.start.column:a.getRowWrapIndent(u),g.end.column=f,h=d,d=f,f=u+1<l?a.getScreenLastRowColumn(u+1):u==l?0:n.end.column,p=r+(u==c?" ace_start":"")+" ace_br"+e(u==c||u==c+1&&n.start.column,h<d,d>f,u==l),this.session.$bidiHandler.isBidiRow(u)?this.drawBidiSingleLineMarker(t,g,p,o,u==l?0:1,s):this.drawSingleLineMarker(t,g,p,o,u==l?0:1,s)},this.drawMultiLineMarker=function(e,t,n,i,r){var o,s,a,c=this.$padding;if(r=r||"",this.session.$bidiHandler.isBidiRow(t.start.row)){var l=t.clone();l.end.row=l.start.row,l.end.column=this.session.getLine(l.start.row).length,this.drawBidiSingleLineMarker(e,l,n+" ace_br1 ace_start",i,null,r)}else o=i.lineHeight,s=this.$getTop(t.start.row,i),a=c+t.start.column*i.characterWidth,e.push("<div class='",n," ace_br1 ace_start' style='","height:",o,"px;","right:0;","top:",s,"px;","left:",a,"px;",r,"'></div>");if(this.session.$bidiHandler.isBidiRow(t.end.row)){var l=t.clone();l.start.row=l.end.row,l.start.column=0,this.drawBidiSingleLineMarker(e,l,n+" ace_br12",i,null,r)}else{var u=t.end.column*i.characterWidth;o=i.lineHeight,s=this.$getTop(t.end.row,i),e.push("<div class='",n," ace_br12' style='","height:",o,"px;","width:",u,"px;","top:",s,"px;","left:",c,"px;",r,"'></div>")}if(!((o=(t.end.row-t.start.row-1)*i.lineHeight)<=0)){s=this.$getTop(t.start.row+1,i);var h=(t.start.column?1:0)|(t.end.column?0:8);e.push("<div class='",n,h?" ace_br"+h:"","' style='","height:",o,"px;","right:0;","top:",s,"px;","left:",c,"px;",r,"'></div>")}},this.drawSingleLineMarker=function(e,t,n,i,r,o){var s=i.lineHeight,a=(t.end.column+(r||0)-t.start.column)*i.characterWidth,c=this.$getTop(t.start.row,i),l=this.$padding+t.start.column*i.characterWidth;e.push("<div class='",n,"' style='","height:",s,"px;","width:",a,"px;","top:",c,"px;","left:",l,"px;",o||"","'></div>")},this.drawBidiSingleLineMarker=function(e,t,n,i,r,o){var s=i.lineHeight,a=this.$getTop(t.start.row,i),c=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach(function(t){e.push("<div class='",n,"' style='","height:",s,"px;","width:",t.width+(r||0),"px;","top:",a,"px;","left:",c+t.left,"px;",o||"","'></div>")})},this.drawFullLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i),s=i.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,i)-o),e.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i),s=i.lineHeight;e.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")}}).call(o.prototype),t.Marker=o}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/dom"),o=e("../lib/lang"),s=(e("../lib/useragent"),e("../lib/event_emitter").EventEmitter),a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){i.implement(this,s),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.$updateEolChar=function(){var e="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++)this.showInvisibles?t.push("<span class='ace_invisible ace_invisible_tab'>"+o.stringRepeat(this.TAB_CHAR,n)+"</span>"):t.push(o.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",r="",s="";if(this.showInvisibles){i+=" ace_invisible",r=" ace_invisible_space",s=" ace_invisible_tab";var a=o.stringRepeat(this.SPACE_CHAR,this.tabSize),c=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else var a=o.stringRepeat(" ",this.tabSize),c=a;this.$tabStrings[" "]="<span class='"+i+r+"'>"+a+"</span>",this.$tabStrings["\t"]="<span class='"+i+s+"'>"+c+"</span>"}},this.updateLines=function(e,t,n){this.config.lastRow==e.lastRow&&this.config.firstRow==e.firstRow||this.scrollLines(e),this.config=e;for(var i=Math.max(t,e.firstRow),r=Math.min(n,e.lastRow),o=this.element.childNodes,s=0,a=e.firstRow;a<i;a++){var c=this.session.getFoldLine(a);if(c){if(c.containsRow(i)){i=c.start.row;break}a=c.end.row}s++}for(var a=i,c=this.session.getNextFoldLine(a),l=c?c.start.row:1/0;;){if(a>l&&(a=c.end.row+1,c=this.session.getNextFoldLine(a,c),l=c?c.start.row:1/0),a>r)break;var u=o[s++];if(u){var h=[];this.$renderLine(h,a,!this.$useLineGroups(),a==l&&c),u.style.height=e.lineHeight*this.session.getRowLength(a)+"px",u.innerHTML=h.join("")}a++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var r=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}if(e.lastRow>t.lastRow){var r=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(r)}},this.$renderLinesFragment=function(e,t,n){for(var i=this.element.ownerDocument.createDocumentFragment(),o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;;){if(o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),o>n)break;var c=r.createElement("div"),l=[];if(this.$renderLine(l,o,!1,o==a&&s),c.innerHTML=l.join(""),this.$useLineGroups())c.className="ace_line_group",i.appendChild(c),c.style.height=e.lineHeight*this.session.getRowLength(o)+"px";else for(;c.firstChild;)i.appendChild(c.firstChild);o++}return i},this.update=function(e){this.config=e;for(var t=[],n=e.firstRow,i=e.lastRow,r=n,o=this.session.getNextFoldLine(r),s=o?o.start.row:1/0;;){if(r>s&&(r=o.end.row+1,o=this.session.getNextFoldLine(r,o),s=o?o.start.row:1/0),r>i)break;this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(r),"px'>"),this.$renderLine(t,r,!1,r==s&&o),this.$useLineGroups()&&t.push("</div>"),r++}this.element.innerHTML=t.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,i){var r=this,s=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=function(e,n,i,s,a){if(n)return r.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+o.stringRepeat(r.SPACE_CHAR,e.length)+"</span>":e;if("&"==e)return"&#38;";if("<"==e)return"&#60;";if(">"==e)return"&#62;";if("\t"==e){var c=r.session.getScreenTabSize(t+s);return t+=c-1,r.$tabStrings[c]}if("\u3000"==e){var l=r.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",u=r.showInvisibles?r.SPACE_CHAR:"";return t+=1,"<span class='"+l+"' style='width:"+2*r.config.characterWidth+"px'>"+u+"</span>"}return i?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+r.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*r.config.characterWidth+"px'>"+e+"</span>")},c=i.replace(s,a);if(this.$textToken[n.type])e.push(c);else{var l="ace_"+n.type.replace(/\./g," ace_"),u="";"fold"==n.type&&(u=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",l,"'",u,">",c,"</span>")}return t+i.length},this.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);return i<=0||i>=n?t:" "==t[0]?(i-=i%this.tabSize,e.push(o.stringRepeat(this.$tabStrings[" "],i/this.tabSize)),t.substr(i)):"\t"==t[0]?(e.push(o.stringRepeat(this.$tabStrings["\t"],i)),t.substr(i)):t},this.$renderWrappedLine=function(e,t,n,i){for(var r=0,s=0,a=n[0],c=0,l=0;l<t.length;l++){var u=t[l],h=u.value;if(0==l&&this.displayIndentGuides){if(r=h.length,!(h=this.renderIndentGuide(e,h,a)))continue;r-=h.length}if(r+h.length<a)c=this.$renderToken(e,c,u,h),r+=h.length;else{for(;r+h.length>=a;)c=this.$renderToken(e,c,u,h.substring(0,a-r)),h=h.substring(a-r),r=a,i||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),e.push(o.stringRepeat("\xa0",n.indent)),s++,c=0,a=n[s]||Number.MAX_VALUE;0!=h.length&&(r+=h.length,c=this.$renderToken(e,c,u,h))}}},this.$renderSimpleLine=function(e,t){var n=0,i=t[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(e,r)),r&&(n=this.$renderToken(e,n,i,r));for(var o=1;o<t.length;o++)i=t[o],r=i.value,n=this.$renderToken(e,n,i,r)},this.$renderLine=function(e,t,n,i){if(i||0==i||(i=this.session.getFoldLine(t)),i)var r=this.$getFoldLineTokens(t,i);else var r=this.session.getTokens(t);if(n||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),r.length){var o=this.session.getRowSplitData(t);o&&o.length?this.$renderWrappedLine(e,r,o,n):this.$renderSimpleLine(e,r)}this.showInvisibles&&(i&&(t=i.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function n(e,t,n){for(var i=0,o=0;o+e[i].value.length<t;)if(o+=e[i].value.length,++i==e.length)return;if(o!=t){var s=e[i].value.substring(t-o);s.length>n-t&&(s=s.substring(0,n-t)),r.push({type:e[i].type,value:s}),o=t+s.length,i+=1}for(;o<n&&i<e.length;){var s=e[i].value;s.length+o>n?r.push({type:e[i].type,value:s.substring(0,n-o)}):r.push(e[i]),o+=s.length,i+=1}}var i=this.session,r=[],o=i.getTokens(e);return t.walk(function(e,t,s,a,c){null!=e?r.push({type:"fold",value:e}):(c&&(o=i.getTokens(t)),o.length&&n(o,a,s))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i,r=e("../lib/dom"),o=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),void 0===i&&(i=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(i?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e==this.smoothBlinking||i||(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);for(var n=0,r=t.length;n<r;n++){var o=this.getPixelPosition(t[n].cursor,!0);if(!((o.top>e.height+e.offset||o.top<0)&&n>1)){var s=(this.cursors[i++]||this.addCursor()).style;this.drawCursor?this.drawCursor(s,o,e,t[n],this.session):(s.left=o.left+"px",s.top=o.top+"px",s.width=e.characterWidth+"px",s.height=e.lineHeight+"px")}}for(;this.cursors.length>i;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),t.Cursor=o}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter,a=function(e){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var c=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(c,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>32768?(this.coeff=32768/e,e=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(c.prototype);var l=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=c,t.ScrollBarV=c,t.ScrollBarH=l,t.VScrollBar=c,t.HScrollBar=l}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var i=e("./lib/event"),r=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending&&this.changes){this.pending=!0;var t=this;i.nextFrame(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}).call(r.prototype),t.RenderLoop=r}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var i=e("../lib/oop"),r=e("../lib/dom"),o=e("../lib/lang"),s=e("../lib/useragent"),a=e("../lib/event_emitter").EventEmitter,c=0,l=t.FontMetrics=function(e){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),c||this.$testFractionalRect(),this.$measureNode.innerHTML=o.stringRepeat("X",c),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){i.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=r.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;c=t>0&&t<1?50:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",s.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===c){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var t={height:e.height,width:e.width/c}}else var t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/c};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=o.stringRepeat(e,c),this.$main.getBoundingClientRect().width/c},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(l.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./config"),s=e("./lib/useragent"),a=e("./layer/gutter").Gutter,c=e("./layer/marker").Marker,l=e("./layer/text").Text,u=e("./layer/cursor").Cursor,h=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,f=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,g=e("./lib/event_emitter").EventEmitter;r.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}',"ace_editor.css");var m=function(e,t){var n=this;this.container=e||r.createElement("div"),this.$keepTextAreaAtCursor=!s.isOldIE,r.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new c(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new c(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(e,t,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,i){i-=this.$extraHeight||0;var r=0,o=this.$size,s={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return i&&(e||o.height!=i)&&(o.height=i,r|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),n&&(e||o.width!=n)&&(r|=this.CHANGE_SIZE,o.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(r|=this.CHANGE_FULL)),o.$dirty=!n||!i,r&&this._signal("resize",s),r},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=r.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var i=this.textarea.style,r=this.lineHeight;if(t<0||t>e.height-r)return void(i.top=i.left="0");var o=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");o*=this.session.$getStringScreenWidth(s)[0]+2,r+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-o&&(n=this.$size.scrollerWidth-o),n+=this.gutterWidth,i.height=r+"px",i.width=o+"px",i.left=Math.min(n,this.$size.scrollerWidth-o)+"px",i.top=Math.min(t,this.$size.height-r)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,i){var r=this.scrollMargin;r.top=0|e,r.bottom=0|t,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t)return void(this.$changes|=e);if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}return e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),void this._signal("afterRender"))},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength(),r=i*this.lineHeight,o=this.$getLongestLine(),s=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==s;a&&(this.$horizScroll=s,this.scrollBarH.setVisible(s));var c=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=this.scrollTop%this.lineHeight,u=t.scrollerHeight+this.lineHeight,h=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=h;var d=this.scrollMargin;this.session.setScrollTop(Math.max(-d.top,Math.min(this.scrollTop,r-t.scrollerHeight+d.bottom))),this.session.setScrollLeft(Math.max(-d.left,Math.min(this.scrollLeft,o+2*this.$padding-t.scrollerWidth+d.right)));var f=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r+h<0||this.scrollTop>d.top),p=c!==f;p&&(this.$vScroll=f,this.scrollBarV.setVisible(f));var g,m,v=Math.ceil(u/this.lineHeight)-1,y=Math.max(0,Math.round((this.scrollTop-l)/this.lineHeight)),b=y+v,w=this.lineHeight;y=e.screenToDocumentRow(y,0);var _=e.getFoldLine(y);_&&(y=_.start.row),g=e.documentToScreenRow(y,0),m=e.getRowLength(y)*w,b=Math.min(e.screenToDocumentRow(b,0),e.getLength()-1),u=t.scrollerHeight+e.getRowLength(b)*w+m,l=this.scrollTop-g*w;var x=0;return this.layerConfig.width!=o&&(x=this.CHANGE_H_SCROLL),(a||p)&&(x=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),p&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:y,firstRowScreen:g,lastRow:b,lineHeight:w,characterWidth:this.characterWidth,minHeight:u,maxHeight:r,offset:l,gutterOffset:w?Math.max(0,Math.ceil((l+t.height-t.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},x},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1)&&!(t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),r=i.left,o=i.top,s=n&&n.top||0,a=n&&n.bottom||0,c=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;c+s>o?(t&&c+s>o+this.lineHeight&&(o-=t*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):c+this.$size.scrollerHeight-a<o+this.lineHeight&&(t&&c+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=t*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight));var l=this.scrollLeft;l>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):l+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&r-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(t||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,i=this.STEPS,r=[];for(n=0;n<i;++n)r.push(function(e,t,n){return n*(Math.pow(e-1,3)+1)+t}(n/this.STEPS,e,t-e));return r},this.scrollToLine=function(e,t,n,i){var r=this.$cursorLayer.getPixelPosition({row:e,column:0}),o=r.top;t&&(o-=this.$size.scrollerHeight/2);var s=this.scrollTop;this.session.setScrollTop(o),!1!==n&&this.animateScrolling(s,i)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(e!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(e=r[0])==n)return}var o=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval(function(){o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=e+this.scrollLeft-n.left-this.$padding,r=i/this.characterWidth,o=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:o,column:s,side:r-s>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=e+this.scrollLeft-n.left-this.$padding,r=Math.round(i/this.characterWidth),o=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(o,Math.max(r,0),i)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth)),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(r.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(e,t){function n(n){if(i.$themeId!=e)return t&&t();if(!n||!n.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.importCssString(n.cssText,n.cssClass,i.container.ownerDocument),i.theme&&r.removeCssClass(i.container,i.theme.cssClass);var o="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&o!=i.$padding&&i.setPadding(o),i.$theme=n.cssClass,i.theme=n,r.addCssClass(i.container,n.cssClass),r.setCssClass(i.container,"ace_dark",n.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:n}),t&&t()}var i=this;if(this.$themeId=e,i._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)n(e);else{var s=e||this.$options.theme.initialValue;o.loadModule(["theme",s],n)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){r.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){r.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.scroller.style.cursor!=e&&(this.scroller.style.cursor=e)},this.setMouseCursor=function(e){this.scroller.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),o.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight)return this.$gutterLineHighlight=r.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight);this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=m}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";function i(e,t){var n=t.src;s.qualifyURL(e);try{return new Blob([n],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new i;return r.append(n),r.getBlob("application/javascript")}}function r(e,t){var n=i(e,t),r=window.URL||window.webkitURL,o=r.createObjectURL(n);return new Worker(o)}var o=e("../lib/oop"),s=e("../lib/net"),a=e("../lib/event_emitter").EventEmitter,c=e("../config"),l=function(t,n,i,o,s){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),c.get("packaged")||!e.toUrl)o=o||c.moduleUrl(n.id,"worker");else{var a=this.$normalizePath;o=o||a(e.toUrl("ace/worker/worker.js",null,"_"));var l={};t.forEach(function(t){l[t]=a(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}this.$worker=r(o,n),s&&this.send("importScripts",s),this.$worker.postMessage({init:!0,tlns:l,module:n.id,classname:i}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,a),this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return s.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(l.prototype);var u=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var i=null,r=!1,o=Object.create(a),s=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){s.messageBuffer.push(e),i&&(r?setTimeout(l):l())},this.setEmitSync=function(e){r=e};var l=function(){var e=s.messageBuffer.shift();e.command?i[e.command].apply(i,e.args):e.event&&o._signal(e.event,e.data)};o.postMessage=function(e){s.onMessage({data:e})},o.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},o.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},c.loadModule(["worker",t],function(e){for(i=new e[n](o);s.messageBuffer.length;)l()})};u.prototype=l.prototype,t.UIWorkerClient=u,t.WorkerClient=l,t.createWorker=r}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var i=e("./range").Range,r=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),s=function(e,t,n,i,r,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),e.others.push(i)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,r=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,o=t.start.column-this.pos.column;if(this.updateAnchors(e),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===e.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],c={row:a.row,column:a.column+o};this.doc.insertMergedLines(c,e.lines)}else if("remove"===e.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],c={row:a.row,column:a.column+o};this.doc.remove(new i(c.row,c.column,c.row,c.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,r){t.removeMarker(n.markerId),n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),t.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function r(e){var t=e.domEvent,n=t.altKey,r=t.shiftKey,a=t.ctrlKey,c=e.getAccelKey(),l=e.getButton();if(a&&s.isMac&&(l=t.button),e.editor.inMultiSelectMode&&2==l)return void e.editor.textInput.onContextMenu(e.domEvent);if(!a&&!n&&!c)return void(0===l&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode());if(0===l){var u,h=e.editor,d=h.selection,f=h.inMultiSelectMode,p=e.getDocumentPosition(),g=d.getCursor(),m=e.inSelection()||d.isEmpty()&&i(p,g),v=e.x,y=e.y,b=function(e){v=e.clientX,y=e.clientY},w=h.session,_=h.renderer.pixelToScreenCoordinates(v,y),x=_;if(h.$mouseHandler.$enableJumpToDef)a&&n||c&&n?u=r?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(c&&!n){if(u="add",!f&&r)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&s.isMac&&t.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!f&&m)return;if(!f){var E=d.toOrientedRange();h.addSelectionMarker(E)}var A=d.rangeList.rangeAtPoint(p);h.$blockScrolling++,h.inVirtualSelectionMode=!0,r&&(A=null,E=d.ranges[0]||E,h.removeSelectionMarker(E)),h.once("mouseup",function(){var e=d.toOrientedRange();A&&e.isEmpty()&&i(A.cursor,e.cursor)?d.substractPoint(e.cursor):(r?d.substractPoint(E.cursor):E&&(h.removeSelectionMarker(E),d.addRange(E)),d.addRange(e)),h.$blockScrolling--,h.inVirtualSelectionMode=!1})}else if("block"==u){e.stop(),h.inVirtualSelectionMode=!0;var C,S=[],M=function(){var e=h.renderer.pixelToScreenCoordinates(v,y),t=w.screenToDocumentPosition(e.row,e.column,e.offsetX);i(x,e)&&i(t,d.lead)||(x=e,h.$blockScrolling++,h.selection.moveToPosition(t),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(S),S=d.rectangularRangeBlock(x,_),h.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=h.$mouseHandler.$clickSelection.clone()),S.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers(),h.$blockScrolling--)};h.$blockScrolling++,f&&!c?d.toSingleRange():!f&&c&&(C=d.toOrientedRange(),h.addSelectionMarker(C)),r?_=w.documentToScreenPosition(d.lead):d.moveToPosition(p),h.$blockScrolling--,x={row:-1,column:-1};var k=function(e){clearInterval(F),h.removeSelectionMarkers(S),S.length||(S=[d.toOrientedRange()]),h.$blockScrolling++,C&&(h.removeSelectionMarker(C),d.toSingleRange(C));for(var t=0;t<S.length;t++)d.addRange(S[t]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null,h.$blockScrolling--},T=M;o.capture(h.container,b,k);var F=setInterval(function(){T()},20);return e.preventDefault()}}}var o=e("../lib/event"),s=e("../lib/useragent");t.onMouseDown=r}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function i(e,t,n){return g.$options.wrap=!0,g.$options.needle=t,g.$options.backwards=-1==n,g.find(e)}function r(e,t){return e.row==t.row&&e.column==t.column}function o(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",u),e.commands.addCommands(f.defaultCommands),s(e))}function s(e){function t(t){i&&(e.renderer.setMouseCursor(""),i=!1)}var n=e.textInput.getElement(),i=!1;h.addListener(n,"keydown",function(n){var r=18==n.keyCode&&!(n.ctrlKey||n.shiftKey||n.metaKey);e.$blockSelectEnabled&&r?i||(e.renderer.setMouseCursor("crosshair"),i=!0):i&&t()}),h.addListener(n,"keyup",t),h.addListener(n,"blur",t)}var a=e("./range_list").RangeList,c=e("./range").Range,l=e("./selection").Selection,u=e("./mouse/multi_select_handler").onMouseDown,h=e("./lib/event"),d=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var p=e("./search").Search,g=new p,m=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=c.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),i=this.isBackwards(),r=n.start.row,o=n.end.row;if(r==o){if(i)var s=n.end,a=n.start;else var s=n.start,a=n.end;return this.addRange(c.fromPoints(a,a)),void this.addRange(c.fromPoints(s,s))}var l=[],u=this.getLineRange(r,!0);u.start.column=n.start.column,l.push(u);for(var h=r+1;h<o;h++)l.push(this.getLineRange(h,!0));u=this.getLineRange(o,!0),u.end.column=n.end.column,l.push(u),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=c.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.selectionLead),r=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(i,r).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var i=[],o=e.column<t.column;if(o)var s=e.column,a=t.column,l=e.offsetX,u=t.offsetX;else var s=t.column,a=e.column,l=t.offsetX,u=e.offsetX;var h=e.row<t.row;if(h)var d=e.row,f=t.row;else var d=t.row,f=e.row;s<0&&(s=0),d<0&&(d=0),d==f&&(n=!0);for(var p=d;p<=f;p++){var g=c.fromPoints(this.session.screenToDocumentPosition(p,s,l),this.session.screenToDocumentPosition(p,a,u));if(g.isEmpty()){if(m&&r(g.end,m))break;var m=g.end}g.cursor=o?g.start:g.end,i.push(g)}if(h&&i.reverse(),!n){for(var v=i.length-1;i[v].isEmpty()&&v>0;)v--;if(v>0)for(var y=0;i[y].isEmpty();)y++;for(var b=v;b>=y;b--)i[b].isEmpty()&&i.splice(b,1)}return i}}.call(l.prototype);var v=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var r=t.indexOf(i);-1!=r&&t.splice(r,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?i=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?i=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),i=t.exec(n,e.args||{})):i=t.multiSelectAction(n,e.args||{});else{var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var i,r=n&&n.keepOrder,o=1==n||n&&n.$byLines,s=this.session,a=this.selection,c=a.rangeList,u=(r?a:c).ranges;if(!u.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var h=a._eventRegistry;a._eventRegistry={};var d=new l(s);this.inVirtualSelectionMode=!0;for(var f=u.length;f--;){if(o)for(;f>0&&u[f].start.row==u[f-1].end.row;)f--;d.fromOrientedRange(u[f]),d.index=f,this.selection=s.selection=d;var p=e.exec?e.exec(this,t||{}):e(this,t||{});i||void 0===p||(i=p),d.toOrientedRange(u[f])}d.detach(),this.selection=s.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=h,a.mergeOverlappingRanges();var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],i=0;i<t.length;i++)n.push(this.session.getTextRange(t[i]));var r=this.session.getDocument().getNewLineCharacter();e=n.join(r),e.length==(n.length-1)*r.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row==t.row&&this.session.$clipPositionToDocument(i.row,i.column).column==t.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(e,t,n){if(t=t||{},t.needle=e||t.needle,void 0==t.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var s=r.length;s--;)o.addRange(r[s],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(r.row+e,r.column);if(n.isEmpty())var s=o;else var a=this.session.documentToScreenPosition(i?n.end:n.start),s=this.session.screenToDocumentPosition(a.row+e,a.column);if(i){var l=c.fromPoints(o,s);l.cursor=l.start}else{var l=c.fromPoints(s,o);l.cursor=l.end}if(l.desiredColumn=r.column,this.selection.inMultiSelectMode){if(t)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(l),u&&this.selection.substractPoint(u)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,r=i.length;r--;){var o=i[r];if(o.isEmpty()){var s=t.getWordRange(o.start.row,o.start.column);o.start.row=s.start.row,o.start.column=s.start.column,o.end.row=s.end.row,o.end.column=s.end.column}}n.mergeOverlappingRanges();for(var a=[],r=i.length;r--;){var o=i[r];a.unshift(t.getTextRange(o))}e<0?a.unshift(a.pop()):a.push(a.shift());for(var r=i.length;r--;){var o=i[r],s=o.clone();t.replace(o,a[r]),o.start.row=s.start.row,o.start.column=s.start.column}},this.selectMore=function(e,t,n){var r=this.session,o=r.multiSelect,s=o.toOrientedRange();if(!s.isEmpty()||(s=r.getWordRange(s.start.row,s.start.column),s.cursor=-1==e?s.start:s.end,this.multiSelect.addRange(s),!n)){var a=r.getTextRange(s),c=i(r,a,e);c&&(c.cursor=-1==e?c.start:c.end,this.$blockScrolling+=1,this.session.unfold(c),this.multiSelect.addRange(c),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,i=-1,r=n.filter(function(e){if(e.cursor.row==i)return!0;i=e.cursor.row});if(n.length&&r.length!=n.length-1){r.forEach(function(e){t.substractPoint(e.cursor)});var o=0,s=1/0,a=n.map(function(t){var n=t.cursor,i=e.getLine(n.row),r=i.substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>o&&(o=n.column),r<s&&(s=r),r});n.forEach(function(t,n){var i=t.cursor,r=o-i.column,l=a[n]-s;r>l?e.insert(i,d.stringRepeat(" ",r-l)):e.remove(new c(i.row,i.column,i.row,i.column-r+l)),t.start.column=t.end.column=o,t.start.row=t.end.row=i.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),u=l.start.row,h=l.end.row,f=u==h;if(f){var p,g=this.session.getLength();do{p=this.session.getLine(h)}while(/[=:]/.test(p)&&++h<g);do{p=this.session.getLine(u)}while(/[=:]/.test(p)&&--u>0);u<0&&(u=0),h>=g&&(h=g-1)}var m=this.session.removeFullLines(u,h);m=this.$reAlignText(m,f),this.session.insert({row:u,column:0},m.join("\n")+"\n"),f||(l.start.column=0,l.end.column=m[m.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(e,t){function n(e){return d.stringRepeat(" ",e)}function i(e){return e[2]?n(s)+e[2]+n(a-e[2].length+c)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function r(e){return e[2]?n(s+a-e[2].length)+e[2]+n(c," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function o(e){return e[2]?n(s)+e[2]+n(c)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var s,a,c,l=!0,u=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==s?(s=t[1].length,a=t[2].length,c=t[3].length,t):(s+a+c!=t[1].length+t[2].length+t[3].length&&(u=!1),s!=t[1].length&&(l=!1),s>t[1].length&&(s=t[1].length),a<t[2].length&&(a=t[2].length),c>t[3].length&&(c=t[3].length),t):[e]}).map(t?i:l?u?r:i:o)}}).call(v.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=o,e("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(e){o(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",u)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",u))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../../range").Range,r=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var r=/\S/,o=e.getLine(t),s=o.search(r);if(-1!=s){for(var a=n||o.length,c=e.getLength(),l=t,u=t;++t<c;){var h=e.getLine(t).search(r);if(-1!=h){if(h<=s)break;u=t}}if(u>l){var d=e.getLine(u).length;return new i(l,a,u,d)}}},this.openingBracketBlock=function(e,t,n,r,o){var s={row:n,column:r+1},a=e.$findClosingBracket(t,s,o);if(a){var c=e.foldWidgets[a.row];return null==c&&(c=e.getFoldWidget(a.row)),"start"==c&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,n,r,o){var s={row:n,column:r},a=e.$findOpeningBracket(t,s);if(a)return a.column++,s.column--,i.fromPoints(a,s)}}).call(r.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e("../lib/dom").importCssString(t.cssText,t.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=(e("./lib/oop"),e("./lib/dom"));e("./range").Range;(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets?this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var i=e.data,r=i.start.row,o=i.end.row,s="add"==e.action,a=r+1;a<o;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[r]?n[o].hidden=s:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=s))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,i=e.end.row-n;if(0===i);else if("remove"==e.action){var r=t.splice(n+1,i);r.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var o=new Array(i);o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var n=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,n.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/n.layerConfig.lineHeight);var i=this.session.getFoldAt(e.row,0);if(e.$fold=i,i){var o=this.session.lineWidgets;e.row!=i.end.row||o[i.start.row]?e.hidden=!0:o[i.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,i=t.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<r&&(r=s.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var s=r;s<=o;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var c=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(c+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=c-n.offset+"px";var l=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(l-=t.scrollLeft),a.el.style.left=l+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),t.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function i(e,t,n){for(var i=0,r=e.length-1;i<=r;){var o=i+r>>1,s=n(t,e[o]);if(s>0)i=o+1;else{if(!(s<0))return o;r=o-1}}return-(i+1)}function r(e,t,n){var r=e.getAnnotations().sort(a.comparePoints);if(r.length){var o=i(r,{row:t,column:-1},a.comparePoints);o<0&&(o=-o-1),o>=r.length?o=n>0?0:r.length-1:0===o&&n<0&&(o=r.length-1);var s=r[o];if(s&&n){if(s.row===t){do{s=r[o+=n]}while(s&&s.row===t);if(!s)return r.slice()}var c=[];t=s.row;do{c[n<0?"unshift":"push"](s),s=r[o+=n]}while(s&&s.row==t);return c.length&&c}}}var o=e("../line_widgets").LineWidgets,s=e("../lib/dom"),a=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new o(n),n.widgetManager.attach(e));var i=e.getCursorPosition(),a=i.row,c=n.widgetManager.getWidgetsAtRow(a).filter(function(e){return"errorMarker"==e.type})[0];c?c.destroy():a-=t;var l,u=r(n,a,t);if(u){var h=u[0];i.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,i.row=h.row,l=e.renderer.$gutterLayer.$annotations[i.row]}else{if(c)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(i.row),e.selection.moveToPosition(i);var d={row:i.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},f=d.el.appendChild(s.createElement("div")),p=d.el.appendChild(s.createElement("div"));p.className="error_widget_arrow "+l.className;var g=e.renderer.$cursorLayer.getPixelPosition(i).left;p.style.left=g+e.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",f.className="error_widget "+l.className,f.innerHTML=l.text.join("<br>"),f.appendChild(s.createElement("div"));var m=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return d.destroy(),{command:"null"}};d.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(d),e.off("changeSelection",d.destroy),e.off("changeSession",d.destroy),e.off("mouseup",d.destroy),e.off("change",d.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",d.destroy),e.on("changeSession",d.destroy),e.on("mouseup",d.destroy),e.on("change",d.destroy),e.session.widgetManager.addLineWidget(d),d.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},s.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,i){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),o=e("./lib/event"),s=e("./editor").Editor,a=e("./edit_session").EditSession,c=e("./undomanager").UndoManager,l=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.acequire=e,t.define=n(91),t.edit=function(e){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))throw new Error("ace.edit can't find div #"+n)}if(e&&e.env&&e.env.editor instanceof s)return e.env.editor;var i="";if(e&&/input|textarea/i.test(e.tagName)){var a=e;i=a.value,e=r.createElement("pre"),a.parentNode.replaceChild(e,a)}else e&&(i=r.getInnerText(e),e.innerHTML="");var c=t.createEditSession(i),u=new s(new l(e));u.setSession(c);var h={document:c,editor:u,onResize:u.resize.bind(u,null)};return a&&(h.textarea=a),o.addListener(window,"resize",h.onResize),u.on("destroy",function(){o.removeListener(window,"resize",h.onResize),h.editor.container.env=null}),u.container.env=u.env=h,u},t.createEditSession=function(e,t){var n=new a(e,t);return n.setUndoManager(new c),n},t.EditSession=a,t.UndoManager=c,t.version="1.2.9"}),function(){ace.acequire(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e);for(var t in e)e.hasOwnProperty(t)&&(window.ace[t]=e[t])})}(),e.exports=window.ace.acequire("ace/ace")},function(e,t,n){"use strict";function i(){}function r(e){try{return e.then}catch(e){return y=e,b}}function o(e,t){try{return e(t)}catch(e){return y=e,b}}function s(e,t,n){try{e(t,n)}catch(e){return y=e,b}}function a(e){if("object"!==m(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==i&&g(e,this)}function c(e,t,n){return new e.constructor(function(r,o){var s=new a(i);s.then(r,o),l(e,new p(t,n,s))})}function l(e,t){for(;3===e._83;)e=e._18;if(a._47&&a._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);u(e,t)}function u(e,t){v(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?h(t.promise,e._18):d(t.promise,e._18));var i=o(n,e._18);i===b?d(t.promise,y):h(t.promise,i)})}function h(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===("undefined"===typeof t?"undefined":m(t))||"function"===typeof t)){var n=r(t);if(n===b)return d(e,y);if(n===e.then&&t instanceof a)return e._83=3,e._18=t,void f(e);if("function"===typeof n)return void g(n.bind(t),e)}e._83=1,e._18=t,f(e)}function d(e,t){e._83=2,e._18=t,a._71&&a._71(e,t),f(e)}function f(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function p(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function g(e,t){var n=!1,i=s(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,d(t,e))});n||i!==b||(n=!0,d(t,y))}var m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=n(98),y=null,b={};e.exports=a,a._47=null,a._71=null,a._44=i,a.prototype.then=function(e,t){if(this.constructor!==a)return c(this,e,t);var n=new a(i);return l(this,new p(e,t,n)),n}},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n(1),r=n.n(i),o=r.a.shape({trySubscribe:r.a.func.isRequired,tryUnsubscribe:r.a.func.isRequired,notifyNestedSubs:r.a.func.isRequired,isSubscribed:r.a.func.isRequired}),s=r.a.shape({subscribe:r.a.func.isRequired,dispatch:r.a.func.isRequired,getState:r.a.func.isRequired})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":v(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":v(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function a(){}function c(e,t){var n={run:function(i){try{var r=e(t.getState(),i);(r!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=r,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}function l(e){var t,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=l.getDisplayName,d=void 0===u?function(e){return"ConnectAdvanced("+e+")"}:u,v=l.methodName,_=void 0===v?"connectAdvanced":v,x=l.renderCountProp,E=void 0===x?void 0:x,A=l.shouldHandleStateChanges,C=void 0===A||A,S=l.storeKey,M=void 0===S?"store":S,k=l.withRef,T=void 0!==k&&k,F=s(l,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=M+"Subscription",P=b++,L=(t={},t[M]=m.a,t[O]=m.b,t),R=(n={},n[O]=m.b,n);return function(t){f()("function"==typeof t,"You must pass a component to the function returned by "+_+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",s=d(n),l=y({},F,{getDisplayName:d,methodName:_,renderCountProp:E,shouldHandleStateChanges:C,storeKey:M,withRef:T,displayName:s,wrappedComponentName:n,WrappedComponent:t}),u=function(n){function u(e,t){i(this,u);var o=r(this,n.call(this,e,t));return o.version=P,o.state={},o.renderCount=0,o.store=e[M]||t[M],o.propsMode=Boolean(e[M]),o.setWrappedInstance=o.setWrappedInstance.bind(o),f()(o.store,'Could not find "'+M+'" in either the context or props of "'+s+'". Either wrap the root component in a <Provider>, or explicitly pass "'+M+'" as a prop to "'+s+'".'),o.initSelector(),o.initSubscription(),o}return o(u,n),u.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[O]=t||this.context[O],e},u.prototype.componentDidMount=function(){C&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},u.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},u.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},u.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=a,this.store=null,this.selector.run=a,this.selector.shouldComponentUpdate=!1},u.prototype.getWrappedInstance=function(){return f()(T,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+_+"() call."),this.wrappedInstance},u.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},u.prototype.initSelector=function(){var t=e(this.store.dispatch,l);this.selector=c(t,this.store),this.selector.run(this.props)},u.prototype.initSubscription=function(){if(C){var e=(this.propsMode?this.props:this.context)[O];this.subscription=new g.a(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},u.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(w)):this.notifyNestedSubs()},u.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},u.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},u.prototype.addExtraProps=function(e){if(!T&&!E&&(!this.propsMode||!this.subscription))return e;var t=y({},e);return T&&(t.ref=this.setWrappedInstance),E&&(t[E]=this.renderCount++),this.propsMode&&this.subscription&&(t[O]=this.subscription),t},u.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(p.createElement)(t,this.addExtraProps(e.props))},u}(p.Component);return u.WrappedComponent=t,u.displayName=s,u.childContextTypes=R,u.contextTypes=L,u.propTypes=L,h()(u,t)}}t.a=l;var u=n(46),h=n.n(u),d=n(3),f=n.n(d),p=n(0),g=(n.n(p),n(114)),m=n(44),v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=0,w={}},function(e,t,n){var i,r,o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,a){"object"===o(t)&&"undefined"!==typeof e?e.exports=a():(i=a,void 0!==(r="function"===typeof i?i.call(t,n,t,e):i)&&(e.exports=r))}(0,function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,i=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,o=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,a=s&&s(Object);return function c(l,u,h){if("string"!==typeof u){if(a){var d=s(u);d&&d!==a&&c(l,d,h)}var f=i(u);r&&(f=f.concat(r(u)));for(var p=0;p<f.length;++p){var g=f[p];if(!e[g]&&!t[g]&&(!h||!h[g])){var m=o(u,g);try{n(l,g,m)}catch(e){}}}return l}return l}})},function(e,t,n){"use strict";function i(e,t,n){function c(){y===v&&(y=v.slice())}function l(){return m}function u(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=!0;return c(),y.push(e),function(){if(t){t=!1,c();var n=y.indexOf(e);y.splice(n,1)}}}function h(e){if(!Object(r.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,m=g(m,e)}finally{b=!1}for(var t=v=y,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");g=e,h({type:a.INIT})}function f(){var e,t=u;return e={subscribe:function(e){function n(){e.next&&e.next(l())}if("object"!==("undefined"===typeof e?"undefined":s(e)))throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[o.a]=function(){return this},e}var p;if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var g=e,m=t,v=[],y=v,b=!1;return h({type:a.INIT}),p={dispatch:h,subscribe:u,getState:l,replaceReducer:d},p[o.a]=f,p}n.d(t,"a",function(){return a}),t.b=i;var r=n(26),o=n(126),s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";var i=n(119),r=i.a.Symbol;t.a=r},function(e,t,n){"use strict"},function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=i},function(e,t,n){"use strict";function i(e){return function(t,n){function i(){return r}var r=e(t,n);return i.dependsOnOwnProps=!1,i}}function r(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function o(e,t){return function(t,n){var i=(n.displayName,function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)});return i.dependsOnOwnProps=!0,i.mapToProps=function(t,n){i.mapToProps=e,i.dependsOnOwnProps=r(e);var o=i(t,n);return"function"===typeof o&&(i.mapToProps=o,i.dependsOnOwnProps=r(o),o=i(t,n)),o},i}}t.a=i,t.b=o;n(52)},function(e,t,n){"use strict";n(26),n(25)},function(e,t,n){"use strict";var i=(n(54),n(57),n(58),n(30),n(16));n.d(t,"a",function(){return i.a});var r=(n(60),n(61),n(18));n.d(t,"b",function(){return r.a});n(62)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":g(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n.n(s),c=n(0),l=n.n(c),u=n(1),h=n.n(u),d=n(137),f=n.n(d),p=n(16),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e){function t(){var n,o,s;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.history=f()(o.props),s=n,r(o,s)}return o(t,e),t.prototype.componentWillMount=function(){a()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return l.a.createElement(p.a,{history:this.history,children:this.props.children})},t}(l.a.Component);m.propTypes={initialEntries:h.a.array,initialIndex:h.a.number,getUserConfirmation:h.a.func,keyLength:h.a.number,children:h.a.node},t.a=m},function(e,t,n){"use strict";function i(e){return"/"===e.charAt(0)}function r(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&i(e),a=t&&i(t),c=s||a;if(e&&i(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var l=void 0;if(o.length){var u=o[o.length-1];l="."===u||".."===u||""===u}else l=!1;for(var h=0,d=o.length;d>=0;d--){var f=o[d];"."===f?r(o,d):".."===f?(r(o,d),h++):h&&(r(o,d),h--)}if(!c)for(;h--;h)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return l&&"/"!==p.substr(-1)&&(p+="/"),p}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return i(e,t[n])});var n="undefined"===typeof e?"undefined":o(e);if(n!==("undefined"===typeof t?"undefined":o(t)))return!1;if("object"===n){var r=e.valueOf(),s=t.valueOf();if(r!==e||s!==t)return i(r,s);var a=Object.keys(e),c=Object.keys(t);return a.length===c.length&&a.every(function(n){return i(e[n],t[n])})}return!1}Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)};t.default=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":d(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":d(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(3),h=n.n(u),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(a.a.Component);f.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},f.defaultProps={when:!0},f.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired},t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":g(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(2),h=n.n(u),d=n(3),f=n.n(d),p=n(138),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(p.a)(e.to),n=Object(p.a)(this.props.to);if(Object(p.b)(t,n))return void h()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,i=t.to;n?e.push(i):e.replace(i)},t.prototype.render=function(){return null},t}(a.a.Component);m.propTypes={push:l.a.bool,from:l.a.string,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired}).isRequired,staticContext:l.a.object}).isRequired},t.a=m},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return a}),n.d(t,"h",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return u});var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},o=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},s=function(e,t){return t(window.confirm(e))},a=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},c=function(){return-1===window.navigator.userAgent.indexOf("Trident")},l=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},u=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":v(t))&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":v(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),c=n.n(a),l=n(3),u=n.n(l),h=n(0),d=n.n(h),f=n(1),p=n.n(f),g=n(13),m=(n.n(g),n(16)),v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(e){var t=e.pathname,n=void 0===t?"/":t,i=e.search,r=void 0===i?"":i,o=e.hash,s=void 0===o?"":o;return{pathname:n,search:"?"===r?"":r,hash:"#"===s?"":s}},w=function(e,t){return e?y({},t,{pathname:Object(g.addLeadingSlash)(e)+t.pathname}):t},_=function(e,t){if(!e)return t;var n=Object(g.addLeadingSlash)(e);return 0!==t.pathname.indexOf(n)?t:y({},t,{pathname:t.pathname.substr(n.length)})},x=function(e){return"string"===typeof e?Object(g.parsePath)(e):b(e)},E=function(e){return"string"===typeof e?e:Object(g.createPath)(e)},A=function(e){return function(){u()(!1,"You cannot %s with <StaticRouter>",e)}},C=function(){},S=function(e){function t(){var n,i,s;r(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(c))),i.createHref=function(e){return Object(g.addLeadingSlash)(i.props.basename+E(e))},i.handlePush=function(e){var t=i.props,n=t.basename,r=t.context;r.action="PUSH",r.location=w(n,x(e)),r.url=E(r.location)},i.handleReplace=function(e){var t=i.props,n=t.basename,r=t.context;r.action="REPLACE",r.location=w(n,x(e)),r.url=E(r.location)},i.handleListen=function(){return C},i.handleBlock=function(){return C},s=n,o(i,s)}return s(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){c()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=i(e,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:_(t,x(n)),push:this.handlePush,replace:this.handleReplace,go:A("go"),goBack:A("goBack"),goForward:A("goForward"),listen:this.handleListen,block:this.handleBlock};return d.a.createElement(m.a,y({},r,{history:o}))},t}(d.a.Component);S.propTypes={basename:p.a.string,context:p.a.object.isRequired,location:p.a.oneOfType([p.a.string,p.a.object])},S.defaultProps={basename:"",location:"/"},S.childContextTypes={router:p.a.object.isRequired},t.a=S},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":g(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(2),h=n.n(u),d=n(3),f=n.n(d),p=n(18),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){h()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),h()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,i=void 0,r=void 0;return a.a.Children.forEach(t,function(t){if(a.a.isValidElement(t)){var o=t.props,s=o.path,c=o.exact,l=o.strict,u=o.sensitive,h=o.from,d=s||h;null==i&&(r=t,i=d?Object(p.a)(n.pathname,{path:d,exact:c,strict:l,sensitive:u}):e.match)}}),i?a.a.cloneElement(r,{location:n,computedMatch:i}):null},t}(a.a.Component);m.contextTypes={router:l.a.shape({route:l.a.object.isRequired}).isRequired},m.propTypes={children:l.a.node,location:l.a.object},t.a=m},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var r=n(0),o=n.n(r),s=n(1),a=n.n(s),c=n(46),l=n.n(c),u=n(30),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(e){var t=function(t){var n=t.wrappedComponentRef,r=i(t,["wrappedComponentRef"]);return o.a.createElement(u.a,{render:function(t){return o.a.createElement(e,h({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:a.a.func},l()(t,e)};t.a=d},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,i=t.payload;return n===o?r({},e,{location:i}):e}n.d(t,"a",function(){return o}),t.b=i;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o="@@router/LOCATION_CHANGE",s={location:null}},function(e,t,n){"use strict";function i(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return{type:r,payload:{method:e,args:n}}}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r="@@router/CALL_HISTORY_METHOD",o=i("push");i("replace"),i("go"),i("goBack"),i("goForward")},function(e,t,n){"use strict";var i=n(12),r=n(147),o=n.n(r),s=n(66),a=n(153),c=n(189),l=n(84),u=Object(s.a)(),h={},d=[],f=[u,o.a,l.b],p=i.d.apply(void 0,[i.a.apply(void 0,f)].concat(d))(i.e),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=p(a.a,e);return t.runSaga=u.run(c.a),t}();t.a=g},function(e,t,n){"use strict";var i=n(148),r=(n(68),n(8),n(19),n(70),n(4));n.d(t,"b",function(){return r.j});n(6),n(32),n(152);t.a=i.a},function(e,t,n){"use strict";function i(e){try{o(),e()}finally{s()}}function r(e){c.push(e),l||(o(),a())}function o(){l++}function s(){l--}function a(){s();for(var e=void 0;!l&&void 0!==(e=c.shift());)i(e)}t.a=r,t.c=o,t.b=a;var c=[],l=0},function(e,t,n){"use strict";function i(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var c=void 0;r.n.iterator(e)?(c=e,e=t):(Object(r.g)(t,r.n.func,a),c=t.apply(void 0,i),Object(r.g)(c,r.n.iterator,a));var l=e,u=l.subscribe,h=l.dispatch,d=l.getState,f=l.context,p=l.sagaMonitor,g=l.logger,m=l.onError,v=Object(r.v)();p&&(p.effectTriggered=p.effectTriggered||r.r,p.effectResolved=p.effectResolved||r.r,p.effectRejected=p.effectRejected||r.r,p.effectCancelled=p.effectCancelled||r.r,p.actionDispatched=p.actionDispatched||r.r,p.effectTriggered({effectId:v,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:i}}));var y=Object(o.a)(c,u,Object(r.x)(h),d,f,{sagaMonitor:p,logger:g,onError:m},v,t.name);return p&&p.effectResolved(v,y),y}t.a=i;var r=n(4),o=n(69),s="runSaga(storeInterface, saga, ...args)",a=s+": saga argument must be a Generator function!"},function(e,t,n){"use strict";function i(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e}function r(e){return("*"===e?b.wildcard:c.n.array(e)?b.array:c.n.stringableFunc(e)?b.default:c.n.func(e)?b.predicate:b.default)(e)}function o(e,t,n){function i(e){o(),n(e,!0)}function r(e){s.push(e),e.cont=function(r,o){l||(Object(c.t)(s,e),e.cont=c.r,o?i(r):(e===t&&(a=r),s.length||(l=!0,n(a))))}}function o(){l||(l=!0,s.forEach(function(e){e.cont=c.r,e.cancel()}),s=[])}var s=[],a=void 0,l=!1;return r(t),{addTask:r,cancelAll:o,abort:i,getTasks:function(){return s},taskNames:function(){return s.map(function(e){return e.name})}}}function s(e){var t=e.context,n=e.fn,i=e.args;if(c.n.iterator(n))return n;var r=void 0,o=void 0;try{r=n.apply(t,i)}catch(e){o=e}return c.n.iterator(r)?r:o?Object(c.q)(function(){throw o}):Object(c.q)(function(){var e=void 0,t={done:!1,value:r},n=function(e){return{done:!0,value:e}};return function(i){return e?n(i):(e=!0,t)}}())}function a(e){function t(){te.isRunning&&!te.isCancelled&&(te.isCancelled=!0,f(y))}function n(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,ne.cancelAll(),g(y))}function f(t,n){if(!te.isRunning)throw new Error("Trying to resume an already finished generator");try{var i=void 0;n?i=e.throw(t):t===y?(te.isCancelled=!0,f.cancel(),i=c.n.func(e.return)?e.return(y):{done:!0,value:y}):i=t===v?c.n.func(e.return)?e.return():{done:!0}:e.next(t),i.done?(te.isMainRunning=!1,te.cont&&te.cont(i.value)):b(i.value,H,"",f)}catch(e){te.isCancelled&&Z(e),te.isMainRunning=!1,te.cont(e,!0)}}function g(t,n){e._isRunning=!1,J.close(),n?(t instanceof Error&&Object.defineProperty(t,"sagaStack",{value:"at "+V+" \n "+(t.sagaStack||t.stack),configurable:!0}),ee.cont||(t instanceof Error&&K?K(t):Z(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),ee.cont&&ee.cont(t,n),ee.joiners.forEach(function(e){return e.cb(t,n)}),ee.joiners=null}function b(e,t){function n(e,t){s||(s=!0,r.cancel=c.r,q&&(t?q.effectRejected(o,e):q.effectResolved(o,e)),r(e,t))}var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],o=Object(c.v)();q&&q.effectTriggered({effectId:o,parentEffectId:t,label:i,effect:e});var s=void 0;n.cancel=c.r,r.cancel=function(){if(!s){s=!0;try{n.cancel()}catch(e){Z(e)}n.cancel=c.r,q&&q.effectCancelled(o)}};var a=void 0;return c.n.promise(e)?_(e,n):c.n.helper(e)?M(w(e),o,n):c.n.iterator(e)?x(e,o,V,n):c.n.array(e)?G(e,o,n):(a=u.c.take(e))?E(a,n):(a=u.c.put(e))?A(a,n):(a=u.c.all(e))?F(a,o,n):(a=u.c.race(e))?O(a,o,n):(a=u.c.call(e))?C(a,o,n):(a=u.c.cps(e))?S(a,n):(a=u.c.fork(e))?M(a,o,n):(a=u.c.join(e))?k(a,n):(a=u.c.cancel(e))?T(a,n):(a=u.c.select(e))?P(a,n):(a=u.c.actionChannel(e))?L(a,n):(a=u.c.flush(e))?D(a,n):(a=u.c.cancelled(e))?R(a,n):(a=u.c.getContext(e))?B(a,n):(a=u.c.setContext(e))?I(a,n):n(e)}function _(e,t){var n=e[c.a];c.n.func(n)?t.cancel=n:c.n.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function x(e,t,n,i){a(e,N,j,U,Q,z,t,n,i)}function E(e,t){var n=e.channel,i=e.pattern,o=e.maybe;n=n||J;var s=function(e){return e instanceof Error?t(e,!0):t(Object(h.d)(e)&&!o?v:e)};try{n.take(s,r(i))}catch(e){return t(e,!0)}t.cancel=s.cancel}function A(e,t){var n=e.channel,i=e.action,r=e.resolve;Object(l.a)(function(){var e=void 0;try{e=(n?n.put:j)(i)}catch(e){if(n||r)return t(e,!0);Z(e)}if(!r||!c.n.promise(e))return t(e);_(e,t)})}function C(e,t,n){var i=e.context,r=e.fn,o=e.args,s=void 0;try{s=r.apply(i,o)}catch(e){return n(e,!0)}return c.n.promise(s)?_(s,n):c.n.iterator(s)?x(s,t,r.name,n):n(s)}function S(e,t){var n=e.context,i=e.fn,r=e.args;try{var o=function(e,n){return c.n.undef(e)?t(n):t(e,!0)};i.apply(n,r.concat(o)),o.cancel&&(t.cancel=function(){return o.cancel()})}catch(e){return t(e,!0)}}function M(e,t,n){var i=e.context,r=e.fn,o=e.args,u=e.detached,h=s({context:i,fn:r,args:o});try{Object(l.c)();var d=a(h,N,j,U,Q,z,t,r.name,u?null:c.r);u?n(d):h._isRunning?(ne.addTask(d),n(d)):h._error?ne.abort(h._error):n(d)}finally{Object(l.b)()}}function k(e,t){if(e.isRunning()){var n={task:ee,cb:t};t.cancel=function(){return Object(c.t)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())}function T(e,t){e===c.d&&(e=ee),e.isRunning()&&e.cancel(),t()}function F(e,t,n){function i(){o===r.length&&(s=!0,n(c.n.array(e)?c.f.from(p({},a,{length:r.length})):a))}var r=Object.keys(e);if(!r.length)return n(c.n.array(e)?[]:{});var o=0,s=void 0,a={},l={};r.forEach(function(e){var t=function(t,r){s||(r||Object(h.d)(t)||t===v||t===y?(n.cancel(),n(t,r)):(a[e]=t,o++,i()))};t.cancel=c.r,l[e]=t}),n.cancel=function(){s||(s=!0,r.forEach(function(e){return l[e].cancel()}))},r.forEach(function(n){return b(e[n],t,n,l[n])})}function O(e,t,n){var i=void 0,r=Object.keys(e),o={};r.forEach(function(t){var s=function(o,s){if(!i)if(s)n.cancel(),n(o,!0);else if(!Object(h.d)(o)&&o!==v&&o!==y){var a;n.cancel(),i=!0;var l=(a={},a[t]=o,a);n(c.n.array(e)?[].slice.call(p({},l,{length:r.length})):l)}};s.cancel=c.r,o[t]=s}),n.cancel=function(){i||(i=!0,r.forEach(function(e){return o[e].cancel()}))},r.forEach(function(n){i||b(e[n],t,n,o[n])})}function P(e,t){var n=e.selector,i=e.args;try{var r=n.apply(void 0,[U()].concat(i));t(r)}catch(e){t(e,!0)}}function L(e,t){var n=e.pattern,i=e.buffer,o=r(n);o.pattern=n,t(Object(h.c)(N,i||d.a.fixed(),o))}function R(e,t){t(!!te.isCancelled)}function D(e,t){e.flush(t)}function B(e,t){t(Q[e])}function I(e,t){c.s.assign(Q,e),t()}var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return c.r},j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.r,U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.r,$=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,V=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",W=arguments[8];Object(c.g)(e,c.n.iterator,m);var G=Object(c.k)(F,Object(c.w)("[...effects]","all([...effects])")),q=z.sagaMonitor,X=z.logger,K=z.onError,Y=X||c.p,Z=function(e){var t=e.sagaStack;!t&&e.stack&&(t=-1!==e.stack.split("\n")[0].indexOf(e.message)?e.stack:"Error: "+e.message+"\n"+e.stack),Y("error","uncaught at "+V,t||e.message||e)},J=Object(h.e)(N),Q=Object.create($);f.cancel=c.r;var ee=function(e,t,r,o){var s,a,l;return r._deferredEnd=null,a={},a[c.e]=!0,a.id=e,a.name=t,s="done",l={},l[s]=l[s]||{},l[s].get=function(){if(r._deferredEnd)return r._deferredEnd.promise;var e=Object(c.i)();return r._deferredEnd=e,r._isRunning||(r._error?e.reject(r._error):e.resolve(r._result)),e.promise},a.cont=o,a.joiners=[],a.cancel=n,a.isRunning=function(){return r._isRunning},a.isCancelled=function(){return r._isCancelled},a.isAborted=function(){return r._isAborted},a.result=function(){return r._result},a.error=function(){return r._error},a.setContext=function(e){Object(c.g)(e,c.n.object,Object(c.h)("task",e)),c.s.assign(Q,e)},i(a,l),a}(H,V,e,W),te={name:V,cancel:t,isRunning:!0},ne=o(V,te,g);return W&&(W.cancel=n),e._isRunning=!0,f(),ee}t.a=a;var c=n(4),l=n(67),u=n(6),h=n(8),d=n(19),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g="function"===typeof Symbol&&"symbol"===f(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":f(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":f(e)},m="proc first argument (Saga function result) must be an iterator",v={toString:function(){return"@@redux-saga/CHANNEL_END"}},y={toString:function(){return"@@redux-saga/TASK_CANCEL"}},b={wildcard:function(){return c.o},default:function(e){return"symbol"===("undefined"===typeof e?"undefined":g(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},array:function(e){return function(t){return e.some(function(e){return r(e)(t)})}},predicate:function(e){return function(t){return e(t)}}},w=function(e){return{fn:e}}},function(e,t,n){"use strict";var i=n(149),r=n(150),o=n(151),s=n(4);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return r.a}),n.d(t,"c",function(){return o.a});var a=function(e){return"import { "+e+" } from 'redux-saga' has been deprecated in favor of import { "+e+" } from 'redux-saga/effects'.\nThe latter will not work with yield*, as helper effects are wrapped automatically for you in fork effect.\nTherefore yield "+e+" will return task descriptor to your saga and execute next lines of code."};i.a,r.a,o.a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(9),o=n(37),s=n(38),a=n(183),c=n(185),l=n(81),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(){i(this,e),this.awm=null,this.current=null,this.locked=!1}return u(e,[{key:"init",value:function(e){var t=this;return this.awm=e,l.a.initer(e).then(function(){return t.loadUserObject()})}},{key:"loadUserObject",value:function(){var e=this,t=new a.a(this.awm);return this.awm.objectManager.user._dispose(),t.createDefault(this.awm.projector.meterToAdsumDistance(3),{placeId:Symbol("UserPlace")},Symbol("UserPositionId")).then(function(t){var n=o.a.config.device;return e.awm.objectManager.user=t,e.awm.setDeviceId(n,!1)})}},{key:"goTo",value:function(e){var t=this;null!==this.current&&this.awm.wayfindingManager.removePath(this.current);var n=this.awm.wayfindingManager.locationRepository.get(e.placeId);return this.current=new r.d(null,n),this.awm.wayfindingManager.computePath(this.current).then(function(){l.a.buildMerged(t.current.pathSections);var e=Promise.resolve(),n=!0,i=!1,r=void 0;try{for(var o,a=t.current.pathSections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;!function(n){var i=n.ground.isFloor?n.ground:null;e=e.then(function(){return s.a.setCurrentFloor(null===i?null:i.id)}),e=e.then(function(){return t.awm.cameraManager.centerOnFloor(i)}),e=e.then(function(){return t.drawPathSection(n)}),e=e.then(function(){return new Promise(function(e){setTimeout(e,1e3)})})}(c)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return e})}},{key:"drawPathSection",value:function(e){this.awm.wayfindingManager.removePathSection(e);var t=l.a.build(e);return new c.a(t,this.awm.cameraManager,this.awm.wayfindingManager.projector).draw()}}]),e}(),d=new h;t.a=d},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){g&&f&&(g=!1,f.length?p=f.concat(p):m=-1,p.length&&a())}function a(){if(!g){var e=r(s);g=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,g=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,h,d=e.exports={};!function(){try{u="function"===typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"===typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var f,p=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||g||r(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return o});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.fromJSON(t)}return r(e,[{key:"reset",value:function(){}},{key:"fromJSON",value:function(t){var n=this;this.reset(),Object.keys(t).forEach(function(i){n.hasOwnProperty(i)&&(n[i]instanceof e?n[i].fromJSON(t[i]):n[i]=t[i])})}},{key:"toJSON",value:function(){var t=this,n={};return Object.keys(this).forEach(function(i){t.hasOwnProperty(i)&&(t[i]instanceof e?n[i]=t[i].toJSON():n[i]=t[i])}),n}}]),e}()},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"c",function(){return cn}),n.d(t,"d",function(){return ee}),n.d(t,"a",function(){return me}),n.d(t,"b",function(){return ye}),n.d(t,"e",function(){return Ie});var c=n(73),l=n(156),u=n(157),h=n.n(u),d=n(158),f=n.n(d),p=n(177),g=n.n(p),m=n(178),v=n.n(m),y=n(179),b=n.n(y),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},_=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),A={DRAFT:"DRAFT",PUBLISHED:"PUBLISHED"},C=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"reset",value:function(){this.endpoint=null,this.username=null,this.key=null,this.site=null,this.locale=null,this.state=A.PUBLISHED,this.logger=new l.c,this.cacheManager=null}},{key:"getEndpoint",value:function(){return this.constructor.formatApiEndpoint(this.endpoint)}},{key:"validate",value:function(){if("string"!=typeof this.endpoint)throw new TypeError("AdsumClientApi.Options.endpoint: Should be a string");if("string"!=typeof this.username)throw new TypeError("AdsumClientApi.Options.username: Should be a string");if("string"!=typeof this.key)throw new TypeError("AdsumClientApi.Options.key: Should be a string");if(!Number.isInteger(this.site))throw new TypeError("AdsumClientApi.Options.site: Should be an integer");if(this.site<=0)throw new TypeError("AdsumClientApi.Options.site: Should be positive");var e=l.a.isValidLogger(this.logger),t=e.isValid,n=e.reasons;if(!t)throw new TypeError(n.join(", "))}}],[{key:"getApiVersion",value:function(){return"2.3"}},{key:"formatApiEndpoint",value:function(e){return"/"!==e.charAt(e.length-1)?e+"/2.3":e+"2.3"}}]),t}(c.a),S=function(){var e=0;return function(){return++e}}(),M=new WeakMap,k=new h.a,T=function(){function e(){throw o(this,e),new Error("EventDispatcher couldn't be instantiated")}return E(e,null,[{key:"_getObjectId",value:function(e){return M.has(e)||M.set(e,S()),M.get(e)}},{key:"_getUniversalEventName",value:function(e,t){return e.constructor.name+t+this._getObjectId(e)}},{key:"subscribe",value:function(e,t,n){var i=this._getUniversalEventName(e,t);k.on(i,n)}},{key:"unsubscribe",value:function(e,t,n){var i=this._getUniversalEventName(e,t);k.removeListener(i,n)}},{key:"publish",value:function(e,t,n){k.emit(this._getUniversalEventName(e,t),n)}}]),e}(),F={CREATE:"CREATE",UPDATE:"UPDATE",REMOVE:"REMOVE",IDENTIFIER_WILL_CHANGE:"IDENTIFIER_WILL_CHANGE",IDENTIFIER_DID_CHANGE:"IDENTIFIER_DID_CHANGE"},O={INITIAL:"INITIAL",LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,e),this.x=t,this.y=n,this.z=i}return E(e,null,[{key:"fromJSON",value:function(t){var n=new e;return n.set(t),n}}]),E(e,[{key:"set",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,z:this.z}}}]),e}(),L={INVALID:"Must be valid",SYMBOL:"Must be a Symbol"},R=function(){function e(){if(o(this,e),this.constructor===e)throw new TypeError("AbstractValidator is abstract");if(void 0===this.isValid)throw new TypeError("#isValid is abstract")}return E(e,null,[{key:"message",get:function(){return L.INVALID}}]),e}(),D=function(e){function t(e){var n;return o(this,t),n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.validators=e,n}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){for(var i=0;i<this.validators.length;i++)if(this.validators[i].isValid(e,t,n))return!0;return!1}}]),t}(R),B=function(e){function t(e){var n;return o(this,t),n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.validators=e,n}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){for(var i=0;i<this.validators.length;i++)if(!this.validators[i].isValid(e,t,n))return!1;return!0}}]),t}(R),I=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return null===t[n]}}]),t}(R),N=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return"symbol"==x(t[n])}}],[{key:"message",get:function(){return L.SYMBOL}}]),t}(R),j=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return Number.isInteger(t[n])}}]),t}(R),U=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return Number.isFinite(t[n])&&t[n]<0}}]),t}(R),$=function(e){function t(e){var n;return o(this,t),n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.validator=e,n}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return!this.validator.isValid(e,t,n)}}]),t}(R),z=function(){function e(){o(this,e)}return E(e,null,[{key:"toJSON",value:function(e){for(var t=Array.from(e.values()),n=0;n<t.length;n++)"object"==x(t[n])&&null!==t[n]&&"function"==typeof t[n].toJSON&&(t[n]=t[n].toJSON());return t}},{key:"set",value:function(e,t){e.clear(),t.forEach(function(t){e.add(t)})}}]),e}(),H=function(){function e(){o(this,e)}return E(e,null,[{key:"toJSON",value:function(e){var t=Object.create(null);return e.forEach(function(e,n){t[n]=e}),t}},{key:"set",value:function(e,t){e.clear(),"object"==("undefined"===typeof t?"undefined":x(t))?Object.keys(t).forEach(function(n){e.set(n,t[n])}):t.forEach(function(t){var n=_(t,2),i=n[0],r=n[1];e.set(i,r)})}}]),e}(),V=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),this.classOf=t,this.value=null,this.set(n)}return E(e,null,[{key:"cast",value:function(t,n){if(null===n||"symbol"==("undefined"===typeof n?"undefined":x(n))||Number.isInteger(n))return n;if("object"!=("undefined"===typeof n?"undefined":x(n)))throw new TypeError("Expected integer, null, "+t+" or Reference<"+t+"> but got "+("undefined"===typeof n?"undefined":x(n)));if(n instanceof e){if(n.classOf!==t)throw new TypeError("Expected reference of "+t+" but got reference of "+n.classOf);return n.value}var i=null;switch(n.constructor.getName()){case"Label":case"Picto":i="CustomObject";break;case"Kiosk":case"Mobile":case"Web":i="Device";break;case"MapAoDae":case"MapConfig":case"MapDae":case"MapHelper":case"MapLight":case"MapPath":i="MapFile";break;case"MediaImage":case"MediaPdf":case"MediaText":case"MediaUrl":case"MediaVideo":case"Movie":i="Media";break;case"Exhibitor":case"Person":case"Product":case"Room":case"Service":case"Store":i="Poi";break;default:i=n.constructor.getName()}if(!n._isEntity)throw new TypeError("Expected integer, null or "+t+" or Reference<"+t+">");if(i!==t)throw new TypeError("Expected integer, null or "+t+" or Reference<"+t+"> but got "+n.constructor.getName());return n.id}}]),E(e,[{key:"set",value:function(e){return this.value=this.constructor.cast(this.classOf,e),this}},{key:"toJSON",value:function(){return this.value}},{key:"is",value:function(e){return this.constructor.cast(this.classOf,e)===this.value}}]),e}(),W=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),this.classOf=t,this.values=new Set,n&&this.set(n)}return E(e,[{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(e){return this.values.forEach(e),this}},{key:"set",value:function(e){var t=this;return this.clear(),e.forEach(function(e){t.add(e)}),this}},{key:"at",value:function(e){var t=0,n=null;return this.values.forEach(function(i){t===e&&(n=i),t++}),n}},{key:"add",value:function(e){return this.has(e)?this:(this.values.add(new V(this.classOf,e)),this)}},{key:"remove",value:function(e){var t=this;return this.forEach(function(n){n.is(e)&&t.values.delete(n)}),this}},{key:"has",value:function(e){var t=!1;return this.forEach(function(n){!t&&n.is(e)&&(t=!0)}),t}},{key:"indexOf",value:function(e){var t=-1,n=0;return this.forEach(function(i){-1===t&&i.is(e)&&(t=n),n++}),t}},{key:"clear",value:function(){return this.values.clear()}},{key:"toJSON",value:function(){var e=[];return this.forEach(function(t){e.push(t.toJSON())}),e}},{key:"size",get:function(){return this.values.size}}]),e}(),G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),this.classOf=t,this.values=[],n&&this.set(n)}return E(e,null,[{key:"castPosition",value:function(e,t){var n=e;if(null===e||void 0===e)return null;if("string"==typeof e&&(n=Number.isNaN(Number(e))?e:parseInt(e,10)),!Number.isInteger(n))throw new TypeError("Position has to be an integer.");return n>=t?null:n}},{key:"order",value:function(e){var t=-1;return e.map(function(e){if(t++,null===e)throw new TypeError("OrderedCollection should not have null value");return"object"!=("undefined"===typeof e?"undefined":x(e))?{id:e,position:t}:e instanceof V||e._isEntity?{id:e,position:t}:e}).sort(function(t,n){return n.position!==t.position?n.position-t.position:"symbol"==x(t.id)&&"symbol"==x(n.id)?e.indexOf(t)-e.indexOf(n):"symbol"==x(t.id)?1:"symbol"==x(n.id)?-1:t.id-n.id}).map(function(e){return e.id})}}]),E(e,[{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(e){this.values.forEach(function(t){e(t)})}},{key:"set",value:function(e){var t=this;return this.clear(),this.constructor.order(e).forEach(function(e){t.values.push(new V(t.classOf,e))}),this}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.constructor.castPosition(t,this.size),i=this.indexOf(e);return-1!==i&&this.removeAt(i),null===n?this.values.push(new V(this.classOf,e)):this.values.splice(n,0,new V(this.classOf,e)),this}},{key:"remove",value:function(e){var t=this.indexOf(e);return t>-1&&this.removeAt(t),this}},{key:"removeAt",value:function(e){return this.values.splice(e,1),this}},{key:"has",value:function(e){var t=!1;return this.forEach(function(n){!t&&n.is(e)&&(t=!0)}),t}},{key:"indexOf",value:function(e){var t=-1,n=0;return this.forEach(function(i){-1===t&&i.is(e)&&(t=n),n++}),t}},{key:"at",value:function(e){var t=0,n=null;return this.values.forEach(function(i){t===e&&(n=i),t++}),n}},{key:"clear",value:function(){return this.values.length=0,this}},{key:"toJSON",value:function(){var e=this.size;return this.values.map(function(t){return{id:t.toJSON(),position:--e}})}},{key:"size",get:function(){return this.values.length}}]),e}(),q=new Map,X=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,e),this.constructor._isAbstract()&&this._throwIsAbstract(),this._isEntity=!0,this._reset(),null!==t&&this.fromJSON(t)}return E(e,[{key:"set",value:function(e,t){return this[e]instanceof Set?z.set(this[e],t):this[e]instanceof Map?H.set(this[e],t):this[e]instanceof V||this[e]instanceof W||this[e]instanceof G||this[e]instanceof P?this[e].set(t):this[e]=t,this}}],[{key:"getName",value:function(){return"AbstractEntity"}},{key:"create",value:function(){return new this(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}},{key:"keys",get:function(){var e=[];return e.push("id"),e}}]),E(e,[{key:"toJSON",value:function(){var e=this,t={};return this.constructor.keys.forEach(function(n){e[n]instanceof Date||e[n]instanceof V||e[n]instanceof W||e[n]instanceof G||e[n]instanceof P?t[n]=e[n].toJSON():e[n]instanceof Set?t[n]=z.toJSON(e[n]):e[n]instanceof Map?t[n]=H.toJSON(e[n]):t[n]=e[n]}),t}},{key:"fromJSON",value:function(e){var t=this;return this.constructor.keys.forEach(function(n){e.hasOwnProperty(n)&&t.set(n,e[n])}),this}},{key:"clone",value:function(){return this.constructor.create(this.constructor._deepClone(this.toJSON()))}},{key:"_reset",value:function(){this.id=null}},{key:"_throwIsAbstract",value:function(){throw new TypeError(this.constructor.getName()+" is abstract")}}],[{key:"_deepClone",value:function(e){if(null===e||"object"!=("undefined"===typeof e?"undefined":x(e)))return e;if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(this._deepClone(e[n]));return t}for(var i={},r=Object.keys(e),o=0;o<r.length;o++){var s=r[o];i[s]=this._deepClone(e[s])}return i}},{key:"_setPropertyValidator",value:function(e,t){q.get(this.getName()).set(e,t)}},{key:"_isAbstract",value:function(){return!0}},{key:"_buildValidators",value:function(){q.set(this.getName(),new Map),this._setPropertyValidator("id",new D([new I,new N,new B([new j,new $(new U)])]))}},{key:"_validators",get:function(){return q.has(this.getName())||this._buildValidators(),q.get(this.getName())}}]),e}(),K=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.site=new V("Site",null)}}],[{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("site"),e}}]),t}(e)},Y=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return"string"==typeof t[n]&&t[n].length>0&&t[n].length<=255}}]),t}(R),Z=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.name=null}}],[{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("name",new Y)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("name"),e}}]),t}(e)},J=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.metadata=new Map}}],[{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("metadata"),e}}]),t}(e)},Q=function(e){function t(e){var n;return o(this,t),n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.enum=e,n.enumKeys=Object.keys(n.enum),n.enumValues=[],n.enumKeys.forEach(function(e){n.enumValues.push(n.enum[e])}),n}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return this.enumValues.includes(t[n])}}]),t}(R),ee={DEFAULT:"default",TEXTURE:"texture",TEXTURE_MODEL:"texture_model",MEDIA:"media",MEDIA_FILE:"media_file",MEDIA_PREVIEW:"media_preview",MAP:"map",PICTO:"picto",CATEGORY:"category",SITE:"site",POI:"poi",TEXTURE_LOW:"texture_low",TEXTURE_OCCLUSION:"texture_occlusion",TEXTURE_HELPER:"texture_helper"},te=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"fromBlob",value:function(e){throw new Error("File#fromBlob is available in Browser environment")}},{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.reference=null,this.content_hash=null,this.file_type=null,this.uri=null,this.context=ee.DEFAULT}}],[{key:"getName",value:function(){return"File"}},{key:"_isAbstract",value:function(){return!1}},{key:"fromFileEntity",value:function(e){if(!(e instanceof this))throw new TypeError("Expected an instance of File");var t=new this;return t.name=e.name,t.uri=e.uri,t.file_type=e.file_type,t.content_hash=e.content_hash,t.site=e.site,t}},{key:"fromBlob",value:function(e){var t=new this;return t.fromBlob(e),t}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("uri",new Y),this._setPropertyValidator("context",new Q(ee))}},{key:"_getBlobFromUri",value:function(e){throw new Error("File#_getBlobFromUri is available in Browser environment")}},{key:"_addBlobUri",value:function(e,t){throw new Error("File#_addBlobUri is available in Browser environment")}},{key:"_getBufferFromUri",value:function(e){throw new Error("File#_getBufferFromUri is available in Node environment")}},{key:"_addBufferUri",value:function(e,t){throw new Error("File#_addBufferUri is available in Node environment")}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("reference"),e.push("context"),e.push("file_type"),e.push("content_hash"),e.push("uri"),e}}]),t}(Z(K(J(X)))),ne=new Map,ie=new Map,re=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"fromBlob",value:function(e){if(!(e instanceof Blob))throw new TypeError("Expected an instance of Blob");this.name="blob",this.file_type=e.type,this.uri=ne.has(e)?ne.get(e):URL.createObjectURL(e),ie.set(this.uri,e),ne.set(e,this.uri),e instanceof window.File&&(this.name=e.name)}}],[{key:"_getBlobFromUri",value:function(e){return null===e?null:ie.has(e)?ie.get(e):null}},{key:"_addBlobUri",value:function(e,t){ie.set(e,t)}}]),t}(te),oe=new WeakMap,se=f.a.create({timeout:0,maxContentLength:-1}),ae=function(){function e(){o(this,e),this.parameters={},this.headers={},this.method="GET",this.url=null,this.data=null,this.responseType="json"}return E(e,null,[{key:"sendRequest",value:function(e){if(!(e instanceof this))throw new Error("Request instance expected");return se.request({headers:e.headers,method:e.method,url:e.url,params:e.parameters,data:e.data,responseType:e.responseType}).then(function(t){return"document"===e.responseType&&(t.responseXML=t.data),t})}},{key:"getUriContentHash",value:function(e){var t=this;return this._getBufferFromUri(e).then(function(e){return t.getBufferContentHash(e)})}},{key:"getBufferContentHash",value:function(e){throw new Error("This is abstract")}},{key:"_getBufferFromUri",value:function(e){var t=re._getBufferFromUri(e);if(null!==t)return Promise.resolve(t);var n=new this;return n.method="get",n.responseType="arraybuffer",n.url=e,this.sendRequest(n).then(function(n){return t=n.data,re._addBufferUri(e,t),t})}},{key:"formatRequestContext",value:function(e){return{request:{headers:e.headers,method:e.method,url:e.url,params:e.parameters,data:e.data,responseType:e.responseType}}}},{key:"formatApiError",value:function(e,t){var n=this.formatRequestContext(t),i=null,r=null;if(e.response){var o=e.response,s=o.status,a=o.data,c=o.headers;s>=400&&s<500?(i=403===s?"Authentication failed; check your credentials, clock and authorizations":"Request failed due to invalid request",r={response:{data:a,headers:c},request:n}):503===s?(i="Server is busy",r={response:{data:a,headers:c},request:n}):(i="Server error",r={response:{data:a,headers:c},request:n})}else e.request?(i="No response from Server",r={request:n}):(i="No response from Server",r=e);return{message:i,context:r}}}]),E(e,[{key:"addParameter",value:function(e,t){return this.parameters[e]=t,this}},{key:"addParameters",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var i=t[n];this.addParameter(i,e[i])}return this}},{key:"formattedParameters",value:function(){for(var e=[],t=Object.keys(this.parameters),n=0;n<t.length;n++){var i=t[n],r=this.parameters[i];e.push(i+"="+r)}return e.join("&")}},{key:"addHeader",value:function(e,t){return this.headers[e]=t,this}},{key:"addHeaders",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var i=t[n];this.addHeader(i,e[i])}return this}},{key:"formattedUrl",value:function(){return this.url+"?"+this.formattedParameters()}},{key:"url",get:function(){return oe.get(this)},set:function(e){var t=e;if(null!==e&&-1!==e.indexOf("?")){var n=e.split("?"),i=n.splice(0,1);t=_(i,1)[0];for(var r=n.join("?").split("&"),o=0;o<r.length;o++){var s=r[o].split("="),a=s.splice(0,1)[0],c=s.join("=");this.addParameter(a,c)}}return oe.set(this,t),this}}]),e}(),ce=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getBufferContentHash",value:function(e){return g()(v.a.create(e,e.length)).toString()}},{key:"formatRequestContext",value:function(e){var n=w(t.__proto__||Object.getPrototypeOf(t),"formatRequestContext",this).call(this,e);if(n.data instanceof FormData){var i={};n.data.entries().forEach(function(e){var t=_(e,2),n=t[0],r=t[1];i[n]=r instanceof Blob?"Blob":r}),n.data=i}return n}}]),t}(ae),le=function(){function e(){o(this,e),this._idToEntityMap=new Map,this._entityList=null}return E(e,[{key:Symbol.iterator,value:function(){return this.getAll()[Symbol.iterator]()}},{key:"store",value:function(e){return this._idToEntityMap.set(e.id,e),this._entityList=null,e}},{key:"remove",value:function(e){this.has(e.id)&&(this._idToEntityMap.delete(e.id),this._entityList=null)}},{key:"getAll",value:function(){var e=this;return null===this._entityList&&(this._entityList=[],this._idToEntityMap.forEach(function(t){e._entityList.push(t)})),this._entityList}},{key:"get",value:function(e){return this.has(e)?this._idToEntityMap.get(e):null}},{key:"has",value:function(e){return this._idToEntityMap.has(e)}},{key:"clone",value:function(){var t=new e;return this.getAll().forEach(function(e){t._idToEntityMap.set(e.id,e.clone())}),t}}]),e}(),ue=function(){function e(t){o(this,e),this._expectedClassOf=this.constructor.getEntityClass().getName(),this._logger=new l.b(t.options.logger,this._expectedClassOf),this._init(t)}return E(e,[{key:"isLoaded",value:function(){return this._status===O.LOADED}},{key:"isLoading",value:function(){return this._status===O.LOADING}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isLoading()||this.isLoaded())return this.isLoading()?this._task:Promise.resolve();this._logger.info("loading start"),this._status=O.LOADING;var n=this._loadIntoNewStorage(t).then(function(t){e._logger.debug("loading storing data"),e._storage=t,e._status=O.LOADED,e._logger.info("loading success")}).catch(function(t){return e._logger.error("loading fail",{error:t}),e._status=O.ERROR,Promise.reject(t)});return this._task=n,n}},{key:"loadFromCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isLoading()||this.isLoaded())return this.isLoading()?this._task:Promise.resolve();this._logger.info("loading start"),this._status=O.LOADING;var n=this._loadFromCacheIntoNewStorage(t).then(function(t){e._logger.debug("loading storing data"),e._storage=t,e._status=O.LOADED,e._logger.info("loading success")}).catch(function(t){return e._logger.error("loading fail",{error:t}),e._status=O.ERROR,Promise.reject(t)});return this._task=n,n}},{key:"getAll",value:function(){return this._assertIsLoaded(),this._storage.getAll()}},{key:"get",value:function(e){switch(this._assertIsLoaded(),!0){case e instanceof V:if(e.classOf!==this._expectedClassOf)throw new TypeError("Expected a Reference<"+this._expectedClassOf+"> but got Reference<"+e.classOf+">");return this._storage.get(e.value);case"object"==("undefined"===typeof e?"undefined":x(e))&&null!==e:return this._storage.get(e.id);case"string"==typeof e:return this._storage.get(parseInt(e,10));default:return this._storage.get(e)}}},{key:"getList",value:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.get(e))}),n}},{key:"findBy",value:function(e){if("object"!=("undefined"===typeof e?"undefined":x(e)))throw new Error("Filters need to be specified");var t=Object.keys(e);return this.getAll().filter(function(n){for(var i=0;i<t.length;i++){var r=t[i],o=e[r],s=!1;switch("undefined"===typeof o?"undefined":x(o)){case"function":s=o(n[r]);break;default:s=n[r]===o}if(!s)return!1}return!0})}},{key:"findOneBy",value:function(e){var t=this.findBy(e);if(t.length>1)throw new Error("Result isn't unique, please use #findBy method instead");return 0===t.length?null:t[0]}},{key:"persist",value:function(e){this._logger.info("persist entity",{entity:e}),this.em._assertIsNotLocked(),this._persist(e)}},{key:"remove",value:function(e){this._logger.info("remove entity",{id:e}),this.em._assertIsNotLocked(),this._remove(e)}},{key:"validate",value:function(e){return this._logger.info("validate entity",{entity:e}),this.constructor._throwExceptionIfNotSupported(e),this._assertIsLoaded(),this._validate(e)}},{key:"validateProperty",value:function(e,t){return this._logger.info("validate entity",{entity:e}),this.constructor._throwExceptionIfNotSupported(e),this._assertIsLoaded(),this._validateProperty(e,t)}},{key:"isValid",value:function(e){return 0===this.validate(e).size}},{key:"_init",value:function(e){this._logger.debug("initialisation"),this.em=e,this._eventDispatcher=T,this._storage=new le,this._status=O.INITIAL,this._task=null}},{key:"_loadFromCacheIntoNewStorage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.em.options.cacheManager;return null===n?Promise.reject(new Error("AbstractRepository.loadFromCache: no CacheManager")):n.get(this.constructor.getName(),this.em.options,t).then(function(t){return e._putResultIntoNewStorage(t)})}},{key:"_validateProperty",value:function(e,t){var n=e.constructor._validators;if(!n.has(t))return null;var i=n.get(t);return i.isValid(this.em,e,t)?null:i.constructor.message}},{key:"_getLoadRequest",value:function(e){var t=new ce;return t.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint,t.parameters.start=e||0,t}},{key:"_getCreateRequest",value:function(e){var t=new ce,n=e.toJSON();return delete n.id,this.constructor._readOnlyKeys.forEach(function(e){delete n[e]}),t.method="POST",t.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint,t.data=JSON.stringify(n),t.addHeader("Content-Type","application/json"),t}},{key:"_getUpdateRequest",value:function(e,t){var n=new ce,i=e.toJSON(),r=this.constructor._readOnlyKeys;return Object.keys(i).forEach(function(e){-1!==t.indexOf(e)&&-1===r.indexOf(e)||delete i[e]}),n.method="POST",n.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+e.id,n.data=JSON.stringify(i),n.addHeader("Content-Type","application/json"),n}},{key:"_getRemoveRequest",value:function(e){var t=new ce;t.method="DELETE",t.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint;var n=e.map(function(e){return e.id}).join(",");return t.addParameter("id",n),t}},{key:"_assertIsLoaded",value:function(){if(!this.isLoaded())throw this._logger.error("is not loaded"),new Error("The repository "+this.constructor.getName()+" must be loaded but it's in "+this._status+" state for now !")}},{key:"_loadIntoNewStorage",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._logger.verbose("loading first page"),this._loadFromCacheIntoNewStorage(!1).catch(function(){return e._loadFromApiIntoNewStorage()}).catch(function(n){return t?(e._logger.error("loading failed, fallback to outdated cache",{error:n}),e._loadFromCacheIntoNewStorage(!0).catch(function(){return Promise.reject(n)})):Promise.reject(n)})}},{key:"_loadFromApiIntoNewStorage",value:function(){var e=this;return this.em._xhr(this._getLoadRequest(),200).then(function(t){e._logger.verbose("loading first page success");var n=[],i=t.headers["content-range"];if(!i)throw new Error("Content-Range is not present");var r=i.match(/^(-?[0-9]+)-(-?[0-9]+)\/([0-9]+)$/);if(!r)throw new Error("Content-Range invalid");var o=parseInt(r[1],10),s=parseInt(r[2],10),a=parseInt(r[3],10),c=s-o;for(n.push(Promise.resolve(t));s+1<a;)e._logger.verbose("loading next page"),s=(o=s+1)+c,n.push(e.em._xhr(e._getLoadRequest(o),200));return Promise.all(n).then(function(t){e._logger.verbose("loading all pages success");for(var n=[],i=0;i<t.length;i++){var r=t[i].data;if(!Array.isArray(r)){var o="Return format expected to be an array while loading "+e.constructor.getName();throw new Error(o)}n=n.concat(r)}if(n.length!==a)throw new Error('"Expected '+a+" results for but got "+n.length);return n})}).then(function(t){return e._putResultIntoNewStorage(t)})}},{key:"_putResultIntoNewStorage",value:function(e){for(var t=new le,n=0;n<e.length;n++){var i=this.constructor.fromJSON(e[n]);null!==i&&t.store(i)}return t}},{key:"_replaceStorage",value:function(e){var t,n=this,i=this._storage;this._storage=e;var o=(t={},r(t,F.CREATE,[]),r(t,F.UPDATE,[]),r(t,F.REMOVE,[]),t);return i.getAll().forEach(function(e){null===n.get(e.id)&&o[F.REMOVE].push(e)}),this.getAll().forEach(function(e){if(!i.has(e.id))return void(o[F.CREATE]=e);var t=i.get(e.id),r=n.constructor._compare(t,e);0!==r.length&&(o[F.UPDATE]={current:e,previous:t,changes:r})}),o}},{key:"_persist",value:function(e,t){this._logger.debug("persist",{entity:e,internal:t}),this._assertIsLoaded(),this.constructor._throwExceptionIfNotSupported(e),this._assertIsValid(e),null===e.id?this._create(e,t):this._update(e,t)}},{key:"_remove",value:function(e,t){this._logger.debug("remove",{id:e,internal:t}),this._assertIsLoaded();var n=this.get(e);if(null!==n&&(this._storage.remove(n),this._eventDispatcher.publish(this,F.REMOVE,n),!t)){var i=[this,F.REMOVE,[n.clone()]];this._logger.debug("commit",{commit:i}),this.em._uow.commits.add(i)}}},{key:"_validate",value:function(e){var t=this,n=e.constructor._validators,i=new Map;return n.forEach(function(n){var r=_(n,2),o=r[0],s=r[1];s.isValid(t.em,e,o)||i.set(o,s.constructor.message)}),i}},{key:"_assertIsValid",value:function(e){if(!this.isValid(e)){var t="Given "+e.constructor.getName()+" is not valid";throw this.validate(e).forEach(function(e){var n=_(e,2),i=n[0],r=n[1];t+="\n\t"+i+": "+r}),new TypeError(t)}}},{key:"_create",value:function(e,t){if(null===e.id&&(e.id=Symbol("AdsumClientApi_entity_id")),this._overrideSiteEntity(e),this._storage.store(e),this._logger.debug("create",{entity:e,internal:t}),this._eventDispatcher.publish(this,F.CREATE,e),!t){var n=[this,F.CREATE,e.clone()];this._logger.debug("commit",{commit:n}),this.em._uow.commits.add(n)}}},{key:"_update",value:function(e,t){var n=this.get(e.id);if(null===n)throw new TypeError("Provided entity has id set but is not found, are you sure the entity is not remove ?");if(n.constructor!==e.constructor)return void this._switchType(e,n,t);var i=this.constructor._compare(n,e);if(0!==i.length&&(this._logger.debug("update",{entity:e,previous:n,changes:i,internal:t}),this._storage.store(e),this._eventDispatcher.publish(this,F.UPDATE,{current:e,previous:n,changes:i}),!t)){var r=[this,F.UPDATE,{current:e.clone(),previous:n,changes:i}];this._logger.debug("commit",{commit:r}),this.em._uow.commits.add(r)}}},{key:"_overrideSiteEntity",value:function(e){-1!==e.constructor.keys.indexOf("site")&&(e.site=this.em.options.site)}},{key:"_switchType",value:function(e,t,n){this._logger.debug("switch type",{entity:e,previous:t,internal:n}),e.id=null,this._create(e,n),this._remove(t,n)}}],[{key:"getName",value:function(){return this.getEntityClass().getName()}},{key:"getEntityClass",value:function(){throw new Error("You must implements #getEntityClass")}},{key:"fromJSON",value:function(e){return this.getEntityClass().create(e)}},{key:"_compare",value:function(e,t){var n=this;if(this._throwExceptionIfNotSupported(e),this._throwExceptionIfNotSupported(t),t.constructor!==e.constructor)throw new TypeError("Cannot compare two entity of different classes");var i=e.toJSON(),r=t.toJSON(),o=[];return Object.keys(i).forEach(function(e){var t=i[e],s=r[e];n._areDeepEqual(t,s)||o.push(e)}),o}},{key:"_areDeepEqual",value:function(e,t){if(e===t)return!0;if("object"!=("undefined"===typeof e?"undefined":x(e))||("undefined"===typeof e?"undefined":x(e))!=("undefined"===typeof t?"undefined":x(t)))return!1;if(null===e||null===t)return!1;if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=new Set,i=0;i<e.length;i++){for(var r=e[i],o=!1,s=0;s<t.length;s++)if(!n.has(s)&&this._areDeepEqual(r,t[s])){n.add(s),o=!0;break}if(!o)return!1}return!0}var a=Object.keys(e);if(!this._areDeepEqual(a,Object.keys(t)))return!1;for(var c=0;c<a.length;c++){var l=a[c];if(!this._areDeepEqual(e[l],t[l]))return!1}return!0}},{key:"_throwExceptionIfNotSupported",value:function(e){if(!(e instanceof this.getEntityClass()))throw new TypeError("Unsupported entity")}},{key:"_readOnlyKeys",get:function(){return[]}},{key:"_endpoint",get:function(){return this.getEntityClass().getName().toLowerCase()}}]),e}(),he=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return this.constructor.isReference(e,t[n])}}],[{key:"isReference",value:function(e,t){if(!(t instanceof V))return!1;var n=e.getRepository(t.classOf);return null!==n&&(t.is(null)||null!==n.get(t))}}]),t}(R),de=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,n,i){return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isValid",this).call(this,e,n,i)&&!n[i].is(null)}}]),t}(he),fe=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){var i=t[n];return i instanceof P&&Number.isFinite(i.x)&&Number.isFinite(i.y)&&Number.isFinite(i.z)}}]),t}(R),pe=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return Number.isFinite(t[n])}}]),t}(R),ge=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return"boolean"==typeof t[n]}}]),t}(R),me={BILLBOARD:"BILLBOARD",STATIC:"STATIC",FLIP:"FLIP"},ve=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=null,this.place=new V("Place",null),this.poi=new V("Poi",null),this.offset=new P,this.autoscale=!1,this.rotation=0,this.priority=0,this.orientation_mode=me.BILLBOARD,this.permanent_display=!0}}],[{key:"getName",value:function(){return"CustomObject"}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("place",new de),this._setPropertyValidator("poi",new he),this._setPropertyValidator("offset",new fe),this._setPropertyValidator("autoscale",new ge),this._setPropertyValidator("rotation",new pe),this._setPropertyValidator("priority",new j),this._setPropertyValidator("orientation_mode",new Q(me)),this._setPropertyValidator("permanent_display",new ge)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("type"),e.push("place"),e.push("poi"),e.push("offset"),e.push("autoscale"),e.push("rotation"),e.push("priority"),e.push("orientation_mode"),e.push("permanent_display"),e}}]),t}(K(J(X))),ye={PICTO:"picto",LABEL:"label"},be={LEFT:"left",RIGHT:"right",CENTER:"center"},we=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return Number.isFinite(t[n])&&t[n]>0}}]),t}(R),_e=function(e){function t(e){var n;return o(this,t),n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.constant=e,n}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return t[n]===this.constant}}]),t}(R),xe=function(e){function t(e){var n;return o(this,t),n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.regex=e,n}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return"string"==typeof t[n]&&null!==t[n].match(this.regex)}}]),t}(R),Ee=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ye.LABEL,this.alignment=be.CENTER,this.font="Arial",this.font_size=5,this.font_color="#000000",this.background_color=null,this.label=null}}],[{key:"getName",value:function(){return"Label"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ye.LABEL)),this._setPropertyValidator("font",new D([new I,new Y])),this._setPropertyValidator("alignment",new Q(be)),this._setPropertyValidator("font_size",new B([new j,new we])),this._setPropertyValidator("background_color",new D([new I,new xe(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])),this._setPropertyValidator("font_color",new xe(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)),this._setPropertyValidator("label",new Y)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("font"),e.push("alignment"),e.push("font_size"),e.push("font_color"),e.push("background_color"),e.push("label"),e}}]),t}(ve),Ae=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.file=new V("File",null)}}],[{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("file",new de)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("file"),e}}]),t}(e)},Ce=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ye.PICTO,this.width=null,this.height=null,this.original_md5=null}}],[{key:"getName",value:function(){return"Picto"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ye.PICTO)),this._setPropertyValidator("width",new we),this._setPropertyValidator("height",new we),this._setPropertyValidator("original_md5",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("width"),e.push("height"),e.push("original_md5"),e}}]),t}(Ae(ve)),Se=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return ve}},{key:"fromJSON",value:function(e){if("object"!=("undefined"===typeof e?"undefined":x(e))||null===e)throw new TypeError("Expected an object");switch(e.type){case"label":return new Ee(e);case"picto":return new Ce(e);default:throw new Error("Unable to parse CustomObject "+e.type)}}}]),t}(ue),Me=function(){function e(){o(this,e)}return E(e,null,[{key:"fromJSON",value:function(e){if(null===e||void 0===e)return null;if(e instanceof Date)return Number.isFinite(e.getTime())?e:null;if("string"!=typeof e&&!Number.isFinite(e))return null;var t=new Date;return t.setTime("string"==typeof e?Date.parse(e):e),Number.isFinite(t.getTime())?t:null}}]),e}(),ke=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return t[n]instanceof Date&&Number.isFinite(t[n].getTime())}}]),t}(R),Te=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"set",value:function(e,n){return"validate_at"===e?(this[e]=Me.fromJSON(n),this):w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e,n)}},{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=null,this.core_version=null,this.width=null,this.height=null,this.validate_at=null,this.site_calibration=new V("SiteCalibration",null)}}],[{key:"getName",value:function(){return"Device"}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("site_calibration",new he),this._setPropertyValidator("core_version",new D([new I,new Y])),this._setPropertyValidator("width",new D([new I,new j])),this._setPropertyValidator("height",new D([new I,new j])),this._setPropertyValidator("validate_at",new D([new I,new ke]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("type"),e.push("site_calibration"),e.push("core_version"),e.push("width"),e.push("height"),e.push("validate_at"),e}}]),t}(Z(K(J(X)))),Fe={KIOSK:"kiosk",MOBILE:"mobile",WEB:"web"},Oe=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Fe.KIOSK,this.position=new P,this.os=null,this.location=null}}],[{key:"getName",value:function(){return"Kiosk"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Fe.KIOSK)),this._setPropertyValidator("position",new fe),this._setPropertyValidator("os",new D([new Y,new I])),this._setPropertyValidator("location",new D([new Y,new I]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("position"),e.push("os"),e.push("location"),e}}]),t}(Te),Pe=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Fe.MOBILE}}],[{key:"getName",value:function(){return"Mobile"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Fe.MOBILE))}}]),t}(Te),Le=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Fe.WEB}}],[{key:"getName",value:function(){return"Web"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Fe.WEB))}}]),t}(Te),Re=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Te}},{key:"fromJSON",value:function(e){if("object"!=("undefined"===typeof e?"undefined":x(e))||null===e)throw new TypeError("Expected an object");switch(e.type){case"kiosk":return new Oe(e);case"mobile":return new Pe(e);case"web":return new Le(e);default:throw new Error("Unable to parse Device "+e.type)}}}]),t}(ue),De=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"set",value:function(e,n){return"created_at"===e||"updated_at"===e?(this[e]=Me.fromJSON(n),this):w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e,n)}},{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.version=null,this.created_at=null,this.updated_at=null}}],[{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("version"),e.push("created_at"),e.push("updated_at"),e}}]),t}(e)},Be=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=null}}],[{key:"getName",value:function(){return"MapFile"}},{key:"_isAbstract",value:function(){return!0}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("type"),e}}]),t}(Z(De(K(Ae(J(X)))))),Ie={AO_DAE:"aoDae",CONFIG:"config",DAE:"dae",HELPER:"helper",IVE:"ive",LIGHT:"light",OSG:"osg",PATH:"path"},Ne=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Ie.CONFIG}}],[{key:"getName",value:function(){return"MapConfig"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Ie.CONFIG))}}]),t}(Be),je=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Ie.DAE}}],[{key:"getName",value:function(){return"MapDae"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Ie.DAE))}}]),t}(Be),Ue=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Ie.AO_DAE}}],[{key:"getName",value:function(){return"MapAoDae"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Ie.AO_DAE))}}]),t}(Be),$e=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Ie.LIGHT}}],[{key:"getName",value:function(){return"MapLight"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Ie.LIGHT))}}]),t}(Be),ze=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Ie.HELPER}}],[{key:"getName",value:function(){return"MapHelper"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Ie.HELPER))}}]),t}(Be),He=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Ie.PATH,this.paths=new Map}}],[{key:"getName",value:function(){return"MapPath"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Ie.PATH))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("paths"),e}}]),t}(Be),Ve=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Be}},{key:"fromJSON",value:function(e){if("object"!=("undefined"===typeof e?"undefined":x(e))||null===e)throw new TypeError("Expected an object");switch(e.type){case"config":return new Ne(e);case"dae":return new je(e);case"aoDae":return new Ue(e);case"light":return new $e(e);case"helper":return new ze(e);case"path":return new He(e);case"ive":case"osg":case"model":case"aoOsg":return null;default:throw new Error("Unable to parse MapFile "+e.type)}}},{key:"_endpoint",get:function(){return"map"}}]),t}(ue),We=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){return"string"==typeof t[n]}}]),t}(R),Ge=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.description=null}}],[{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("description",new D([new I,new We]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("description"),e}}]),t}(e)},qe=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.signature=null}}],[{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("signature"),e}}]),t}(e)},Xe=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.client_id=null}}],[{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("client_id",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("client_id"),e}}]),t}(e)},Ke=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){var i=t[n];if(!(i instanceof W))return!1;var r=!0;return i.forEach(function(t){if(null===t)return void(r=!1);var n=new V(i.classOf,t);he.isReference(e,n)&&!n.is(null)||(r=!1)}),r}}]),t}(R),Ye=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){var i=t[n];if(!(i instanceof G))return!1;var r=!0;return i.forEach(function(t){if(null===t)return void(r=!1);var n=new V(i.classOf,t);he.isReference(e,n)&&!n.is(null)||(r=!1)}),r}}]),t}(R),Ze=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"set",value:function(e,n){return"start_at"!==e&&"end_at"!==e?w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e,n):(this[e]=Me.fromJSON(n),this)}},{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=null,this.start_at=null,this.end_at=null,this.tags=new W("Tag"),this.playlists=new G("Playlist"),this.pois=new W("Poi"),this.preview=new V("File",null)}}],[{key:"getName",value:function(){return"Media"}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("tags",new Ke),this._setPropertyValidator("playlists",new Ye),this._setPropertyValidator("pois",new Ke),this._setPropertyValidator("preview",new he),this._setPropertyValidator("start_at",new D([new I,new ke])),this._setPropertyValidator("end_at",new D([new I,new ke]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("type"),e.push("tags"),e.push("playlists"),e.push("pois"),e.push("preview"),e.push("start_at"),e.push("end_at"),e}}]),t}(Xe(qe(De(Ge(Z(K(J(X)))))))),Je={IMAGE:"image",PDF:"pdf",TEXT:"text",URL:"url",VIDEO:"video",MOVIE:"movie"},Qe=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Je.TEXT,this.format=null,this.identifier=null,this.content=null}}],[{key:"getName",value:function(){return"MediaText"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Je.TEXT)),this._setPropertyValidator("format",new D([new I,new Y])),this._setPropertyValidator("identifier",new D([new I,new Y])),this._setPropertyValidator("content",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("format"),e.push("identifier"),e.push("content"),e}}]),t}(Ze),et=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Je.IMAGE}}],[{key:"getName",value:function(){return"MediaImage"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Je.IMAGE))}}]),t}(Ae(Ze)),tt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Je.PDF}}],[{key:"getName",value:function(){return"MediaPdf"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Je.PDF))}}]),t}(Ae(Ze)),nt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Je.URL,this.link=null}}],[{key:"getName",value:function(){return"MediaUrl"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Je.URL)),this._setPropertyValidator("link",new Y)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("link"),e}}]),t}(Ze),it=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Je.VIDEO}}],[{key:"getName",value:function(){return"MediaVideo"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Je.VIDEO))}}]),t}(Ae(Ze)),rt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o(this,t),e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.validator=n,e}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){if(null===this.validator)return!0;if(!(t[n]instanceof Set))return!1;for(var i=Array.from(t[n]),r=0;r<i.length;r++)if(!this.validator.isValid(e,i,r))return!1;return!0}}]),t}(R),ot=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"set",value:function(e,n){if("coming_sessions"!==e)return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e,n);var i=[];return n.forEach(function(e){var t=Me.fromJSON(e);i.push(t)}),z.set(this.coming_sessions,i),this}},{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=Je.MOVIE,this.actors=new Set,this.coming_sessions=new Set,this.director=null,this.certification=null,this.duration=null}}],[{key:"getName",value:function(){return"Movie"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(Je.MOVIE)),this._setPropertyValidator("actors",new rt(new We)),this._setPropertyValidator("coming_sessions",new rt(new ke)),this._setPropertyValidator("director",new D([new I,new Y])),this._setPropertyValidator("certification",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("actors"),e.push("coming_sessions"),e.push("director"),e.push("certification"),e.push("duration"),e}}]),t}(Ae(Ze)),st=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Ze}},{key:"fromJSON",value:function(e){if("object"!=("undefined"===typeof e?"undefined":x(e))||null===e)throw new TypeError("Expected an object");switch(e.type){case"text":return new Qe(e);case"image":return new et(e);case"pdf":return new tt(e);case"url":return new nt(e);case"video":return new it(e);case"movie":return new ot(e);default:throw new Error("Unable to parse Media "+e.type)}}}]),t}(ue),at=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.categories=new W("Category"),this.children=new G("Poi"),this.custom_objects=new W("CustomObject"),this.logos=new G("File"),this.medias=new G("Media"),this.new=!0,this.parents=new W("Poi"),this.pictures=new G("File"),this.places=new W("Place"),this.tags=new W("Tag"),this.type=null}}],[{key:"getName",value:function(){return"Poi"}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("new",new ge),this._setPropertyValidator("categories",new Ke),this._setPropertyValidator("custom_objects",new Ke),this._setPropertyValidator("places",new Ke),this._setPropertyValidator("tags",new Ke),this._setPropertyValidator("parents",new Ke),this._setPropertyValidator("children",new Ye),this._setPropertyValidator("logos",new Ye),this._setPropertyValidator("pictures",new Ye),this._setPropertyValidator("medias",new Ye)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("type"),e.push("new"),e.push("categories"),e.push("custom_objects"),e.push("places"),e.push("tags"),e.push("parents"),e.push("children"),e.push("logos"),e.push("pictures"),e.push("medias"),e}}]),t}(Ge(Z(De(J(qe(Xe(K(X)))))))),ct={EXHIBITOR:"exhibitor",PERSON:"person",PRODUCT:"product",ROOM:"room",SERVICE:"service",STORE:"store"},lt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ct.EXHIBITOR,this.phone=null,this.url=null}}],[{key:"getName",value:function(){return"Exhibitor"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ct.EXHIBITOR)),this._setPropertyValidator("phone",new D([new I,new Y])),this._setPropertyValidator("url",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("phone"),e.push("url"),e}}]),t}(at),ut=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ct.PERSON,this.firstname=null,this.lastname=null,this.desk_phone=null,this.mobile_phone=null}}],[{key:"getName",value:function(){return"Person"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ct.PERSON)),this._setPropertyValidator("firstname",new D([new I,new Y])),this._setPropertyValidator("lastname",new D([new I,new Y])),this._setPropertyValidator("desk_phone",new D([new I,new Y])),this._setPropertyValidator("mobile_phone",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("firstname"),e.push("lastname"),e.push("desk_phone"),e.push("mobile_phone"),e}}]),t}(at),ht=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ct.PRODUCT,this.brand_name=null,this.currency=null,this.description1=null,this.description2=null,this.discount_value=null,this.ean=null,this.full_description=null,this.full_name=null,this.price=null,this.priority=null,this.rating=null,this.rating_count=null,this.reference=null,this.remaining_quantity=null,this.status=null,this.url=null,this.values=new W("FeatureValue")}}],[{key:"getName",value:function(){return"Product"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ct.PRODUCT)),this._setPropertyValidator("priority",new D([new I,new j])),this._setPropertyValidator("reference",new D([new I,new Y])),this._setPropertyValidator("full_name",new D([new I,new Y])),this._setPropertyValidator("description1",new D([new I,new We])),this._setPropertyValidator("description2",new D([new I,new We])),this._setPropertyValidator("full_description",new D([new I,new We])),this._setPropertyValidator("brand_name",new D([new I,new Y])),this._setPropertyValidator("url",new D([new I,new Y])),this._setPropertyValidator("status",new D([new I,new Y])),this._setPropertyValidator("price",new D([new I,new pe])),this._setPropertyValidator("currency",new D([new I,new Y])),this._setPropertyValidator("rating",new D([new I,new pe])),this._setPropertyValidator("rating_count",new D([new I,new j])),this._setPropertyValidator("remaining_quantity",new D([new I,new j])),this._setPropertyValidator("discount_value",new D([new I,new j])),this._setPropertyValidator("ean",new D([new I,new xe(/^[0-9]{8,13}$/)])),this._setPropertyValidator("values",new Ke)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("priority"),e.push("reference"),e.push("full_name"),e.push("description1"),e.push("description2"),e.push("full_description"),e.push("brand_name"),e.push("url"),e.push("status"),e.push("price"),e.push("currency"),e.push("rating"),e.push("rating_count"),e.push("remaining_quantity"),e.push("discount_value"),e.push("ean"),e.push("values"),e}}]),t}(at),dt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ct.ROOM,this.reference=null,this.kind=null,this.capacity=null,this.phone=null}}],[{key:"getName",value:function(){return"Room"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ct.ROOM)),this._setPropertyValidator("reference",new D([new I,new Y])),this._setPropertyValidator("kind",new D([new I,new Y])),this._setPropertyValidator("capacity",new D([new I,new j])),this._setPropertyValidator("phone",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("reference"),e.push("kind"),e.push("capacity"),e.push("phone"),e}}]),t}(at),ft=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ct.SERVICE,this.schedule=new Map}}],[{key:"getName",value:function(){return"Service"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ct.SERVICE))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("schedule"),e}}]),t}(at),pt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.type=ct.STORE,this.priority=0,this.opening_time=null,this.phone=null,this.url=null}}],[{key:"getName",value:function(){return"Store"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("type",new _e(ct.STORE)),this._setPropertyValidator("priority",new j),this._setPropertyValidator("opening_time",new D([new I,new We])),this._setPropertyValidator("phone",new D([new I,new Y])),this._setPropertyValidator("url",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("priority"),e.push("opening_time"),e.push("phone"),e.push("url"),e}}]),t}(at),gt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_switchType",value:function(e,n,i){if(null!==n.signature){var r=n.clone();r.signature=null,this._persist(r,i)}w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_switchType",this).call(this,e,n,i)}}],[{key:"getEntityClass",value:function(){return at}},{key:"fromJSON",value:function(e){if("object"!=("undefined"===typeof e?"undefined":x(e))||null===e)throw new TypeError("Expected an object");switch(e.type){case"exhibitor":return new lt(e);case"person":return new ut(e);case"product":return new ht(e);case"room":return new dt(e);case"service":return new ft(e);case"store":return new pt(e);default:throw new Error("Unable to parse Poi "+e.type)}}}]),t}(ue),mt=function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.logo=new V("File",null)}}],[{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("logo",new he)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("logo"),e}}]),t}(e)},vt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.color=null,this.rank=0,this.type=null,this.parameters=new Set,this.parents=new W("Category"),this.children=new G("Category"),this.pois=new W("Poi"),this.tags=new W("Tag")}}],[{key:"getName",value:function(){return"Category"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("color",new D([new I,new xe(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])),this._setPropertyValidator("parameters",new rt(new We)),this._setPropertyValidator("parents",new Ke),this._setPropertyValidator("children",new Ye),this._setPropertyValidator("pois",new Ke),this._setPropertyValidator("tags",new Ke),this._setPropertyValidator("rank",new j),this._setPropertyValidator("type",new D([new Y,new I]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("children"),e.push("color"),e.push("parameters"),e.push("parents"),e.push("pois"),e.push("rank"),e.push("type"),e.push("tags"),e}}]),t}(K(De(J(mt(Xe(qe(Z(X)))))))),yt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return vt}}]),t}(ue),bt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.values=new W("FeatureValue"),this.parents=new W("Feature"),this.children=new G("Feature")}}],[{key:"getName",value:function(){return"Feature"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("values",new Ke),this._setPropertyValidator("parents",new Ke),this._setPropertyValidator("children",new Ye)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("values"),e.push("parents"),e.push("children"),e}}]),t}(K(J(qe(Xe(Z(X)))))),wt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return bt}}]),t}(ue),_t=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.rank=0,this.unit=null,this.feature=new V("Feature",null),this.products=new W("Product")}}],[{key:"getName",value:function(){return"FeatureValue"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("feature",new he),this._setPropertyValidator("products",new Ke),this._setPropertyValidator("rank",new j),this._setPropertyValidator("unit",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("feature"),e.push("products"),e.push("rank"),e.push("unit"),e}}]),t}(qe(Xe(Z(K(J(X)))))),xt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return _t}},{key:"_endpoint",get:function(){return"feature-value"}}]),t}(ue),Et=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return re}}]),t}(ue),At=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_getCreateRequest",value:function(e){if(null===e.uri.match(/^blob/))return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getCreateRequest",this).call(this,e);var n=new FormData;n.set("name",e.name),n.set("context",e.context);var i=re._getBlobFromUri(e.uri);n.set("file",i,i instanceof File?i.name:"blob"),n.set("site",e.site.value);var r=new ce;return r.method="POST",r.url=this.options.getEndpoint()+"/"+this.constructor._endpoint,r.data=n,r}},{key:"_getUpdateRequest",value:function(e,n){if(-1===n.indexOf("uri")||null===re._getBlobFromUri(e.uri))return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getUpdateRequest",this).call(this,e,n);var i=new FormData;-1!==n.indexOf("name")&&i.set("name",e.name),-1!==n.indexOf("context")&&i.set("context",e.context),i.set("file",re._getBlobFromUri(e.uri)),-1!==n.indexOf("site")&&i.set("site",e.site.value);var r=new ce;return r.method="POST",r.url=this.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+e.id,r.data=i,r}}]),t}(Et),Ct=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.floor_id=null,this.eye=new P,this.target=new P,this.up=new P,this.zoom_max=null,this.zoom_min=null,this.site_calibration=new V("SiteCalibration",null)}}],[{key:"getName",value:function(){return"FloorCalibration"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("site_calibration",new de),this._setPropertyValidator("floor_id",new j),this._setPropertyValidator("eye",new fe),this._setPropertyValidator("target",new fe),this._setPropertyValidator("up",new fe),this._setPropertyValidator("zoom_min",new D([new I,new pe])),this._setPropertyValidator("zoom_max",new D([new I,new pe]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("site_calibration"),e.push("floor_id"),e.push("eye"),e.push("target"),e.push("up"),e.push("zoom_min"),e.push("zoom_max"),e}}]),t}(K(J(X))),St=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Ct}}]),t}(ue),Mt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.building_id=null,this.floor_id=null,this.shape_id=null,this.position=new P,this.pois=new W("Poi"),this.custom_objects=new W("CustomObject")}}],[{key:"getName",value:function(){return"Place"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("pois",new Ke),this._setPropertyValidator("custom_objects",new Ke),this._setPropertyValidator("building_id",new D([new I,new j])),this._setPropertyValidator("floor_id",new D([new I,new j])),this._setPropertyValidator("shape_id",new D([new I,new j])),this._setPropertyValidator("position",new fe)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("pois"),e.push("custom_objects"),e.push("building_id"),e.push("floor_id"),e.push("shape_id"),e.push("position"),e}}]),t}(De(qe(Z(K(J(X)))))),kt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Mt}}]),t}(ue),Tt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.tags=new W("Tag"),this.medias=new G("Media"),this.parameters=new Set}}],[{key:"getName",value:function(){return"Playlist"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("tags",new Ke),this._setPropertyValidator("medias",new Ye),this._setPropertyValidator("parameters",new rt(new We))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("tags"),e.push("medias"),e.push("parameters"),e}}]),t}(K(De(qe(Xe(Ge(Z(J(X)))))))),Ft=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Tt}}]),t}(ue),Ot=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.device=new V("Device",null),this.floor_calibrations=new W("FloorCalibration"),this.start_floor=null,this.start_point_floor=null,this.start_point_position=new P}}],[{key:"getName",value:function(){return"SiteCalibration"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("device",new de),this._setPropertyValidator("floor_calibrations",new Ke),this._setPropertyValidator("start_floor",new j),this._setPropertyValidator("start_point_floor",new D([new j,new I])),this._setPropertyValidator("start_point_position",new D([new fe,new I]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("device"),e.push("floor_calibrations"),e.push("start_floor"),e.push("start_point_floor"),e.push("start_point_position"),e}}]),t}(K(J(X))),Pt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Ot}}]),t}(ue),Lt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"isValid",value:function(e,t,n){var i=t[n];return"object"==("undefined"===typeof i?"undefined":x(i))&&null!==i&&Number.isFinite(i.x)&&Number.isFinite(i.y)&&Number.isFinite(i.z)&&Number.isFinite(i.latitude)&&Number.isFinite(i.longitude)&&Number.isFinite(i.altitude)}}]),t}(R),Rt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.opening=null,this.direction=null,this.city=null,this.cp=null,this.address=null,this.phone=null,this.locale=null,this.languages=new Set,this.gps_positions=new Set,this.gps_transform=new Set,this.gps_translate=new Set,this.target_platforms=new Set}}],[{key:"getName",value:function(){return"Site"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("opening",new D([new I,new We])),this._setPropertyValidator("direction",new D([new I,new We])),this._setPropertyValidator("city",new D([new I,new Y])),this._setPropertyValidator("cp",new D([new I,new Y])),this._setPropertyValidator("address",new D([new I,new Y])),this._setPropertyValidator("phone",new D([new I,new Y])),this._setPropertyValidator("locale",new D([new I,new Y])),this._setPropertyValidator("languages",new rt(new We)),this._setPropertyValidator("gps_positions",new rt(new Lt)),this._setPropertyValidator("gps_transform",new rt(new pe)),this._setPropertyValidator("gps_translate",new rt(new pe)),this._setPropertyValidator("target_platforms",new rt(new We))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("opening"),e.push("direction"),e.push("city"),e.push("cp"),e.push("address"),e.push("phone"),e.push("locale"),e.push("languages"),e.push("gps_positions"),e.push("gps_transform"),e.push("gps_translate"),e.push("target_platforms"),e}}]),t}(J(De(mt(qe(Xe(function(e){return function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.email=null}}],[{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("email",new D([new I,new Y]))}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("email"),e}}]),t}(e)}(Ge(Z(X))))))))),Dt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"getCurrent",value:function(){return this.get(this.em.options.site)}},{key:"_getLoadRequest",value:function(){var e=new ce;return e.url=this.em.options.getEndpoint()+"/"+this.constructor._endpoint+"/"+this.em.options.site,e}},{key:"_loadFromApiIntoNewStorage",value:function(){var e=this;return this.em._xhr(this._getLoadRequest(),200).then(function(t){var n=new le;return n.store(e.constructor.fromJSON(t.data)),n})}}],[{key:"getEntityClass",value:function(){return Rt}}]),t}(ue),Bt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_reset",this).call(this),this.categories=new W("Category"),this.medias=new W("Media"),this.pois=new W("Poi"),this.playlists=new W("Playlist")}}],[{key:"getName",value:function(){return"Tag"}},{key:"_isAbstract",value:function(){return!1}},{key:"_buildValidators",value:function(){w(t.__proto__||Object.getPrototypeOf(t),"_buildValidators",this).call(this),this._setPropertyValidator("categories",new Ke),this._setPropertyValidator("medias",new Ke),this._setPropertyValidator("pois",new Ke),this._setPropertyValidator("playlists",new Ke)}},{key:"keys",get:function(){var e=w(t.__proto__||Object.getPrototypeOf(t),"keys",this);return e.push("categories"),e.push("medias"),e.push("pois"),e.push("playlists"),e}}]),t}(De(qe(Z(K(J(X)))))),It=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"getEntityClass",value:function(){return Bt}}]),t}(ue),Nt=function(){function e(t){o(this,e),this._init(t)}return E(e,[{key:"_init",value:function(t){if(this.em=t,this.eventDispatcher=T,this.constructor===e)throw new TypeError("Cannot construct AbstractListener instances directly");this._subscribe()}},{key:"_subscribe",value:function(){var e=this.constructor.getEntityClass().getName(),t=this.em.getRepository(e);this.eventDispatcher.subscribe(t,F.CREATE,this.onCreate.bind(this)),this.eventDispatcher.subscribe(t,F.UPDATE,this.onUpdate.bind(this)),this.eventDispatcher.subscribe(t,F.REMOVE,this.onRemove.bind(this))}},{key:"onCreate",value:function(e){}},{key:"onUpdate",value:function(e){}},{key:"onRemove",value:function(e){}},{key:"_cascadeRemove",value:function(e,t,n){var i=this,r=this.em.getRepository(e[t].classOf);if(e[t]instanceof V){var o=r.get(e[t]);this.constructor._isAssociatedTo(e,o,n)&&r._remove(o,!0)}e[t]instanceof W&&e[t].forEach(function(t){var o=r.get(t);i.constructor._isAssociatedTo(e,o,n)&&r._remove(o,!0)}),e[t]instanceof G&&e[t].forEach(function(t){var o=t.id,s=r.get(o);i.constructor._isAssociatedTo(e,s,n)&&r._remove(s,!0)})}},{key:"_unsetFromInversed",value:function(e,t,n){var i=this.em.getRepository(e[t].classOf);if(e[t]instanceof V&&null!==e[t].value){var r=i.get(e[t]);if(null!==r){var o=r.clone();o[n]=null,i._persist(o,!0)}}e[t]instanceof W&&e[t].forEach(function(e){var t=i.get(e);if(null!==t){var r=t.clone();r[n]=null,i._persist(r,!0)}})}},{key:"_removeFromInversed",value:function(e,t,n){var i=this.em.getRepository(e[t].classOf);if(e[t]instanceof V&&null!==e[t].value){var r=i.get(e[t]);if(null!==r){var o=r.clone();o[n].remove(e),i._persist(o,!0)}}e[t]instanceof W&&e[t].forEach(function(t){var r=i.get(t);if(null!==r){var o=r.clone();o[n].remove(e),i._persist(o,!0)}}),e[t]instanceof G&&e[t].forEach(function(t){var r=t.id,o=i.get(r);if(null!==o){var s=o.clone();s[n].remove(e),i._persist(s,!0)}})}},{key:"_onManyToManyOrToLinkPropertyChange",value:function(e,t,n,i,r,o){var s=this,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=this.em.getRepository(e[n].classOf);e[n].forEach(function(r){null!==t&&t[n].has(r)||s.constructor._addToNewlyInversed(e,null,c,r,i,o)}),null!==t&&t[n].forEach(function(t){e[n].has(t)||(null!==a&&a(c.get(t),e),s.constructor._removeFromFormerInversed(e,c,t,i,r))})}},{key:"_onLinkToManyOrToLinkPropertyChange",value:function(e,t,n,i,r,o){var s=this,a=this.em.getRepository(e[n].classOf);e[n].forEach(function(r){var c=r.id,l=r.position;null!==t&&t[n].has(c)&&t[n].getPositionOf(c)===l||s.constructor._addToNewlyInversed(e,l,a,c,i,o)}),null!==t&&t[n].forEach(function(t){var o=t.id;e[n].has(o)||s.constructor._removeFromFormerInversed(e,a,o,i,r)})}},{key:"_onOneToManyPropertyChange",value:function(e,t,n,i,r,o){var s=this,a=this.em.getRepository(e[n].classOf);e[n].forEach(function(r){null!==t&&t[n].has(r)||s.constructor._setToNewlyInversed(e,a,r,i,o)}),null!==t&&t[n].forEach(function(t){!e[n].has(t)&&s.constructor._isAssociatedTo(e,a.get(t),i)&&s.constructor._unsetFromFormerInversed(e,a,t,i,r)})}},{key:"_onManyToOnePropertyChange",value:function(e,t,n,i,r,o){var s=this.em.getRepository(e[n].classOf);this.constructor._addToNewlyInversed(e,null,s,e[n],i,o),null!==t&&this.constructor._removeFromFormerInversed(e,s,t[n],i,r)}},{key:"_onOneToOnePropertyChange",value:function(e,t,n,i,r,o){var s=this.em.getRepository(e[n].classOf);i&&this.constructor._setToNewlyInversed(e,s,e[n],i,o),null!==t&&this.constructor._unsetFromFormerInversed(e,s,t[n],i,r)}}],[{key:"getEntityClass",value:function(){throw new TypeError("You need to implement static getEntityClass in AbstractListener inheritance")}},{key:"_isAssociatedTo",value:function(e,t,n){return null===n||null===t?Boolean(t):t[n]instanceof V&&t[n].is(e)?t[n].is(e):(t[n]instanceof W||t[n]instanceof G)&&t[n].has(e)}},{key:"_isPropertyChanged",value:function(e,t,n,i){return!!t.constructor.keys.includes(e)&&(null===n||-1!==i.indexOf(e))}},{key:"_addToNewlyInversed",value:function(e,t,n,i,r,o){if(r||o){var s=n.get(i);if(null!==s){var a=s.clone();r&&a[r].add(e,t),o&&o(a),n._persist(a,!0)}}}},{key:"_removeFromFormerInversed",value:function(e,t,n,i,r){if(i){var o=t.get(n);if(null!==o&&this._isAssociatedTo(e,o,i)){var s=o.clone();s[i].remove(e),r&&0===s[i].size?t._remove(s,!0):t._persist(s,!0)}}}},{key:"_setToNewlyInversed",value:function(e,t,n,i,r){if(i||r){var o=t.get(n);if(null!==o){var s=o.clone();i&&(s[i]=e),r&&r(s),t._persist(s,!0)}}}},{key:"_unsetFromFormerInversed",value:function(e,t,n,i,r){if(i||r){var o=t.get(n);if(null!==o&&this._isAssociatedTo(e,o,i)){var s=o.clone();r?t._remove(s,!0):(s[i]=null,t._persist(s,!0))}}}}]),e}(),jt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"place","custom_objects"),this._removeFromInversed(e,"poi","custom_objects"),e instanceof Ce&&this._cascadeRemove(e,"file",null)}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("place",e,t,n)&&this._onManyToOnePropertyChange(e,t,"place","custom_objects"),this.constructor._isPropertyChanged("poi",e,t,n)&&this._onManyToOnePropertyChange(e,t,"poi","custom_objects"),this.constructor._isPropertyChanged("file",e,t,n)&&this._onManyToOnePropertyChange(e,t,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return ve}},{key:"_onNewFile",value:function(e){e.context=ee.PICTO}}]),t}(Nt),Ut=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._cascadeRemove(e,"site_calibration","device")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("site_calibration",e,t,n)&&this._onOneToOnePropertyChange(e,t,"site_calibration","device",!0)}}],[{key:"getEntityClass",value:function(){return Te}}]),t}(Nt),$t=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._cascadeRemove(e,"file",null)}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("file",e,t,n)&&this._onManyToOnePropertyChange(e,t,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return Be}},{key:"_onNewFile",value:function(e){null!==e&&(e.context="map")}}]),t}(Nt),zt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"tags","medias"),this._removeFromInversed(e,"playlists","medias"),this._removeFromInversed(e,"pois","medias"),(e instanceof et||e instanceof it||e instanceof tt||e instanceof ot)&&this._cascadeRemove(e,"file",null),this._cascadeRemove(e,"preview",null)}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("tags",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"tags","medias"),this.constructor._isPropertyChanged("playlists",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"playlists","medias"),this.constructor._isPropertyChanged("pois",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"pois","medias"),this.constructor._isPropertyChanged("preview",e,t,n)&&this._onManyToOnePropertyChange(e,t,"preview",null,!0,this.constructor._onNewPreview),this.constructor._isPropertyChanged("file",e,t,n)&&this._onManyToOnePropertyChange(e,t,"file",null,!0,this.constructor._onNewFile)}}],[{key:"getEntityClass",value:function(){return Ze}},{key:"_onNewPreview",value:function(e){e.context="media_preview"}},{key:"_onNewFile",value:function(e){e.context="media_file"}}]),t}(Nt),Ht=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"parents","children"),this._removeFromInversed(e,"children","parents"),this._removeFromInversed(e,"categories","pois"),this._removeFromInversed(e,"tags","pois"),this._removeFromInversed(e,"medias","pois"),this._removeFromInversed(e,"places","pois"),this._cascadeRemove(e,"custom_objects","poi"),e instanceof ht&&this._removeFromInversed(e,"values","products")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("name",e,t,n)&&this._onNameUpdated(e),this.constructor._isPropertyChanged("parents",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"parents","children"),this.constructor._isPropertyChanged("children",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"children","parents"),this.constructor._isPropertyChanged("categories",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"categories","pois"),this.constructor._isPropertyChanged("tags",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"tags","pois"),this.constructor._isPropertyChanged("medias",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"medias","pois"),this.constructor._isPropertyChanged("places",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"places","pois",!1,null,this._onPlaceRemoved.bind(this)),this.constructor._isPropertyChanged("custom_objects",e,t,n)&&this._onOneToManyPropertyChange(e,t,"custom_objects","poi",!1,this._onNewCustomObject.bind(this)),this.constructor._isPropertyChanged("logos",e,t,n)&&(this._onLinkToManyOrToLinkPropertyChange(e,t,"logos",null,!0,this.constructor._onNewLogo),this.constructor._onLogoUpdated(e,this.em)),this.constructor._isPropertyChanged("pictures",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"pictures",null,!0,this.constructor._onNewPicture),this.constructor._isPropertyChanged("values",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"values","products")}},{key:"_onNameUpdated",value:function(e){var t=this;this.em.getRepository(e.custom_objects.classOf).getList(e.custom_objects).forEach(function(n){n instanceof Ee&&t._updateLabelNameFromPoi(n,e)})}},{key:"_onPlaceRemoved",value:function(e,t){var n=this.em.getRepository(t.custom_objects.classOf);n.getList(t.custom_objects).forEach(function(t){null!==t&&t.place.is(e)&&n._remove(t,!0)})}},{key:"_onNewCustomObject",value:function(e){var t=this.em.getRepository("Poi").get(e.poi);if(e instanceof Ee&&this._updateLabelNameFromPoi(e,t),e instanceof Ce){var n=this.constructor._getFirstPoiLogo(t,this.em);this.constructor._updatePictoFileFromPoiLogo(e,n,this.em)}}},{key:"_updateLabelNameFromPoi",value:function(e,t){if(e.label!==t.name){var n=e.clone();n.label=t.name,this.em.getRepository("CustomObject")._persist(n,!0)}}}],[{key:"getEntityClass",value:function(){return at}},{key:"_onNewLogo",value:function(e){e.context="poi"}},{key:"_onNewPicture",value:function(e){e.context="poi"}},{key:"_onLogoUpdated",value:function(e,t){var n=this,i=t.getRepository(e.custom_objects.classOf).getList(e.custom_objects),r=this._getFirstPoiLogo(e,t);i.forEach(function(e){e instanceof Ce&&n._updatePictoFileFromPoiLogo(e,r,t)})}},{key:"_isFirstLogo",value:function(e,t){return e.logos.size>0&&e.logos.values[0].id===t.id}},{key:"_getFirstPoiLogo",value:function(e,t){var n=t.getRepository(e.logos.classOf).getList(e.logos);return 0===n.length?null:n[0]}},{key:"_updatePictoFileFromPoiLogo",value:function(e,t,n){return null===t?(n.getRepository("CustomObject")._remove(e,!0),!1):null===t.content_hash?(n.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: logo content hash is not computed, skipping"),!1):e.original_md5!==t.content_hash}}]),t}(Nt),Vt=function(){function e(t){o(this,e),this.src={uri:t,image:null,width:null,height:null},this.target={uri:null,image:null,width:null,height:null,offset:{x:0,y:0}}}return E(e,[{key:"init",value:function(){return Promise.reject(new Error("ImageResizer is not available on NodeJS"))}},{key:"isSrcPowerOfTwo",value:function(){return this.isPowerOfTwoNumber(this.src.width)&&this.isPowerOfTwoNumber(this.src.height)}},{key:"isTargetPowerOfTwo",value:function(){return this.isPowerOfTwoNumber(this.target.width)&&this.isPowerOfTwoNumber(this.target.height)}},{key:"isPowerOfTwoNumber",value:function(e){return e>1&&0==(e&e-1)}},{key:"getNextPowerOfTwoNumber",value:function(e){for(var t=2;t<e;)t*=2;return t}},{key:"getWidthStretching",value:function(){return this.target.width/(this.target.width-2*this.target.offset.x)}},{key:"getHeightStretching",value:function(){return this.target.height/(this.target.height-2*this.target.offset.y)}},{key:"makePowerOfTwo",value:function(){if(!this.isTargetPowerOfTwo()){var e=this.isPowerOfTwoNumber(this.target.width),t=this.isPowerOfTwoNumber(this.target.height),n=this.getNextPowerOfTwoNumber(this.target.width),i=this.getNextPowerOfTwoNumber(this.target.height);if(!t&&!e)return this.resize(Math.max(n,i),!0),void this.makePowerOfTwo();t?(this.target.offset.x=Math.round((n-this.target.width)/2),this.target.width=n):(this.target.offset.y=Math.round((i-this.target.height)/2),this.target.height=i),this.resize()}}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512;if(!(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.target.width<e&&this.target.height<e)){var t=void 0;t=this.target.height>this.target.width?e/this.target.height:e/this.target.width,this.target.width=Math.round(this.target.width*t),this.target.height=Math.round(this.target.height*t),this.target.offset.x=Math.round(this.target.offset.x*t),this.target.offset.y=Math.round(this.target.offset.y*t)}}},{key:"save",value:function(){return Promise.reject(new Error("ImageResizer is not available on NodeJS"))}}]),e}(),Wt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"init",value:function(){var e=this;return new Promise(function(t,n){try{var i=new Image;i.onload=function(){e.src.image=i,e.src.width=i.width,e.src.height=i.height,e.target.width=i.width,e.target.height=i.height,t()},i.onerror=function(e){n(e)},i.src=e.src.uri}catch(t){n(t)}})}},{key:"save",value:function(){var e=this;return new Promise(function(t,n){try{var i=document.createElement("canvas");i.width=e.target.width,i.height=e.target.height,i.getContext("2d").drawImage(e.src.image,e.target.offset.x,e.target.offset.y,e.target.width/e.getWidthStretching(),e.target.height/e.getHeightStretching()),i.toBlob(function(n){var i=URL.createObjectURL(n);re._addBlobUri(i,n),e.target.uri=i,t(i)})}catch(t){n(t)}})}}]),t}(Vt),Gt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,null,[{key:"_updatePictoFileFromPoiLogo",value:function(e,n,i){var r=this;if(!w(t.__proto__||Object.getPrototypeOf(t),"_updatePictoFileFromPoiLogo",this).call(this,e,n,i)){var o=i.getRepository("Poi"),s=i.getRepository("CustomObject"),a=i.getRepository("File"),c=a.get(n);if(null!==c){var l=new Wt(c.uri),u=l.init().then(function(){return l.makePowerOfTwo(),l.save()}).then(function(t){var u=s.get(e),h=o.get(u.poi);c=a.get(c);var d=a.get(u.file);if(null!==u&&null!==h&&null!==c&&r._isFirstLogo(h,c)){var f=u.clone();l.target.height/l.getHeightStretching()>l.target.width/l.getWidthStretching()?(f.height=Math.round(u.height*l.getHeightStretching()),f.width=Math.round(u.height*l.target.width/l.target.height)):(f.width=Math.round(u.width*l.getWidthStretching()),f.height=Math.round(u.width*l.target.height/l.target.width));var p=d.clone();p.uri=t,p.file_type=c.file_type,p.site=c.site;var g={resizer:{src:{width:l.src.width,height:l.src.height},target:{width:l.target.width,height:l.target.height}},picto:{src:{width:e.width,height:e.height},target:{width:f.width,height:f.height}}};i.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: updating picto file",g),i.getRepository("File")._persist(p,!0),f.file=p,f.original_md5=n.content_hash,i.logger.debug("PoiListener#_updatePictoFileFromPoiLogo: updating picto",g),i.getRepository("CustomObject")._persist(f,!0)}}).catch(function(e){throw i.logger.warn("PoiListener#_updatePictoFileFromPoiLogo: Failed",{error:e}),e});i._waitFor(u)}}}}]),t}(Ht),qt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"parents","children"),this._removeFromInversed(e,"children","parents"),this._removeFromInversed(e,"pois","categories"),this._removeFromInversed(e,"tags","categories"),this._cascadeRemove(e,"logo",null)}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("parents",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"parents","children"),this.constructor._isPropertyChanged("children",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"children","parents"),this.constructor._isPropertyChanged("pois",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"pois","categories"),this.constructor._isPropertyChanged("tags",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"tags","categories"),this.constructor._isPropertyChanged("logo",e,t,n)&&this._onManyToOnePropertyChange(e,t,"logo",null,!0,this.constructor._onNewLogo)}}],[{key:"getEntityClass",value:function(){return vt}},{key:"_onNewLogo",value:function(e){null!==e&&(e.context=ee.CATEGORY)}}]),t}(Nt),Xt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"parents","children"),this._removeFromInversed(e,"children","parents"),this._cascadeRemove(e,"values","feature")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("parents",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"parents","children"),this.constructor._isPropertyChanged("children",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"children","parents"),this.constructor._isPropertyChanged("values",e,t,n)&&this._onManyToOnePropertyChange(e,t,"values","feature",!0)}}],[{key:"getEntityClass",value:function(){return bt}}]),t}(Nt),Kt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"products","values"),this._removeFromInversed(e,"feature","values")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("feature",e,t,n)&&this._onManyToOnePropertyChange(e,t,"feature","values"),this.constructor._isPropertyChanged("products",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"products","values")}}],[{key:"getEntityClass",value:function(){return _t}}]),t}(Nt),Yt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("uri",e,t,n)&&this._onUriUpdated(e),this.constructor._isPropertyChanged("context",e,t,n)&&this._onContextUpdated(e),this.constructor._isPropertyChanged("content_hash",e,t,n)&&this._onContentHashUpdated(e)}},{key:"_onUriUpdated",value:function(e){e.context===ee.PICTO&&(this.em.logger.debug("FileListener#_onUriUpdated: make picto file pow2"),this._makePictoFilePow2(e)),this.em.logger.debug("FileListener#_onUriUpdated: force update content hash"),this._updateContentHash(e,!0)}},{key:"_onContentHashUpdated",value:function(e){if(e.context===ee.POI){var t=this.constructor._getPoiFromFile(e,this.em);null!==t&&Gt._getFirstPoiLogo(t,this.em)===e&&(this.em.logger.debug("FileListener#_onContentHashUpdated: update associated picto"),Gt._onLogoUpdated(t,this.em))}}},{key:"_onContextUpdated",value:function(e){e.context===ee.PICTO&&(this.em.logger.debug("FileListener#_onContextUpdated: make picto pow2"),this._makePictoFilePow2(e))}},{key:"_updateContentHash",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e.content_hash||n){var i=ce.getUriContentHash(e.uri).then(function(n){var i=t.em.getRepository("File"),r=i.get(e);if(null===r||r.uri!==e.uri)return void t.em.logger.debug("FileListener#_updateContentHash: File has been removed or binary has been updated while computing ==> Skip");var o=r.clone();o.content_hash=n,i._persist(o,!0)}).catch(function(e){throw e});this.em._waitFor(i)}}},{key:"_makePictoFilePow2",value:function(e){return this.em.logger.warn("Cannot make an image Pow2 yet"),Promise.resolve(!1)}}],[{key:"getEntityClass",value:function(){return re}},{key:"_getPictoFromFile",value:function(e,t){var n=t.getRepository("CustomObject").findBy({type:ye.PICTO,file:function(t){return t.is(e)}});return 0===n.length?null:n[0]}},{key:"_getPoiFromFile",value:function(e,t){var n=t.getRepository("Poi").findBy({logos:function(t){return t.has(e)}});return 0===n.length?null:n[0]}}]),t}(Nt),Zt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"_makePictoFilePow2",value:function(e){var t=this,n=new Wt(e.uri),i=n.init().then(function(){return n.isSrcPowerOfTwo()?Promise.resolve(!0):(n.makePowerOfTwo(),n.save().then(function(i){var r=t.em.getRepository("File"),o=r.get(e);if(null!==o&&o.uri===e.uri&&o.context===ee.PICTO){var s=o.clone(),a=t.constructor._getPictoFromFile(o,t.em);if(null!==a){s.uri=i,s.content_hash=null;var c=a.clone();c.width=Math.round(a.width*n.getWidthStretching()),c.height=Math.round(a.height*n.getHeightStretching()),t.em.logger.debug("FileListener#_makePictoFilePow2: updating picto to fit new image",{src_picto:{width:a.width,height:a.height},target_picto:{width:c.width,height:c.height},src_file:{width:n.src.width,height:n.src.height},target_file:{width:n.target.width,height:n.target.height}}),t.em.getRepository("CustomObject")._persist(c,!0)}else s.context=ee.DEFAULT;t.em.logger.debug("FileListener#_makePictoFilePow2: updating picto file",{src_file:{width:n.src.width,height:n.src.height},target_file:{width:n.target.width,height:n.target.height}}),r._persist(s,!0)}}))}).catch(function(e){throw t.em.logger.warn("FileListener#_makePictoFilePow2: Failed",{error:e}),e});return this.em._waitFor(i),i}}],[{key:"_getPictoFromFile",value:function(e,t){var n=t.getRepository("CustomObject").findBy({type:ye.PICTO,file:function(t){return t.is(e)}});return 0===n.length?null:n[0]}},{key:"_getPoiFromFile",value:function(e,t){var n=t.getRepository("Poi").findBy({logos:function(t){return t.has(e)}});return 0===n.length?null:n[0]}}]),t}(Yt),Jt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"site_calibration","floor_calibrations")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("site_calibration",e,t,n)&&this._onManyToOnePropertyChange(e,t,"site_calibration","floor_calibrations")}}],[{key:"getEntityClass",value:function(){return Ct}}]),t}(Nt),Qt=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"pois","places"),this._cascadeRemove(e,"custom_objects","place")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("pois",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"pois","places"),this.constructor._isPropertyChanged("custom_objects",e,t,n)&&this._onOneToManyPropertyChange(e,t,"custom_objects","place",!0)}}],[{key:"getEntityClass",value:function(){return Mt}}]),t}(Nt),en=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"medias","playlists"),this._removeFromInversed(e,"tags","playlists")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("medias",e,t,n)&&this._onLinkToManyOrToLinkPropertyChange(e,t,"medias","playlists"),this.constructor._isPropertyChanged("tags",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"tags","playlists")}}],[{key:"getEntityClass",value:function(){return Tt}}]),t}(Nt),tn=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._unsetFromInversed(e,"device","site_calibration"),this._cascadeRemove(e,"floor_calibrations","site_calibration")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("floor_calibrations",e,t,n)&&this._onOneToManyPropertyChange(e,t,"floor_calibrations","site_calibration",!0),this.constructor._isPropertyChanged("device",e,t,n)&&this._onOneToOnePropertyChange(e,t,"device","site_calibration")}}],[{key:"getEntityClass",value:function(){return Ot}}]),t}(Nt),nn=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){throw new TypeError("You cannot remove the Site !")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("logo",e,t,n)&&this._onManyToOnePropertyChange(e,t,"logo",null,!0,this.constructor._onNewLogo)}}],[{key:"getEntityClass",value:function(){return Rt}},{key:"_onNewLogo",value:function(e){null!==e&&(e.context="site")}}]),t}(Nt),rn=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"onCreate",value:function(e){this._onChange(e,null)}},{key:"onUpdate",value:function(e){this._onChange(e.current,e.previous,e.changes)}},{key:"onRemove",value:function(e){this._removeFromInversed(e,"categories","tags"),this._removeFromInversed(e,"pois","tags"),this._removeFromInversed(e,"playlists","tags"),this._removeFromInversed(e,"medias","tags")}},{key:"_onChange",value:function(e,t,n){this.constructor._isPropertyChanged("pois",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"pois","tags"),this.constructor._isPropertyChanged("categories",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"categories","tags"),this.constructor._isPropertyChanged("medias",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"medias","tags"),this.constructor._isPropertyChanged("playlists",e,t,n)&&this._onManyToManyOrToLinkPropertyChange(e,t,"playlists","tags")}}],[{key:"getEntityClass",value:function(){return Bt}}]),t}(Nt),on=function(){function e(t){o(this,e),this.em=t,this.em.logger.debug("UnitOfWork: instantiate"),this._reset()}return E(e,[{key:"flush",value:function(){var e=this;this.em.logger.debug("UnitOfWork: flush start"),this._prepare();var t=new Set(this.commits)[Symbol.iterator]();return this._flushCommits(t).then(function(){return e._finish()})}},{key:"_reset",value:function(){this.em.logger.debug("UnitOfWork: reset"),this.commits=new Set,this._symbolToId=new Map,this._symbolToRepository=new Map}},{key:"_prepare",value:function(){this.em.logger.debug("UnitOfWork: prepare"),this._mergeConsecutiveCommits()}},{key:"_mergeConsecutiveCommits",value:function(){var e=this;this.em.logger.debug("UnitOfWork: merge commits");var t=new Set,n=null;this.commits.forEach(function(i){var r,o,s=e.constructor._mergeTwoConsecutiveCommits(n,i);switch(e.em.logger.debug("UnitOfWork: merge two consecutive commits",{previous:n,commit:i,merged:s}),s.length){case 0:n=null;break;case 1:var a=_(s,1);n=a[0];break;case 2:t.add(s[0]),r=s,o=_(r,2),n=o[1];break;default:throw new Error("Unexpected")}}),null!==n&&t.add(n),this.commits=t}},{key:"_finish",value:function(){var e=this;this.em.logger.debug("UnitOfWork: finish");var t=new Set;return this._symbolToId.entries().forEach(function(n){var i=_(n,2),r=i[0],o=i[1],s=e._symbolToRepository.get(r);t.add({id:o,symbol:r,repository:s})}),this._reset(),t}},{key:"_replaceFileReferenceSymbolToId",value:function(e){"symbol"==x(e.value)&&(e.value=this._symbolToId.get(e.value))}},{key:"_replaceFileCollectionSymbolToId",value:function(e){var t=this;e.forEach(function(n){"symbol"==("undefined"===typeof n?"undefined":x(n))&&(e.add(t._symbolToId.get(n)),e.remove(n))})}},{key:"_replaceFileOrderedCollectionSymbolToId",value:function(e){var t=this;e.forEach(function(n){var i=_(n,2),r=i[0],o=i[1];"symbol"==("undefined"===typeof r?"undefined":x(r))&&(e.add(t._symbolToId.get(r),o),e.remove(r))})}},{key:"_flushCommits",value:function(e){var t=this,n=e.next(),i=n.value;return n.done?Promise.resolve():(this.em.logger.info("UnitOfWork: "+this.commits.size+" request to send"),this.em.logger.debug("UnitOfWork: flush commits start",{commit:i}),this._flushCommit(i).then(function(){return t.em.logger.debug("UnitOfWork: flush commits next",{commit:i}),t.commits.delete(i),t._flushCommits(e)}))}},{key:"_flushCommit",value:function(e){var t=_(e,3),n=t[0],i=t[1],r=t[2];switch(i){case F.CREATE:return this._flushCreateCommit(n,r);case F.UPDATE:return this._flushUpdateCommit(n,r.current,r.changes);case F.REMOVE:return this._flushRemoveCommit(n,r);default:return Promise.reject(new Error("UOW: Unhandled event "+i))}}},{key:"_flushCreateCommit",value:function(e,t){var n=this;this._replaceAssociatedSymbolToId(t);var i=e._getCreateRequest(t);return this.em._xhr(i,200).then(function(i){var r=i.data;return n._symbolToId.set(t.id,r.id),n._symbolToRepository.set(t.id,e),n.em.logger.debug("UnitOfWork: retrieved identifier",{symbol:t.id,id:r.id}),r.id})}},{key:"_flushUpdateCommit",value:function(e,t,n){this._replaceAssociatedSymbolToId(t);var i=e._getUpdateRequest(t,n);return this.em._xhr(i,204)}},{key:"_flushRemoveCommit",value:function(e,t){var n=this;t.forEach(function(e){n._replaceAssociatedSymbolToId(e)});for(var i=[],r=0;r<t.length;r+=50)!function(r){var o=t.slice(r,r+50),s=e._getRemoveRequest(o);i.push(n.em._xhr(s,204).catch(function(t){if(t instanceof Error)return Promise.reject(t);var i=t.data;if(!i.hasOwnProperty("errors"))return Promise.reject(new Error("Server error"));var r=i.errors;if(t.status>=500)return Promise.reject(r);n.em.logger.warn("UnitOfWork: flush remove commit invalid data supplied",{json:i});var s=Object.keys(r);if(1!==s.length||!s.includes("id"))return Promise.reject(r);for(var a=Object.keys(r.id).map(function(e){return parseInt(e.replace("#",""),10)}),c=[],l=0;l<o.length;l++)a.includes(l)||c.push(o[l]);return 0===c.length?Promise.resolve():n._flushRemoveCommit(e,c)}))}(r);return Promise.all(i)}},{key:"_replaceAssociatedSymbolToId",value:function(e){var t=this;this.em.logger.debug("UnitOfWork: replace associated symbol to id",{entity:e}),"symbol"==x(e.id)&&this._symbolToId.has(e.id)&&(e.id=this._symbolToId.get(e.id),this.em.logger.debug("UnitOfWork: replace associated symbol to id (own id replaced)",{entity:e})),e.constructor.keys.forEach(function(n){e[n]instanceof V&&t._replaceReferenceAssociatedSymbol(n,e),e[n]instanceof W&&t._replaceCollectionAssociatedSymbol(n,e),e[n]instanceof G&&t._replaceOrderedCollectionAssociatedSymbol(n,e)})}},{key:"_replaceReferenceAssociatedSymbol",value:function(e,t){var n=t[e].value;if("symbol"==("undefined"===typeof n?"undefined":x(n))){if(!this._symbolToId.has(n))throw this.em.logger.error("UnitOfWork: replace associated symbol to id (reference id not found)",{key:e}),new Error("Unable to find Symbol <--\x3e Id matching");this.em.logger.debug("UnitOfWork: replace associated symbol to id (reference id replaced)",{key:e}),t[e]=this._symbolToId.get(n)}}},{key:"_replaceCollectionAssociatedSymbol",value:function(e,t){var n=this,i=[];t[e].forEach(function(t){if("symbol"!=("undefined"===typeof t?"undefined":x(t)))i.push(t);else{if(!n._symbolToId.has(t))throw n.em.logger.error("UnitOfWork: replace associated symbol to id (collection item id not found)",{key:e}),new Error("Unable to find Symbol <--\x3e Id matching");n.em.logger.debug("UnitOfWork: replace associated symbol to id (collection item id replaced)",{key:e}),i.push(n._symbolToId.get(t))}}),t[e]=i}},{key:"_replaceOrderedCollectionAssociatedSymbol",value:function(e,t){var n=this,i=[];t[e].forEach(function(t){var r=t.id,o=t.position;if("symbol"!=("undefined"===typeof r?"undefined":x(r)))i.push({id:r,position:o});else{if(!n._symbolToId.has(r))throw n.em.logger.error("UnitOfWork: replace associated symbol to id (ordered collection item id not found)",{key:e}),new Error("Unable to find Symbol <--\x3e Id matching");n.em.logger.debug("UnitOfWork: replace associated symbol to id (ordered collection item id replaced)",{key:e}),i.push({id:n._symbolToId.get(r),position:o})}}),t[e]=i}},{key:"_hasPendingChanges",get:function(){return this._mergeConsecutiveCommits(),0!==this.commits.size}}],[{key:"_mergeTwoConsecutiveCommits",value:function(e,t){if(null===e)return[t];var n=_(e,3),r=n[0],o=n[1],s=n[2],a=_(t,3),c=a[0],l=a[1],u=a[2];if(r!==c)return[e,t];switch(o){case F.UPDATE:if(l===F.UPDATE&&s.current===u.previous){var h=s.previous,d=u.current,f=r.constructor._compare(h,d);return 0===f.length?[]:[[r,F.UPDATE,{current:d,previous:h,changes:f}]]}break;case F.CREATE:if(l===F.REMOVE&&u.includes(s))return[];if(l===F.UPDATE&&s===u.previous)return[[r,F.CREATE,u.current]];break;case F.REMOVE:if(l===F.REMOVE&&r===c)return[[r,F.REMOVE,[].concat(i(s),i(u))]];break;default:throw new Error("Unexpected")}return[e,t]}}]),e}(),sn=[Dt,Ve,At,yt,gt,wt,xt,kt,Se,Ft,st,Re,Pt,St,It],an=[nn,$t,Zt,qt,Gt,Xt,Kt,Qt,jt,en,zt,Ut,tn,Jt,rn],cn=function(){function e(t){o(this,e),this.options=null,this.logger=null,this._repositories=new Map,this._listeners=new Map,this.locale=null,this._uow=null,this.locked=!1,this._waiting=new Set,this._init(new C(t))}return E(e,null,[{key:"generateNonce",value:function(){var e=Date.now()*Math.random();return g()(e.toString(),1)}},{key:"now",value:function(){return Math.round(Date.now()/1e3).toString()}}]),E(e,[{key:"_init",value:function(e){e.validate(),this.options=e,this.logger=this.options.logger,this.logger.info("EntityManager: instantiate",{options:e}),this._uow=new on(this);for(var t=0;t<sn.length;t++)this._repositories.set(sn[t].getName(),new sn[t](this));for(var n=0;n<an.length;n++)this._listeners.set(an[n].getEntityClass().getName(),new an[n](this));this.locale=this.options.locale}},{key:"_lock",value:function(){this.logger.info("EntityManager: locked"),this.locked=!0}},{key:"_unlock",value:function(){this.logger.info("EntityManager: unlocked"),this.locked=!1}},{key:"hasPendingChanges",value:function(){return this._uow._hasPendingChanges}},{key:"isFullyLoaded",value:function(){for(var e=this.getRepositories(),t=0;t<e.length;t++)if(e[t]._status!==O.LOADED)return!1;return!0}},{key:"getRepository",value:function(e){return this._repositories.has(e)?this._repositories.get(e):null}},{key:"getRepositoryNames",value:function(){return Array.from(this._repositories.keys())}},{key:"getRepositories",value:function(){return Array.from(this._repositories.values())}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise(function(n,i){e.logger.info("EntityManager: loading start");var r=[];e.getRepositories().forEach(function(e){r.push(e.load(t))}),Promise.all(r).then(function(){e.logger.info("EntityManager: loading success"),n()},function(t){e.logger.error("EntityManager: loading failed",{error:t}),i(t)})})}},{key:"loadFromCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(n,i){e.logger.info("EntityManager: loading start");var r=[];e.getRepositories().forEach(function(e){r.push(e.loadFromCache(t))}),Promise.all(r).then(function(){e.logger.info("EntityManager: loading success"),n()},function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.logger.error("EntityManager: loading failed",{error:n}),i.apply(void 0,n)})})}},{key:"flush",value:function(){var e=this;return new Promise(function(t,n){e.options.state===A.PUBLISHED&&e.logger.warn("EntityManager: your are about to flush into PUBLISHED state"),e.logger.info("EntityManager: flush start"),e._assertIsNotLocked(),e._assertIsFullyLoaded(),e.logger.info("EntityManager: waiting listeners to be completed before send data"),e._wait().then(t,n)}).then(function(){return e._lock(),e._uow.flush()}).then(function(t){return e._unlock(),t.forEach(function(e){T.publish(e.repository,F.IDENTIFIER_WILL_CHANGE,[e.id,e.symbol])}),e.pull().then(function(){t.forEach(function(e){T.publish(e.repository,F.IDENTIFIER_DID_CHANGE,[e.id,e.symbol])})})}).catch(function(t){throw e.logger.error("EntityManager: flush failed",{error:t}),e._unlock(),t})}},{key:"pull",value:function(){var e=this;if(this.logger.info("EntityManager: pull start"),this.hasPendingChanges())throw this.logger.error("EntityManager: pull failed (pending changes)."),new Error("You cannot pull while there is unsaved modifications");this._lock();var t=[];return this.getRepositories().forEach(function(e){t.push(e._loadIntoNewStorage(!1).then(function(t){var n=e._replaceStorage(t);return[e,n]}))}),Promise.all(t).then(function(e){e.forEach(function(e){var t=_(e,2),n=t[0];t[1][F.REMOVE].forEach(function(e){T.publish(n,F.REMOVE,e)})}),e.forEach(function(e){var t=_(e,2),n=t[0];t[1][F.CREATE].forEach(function(e){T.publish(n,F.CREATE,e)})}),e.forEach(function(e){var t=_(e,2),n=t[0];t[1][F.UPDATE].forEach(function(e){T.publish(n,F.UPDATE,e)})})}).then(function(){e._unlock()}).catch(function(t){return e._unlock(),Promise.reject(t)})}},{key:"_assertIsFullyLoaded",value:function(){if(!this.isFullyLoaded())throw this.logger.error("EntityManager: not fully failed."),new TypeError("You need to fully load EntityManager to use write features")}},{key:"_assertIsNotLocked",value:function(){if(this.locked)throw this.logger.error("EntityManager: locked."),new Error("The EntityManager is locked, readonly operations are permitted")}},{key:"_xhr",value:function(e,t){var n=this;return e.addParameter("site",this.options.site),e.addHeaders(this.constructor.getHeaders(this.options.username,this.options.key,this.options.locale,this.options.state)),e.validateStatus=function(e){return e===t},ce.sendRequest(e).then(function(i){if(i.status!==t){var r="Unexpected status while requesting API\n\n                Got "+i.status+" instead of "+t+" on route "+e.formattedUrl();return n.logger.error(r,{response:i,request:e,expectedStatus:t}),Promise.reject(i)}return i}).catch(function(t){return n._onRequestError(t,e)})}},{key:"_onRequestError",value:function(e,t){var n=ce.formatApiError(e,t),i=n.message,r=n.context;return this.logger.error(i,r),Promise.reject(new Error(i))}},{key:"_waitFor",value:function(e){this._waiting.add(e.catch(function(){}))}},{key:"_wait",value:function(){var e=this,t=this._waiting;return this._waiting=new Set,0===t.size?Promise.resolve():Promise.all(t).then(function(){return e._wait()})}},{key:"wait",value:function(){return this._wait()}}],[{key:"getHeaders",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={Authorization:'WSSE profile="UsernameToken"',"X-WSSE":this.getWsseHeader(e,t),"X-API-MODE":"get"};return null!==i&&(r["X-API-STATE"]=i),null!==n&&(r["X-API-LOCALE"]=n),r}},{key:"getWsseHeader",value:function(e,t){var n=this.generateNonce(),i=this.now();return'UsernameToken Username="'+e+'", PasswordDigest="'+b()(n+i+t,1)+'", Nonce="'+n+'", Created="'+i+'"'}}]),e}(),ln=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"reset",value:function(){w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.endpoint=null,this.username=null,this.key=null,this.additionalLocales=null,this.state=A.PUBLISHED,this.binDownloadPolicy={ignoredContexts:[ee.TEXTURE_LOW,ee.TEXTURE_HELPER,ee.TEXTURE_MODEL],ignoredIds:[],ignoredFileType:[]}}},{key:"areSameAdditionalLocales",value:function(e){return e===this.additionalLocales||null!==e&&null!==this.additionalLocales&&this.constructor._areSameArrays(e,this.additionalLocales)}},{key:"areSameBinDownloadPolicy",value:function(e){return!!e&&(!!this.constructor._areSameArrays(e.ignoredContexts,this.binDownloadPolicy.ignoredContexts)&&!!this.constructor._areSameArrays(e.ignoredIds,this.binDownloadPolicy.ignoredIds)&&this.constructor._areSameArrays(e.ignoredFileType,this.binDownloadPolicy.ignoredFileType))}}],[{key:"_areSameArrays",value:function(e,t){if(e.length!==t.length)return!1;var n=!0;return e.forEach(function(e){n&&!t.includes(e)&&(n=!1)}),n}}]),t}(c.a),un=function(){function e(t){o(this,e),this.directory=t,this.runningUpdates=new Map,this.runningClean=null,this.logger=new l.c}return E(e,null,[{key:"getTranslatableRepositories",value:function(){return[Rt.getName(),vt.getName(),ve.getName(),bt.getName(),_t.getName(),Ze.getName(),Tt.getName(),at.getName(),Bt.getName()]}}]),E(e,[{key:"getLastPublishDate",value:function(e,t){var n=this;if(t.state!==A.PUBLISHED)return Promise.resolve(new Date);var i=C.formatApiEndpoint(t.endpoint),r=new ce;return r.url=i+"/published-version/last/"+e,r.addHeaders(cn.getHeaders(t.username,t.key)),ce.sendRequest(r).then(function(e){var t=e.data;return new Date(t.date)}).catch(function(e){if(!e.response)return null;if(e.response)switch(e.response.status){case 400:case 404:return new Date;case 503:return null}var t=ce.formatApiError(e,r),i=t.message,o=t.context;return n.logger.error(i,o),Promise.reject(new Error(i))})}},{key:"getCacheMetadata",value:function(e){return this._readFile(this._getSiteCacheDirector(e)+"/metadata.json").then(function(e){return JSON.parse(e)}).catch(function(){return null})}},{key:"clean",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return null!==this.runningClean?this.runningClean:t&&this.runningUpdates.size>0?Promise.all(Array.from(this.runningUpdates.values())).then(function(){return e.clean()}):(this.runningClean=Promise.all([this._getBinRegistry(),this._readdir(this._getBinCacheDirector())]).then(function(t){var n=_(t,2),i=n[0],r=n[1],o=[];Object.keys(i).forEach(function(e){i[e].forEach(function(e){o.includes(e)||o.push(e)})});var s=[];return r.forEach(function(t){o.includes(t)||s.push(e._rmrf(e._getBinCacheDirector()+"/"+t))}),Promise.all(s).then(function(){e.runningClean=null})}),this.runningClean)}},{key:"_cleanUnusedBins",value:function(e,t){var n=this;return this._getBinRegistry().then(function(i){return i[e]=t,n._writeFile(n.directory+"/binRegistry.json",JSON.stringify(i))}).then(function(){return n.clean(!1)})}},{key:"_getBinRegistry",value:function(){return this._readFile(this.directory+"/binRegistry.json").then(function(e){return JSON.parse(e)}).catch(function(){return{}})}},{key:"update",value:function(e,t){var n=this;if(this.runningUpdates.has(e))return this.runningUpdates.get(e);if(null!==this.runningClean)return this.runningClean.then(function(){return n.update(e,t)});var i=new ln(t),r=this.needsUpdate(e,i).then(function(t){var r=t.needsUpdate,o=t.hasCache;return t.hasInternetConnexion?r?(console.log("Will update"),n._doUpdate(e,i)):(console.log("Skip update as it's valid"),!0):o?(console.warn("No Internet connexion"),!1):Promise.reject(new Error("No Internet connexion and no cache"))});return this.runningUpdates.set(e,r),r.then(function(){n.runningUpdates.delete(e)}),r}},{key:"needsUpdate",value:function(e,t){var n=new ln(t);return Promise.all([this.getCacheMetadata(e),this.getLastPublishDate(e,n)]).then(function(e){var t=_(e,2),i=t[0],r=t[1],o=null!==i,s=null!==r,a=o?new Date(i.date):null;if(!s)return{needsUpdate:!o,lastPublishedDate:r,hasCache:o,hasInternetConnexion:s,lastCacheUpdateDate:a};var c=!1;return o?i.apiVersion!==C.getApiVersion()?c=!0:i.endpoint!==n.endpoint?c=!0:i.state!==n.state?c=!0:a<=r?c=!0:n.areSameAdditionalLocales(i.additionalLocales)&&n.areSameBinDownloadPolicy(i.binDownloadPolicy)||(c=!0):c=!0,{needsUpdate:c,lastPublishedDate:r,hasCache:o,hasInternetConnexion:s,lastCacheUpdateDate:a}})}},{key:"_getSiteCacheDirector",value:function(e){return this.directory+"/"+e}},{key:"_getBinCacheDirector",value:function(){return this.directory+"/bin"}},{key:"get",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new C(t);return this.getCacheMetadata(r.site).then(function(e){if(null===e)return Promise.reject(new Error("CacheManager: no cache"));if(e.apiVersion!==C.getApiVersion())return Promise.reject(new Error("CacheManager: cache was created from another api version, please update it"));if(e.endpoint!==r.endpoint)return Promise.reject(new Error("CacheManager: cache was created from another endpoint, please update it"));if(e.state!==r.state)return Promise.reject(new Error("CacheManager: cache was created from state, please update it"));var t=null===r.locale||r===e.defaultLocale;return t||e.availableLocales.includes(r.locale)?i?t:n.getLastPublishDate(r.site,r).then(function(n){return null===n||n>new Date(e.date)?Promise.reject(new Error("CacheManger: is outdated")):t}):Promise.reject(new Error("CacheManager: requested locale is not in the cache"))}).then(function(t){var i=null;i=t||!n.constructor.getTranslatableRepositories().includes(e)?n._getSiteCacheDirector(r.site)+"/"+e+".json":n._getSiteCacheDirector(r.site)+"/"+r.locale+"/"+e+".json";var o=null;return e===re.getName()&&(o=n._getBinRegistry()),Promise.all([n._readFile(i).then(function(e){return JSON.parse(e)}),o])}).then(function(t){var i=_(t,2),o=i[0],s=i[1];if(e===re.getName()){var a=s[r.site];o.forEach(function(e){a.includes(e.reference)&&(e.uri=n._getBinCacheDirector()+"/"+e.reference)})}return o})}},{key:"_doUpdate",value:function(e,t){var n=this,r=this._createEm(e,null,t),o=[],s=this._getSiteCacheDirector(e);return r.load().then(function(){var i,s=r.getRepository("Site").getCurrent();null===r.locale&&(r.locale=s.locale);var a=null;null===t.additionalLocales?(a=[],s.languages.forEach(function(e){e!==s.locale&&a.push(e)})):(i=t,a=i.additionalLocales);var c=[];return a.forEach(function(i){var r=n._createEm(e,i,t);o.push(r),n.constructor.getTranslatableRepositories().forEach(function(e){c.push(r.getRepository(e).load())})}),Promise.all(c)}).then(function(){return console.log("Cleaning"),n._rmrf(s)}).then(function(){console.log("Creating dirs");var e=[n._mkdirp(s),n._mkdirp(n._getBinCacheDirector())];return o.forEach(function(t){e.push(n._mkdirp(s+"/"+t.locale))}),console.log("Creating dir"),Promise.all(e)}).then(function(){var e,o={ignoredContexts:t.binDownloadPolicy.ignoredContexts,ignoredIds:[].concat(i(t.binDownloadPolicy.ignoredIds)),ignoredFileType:t.binDownloadPolicy.ignoredFileType},s=r.getRepository("MapFile").findBy({type:function(e){return[Ie.PATH,Ie.CONFIG,Ie.HELPER,Ie.IVE,Ie.LIGHT,Ie.OSG].includes(e)}}).map(function(e){return e.file.value});return(e=o.ignoredIds).push.apply(e,i(s)),n._downloadFiles(r,o)}).then(function(e){console.log("Saving");var t=[];return r.getRepositories().forEach(function(e){e.isLoaded()&&t.push(n._writeFile(s+"/"+e.constructor.getName()+".json",JSON.stringify(e.getAll())))}),o.forEach(function(e){e.getRepositories().forEach(function(i){i.isLoaded()&&t.push(n._writeFile(s+"/"+e.locale+"/"+i.constructor.getName()+".json",JSON.stringify(i.getAll())))})}),Promise.all(t).then(function(){return e})}).then(function(t){return n._cleanUnusedBins(e,t)}).then(function(){var e=r.getRepository("Site").getCurrent(),i={endpoint:t.endpoint,state:t.state,date:new Date,additionalLocales:t.additionalLocales,defaultLocale:e.default,availableLocales:Array.from(e.languages),binDownloadPolicy:t.binDownloadPolicy,apiVersion:C.getApiVersion()};return n._writeFile(s+"/metadata.json",JSON.stringify(i))})}},{key:"_downloadFiles",value:function(e,t){var n=this,i=[];if(e.getRepository("File").getAll().forEach(function(e){t.ignoredContexts.includes(e.context)||t.ignoredIds.includes(e.id)||t.ignoredFileType.includes(e.file_type)||i.push(e)}),0===i.length)return Promise.resolve([]);var r=[];i.forEach(function(e){r.includes(e.reference)||r.push(e.reference)});for(var o=[],s=0;s<10;s++)o.push(Promise.resolve());for(var a=0;a<i.length;a++)!function(e){var t=e%10;o[t]=o[t].then(function(){return n._downloadFile(i[e])})}(a);return Promise.all(o).then(function(){return r})}},{key:"_createEm",value:function(e,t,n){return new cn(new C({site:e,endpoint:n.endpoint,username:n.username,key:n.key,state:n.state,locale:t}))}},{key:"_downloadFile",value:function(e){return Promise.reject(new Error("Not implemented"))}},{key:"_exists",value:function(e){return Promise.reject(new Error("Not implemented"))}},{key:"_mkdirp",value:function(e){return Promise.reject(new Error("Not implemented"))}},{key:"_readFile",value:function(e){return Promise.reject(new Error("Not implemented"))}},{key:"_writeFile",value:function(e,t){return Promise.reject(new Error("Not implemented"))}},{key:"_rmrf",value:function(e){return Promise.reject(new Error("Not implemented"))}},{key:"_readdir",value:function(e){return Promise.reject(new Error("Not implemented"))}}]),e}();(function(e){function t(){throw o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"")),new Error("Not supported in browser")}a(t,e)})(un),function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//localhost:8080/adsum/cache";return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}a(t,e),E(t,[{key:"update",value:function(e,t){return Promise.reject(new Error("Not supported"))}},{key:"clean",value:function(e,t){return Promise.reject(new Error("Not supported"))}},{key:"_readFile",value:function(e){return f.a.get(e).then(function(e){return"object"==x(e.data)?JSON.stringify(e.data):e.data})}}])}(un)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t,n){"use strict";var i=n(5),r=n(163),o=n(165),s=n(166),a=n(167),c=n(77),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(168);e.exports=function(e){return new Promise(function(t,u){var h=e.data,d=e.headers;i.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",g=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||a(e.url)||(f=new window.XDomainRequest,p="onload",g=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var m=e.auth.username||"",v=e.auth.password||"";d.Authorization="Basic "+l(m+":"+v)}if(f.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[p]=function(){if(f&&(4===f.readyState||g)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,i=e.responseType&&"text"!==e.responseType?f.response:f.responseText,o={data:i,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:e,request:f};r(t,u,o),f=null}},f.onerror=function(){u(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){u(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var y=n(169),b=(e.withCredentials||a(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in f&&i.forEach(d,function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),u(e),f=null)}),void 0===h&&(h=null),f.send(h)})}},function(e,t,n){"use strict";var i=n(164);e.exports=function(e,t,n,r,o){var s=new Error(e);return i(s,t,n,r,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(10),s=n(9),a=n(186),c=n(39),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){r(this,e),this.projector=null,this.objectManager=null,this.options=null,this.awm=null,this.mergePathSectionObject=[],this.mergePathSections=null,this.objectsLoader=null,this.pathPattern=null}return l(e,[{key:"init",value:function(e,t){this.projector=e,this.objectManager=t}},{key:"initer",value:function(e){return this.awm=e,this.objectsLoader=new c.a(this.awm),this.options={patternSpace:1,patternSize:1},this.loadPathPattern()}},{key:"loadPathPattern",value:function(){var e=this;return new Promise(function(t,n){e.objectsLoader.createJSON3DObj("assets/3dModels/path_default.json").then(function(n){if(n instanceof o.Scene&&1===n.children.length){var i=new o.Group;i.add(n.children[0]),n=i}n.scale.multiplyScalar(e.projector.meterToAdsumDistance(e.options.patternSize)),n.traverse(function(e){"outline"===e.name&&e.position.set(.05,.68,-.33),e.updateMatrixWorld()}),e.pathPattern=n,t()})})}},{key:"buildMerged",value:function(e){this.pathSections=e;var t=[];this.pathSections.forEach(function(e){t=[].concat(i(t),i(e.nodes))});var n=this.pathSections[0],r=this.pathSections[this.pathSections.length-1],c=new a.a(n.from,n.ground,r.to,t);this.mergePathSections=c;for(var l=new o.Group,u=c.interpolate(this.projector.meterToAdsumDistance(this.options.patternSpace),this.projector),h=0;h<u.length-1;h++){var d=u[h].position,f=u[h+1].position,p=u[h].ground,g=this.pathPattern.clone();g.position.copy(d);var m=f.clone().sub(g.position),v=0;v=0===m.y?m.x>0?Math.PI/2:-Math.PI/2:Math.atan(m.x/m.y),m.y<0&&(v+=Math.PI),g.setRotationFromAxisAngle(new o.Vector3(-0,-0,-1),v),g.ground=p,l.add(g),l.visible=!1}var y=s.e._createFromPathSection(c,l,this.options.patternSpace);c.ground._addChild(y),y.update(),this.objectManager.pathSectionObjects.set(y.id,y),this.mergePathSectionObject=y}},{key:"build",value:function(e){for(var t=new o.Group,n=this.mergePathSectionObject._mesh.children,i=0;i<n.length;i++){var r=n[i];if(r.up.set(0,0,1),i<n.length-1){var a=n[i+1];r.lookAt(new o.Vector3(a.position.x,a.position.y,0))}else if(this.mergePathSectionObject.pathSection.to){var c=this.projector.utmToAdsum(this.mergePathSectionObject.pathSection.to.pathNode.utmPosition);r.lookAt(new o.Vector3(c.x,c.y,0))}}this.mergePathSectionObject._mesh.children.forEach(function(n,i){n.ground.id===e.ground.id&&t.add(n.clone())});var l=s.e._createFromPathSection(e,t,this.options.patternSpace);return e.ground._addChild(l),l.update(),this.objectManager.pathSectionObjects.set(l.id,l),l}}]),e}(),h=new u;t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(9),o=n(10),s=n(83),a=n(37),c=n(38),l=n(34),u=n(71),h=n(187),d=n(39),f=n(81),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(){function e(){i(this,e),this.awm=null,this.objectsLoader=null}return p(e,[{key:"init",value:function(){var e=this,t=a.a.config.device;return this.adsumLoader=new r.a({entityManager:s.a.entityManager,deviceId:t}),this.awm=new r.b({loader:this.adsumLoader,engine:{container:document.getElementById("adsum-web-map-container")},wayfinding:{pathBuilder:f.a}}),window.awm=this.awm,window.three=o,window.THREE=o,this.awm.init().then(function(){return c.a.init(e.awm),l.a.init(e.awm),h.a.init(e.awm),e.objectsLoader=new d.a(e.awm),u.a.init(e.awm)}).then(function(){console.log("AdsumWebMap is ready to start");var t=new o.TextureLoader;t.crossOrigin="";var n=t.load("assets/textures/background.png");return n.wrapS=o.RepeatWrapping,n.wrapT=o.RepeatWrapping,n.repeat.set(1,1),e.awm.sceneManager.scene.background=n,e.awm.start()})}},{key:"switchMode",value:function(e){}}]),e}(),m=new g;t.a=m},function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var s=t[r](o),a=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(a).then(function(e){i("next",e)},function(e){i("throw",e)});e(a)}return i("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(20),s=n.n(o),a=n(74),c=n(37),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){r(this,e),this.entityManager=null}return l(e,[{key:"init",value:function(){function e(){return t.apply(this,arguments)}var t=i(s.a.mark(function e(){var t,n,i,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c.a.config.api,n=t.endpoint,i=t.key,r=t.site,o=t.username,this.entityManager=new a.c({endpoint:n,site:r,username:o,key:i});case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),h=new u;t.a=h},function(e,t,n){"use strict";var i=n(85),r=n(191);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return r.a})},function(e,t,n){"use strict";var i=n(86),r=n.n(i);t.a=r()()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(2),c=i(a),l=n(3),u=i(l),h=n(27),d=n(13),f=n(28),p=i(f),g=n(87),m=function(){try{return window.history.state||{}}catch(e){return{}}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(g.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,g.supportsHistory)(),i=!(0,g.supportsPopStateOnHashChange)(),r=e.forceRefresh,a=void 0!==r&&r,l=e.getUserConfirmation,f=void 0===l?g.getConfirmation:l,v=e.keyLength,y=void 0===v?6:v,b=e.basename?(0,d.stripTrailingSlash)((0,d.addLeadingSlash)(e.basename)):"",w=function(e){var t=e||{},n=t.key,i=t.state,r=window.location,o=r.pathname,s=r.search,a=r.hash,l=o+s+a;return(0,c.default)(!b||(0,d.hasBasename)(l,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+l+'" to begin with "'+b+'".'),b&&(l=(0,d.stripBasename)(l,b)),(0,h.createLocation)(l,i,n)},_=function(){return Math.random().toString(36).substr(2,y)},x=(0,p.default)(),E=function(e){s(z,e),z.length=t.length,x.notifyListeners(z.location,z.action)},A=function(e){(0,g.isExtraneousPopstateEvent)(e)||M(w(e.state))},C=function(){M(w(m()))},S=!1,M=function(e){if(S)S=!1,E();else{x.confirmTransitionTo(e,"POP",f,function(t){t?E({action:"POP",location:e}):k(e)})}},k=function(e){var t=z.location,n=F.indexOf(t.key);-1===n&&(n=0);var i=F.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(S=!0,R(r))},T=w(m()),F=[T.key],O=function(e){return b+(0,d.createPath)(e)},P=function(e,i){(0,c.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==i),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,h.createLocation)(e,i,_(),z.location);x.confirmTransitionTo(r,"PUSH",f,function(e){if(e){var i=O(r),o=r.key,s=r.state;if(n)if(t.pushState({key:o,state:s},null,i),a)window.location.href=i;else{var l=F.indexOf(z.location.key),u=F.slice(0,-1===l?0:l+1);u.push(r.key),F=u,E({action:"PUSH",location:r})}else(0,c.default)(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=i}})},L=function(e,i){(0,c.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==i),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,h.createLocation)(e,i,_(),z.location);x.confirmTransitionTo(r,"REPLACE",f,function(e){if(e){var i=O(r),o=r.key,s=r.state;if(n)if(t.replaceState({key:o,state:s},null,i),a)window.location.replace(i);else{var l=F.indexOf(z.location.key);-1!==l&&(F[l]=r.key),E({action:"REPLACE",location:r})}else(0,c.default)(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(i)}})},R=function(e){t.go(e)},D=function(){return R(-1)},B=function(){return R(1)},I=0,N=function(e){I+=e,1===I?((0,g.addEventListener)(window,"popstate",A),i&&(0,g.addEventListener)(window,"hashchange",C)):0===I&&((0,g.removeEventListener)(window,"popstate",A),i&&(0,g.removeEventListener)(window,"hashchange",C))},j=!1,U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=x.setPrompt(e);return j||(N(1),j=!0),function(){return j&&(j=!1,N(-1)),t()}},$=function(e){var t=x.appendListener(e);return N(1),function(){N(-1),t()}},z={length:t.length,action:"POP",location:T,createHref:O,push:P,replace:L,go:R,goBack:D,goForward:B,block:U,listen:$};return z};t.default=v},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"===typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":f(t))&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=n.n(a),l=n(1),u=n.n(l),h=n(3),d=n.n(h),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},m=function(e){function t(){var n,i,s;r(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(c))),i.handleClick=function(e){if(i.props.onClick&&i.props.onClick(e),!e.defaultPrevented&&0===e.button&&!i.props.target&&!g(e)){e.preventDefault();var t=i.context.router.history,n=i.props,r=n.replace,o=n.to;r?t.replace(o):t.push(o)}},s=n,o(i,s)}return s(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=i(e,["replace","to","innerRef"]);d()(this.context.router,"You should not use <Link> outside a <Router>");var o=this.context.router.history.createHref("string"===typeof t?{pathname:t}:t);return c.a.createElement("a",p({},r,{onClick:this.handleClick,href:o,ref:n}))},t}(c.a.Component);m.propTypes={onClick:u.a.func,target:u.a.string,replace:u.a.bool,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired,innerRef:u.a.oneOfType([u.a.string,u.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired,createHref:u.a.func.isRequired}).isRequired}).isRequired},t.a=m},function(e,t,n){"use strict";var i=n(30);t.a=i.a},function(e,t,n){"use strict";var i=(n(210),n(33));n.d(t,"a",function(){return i})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){(function(e,n){function i(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function r(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function o(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function s(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function a(e,t){return e.has(t)}function c(e,t){return null==e?void 0:e[t]}function l(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function u(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function d(){this.__data__=Ct?Ct(null):{},this.size=0}function f(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function p(e){var t=this.__data__;if(Ct){var n=t[e];return n===be?void 0:n}return at.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Ct?void 0!==t[e]:at.call(t,e)}function m(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ct&&void 0===t?be:t,this}function v(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function y(){this.__data__=[],this.size=0}function b(e){var t=this.__data__,n=j(t,e);return!(n<0)&&(n==t.length-1?t.pop():gt.call(t,n,1),--this.size,!0)}function w(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]}function _(e){return j(this.__data__,e)>-1}function x(e,t){var n=this.__data__,i=j(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function A(){this.size=0,this.__data__={hash:new h,map:new(_t||v),string:new h}}function C(e){var t=J(this,e).delete(e);return this.size-=t?1:0,t}function S(e){return J(this,e).get(e)}function M(e){return J(this,e).has(e)}function k(e,t){var n=J(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function T(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new E;++t<n;)this.add(e[t])}function F(e){return this.__data__.set(e,be),this}function O(e){return this.__data__.has(e)}function P(e){var t=this.__data__=new v(e);this.size=t.size}function L(){this.__data__=new v,this.size=0}function R(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function D(e){return this.__data__.get(e)}function B(e){return this.__data__.has(e)}function I(e,t){var n=this.__data__;if(n instanceof v){var i=n.__data__;if(!_t||i.length<ye-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new E(i)}return n.set(e,t),this.size=n.size,this}function N(e,t){var n=Bt(e),i=!n&&Dt(e),r=!n&&!i&&It(e),o=!n&&!i&&!r&&Nt(e),a=n||i||r||o,c=a?s(e.length,String):[],l=c.length;for(var u in e)!t&&!at.call(e,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||te(u,l))||c.push(u);return c}function j(e,t){for(var n=e.length;n--;)if(ae(e[n][0],t))return n;return-1}function U(e,t,n){var i=t(e);return Bt(e)?i:r(i,n(e))}function $(e){return null==e?void 0===e?Ue:Le:mt&&mt in Object(e)?ee(e):oe(e)}function z(e){return fe(e)&&$(e)==Ee}function H(e,t,n,i,r){return e===t||(null==e||null==t||!fe(e)&&!fe(t)?e!==e&&t!==t:V(e,t,n,i,H,r))}function V(e,t,n,i,r,o){var s=Bt(e),a=Bt(t),c=s?Ae:Rt(e),l=a?Ae:Rt(t);c=c==Ee?Re:c,l=l==Ee?Re:l;var u=c==Re,h=l==Re,d=c==l;if(d&&It(e)){if(!It(t))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new P),s||Nt(e)?X(e,t,n,i,r,o):K(e,t,c,n,i,r,o);if(!(n&we)){var f=u&&at.call(e,"__wrapped__"),p=h&&at.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,m=p?t.value():t;return o||(o=new P),r(g,m,n,i,o)}}return!!d&&(o||(o=new P),Y(e,t,n,i,r,o))}function W(e){return!(!de(e)||ie(e))&&(ue(e)?ut:Ve).test(se(e))}function G(e){return fe(e)&&he(e.length)&&!!Ge[$(e)]}function q(e){if(!re(e))return bt(e);var t=[];for(var n in Object(e))at.call(e,n)&&"constructor"!=n&&t.push(n);return t}function X(e,t,n,i,r,s){var c=n&we,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var h=s.get(e);if(h&&s.get(t))return h==t;var d=-1,f=!0,p=n&_e?new T:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],m=t[d];if(i)var v=c?i(m,g,d,t,e,s):i(g,m,d,e,t,s);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!o(t,function(e,t){if(!a(p,t)&&(g===e||r(g,e,n,i,s)))return p.push(t)})){f=!1;break}}else if(g!==m&&!r(g,m,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function K(e,t,n,i,r,o,s){switch(n){case ze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $e:return!(e.byteLength!=t.byteLength||!o(new ft(e),new ft(t)));case Se:case Me:case Pe:return ae(+e,+t);case ke:return e.name==t.name&&e.message==t.message;case Be:case Ne:return e==t+"";case Oe:var a=l;case Ie:var c=i&we;if(a||(a=u),e.size!=t.size&&!c)return!1;var h=s.get(e);if(h)return h==t;i|=_e,s.set(e,t);var d=X(a(e),a(t),i,r,o,s);return s.delete(e),d;case je:if(Pt)return Pt.call(e)==Pt.call(t)}return!1}function Y(e,t,n,i,r,o){var s=n&we,a=Z(e),c=a.length;if(c!=Z(t).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in t:at.call(t,u)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var d=!0;o.set(e,t),o.set(t,e);for(var f=s;++l<c;){u=a[l];var p=e[u],g=t[u];if(i)var m=s?i(g,p,u,t,e,o):i(p,g,u,e,t,o);if(!(void 0===m?p===g||r(p,g,n,i,o):m)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var v=e.constructor,y=t.constructor;v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(e),o.delete(t),d}function Z(e){return U(e,pe,Lt)}function J(e,t){var n=e.__data__;return ne(t)?n["string"==typeof t?"string":"hash"]:n.map}function Q(e,t){var n=c(e,t);return W(n)?n:void 0}function ee(e){var t=at.call(e,mt),n=e[mt];try{e[mt]=void 0;var i=!0}catch(e){}var r=lt.call(e);return i&&(t?e[mt]=n:delete e[mt]),r}function te(e,t){return!!(t=null==t?xe:t)&&("number"==typeof e||We.test(e))&&e>-1&&e%1==0&&e<t}function ne(e){var t="undefined"===typeof e?"undefined":ve(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ie(e){return!!ct&&ct in e}function re(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||rt)}function oe(e){return lt.call(e)}function se(e){if(null!=e){try{return st.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ae(e,t){return e===t||e!==e&&t!==t}function ce(e){return null!=e&&he(e.length)&&!ue(e)}function le(e,t){return H(e,t)}function ue(e){if(!de(e))return!1;var t=$(e);return t==Te||t==Fe||t==Ce||t==De}function he(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=xe}function de(e){var t="undefined"===typeof e?"undefined":ve(e);return null!=e&&("object"==t||"function"==t)}function fe(e){return null!=e&&"object"==("undefined"===typeof e?"undefined":ve(e))}function pe(e){return ce(e)?N(e):q(e)}function ge(){return[]}function me(){return!1}var ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye=200,be="__lodash_hash_undefined__",we=1,_e=2,xe=9007199254740991,Ee="[object Arguments]",Ae="[object Array]",Ce="[object AsyncFunction]",Se="[object Boolean]",Me="[object Date]",ke="[object Error]",Te="[object Function]",Fe="[object GeneratorFunction]",Oe="[object Map]",Pe="[object Number]",Le="[object Null]",Re="[object Object]",De="[object Proxy]",Be="[object RegExp]",Ie="[object Set]",Ne="[object String]",je="[object Symbol]",Ue="[object Undefined]",$e="[object ArrayBuffer]",ze="[object DataView]",He=/[\\^$.*+?()[\]{}|]/g,Ve=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,Ge={};Ge["[object Float32Array]"]=Ge["[object Float64Array]"]=Ge["[object Int8Array]"]=Ge["[object Int16Array]"]=Ge["[object Int32Array]"]=Ge["[object Uint8Array]"]=Ge["[object Uint8ClampedArray]"]=Ge["[object Uint16Array]"]=Ge["[object Uint32Array]"]=!0,Ge[Ee]=Ge[Ae]=Ge[$e]=Ge[Se]=Ge[ze]=Ge[Me]=Ge[ke]=Ge[Te]=Ge[Oe]=Ge[Pe]=Ge[Re]=Ge[Be]=Ge[Ie]=Ge[Ne]=Ge["[object WeakMap]"]=!1;var qe="object"==("undefined"===typeof e?"undefined":ve(e))&&e&&e.Object===Object&&e,Xe="object"==("undefined"===typeof self?"undefined":ve(self))&&self&&self.Object===Object&&self,Ke=qe||Xe||Function("return this")(),Ye="object"==ve(t)&&t&&!t.nodeType&&t,Ze=Ye&&"object"==ve(n)&&n&&!n.nodeType&&n,Je=Ze&&Ze.exports===Ye,Qe=Je&&qe.process,et=function(){try{return Qe&&Qe.binding&&Qe.binding("util")}catch(e){}}(),tt=et&&et.isTypedArray,nt=Array.prototype,it=Function.prototype,rt=Object.prototype,ot=Ke["__core-js_shared__"],st=it.toString,at=rt.hasOwnProperty,ct=function(){var e=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lt=rt.toString,ut=RegExp("^"+st.call(at).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=Je?Ke.Buffer:void 0,dt=Ke.Symbol,ft=Ke.Uint8Array,pt=rt.propertyIsEnumerable,gt=nt.splice,mt=dt?dt.toStringTag:void 0,vt=Object.getOwnPropertySymbols,yt=ht?ht.isBuffer:void 0,bt=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),wt=Q(Ke,"DataView"),_t=Q(Ke,"Map"),xt=Q(Ke,"Promise"),Et=Q(Ke,"Set"),At=Q(Ke,"WeakMap"),Ct=Q(Object,"create"),St=se(wt),Mt=se(_t),kt=se(xt),Tt=se(Et),Ft=se(At),Ot=dt?dt.prototype:void 0,Pt=Ot?Ot.valueOf:void 0;h.prototype.clear=d,h.prototype.delete=f,h.prototype.get=p,h.prototype.has=g,h.prototype.set=m,v.prototype.clear=y,v.prototype.delete=b,v.prototype.get=w,v.prototype.has=_,v.prototype.set=x,E.prototype.clear=A,E.prototype.delete=C,E.prototype.get=S,E.prototype.has=M,E.prototype.set=k,T.prototype.add=T.prototype.push=F,T.prototype.has=O,P.prototype.clear=L,P.prototype.delete=R,P.prototype.get=D,P.prototype.has=B,P.prototype.set=I;var Lt=vt?function(e){return null==e?[]:(e=Object(e),i(vt(e),function(t){return pt.call(e,t)}))}:ge,Rt=$;(wt&&Rt(new wt(new ArrayBuffer(1)))!=ze||_t&&Rt(new _t)!=Oe||xt&&"[object Promise]"!=Rt(xt.resolve())||Et&&Rt(new Et)!=Ie||At&&"[object WeakMap]"!=Rt(new At))&&(Rt=function(e){var t=$(e),n=t==Re?e.constructor:void 0,i=n?se(n):"";if(i)switch(i){case St:return ze;case Mt:return Oe;case kt:return"[object Promise]";case Tt:return Ie;case Ft:return"[object WeakMap]"}return t});var Dt=z(function(){return arguments}())?z:function(e){return fe(e)&&at.call(e,"callee")&&!pt.call(e,"callee")},Bt=Array.isArray,It=yt||me,Nt=tt?function(e){return function(t){return e(t)}}(tt):G;n.exports=le}).call(t,n(7),n(80)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],r=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"],o=function(e,t){var n=null;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,r)},t)}};t.editorOptions=i,t.editorEvents=r,t.debounce=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":a(t))&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(41),h=i(u),d=n(0),f=i(d),p=n(1),g=i(p),m=n(92),v=i(m),y=n(224),b=i(y),w=n(93);n(225);var _=h.default.acequire("ace/range"),x=_.Range,E=h.default.acequire("ace/split"),A=E.Split,C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return w.editorEvents.forEach(function(e){n[e]=n[e].bind(n)}),n.debounce=w.debounce,n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,r=t.mode,o=t.focus,s=t.theme,a=t.fontSize,c=t.value,l=t.defaultValue,d=t.cursorStart,f=t.showGutter,p=t.wrapEnabled,g=t.showPrintMargin,m=t.scrollMargin,v=void 0===m?[0,0,0,0]:m,y=t.keyboardHandler,_=t.onLoad,x=t.commands,E=t.annotations,C=t.markers,S=t.splits;this.editor=h.default.edit(this.refEditor),i&&i(h.default);var M=Object.keys(this.props.editorProps),k=new A(this.editor.container,"ace/theme/"+s,S);this.editor.env.split=k,this.splitEditor=k.getEditor(0),this.split=k,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var T=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),k.forEach(function(t,n){for(var i=0;i<M.length;i++)t[M[i]]=e.props.editorProps[M[i]];var o=(0,b.default)(l,n),h=(0,b.default)(c,n,"");t.session.setUndoManager(new u.UndoManager),t.setTheme("ace/theme/"+s),t.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),t.getSession().setMode("ace/mode/"+r),t.setFontSize(a),t.renderer.setShowGutter(f),t.getSession().setUseWrapMode(p),t.setShowPrintMargin(g),t.on("focus",e.onFocus),t.on("blur",e.onBlur),t.on("input",e.onInput),t.on("copy",e.onCopy),t.on("paste",e.onPaste),t.on("change",e.onChange),t.getSession().selection.on("changeSelection",e.onSelectionChange),t.getSession().selection.on("changeCursor",e.onCursorChange),t.session.on("changeScrollTop",e.onScroll),t.setValue(void 0===o?h:o,d);var m=(0,b.default)(E,n,[]),_=(0,b.default)(C,n,[]);t.getSession().setAnnotations(m),_&&_.length>0&&e.handleMarkers(_,t);for(var A=0;A<w.editorOptions.length;A++){var S=w.editorOptions[A];T.hasOwnProperty(S)?t.setOption(S,e.props[S]):e.props[S]&&console.warn("ReaceAce: editor option "+S+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}e.handleOptions(e.props,t),Array.isArray(x)&&x.forEach(function(e){"string"==typeof e.exec?t.commands.bindKey(e.bindKey,e.exec):t.commands.addCommand(e)}),y&&t.setKeyboardHandler("ace/keyboard/"+y)}),n&&(this.refEditor.className+=" "+n),o&&this.splitEditor.focus();var F=this.editor.env.split;F.setOrientation("below"===this.props.orientation?F.BELOW:F.BESIDE),F.resize(!0),_&&_(F)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,i=this.editor.env.split;if(e.splits!==n.splits&&i.setSplits(e.splits),e.orientation!==n.orientation&&i.setOrientation("below"===e.orientation?i.BELOW:i.BESIDE),i.forEach(function(i,r){e.mode!==n.mode&&i.getSession().setMode("ace/mode/"+e.mode),e.keyboardHandler!==n.keyboardHandler&&(e.keyboardHandler?i.setKeyboardHandler("ace/keyboard/"+e.keyboardHandler):i.setKeyboardHandler(null)),e.fontSize!==n.fontSize&&i.setFontSize(e.fontSize),e.wrapEnabled!==n.wrapEnabled&&i.getSession().setUseWrapMode(e.wrapEnabled),e.showPrintMargin!==n.showPrintMargin&&i.setShowPrintMargin(e.showPrintMargin),e.showGutter!==n.showGutter&&i.renderer.setShowGutter(e.showGutter);for(var o=0;o<w.editorOptions.length;o++){var s=w.editorOptions[o];e[s]!==n[s]&&i.setOption(s,e[s])}(0,v.default)(e.setOptions,n.setOptions)||t.handleOptions(e,i);var a=(0,b.default)(e.value,r,"");if(i.getValue()!==a){t.silent=!0;var c=i.session.selection.toJSON();i.setValue(a,e.cursorStart),i.session.selection.fromJSON(c),t.silent=!1}var l=(0,b.default)(e.annotations,r,[]),u=(0,b.default)(n.annotations,r,[]);(0,v.default)(l,u)||i.getSession().setAnnotations(l);var h=(0,b.default)(e.markers,r,[]),d=(0,b.default)(n.markers,r,[]);!(0,v.default)(h,d)&&Array.isArray(h)&&t.handleMarkers(h,i)}),e.className!==n.className){var r=this.refEditor.className,o=r.trim().split(" ");n.className.trim().split(" ").forEach(function(e){var t=o.indexOf(e);o.splice(t,1)}),this.refEditor.className=" "+e.className+" "+o.join(" ")}e.theme!==n.theme&&i.setTheme("ace/theme/"+e.theme),e.focus&&!n.focus&&this.splitEditor.focus(),e.height===this.props.height&&e.width===this.props.width||this.editor.resize()}},{key:"componentWillUnmount",value:function(){this.editor.destroy(),this.editor=null}},{key:"onChange",value:function(e){if(this.props.onChange&&!this.silent){var t=[];this.editor.env.split.forEach(function(e){t.push(e.getValue())}),this.props.onChange(t,e)}}},{key:"onSelectionChange",value:function(e){if(this.props.onSelectionChange){var t=[];this.editor.env.split.forEach(function(e){t.push(e.getSelection())}),this.props.onSelectionChange(t,e)}}},{key:"onCursorChange",value:function(e){if(this.props.onCursorChange){var t=[];this.editor.env.split.forEach(function(e){t.push(e.getSelection())}),this.props.onCursorChange(t,e)}}},{key:"onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"onInput",value:function(e){this.props.onInput&&this.props.onInput(e)}},{key:"onBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e)}},{key:"onCopy",value:function(e){this.props.onCopy&&this.props.onCopy(e)}},{key:"onPaste",value:function(e){this.props.onPaste&&this.props.onPaste(e)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(e,t){for(var n=Object.keys(e.setOptions),i=0;i<n.length;i++)t.setOption(n[i],e.setOptions[n[i]])}},{key:"handleMarkers",value:function(e,t){var n=t.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);n=t.getSession().getMarkers(!1);for(var r in n)n.hasOwnProperty(r)&&t.getSession().removeMarker(n[r].id);e.forEach(function(e){var n=e.startRow,i=e.startCol,r=e.endRow,o=e.endCol,s=e.className,a=e.type,c=e.inFront,l=void 0!==c&&c,u=new x(n,i,r,o);t.getSession().addMarker(u,s,a,l)})}},{key:"updateRef",value:function(e){this.refEditor=e}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.width,i=e.height,r=e.style,o=c({width:n,height:i},r);return f.default.createElement("div",{ref:this.updateRef,id:t,style:o})}}]),t}(d.Component);t.default=C,C.propTypes={mode:g.default.string,splits:g.default.number,orientation:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.oneOfType([g.default.number,g.default.string]),showGutter:g.default.bool,onChange:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onInput:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.arrayOf(g.default.string),defaultValue:g.default.arrayOf(g.default.string),debounceChangePeriod:g.default.number,onLoad:g.default.func,onSelectionChange:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,editorProps:g.default.object,setOptions:g.default.object,style:g.default.object,scrollMargin:g.default.array,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array},C.defaultProps={name:"brace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}},function(e,t,n){n(96),e.exports=n(101)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(97).enable(),window.Promise=n(99)),n(100),Object.assign=n(21)},function(e,t,n){"use strict";function i(){l=!1,a._47=null,a._71=null}function r(e){function t(t){(e.allRejections||s(h[t].error,e.whitelist||c))&&(h[t].displayId=u++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},l&&i(),l=!0;var r=0,u=0,h={};a._47=function(e){2===e._83&&h[e._56]&&(h[e._56].logged?n(e._56):clearTimeout(h[e._56].timeout),delete h[e._56])},a._71=function(e,n){0===e._75&&(e._56=r++,h[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),s(n,c)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function s(e,t){return t.some(function(t){return e instanceof t})}var a=n(42),c=[ReferenceError,TypeError,RangeError],l=!1;t.disable=i,t.enable=r},function(e,t,n){"use strict";(function(t){function n(e){s.length||(o(),a=!0),s[s.length]=e}function i(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>l){for(var t=0,n=s.length-c;t<n;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,a=!1}function r(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var o,s=[],a=!1,c=0,l=1024,u="undefined"!==typeof t?t:self,h=u.MutationObserver||u.WebKitMutationObserver;o="function"===typeof h?function(e){var t=1,n=new h(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}(i):r(i),n.requestFlush=o,n.makeRequestCallFromTimer=r}).call(t,n(7))},function(e,t,n){"use strict";function i(e){var t=new o(o._44);return t._83=1,t._18=e,t}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(42);e.exports=o;var s=i(!0),a=i(!1),c=i(null),l=i(void 0),u=i(0),h=i("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return c;if(void 0===e)return l;if(!0===e)return s;if(!1===e)return a;if(0===e)return u;if(""===e)return h;if("object"===("undefined"===typeof e?"undefined":r(e))||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new o(t.bind(e))}catch(e){return new o(function(t,n){n(e)})}return i(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function i(a,c){if(c&&("object"===("undefined"===typeof c?"undefined":r(c))||"function"===typeof c)){if(c instanceof o&&c.then===o.prototype.then){for(;3===c._83;)c=c._18;return 1===c._83?i(a,c._18):(2===c._83&&n(c._18),void c.then(function(e){i(a,e)},n))}var l=c.then;if("function"===typeof l){return void new o(l.bind(c)).then(function(e){i(a,e)},n)}}t[a]=c,0===--s&&e(t)}if(0===t.length)return e([]);for(var s=t.length,a=0;a<t.length;a++)i(a,t[a])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function c(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function g(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},v.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,i){var r=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(103),s=n.n(o),a=n(24),c=n(15),l=n(146),u=n(65),h=n(84),d=n(83),f=n(192),p=n(231),g=(n.n(p),document.getElementById("root")),m=r.a.createElement(a.a,{store:u.a},r.a.createElement(c.a,{history:h.a},r.a.createElement("div",null,r.a.createElement(f.a,null))));g&&d.a.init().then(function(){return d.a.entityManager.load()}).then(function(){s.a.render(m,g),Object(l.a)()})},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);b(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function r(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||P}function o(){}function s(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||P}function a(e,t,n){var i=void 0,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)D.call(t,i)&&!B.hasOwnProperty(i)&&(r[i]=t[i]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];r.children=c}if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===r[i]&&(r[i]=a[i]);return{$$typeof:E,type:e,key:o,ref:s,props:r,_owner:R.current}}function c(e){return"object"===("undefined"===typeof e?"undefined":v(e))&&null!==e&&e.$$typeof===E}function l(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function u(e,t,n,i){if(N.length){var r=N.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function h(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>N.length&&N.push(e)}function d(e,t,n,r){var o="undefined"===typeof e?"undefined":v(e);"undefined"!==o&&"boolean"!==o||(e=null);var s=!1;if(null===e)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case E:case A:s=!0}}if(s)return n(r,e,""===t?"."+f(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){o=e[a];var c=t+f(o,a);s+=d(o,c,n,r)}else if(null===e||"undefined"===typeof e?c=null:(c=O&&e[O]||e["@@iterator"],c="function"===typeof c?c:null),"function"===typeof c)for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=t+f(o,a++),s+=d(o,c,n,r);else"object"===o&&(n=""+e,i("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function f(e,t){return"object"===("undefined"===typeof e?"undefined":v(e))&&null!==e&&null!=e.key?l(e.key):t.toString(36)}function p(e,t){e.func.call(e.context,t,e.count++)}function g(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?m(e,i,n,_.thatReturnsArgument):null!=e&&(c(e)&&(t=r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(I,"$&/")+"/")+n,e={$$typeof:E,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),i.push(e))}function m(e,t,n,i,r){var o="";null!=n&&(o=(""+n).replace(I,"$&/")+"/"),t=u(t,o,i,r),null==e||d(e,"",g,t),h(t)}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=n(21),b=n(22),w=n(43),_=n(23),x="function"===typeof Symbol&&Symbol.for,E=x?Symbol.for("react.element"):60103,A=x?Symbol.for("react.portal"):60106,C=x?Symbol.for("react.fragment"):60107,S=x?Symbol.for("react.strict_mode"):60108,M=x?Symbol.for("react.provider"):60109,k=x?Symbol.for("react.context"):60110,T=x?Symbol.for("react.async_mode"):60111,F=x?Symbol.for("react.forward_ref"):60112,O="function"===typeof Symbol&&Symbol.iterator,P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!==("undefined"===typeof e?"undefined":v(e))&&"function"!==typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=r.prototype;var L=s.prototype=new o;L.constructor=s,y(L,r.prototype),L.isPureReactComponent=!0;var R={current:null},D=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0},I=/\/+/g,N=[],j={Children:{map:function(e,t,n){if(null==e)return e;var i=[];return m(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;t=u(null,null,t,n),null==e||d(e,"",p,t),h(t)},count:function(e){return null==e?0:d(e,"",_.thatReturnsNull,null)},toArray:function(e){var t=[];return m(e,t,null,_.thatReturnsArgument),t},only:function(e){return c(e)||i("143"),e}},createRef:function(){return{current:null}},Component:r,PureComponent:s,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:k,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null},e.Provider={$$typeof:M,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:F,render:e}},Fragment:C,StrictMode:S,unstable_AsyncMode:T,createElement:a,cloneElement:function(e,t,n){(null===e||void 0===e)&&i("267",e);var r=void 0,o=y({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,c=R.current),void 0!==t.key&&(s=""+t.key);var l=void 0;e.type&&e.type.defaultProps&&(l=e.type.defaultProps);for(r in t)D.call(t,r)&&!B.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==l?l[r]:t[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){l=Array(r);for(var u=0;u<r;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:E,type:e.type,key:s,ref:a,props:o,_owner:c}},createFactory:function(e){var t=a.bind(null,e);return t.type=e,t},isValidElement:c,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:y}},U=Object.freeze({default:j}),$=U&&j||U;e.exports=$.default?$.default:$},function(e,t,n){"use strict";function i(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}i(),e.exports=n(104)},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);un(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function r(e,t,n,i,r,o,s,a,c){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}function o(){if(bn._hasRethrowError){var e=bn._rethrowError;throw bn._rethrowError=null,bn._hasRethrowError=!1,e}}function s(){if(wn)for(var e in _n){var t=_n[e],n=wn.indexOf(e);if(-1<n||i("96",e),!xn[n]){t.extractEvents||i("97",e),xn[n]=t,n=t.eventTypes;for(var r in n){var o=void 0,s=n[r],c=t,l=r;En.hasOwnProperty(l)&&i("99",l),En[l]=s;var u=s.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&a(u[o],c,l);o=!0}else s.registrationName?(a(s.registrationName,c,l),o=!0):o=!1;o||i("98",r,e)}}}}function a(e,t,n){An[e]&&i("100",e),An[e]=t,Cn[e]=t.eventTypes[n].dependencies}function c(e){wn&&i("101"),wn=Array.prototype.slice.call(e),s()}function l(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];_n.hasOwnProperty(t)&&_n[t]===r||(_n[t]&&i("102",t),_n[t]=r,n=!0)}n&&s()}function u(e,t,n,i){t=e.type||"unknown-event",e.currentTarget=Tn(i),bn.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function h(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function d(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function f(e,t){if(e){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)u(e,t,n[r],i[r]);else n&&u(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e){return f(e,!0)}function g(e){return f(e,!1)}function m(e,t){var n=e.stateNode;if(!n)return null;var r=Mn(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(e=e.type,r=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&i("231",t,"undefined"===typeof n?"undefined":ln(n)),n)}function v(e,t){null!==e&&(Fn=h(Fn,e)),e=Fn,Fn=null,e&&(t?d(e,p):d(e,g),Fn&&i("95"),bn.rethrowCaughtError())}function y(e,t,n,i){for(var r=null,o=0;o<xn.length;o++){var s=xn[o];s&&(s=s.extractEvents(e,t,n,i))&&(r=h(r,s))}v(r,!1)}function b(e){if(e[Rn])return e[Rn];for(;!e[Rn];){if(!e.parentNode)return null;e=e.parentNode}return e=e[Rn],5===e.tag||6===e.tag?e:null}function w(e){if(5===e.tag||6===e.tag)return e.stateNode;i("33")}function _(e){return e[Dn]||null}function x(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function E(e,t,n){for(var i=[];e;)i.push(e),e=x(e);for(e=i.length;0<e--;)t(i[e],"captured",n);for(e=0;e<i.length;e++)t(i[e],"bubbled",n)}function A(e,t,n){(t=m(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function C(e){e&&e.dispatchConfig.phasedRegistrationNames&&E(e._targetInst,A,e)}function S(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?x(t):null,E(t,A,e)}}function M(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=m(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function k(e){e&&e.dispatchConfig.registrationName&&M(e._targetInst,null,e)}function T(e){d(e,C)}function F(e,t,n,i){if(n&&i)e:{for(var r=n,o=i,s=0,a=r;a;a=x(a))s++;a=0;for(var c=o;c;c=x(c))a++;for(;0<s-a;)r=x(r),s--;for(;0<a-s;)o=x(o),a--;for(;s--;){if(r===o||r===o.alternate)break e;r=x(r),o=x(o)}r=null}else r=null;for(o=r,r=[];n&&n!==o&&(null===(s=n.alternate)||s!==o);)r.push(n),n=x(n);for(n=[];i&&i!==o&&(null===(s=i.alternate)||s!==o);)n.push(i),i=x(i);for(i=0;i<r.length;i++)M(r[i],"bubbled",e);for(e=n.length;0<e--;)M(n[e],"captured",t)}function O(){return!Nn&&dn.canUseDOM&&(Nn="textContent"in document.documentElement?"textContent":"innerText"),Nn}function P(){if(jn._fallbackText)return jn._fallbackText;var e,t,n=jn._startText,i=n.length,r=L(),o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return jn._fallbackText=r.slice(e,1<t?1-t:void 0),jn._fallbackText}function L(){return"value"in jn._root?jn._root.value:jn._root[O()]}function R(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var r in e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?pn.thatReturnsTrue:pn.thatReturnsFalse,this.isPropagationStopped=pn.thatReturnsFalse,this}function D(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function B(e){e instanceof this||i("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function I(e){e.eventPool=[],e.getPooled=D,e.release=B}function N(e,t){switch(e){case"topKeyUp":return-1!==Vn.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function j(e){return e=e.detail,"object"===("undefined"===typeof e?"undefined":ln(e))&&"data"in e?e.data:null}function U(e,t){switch(e){case"topCompositionEnd":return j(t);case"topKeyPress":return 32!==t.which?null:(Zn=!0,Kn);case"topTextInput":return e=t.data,e===Kn&&Zn?null:e;default:return null}}function $(e,t){if(Jn)return"topCompositionEnd"===e||!Wn&&N(e,t)?(e=P(),jn._root=null,jn._startText=null,jn._fallbackText=null,Jn=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Xn?null:t.data;default:return null}}function z(e){if(e=kn(e)){ei&&"function"===typeof ei.restoreControlledState||i("194");var t=Mn(e.stateNode);ei.restoreControlledState(e.stateNode,e.type,t)}}function H(e){ni?ii?ii.push(e):ii=[e]:ni=e}function V(){return null!==ni||null!==ii}function W(){if(ni){var e=ni,t=ii;if(ii=ni=null,z(e),t)for(e=0;e<t.length;e++)z(t[e])}}function G(e,t){return e(t)}function q(e,t,n){return e(t,n)}function X(){}function K(e,t){if(oi)return e(t);oi=!0;try{return G(e,t)}finally{oi=!1,V()&&(X(),W())}}function Y(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!si[e.type]:"textarea"===t}function Z(e){return e=e.target||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function J(e,t){return!(!dn.canUseDOM||t&&!("addEventListener"in document))&&(e="on"+e,t=e in document,t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t)}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ee(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){i=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function te(e){e._valueTracker||(e._valueTracker=ee(e))}function ne(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function ie(e){return null===e||"undefined"===typeof e?null:(e=bi&&e[bi]||e["@@iterator"],"function"===typeof e?e:null)}function re(e){if("function"===typeof(e=e.type))return e.displayName||e.name;if("string"===typeof e)return e;switch(e){case fi:return"ReactFragment";case di:return"ReactPortal";case ui:return"ReactCall";case hi:return"ReactReturn"}if("object"===("undefined"===typeof e?"undefined":ln(e))&&null!==e)switch(e.$$typeof){case yi:return e=e.render.displayName||e.render.name||"",""!==e?"ForwardRef("+e+")":"ForwardRef"}return null}function oe(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,i=e._debugSource,r=re(e),o=null;n&&(o=re(n)),n=i,r="\n    in "+(r||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break e;default:r=""}t+=r,e=e.return}while(e);return t}function se(e){return!!xi.hasOwnProperty(e)||!_i.hasOwnProperty(e)&&(wi.test(e)?xi[e]=!0:(_i[e]=!0,!1))}function ae(e,t,n,i){if(null!==n&&0===n.type)return!1;switch("undefined"===typeof t?"undefined":ln(t)){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ce(e,t,n,i){if(null===t||"undefined"===typeof t||ae(e,t,n,i))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function le(e,t,n,i,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t}function ue(e){return e[1].toUpperCase()}function he(e,t,n,i){var r=Ei.hasOwnProperty(t)?Ei[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ce(t,n,r,i)&&(n=null),i||null===r?se(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(r=r.type,n=3===r||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}function de(e,t){var n=t.checked;return fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function fe(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function pe(e,t){null!=(t=t.checked)&&he(e,"checked",t,!1)}function ge(e,t){pe(e,t);var n=ye(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?ve(e,t.type,n):t.hasOwnProperty("defaultValue")&&ve(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function me(e,t){(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===e.value&&(e.value=""+e._wrapperState.initialValue),e.defaultValue=""+e._wrapperState.initialValue),t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function ve(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ye(e){switch("undefined"===typeof e?"undefined":ln(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e,t,n){return e=R.getPooled(Ci.change,e,t,n),e.type="change",H(n),T(e),e}function we(e){v(e,!1)}function _e(e){if(ne(w(e)))return e}function xe(e,t){if("topChange"===e)return t}function Ee(){Si&&(Si.detachEvent("onpropertychange",Ae),Mi=Si=null)}function Ae(e){"value"===e.propertyName&&_e(Mi)&&(e=be(Mi,e,Z(e)),K(we,e))}function Ce(e,t,n){"topFocus"===e?(Ee(),Si=t,Mi=n,Si.attachEvent("onpropertychange",Ae)):"topBlur"===e&&Ee()}function Se(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return _e(Mi)}function Me(e,t){if("topClick"===e)return _e(t)}function ke(e,t){if("topInput"===e||"topChange"===e)return _e(t)}function Te(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Oi[e])&&!!t[e]}function Fe(){return Te}function Oe(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Pe(e){return!!(e=e._reactInternalFiber)&&2===Oe(e)}function Le(e){2!==Oe(e)&&i("188")}function Re(e){var t=e.alternate;if(!t)return t=Oe(e),3===t&&i("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,s=o?o.alternate:null;if(!o||!s)break;if(o.child===s.child){for(var a=o.child;a;){if(a===n)return Le(o),e;if(a===r)return Le(o),t;a=a.sibling}i("188")}if(n.return!==r.return)n=o,r=s;else{a=!1;for(var c=o.child;c;){if(c===n){a=!0,n=o,r=s;break}if(c===r){a=!0,r=o,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=o;break}if(c===r){a=!0,r=s,n=o;break}c=c.sibling}a||i("189")}}n.alternate!==r&&i("190")}return 3!==n.tag&&i("188"),n.stateNode.current===n?e:t}function De(e){if(!(e=Re(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Be(e){if(!(e=Re(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ie(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ne(e,t){var n=e[0].toUpperCase()+e.slice(1),i="on"+n;n="top"+n,t={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:t},Wi[e]=t,Gi[n]=t}function je(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=b(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],y(e.topLevelType,t,e.nativeEvent,Z(e.nativeEvent))}function Ue(e){Yi=!!e}function $e(e,t,n){if(!n)return null;e=(Xi(e)?He:Ve).bind(null,e),n.addEventListener(t,e,!1)}function ze(e,t,n){if(!n)return null;e=(Xi(e)?He:Ve).bind(null,e),n.addEventListener(t,e,!0)}function He(e,t){q(Ve,e,t)}function Ve(e,t){if(Yi){var n=Z(t);if(n=b(n),null!==n&&"number"===typeof n.tag&&2!==Oe(n)&&(n=null),Ki.length){var i=Ki.pop();i.topLevelType=e,i.nativeEvent=t,i.targetInst=n,e=i}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{K(je,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Ki.length&&Ki.push(e)}}}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function Ge(e){if(Qi[e])return Qi[e];if(!Ji[e])return e;var t,n=Ji[e];for(t in n)if(n.hasOwnProperty(t)&&t in er)return Qi[e]=n[t];return e}function qe(e){return Object.prototype.hasOwnProperty.call(e,or)||(e[or]=rr++,ir[e[or]]={}),ir[e[or]]}function Xe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,t){var n=Xe(e);e=0;for(var i;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xe(n)}}function Ye(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function Ze(e,t){if(hr||null==cr||cr!==gn())return null;var n=cr;return"selectionStart"in n&&Ye(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,ur&&mn(ur,n)?null:(ur=n,e=R.getPooled(ar.select,lr,e,t),e.type="select",e.target=cr,T(e),e)}function Je(e,t,n,i){this.tag=e,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Qe(e,t,n){var i=e.alternate;return null===i?(i=new Je(e.tag,t,e.key,e.mode),i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.expirationTime=n,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function et(e,t,n){var r=e.type,o=e.key;e=e.props;var s=void 0;if("function"===typeof r)s=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"===typeof r)s=5;else switch(r){case fi:return tt(e.children,t,n,o);case vi:s=11,t|=3;break;case pi:s=11,t|=2;break;case ui:s=7;break;case hi:s=9;break;default:if("object"===("undefined"===typeof r?"undefined":ln(r))&&null!==r)switch(r.$$typeof){case gi:s=13;break;case mi:s=12;break;case yi:s=14;break;default:if("number"===typeof r.tag)return t=r,t.pendingProps=e,t.expirationTime=n,t;i("130",null==r?r:"undefined"===typeof r?"undefined":ln(r),"")}else i("130",null==r?r:"undefined"===typeof r?"undefined":ln(r),"")}return t=new Je(s,e,o,t),t.type=r,t.expirationTime=n,t}function tt(e,t,n,i){return e=new Je(10,e,i,t),e.expirationTime=n,e}function nt(e,t,n){return e=new Je(6,e,null,t),e.expirationTime=n,e}function it(e,t,n){return t=new Je(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rt(e){return function(t){try{return e(t)}catch(e){}}}function ot(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);fr=rt(function(e){return t.onCommitFiberRoot(n,e)}),pr=rt(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function st(e){"function"===typeof fr&&fr(e)}function at(e){"function"===typeof pr&&pr(e)}function ct(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function lt(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function ut(e){gr=mr=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=ct(null)),null!==t?null===(e=t.updateQueue)&&(e=t.updateQueue=ct(null)):e=null,gr=n,mr=e!==n?e:null}function ht(e,t){ut(e),e=gr;var n=mr;null===n?lt(e,t):null===e.last||null===n.last?(lt(e,t),lt(n,t)):(lt(e,t),n.last=t)}function dt(e,t,n,i){return e=e.partialState,"function"===typeof e?e.call(t,n,i):e}function ft(e,t,n,i,r,o){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var s=!0,a=n.first,c=!1;null!==a;){var l=a.expirationTime;if(l>o){var u=n.expirationTime;(0===u||u>l)&&(n.expirationTime=l),c||(c=!0,n.baseState=e)}else c||(n.first=a.next,null===n.first&&(n.last=null)),a.isReplace?(e=dt(a,i,e,r),s=!0):(l=dt(a,i,e,r))&&(e=s?fn({},e,l):fn(e,l),s=!1),a.isForced&&(n.hasForceUpdate=!0),null!==a.callback&&(l=n.callbackList,null===l&&(l=n.callbackList=[]),l.push(a)),null!==a.capturedValue&&(l=n.capturedValues,null===l?n.capturedValues=[a.capturedValue]:l.push(a.capturedValue));a=a.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),c||(n.baseState=e),e}function pt(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var r=n[e],o=r.callback;r.callback=null,"function"!==typeof o&&i("191",o),o.call(t)}}function gt(e,t,n,i,r){function o(e,t,n,i,r,o){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var s=e.stateNode;return e=e.type,"function"===typeof s.shouldComponentUpdate?s.shouldComponentUpdate(n,r,o):!e.prototype||!e.prototype.isPureReactComponent||(!mn(t,n)||!mn(i,r))}function s(e,t){t.updater=p,e.stateNode=t,t._reactInternalFiber=e}function a(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&p.enqueueReplaceState(t,t.state,null)}function c(e,t,n,i){if(e=e.type,"function"===typeof e.getDerivedStateFromProps)return e.getDerivedStateFromProps.call(null,n,i)}var l=e.cacheContext,u=e.getMaskedContext,h=e.getUnmaskedContext,d=e.isContextConsumer,f=e.hasContextChanged,p={isMounted:Pe,enqueueSetState:function(e,i,r){e=e._reactInternalFiber,r=void 0===r?null:r;var o=n(e);ht(e,{expirationTime:o,partialState:i,callback:r,isReplace:!1,isForced:!1,capturedValue:null,next:null}),t(e,o)},enqueueReplaceState:function(e,i,r){e=e._reactInternalFiber,r=void 0===r?null:r;var o=n(e);ht(e,{expirationTime:o,partialState:i,callback:r,isReplace:!0,isForced:!1,capturedValue:null,next:null}),t(e,o)},enqueueForceUpdate:function(e,i){e=e._reactInternalFiber,i=void 0===i?null:i;var r=n(e);ht(e,{expirationTime:r,partialState:null,callback:i,isReplace:!1,isForced:!0,capturedValue:null,next:null}),t(e,r)}};return{adoptClassInstance:s,callGetDerivedStateFromProps:c,constructClassInstance:function(e,t){var n=e.type,i=h(e),r=d(e),o=r?u(e,i):yn;n=new n(t,o);var a=null!==n.state&&void 0!==n.state?n.state:null;return s(e,n),e.memoizedState=a,t=c(e,n,t,a),null!==t&&void 0!==t&&(e.memoizedState=fn({},e.memoizedState,t)),r&&l(e,i,o),n},mountClassInstance:function(e,t){var n=e.type,i=e.alternate,r=e.stateNode,o=e.pendingProps,s=h(e);r.props=o,r.state=e.memoizedState,r.refs=yn,r.context=u(e,s),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(n=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&p.enqueueReplaceState(r,r.state,null),null!==(n=e.updateQueue)&&(r.state=ft(i,e,n,r,o,t))),"function"===typeof r.componentDidMount&&(e.effectTag|=4)},resumeMountClassInstance:function(e,t){var n=e.type,s=e.stateNode;s.props=e.memoizedProps,s.state=e.memoizedState;var l=e.memoizedProps,d=e.pendingProps,p=s.context,g=h(e);g=u(e,g),(n="function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(l!==d||p!==g)&&a(e,s,d,g),p=e.memoizedState,t=null!==e.updateQueue?ft(null,e,e.updateQueue,s,d,t):p;var m=void 0;if(l!==d&&(m=c(e,s,d,t)),null!==m&&void 0!==m){t=null===t||void 0===t?m:fn({},t,m);var v=e.updateQueue;null!==v&&(v.baseState=fn({},v.baseState,m))}return l!==d||p!==t||f()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((l=o(e,l,d,p,t,g))?(n||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.effectTag|=4)):("function"===typeof s.componentDidMount&&(e.effectTag|=4),i(e,d),r(e,t)),s.props=d,s.state=t,s.context=g,l):("function"===typeof s.componentDidMount&&(e.effectTag|=4),!1)},updateClassInstance:function(e,t,n){var s=t.type,l=t.stateNode;l.props=t.memoizedProps,l.state=t.memoizedState;var d=t.memoizedProps,p=t.pendingProps,g=l.context,m=h(t);m=u(t,m),(s="function"===typeof s.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(d!==p||g!==m)&&a(t,l,p,m),g=t.memoizedState,n=null!==t.updateQueue?ft(e,t,t.updateQueue,l,p,n):g;var v=void 0;if(d!==p&&(v=c(t,l,p,n)),null!==v&&void 0!==v){n=null===n||void 0===n?v:fn({},n,v);var y=t.updateQueue;null!==y&&(y.baseState=fn({},y.baseState,v))}return d!==p||g!==n||f()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((v=o(t,d,p,g,n,m))?(s||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(p,n,m),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(p,n,m)),"function"===typeof l.componentDidUpdate&&(t.effectTag|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.effectTag|=2048)):("function"!==typeof l.componentDidUpdate||d===e.memoizedProps&&g===e.memoizedState||(t.effectTag|=4),"function"!==typeof l.getSnapshotBeforeUpdate||d===e.memoizedProps&&g===e.memoizedState||(t.effectTag|=2048),i(t,p),r(t,n)),l.props=p,l.state=n,l.context=m,v):("function"!==typeof l.componentDidUpdate||d===e.memoizedProps&&g===e.memoizedState||(t.effectTag|=4),"function"!==typeof l.getSnapshotBeforeUpdate||d===e.memoizedProps&&g===e.memoizedState||(t.effectTag|=2048),!1)}}}function mt(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==("undefined"===typeof e?"undefined":ln(e))){if(n._owner){n=n._owner;var r=void 0;n&&(2!==n.tag&&i("110"),r=n.stateNode),r||i("147",e);var o=""+e;return null!==t&&null!==t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs===yn?r.refs={}:r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}"string"!==typeof e&&i("148"),n._owner||i("254",e)}return e}function vt(e,t){"textarea"!==e.type&&i("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function yt(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=Qe(e,t,n),e.index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index,i<n?(t.effectTag=2,n):i):(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,i){return null===t||6!==t.tag?(t=nt(n,e.mode,i),t.return=e,t):(t=o(t,n,i),t.return=e,t)}function l(e,t,n,i){return null!==t&&t.type===n.type?(i=o(t,n.props,i),i.ref=mt(e,t,n),i.return=e,i):(i=et(n,e.mode,i),i.ref=mt(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=it(n,e.mode,i),t.return=e,t):(t=o(t,n.children||[],i),t.return=e,t)}function h(e,t,n,i,r){return null===t||10!==t.tag?(t=tt(n,e.mode,i,r),t.return=e,t):(t=o(t,n,i),t.return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return t=nt(""+t,e.mode,n),t.return=e,t;if("object"===("undefined"===typeof t?"undefined":ln(t))&&null!==t){switch(t.$$typeof){case li:return n=et(t,e.mode,n),n.ref=mt(e,null,t),n.return=e,n;case di:return t=it(t,e.mode,n),t.return=e,t}if(vr(t)||ie(t))return t=tt(t,e.mode,n,null),t.return=e,t;vt(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:c(e,t,""+n,i);if("object"===("undefined"===typeof n?"undefined":ln(n))&&null!==n){switch(n.$$typeof){case li:return n.key===r?n.type===fi?h(e,t,n.props.children,i,r):l(e,t,n,i):null;case di:return n.key===r?u(e,t,n,i):null}if(vr(n)||ie(n))return null!==r?null:h(e,t,n,i,null);vt(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return e=e.get(n)||null,c(t,e,""+i,r);if("object"===("undefined"===typeof i?"undefined":ln(i))&&null!==i){switch(i.$$typeof){case li:return e=e.get(null===i.key?n:i.key)||null,i.type===fi?h(t,e,i.props.children,r,i.key):l(t,e,i,r);case di:return e=e.get(null===i.key?n:i.key)||null,u(t,e,i,r)}if(vr(i)||ie(i))return e=e.get(n)||null,h(t,e,i,r,null);vt(t,i)}return null}function g(i,o,a,c){for(var l=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],c);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,g),null===u?l=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),l;if(null===h){for(;g<a.length;g++)(h=d(i,a[g],c))&&(o=s(h,o,g),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);g<a.length;g++)(m=p(h,i,g,a[g],c))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?l=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),l}function m(o,a,c,l){var u=ie(c);"function"!==typeof u&&i("150"),null==(c=u.call(c))&&i("151");for(var h=u=null,g=a,m=a=0,v=null,y=c.next();null!==g&&!y.done;m++,y=c.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(o,g,y.value,l);if(null===b){g||(g=v);break}e&&g&&null===b.alternate&&t(o,g),a=s(b,a,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(o,g),u;if(null===g){for(;!y.done;m++,y=c.next())null!==(y=d(o,y.value,l))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return u}for(g=r(o,g);!y.done;m++,y=c.next())null!==(y=p(g,o,m,y.value,l))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach(function(e){return t(o,e)}),u}return function(e,r,s,c){"object"===("undefined"===typeof s?"undefined":ln(s))&&null!==s&&s.type===fi&&null===s.key&&(s=s.props.children);var l="object"===("undefined"===typeof s?"undefined":ln(s))&&null!==s;if(l)switch(s.$$typeof){case li:e:{var u=s.key;for(l=r;null!==l;){if(l.key===u){if(10===l.tag?s.type===fi:l.type===s.type){n(e,l.sibling),r=o(l,s.type===fi?s.props.children:s.props,c),r.ref=mt(e,l,s),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}s.type===fi?(r=tt(s.props.children,e.mode,c,s.key),r.return=e,e=r):(c=et(s,e.mode,c),c.ref=mt(e,r,s),c.return=e,e=c)}return a(e);case di:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),r=o(r,s.children||[],c),r.return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}r=it(s,e.mode,c),r.return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),r=o(r,s,c),r.return=e,e=r):(n(e,r),r=nt(s,e.mode,c),r.return=e,e=r),a(e);if(vr(s))return g(e,r,s,c);if(ie(s))return m(e,r,s,c);if(l&&vt(e,s),"undefined"===typeof s)switch(e.tag){case 2:case 1:c=e.type,i("152",c.displayName||c.name||"Component")}return n(e,r)}}function bt(e,t,n,r,o,s,a){function c(e,t,n){l(e,t,n,t.expirationTime)}function l(e,t,n,i){t.child=null===e?br(t,null,n,i):yr(t,e.child,n,i)}function u(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function h(e,t,n,i,r,o){if(u(e,t),!n&&!r)return i&&S(t,!1),g(e,t);n=t.stateNode,ai.current=t;var s=r?null:n.render();return t.effectTag|=1,r&&(l(e,t,null,o),t.child=null),l(e,t,s,o),t.memoizedState=n.state,t.memoizedProps=n.props,i&&S(t,!0),t.child}function d(e){var t=e.stateNode;t.pendingContext?C(e,t.pendingContext,t.pendingContext!==t.context):t.context&&C(e,t.context,!1),b(e,t.containerInfo)}function f(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){switch(r.tag){case 12:var o=0|r.stateNode;if(r.type===t&&0!==(o&n)){for(o=r;null!==o;){var s=o.alternate;if(0===o.expirationTime||o.expirationTime>i)o.expirationTime=i,null!==s&&(0===s.expirationTime||s.expirationTime>i)&&(s.expirationTime=i);else{if(null===s||!(0===s.expirationTime||s.expirationTime>i))break;s.expirationTime=i}o=o.return}o=null}else o=r.child;break;case 13:o=r.type===e.type?null:r.child;break;default:o=r.child}if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){o=r;break}o=o.return}r=o}}function p(e,t,n){var i=t.type._context,r=t.pendingProps,o=t.memoizedProps;if(!E()&&o===r)return t.stateNode=0,w(t),g(e,t);var s=r.value;if(t.memoizedProps=r,null===o)s=1073741823;else if(o.value===r.value){if(o.children===r.children)return t.stateNode=0,w(t),g(e,t);s=0}else{var a=o.value;if(a===s&&(0!==a||1/a===1/s)||a!==a&&s!==s){if(o.children===r.children)return t.stateNode=0,w(t),g(e,t);s=0}else if(s="function"===typeof i._calculateChangedBits?i._calculateChangedBits(a,s):1073741823,0===(s|=0)){if(o.children===r.children)return t.stateNode=0,w(t),g(e,t)}else f(t,i,s,n)}return t.stateNode=s,w(t),c(e,t,r.children),t.child}function g(e,t){if(null!==e&&t.child!==e.child&&i("153"),null!==t.child){e=t.child;var n=Qe(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Qe(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}var m=e.shouldSetTextContent,v=e.shouldDeprioritizeSubtree,y=t.pushHostContext,b=t.pushHostContainer,w=r.pushProvider,_=n.getMaskedContext,x=n.getUnmaskedContext,E=n.hasContextChanged,A=n.pushContextProvider,C=n.pushTopLevelContextObject,S=n.invalidateContextProvider,M=o.enterHydrationState,k=o.resetHydrationState,T=o.tryToClaimNextHydratableInstance;e=gt(n,s,a,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var F=e.adoptClassInstance,O=e.callGetDerivedStateFromProps,P=e.constructClassInstance,L=e.mountClassInstance,R=e.resumeMountClassInstance,D=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:d(t);break;case 2:A(t);break;case 4:b(t,t.stateNode.containerInfo);break;case 13:w(t)}return null}switch(t.tag){case 0:null!==e&&i("155");var r=t.type,o=t.pendingProps,s=x(t);return s=_(t,s),r=r(o,s),t.effectTag|=1,"object"===("undefined"===typeof r?"undefined":ln(r))&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(s=t.type,t.tag=2,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"===typeof s.getDerivedStateFromProps&&null!==(o=O(t,r,o,t.memoizedState))&&void 0!==o&&(t.memoizedState=fn({},t.memoizedState,o)),o=A(t),F(t,r),L(t,n),e=h(e,t,!0,o,!1,n)):(t.tag=1,c(e,t,r),t.memoizedProps=o,e=t.child),e;case 1:return o=t.type,n=t.pendingProps,E()||t.memoizedProps!==n?(r=x(t),r=_(t,r),o=o(n,r),t.effectTag|=1,c(e,t,o),t.memoizedProps=n,e=t.child):e=g(e,t),e;case 2:o=A(t),null===e?null===t.stateNode?(P(t,t.pendingProps),L(t,n),r=!0):r=R(t,n):r=D(e,t,n),s=!1;var a=t.updateQueue;return null!==a&&null!==a.capturedValues&&(s=r=!0),h(e,t,r,o,s,n);case 3:e:if(d(t),null!==(r=t.updateQueue)){if(s=t.memoizedState,o=ft(e,t,r,null,null,n),t.memoizedState=o,null!==(r=t.updateQueue)&&null!==r.capturedValues)r=null;else{if(s===o){k(),e=g(e,t);break e}r=o.element}s=t.stateNode,(null===e||null===e.child)&&s.hydrate&&M(t)?(t.effectTag|=2,t.child=br(t,null,r,n)):(k(),c(e,t,r)),t.memoizedState=o,e=t.child}else k(),e=g(e,t);return e;case 5:return y(t),null===e&&T(t),o=t.type,a=t.memoizedProps,r=t.pendingProps,s=null!==e?e.memoizedProps:null,E()||a!==r||((a=1&t.mode&&v(o,r))&&(t.expirationTime=1073741823),a&&1073741823===n)?(a=r.children,m(o,r)?a=null:s&&m(o,s)&&(t.effectTag|=16),u(e,t),1073741823!==n&&1&t.mode&&v(o,r)?(t.expirationTime=1073741823,t.memoizedProps=r,e=null):(c(e,t,a),t.memoizedProps=r,e=t.child)):e=g(e,t),e;case 6:return null===e&&T(t),t.memoizedProps=t.pendingProps,null;case 8:t.tag=7;case 7:return o=t.pendingProps,E()||t.memoizedProps!==o||(o=t.memoizedProps),r=o.children,t.stateNode=null===e?br(t,t.stateNode,r,n):yr(t,e.stateNode,r,n),t.memoizedProps=o,t.stateNode;case 9:return null;case 4:return b(t,t.stateNode.containerInfo),o=t.pendingProps,E()||t.memoizedProps!==o?(null===e?t.child=yr(t,null,o,n):c(e,t,o),t.memoizedProps=o,e=t.child):e=g(e,t),e;case 14:return n=t.type.render,n=n(t.pendingProps,t.ref),c(e,t,n),t.memoizedProps=n,t.child;case 10:return n=t.pendingProps,E()||t.memoizedProps!==n?(c(e,t,n),t.memoizedProps=n,e=t.child):e=g(e,t),e;case 11:return n=t.pendingProps.children,E()||null!==n&&t.memoizedProps!==n?(c(e,t,n),t.memoizedProps=n,e=t.child):e=g(e,t),e;case 13:return p(e,t,n);case 12:e:{r=t.type,s=t.pendingProps,a=t.memoizedProps,o=r._currentValue;var l=r._changedBits;if(E()||0!==l||a!==s){t.memoizedProps=s;var C=s.unstable_observedBits;if(void 0!==C&&null!==C||(C=1073741823),t.stateNode=C,0!==(l&C))f(t,r,l,n);else if(a===s){e=g(e,t);break e}n=s.children,n=n(o),c(e,t,n),e=t.child}else e=g(e,t)}return e;default:i("156")}}}}function wt(e,t,n,r,o){function s(e){e.effectTag|=4}var a=e.createInstance,c=e.createTextInstance,l=e.appendInitialChild,u=e.finalizeInitialChildren,h=e.prepareUpdate,d=e.persistence,f=t.getRootHostContainer,p=t.popHostContext,g=t.getHostContext,m=t.popHostContainer,v=n.popContextProvider,y=n.popTopLevelContextObject,b=r.popProvider,w=o.prepareToHydrateHostInstance,_=o.prepareToHydrateHostTextInstance,x=o.popHydrationState,E=void 0,A=void 0,C=void 0;return e.mutation?(E=function(){},A=function(e,t,n){(t.updateQueue=n)&&s(t)},C=function(e,t,n,i){n!==i&&s(t)}):i(d?"235":"236"),{completeWork:function(e,t,n){var r=t.pendingProps;switch(t.tag){case 1:return null;case 2:return v(t),e=t.stateNode,r=t.updateQueue,null!==r&&null!==r.capturedValues&&(t.effectTag&=-65,"function"===typeof e.componentDidCatch?t.effectTag|=256:r.capturedValues=null),null;case 3:return m(t),y(t),r=t.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(x(t),t.effectTag&=-3),E(t),e=t.updateQueue,null!==e&&null!==e.capturedValues&&(t.effectTag|=256),null;case 5:p(t),n=f();var o=t.type;if(null!==e&&null!=t.stateNode){var d=e.memoizedProps,S=t.stateNode,M=g();S=h(S,o,d,r,n,M),A(e,t,S,o,d,r,n,M),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!r)return null===t.stateNode&&i("166"),null;if(e=g(),x(t))w(t,n,e)&&s(t);else{d=a(o,r,n,e,t);e:for(M=t.child;null!==M;){if(5===M.tag||6===M.tag)l(d,M.stateNode);else if(4!==M.tag&&null!==M.child){M.child.return=M,M=M.child;continue}if(M===t)break;for(;null===M.sibling;){if(null===M.return||M.return===t)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}u(d,o,r,n,e)&&s(t),t.stateNode=d}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)C(e,t,e.memoizedProps,r);else{if("string"!==typeof r)return null===t.stateNode&&i("166"),null;e=f(),n=g(),x(t)?_(t)&&s(t):t.stateNode=c(r,e,n,t)}return null;case 7:(r=t.memoizedProps)||i("165"),t.tag=8,o=[];e:for((d=t.stateNode)&&(d.return=t);null!==d;){if(5===d.tag||6===d.tag||4===d.tag)i("247");else if(9===d.tag)o.push(d.pendingProps.value);else if(null!==d.child){d.child.return=d,d=d.child;continue}for(;null===d.sibling;){if(null===d.return||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}return d=r.handler,r=d(r.props,o),t.child=yr(t,null!==e?e.child:null,r,n),t.child;case 8:return t.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return m(t),E(t),null;case 13:return b(t),null;case 12:return null;case 0:i("167");default:i("156")}}}}function _t(e,t,n,i,r){var o=e.popHostContainer,s=e.popHostContext,a=t.popContextProvider,c=t.popTopLevelContextObject,l=n.popProvider;return{throwException:function(e,t,n){t.effectTag|=512,t.firstEffect=t.lastEffect=null,t={value:n,source:t,stack:oe(t)};do{switch(e.tag){case 3:return ut(e),e.updateQueue.capturedValues=[t],void(e.effectTag|=1024);case 2:if(n=e.stateNode,0===(64&e.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&!r(n)){ut(e),n=e.updateQueue;var i=n.capturedValues;return null===i?n.capturedValues=[t]:i.push(t),void(e.effectTag|=1024)}}e=e.return}while(null!==e)},unwindWork:function(e){switch(e.tag){case 2:a(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return o(e),c(e),t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 5:return s(e),null;case 4:return o(e),null;case 13:return l(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case 2:a(e);break;case 3:o(e),c(e);break;case 5:s(e);break;case 4:o(e);break;case 13:l(e)}}}}function xt(e,t){var n=t.source;null===t.stack&&oe(n),null!==n&&re(n),t=t.value,null!==e&&2===e.tag&&re(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function Et(e,t,n,r,o){function s(e){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(n){t(e,n)}else n.current=null}function a(e){switch("function"===typeof at&&at(e),e.tag){case 2:s(e);var n=e.stateNode;if("function"===typeof n.componentWillUnmount)try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(n){t(e,n)}break;case 5:s(e);break;case 7:c(e.stateNode);break;case 4:d&&u(e)}}function c(e){for(var t=e;;)if(a(t),null===t.child||d&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function l(e){return 5===e.tag||3===e.tag||4===e.tag}function u(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&i("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)c(t),o?x(r,t.stateNode):_(r,t.stateNode);else if(4===t.tag?r=t.stateNode.containerInfo:a(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var h=e.getPublicInstance,d=e.mutation;e=e.persistence,d||i(e?"235":"236");var f=d.commitMount,p=d.commitUpdate,g=d.resetTextContent,m=d.commitTextUpdate,v=d.appendChild,y=d.appendChildToContainer,b=d.insertBefore,w=d.insertInContainerBefore,_=d.removeChild,x=d.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(e,t){switch(t.tag){case 2:if(2048&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,e.props=t.memoizedProps,e.state=t.memoizedState,t=e.getSnapshotBeforeUpdate(n,r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:break;default:i("163")}},commitResetTextContent:function(e){g(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(l(t)){var n=t;break e}t=t.return}i("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:i("161")}16&n.effectTag&&(g(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||l(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)n?r?w(t,o.stateNode,n):b(t,o.stateNode,n):r?y(t,o.stateNode):v(t,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(e){u(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&p(n,s,o,e,r,t)}break;case 6:null===t.stateNode&&i("162"),n=t.memoizedProps,m(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:i("163")}},commitLifeCycles:function(e,t,n){switch(n.tag){case 2:if(e=n.stateNode,4&n.effectTag)if(null===t)e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidMount();else{var r=t.memoizedProps;t=t.memoizedState,e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}n=n.updateQueue,null!==n&&pt(n,e);break;case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=h(n.child.stateNode);break;case 2:e=n.child.stateNode}pt(t,e)}break;case 5:e=n.stateNode,null===t&&4&n.effectTag&&f(e,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:i("163")}},commitErrorLogging:function(e,t){switch(e.tag){case 2:var n=e.type;t=e.stateNode;var r=e.updateQueue;(null===r||null===r.capturedValues)&&i("264");var s=r.capturedValues;for(r.capturedValues=null,"function"!==typeof n.getDerivedStateFromCatch&&o(t),t.props=e.memoizedProps,t.state=e.memoizedState,n=0;n<s.length;n++){r=s[n];var a=r.value,c=r.stack;xt(e,r),t.componentDidCatch(a,{componentStack:null!==c?c:""})}break;case 3:for(n=e.updateQueue,(null===n||null===n.capturedValues)&&i("264"),s=n.capturedValues,n.capturedValues=null,n=0;n<s.length;n++)r=s[n],xt(e,r),t(r.value);break;default:i("265")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=h(n);break;default:e=n}"function"===typeof t?t(e):t.current=e}},commitDetachRef:function(e){null!==(e=e.ref)&&("function"===typeof e?e(null):e.current=null)}}}function At(e,t){function n(e){return e===wr&&i("174"),e}var r=e.getChildHostContext,o=e.getRootHostContext;e=t.createCursor;var s=t.push,a=t.pop,c=e(wr),l=e(wr),u=e(wr);return{getHostContext:function(){return n(c.current)},getRootHostContainer:function(){return n(u.current)},popHostContainer:function(e){a(c,e),a(l,e),a(u,e)},popHostContext:function(e){l.current===e&&(a(c,e),a(l,e))},pushHostContainer:function(e,t){s(u,t,e),s(l,e,e),s(c,wr,e),t=o(t),a(c,e),s(c,t,e)},pushHostContext:function(e){var t=n(u.current),i=n(c.current);t=r(i,e.type,t),i!==t&&(s(l,e,e),s(c,t,e))}}}function Ct(e){function t(e,t){var n=new Je(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=s(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=a(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function r(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;d=e}var o=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){i("175")},prepareToHydrateHostTextInstance:function(){i("176")},popHydrationState:function(){return!1}};var s=e.canHydrateInstance,a=e.canHydrateTextInstance,c=e.getNextHydratableSibling,l=e.getFirstHydratableChild,u=e.hydrateInstance,h=e.hydrateTextInstance,d=null,f=null,p=!1;return{enterHydrationState:function(e){return f=l(e.stateNode.containerInfo),d=e,p=!0},resetHydrationState:function(){f=d=null,p=!1},tryToClaimNextHydratableInstance:function(e){if(p){var i=f;if(i){if(!n(e,i)){if(!(i=c(i))||!n(e,i))return e.effectTag|=2,p=!1,void(d=e);t(d,f)}d=e,f=l(i)}else e.effectTag|=2,p=!1,d=e}},prepareToHydrateHostInstance:function(e,t,n){return t=u(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return h(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==d)return!1;if(!p)return r(e),p=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!o(n,e.memoizedProps))for(n=f;n;)t(e,n),n=c(n);return r(e),f=d?c(e.stateNode):null,!0}}}function St(e){function t(e,t,n){e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function n(e){return 2===e.tag&&null!=e.type.childContextTypes}function r(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var o in n)o in r||i("108",re(e)||"Unknown",o);return fn({},t,n)}var o=e.createCursor,s=e.push,a=e.pop,c=o(yn),l=o(!1),u=yn;return{getUnmaskedContext:function(e){return n(e)?u:c.current},cacheContext:t,getMaskedContext:function(e,n){var i=e.type.contextTypes;if(!i)return yn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var o,s={};for(o in i)s[o]=n[o];return r&&t(e,n,s),s},hasContextChanged:function(){return l.current},isContextConsumer:function(e){return 2===e.tag&&null!=e.type.contextTypes},isContextProvider:n,popContextProvider:function(e){n(e)&&(a(l,e),a(c,e))},popTopLevelContextObject:function(e){a(l,e),a(c,e)},pushTopLevelContextObject:function(e,t,n){null!=c.cursor&&i("168"),s(c,t,e),s(l,n,e)},processChildContext:r,pushContextProvider:function(e){if(!n(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||yn,u=c.current,s(c,t,e),s(l,l.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||i("169"),t){var o=r(e,u);n.__reactInternalMemoizedMergedChildContext=o,a(l,e),a(c,e),s(c,o,e)}else a(l,e);s(l,t,e)},findCurrentUnmaskedContext:function(e){for(2!==Oe(e)||2!==e.tag?i("170"):void 0;3!==e.tag;){if(n(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||i("171")}return e.stateNode.context}}}function Mt(e){var t=e.createCursor,n=e.push,i=e.pop,r=t(null),o=t(null),s=t(0);return{pushProvider:function(e){var t=e.type._context;n(s,t._changedBits,e),n(o,t._currentValue,e),n(r,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode},popProvider:function(e){var t=s.current,n=o.current;i(r,e),i(o,e),i(s,e),e=e.type._context,e._currentValue=n,e._changedBits=t}}}function kt(){var e=[],t=-1;return{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===t},pop:function(n){0>t||(n.current=e[t],e[t]=null,t--)},push:function(n,i){t++,e[t]=n.current,n.current=i},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}function Tt(e){function t(){if(null!==Q)for(var e=Q.return;null!==e;)P(e),e=e.return;ee=null,te=0,Q=null,re=!1}function n(e){return null!==se&&se.has(e)}function r(e){for(;;){var t=e.alternate,n=e.return,i=e.sibling;if(0===(512&e.effectTag)){t=T(t,e,te);var r=e;if(1073741823===te||1073741823!==r.expirationTime){e:switch(r.tag){case 3:case 2:var o=r.updateQueue;o=null===o?0:o.expirationTime;break e;default:o=0}for(var s=r.child;null!==s;)0!==s.expirationTime&&(0===o||o>s.expirationTime)&&(o=s.expirationTime),s=s.sibling;r.expirationTime=o}if(null!==t)return t;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==i)return i;if(null===n){re=!0;break}e=n}else{if(null!==(e=O(e)))return e.effectTag&=2559,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==i)return i;if(null===n)break;e=n}}return null}function o(e){var t=k(e.alternate,e,te);return null===t&&(t=r(e)),ai.current=null,t}function s(e,n,s){J&&i("243"),J=!0,n===te&&e===ee&&null!==Q||(t(),ee=e,te=n,Q=Qe(ee.current,null,te),e.pendingCommitExpirationTime=0);for(var a=!1;;){try{if(s)for(;null!==Q&&!x();)Q=o(Q);else for(;null!==Q;)Q=o(Q)}catch(e){if(null===Q){a=!0,E(e);break}s=Q;var c=s.return;if(null===c){a=!0,E(e);break}F(c,s,e),Q=r(s)}break}return J=!1,a||null!==Q?null:re?(e.pendingCommitExpirationTime=n,e.current.alternate):void i("262")}function a(e,t,n,i){e={value:n,source:e,stack:oe(e)},ht(t,{expirationTime:i,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:e,next:null}),u(t,i)}function c(e,t){e:{J&&!ie&&i("263");for(var r=e.return;null!==r;){switch(r.tag){case 2:var o=r.stateNode;if("function"===typeof r.type.getDerivedStateFromCatch||"function"===typeof o.componentDidCatch&&!n(o)){a(e,r,t,1),e=void 0;break e}break;case 3:a(e,r,t,1),e=void 0;break e}r=r.return}3===e.tag&&a(e,e,t,1),e=void 0}return e}function l(e){return e=0!==Z?Z:J?ie?1:te:1&e.mode?_e?10*(1+((h()+15)/10|0)):25*(1+((h()+500)/25|0)):1,_e&&(0===pe||e>pe)&&(pe=e),e}function u(e,n){e:{for(;null!==e;){if((0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>n)&&(e.alternate.expirationTime=n),null===e.return){if(3!==e.tag){n=void 0;break e}var r=e.stateNode;!J&&0!==te&&n<te&&t(),J&&!ie&&ee===r||p(r,n),Ae>Ee&&i("185")}e=e.return}n=void 0}return n}function h(){return K=z()-q,X=2+(K/10|0)}function d(e,t,n,i,r){var o=Z;Z=1;try{return e(t,n,i,r)}finally{Z=o}}function f(e){if(0!==le){if(e>le)return;V(ue)}var t=z()-q;le=e,ue=H(m,{timeout:10*(e-2)-t})}function p(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===ce?(ae=ce=e,e.nextScheduledRoot=e):(ce=ce.nextScheduledRoot=e,ce.nextScheduledRoot=ae);else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}he||(be?we&&(de=e,fe=1,w(e,1,!1)):1===t?v():f(t))}function g(){var e=0,t=null;if(null!==ce)for(var n=ce,r=ae;null!==r;){var o=r.remainingExpirationTime;if(0===o){if((null===n||null===ce)&&i("244"),r===r.nextScheduledRoot){ae=ce=r.nextScheduledRoot=null;break}if(r===ae)ae=o=r.nextScheduledRoot,ce.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===ce){ce=n,ce.nextScheduledRoot=ae,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=r),r===ce)break;n=r,r=r.nextScheduledRoot}}n=de,null!==n&&n===t&&1===e?Ae++:Ae=0,de=t,fe=e}function m(e){y(0,!0,e)}function v(){y(1,!1,null)}function y(e,t,n){if(ye=n,g(),t)for(;null!==de&&0!==fe&&(0===e||e>=fe)&&(!ge||h()>=fe);)w(de,fe,!ge),g();else for(;null!==de&&0!==fe&&(0===e||e>=fe);)w(de,fe,!1),g();null!==ye&&(le=0,ue=-1),0!==fe&&f(fe),ye=null,ge=!1,b()}function b(){if(Ae=0,null!==xe){var e=xe;xe=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){me||(me=!0,ve=e)}}}if(me)throw e=ve,ve=null,me=!1,e}function w(e,t,n){he&&i("245"),he=!0,n?(n=e.finishedWork,null!==n?_(e,n,t):(e.finishedWork=null,null!==(n=s(e,t,!0))&&(x()?e.finishedWork=n:_(e,n,t)))):(n=e.finishedWork,null!==n?_(e,n,t):(e.finishedWork=null,null!==(n=s(e,t,!1))&&_(e,n,t))),he=!1}function _(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===xe?xe=[r]:xe.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);e.finishedWork=null,ie=J=!0,n=t.stateNode,n.current===t&&i("177"),r=n.pendingCommitExpirationTime,0===r&&i("261"),n.pendingCommitExpirationTime=0;var o=h();if(ai.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var s=t.firstEffect}else s=t;else s=t.firstEffect;for(W(n.containerInfo),ne=s;null!==ne;){var a=!1,l=void 0;try{for(;null!==ne;)2048&ne.effectTag&&L(ne.alternate,ne),ne=ne.nextEffect}catch(e){a=!0,l=e}a&&(null===ne&&i("178"),c(ne,l),null!==ne&&(ne=ne.nextEffect))}for(ne=s;null!==ne;){a=!1,l=void 0;try{for(;null!==ne;){var u=ne.effectTag;if(16&u&&R(ne),128&u){var d=ne.alternate;null!==d&&$(d)}switch(14&u){case 2:D(ne),ne.effectTag&=-3;break;case 6:D(ne),ne.effectTag&=-3,I(ne.alternate,ne);break;case 4:I(ne.alternate,ne);break;case 8:B(ne)}ne=ne.nextEffect}}catch(e){a=!0,l=e}a&&(null===ne&&i("178"),c(ne,l),null!==ne&&(ne=ne.nextEffect))}for(G(n.containerInfo),n.current=t,ne=s;null!==ne;){u=!1,d=void 0;try{for(s=n,a=o,l=r;null!==ne;){var f=ne.effectTag;36&f&&N(s,ne.alternate,ne,a,l),256&f&&j(ne,E),128&f&&U(ne);var p=ne.nextEffect;ne.nextEffect=null,ne=p}}catch(e){u=!0,d=e}u&&(null===ne&&i("178"),c(ne,d),null!==ne&&(ne=ne.nextEffect))}J=ie=!1,"function"===typeof st&&st(t.stateNode),t=n.current.expirationTime,0===t&&(se=null),e.remainingExpirationTime=t}function x(){return!(null===ye||ye.timeRemaining()>Ce)&&(ge=!0)}function E(e){null===de&&i("246"),de.remainingExpirationTime=0,me||(me=!0,ve=e)}var A=kt(),C=At(e,A),S=St(A);A=Mt(A);var M=Ct(e),k=bt(e,C,S,A,M,u,l).beginWork,T=wt(e,C,S,A,M).completeWork;C=_t(C,S,A,u,n);var F=C.throwException,O=C.unwindWork,P=C.unwindInterruptedWork;C=Et(e,c,u,l,function(e){null===se?se=new Set([e]):se.add(e)},h);var L=C.commitBeforeMutationLifeCycles,R=C.commitResetTextContent,D=C.commitPlacement,B=C.commitDeletion,I=C.commitWork,N=C.commitLifeCycles,j=C.commitErrorLogging,U=C.commitAttachRef,$=C.commitDetachRef,z=e.now,H=e.scheduleDeferredCallback,V=e.cancelDeferredCallback,W=e.prepareForCommit,G=e.resetAfterCommit,q=z(),X=2,K=q,Y=0,Z=0,J=!1,Q=null,ee=null,te=0,ne=null,ie=!1,re=!1,se=null,ae=null,ce=null,le=0,ue=-1,he=!1,de=null,fe=0,pe=0,ge=!1,me=!1,ve=null,ye=null,be=!1,we=!1,_e=!1,xe=null,Ee=1e3,Ae=0,Ce=1;return{recalculateCurrentTime:h,computeExpirationForFiber:l,scheduleWork:u,requestWork:p,flushRoot:function(e,t){he&&i("253"),de=e,fe=t,w(e,t,!1),v(),b()},batchedUpdates:function(e,t){var n=be;be=!0;try{return e(t)}finally{(be=n)||he||v()}},unbatchedUpdates:function(e,t){if(be&&!we){we=!0;try{return e(t)}finally{we=!1}}return e(t)},flushSync:function(e,t){he&&i("187");var n=be;be=!0;try{return d(e,t)}finally{be=n,v()}},flushControlled:function(e){var t=be;be=!0;try{d(e)}finally{(be=t)||he||y(1,!1,null)}},deferredUpdates:function(e){var t=Z;Z=25*(1+((h()+500)/25|0));try{return e()}finally{Z=t}},syncUpdates:d,interactiveUpdates:function(e,t,n){if(_e)return e(t,n);be||he||0===pe||(y(pe,!1,null),pe=0);var i=_e,r=be;be=_e=!0;try{return e(t,n)}finally{_e=i,(be=r)||he||v()}},flushInteractiveUpdates:function(){he||0===pe||(y(pe,!1,null),pe=0)},computeUniqueAsyncExpiration:function(){var e=25*(1+((h()+500)/25|0));return e<=Y&&(e=Y+1),Y=e},legacyContext:S}}function Ft(e){function t(e,t,n,i,r,o){if(i=t.current,n){n=n._reactInternalFiber;var a=c(n);n=l(n)?u(n,a):a}else n=yn;return null===t.context?t.context=n:t.pendingContext=n,t=o,ht(i,{expirationTime:r,partialState:{element:e},callback:void 0===t?null:t,isReplace:!1,isForced:!1,capturedValue:null,next:null}),s(i,r),r}var n=e.getPublicInstance;e=Tt(e);var r=e.recalculateCurrentTime,o=e.computeExpirationForFiber,s=e.scheduleWork,a=e.legacyContext,c=a.findCurrentUnmaskedContext,l=a.isContextProvider,u=a.processChildContext;return{createContainer:function(e,t,n){return t=new Je(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e},updateContainer:function(e,n,i,s){var a=n.current,c=r();return a=o(a),t(e,n,i,c,a,s)},updateContainerAtExpirationTime:function(e,n,i,o,s){return t(e,n,i,r(),o,s)},flushRoot:e.flushRoot,requestWork:e.requestWork,computeUniqueAsyncExpiration:e.computeUniqueAsyncExpiration,batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,syncUpdates:e.syncUpdates,interactiveUpdates:e.interactiveUpdates,flushInteractiveUpdates:e.flushInteractiveUpdates,flushControlled:e.flushControlled,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?i("188"):i("268",Object.keys(e))),e=De(t),null===e?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return e=Be(e),null===e?null:e.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return ot(fn({},e,{findHostInstanceByFiber:function(e){return e=De(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}}}function Ot(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:di,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Pt(e){var t="";return hn.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function Lt(e,t){return e=fn({children:void 0},t),(t=Pt(t.children))&&(e.children=t),e}function Rt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Dt(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Bt(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function It(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&i("92"),Array.isArray(t)&&(1>=t.length||i("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Nt(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function jt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function Ut(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $t(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ut(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function zt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ht(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=n,o=t[n];r=null==o||"boolean"===typeof o||""===o?"":i||"number"!==typeof o||0===o||$r.hasOwnProperty(r)&&$r[r]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}function Vt(e,t,n){t&&(Hr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&i("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&i("60"),"object"===ln(t.dangerouslySetInnerHTML)&&"__html"in t.dangerouslySetInnerHTML||i("61")),null!=t.style&&"object"!==ln(t.style)&&i("62",n()))}function Wt(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Gt(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=qe(e);t=Cn[t];for(var i=0;i<t.length;i++){var r=t[i];n.hasOwnProperty(r)&&n[r]||("topScroll"===r?ze("topScroll","scroll",e):"topFocus"===r||"topBlur"===r?(ze("topFocus","focus",e),ze("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===r?(J("cancel",!0)&&ze("topCancel","cancel",e),n.topCancel=!0):"topClose"===r?(J("close",!0)&&ze("topClose","close",e),n.topClose=!0):tr.hasOwnProperty(r)&&$e(r,tr[r],e),n[r]=!0)}}function qt(e,t,n,i){return n=9===n.nodeType?n:n.ownerDocument,i===Nr.html&&(i=Ut(e)),i===Nr.html?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(i,e),e}function Xt(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function Kt(e,t,n,i){var r=Wt(t,n);switch(t){case"iframe":case"object":$e("topLoad","load",e);var o=n;break;case"video":case"audio":for(o in nr)nr.hasOwnProperty(o)&&$e(o,nr[o],e);o=n;break;case"source":$e("topError","error",e),o=n;break;case"img":case"image":case"link":$e("topError","error",e),$e("topLoad","load",e),o=n;break;case"form":$e("topReset","reset",e),$e("topSubmit","submit",e),o=n;break;case"details":$e("topToggle","toggle",e),o=n;break;case"input":fe(e,n),o=de(e,n),$e("topInvalid","invalid",e),Gt(i,"onChange");break;case"option":o=Lt(e,n);break;case"select":Dt(e,n),o=fn({},n,{value:void 0}),$e("topInvalid","invalid",e),Gt(i,"onChange");break;case"textarea":It(e,n),o=Bt(e,n),$e("topInvalid","invalid",e),Gt(i,"onChange");break;default:o=n}Vt(t,o,Vr);var s,a=o;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];"style"===s?Ht(e,c,Vr):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&Ur(e,c):"children"===s?"string"===typeof c?("textarea"!==t||""!==c)&&zt(e,c):"number"===typeof c&&zt(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(An.hasOwnProperty(s)?null!=c&&Gt(i,s):null!=c&&he(e,s,c,r))}switch(t){case"input":te(e),me(e,n);break;case"textarea":te(e),jt(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?Rt(e,!!n.multiple,t,!1):null!=n.defaultValue&&Rt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=pn)}}function Yt(e,t,n,i,r){var o=null;switch(t){case"input":n=de(e,n),i=de(e,i),o=[];break;case"option":n=Lt(e,n),i=Lt(e,i),o=[];break;case"select":n=fn({},n,{value:void 0}),i=fn({},i,{value:void 0}),o=[];break;case"textarea":n=Bt(e,n),i=Bt(e,i),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof i.onClick&&(e.onclick=pn)}Vt(t,i,Vr),t=e=void 0;var s=null;for(e in n)if(!i.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var a=n[e];for(t in a)a.hasOwnProperty(t)&&(s||(s={}),s[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(An.hasOwnProperty(e)?o||(o=[]):(o=o||[]).push(e,null));for(e in i){var c=i[e];if(a=null!=n?n[e]:void 0,i.hasOwnProperty(e)&&c!==a&&(null!=c||null!=a))if("style"===e)if(a){for(t in a)!a.hasOwnProperty(t)||c&&c.hasOwnProperty(t)||(s||(s={}),s[t]="");for(t in c)c.hasOwnProperty(t)&&a[t]!==c[t]&&(s||(s={}),s[t]=c[t])}else s||(o||(o=[]),o.push(e,s)),s=c;else"dangerouslySetInnerHTML"===e?(c=c?c.__html:void 0,a=a?a.__html:void 0,null!=c&&a!==c&&(o=o||[]).push(e,""+c)):"children"===e?a===c||"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(e,""+c):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(An.hasOwnProperty(e)?(null!=c&&Gt(r,e),o||a===c||(o=[])):(o=o||[]).push(e,c))}return s&&(o=o||[]).push("style",s),o}function Zt(e,t,n,i,r){"input"===n&&"radio"===r.type&&null!=r.name&&pe(e,r),Wt(n,i),i=Wt(n,r);for(var o=0;o<t.length;o+=2){var s=t[o],a=t[o+1];"style"===s?Ht(e,a,Vr):"dangerouslySetInnerHTML"===s?Ur(e,a):"children"===s?zt(e,a):he(e,s,a,i)}switch(n){case"input":ge(e,r);break;case"textarea":Nt(e,r);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!r.multiple,n=r.value,null!=n?Rt(e,!!r.multiple,n,!1):t!==!!r.multiple&&(null!=r.defaultValue?Rt(e,!!r.multiple,r.defaultValue,!0):Rt(e,!!r.multiple,r.multiple?[]:"",!1))}}function Jt(e,t,n,i,r){switch(t){case"iframe":case"object":$e("topLoad","load",e);break;case"video":case"audio":for(var o in nr)nr.hasOwnProperty(o)&&$e(o,nr[o],e);break;case"source":$e("topError","error",e);break;case"img":case"image":case"link":$e("topError","error",e),$e("topLoad","load",e);break;case"form":$e("topReset","reset",e),$e("topSubmit","submit",e);break;case"details":$e("topToggle","toggle",e);break;case"input":fe(e,n),$e("topInvalid","invalid",e),Gt(r,"onChange");break;case"select":Dt(e,n),$e("topInvalid","invalid",e),Gt(r,"onChange");break;case"textarea":It(e,n),$e("topInvalid","invalid",e),Gt(r,"onChange")}Vt(t,n,Vr),i=null;for(var s in n)n.hasOwnProperty(s)&&(o=n[s],"children"===s?"string"===typeof o?e.textContent!==o&&(i=["children",o]):"number"===typeof o&&e.textContent!==""+o&&(i=["children",""+o]):An.hasOwnProperty(s)&&null!=o&&Gt(r,s));switch(t){case"input":te(e),me(e,n);break;case"textarea":te(e),jt(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=pn)}return i}function Qt(e,t){return e.nodeValue!==t}function en(e){this._expirationTime=Xr.computeUniqueAsyncExpiration(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function tn(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function nn(e,t,n){this._internalRoot=Xr.createContainer(e,t,n)}function rn(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function on(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function sn(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new nn(e,!1,t)}function an(e,t,n,r,o){rn(n)||i("200");var s=n._reactRootContainer;if(s){if("function"===typeof o){var a=o;o=function(){var e=Xr.getPublicRootInstance(s._internalRoot);a.call(e)}}null!=e?s.legacy_renderSubtreeIntoContainer(e,t,o):s.render(t,o)}else{if(s=n._reactRootContainer=sn(n,r),"function"===typeof o){var c=o;o=function(){var e=Xr.getPublicRootInstance(s._internalRoot);c.call(e)}}Xr.unbatchedUpdates(function(){null!=e?s.legacy_renderSubtreeIntoContainer(e,t,o):s.render(t,o)})}return Xr.getPublicRootInstance(s._internalRoot)}function cn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return rn(t)||i("200"),Ot(e,t,null,n)}var ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un=n(22),hn=n(0),dn=n(105),fn=n(21),pn=n(23),gn=n(106),mn=n(107),vn=n(108),yn=n(43);hn||i("227");var bn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,i,o,s,a,c,l){r.apply(bn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,i,r,o,s,a,c){if(bn.invokeGuardedCallback.apply(this,arguments),bn.hasCaughtError()){var l=bn.clearCaughtError();bn._hasRethrowError||(bn._hasRethrowError=!0,bn._rethrowError=l)}},rethrowCaughtError:function(){return o.apply(bn,arguments)},hasCaughtError:function(){return bn._hasCaughtError},clearCaughtError:function(){if(bn._hasCaughtError){var e=bn._caughtError;return bn._caughtError=null,bn._hasCaughtError=!1,e}i("198")}},wn=null,_n={},xn=[],En={},An={},Cn={},Sn=Object.freeze({plugins:xn,eventNameDispatchConfigs:En,registrationNameModules:An,registrationNameDependencies:Cn,possibleRegistrationNames:null,injectEventPluginOrder:c,injectEventPluginsByName:l}),Mn=null,kn=null,Tn=null,Fn=null,On={injectEventPluginOrder:c,injectEventPluginsByName:l},Pn=Object.freeze({injection:On,getListener:m,runEventsInBatch:v,runExtractedEventsInBatch:y}),Ln=Math.random().toString(36).slice(2),Rn="__reactInternalInstance$"+Ln,Dn="__reactEventHandlers$"+Ln,Bn=Object.freeze({precacheFiberNode:function(e,t){t[Rn]=e},getClosestInstanceFromNode:b,getInstanceFromNode:function(e){return e=e[Rn],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:w,getFiberCurrentPropsFromNode:_,updateFiberProps:function(e,t){e[Dn]=t}}),In=Object.freeze({accumulateTwoPhaseDispatches:T,accumulateTwoPhaseDispatchesSkipTarget:function(e){d(e,S)},accumulateEnterLeaveDispatches:F,accumulateDirectDispatches:function(e){d(e,k)}}),Nn=null,jn={_root:null,_startText:null,_fallbackText:null},Un="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),$n={type:null,target:null,currentTarget:pn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};fn(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=pn.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=pn.thatReturnsTrue)},persist:function(){this.isPersistent=pn.thatReturnsTrue},isPersistent:pn.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<Un.length;t++)this[Un[t]]=null}}),R.Interface=$n,R.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var r=new t;return fn(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=fn({},i.Interface,e),n.extend=i.extend,I(n),n},I(R);var zn=R.extend({data:null}),Hn=R.extend({data:null}),Vn=[9,13,27,32],Wn=dn.canUseDOM&&"CompositionEvent"in window,Gn=null;dn.canUseDOM&&"documentMode"in document&&(Gn=document.documentMode);var qn=dn.canUseDOM&&"TextEvent"in window&&!Gn,Xn=dn.canUseDOM&&(!Wn||Gn&&8<Gn&&11>=Gn),Kn=String.fromCharCode(32),Yn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Zn=!1,Jn=!1,Qn={eventTypes:Yn,extractEvents:function(e,t,n,i){var r=void 0,o=void 0;if(Wn)e:{switch(e){case"topCompositionStart":r=Yn.compositionStart;break e;case"topCompositionEnd":r=Yn.compositionEnd;break e;case"topCompositionUpdate":r=Yn.compositionUpdate;break e}r=void 0}else Jn?N(e,n)&&(r=Yn.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(r=Yn.compositionStart);return r?(Xn&&(Jn||r!==Yn.compositionStart?r===Yn.compositionEnd&&Jn&&(o=P()):(jn._root=i,jn._startText=L(),Jn=!0)),r=zn.getPooled(r,t,n,i),o?r.data=o:null!==(o=j(n))&&(r.data=o),T(r),o=r):o=null,(e=qn?U(e,n):$(e,n))?(t=Hn.getPooled(Yn.beforeInput,t,n,i),t.data=e,T(t)):t=null,null===o?t:null===t?o:[o,t]}},ei=null,ti={injectFiberControlledHostComponent:function(e){ei=e}},ni=null,ii=null,ri=Object.freeze({injection:ti,enqueueStateRestore:H,needsStateRestore:V,restoreStateIfNeeded:W}),oi=!1,si={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ai=hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ci="function"===typeof Symbol&&Symbol.for,li=ci?Symbol.for("react.element"):60103,ui=ci?Symbol.for("react.call"):60104,hi=ci?Symbol.for("react.return"):60105,di=ci?Symbol.for("react.portal"):60106,fi=ci?Symbol.for("react.fragment"):60107,pi=ci?Symbol.for("react.strict_mode"):60108,gi=ci?Symbol.for("react.provider"):60109,mi=ci?Symbol.for("react.context"):60110,vi=ci?Symbol.for("react.async_mode"):60111,yi=ci?Symbol.for("react.forward_ref"):60112,bi="function"===typeof Symbol&&Symbol.iterator,wi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_i={},xi={},Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ei[e]=new le(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ei[t]=new le(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ei[e]=new le(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){Ei[e]=new le(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ei[e]=new le(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Ei[e]=new le(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){Ei[e]=new le(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){Ei[e]=new le(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){Ei[e]=new le(e,5,!1,e.toLowerCase(),null)});var Ai=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ai,ue);Ei[t]=new le(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ai,ue);Ei[t]=new le(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ai,ue);Ei[t]=new le(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),Ei.tabIndex=new le("tabIndex",1,!1,"tabindex",null);var Ci={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Si=null,Mi=null,ki=!1;dn.canUseDOM&&(ki=J("input")&&(!document.documentMode||9<document.documentMode));var Ti={eventTypes:Ci,_isInputEventSupported:ki,extractEvents:function(e,t,n,i){var r=t?w(t):window,o=void 0,s=void 0,a=r.nodeName&&r.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===r.type?o=xe:Y(r)?ki?o=ke:(o=Se,s=Ce):(a=r.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=Me),o&&(o=o(e,t)))return be(o,n,i);s&&s(e,r,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||r._wrapperState)&&e.controlled&&"number"===r.type&&ve(r,"number",r.value)}},Fi=R.extend({view:null,detail:null}),Oi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Pi=Fi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Fe,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),Li={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Ri={eventTypes:Li,extractEvents:function(e,t,n,i){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?b(t):null):e=null,e===t)return null;var o=null==e?r:w(e);r=null==t?r:w(t);var s=Pi.getPooled(Li.mouseLeave,e,n,i);return s.type="mouseleave",s.target=o,s.relatedTarget=r,n=Pi.getPooled(Li.mouseEnter,t,n,i),n.type="mouseenter",n.target=r,n.relatedTarget=o,F(s,n,e,t),[s,n]}},Di=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bi=R.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ii=Fi.extend({relatedTarget:null}),Ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui=Fi.extend({key:function(e){if(e.key){var t=Ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ie(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?ji[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Fe,charCode:function(e){return"keypress"===e.type?Ie(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ie(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),$i=Pi.extend({dataTransfer:null}),zi=Fi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Fe}),Hi=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Vi=Pi.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Wi={},Gi={};"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(e){Ne(e,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(e){Ne(e,!1)});var qi={eventTypes:Wi,isInteractiveTopLevelEventType:function(e){return void 0!==(e=Gi[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,i){var r=Gi[e];if(!r)return null;switch(e){case"topKeyPress":if(0===Ie(n))return null;case"topKeyDown":case"topKeyUp":e=Ui;break;case"topBlur":case"topFocus":e=Ii;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=Pi;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=$i;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=zi;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Di;break;case"topTransitionEnd":e=Hi;break;case"topScroll":e=Fi;break;case"topWheel":e=Vi;break;case"topCopy":case"topCut":case"topPaste":e=Bi;break;default:e=R}return t=e.getPooled(r,t,n,i),T(t),t}},Xi=qi.isInteractiveTopLevelEventType,Ki=[],Yi=!0,Zi=Object.freeze({get _enabled(){return Yi},setEnabled:Ue,isEnabled:function(){return Yi},trapBubbledEvent:$e,trapCapturedEvent:ze,dispatchEvent:Ve}),Ji={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Qi={},er={};dn.canUseDOM&&(er=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);var tr={topAnimationEnd:Ge("animationend"),topAnimationIteration:Ge("animationiteration"),topAnimationStart:Ge("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Ge("transitionend"),topWheel:"wheel"},nr={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ir={},rr=0,or="_reactListenersID"+(""+Math.random()).slice(2),sr=dn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,ar={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},cr=null,lr=null,ur=null,hr=!1,dr={eventTypes:ar,extractEvents:function(e,t,n,i){var r,o=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!o)){e:{o=qe(o),r=Cn.onSelect;for(var s=0;s<r.length;s++){var a=r[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break e}}o=!0}r=!o}if(r)return null;switch(o=t?w(t):window,e){case"topFocus":(Y(o)||"true"===o.contentEditable)&&(cr=o,lr=t,ur=null);break;case"topBlur":ur=lr=cr=null;break;case"topMouseDown":hr=!0;break;case"topContextMenu":case"topMouseUp":return hr=!1,Ze(n,i);case"topSelectionChange":if(sr)break;case"topKeyDown":case"topKeyUp":return Ze(n,i)}return null}};On.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Mn=Bn.getFiberCurrentPropsFromNode,kn=Bn.getInstanceFromNode,Tn=Bn.getNodeFromInstance,On.injectEventPluginsByName({SimpleEventPlugin:qi,EnterLeaveEventPlugin:Ri,ChangeEventPlugin:Ti,SelectEventPlugin:dr,BeforeInputEventPlugin:Qn});var fr=null,pr=null;new Set;var gr=void 0,mr=void 0,vr=Array.isArray,yr=yt(!0),br=yt(!1),wr={},_r=Object.freeze({default:Ft}),xr=_r&&Ft||_r,Er=xr.default?xr.default:xr,Ar="object"===("undefined"===typeof performance?"undefined":ln(performance))&&"function"===typeof performance.now,Cr=void 0;Cr=Ar?function(){return performance.now()}:function(){return Date.now()};var Sr=void 0,Mr=void 0;if(dn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var kr=null,Tr=!1,Fr=-1,Or=!1,Pr=0,Lr=33,Rr=33,Dr=void 0;Dr=Ar?{didTimeout:!1,timeRemaining:function(){var e=Pr-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Pr-Date.now();return 0<e?e:0}};var Br="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Br){if(Tr=!1,e=Cr(),0>=Pr-e){if(!(-1!==Fr&&Fr<=e))return void(Or||(Or=!0,requestAnimationFrame(Ir)));Dr.didTimeout=!0}else Dr.didTimeout=!1;Fr=-1,e=kr,kr=null,null!==e&&e(Dr)}},!1);var Ir=function(e){Or=!1;var t=e-Pr+Rr;t<Rr&&Lr<Rr?(8>t&&(t=8),Rr=t<Lr?Lr:t):Lr=t,Pr=e+Rr,Tr||(Tr=!0,window.postMessage(Br,"*"))};Sr=function(e,t){return kr=e,null!=t&&"number"===typeof t.timeout&&(Fr=Cr()+t.timeout),Or||(Or=!0,requestAnimationFrame(Ir)),0},Mr=function(){kr=null,Tr=!1,Fr=-1}}else Sr=window.requestIdleCallback,Mr=window.cancelIdleCallback;else Sr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},Mr=function(e){clearTimeout(e)};var Nr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},jr=void 0,Ur=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Nr.svg||"innerHTML"in e)e.innerHTML=t;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+t+"</svg>",t=jr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),$r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zr=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(e){zr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$r[t]=$r[e]})});var Hr=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Vr=pn.thatReturns(""),Wr=Object.freeze({createElement:qt,createTextNode:Xt,setInitialProperties:Kt,diffProperties:Yt,updateProperties:Zt,diffHydratedProperties:Jt,diffHydratedText:Qt,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(ge(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=_(r);o||i("90"),ne(r),ge(r,o)}}}break;case"textarea":Nt(e,n);break;case"select":null!=(t=n.value)&&Rt(e,!!n.multiple,t,!1)}}});ti.injectFiberControlledHostComponent(Wr);var Gr=null,qr=null;en.prototype.render=function(e){this._defer||i("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new tn;return Xr.updateContainerAtExpirationTime(e,t,null,n,r._onCommit),r},en.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},en.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||i("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&i("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Xr.flushRoot(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},en.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},tn.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},tn.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&i("191",n),n()}}},nn.prototype.render=function(e,t){var n=this._internalRoot,i=new tn;return t=void 0===t?null:t,null!==t&&i.then(t),Xr.updateContainer(e,n,null,i._onCommit),i},nn.prototype.unmount=function(e){var t=this._internalRoot,n=new tn;return e=void 0===e?null:e,null!==e&&n.then(e),Xr.updateContainer(null,t,null,n._onCommit),n},nn.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var i=this._internalRoot,r=new tn;return n=void 0===n?null:n,null!==n&&r.then(n),Xr.updateContainer(t,i,e,r._onCommit),r},nn.prototype.createBatch=function(){var e=new en(this),t=e._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=e,e._next=null;else{for(n=null;null!==i&&i._expirationTime<=t;)n=i,i=i._next;e._next=i,null!==n&&(n._next=e)}return e};var Xr=Er({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$t(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$t(e,t)}return e},getChildHostContext:function(e,t){return $t(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Gr=Yi;var e=gn();if(Ye(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch(e){t=null;break e}var o=0,s=-1,a=-1,c=0,l=0,u=e,h=null;t:for(;;){for(var d;u!==t||0!==i&&3!==u.nodeType||(s=o+i),u!==r||0!==n&&3!==u.nodeType||(a=o+n),3===u.nodeType&&(o+=u.nodeValue.length),null!==(d=u.firstChild);)h=u,u=d;for(;;){if(u===e)break t;if(h===t&&++c===i&&(s=o),h===r&&++l===n&&(a=o),null!==(d=u.nextSibling))break;u=h,h=u.parentNode}u=d}t=-1===s||-1===a?null:{start:s,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;qr={focusedElem:e,selectionRange:t},Ue(!1)},resetAfterCommit:function(){var e=qr,t=gn(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&vn(document.documentElement,n)){if(Ye(n))if(t=i.start,e=i.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var r=n[O()].length;e=Math.min(i.start,r),i=void 0===i.end?e:Math.min(i.end,r),!t.extend&&e>i&&(r=i,i=e,e=r),r=Ke(n,e);var o=Ke(n,i);if(r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)){var s=document.createRange();s.setStart(r.node,r.offset),t.removeAllRanges(),e>i?(t.addRange(s),t.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),t.addRange(s))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}qr=null,Ue(Gr),Gr=null},createInstance:function(e,t,n,i,r){return e=qt(e,t,n,i),e[Rn]=r,e[Dn]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,i){return Kt(e,t,n,i),on(t,n)},prepareUpdate:function(e,t,n,i,r){return Yt(e,t,n,i,r)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===ln(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,i){return e=Xt(e,t),e[Rn]=i,e},now:Cr,mutation:{commitMount:function(e,t,n){on(t,n)&&e.focus()},commitUpdate:function(e,t,n,i,r){e[Dn]=r,Zt(e,t,n,i,r)},resetTextContent:function(e){zt(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,i,r,o){return e[Rn]=o,e[Dn]=n,Jt(e,t,n,r,i)},hydrateTextInstance:function(e,t,n){return e[Rn]=n,Qt(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Sr,cancelDeferredCallback:Mr}),Kr=Xr;G=Kr.batchedUpdates,q=Kr.interactiveUpdates,X=Kr.flushInteractiveUpdates;var Yr={createPortal:cn,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:Xr.findHostInstance(e)},hydrate:function(e,t,n){return an(null,e,t,!0,n)},render:function(e,t,n){return an(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&i("38"),an(e,t,n,!1,r)},unmountComponentAtNode:function(e){return rn(e)||i("40"),!!e._reactRootContainer&&(Xr.unbatchedUpdates(function(){an(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return cn.apply(void 0,arguments)},unstable_batchedUpdates:Xr.batchedUpdates,unstable_deferredUpdates:Xr.deferredUpdates,flushSync:Xr.flushSync,unstable_flushControlled:Xr.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Pn,EventPluginRegistry:Sn,EventPropagators:In,ReactControlledComponent:ri,ReactDOMComponentTree:Bn,ReactDOMEventListener:Zi},unstable_createRoot:function(e,t){return new nn(e,!0,null!=t&&!0===t.hydrate)}};Xr.injectIntoDevTools({findFiberByHostInstance:b,bundleType:0,version:"16.3.2",rendererPackageName:"react-dom"});var Zr=Object.freeze({default:Yr}),Jr=Zr&&Yr||Zr;e.exports=Jr.default?Jr.default:Jr},function(e,t,n){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},function(e,t,n){"use strict";function i(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=i},function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(i(e,t))return!0;if("object"!==("undefined"===typeof e?"undefined":o(e))||null===e||"object"!==("undefined"===typeof t?"undefined":o(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!s.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=n(109);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e)&&3==e.nodeType}var r=n(110);e.exports=i},function(e,t,n){"use strict";function i(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===("undefined"===typeof e?"undefined":r(e))&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":u(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=(n.n(s),n(1)),c=n.n(a),l=n(44),u=(n(25),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});t.a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],a=n||t+"Subscription",u=function(e){function n(o,s){i(this,n);var a=r(this,e.call(this,o,s));return a[t]=o.store,a}return o(n,e),n.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[a]=null,e},n.prototype.render=function(){return s.Children.only(this.props.children)},n}(s.Component);return u.propTypes={store:l.a.isRequired,children:c.a.element.isRequired},u.childContextTypes=(e={},e[t]=l.a.isRequired,e[a]=l.b,e),u}()},function(e,t,n){"use strict";var i=n(23),r=n(22),o=n(113);e.exports=function(){function e(e,t,n,i,s,a){a!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=[],t=[];return{clear:function(){t=o,e=o},notify:function(){for(var n=e=t,i=0;i<n.length;i++)n[i]()},get:function(){return t},subscribe:function(n){var i=!0;return t===e&&(t=e.slice()),t.push(n),function(){i&&e!==o&&(i=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}n.d(t,"a",function(){return a});var o=null,s={notify:function(){}},a=function(){function e(t,n,r){i(this,e),this.store=t,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=s}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=r())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},e}()},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t,n){for(var i=t.length-1;i>=0;i--){var r=t[i](e);if(r)return r}return function(t,i){throw new Error("Invalid value of type "+("undefined"===typeof e?"undefined":d(e))+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function o(e,t){return e===t}var s=n(45),a=n(116),c=n(117),l=n(132),u=n(133),h=n(134),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?s.a:t,d=e.mapStateToPropsFactories,p=void 0===d?l.a:d,g=e.mapDispatchToPropsFactories,m=void 0===g?c.a:g,v=e.mergePropsFactories,y=void 0===v?u.a:v,b=e.selectorFactory,w=void 0===b?h.a:b;return function(e,t,s){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=c.pure,u=void 0===l||l,h=c.areStatesEqual,d=void 0===h?o:h,g=c.areOwnPropsEqual,v=void 0===g?a.a:g,b=c.areStatePropsEqual,_=void 0===b?a.a:b,x=c.areMergedPropsEqual,E=void 0===x?a.a:x,A=i(c,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=r(e,p,"mapStateToProps"),S=r(t,m,"mapDispatchToProps"),M=r(s,y,"mergeProps");return n(w,f({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:C,initMapDispatchToProps:S,initMergeProps:M,pure:u,areStatesEqual:d,areOwnPropsEqual:v,areStatePropsEqual:_,areMergedPropsEqual:E},A))}}()},function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(i(e,t))return!0;if("object"!==("undefined"===typeof e?"undefined":o(e))||null===e||"object"!==("undefined"===typeof t?"undefined":o(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!s.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}t.a=r;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function i(e){return"function"===typeof e?Object(a.b)(e,"mapDispatchToProps"):void 0}function r(e){return e?void 0:Object(a.a)(function(e){return{dispatch:e}})}function o(e){return e&&"object"===("undefined"===typeof e?"undefined":c(e))?Object(a.a)(function(t){return Object(s.b)(e,t)}):void 0}var s=n(12),a=n(51),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=[i,r,o]},function(e,t,n){"use strict";function i(e){return null==e?void 0===e?c:a:l&&l in Object(e)?Object(o.a)(e):Object(s.a)(e)}var r=n(48),o=n(121),s=n(122),a="[object Null]",c="[object Undefined]",l=r.a?r.a.toStringTag:void 0;t.a=i},function(e,t,n){"use strict";var i=n(120),r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="object"==("undefined"===typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,s=i.a||o||Function("return this")();t.a=s},function(e,t,n){"use strict";(function(e){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"==("undefined"===typeof e?"undefined":n(e))&&e&&e.Object===Object&&e;t.a=i}).call(t,n(7))},function(e,t,n){"use strict";function i(e){var t=s.call(e,c),n=e[c];try{e[c]=void 0;var i=!0}catch(e){}var r=a.call(e);return i&&(t?e[c]=n:delete e[c]),r}var r=n(48),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,c=r.a?r.a.toStringTag:void 0;t.a=i},function(e,t,n){"use strict";function i(e){return o.call(e)}var r=Object.prototype,o=r.toString;t.a=i},function(e,t,n){"use strict";var i=n(124),r=Object(i.a)(Object.getPrototypeOf,Object);t.a=r},function(e,t,n){"use strict";function i(e,t){return function(n){return e(t(n))}}t.a=i},function(e,t,n){"use strict";function i(e){return null!=e&&"object"==("undefined"===typeof e?"undefined":r(e))}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=i},function(e,t,n){"use strict";(function(e,i){var r,o=n(128);r="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:i;var s=Object(o.a)(r);t.a=s}).call(t,n(7),n(127)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function i(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.a=i},function(e,t,n){"use strict";function i(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function r(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:s.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var s=t[o];"function"===typeof e[s]&&(n[s]=e[s])}var a=Object.keys(n),c=void 0;try{r(n)}catch(e){c=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(c)throw c;for(var r=!1,o={},s=0;s<a.length;s++){var l=a[s],u=n[l],h=e[l],d=u(h,t);if("undefined"===typeof d){var f=i(l,t);throw new Error(f)}o[l]=d,r=r||d!==h}return r?o:e}}t.a=o;var s=n(47);n(26),n(49)},function(e,t,n){"use strict";function i(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"===typeof e)return i(e,t);if("object"!==("undefined"===typeof e?"undefined":o(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":"undefined"===typeof e?"undefined":o(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},s=0;s<n.length;s++){var a=n[s],c=e[a];"function"===typeof c&&(r[a]=i(c,t))}return r}t.a=r;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,i,s){var a=e(n,i,s),c=a.dispatch,l=[],u={getState:a.getState,dispatch:function(e){return c(e)}};return l=t.map(function(e){return e(u)}),c=r.a.apply(void 0,l)(a.dispatch),o({},a,{dispatch:c})}}}t.a=i;var r=n(50),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t,n){"use strict";function i(e){return"function"===typeof e?Object(o.b)(e,"mapStateToProps"):void 0}function r(e){return e?void 0:Object(o.a)(function(){return{}})}var o=n(51);t.a=[i,r]},function(e,t,n){"use strict";function i(e,t,n){return a({},n,e,t)}function r(e){return function(t,n){var i=(n.displayName,n.pure),r=n.areMergedPropsEqual,o=!1,s=void 0;return function(t,n,a){var c=e(t,n,a);return o?i&&r(c,s)||(s=c):(o=!0,s=c),s}}}function o(e){return"function"===typeof e?r(e):void 0}function s(e){return e?void 0:function(){return i}}var a=(n(52),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e});t.a=[o,s]},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t,n,i){return function(r,o){return n(e(r,o),t(i,o),o)}}function o(e,t,n,i,r){function o(r,o){return p=r,g=o,m=e(p,g),v=t(i,g),y=n(m,v,g),f=!0,y}function s(){return m=e(p,g),t.dependsOnOwnProps&&(v=t(i,g)),y=n(m,v,g)}function a(){return e.dependsOnOwnProps&&(m=e(p,g)),t.dependsOnOwnProps&&(v=t(i,g)),y=n(m,v,g)}function c(){var t=e(p,g),i=!d(t,m);return m=t,i&&(y=n(m,v,g)),y}function l(e,t){var n=!h(t,g),i=!u(e,p);return p=e,g=t,n&&i?s():n?a():i?c():y}var u=r.areStatesEqual,h=r.areOwnPropsEqual,d=r.areStatePropsEqual,f=!1,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;return function(e,t){return f?l(e,t):o(e,t)}}function s(e,t){var n=t.initMapStateToProps,s=t.initMapDispatchToProps,a=t.initMergeProps,c=i(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(e,c),u=s(e,c),h=a(e,c);return(c.pure?o:r)(l,u,h,e,c)}t.a=s;n(135)},function(e,t,n){"use strict";n(25)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":d(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":d(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(53),h=n(63),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e){function t(){var n,o,s;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.handleLocationChange=function(e){o.store.dispatch({type:h.a,payload:e})},s=n,r(o,s)}return o(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.store,n=e.history,i=e.isSSR;this.store=t||this.context.store,this.handleLocationChange(n.location),i||(this.unsubscribeFromHistory=n.listen(this.handleLocationChange))},t.prototype.componentWillUnmount=function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()},t.prototype.render=function(){return a.a.createElement(u.a,this.props)},t}(s.Component);f.propTypes={store:l.a.object,history:l.a.object.isRequired,children:l.a.node,isSSR:l.a.bool},f.contextTypes={store:l.a.object},t.a=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(2),c=i(a),l=n(13),u=n(27),h=n(28),d=i(h),f=function(e,t,n){return Math.min(Math.max(e,t),n)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,i=void 0===n?["/"]:n,r=e.initialIndex,a=void 0===r?0:r,h=e.keyLength,p=void 0===h?6:h,g=(0,d.default)(),m=function(e){s(T,e),T.length=T.entries.length,g.notifyListeners(T.location,T.action)},v=function(){return Math.random().toString(36).substr(2,p)},y=f(a,0,i.length-1),b=i.map(function(e){return"string"===typeof e?(0,u.createLocation)(e,void 0,v()):(0,u.createLocation)(e,void 0,e.key||v())}),w=l.createPath,_=function(e,n){(0,c.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,u.createLocation)(e,n,v(),T.location);g.confirmTransitionTo(i,"PUSH",t,function(e){if(e){var t=T.index,n=t+1,r=T.entries.slice(0);r.length>n?r.splice(n,r.length-n,i):r.push(i),m({action:"PUSH",location:i,index:n,entries:r})}})},x=function(e,n){(0,c.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,u.createLocation)(e,n,v(),T.location);g.confirmTransitionTo(i,"REPLACE",t,function(e){e&&(T.entries[T.index]=i,m({action:"REPLACE",location:i}))})},E=function(e){var n=f(T.index+e,0,T.entries.length-1),i=T.entries[n];g.confirmTransitionTo(i,"POP",t,function(e){e?m({action:"POP",location:i,index:n}):m()})},A=function(){return E(-1)},C=function(){return E(1)},S=function(e){var t=T.index+e;return t>=0&&t<T.entries.length},M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g.setPrompt(e)},k=function(e){return g.appendListener(e)},T={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:w,push:_,replace:x,go:E,goBack:A,goForward:C,canGo:S,block:M,listen:k};return T};t.default=p},function(e,t,n){"use strict";var i=(n(139),n(140),n(141),n(17));n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b});n(14)},function(e,t,n){"use strict";var i=n(2),r=(n.n(i),n(3)),o=(n.n(r),n(17),n(14),n(29),n(59),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});"function"===typeof Symbol&&o(Symbol.iterator),Object.assign},function(e,t,n){"use strict";var i=n(2),r=(n.n(i),n(3)),o=(n.n(r),n(17),n(14));n(29),n(59),Object.assign,o.f,o.a,o.a,o.a},function(e,t,n){"use strict";var i=n(2),r=(n.n(i),n(14),n(17),n(29),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});"function"===typeof Symbol&&r(Symbol.iterator),Object.assign},function(e,t,n){function i(e,t){for(var n,i=[],r=0,o=0,s="",a=t&&t.delimiter||"/";null!=(n=b.exec(e));){var u=n[0],h=n[1],d=n.index;if(s+=e.slice(o,d),o=d+u.length,h)s+=h[1];else{var f=e[o],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],w=n[7];s&&(i.push(s),s="");var _=null!=p&&null!=f&&f!==p,x="+"===y||"*"===y,E="?"===y||"*"===y,A=n[2]||a,C=m||v;i.push({name:g||r++,prefix:p||"",delimiter:A,optional:E,repeat:x,partial:_,asterisk:!!w,pattern:C?l(C):w?".*":"[^"+c(A)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&i.push(s),i}function r(e,t){return a(i(e,t))}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===v(e[n])&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var r="",a=n||{},c=i||{},l=c.pretty?o:encodeURIComponent,u=0;u<e.length;u++){var h=e[u];if("string"!==typeof h){var d,f=a[h.name];if(null==f){if(h.optional){h.partial&&(r+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(y(f)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(d=l(f[p]),!t[u].test(d))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(d)+"`");r+=(0===p?h.prefix:h.delimiter)+d}}else{if(d=h.asterisk?s(f):l(f),!t[u].test(d))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+d+'"');r+=h.prefix+d}}else r+=h}return r}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e.sensitive?"":"i"}function d(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}function f(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(m(e[r],t,n).source);return u(new RegExp("(?:"+i.join("|")+")",h(n)),t)}function p(e,t,n){return g(i(e,n),t,n)}function g(e,t,n){y(t)||(n=t||n,t=[]),n=n||{};for(var i=n.strict,r=!1!==n.end,o="",s=0;s<e.length;s++){var a=e[s];if("string"===typeof a)o+=c(a);else{var l=c(a.prefix),d="(?:"+a.pattern+")";t.push(a),a.repeat&&(d+="(?:"+l+d+")*"),d=a.optional?a.partial?l+"("+d+")?":"(?:"+l+"("+d+"))?":l+"("+d+")",o+=d}}var f=c(n.delimiter||"/"),p=o.slice(-f.length)===f;return i||(o=(p?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=r?"$":i&&p?"":"(?="+f+"|$)",u(new RegExp("^"+o,h(n)),t)}function m(e,t,n){return y(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?d(e,t):y(e)?f(e,t,n):p(e,t,n)}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=n(143);e.exports=m,e.exports.parse=i,e.exports.compile=r,e.exports.tokensToFunction=a,e.exports.tokensToRegExp=g;var b=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n(53)},function(e,t,n){"use strict";function i(e){return function(){return function(t){return function(n){if(n.type!==r.a)return t(n);var i=n.payload,o=i.method,s=i.args;e[o].apply(e,s)}}}}t.a=i;var r=n(64)},function(e,t,n){"use strict";function i(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/service-worker.js";s?(o(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):r(e)})}}function r(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function o(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):r(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}t.a=i;var s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},function(e,t,n){"use strict";function i(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(r){return"function"===typeof r?r(n,i,e):t(r)}}}}t.__esModule=!0;var r=i();r.withExtraArgument=i,t.default=r},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(){function e(t){var n=t.getState,i=t.dispatch,d=Object(s.b)();return d.emit=(c.emitter||o.l)(d.emit),e.run=a.a.bind(null,{context:r,subscribe:d.subscribe,dispatch:i,getState:n,sagaMonitor:l,logger:u,onError:h}),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var n=e(t);return d.emit(t),n}}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.context,r=void 0===n?{}:n,c=i(t,["context"]),l=c.sagaMonitor,u=c.logger,h=c.onError;if(o.n.func(c))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(u&&!o.n.func(u))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(h&&!o.n.func(h))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(c.emitter&&!o.n.func(c.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");return e.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},e.setContext=function(e){Object(o.g)(e,o.n.object,Object(o.h)("sagaMiddleware",e)),o.s.assign(r,e)},e}t.a=r;var o=n(4),s=n(8),a=n(68)},function(e,t,n){"use strict";function i(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var c={done:!1,value:Object(o.h)(e)},l=function(e){return{done:!1,value:o.f.apply(void 0,[t].concat(i,[e]))}},u=void 0,h=function(e){return u=e};return Object(r.a)({q1:function(){return["q2",c,h]},q2:function(){return u===s.a?[r.b]:["q1",l(u)]}},"q1","takeEvery("+Object(r.c)(e)+", "+t.name+")")}t.a=i;var r=n(31),o=n(6),s=n(8)},function(e,t,n){"use strict";function i(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var c={done:!1,value:Object(o.h)(e)},l=function(e){return{done:!1,value:o.f.apply(void 0,[t].concat(i,[e]))}},u=function(e){return{done:!1,value:Object(o.e)(e)}},h=void 0,d=void 0,f=function(e){return h=e},p=function(e){return d=e};return Object(r.a)({q1:function(){return["q2",c,p]},q2:function(){return d===s.a?[r.b]:h?["q3",u(h)]:["q1",l(d),f]},q3:function(){return["q1",l(d),f]}},"q1","takeLatest("+Object(r.c)(e)+", "+t.name+")")}t.a=i;var r=n(31),o=n(6),s=n(8)},function(e,t,n){"use strict";function i(e,t,n){for(var i=arguments.length,l=Array(i>3?i-3:0),u=3;u<i;u++)l[u-3]=arguments[u];var h=void 0,d=void 0,f={done:!1,value:Object(o.a)(t,a.a.sliding(1))},p=function(){return{done:!1,value:Object(o.h)(d)}},g=function(e){return{done:!1,value:o.f.apply(void 0,[n].concat(l,[e]))}},m={done:!1,value:Object(o.d)(c.j,e)},v=function(e){return h=e},y=function(e){return d=e};return Object(r.a)({q1:function(){return["q2",f,y]},q2:function(){return["q3",p(),v]},q3:function(){return h===s.a?[r.b]:["q4",g(h)]},q4:function(){return["q2",m]}},"q1","throttle("+Object(r.c)(t)+", "+n.name+")")}t.a=i;var r=n(31),o=n(6),s=n(8),a=n(19),c=n(4)},function(e,t,n){"use strict";n(4),n(6),n(69)},function(e,t,n){"use strict";var i=n(12),r=n(15),o=n(154),s={routing:r.d,map:o.a};t.a=Object(i.c)(s)},function(e,t,n){"use strict";var i=n(33),r=n(188),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a,t=arguments[1];switch(t.type){case i.types.DID_INIT:var n=t.floors,o=t.buildings,s=t.currentFloor;return Object.assign({},e,{state:"idle",floors:n,buildings:o,currentFloor:s});case i.types.FLOOR_WILL_CHANGE:return Object.assign({},e,{state:"transition"});case i.types.FLOOR_DID_CHANGE:var a=t.currentFloor,c=t.previousFloor;return Object.assign({},e,{state:"idle",currentFloor:a,previousFloor:c});case i.types.ON_CLICK:var l=t.currentClickedEvent;return Object.assign({},e,{currentClickedEvent:l});case i.types.SWITCH_MODE:return Object.assign({},e,{mode:t.mode});case i.types.WILL_INIT:default:return e}};t.a=o},function(e,t,n){var i,r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,s,a,c){"use strict";function l(e,t,n){return setTimeout(p(e,n),t)}function u(e,t,n){return!!Array.isArray(e)&&(h(e,n[t],n),!0)}function h(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==c)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function d(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),e.apply(this,arguments)}}function f(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&ge(i,n)}function p(e,t){return function(){return e.apply(t,arguments)}}function g(e,t){return("undefined"===typeof e?"undefined":r(e))==ye?e.apply(t?t[0]||c:c,t):e}function m(e,t){return e===c?t:e}function v(e,t,n){h(_(t),function(t){e.addEventListener(t,n,!1)})}function y(e,t,n){h(_(t),function(t){e.removeEventListener(t,n,!1)})}function b(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function w(e,t){return e.indexOf(t)>-1}function _(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function E(e){return Array.prototype.slice.call(e,0)}function A(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];x(r,s)<0&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function C(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<me.length;){if(n=me[o],(i=n?n+r:t)in e)return i;o++}return c}function S(){return Ae++}function M(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}function k(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){g(e.options.enable,[e])&&n.handler(t)},this.init()}function T(e){var t=e.options.inputClass;return new(t||(Me?H:ke?G:Se?X:z))(e,F)}function F(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&Fe&&i-r===0,s=t&(Pe|Le)&&i-r===0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,O(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function O(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=R(t)),r>1&&!n.firstMultiple?n.firstMultiple=R(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=t.center=D(i);t.timeStamp=_e(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=j(a,c),t.distance=N(a,c),P(n,t),t.offsetDirection=I(t.deltaX,t.deltaY);var l=B(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=we(l.x)>we(l.y)?l.x:l.y,t.scale=s?$(s.pointers,i):1,t.rotation=s?U(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,L(n,t);var u=e.element;b(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function P(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Fe&&o.eventType!==Pe||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function L(e,t){var n,i,r,o,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(t.eventType!=Le&&(a>Te||s.velocity===c)){var l=t.deltaX-s.deltaX,u=t.deltaY-s.deltaY,h=B(a,l,u);i=h.x,r=h.y,n=we(h.x)>we(h.y)?h.x:h.y,o=I(l,u),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}function R(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:be(e.pointers[n].clientX),clientY:be(e.pointers[n].clientY)},n++;return{timeStamp:_e(),pointers:t,center:D(t),deltaX:e.deltaX,deltaY:e.deltaY}}function D(e){var t=e.length;if(1===t)return{x:be(e[0].clientX),y:be(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:be(n/t),y:be(i/t)}}function B(e,t,n){return{x:t/e||0,y:n/e||0}}function I(e,t){return e===t?Re:we(e)>=we(t)?e<0?De:Be:t<0?Ie:Ne}function N(e,t,n){n||(n=ze);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function j(e,t,n){n||(n=ze);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function U(e,t){return j(t[1],t[0],He)+j(e[1],e[0],He)}function $(e,t){return N(t[0],t[1],He)/N(e[0],e[1],He)}function z(){this.evEl=We,this.evWin=Ge,this.pressed=!1,k.apply(this,arguments)}function H(){this.evEl=Ke,this.evWin=Ye,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Je,this.evWin=Qe,this.started=!1,k.apply(this,arguments)}function W(e,t){var n=E(e.touches),i=E(e.changedTouches);return t&(Pe|Le)&&(n=A(n.concat(i),"identifier",!0)),[n,i]}function G(){this.evTarget=tt,this.targetIds={},k.apply(this,arguments)}function q(e,t){var n=E(e.touches),i=this.targetIds;if(t&(Fe|Oe)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=E(e.changedTouches),a=[],c=this.target;if(o=n.filter(function(e){return b(e.target,c)}),t===Fe)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),t&(Pe|Le)&&delete i[s[r].identifier],r++;return a.length?[A(o.concat(a),"identifier",!0),a]:void 0}function X(){k.apply(this,arguments);var e=p(this.handler,this);this.touch=new G(this.manager,e),this.mouse=new z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function K(e,t){e&Fe?(this.primaryTouch=t.changedPointers[0].identifier,Y.call(this,t)):e&(Pe|Le)&&Y.call(this,t)}function Y(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,nt)}}function Z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),s=Math.abs(n-r.y);if(o<=it&&s<=it)return!0}return!1}function J(e,t){this.manager=e,this.set(t)}function Q(e){if(w(e,ct))return ct;var t=w(e,lt),n=w(e,ut);return t&&n?ct:t||n?t?lt:ut:w(e,at)?at:st}function ee(e){this.options=ge({},this.defaults,e||{}),this.id=S(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=dt,this.simultaneous={},this.requireFail=[]}function te(e){return e&vt?"cancel":e&gt?"end":e&pt?"move":e&ft?"start":""}function ne(e){return e==Ne?"down":e==Ie?"up":e==De?"left":e==Be?"right":""}function ie(e,t){var n=t.manager;return n?n.get(e):e}function re(){ee.apply(this,arguments)}function oe(){re.apply(this,arguments),this.pX=null,this.pY=null}function se(){re.apply(this,arguments)}function ae(){ee.apply(this,arguments),this._timer=null,this._input=null}function ce(){re.apply(this,arguments)}function le(){re.apply(this,arguments)}function ue(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function he(e,t){return t=t||{},t.recognizers=m(t.recognizers,he.defaults.preset),new de(e,t)}function de(e,t){this.options=ge({},he.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=T(this),this.touchAction=new J(this,this.options.touchAction),fe(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function fe(e,t){var n=e.element;if(n.style){var i;h(e.options.cssProps,function(r,o){i=C(n.style,o),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function pe(e,t){var n=s.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var ge,me=["","webkit","Moz","MS","ms","o"],ve=s.createElement("div"),ye="function",be=Math.round,we=Math.abs,_e=Date.now;ge="function"!==typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==c&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var xe=d(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===c)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),Ee=d(function(e,t){return xe(e,t,!0)},"merge","Use `assign`."),Ae=1,Ce=/mobile|tablet|ip(ad|hone|od)|android/i,Se="ontouchstart"in o,Me=C(o,"PointerEvent")!==c,ke=Se&&Ce.test(navigator.userAgent),Te=25,Fe=1,Oe=2,Pe=4,Le=8,Re=1,De=2,Be=4,Ie=8,Ne=16,je=De|Be,Ue=Ie|Ne,$e=je|Ue,ze=["x","y"],He=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(M(this.element),this.evWin,this.domHandler)}};var Ve={mousedown:Fe,mousemove:Oe,mouseup:Pe},We="mousedown",Ge="mousemove mouseup";f(z,k,{handler:function(e){var t=Ve[e.type];t&Fe&&0===e.button&&(this.pressed=!0),t&Oe&&1!==e.which&&(t=Pe),this.pressed&&(t&Pe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var qe={pointerdown:Fe,pointermove:Oe,pointerup:Pe,pointercancel:Le,pointerout:Le},Xe={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ke="pointerdown",Ye="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Ke="MSPointerDown",Ye="MSPointerMove MSPointerUp MSPointerCancel"),f(H,k,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=qe[i],o=Xe[e.pointerType]||e.pointerType,s="touch"==o,a=x(t,e.pointerId,"pointerId");r&Fe&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):r&(Pe|Le)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var Ze={touchstart:Fe,touchmove:Oe,touchend:Pe,touchcancel:Le},Je="touchstart",Qe="touchstart touchmove touchend touchcancel";f(V,k,{handler:function(e){var t=Ze[e.type];if(t===Fe&&(this.started=!0),this.started){var n=W.call(this,e,t);t&(Pe|Le)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var et={touchstart:Fe,touchmove:Oe,touchend:Pe,touchcancel:Le},tt="touchstart touchmove touchend touchcancel";f(G,k,{handler:function(e){var t=et[e.type],n=q.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var nt=2500,it=25;f(X,k,{handler:function(e,t,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)K.call(this,t,n);else if(r&&Z.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=C(ve.style,"touchAction"),ot=rt!==c,st="auto",at="manipulation",ct="none",lt="pan-x",ut="pan-y",ht=function(){if(!ot)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||o.CSS.supports("touch-action",n)}),e}();J.prototype={set:function(e){"compute"==e&&(e=this.compute()),ot&&this.manager.element.style&&ht[e]&&(this.manager.element.style[rt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){g(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=w(i,ct)&&!ht[ct],o=w(i,ut)&&!ht[ut],s=w(i,lt)&&!ht[lt];if(r){var a=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(a&&c&&l)return}return s&&o?void 0:r||o&&n&je||s&&n&Ue?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var dt=1,ft=2,pt=4,gt=8,mt=gt,vt=16;ee.prototype={defaults:{},set:function(e){return ge(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(u(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ie(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return u(e,"dropRecognizeWith",this)?this:(e=ie(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(u(e,"requireFailure",this))return this;var t=this.requireFail;return e=ie(e,this),-1===x(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(u(e,"dropRequireFailure",this))return this;e=ie(e,this);var t=x(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;i<gt&&t(n.options.event+te(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=gt&&t(n.options.event+te(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|dt)))return!1;e++}return!0},recognize:function(e){var t=ge({},e);if(!g(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(mt|vt|32)&&(this.state=dt),this.state=this.process(t),this.state&(ft|pt|gt|vt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},f(re,ee,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(ft|pt),r=this.attrTest(e);return i&&(n&Le||!r)?t|vt:i||r?n&Pe?t|gt:t&ft?t|pt:ft:32}}),f(oe,re,{defaults:{event:"pan",threshold:10,pointers:1,direction:$e},getTouchAction:function(){var e=this.options.direction,t=[];return e&je&&t.push(ut),e&Ue&&t.push(lt),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&je?(r=0===o?Re:o<0?De:Be,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===s?Re:s<0?Ie:Ne,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return re.prototype.attrTest.call(this,e)&&(this.state&ft||!(this.state&ft)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ne(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(se,re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ft)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(ae,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[st]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Pe|Le)&&!r)this.reset();else if(e.eventType&Fe)this.reset(),this._timer=l(function(){this.state=mt,this.tryEmit()},t.time,this);else if(e.eventType&Pe)return mt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===mt&&(e&&e.eventType&Pe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=_e(),this.manager.emit(this.options.event,this._input)))}}),f(ce,re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ft)}}),f(le,re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:je|Ue,pointers:1},getTouchAction:function(){return oe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(je|Ue)?t=e.overallVelocity:n&je?t=e.overallVelocityX:n&Ue&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&we(t)>this.options.velocity&&e.eventType&Pe},emit:function(e){var t=ne(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(ue,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Fe&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=Pe)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||N(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=mt,this.tryEmit()},t.interval,this),ft):mt}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==mt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),he.VERSION="2.0.7",he.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ce,{enable:!1}],[se,{enable:!1},["rotate"]],[le,{direction:je}],[oe,{direction:je},["swipe"]],[ue],[ue,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};de.prototype={set:function(e){return ge(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&mt)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(ft|pt|gt)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof ee)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(u(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(u(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=x(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==c&&t!==c){var n=this.handlers;return h(_(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==c){var n=this.handlers;return h(_(e),function(e){t?n[e]&&n[e].splice(x(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&pe(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&fe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ge(he,{INPUT_START:Fe,INPUT_MOVE:Oe,INPUT_END:Pe,INPUT_CANCEL:Le,STATE_POSSIBLE:dt,STATE_BEGAN:ft,STATE_CHANGED:pt,STATE_ENDED:gt,STATE_RECOGNIZED:mt,STATE_CANCELLED:vt,STATE_FAILED:32,DIRECTION_NONE:Re,DIRECTION_LEFT:De,DIRECTION_RIGHT:Be,DIRECTION_UP:Ie,DIRECTION_DOWN:Ne,DIRECTION_HORIZONTAL:je,DIRECTION_VERTICAL:Ue,DIRECTION_ALL:$e,Manager:de,Input:k,TouchAction:J,TouchInput:G,MouseInput:z,PointerEventInput:H,TouchMouseInput:X,SingleTouchInput:V,Recognizer:ee,AttrRecognizer:re,Tap:ue,Pan:oe,Swipe:le,Pinch:se,Rotate:ce,Press:ae,on:v,off:y,each:h,merge:Ee,extend:xe,assign:ge,inherit:f,bindFn:p,prefixed:C}),("undefined"!==typeof o?o:"undefined"!==typeof self?self:{}).Hammer=he,(i=function(){return he}.call(t,n,t,e))!==c&&(e.exports=i)}(window,document)},function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return h});var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c={ERROR:"error",WARN:"warn",INFO:"info",VERBOSE:"verbose",DEBUG:"debug",SILLY:"silly"},l=function(){function e(){o(this,e)}return a(e,[{key:"log",value:function(e,t,n){throw new Error("This is an interface")}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.ERROR,e,t)}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.WARN,e,t)}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.INFO,e,t)}},{key:"verbose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.VERBOSE,e,t)}},{key:"debug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.DEBUG,e,t)}},{key:"silly",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.log(c.SILLY,e,t)}}],[{key:"isValidLogger",value:function(e){var t={isValid:!0,reasons:[]};return"object"!=("undefined"===typeof e?"undefined":s(e))||null===e?(t.isValid=!1,t.reasons.push("Logger must be a not null object"),t):(Object.keys(c).forEach(function(n){var i=c[n];"function"!=typeof e[i]&&(t.isValid=!1,t.reasons.push("Logger must implement method "+i))}),t)}},{key:"_getLevelValue",value:function(e){switch(e){case c.ERROR:return 0;case c.WARN:return 1;case c.INFO:return 2;case c.VERBOSE:return 3;case c.DEBUG:return 4;case c.SILLY:return 5;default:return 2}}}]),e}(),u=(function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}r(t,e),a(t,[{key:"log",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}])}(l),function(e){function t(e,n){var r;return o(this,t),r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r.logger=e,r.tag=n,r}return r(t,e),a(t,[{key:"log",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.logger.log(e,"["+this.tag+"]"+t,n)}}]),t}(l)),h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.WARN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.level=n,e.tag=r,e}return r(t,e),a(t,[{key:"log",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(this.constructor._getLevelValue(this.level)<this.constructor._getLevelValue(e))){var i=null;i=null!==this.tag?"["+e+"]["+this.tag+"]: "+t:"["+e+"]: "+t,n?console.log(i,n):console.log(i)}}}]),t}(l)},function(e,t,n){"use strict";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new r(n,i||e,o),a=l?l+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],s]:e._events[a].push(s):(e._events[a]=s,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}var c=Object.prototype.hasOwnProperty,l="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(l=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)c.call(e,t)&&n.push(l?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=l?l+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,o=new Array(r);i<r;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=l?l+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,r,o){var s=l?l+e:e;if(!this._events[s])return!1;var a,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,r),!0;case 6:return u.fn.call(u.context,t,n,i,r,o),!0}for(c=1,a=new Array(h-1);c<h;c++)a[c-1]=arguments[c];u.fn.apply(u.context,a)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!a)for(d=1,a=new Array(h-1);d<h;d++)a[d-1]=arguments[d];u[c].fn.apply(u[c].context,a)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,i){var r=l?l+e:e;if(!this._events[r])return this;if(!t)return s(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,r);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==t||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[r]=1===c.length?c[0]:c:s(this,r)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=l?l+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=l,a.EventEmitter=a,e.exports=a},function(e,t,n){e.exports=n(159)},function(e,t,n){"use strict";function i(e){var t=new s(e),n=o(s.prototype.request,t);return r.extend(n,s.prototype,t),r.extend(n,t),n}var r=n(5),o=n(75),s=n(161),a=n(36),c=i(a);c.Axios=s,c.create=function(e){return i(r.merge(a,e))},c.Cancel=n(79),c.CancelToken=n(175),c.isCancel=n(78),c.all=function(e){return Promise.all(e)},c.spread=n(176),e.exports=c,e.exports.default=c},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function i(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var r=n(36),o=n(5),s=n(170),a=n(171);i.prototype.request=function(e){"string"===typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(r,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,n,i){return this.request(o.merge(i||{},{method:e,url:t,data:n}))}}),e.exports=i},function(e,t,n){"use strict";var i=n(5);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},function(e,t,n){"use strict";var i=n(77);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e}},function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=n(5);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))}))}),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var i=n(5),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var i=n(5);e.exports=i.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return t=e(window.location.href),function(n){var r=i.isString(n)?e(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function i(){this.message="String contains an invalid character"}function r(e){for(var t,n,r=String(e),s="",a=0,c=o;r.charAt(0|a)||(c="=",a%1);s+=c.charAt(63&t>>8-a%1*8)){if((n=r.charCodeAt(a+=.75))>255)throw new i;t=t<<8|n}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){"use strict";var i=n(5);e.exports=i.isStandardBrowserEnv()?function(){return{write:function(e,t,n,r,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function i(){this.handlers=[]}var r=n(5);i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var r=n(5),o=n(172),s=n(78),a=n(36),c=n(173),l=n(174);e.exports=function(e){return i(e),e.baseURL&&!c(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return i(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(i(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var i=n(5);e.exports=function(e,t,n){return i.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}var r=n(79);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,c){"object"===s(t)?e.exports=t=c(n(11)):(r=[n(11)],i=c,void 0!==(o="function"===typeof i?i.apply(t,r):i)&&(e.exports=o))}(0,function(e){return function(t){function n(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function i(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function r(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function o(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}var s=e,a=s.lib,c=a.WordArray,l=a.Hasher,u=s.algo,h=[];!function(){for(var e=0;e<64;e++)h[e]=4294967296*t.abs(t.sin(e+1))|0}();var d=u.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var a=t+s,c=e[a];e[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var l=this._hash.words,u=e[t+0],d=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],m=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],w=e[t+9],_=e[t+10],x=e[t+11],E=e[t+12],A=e[t+13],C=e[t+14],S=e[t+15],M=l[0],k=l[1],T=l[2],F=l[3];M=n(M,k,T,F,u,7,h[0]),F=n(F,M,k,T,d,12,h[1]),T=n(T,F,M,k,f,17,h[2]),k=n(k,T,F,M,p,22,h[3]),M=n(M,k,T,F,g,7,h[4]),F=n(F,M,k,T,m,12,h[5]),T=n(T,F,M,k,v,17,h[6]),k=n(k,T,F,M,y,22,h[7]),M=n(M,k,T,F,b,7,h[8]),F=n(F,M,k,T,w,12,h[9]),T=n(T,F,M,k,_,17,h[10]),k=n(k,T,F,M,x,22,h[11]),M=n(M,k,T,F,E,7,h[12]),F=n(F,M,k,T,A,12,h[13]),T=n(T,F,M,k,C,17,h[14]),k=n(k,T,F,M,S,22,h[15]),M=i(M,k,T,F,d,5,h[16]),F=i(F,M,k,T,v,9,h[17]),T=i(T,F,M,k,x,14,h[18]),k=i(k,T,F,M,u,20,h[19]),M=i(M,k,T,F,m,5,h[20]),F=i(F,M,k,T,_,9,h[21]),T=i(T,F,M,k,S,14,h[22]),k=i(k,T,F,M,g,20,h[23]),M=i(M,k,T,F,w,5,h[24]),F=i(F,M,k,T,C,9,h[25]),T=i(T,F,M,k,p,14,h[26]),k=i(k,T,F,M,b,20,h[27]),M=i(M,k,T,F,A,5,h[28]),F=i(F,M,k,T,f,9,h[29]),T=i(T,F,M,k,y,14,h[30]),k=i(k,T,F,M,E,20,h[31]),M=r(M,k,T,F,m,4,h[32]),F=r(F,M,k,T,b,11,h[33]),T=r(T,F,M,k,x,16,h[34]),k=r(k,T,F,M,C,23,h[35]),M=r(M,k,T,F,d,4,h[36]),F=r(F,M,k,T,g,11,h[37]),T=r(T,F,M,k,y,16,h[38]),k=r(k,T,F,M,_,23,h[39]),M=r(M,k,T,F,A,4,h[40]),F=r(F,M,k,T,u,11,h[41]),T=r(T,F,M,k,p,16,h[42]),k=r(k,T,F,M,v,23,h[43]),M=r(M,k,T,F,w,4,h[44]),F=r(F,M,k,T,E,11,h[45]),T=r(T,F,M,k,S,16,h[46]),k=r(k,T,F,M,f,23,h[47]),M=o(M,k,T,F,u,6,h[48]),F=o(F,M,k,T,y,10,h[49]),T=o(T,F,M,k,C,15,h[50]),k=o(k,T,F,M,m,21,h[51]),M=o(M,k,T,F,E,6,h[52]),F=o(F,M,k,T,p,10,h[53]),T=o(T,F,M,k,_,15,h[54]),k=o(k,T,F,M,d,21,h[55]),M=o(M,k,T,F,b,6,h[56]),F=o(F,M,k,T,S,10,h[57]),T=o(T,F,M,k,v,15,h[58]),k=o(k,T,F,M,A,21,h[59]),M=o(M,k,T,F,g,6,h[60]),F=o(F,M,k,T,x,10,h[61]),T=o(T,F,M,k,f,15,h[62]),k=o(k,T,F,M,w,21,h[63]),l[0]=l[0]+M|0,l[1]=l[1]+k|0,l[2]=l[2]+T|0,l[3]=l[3]+F|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var o=t.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});s.MD5=l._createHelper(d),s.HmacMD5=l._createHmacHelper(d)}(Math),e.MD5})},function(e,t,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,c){"object"===s(t)?e.exports=t=c(n(11)):(r=[n(11)],i=c,void 0!==(o="function"===typeof i?i.apply(t,r):i)&&(e.exports=o))}(0,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,n=t.lib,i=n.WordArray,r=i.init;(i.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],i=0;i<t;i++)n[i>>>2]|=e[i]<<24-i%4*8;r.call(this,n,t)}else r.apply(this,arguments)}).prototype=i}}(),e.lib.WordArray})},function(e,t,n){var i,r,o,s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,c){"object"===s(t)?e.exports=t=c(n(11)):(r=[n(11)],i=c,void 0!==(o="function"===typeof i?i.apply(t,r):i)&&(e.exports=o))}(0,function(e){return function(){var t=e,n=t.lib,i=n.WordArray,r=n.Hasher,o=t.algo,s=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|e[t+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var h=(i<<5|i>>>27)+c+s[l];h+=l<20?1518500249+(r&o|~r&a):l<40?1859775393+(r^o^a):l<60?(r&o|r&a|o&a)-1894007588:(r^o^a)-899497514,c=a,a=o,o=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=r._createHelper(a),t.HmacSHA1=r._createHmacHelper(a)}(),e.SHA1})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return v}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return y}),n.d(t,"d",function(){return l});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){r(this,e)}return o(e,null,[{key:"toDegree",value:function(e){return 180*e/Math.PI}},{key:"toRadian",value:function(e){return e*Math.PI/180}}]),e}(),a=function(){function e(t,n,i){r(this,e),this.a=t,this.e=n,this.f=i,this.k0=.9996,this.ePow2=Math.pow(this.e,2),this.ePow4=Math.pow(this.e,4),this.ePow6=Math.pow(this.e,6),this.e1sq=this.ePow2/(1-this.ePow2)}return o(e,null,[{key:"fromFlattening",value:function(e,t){return new this(e,Math.sqrt(2*t-Math.pow(t,2)),t)}}]),e}(),c=a.fromFlattening(6378137,1/298.257223563),l=function e(t){r(this,e),this.k=c.k0,this.E=5e5;var n=s.toDegree(t.long);this.zone=n<0?Math.floor((180+n)/6+1):Math.floor(n/6+31),this.long=s.toRadian(6*(this.zone-30)-3),this.N=t.lat<0?1e7:0,this.hemi=0===this.N?1:-1},u=1-c.ePow2/4-3/64*c.ePow4-5/256*c.ePow6,h=3/8*c.ePow2+3/32*c.ePow4+45/1024*c.ePow6,d=15/256*c.ePow4+45/1024*c.ePow6,f=35/3072*c.ePow6,p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.gps=t,this.utmGridZone=n||new l(this.gps),this.deltaLong=this.gps.long-this.utmGridZone.long,this.Nu=1/Math.sqrt(1-c.ePow2*Math.pow(Math.sin(this.gps.lat),2)),this.A=this.deltaLong*Math.cos(this.gps.lat),this.APow2=Math.pow(this.A,2),this.APow3=Math.pow(this.A,3),this.APow4=Math.pow(this.A,4),this.APow5=Math.pow(this.A,5),this.APow6=Math.pow(this.A,6);var i=Math.sin(2*this.gps.lat),o=Math.sin(4*this.gps.lat),s=Math.sin(6*this.gps.lat);this.S=u*this.gps.lat-h*i+d*o-f*s,this.T=Math.pow(Math.tan(this.gps.lat),2),this.TPow2=Math.pow(this.T,2),this.C=c.ePow2/(1-c.ePow2)*Math.pow(Math.cos(this.gps.lat),2),this.CPow2=Math.pow(this.C,2),this.E=this.A+(1-this.T+this.C)/6*this.APow3,this.E+=(5-18*this.T+this.TPow2)*this.APow5/120,this.E*=this.utmGridZone.k*c.a*this.Nu,this.E+=this.utmGridZone.E,this.N=this.APow2/2,this.N+=(5-this.T+9*this.C+4*this.CPow2)*this.APow4/24,this.N+=(61-58*this.T+this.TPow2)*this.APow6/720,this.N*=this.Nu*Math.tan(this.gps.lat),this.N+=this.S,this.N*=c.a*this.utmGridZone.k,this.N+=this.utmGridZone.N},g=function e(t){r(this,e);var n=t.N,i=1===t.hemi;i||(n=1e7-n);var o=n/c.k0/(c.a*(1-Math.pow(c.e,2)/4-3*Math.pow(c.e,4)/64-5*Math.pow(c.e,6)/256)),s=(1-Math.pow(1-c.ePow2,.5))/(1+Math.pow(1-c.ePow2,.5)),a=21*Math.pow(s,2)/16-55*Math.pow(s,4)/32,l=151*Math.pow(s,3)/96,u=1097*Math.pow(s,4)/512,h=o+(3*s/2-27*Math.pow(s,3)/32)*Math.sin(2*o)+a*Math.sin(4*o)+l*Math.sin(6*o)+u*Math.sin(8*o),d=c.a/Math.pow(1-Math.pow(c.e*Math.sin(h),2),.5),f=c.a*(1-c.ePow2)/Math.pow(1-Math.pow(c.e*Math.sin(h),2),1.5),p=d*Math.tan(h)/f,g=5e5-t.E,m=g/(d*c.k0),v=m*m/2,y=Math.pow(Math.tan(h),2),b=c.e1sq*Math.pow(Math.cos(h),2),w=(5+3*y+10*b-4*b*b-9*c.e1sq)*Math.pow(m,4)/24,_=(61+90*y+298*b+45*y*y-252*c.e1sq-3*b*b)*Math.pow(m,6)/720,x=(g/(d*c.k0)-(1+2*y+b)*Math.pow(m,3)/6+(5-2*b+28*y-3*Math.pow(b,2)+8*c.e1sq+24*Math.pow(y,2))*Math.pow(m,5)/120)/Math.cos(h)*180/Math.PI;this.latitude=180*(h-p*(v+w+_))/Math.PI,i||(this.latitude=-this.latitude);var E=t.zone>0?6*t.zone-183:3;this.longitude=E-x},m=function e(t,n,i,o,s){r(this,e),this.E=t,this.N=n,this.alt=i,this.hemi=o,this.zone=s},v=function(){function e(t,n,i){r(this,e),this.lat=t,this.long=n,this.alt=i}return o(e,[{key:"latInDegree",get:function(){return s.toDegree(this.lat)}},{key:"longInDegree",get:function(){return s.toDegree(this.long)}}],[{key:"fromDegree",value:function(e,t,n){return new this(s.toRadian(e),s.toRadian(t),n)}}]),e}(),y=function(){function e(){r(this,e)}return o(e,null,[{key:"toUtm",value:function(e,t){var n=new p(e,t);return new m(n.E,n.N,e.alt,n.utmGridZone.hemi,n.utmGridZone.zone)}},{key:"toGps",value:function(e){var t=new g(e);return v.fromDegree(t.latitude,t.longitude,e.alt)}}]),e}(),b=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,e),this.n=t,this.m=n,null===i?(this.values=new Array(this.n*this.m),this.values.fill(0)):this.values=i}return o(e,[{key:"get",value:function(e,t){return this.values[this.getIndex(e,t)]}},{key:"set",value:function(e,t,n){return this.values[this.getIndex(e,t)]=n,this}},{key:"getIndex",value:function(e,t){if("number"!=typeof e||e>=this.n)throw new Error("Invalid row index");if("number"!=typeof t||t>=this.m)throw new Error("Invalid column index");return e*this.m+t}},{key:"transpose",value:function(){for(var t=new e(this.m,this.n),n=0;n<this.n;n++)for(var i=0;i<this.m;i++)t.set(i,n,this.get(n,i));return t}},{key:"multiply",value:function(e){if("number"!=typeof e)throw new Error("Expected a number");return this.values=this.values.map(function(t){return t*e}),this}},{key:"extractColumn",value:function(t){for(var n=new e(this.n,1),i=0;i<this.n;i++)n.set(i,0,this.get(i,t));return n}}],[{key:"sum",value:function(t,n){if(t.m!==n.m||t.n!==n.n)throw new Error("Invalid given matrices");return new e(t.n,t.m,t.values.map(function(e,t){return e+n.values[t]}))}},{key:"identity",value:function(t){for(var n=new e(t,t),i=0;i<t;i++)n.set(i,i,1);return n}},{key:"additiveInverse",value:function(t){return new e(t.n,t.m,t.values.map(function(e){return-1*e}))}},{key:"product",value:function(t,n){if(!(t instanceof e&&n instanceof e))throw new Error("Expected two Matrices");if(t.m!==n.n)throw new Error("Invalid given matrices");for(var i=t.m,r=new e(t.n,n.m),o=0;o<r.n;o++)for(var s=0;s<r.m;s++){for(var a=0,c=0;c<i;c++)a+=t.get(o,c)*n.get(c,s);r.set(o,s,a)}return r}},{key:"inverseMatrix3",value:function(t){if(3!==t.n||3!==t.m)throw new Error("Works only with Matrix 3");var n=t.extractColumn(0),i=t.extractColumn(1),r=t.extractColumn(2),o=this.determinantMatrix3(t);if(0===o)throw new Error("Not inversible matrix");var s=this.crossProductVector3(i,r).transpose().multiply(1/o),a=this.crossProductVector3(r,n).transpose().multiply(1/o),c=this.crossProductVector3(n,i).transpose().multiply(1/o),l=new e(3,3);return l.set(0,0,s.get(0,0)),l.set(0,1,s.get(0,1)),l.set(0,2,s.get(0,2)),l.set(1,0,a.get(0,0)),l.set(1,1,a.get(0,1)),l.set(1,2,a.get(0,2)),l.set(2,0,c.get(0,0)),l.set(2,1,c.get(0,1)),l.set(2,2,c.get(0,2)),l}},{key:"determinantMatrix3",value:function(t){if(3!==t.n||3!==t.m)throw new Error("Works only with Matrix 3");var n=t.extractColumn(0),i=t.extractColumn(1),r=t.extractColumn(2);return e.dotProductVector(n,e.crossProductVector3(i,r))}},{key:"crossProductVector3",value:function(t,n){if(3!==t.n||1!==t.m||3!==n.n||1!==n.m)throw new Error("Works only with Matrix 3x1");var i=new e(3,1);return i.set(0,0,t.get(1,0)*n.get(2,0)-t.get(2,0)*n.get(1,0)),i.set(1,0,t.get(2,0)*n.get(0,0)-t.get(0,0)*n.get(2,0)),i.set(2,0,t.get(0,0)*n.get(1,0)-t.get(1,0)*n.get(0,0)),i}},{key:"dotProductVector",value:function(e,t){if(1!==e.m||1!==t.m||e.n!==t.n)throw new Error("Works only with Matrix nx1");for(var n=0,i=0;i<e.n;i++)n+=e.get(i,0)*t.get(i,0);return n}}]),e}(),w=function(){function e(){r(this,e)}return o(e,null,[{key:"compute2ParametersRegression",value:function(e){for(var t=e.length,n=new b(t,3),i=new b(t,1),r=0;r<t;r++)n.set(r,0,1),n.set(r,1,e[r].parameters.get(0,0)),n.set(r,2,e[r].parameters.get(1,0)),i.set(r,0,e[r].result);var o=n.transpose();return b.product(b.product(b.inverseMatrix3(b.product(o,n)),o),i)}}]),e}();!function(){function e(t,n){r(this,e),this.transformMatrix=t,this.translateMatrix=n,this._reverseTransform=null}o(e,[{key:"convert",value:function(e){var t=new b(3,1,[e.x,e.y,e.z]),n=b.sum(b.product(this.transformMatrix,t),this.translateMatrix);return{x:n.get(0,0),y:n.get(1,0),z:n.get(2,0)}}},{key:"revert",value:function(e){return this.reverseTransform.convert(e)}},{key:"getDistanceAverageError",value:function(e,t){for(var n=e.length,i=0,r=0;r<n;r++){var o=e[r],s=t[r];i+=this.constructor._getDistance(this.convert(o),s)}return i/n}},{key:"getDistanceErrorRepartitionFromAverage",value:function(e,t){var n=e.length,i=this.getDistanceAverageError(e,t),r=new Array(10);r.fill(0);for(var o=0;o<n;o++){var s=e[o],a=t[o],c=this.constructor._getDistance(this.convert(s),a),l=Math.abs(i-c)/i*100,u=Math.trunc(l/10);u>9&&(u=9),r[u]++}return r.map(function(e){return Math.floor(e/n*100)})}},{key:"getRelativeDistanceErrorFromAverage",value:function(e,t){for(var n=e.length,i=this.getDistanceAverageError(e,t),r=[],o=0;o<n;o++){var s=e[o],a=t[o],c=this.constructor._getDistance(this.convert(s),a);r[o]=Math.abs(i-c)/i*100}return r}},{key:"getAmplitudeError",value:function(e,t){for(var n=e.length,i={x:1/0,y:1/0,z:1/0},r={x:-1/0,y:-1/0,z:-1/0},o=0;o<n;o++){var s=e[o],a=t[o],c=this.convert(s),l=Math.abs(c.x-a.x),u=Math.abs(c.y-a.y);l<i.x&&(i.x=l),l>r.x&&(r.x=l),u<i.y&&(i.y=u),u>r.y&&(r.y=u)}return{x:r.x-i.x,y:r.y-i.y}}},{key:"reverseTransform",get:function(){if(null===this._reverseTransform){var t=b.inverseMatrix3(this.transformMatrix),n=b.additiveInverse(b.product(t,this.translateMatrix));this._reverseTransform=new e(t,n),this._reverseTransform._reverseTransform=this}return this._reverseTransform}}],[{key:"computeSample",value:function(e,t){return this._leastSquareComputeSample(e,t)}},{key:"_leastSquareComputeSample",value:function(e,t){for(var n=[],r=0;r<e.length;r++){var o=[].concat(i(e)),s=[].concat(i(t)),a=o[r],c=s[r];o[r]=o[0],s[r]=s[0],o[0]=a,s[0]=c,n.push(this._leastSquareComputeSampleWithOrigin(o,s))}return this._selectResultLeastAverageDistanceError(n,e,t)}},{key:"_leastSquareComputeSampleWithOrigin",value:function(t,n){for(var i=[],r=[],o=t[0],s=n[0],a=1;a<t.length;a++){var c=t[a],l=n[a],u=new b(2,1);u.set(0,0,c.x-o.x),u.set(1,0,c.y-o.y);var h=new b(2,1);h.set(0,0,l.x-s.x),h.set(1,0,l.y-s.y),i.push({parameters:u,result:h.get(0,0)}),r.push({parameters:u,result:h.get(1,0)})}var d=w.compute2ParametersRegression(i),f=w.compute2ParametersRegression(r),p=new b(3,3);p.set(0,0,d.get(1,0)),p.set(0,1,d.get(2,0)),p.set(0,2,0),p.set(1,0,f.get(1,0)),p.set(1,1,f.get(2,0)),p.set(1,2,0),p.set(2,0,0),p.set(2,1,0),p.set(2,2,1);var g=new b(3,1);return g.set(0,0,s.x+d.get(0,0)-d.get(1,0)*o.x-d.get(2,0)*o.y),g.set(1,0,s.y+f.get(0,0)-f.get(1,0)*o.x-f.get(2,0)*o.y),g.set(2,0,0),new e(p,g)}},{key:"_linearComputeSample",value:function(e,t){for(var n=e.length,i=[],r=0;r<n-2;r++)for(var o=e[r],s=t[r],a=r+1;a<n-1;a++)for(var c=e[a],l=t[a],u=a+1;u<n;u++){var h=e[u],d=t[u],f=this._linearComputeTripletSample(o,c,h,s,l,d);i.push(f)}return this._selectResultLeastAverageDistanceError(i,e,t)}},{key:"_linearComputeTripletSample",value:function(t,n,i,r,o,s){var a=n.x-t.x,c=n.y-t.y,l=i.x-t.x,u=i.y-t.y,h=o.x-r.x,d=o.y-r.y,f=((s.x-r.x)*a-h*l)/(u*a-l*c),p=((s.y-r.y)*a-d*l)/(u*a-l*c),g=(h-f*c)/a,m=(d-p*c)/a,v=new b(3,3);v.set(0,0,g),v.set(0,1,f),v.set(0,2,0),v.set(1,0,m),v.set(1,1,p),v.set(1,2,0),v.set(2,0,0),v.set(2,1,0),v.set(2,2,1);var y=new b(3,1);return y.set(0,0,r.x-g*t.x-f*t.y),y.set(1,0,r.y-m*t.x-p*t.y),y.set(2,0,0),new e(v,y)}},{key:"_selectResultLeastAverageDistanceError",value:function(e,t,n){var i=null,r=1/0;if(!Array.isArray(e)||0===e.length)throw new Error("Expected a non empty array");return e.forEach(function(e){var o=e.getDistanceAverageError(t,n);o<r&&(i=e,r=o)}),i}},{key:"_getDistance",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}}])}()},function(e,t,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(182),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t,n){(function(e){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){"use strict";function i(e,t,n,i){var r=t&&t.prototype instanceof o?t:o,s=Object.create(r.prototype),a=new p(i||[]);return s._invoke=u(e,n,a),s}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function s(){}function a(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function n(i,o,s,a){var c=r(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"===("undefined"===typeof u?"undefined":t(u))&&b.call(u,"__await")?Promise.resolve(u.__await).then(function(e){n("next",e,s,a)},function(e){n("throw",e,s,a)}):Promise.resolve(u).then(function(e){l.value=e,s(l)},a)}a(c.arg)}function i(e,t){function i(){return new Promise(function(i,r){n(e,t,i,r)})}return o=o?o.then(i,i):i()}var o;this._invoke=i}function u(e,t,n){var i=S;return function(o,s){if(i===k)throw new Error("Generator is already running");if(i===T){if("throw"===o)throw s;return m()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=h(a,n);if(c){if(c===F)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=T,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=k;var l=r(e,t,n);if("normal"===l.type){if(i=n.done?T:M,l.arg===F)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=T,n.method="throw",n.arg=l.arg)}}}function h(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,h(e,t),"throw"===t.method))return F;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,F;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,F):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,F)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function g(e){if(e){var t=e[_];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return i.next=i}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype,b=y.hasOwnProperty,w="function"===typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",E=w.toStringTag||"@@toStringTag",A="object"===t(e),C=n.regeneratorRuntime;if(C)return void(A&&(e.exports=C));C=n.regeneratorRuntime=A?e.exports:{},C.wrap=i;var S="suspendedStart",M="suspendedYield",k="executing",T="completed",F={},O={};O[_]=function(){return this};var P=Object.getPrototypeOf,L=P&&P(P(g([])));L&&L!==y&&b.call(L,_)&&(O=L);var R=a.prototype=o.prototype=Object.create(O);s.prototype=R.constructor=a,a.constructor=s,a[E]=s.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,E in e||(e[E]="GeneratorFunction")),e.prototype=Object.create(R),e},C.awrap=function(e){return{__await:e}},c(l.prototype),l.prototype[x]=function(){return this},C.AsyncIterator=l,C.async=function(e,t,n,r){var o=new l(i(e,t,n,r));return C.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},c(R),R[E]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},C.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,i&&(n.method="next",n.arg=v),!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=b.call(r,"catchLoc"),a=b.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&b.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,F):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),F},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),F}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),F}}}(function(){return this}()||Function("return this")())}).call(t,n(80)(e))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(35),a=(n.n(s),n(9)),c=n(39),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.awm=e,n.objectsLoader=new c.a(n.awm),n}return o(t,e),l(t,[{key:"createDefault",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("AdsumObjectId");return new Promise(function(e,r){t.objectsLoader.createJSON3DObj("assets/3dModels/youarehere.json").then(function(t){t.visible=!0,t.scale.set(7,7,7),t.rotateX(Math.PI/2);t.scale.multiplyScalar(2),new s.Tween(t.rotation).to({y:2*Math.PI},2e3).repeat(1/0).on("update",function(){t.updateMatrixWorld()}).start(),e(a.g._createFromMesh(t,n,i))})})}}]),t}(a.g);t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addColor:function(e,t,n){var i=this.colors,r=this.object.geometry.colors;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addUV:function(e,t,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[e+0],i[e+1]),r.push(i[t+0],i[t+1]),r.push(i[n+0],i[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,i,r,o,s,a,c){var l=this.vertices.length,u=this.parseVertexIndex(e,l),h=this.parseVertexIndex(t,l),d=this.parseVertexIndex(n,l);if(this.addVertex(u,h,d),void 0!==i&&""!==i){var f=this.uvs.length;u=this.parseUVIndex(i,f),h=this.parseUVIndex(r,f),d=this.parseUVIndex(o,f),this.addUV(u,h,d)}if(void 0!==s&&""!==s){var p=this.normals.length;u=this.parseNormalIndex(s,p),h=s===a?u:this.parseNormalIndex(a,p),d=s===c?u:this.parseNormalIndex(c,p),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,i=e.length;n<i;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=e.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(e[r],n));for(var s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],i))}};return e.startObject("",!1),e}var o=n(10),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=/^[og]\s*(.+)?/,c=/^mtllib /,l=/^usemtl /,u=function(){function e(t){i(this,e),this.manager=void 0!==t?t:o.DefaultLoadingManager,this.materials=null}return s(e,[{key:"load",value:function(e,t,n,i){var r=this,s=new o.FileLoader(r.manager);s.setPath(this.path),s.load(e,function(e){t(r.parse(e))},n,i)}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setMaterials",value:function(e){return this.materials=e,this}},{key:"parse",value:function(e){console.time("OBJLoader");var t=new r;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var n=e.split("\n"),i="",s="",u=[],h="function"===typeof"".trimLeft,d=0,f=n.length;d<f;d++)if(i=n[d],i=h?i.trimLeft():i.trim(),0!==i.length&&"#"!==(s=i.charAt(0)))if("v"===s){var p=i.split(/\s+/);switch(p[0]){case"v":t.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&t.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":t.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":t.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===s){for(var g=i.substr(1).trim(),m=g.split(/\s+/),v=[],y=0,b=m.length;y<b;y++){var w=m[y];if(w.length>0){var _=w.split("/");v.push(_)}}for(var x=v[0],E=1,A=v.length-1;E<A;E++){var C=v[E],S=v[E+1];t.addFace(x[0],C[0],S[0],x[1],C[1],S[1],x[2],C[2],S[2])}}else if("l"===s){var M=i.substring(1).trim().split(" "),k=[],T=[];if(-1===i.indexOf("/"))k=M;else for(var F=0,O=M.length;F<O;F++){var P=M[F].split("/");""!==P[0]&&k.push(P[0]),""!==P[1]&&T.push(P[1])}t.addLineGeometry(k,T)}else if("p"===s){var L=i.substr(1).trim(),R=L.split(" ");t.addPointGeometry(R)}else if(null!==(u=a.exec(i))){var D=(" "+u[0].substr(1).trim()).substr(1);t.startObject(D)}else if(l.test(i))t.object.startMaterial(i.substring(7).trim(),t.materialLibraries);else if(c.test(i))t.materialLibraries.push(i.substring(7).trim());else{if("s"!==s){if("\0"===i)continue;throw new Error('three.OBJLoader: Unexpected line: "'+i+'"')}if(u=i.split(" "),u.length>1){var B=u[1].trim().toLowerCase();t.object.smooth="0"!==B&&"off"!==B}else t.object.smooth=!0;var I=t.object.currentMaterial();I&&(I.smooth=t.object.smooth)}t.finalize();var N=new o.Group;N.materialLibraries=[].concat(t.materialLibraries);for(var j=0,U=t.objects.length;j<U;j++){var $=t.objects[j],z=$.geometry,H=$.materials,V="Line"===z.type,W="Points"===z.type,G=!1;if(0!==z.vertices.length){var q=new o.BufferGeometry;q.addAttribute("position",new o.Float32BufferAttribute(z.vertices,3)),z.normals.length>0?q.addAttribute("normal",new o.Float32BufferAttribute(z.normals,3)):q.computeVertexNormals(),z.colors.length>0&&(G=!0,q.addAttribute("color",new o.Float32BufferAttribute(z.colors,3))),z.uvs.length>0&&q.addAttribute("uv",new o.Float32BufferAttribute(z.uvs,2));for(var X=[],K=0,Y=H.length;K<Y;K++){var Z=H[K],J=void 0;if(null!==this.materials)if(J=this.materials.create(Z.name),!V||!J||J instanceof o.LineBasicMaterial){if(W&&J&&!(J instanceof o.PointsMaterial)){var Q=new o.PointsMaterial({size:10,sizeAttenuation:!1});ee.copy(J),J=Q}}else{var ee=new o.LineBasicMaterial;ee.copy(J),ee.lights=!1,J=ee}J||(J=V?new o.LineBasicMaterial:W?new o.PointsMaterial({size:1,sizeAttenuation:!1}):new o.MeshPhongMaterial,J.name=Z.name),J.flatShading=!Z.smooth,J.vertexColors=G?o.VertexColors:o.NoColors,X.push(J)}var te;if(X.length>1){for(var ne=0,ie=H.length;ne<ie;ne++){var re=H[ne];q.addGroup(re.groupStart,re.groupCount,ne)}te=V?new o.LineSegments(q,X):W?new o.Points(q,X):new o.Mesh(q,X)}else te=V?new o.LineSegments(q,X[0]):W?new o.Points(q,X[0]):new o.Mesh(q,X[0]);te.name=$.name,N.add(te)}}return console.timeEnd("OBJLoader"),N}}]),e}();t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(35),o=(n.n(r),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=function(){function e(t,n,r){i(this,e),this.pathSectionObject=t,this.cameraManager=n,this.projector=r,this.speed=5,this.center=!1,this.tweens=[]}return o(e,[{key:"draw",value:function(){for(var e=[],t=this.pathSectionObject._mesh.children,n=0;n<t.length;n++){var i=this.projector.adsumDistanceToMeter(this.pathSectionObject.patternSpace),r=i/this.speed*n*1e3;e.push(this._showPattern(n,r))}return this.pathSectionObject._mesh.visible=!0,this.center&&e.push(this.cameraManager.centerOn(this.pathSectionObject)),this.pathSectionObject.animations.push(this),Promise.all(e).then(function(){})}},{key:"stop",value:function(){this.tweens.forEach(function(e){e.stop()})}},{key:"_showPattern",value:function(e,t){var n=this,i=this.pathSectionObject._mesh.children[e],o={opacity:0},s={z:50};i.traverse(function(e){e.material&&(e.material=e.material.clone(),e.material.opacity=o.opacity,e.material.transparent=!0)}),i.position.setZ(s.z);var a=new Promise(function(e,s){var a=new r.Tween(o).to({opacity:1},500).delay(t).easing(r.Easing.Exponential.In).on("update",function(){i.traverse(function(e){e.material&&(e.material.opacity=o.opacity)})}).on("complete",function(){e(!0)}).on("stop",function(){s(new Error("Path was stopped"))}).start();n.tweens.push(a)}),c=new Promise(function(e,o){var a=new r.Tween(s).to({z:1},1e3).delay(t).easing(r.Easing.Bounce.Out).on("update",function(){i.position.setZ(s.z),i.updateMatrixWorld()}).on("complete",function(){e(!0)}).on("stop",function(){o(new Error("Path was stopped"))}).start();n.tweens.push(a)});return Promise.all([a,c])}}]),e}();t.a=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(10),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];i(this,e),this.from=t,this.to=r,this.ground=n,this.nodes=o,this._distance=null,this._curve=null}return o(e,[{key:"getDistance",value:function(){if(null===this._distance){this._distance=0;for(var e=0;e<this.nodes.length-1;e++){var t=this.nodes[e].getLinkTo(this.nodes[e+1]);this._distance+=t.distance}}return this._distance}},{key:"getCurve",value:function(){if(this.nodes.length<2)return null;if(null===this._curve){this._curve=[];for(var e=0;e<this.nodes.length-1;e++)this._curve.push({from:this.nodes[e].groundPosition,to:this.nodes[e+1].groundPosition,ground:this.nodes[e+1].ground})}return this._curve}},{key:"interpolate",value:function(e,t){var n=this.getCurve();if(null===n)return[];var i=e;e>this.getDistance()/3&&(console.warn("AdsumWebMap.PathSection.interpolate: short pathSection"),i=this.getDistance()/3);var o=Math.floor(this.getDistance()/i)-1,s=this.getDistance()/(o+1),a=[],c=s,l=new r.Vector3;return n.forEach(function(e){var n=e.from,i=e.to,r=e.ground,o=t.adsumDistanceToMeter(l.subVectors(n,i).length());if(o<c)return void(c-=o);for(var u=c/o;u<=1;)l.lerpVectors(n,i,u),a.push({position:l.clone(),ground:r}),u+=s/o;c=o*(u-1)}),a}}]),e}();t.a=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.awm=null,this.locked=!1}return r(e,[{key:"init",value:function(e){return this.awm=e,this}}]),e}(),s=new o;t.a=s},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={state:"initial",mode:"3D",buildings:null,floors:null,zoom:{current:0,max:0,min:0},currentFloor:null,previousFloor:null,currentPath:{},currentClickedEvent:null,cameraMoved:!1,sortedPlaces:[]}},function(e,t,n){"use strict";function i(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)([Object(a.a)()]);case 2:case"end":return e.stop()}},c,this)}t.a=i;var r=n(20),o=n.n(r),s=n(32),a=n(190),c=o.a.mark(i)},function(e,t,n){"use strict";function i(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.b)(200);case 2:return t.next=4,Object(l.b)([d.a,b]);case 4:return E(),e=f.a.getCurrentFloor(),t.next=8,Object(l.c)({type:h.types.DID_INIT,floors:w.bind(f.a),buildings:_.bind(f.a),currentFloor:null===e?null:e.id});case 8:case"end":return t.stop()}},m,this)}function r(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.b)(200);case 2:return t.next=4,Object(l.b)([f.a,x],e.floorID);case 4:case"end":return t.stop()}},v,this)}function o(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)(h.types.WILL_INIT,i);case 2:return e.next=4,Object(l.d)(h.types.FLOOR_WILL_CHANGE,r);case 4:case"end":return e.stop()}},y,this)}var s=n(20),a=n.n(s),c=n(66),l=n(32),u=n(9),h=n(33),d=n(82),f=n(38),p=n(34),g=n(65),m=a.a.mark(i),v=a.a.mark(r),y=a.a.mark(o),b=d.a.init,w=f.a.getAllFloors,_=f.a.getAllBuildings,x=f.a.setCurrentFloor,E=function(){d.a.awm.sceneManager.addEventListener(u.f.floor.didChanged,function(e){var t=e.current,n=null===e.previous?null:e.previous;g.a.dispatch(Object(h.floorDidChanged)(null===t?null:t.id,null===n?null:n.id))}),d.a.awm.mouseManager.addEventListener(u.c.click,function(e){p.a.setEvent(e),g.a.dispatch(Object(h.onClick)(p.a.getEvent.bind(p.a)))})};t.a=o},function(e,t,n){"use strict";var i=n(15),r=n(85),o=Object(i.c)(r.a);t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=(n.n(s),n(193),n(205)),c=(n(208),n(213),n(216)),l=n(41),u=(n.n(l),n(222)),h=n.n(u),d=n(228),f=(n.n(d),n(229)),p=(n.n(f),n(230)),g=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),m=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyClicked=n.onKeyClicked.bind(n),n}return o(t,e),g(t,[{key:"onKeyClicked",value:function(e){console.log(e)}},{key:"render",value:function(){return s.createElement("div",{className:"App"},s.createElement(a.a,{logo:"http://adactivesas.github.io/adsum-react-components/logo.jpg"}),s.createElement("br",null),s.createElement("div",{className:"comp"},s.createElement(c.a,{isOpen:!0,lang:"en",onKeyClicked:this.onKeyClicked})),s.createElement("div",{className:"code"},s.createElement(h.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:"<AdsumKeyboard isOpen={true} lang={'en'} onKeyClicked={this.onKeyClicked}/>",height:"280px",width:"700px"})),s.createElement("br",null),s.createElement("div",{className:"comp"},s.createElement(c.a,{isOpen:!0,lang:"fr",onKeyClicked:this.onKeyClicked})),s.createElement("div",{className:"code"},s.createElement(h.a,{mode:"jsx",theme:"monokai",name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},fontSize:14,value:"<AdsumKeyboard isOpen={true} lang={'fr'} onKeyClicked={this.onKeyClicked}/>",height:"280px",width:"700px"})))}}]),t}(s.Component);t.a=m},function(e,t,n){"use strict";n(194),n(195),n(88),n(197),n(198),n(199),n(200),n(89),n(40),n(201),n(202),n(203),n(204)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":g(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n.n(s),c=n(0),l=n.n(c),u=n(1),h=n.n(u),d=n(86),f=n.n(d),p=n(40),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e){function t(){var n,o,s;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.history=f()(o.props),s=n,r(o,s)}return o(t,e),t.prototype.componentWillMount=function(){a()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return l.a.createElement(p.a,{history:this.history,children:this.props.children})},t}(l.a.Component);m.propTypes={basename:h.a.string,forceRefresh:h.a.bool,getUserConfirmation:h.a.func,keyLength:h.a.number,children:h.a.node}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":g(t))&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n.n(s),c=n(0),l=n.n(c),u=n(1),h=n.n(u),d=n(196),f=n.n(d),p=n(40),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e){function t(){var n,o,s;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.history=f()(o.props),s=n,r(o,s)}return o(t,e),t.prototype.componentWillMount=function(){a()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return l.a.createElement(p.a,{history:this.history,children:this.props.children})},t}(l.a.Component);m.propTypes={basename:h.a.string,getUserConfirmation:h.a.func,hashType:h.a.oneOf(["hashbang","noslash","slash"]),children:h.a.node}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(2),s=i(o),a=n(3),c=i(a),l=n(27),u=n(13),h=n(28),d=i(h),f=n(87),p={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,u.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:u.stripLeadingSlash,decodePath:u.addLeadingSlash},slash:{encodePath:u.addLeadingSlash,decodePath:u.addLeadingSlash}},g=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},m=function(e){return window.location.hash=e},v=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(f.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,f.supportsGoWithoutReloadUsingHash)(),i=e.getUserConfirmation,o=void 0===i?f.getConfirmation:i,a=e.hashType,h=void 0===a?"slash":a,y=e.basename?(0,u.stripTrailingSlash)((0,u.addLeadingSlash)(e.basename)):"",b=p[h],w=b.encodePath,_=b.decodePath,x=function(){var e=_(g());return(0,s.default)(!y||(0,u.hasBasename)(e,y),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+y+'".'),y&&(e=(0,u.stripBasename)(e,y)),(0,l.createLocation)(e)},E=(0,d.default)(),A=function(e){r(W,e),W.length=t.length,E.notifyListeners(W.location,W.action)},C=!1,S=null,M=function(){var e=g(),t=w(e);if(e!==t)v(t);else{var n=x(),i=W.location;if(!C&&(0,l.locationsAreEqual)(i,n))return;if(S===(0,u.createPath)(n))return;S=null,k(n)}},k=function(e){if(C)C=!1,A();else{E.confirmTransitionTo(e,"POP",o,function(t){t?A({action:"POP",location:e}):T(e)})}},T=function(e){var t=W.location,n=L.lastIndexOf((0,u.createPath)(t));-1===n&&(n=0);var i=L.lastIndexOf((0,u.createPath)(e));-1===i&&(i=0);var r=n-i;r&&(C=!0,I(r))},F=g(),O=w(F);F!==O&&v(O);var P=x(),L=[(0,u.createPath)(P)],R=function(e){return"#"+w(y+(0,u.createPath)(e))},D=function(e,t){(0,s.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,l.createLocation)(e,void 0,void 0,W.location);E.confirmTransitionTo(n,"PUSH",o,function(e){if(e){var t=(0,u.createPath)(n),i=w(y+t);if(g()!==i){S=t,m(i);var r=L.lastIndexOf((0,u.createPath)(W.location)),o=L.slice(0,-1===r?0:r+1);o.push(t),L=o,A({action:"PUSH",location:n})}else(0,s.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),A()}})},B=function(e,t){(0,s.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,l.createLocation)(e,void 0,void 0,W.location);E.confirmTransitionTo(n,"REPLACE",o,function(e){if(e){var t=(0,u.createPath)(n),i=w(y+t);g()!==i&&(S=t,v(i));var r=L.indexOf((0,u.createPath)(W.location));-1!==r&&(L[r]=t),A({action:"REPLACE",location:n})}})},I=function(e){(0,s.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},N=function(){return I(-1)},j=function(){return I(1)},U=0,$=function(e){U+=e,1===U?(0,f.addEventListener)(window,"hashchange",M):0===U&&(0,f.removeEventListener)(window,"hashchange",M)},z=!1,H=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=E.setPrompt(e);return z||($(1),z=!0),function(){return z&&(z=!1,$(-1)),t()}},V=function(e){var t=E.appendListener(e);return $(1),function(){$(-1),t()}},W={length:t.length,action:"POP",location:P,createHref:R,push:D,replace:B,go:I,goBack:N,goForward:j,block:H,listen:V};return W};t.default=y},function(e,t,n){"use strict";var i=n(54);i.a},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var r=n(0),o=n.n(r),s=n(1),a=n.n(s),c=n(89),l=n(88),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d="function"===typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":u(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":u(e)},f=function(e){var t=e.to,n=e.exact,r=e.strict,s=e.location,a=e.activeClassName,u=e.className,f=e.activeStyle,p=e.style,g=e.isActive,m=e.ariaCurrent,v=i(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return o.a.createElement(c.a,{path:"object"===("undefined"===typeof t?"undefined":d(t))?t.pathname:t,exact:n,strict:r,location:s,children:function(e){var n=e.location,i=e.match,r=!!(g?g(i,n):i);return o.a.createElement(l.a,h({to:t,className:r?[u,a].filter(function(e){return e}).join(" "):u,style:r?h({},p,f):p,"aria-current":r&&m},v))}})};f.propTypes={to:l.a.propTypes.to,exact:a.a.bool,strict:a.a.bool,location:a.a.object,activeClassName:a.a.string,className:a.a.string,activeStyle:a.a.object,style:a.a.object,isActive:a.a.func,ariaCurrent:a.a.oneOf(["page","step","location","true"])},f.defaultProps={activeClassName:"active",ariaCurrent:"true"}},function(e,t,n){"use strict";var i=n(57);i.a},function(e,t,n){"use strict";var i=n(58);i.a},function(e,t,n){"use strict";var i=n(60);i.a},function(e,t,n){"use strict";var i=n(61);i.a},function(e,t,n){"use strict";var i=n(18);i.a},function(e,t,n){"use strict";var i=n(62);i.a},function(e,t,n){"use strict";var i=n(206);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(0),r=(n.n(i),n(207));n.n(r);t.a=function(e){return i.createElement("header",{className:"App-header"},i.createElement("img",{src:e.logo,className:"App-logo",alt:"logo"}),i.createElement("h1",{className:"App-title"},"Adsum Component demo"))}},function(e,t){},function(e,t,n){"use strict";n(209)},function(e,t,n){"use strict";var i=n(0),r=(n.n(i),n(15)),o=n(12),s=n(24),a=(n(90),n(212)),c=(n.n(a),function(e){return i.createElement("div",null,i.createElement("h1",null,"Home"))}),l=function(e){return Object(o.b)({changePage:function(){return Object(r.b)("/about-us")}},e)};Object(s.b)(null,l)(c)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=(n.n(s),n(12)),c=n(24),l=n(90),u=n(211),h=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){return s.createElement("div",{className:"map-wrapper"},s.createElement("div",{id:"adsum-web-map-container"}))}}]),t}(s.Component),f=function(e){return{mapState:e.map.state}},p=function(e){return Object(a.b)({init:function(){return e(l.a.init())}},e)};Object(c.b)(f,p)(d)},function(e,t){},function(e,t){},function(e,t,n){"use strict";n(214)},function(e,t,n){"use strict";var i=n(0),r=(n.n(i),n(215));n.n(r)},function(e,t){},function(e,t,n){"use strict";var i=n(217);t.a=i.a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=n.n(s),c=n(1),l=n.n(c),u=n(218),h=n(221),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyClick=n.onKeyClick.bind(n),n.changeLayout=n.changeLayout.bind(n),n.resetLayout=n.resetLayout.bind(n),n.state={layout:"layout1"},n}return o(t,e),d(t,[{key:"resetLayout",value:function(){this.setState({layout:"layout1"})}},{key:"onKeyClick",value:function(e){var t=this.props.onKeyClicked;e.class.includes("switchMode")?this.changeLayout(e.dataAction):t(e.value)}},{key:"changeLayout",value:function(e){this.setState({layout:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.lang,i=t.isOpen,r=u.a[n]?u.a[n]:u.a.en;return i?a.a.createElement("div",{className:"templateKeyboard keyboardMicrosoftStyle",ref:"templateKeyboard"},a.a.createElement("div",{className:"keyboard"},r.layouts.map(function(t,n){return a.a.createElement("div",{className:t.class+" "+(t.class.includes(e.state.layout)?"active":"hidden"),key:"layout "+n},t.lines.map(function(t,i){return a.a.createElement("div",{className:t.class,key:"line "+(n+i)},t.keys.map(function(t,r){return a.a.createElement("button",{value:t.value,className:t.class,"data-action":t.dataAction,key:"key "+(n+i+r),onClick:function(){return e.onKeyClick(t)}},t.text)}))}))}))):null}}]),t}(s.Component);f.propTypes={isOpen:l.a.bool.isRequired,lang:l.a.string.isRequired,onKeyClicked:l.a.func.isRequired},f.defaultProps={isOpen:!1,lang:"en"},t.a=f},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(219),r=n.n(i),o=n(220),s=n.n(o),a={en:r.a,fr:s.a}},function(e,t){e.exports={layouts:[{class:"layout layout1",lines:[{class:"keyboardLine",keys:[{value:"q",text:"q",class:"key keyclickable"},{value:"w",text:"w",class:"key keyclickable"},{value:"e",text:"e",class:"key keyclickable"},{value:"r",text:"r",class:"key keyclickable"},{value:"t",text:"t",class:"key keyclickable"},{value:"y",text:"y",class:"key keyclickable"},{value:"u",text:"u",class:"key keyclickable"},{value:"i",text:"i",class:"key keyclickable"},{value:"o",text:"o",class:"key keyclickable"},{value:"p",text:"p",class:"key keyclickable"},{value:"<---",text:" ",class:"keyIcon keyclickable backspace-icon"}]},{class:"keyboardLine",keys:[{value:"a",text:"a",class:"key keyclickable"},{value:"s",text:"s",class:"key keyclickable"},{value:"d",text:"d",class:"key keyclickable"},{value:"f",text:"f",class:"key keyclickable"},{value:"g",text:"g",class:"key keyclickable"},{value:"h",text:"h",class:"key keyclickable"},{value:"j",text:"j",class:"key keyclickable"},{value:"k",text:"k",class:"key keyclickable"},{value:"l",text:"l",class:"key keyclickable"},{value:"'",text:"'",class:"key keyclickable"}]},{class:"keyboardLine",keys:[{value:"SHIFT",text:"&nbsp;",class:"keyIcon keyclickable shift-icon shift"},{value:"z",text:"z",class:"key keyclickable"},{value:"x",text:"x",class:"key keyclickable"},{value:"c",text:"c",class:"key keyclickable"},{value:"v",text:"v",class:"key keyclickable"},{value:"b",text:"b",class:"key keyclickable"},{value:"n",text:"n",class:"key keyclickable"},{value:"m",text:"m",class:"key keyclickable"},{value:",",text:",",class:"key keyclickable"},{value:".",text:".",class:"key keyclickable"},{value:"SHIFT",text:"&nbsp;",class:"keyIcon keyclickable shift-icon"}]},{class:"keyboardLine",keys:[{value:"",text:"&123",class:"keyIcon switchMode",dataAction:"layout2"},{value:"_",text:"_",class:"key keyclickable"},{value:"-",text:"-",class:"key keyclickable"},{value:" ",text:"SPACE",class:"spaceBar keyclickable"},{value:"@",text:"@",class:"key keyIcon keyclickable"}]}]},{class:"layout layout2",lines:[{class:"keyboardLine",keys:[{value:"!",text:"!",class:"key keyclickable"},{value:"@",text:"@",class:"key keyclickable"},{value:"#",text:"#",class:"key keyclickable"},{value:"$",text:"$",class:"key keyclickable"},{value:"\u20ac",text:"\u20ac",class:"key keyclickable"},{value:"%",text:"%",class:"key keyclickable"},{value:"&",text:"&",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"1",text:"1",class:"key keyclickable"},{value:"2",text:"2",class:"key keyclickable"},{value:"3",text:"3",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"<---",text:" ",class:"keyIcon keyclickable backspace-icon"}]},{class:"keyboardLine",keys:[{value:"(",text:"(",class:"key keyclickable"},{value:")",text:")",class:"key keyclickable"},{value:"-",text:"-",class:"key keyclickable"},{value:"_",text:"_",class:"key keyclickable"},{value:"~",text:"~",class:"key keyclickable"},{value:"=",text:"=",class:"key keyclickable"},{value:"+",text:"+",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"4",text:"4",class:"key keyclickable"},{value:"5",text:"5",class:"key keyclickable"},{value:"6",text:"6",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"",text:"&nbsp;",class:"invisible"}]},{class:"keyboardLine",keys:[{value:"\\",text:"\\",class:"key keyclickable"},{value:";",text:";",class:"key keyclickable"},{value:":",text:":",class:"key keyclickable"},{value:'"',text:'"',class:"key keyclickable"},{value:"?",text:"?",class:"key keyclickable"},{value:"*",text:"*",class:"key keyclickable"},{value:"/",text:"/",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"7",text:"7",class:"key keyclickable"},{value:"8",text:"8",class:"key keyclickable"},{value:"9",text:"9",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"",text:"&nbsp;",class:"invisible"}]},{class:"keyboardLine",keys:[{value:"",text:"&ABC",class:"key keyIcon switchMode",dataAction:"layout1"},{value:" ",text:"SPACE",class:"spaceBar-short keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"0",text:"0",class:"key keyclickable zeroKey"},{value:",",text:",",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"",text:"&nbsp;",class:"invisible"}]}]}]}},function(e,t){e.exports={layouts:[{class:"layout layout1",lines:[{class:"keyboardLine",keys:[{value:"a",text:"a",class:"key keyclickable"},{value:"z",text:"z",class:"key keyclickable"},{value:"e",text:"e",class:"key keyclickable"},{value:"r",text:"r",class:"key keyclickable"},{value:"t",text:"t",class:"key keyclickable"},{value:"y",text:"y",class:"key keyclickable"},{value:"u",text:"u",class:"key keyclickable"},{value:"i",text:"i",class:"key keyclickable"},{value:"o",text:"o",class:"key keyclickable"},{value:"p",text:"p",class:"key keyclickable"},{value:"\xe0",text:"\xe0",class:"key keyclickable"},{value:"<---",text:" ",class:"keyIcon keyclickable backspace-icon"}]},{class:"keyboardLine",keys:[{value:"q",text:"q",class:"key keyclickable"},{value:"s",text:"s",class:"key keyclickable"},{value:"d",text:"d",class:"key keyclickable"},{value:"f",text:"f",class:"key keyclickable"},{value:"g",text:"g",class:"key keyclickable"},{value:"h",text:"h",class:"key keyclickable"},{value:"j",text:"j",class:"key keyclickable"},{value:"k",text:"k",class:"key keyclickable"},{value:"l",text:"l",class:"key keyclickable"},{value:"m",text:"m",class:"key keyclickable"},{value:"\xf9",text:"\xf9",class:"key keyclickable"}]},{class:"keyboardLine",keys:[{value:"SHIFT",text:"&nbsp;",class:"keyIcon keyclickable shift-icon shift"},{value:"w",text:"w",class:"key keyclickable"},{value:"x",text:"x",class:"key keyclickable"},{value:"c",text:"c",class:"key keyclickable"},{value:"v",text:"v",class:"key keyclickable"},{value:"b",text:"b",class:"key keyclickable"},{value:"n",text:"n",class:"key keyclickable"},{value:"\xe9",text:"\xe9",class:"key keyclickable"},{value:"\xe8",text:"\xe8",class:"key keyclickable"},{value:",",text:",",class:"key keyclickable"},{value:".",text:".",class:"key keyclickable"},{value:"'",text:"'",class:"key keyclickable"},{value:"SHIFT",text:"&nbsp;",class:"keyIcon keyclickable shift-icon"}]},{class:"keyboardLine",keys:[{value:"",text:"&123",class:"keyIcon switchMode",dataAction:"layout2"},{value:"_",text:"_",class:"key keyclickable"},{value:"-",text:"-",class:"key keyclickable"},{value:" ",text:"SPACE",class:"spaceBar keyclickable"},{value:"@",text:"@",class:"key keyIcon keyclickable"}]}]},{class:"layout layout2",lines:[{class:"keyboardLine",keys:[{value:"!",text:"!",class:"key keyclickable"},{value:"@",text:"@",class:"key keyclickable"},{value:"#",text:"#",class:"key keyclickable"},{value:"$",text:"$",class:"key keyclickable"},{value:"\u20ac",text:"\u20ac",class:"key keyclickable"},{value:"%",text:"%",class:"key keyclickable"},{value:"&",text:"&",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"1",text:"1",class:"key keyclickable"},{value:"2",text:"2",class:"key keyclickable"},{value:"3",text:"3",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"<---",text:" ",class:"keyIcon keyclickable backspace-icon"}]},{class:"keyboardLine",keys:[{value:"(",text:"(",class:"key keyclickable"},{value:")",text:")",class:"key keyclickable"},{value:"-",text:"-",class:"key keyclickable"},{value:"_",text:"_",class:"key keyclickable"},{value:"~",text:"~",class:"key keyclickable"},{value:"=",text:"=",class:"key keyclickable"},{value:"+",text:"+",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"4",text:"4",class:"key keyclickable"},{value:"5",text:"5",class:"key keyclickable"},{value:"6",text:"6",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"",text:"&nbsp;",class:"invisible"}]},{class:"keyboardLine",keys:[{value:"\\",text:"\\",class:"key keyclickable"},{value:";",text:";",class:"key keyclickable"},{value:":",text:":",class:"key keyclickable"},{value:'"',text:'"',class:"key keyclickable"},{value:"?",text:"?",class:"key keyclickable"},{value:"*",text:"*",class:"key keyclickable"},{value:"/",text:"/",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"7",text:"7",class:"key keyclickable"},{value:"8",text:"8",class:"key keyclickable"},{value:"9",text:"9",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"",text:"&nbsp;",class:"invisible"}]},{class:"keyboardLine",keys:[{value:"",text:"&ABC",class:"key keyIcon switchMode",dataAction:"layout1"},{value:" ",text:"SPACE",class:"spaceBar-short keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"0",text:"0",class:"key keyclickable zeroKey"},{value:",",text:",",class:"key keyclickable"},{value:"",text:"&nbsp;",class:"invisible"},{value:"",text:"&nbsp;",class:"invisible"}]}]}]}},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.diff=t.split=void 0;var r=n(223),o=i(r),s=n(94),a=i(s),c=n(226),l=i(c);t.split=a.default,t.diff=l.default,t.default=o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":a(t))&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(41),h=i(u),d=n(0),f=i(d),p=n(1),g=i(p),m=n(92),v=i(m),y=n(93),b=h.default.acequire("ace/range"),w=b.Range,_=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return y.editorEvents.forEach(function(e){n[e]=n[e].bind(n)}),n.debounce=y.debounce,n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,r=t.onValidate,o=t.mode,s=t.focus,a=t.theme,c=t.fontSize,l=t.value,u=t.defaultValue,d=t.cursorStart,f=t.showGutter,p=t.wrapEnabled,g=t.showPrintMargin,m=t.scrollMargin,v=void 0===m?[0,0,0,0]:m,b=t.keyboardHandler,w=t.onLoad,_=t.commands,x=t.annotations,E=t.markers;this.editor=h.default.edit(this.refEditor),i&&i(h.default);for(var A=Object.keys(this.props.editorProps),C=0;C<A.length;C++)this.editor[A[C]]=this.props.editorProps[A[C]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),this.editor.getSession().setMode("ace/mode/"+o),this.editor.setTheme("ace/theme/"+a),this.editor.setFontSize(c),this.editor.getSession().setValue(u||l,d),this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(f),this.editor.getSession().setUseWrapMode(p),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),r&&this.editor.getSession().on("changeAnnotation",function(){var t=e.editor.getSession().getAnnotations();e.props.onValidate(t)}),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(x||[]),E&&E.length>0&&this.handleMarkers(E);for(var S=this.editor.$options,M=0;M<y.editorOptions.length;M++){var k=y.editorOptions[M];S.hasOwnProperty(k)?this.editor.setOption(k,this.props[k]):this.props[k]&&console.warn("ReactAce: editor option "+k+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}this.handleOptions(this.props),Array.isArray(_)&&_.forEach(function(t){"string"==typeof t.exec?e.editor.commands.bindKey(t.bindKey,t.exec):e.editor.commands.addCommand(t)}),b&&this.editor.setKeyboardHandler("ace/keyboard/"+b),n&&(this.refEditor.className+=" "+n),s&&this.editor.focus(),w&&w(this.editor),this.editor.resize()}},{key:"componentWillReceiveProps",value:function(e){for(var t=this.props,n=0;n<y.editorOptions.length;n++){var i=y.editorOptions[n];e[i]!==t[i]&&this.editor.setOption(i,e[i])}if(e.className!==t.className){var r=this.refEditor.className,o=r.trim().split(" ");t.className.trim().split(" ").forEach(function(e){var t=o.indexOf(e);o.splice(t,1)}),this.refEditor.className=" "+e.className+" "+o.join(" ")}if(e.mode!==t.mode&&this.editor.getSession().setMode("ace/mode/"+e.mode),e.theme!==t.theme&&this.editor.setTheme("ace/theme/"+e.theme),e.keyboardHandler!==t.keyboardHandler&&(e.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+e.keyboardHandler):this.editor.setKeyboardHandler(null)),e.fontSize!==t.fontSize&&this.editor.setFontSize(e.fontSize),e.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(e.wrapEnabled),e.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(e.showPrintMargin),e.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(e.showGutter),(0,v.default)(e.setOptions,t.setOptions)||this.handleOptions(e),(0,v.default)(e.annotations,t.annotations)||this.editor.getSession().setAnnotations(e.annotations||[]),!(0,v.default)(e.markers,t.markers)&&Array.isArray(e.markers)&&this.handleMarkers(e.markers),(0,v.default)(e.scrollMargin,t.scrollMargin)||this.handleScrollMargins(e.scrollMargin),this.editor&&this.editor.getValue()!==e.value){this.silent=!0;var s=this.editor.session.selection.toJSON();this.editor.setValue(e.value,e.cursorStart),this.editor.session.selection.fromJSON(s),this.silent=!1}e.focus&&!t.focus&&this.editor.focus()}},{key:"componentDidUpdate",value:function(e){e.height===this.props.height&&e.width===this.props.width||this.editor.resize()}},{key:"handleScrollMargins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0];this.editor.renderer.setScrollMargins(e[0],e[1],e[2],e[3])}},{key:"componentWillUnmount",value:function(){this.editor.destroy(),this.editor=null}},{key:"onChange",value:function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}}},{key:"onSelectionChange",value:function(e){if(this.props.onSelectionChange){var t=this.editor.getSelection();this.props.onSelectionChange(t,e)}}},{key:"onCursorChange",value:function(e){if(this.props.onCursorChange){var t=this.editor.getSelection();this.props.onCursorChange(t,e)}}},{key:"onInput",value:function(e){this.props.onInput&&this.props.onInput(e)}},{key:"onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)}},{key:"onCopy",value:function(e){this.props.onCopy&&this.props.onCopy(e)}},{key:"onPaste",value:function(e){this.props.onPaste&&this.props.onPaste(e)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])}},{key:"handleMarkers",value:function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);n=this.editor.getSession().getMarkers(!1);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);e.forEach(function(e){var n=e.startRow,i=e.startCol,r=e.endRow,o=e.endCol,s=e.className,a=e.type,c=e.inFront,l=void 0!==c&&c,u=new w(n,i,r,o);t.editor.getSession().addMarker(u,s,a,l)})}},{key:"updateRef",value:function(e){this.refEditor=e}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.width,i=e.height,r=e.style,o=c({width:n,height:i},r);return f.default.createElement("div",{ref:this.updateRef,id:t,style:o})}}]),t}(d.Component);t.default=_,_.propTypes={mode:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.oneOfType([g.default.number,g.default.string]),showGutter:g.default.bool,onChange:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onInput:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.string,defaultValue:g.default.string,onLoad:g.default.func,onSelectionChange:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,onValidate:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,debounceChangePeriod:g.default.number,editorProps:g.default.object,setOptions:g.default.object,style:g.default.object,scrollMargin:g.default.array,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array},_.defaultProps={name:"brace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}},function(e,t,n){(function(t){function n(e,t){return null==e?void 0:e[t]}function i(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function o(){this.__data__=ve?ve(null):{}}function s(e){return this.has(e)&&delete this.__data__[e]}function a(e){var t=this.__data__;if(ve){var n=t[e];return n===V?void 0:n}return he.call(t,e)?t[e]:void 0}function c(e){var t=this.__data__;return ve?void 0!==t[e]:he.call(t,e)}function l(e,t){return this.__data__[e]=ve&&void 0===t?V:t,this}function u(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function h(){this.__data__=[]}function d(e){var t=this.__data__,n=x(t,e);return!(n<0)&&(n==t.length-1?t.pop():ge.call(t,n,1),!0)}function f(e){var t=this.__data__,n=x(t,e);return n<0?void 0:t[n][1]}function p(e){return x(this.__data__,e)>-1}function g(e,t){var n=this.__data__,i=x(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}function m(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function v(){this.__data__={hash:new r,map:new(me||u),string:new r}}function y(e){return M(this,e).delete(e)}function b(e){return M(this,e).get(e)}function w(e){return M(this,e).has(e)}function _(e,t){return M(this,e).set(e,t),this}function x(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1}function E(e,t){t=T(t,e)?[t]:S(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[P(t[n++])];return n&&n==i?e:void 0}function A(e){return!(!I(e)||O(e))&&(B(e)||i(e)?fe:te).test(L(e))}function C(e){if("string"==typeof e)return e;if(j(e))return be?be.call(e):"";var t=e+"";return"0"==t&&1/e==-W?"-0":t}function S(e){return _e(e)?e:we(e)}function M(e,t){var n=e.__data__;return F(t)?n["string"==typeof t?"string":"hash"]:n.map}function k(e,t){var i=n(e,t);return A(i)?i:void 0}function T(e,t){if(_e(e))return!1;var n="undefined"===typeof e?"undefined":z(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!j(e))||(Y.test(e)||!K.test(e)||null!=t&&e in Object(t))}function F(e){var t="undefined"===typeof e?"undefined":z(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function O(e){return!!le&&le in e}function P(e){if("string"==typeof e||j(e))return e;var t=e+"";return"0"==t&&1/e==-W?"-0":t}function L(e){if(null!=e){try{return ue.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function R(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(H);var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(R.Cache||m),n}function D(e,t){return e===t||e!==e&&t!==t}function B(e){var t=I(e)?de.call(e):"";return t==G||t==q}function I(e){var t="undefined"===typeof e?"undefined":z(e);return!!e&&("object"==t||"function"==t)}function N(e){return!!e&&"object"==("undefined"===typeof e?"undefined":z(e))}function j(e){return"symbol"==("undefined"===typeof e?"undefined":z(e))||N(e)&&de.call(e)==X}function U(e){return null==e?"":C(e)}function $(e,t,n){var i=null==e?void 0:E(e,t);return void 0===i?n:i}var z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H="Expected a function",V="__lodash_hash_undefined__",W=1/0,G="[object Function]",q="[object GeneratorFunction]",X="[object Symbol]",K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,Z=/^\./,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,ee=/\\(\\)?/g,te=/^\[object .+?Constructor\]$/,ne="object"==("undefined"===typeof t?"undefined":z(t))&&t&&t.Object===Object&&t,ie="object"==("undefined"===typeof self?"undefined":z(self))&&self&&self.Object===Object&&self,re=ne||ie||Function("return this")(),oe=Array.prototype,se=Function.prototype,ae=Object.prototype,ce=re["__core-js_shared__"],le=function(){var e=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ue=se.toString,he=ae.hasOwnProperty,de=ae.toString,fe=RegExp("^"+ue.call(he).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pe=re.Symbol,ge=oe.splice,me=k(re,"Map"),ve=k(Object,"create"),ye=pe?pe.prototype:void 0,be=ye?ye.toString:void 0;r.prototype.clear=o,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=c,r.prototype.set=l,u.prototype.clear=h,u.prototype.delete=d,u.prototype.get=f,u.prototype.has=p,u.prototype.set=g,m.prototype.clear=v,m.prototype.delete=y,m.prototype.get=b,m.prototype.has=w,m.prototype.set=_;var we=R(function(e){e=U(e);var t=[];return Z.test(e)&&t.push(""),e.replace(J,function(e,n,i,r){t.push(i?r.replace(ee,"$1"):n||e)}),t});R.Cache=m;var _e=Array.isArray;e.exports=$}).call(t,n(7))},function(e,t){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],function(e,t,n){"use strict";function i(e,t){this.$u=e,this.$doc=t}var r=e("./lib/oop"),o=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./editor").Editor,c=e("./virtual_renderer").VirtualRenderer,l=e("./edit_session").EditSession,u=function(e,t,n){this.BELOW=1,this.BESIDE=0,this.$container=e,this.$theme=t,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(e){this.$cEditor=e}.bind(this))};(function(){r.implement(this,s),this.$createEditor=function(){var e=document.createElement("div");e.className=this.$editorCSS,e.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(e);var t=new a(new c(e,this.$theme));return t.on("focus",function(){this._emit("focus",t)}.bind(this)),this.$editors.push(t),t.setFontSize(this.$fontSize),t},this.setSplits=function(e){var t;if(e<1)throw"The number of splits have to be > 0!";if(e!=this.$splits){if(e>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<e;)t=this.$editors[this.$splits],this.$container.appendChild(t.container),t.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<e;)this.$createEditor(),this.$splits++}else for(;this.$splits>e;)t=this.$editors[this.$splits-1],this.$container.removeChild(t.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(e){return this.$editors[e]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(e){this.$editors.forEach(function(t){t.setTheme(e)})},this.setKeyboardHandler=function(e){this.$editors.forEach(function(t){t.setKeyboardHandler(e)})},this.forEach=function(e,t){this.$editors.forEach(e,t)},this.$fontSize="",this.setFontSize=function(e){this.$fontSize=e,this.forEach(function(t){t.setFontSize(e)})},this.$cloneSession=function(e){var t=new l(e.getDocument(),e.getMode()),n=e.getUndoManager();if(n){var r=new i(n,t);t.setUndoManager(r)}return t.$informUndoManager=o.delayedCall(function(){t.$deltas=[]}),t.setTabSize(e.getTabSize()),t.setUseSoftTabs(e.getUseSoftTabs()),t.setOverwrite(e.getOverwrite()),t.setBreakpoints(e.getBreakpoints()),t.setUseWrapMode(e.getUseWrapMode()),t.setUseWorker(e.getUseWorker()),t.setWrapLimitRange(e.$wrapLimitRange.min,e.$wrapLimitRange.max),t.$foldData=e.$cloneFoldData(),t},this.setSession=function(e,t){var n;return n=null==t?this.$cEditor:this.$editors[t],this.$editors.some(function(t){return t.session===e})&&(e=this.$cloneSession(e)),n.setSession(e),e},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(e){this.$orientation!=e&&(this.$orientation=e,this.resize())},this.resize=function(){var e,t=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var i=t/this.$splits,r=0;r<this.$splits;r++)e=this.$editors[r],e.container.style.width=i+"px",e.container.style.top="0px",e.container.style.left=r*i+"px",e.container.style.height=n+"px",e.resize();else for(var o=n/this.$splits,r=0;r<this.$splits;r++)e=this.$editors[r],e.container.style.width=t+"px",e.container.style.top=r*o+"px",e.container.style.left="0px",e.container.style.height=o+"px",e.resize()}}).call(u.prototype),function(){this.execute=function(e){this.$u.execute(e)},this.undo=function(){var e=this.$u.undo(!0);e&&this.$doc.selection.setSelectionRange(e)},this.redo=function(){var e=this.$u.redo(!0);e&&this.$doc.selection.setSelectionRange(e)},this.reset=function(){this.$u.reset()},this.hasUndo=function(){return this.$u.hasUndo()},this.hasRedo=function(){return this.$u.hasRedo()}}.call(i.prototype),t.Split=u}),ace.define("ace/ext/split",["require","exports","module","ace/split"],function(e,t,n){"use strict";n.exports=e("../split")}),function(){ace.acequire(["ace/ext/split"],function(){})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":a(t))&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(94),u=i(l),h=n(0),d=i(h),f=n(1),p=i(f),g=n(227),m=i(g),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return s(t,e),c(t,[{key:"onChange",value:function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}},{key:"diff",value:function(){var e=new m.default,t=this.state.value[0],n=this.state.value[1];if(0===t.length&&0===n.length)return[];var i=e.diff_main(t,n);e.diff_cleanupSemantic(i);var r=this.generateDiffedLines(i);return this.setCodeMarkers(r)}},{key:"generateDiffedLines",value:function(e){var t={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1},n={left:[],right:[]},i={left:1,right:1};return e.forEach(function(e){var r=e[0],o=e[1],s=o.split("\n").length-1;if(0!==o.length){var a=o[0],c=o[o.length-1],l=0;switch(r){case t.DIFF_EQUAL:i.left+=s,i.right+=s;break;case t.DIFF_DELETE:"\n"===a&&(i.left++,s--),l=s,0===l&&n.right.push({startLine:i.right,endLine:i.right}),"\n"===c&&(l-=1),n.left.push({startLine:i.left,endLine:i.left+l}),i.left+=s;break;case t.DIFF_INSERT:"\n"===a&&(i.right++,s--),l=s,0===l&&n.left.push({startLine:i.left,endLine:i.left}),"\n"===c&&(l-=1),n.right.push({startLine:i.right,endLine:i.right+l}),i.right+=s;break;default:throw new Error("Diff type was not defined.")}}}),n}},{key:"setCodeMarkers",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:[],right:[]},t=[],n={left:[],right:[]},i=0;i<e.left.length;i++){var r={startRow:e.left[i].startLine-1,endRow:e.left[i].endLine,type:"text",className:"codeMarker"};n.left.push(r)}for(var o=0;o<e.right.length;o++){var s={startRow:e.right[o].startLine-1,endRow:e.right[o].endLine,type:"text",className:"codeMarker"};n.right.push(s)}return t[0]=n.left,t[1]=n.right,t}},{key:"render",value:function(){var e=this.diff();return d.default.createElement(u.default,{name:this.props.name,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})}}]),t}(h.Component);t.default=v,v.propTypes={cursorStart:p.default.number,editorProps:p.default.object,enableBasicAutocompletion:p.default.bool,enableLiveAutocompletion:p.default.bool,focus:p.default.bool,fontSize:p.default.number,height:p.default.string,highlightActiveLine:p.default.bool,maxLines:p.default.func,minLines:p.default.func,mode:p.default.string,name:p.default.string,onLoad:p.default.func,onPaste:p.default.func,onScroll:p.default.func,onChange:p.default.func,orientation:p.default.string,readOnly:p.default.bool,scrollMargin:p.default.array,setOptions:p.default.object,showGutter:p.default.bool,showPrintMargin:p.default.bool,splits:p.default.number,style:p.default.object,tabSize:p.default.number,theme:p.default.string,value:p.default.array,width:p.default.string,wrapEnabled:p.default.bool},v.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"brace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0}},function(e,t,n){"use strict";function i(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.Diff,i.prototype.diff_main=function(e,t,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];"undefined"==typeof n&&(n=!0);var o=n,s=this.diff_commonPrefix(e,t),a=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var l=this.diff_compute_(e,t,o,r);return a&&l.unshift([0,a]),c&&l.push([0,c]),this.diff_cleanupMerge(l),l},i.prototype.diff_compute_=function(e,t,n,i){var r;if(!e)return[[1,t]];if(!t)return[[-1,e]];var o=e.length>t.length?e:t,s=e.length>t.length?t:e,a=o.indexOf(s);if(-1!=a)return r=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],e.length>t.length&&(r[0][0]=r[2][0]=-1),r;if(1==s.length)return[[-1,e],[1,t]];var c=this.diff_halfMatch_(e,t);if(c){var l=c[0],u=c[1],h=c[2],d=c[3],f=c[4],p=this.diff_main(l,h,n,i),g=this.diff_main(u,d,n,i);return p.concat([[0,f]],g)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},i.prototype.diff_lineMode_=function(e,t,n){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var r=i.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([0,""]);for(var s=0,a=0,c=0,l="",u="";s<o.length;){switch(o[s][0]){case 1:c++,u+=o[s][1];break;case-1:a++,l+=o[s][1];break;case 0:if(a>=1&&c>=1){o.splice(s-a-c,a+c),s=s-a-c;for(var i=this.diff_main(l,u,!1,n),h=i.length-1;h>=0;h--)o.splice(s,0,i[h]);s+=i.length}c=0,a=0,l="",u=""}s++}return o.pop(),o},i.prototype.diff_bisect_=function(e,t,n){for(var i=e.length,r=t.length,o=Math.ceil((i+r)/2),s=o,a=2*o,c=new Array(a),l=new Array(a),u=0;u<a;u++)c[u]=-1,l[u]=-1;c[s+1]=0,l[s+1]=0;for(var h=i-r,d=h%2!=0,f=0,p=0,g=0,m=0,v=0;v<o&&!((new Date).getTime()>n);v++){for(var y=-v+f;y<=v-p;y+=2){var b,w=s+y;b=y==-v||y!=v&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1;for(var _=b-y;b<i&&_<r&&e.charAt(b)==t.charAt(_);)b++,_++;if(c[w]=b,b>i)p+=2;else if(_>r)f+=2;else if(d){var x=s+h-y;if(x>=0&&x<a&&-1!=l[x]){var E=i-l[x];if(b>=E)return this.diff_bisectSplit_(e,t,b,_,n)}}}for(var A=-v+g;A<=v-m;A+=2){var E,x=s+A;E=A==-v||A!=v&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1;for(var C=E-A;E<i&&C<r&&e.charAt(i-E-1)==t.charAt(r-C-1);)E++,C++;if(l[x]=E,E>i)m+=2;else if(C>r)g+=2;else if(!d){var w=s+h-A;if(w>=0&&w<a&&-1!=c[w]){var b=c[w],_=s+b-w;if(E=i-E,b>=E)return this.diff_bisectSplit_(e,t,b,_,n)}}}}return[[-1,e],[1,t]]},i.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),s=t.substring(0,i),a=e.substring(n),c=t.substring(i),l=this.diff_main(o,s,!1,r),u=this.diff_main(a,c,!1,r);return l.concat(u)},i.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,o=-1,s=i.length;o<e.length-1;){o=e.indexOf("\n",n),-1==o&&(o=e.length-1);var a=e.substring(n,o+1);n=o+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?t+=String.fromCharCode(r[a]):(t+=String.fromCharCode(s),r[a]=s,i[s++]=a)}return t}var i=[],r={};return i[0]="",{chars1:n(e),chars2:n(t),lineArray:i}},i.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},i.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)==t.substring(o,r)?(n=r,o=n):i=r,r=Math.floor((i-n)/2+n);return r},i.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)==t.substring(t.length-r,t.length-o)?(n=r,o=n):i=r,r=Math.floor((i-n)/2+n);return r},i.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=Math.min(n,i);if(e==t)return r;for(var o=0,s=1;;){var a=e.substring(r-s),c=t.indexOf(a);if(-1==c)return o;s+=c,0!=c&&e.substring(r-s)!=t.substring(0,s)||(o=s,s++)}},i.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var i,r,o,a,c=e.substring(n,n+Math.floor(e.length/4)),l=-1,u="";-1!=(l=t.indexOf(c,l+1));){var h=s.diff_commonPrefix(e.substring(n),t.substring(l)),d=s.diff_commonSuffix(e.substring(0,n),t.substring(0,l));u.length<d+h&&(u=t.substring(l-d,l)+t.substring(l,l+h),i=e.substring(0,n-d),r=e.substring(n+h),o=t.substring(0,l-d),a=t.substring(l+h))}return 2*u.length>=e.length?[i,r,o,a,u]:null}if(this.Diff_Timeout<=0)return null;var i=e.length>t.length?e:t,r=e.length>t.length?t:e;if(i.length<4||2*r.length<i.length)return null;var o,s=this,a=n(i,r,Math.ceil(i.length/4)),c=n(i,r,Math.ceil(i.length/2));if(!a&&!c)return null;o=c?a&&a[4].length>c[4].length?a:c:a;var l,u,h,d;return e.length>t.length?(l=o[0],u=o[1],h=o[2],d=o[3]):(h=o[0],d=o[1],l=o[2],u=o[3]),[l,u,h,d,o[4]]},i.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],i=0,r=null,o=0,s=0,a=0,c=0,l=0;o<e.length;)0==e[o][0]?(n[i++]=o,s=c,a=l,c=0,l=0,r=e[o][1]):(1==e[o][0]?c+=e[o][1].length:l+=e[o][1].length,r&&r.length<=Math.max(s,a)&&r.length<=Math.max(c,l)&&(e.splice(n[i-1],0,[-1,r]),e[n[i-1]+1][0]=1,i--,i--,o=i>0?n[i-1]:-1,s=0,a=0,c=0,l=0,r=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var u=e[o-1][1],h=e[o][1],d=this.diff_commonOverlap_(u,h),f=this.diff_commonOverlap_(h,u);d>=f?(d>=u.length/2||d>=h.length/2)&&(e.splice(o,0,[0,h.substring(0,d)]),e[o-1][1]=u.substring(0,u.length-d),e[o+1][1]=h.substring(d),o++):(f>=u.length/2||f>=h.length/2)&&(e.splice(o,0,[0,u.substring(0,f)]),e[o-1][0]=1,e[o-1][1]=h.substring(0,h.length-f),e[o+1][0]=-1,e[o+1][1]=u.substring(f),o++),o++}o++}},i.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),r=t.charAt(0),o=n.match(i.nonAlphaNumericRegex_),s=r.match(i.nonAlphaNumericRegex_),a=o&&n.match(i.whitespaceRegex_),c=s&&r.match(i.whitespaceRegex_),l=a&&n.match(i.linebreakRegex_),u=c&&r.match(i.linebreakRegex_),h=l&&e.match(i.blanklineEndRegex_),d=u&&t.match(i.blanklineStartRegex_);return h||d?5:l||u?4:o&&!a&&c?3:a||c?2:o||s?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r=e[n-1][1],o=e[n][1],s=e[n+1][1],a=this.diff_commonSuffix(r,o);if(a){var c=o.substring(o.length-a);r=r.substring(0,r.length-a),o=c+o.substring(0,o.length-a),s=c+s}for(var l=r,u=o,h=s,d=t(r,o)+t(o,s);o.charAt(0)===s.charAt(0);){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var f=t(r,o)+t(o,s);f>=d&&(d=f,l=r,u=o,h=s)}e[n-1][1]!=l&&(l?e[n-1][1]=l:(e.splice(n-1,1),n--),e[n][1]=u,h?e[n+1][1]=h:(e.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,r=null,o=0,s=!1,a=!1,c=!1,l=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(c||l)?(n[i++]=o,s=c,a=l,r=e[o][1]):(i=0,r=null),c=l=!1):(-1==e[o][0]?l=!0:c=!0,r&&(s&&a&&c&&l||r.length<this.Diff_EditCost/2&&s+a+c+l==3)&&(e.splice(n[i-1],0,[-1,r]),e[n[i-1]+1][0]=1,i--,r=null,s&&a?(c=l=!0,i=0):(i--,o=i>0?n[i-1]:-1,c=l=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},i.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,i=0,r=0,o="",s="";n<e.length;)switch(e[n][0]){case 1:r++,s+=e[n][1],n++;break;case-1:i++,o+=e[n][1],n++;break;case 0:i+r>1?(0!==i&&0!==r&&(t=this.diff_commonPrefix(s,o),0!==t&&(n-i-r>0&&0==e[n-i-r-1][0]?e[n-i-r-1][1]+=s.substring(0,t):(e.splice(0,0,[0,s.substring(0,t)]),n++),s=s.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(s,o))&&(e[n][1]=s.substring(s.length-t)+e[n][1],s=s.substring(0,s.length-t),o=o.substring(0,o.length-t))),0===i?e.splice(n-r,i+r,[1,s]):0===r?e.splice(n-i,i+r,[-1,o]):e.splice(n-i-r,i+r,[-1,o],[1,s]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=0,i=0,o="",s=""}""===e[e.length-1][1]&&e.pop();var a=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),a=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(e)},i.prototype.diff_xIndex=function(e,t){var n,i=0,r=0,o=0,s=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),-1!==e[n][0]&&(r+=e[n][1].length),!(i>t));n++)o=i,s=r;return e.length!=n&&-1===e[n][0]?s:s+(t-o)},i.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,s=0;s<e.length;s++){var a=e[s][0],c=e[s][1],l=c.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(a){case 1:t[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:t[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[s]="<span>"+l+"</span>"}}return t.join("")},i.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},i.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},i.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=e[r][0],s=e[r][1];switch(o){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},i.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(e,t){for(var n=[],i=0,r=0,o=t.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[i++]=[1,decodeURI(a)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var c=parseInt(a,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=e.substring(r,r+=c);"="==o[s].charAt(0)?n[i++]=[0,l]:n[i++]=[-1,l];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(r!=e.length)throw new Error("Delta length ("+r+") does not equal source text length ("+e.length+").");return n},i.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},i.prototype.match_bitap_=function(e,t,n){function i(e,i){var r=e/t.length,s=Math.abs(n-i);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),o=this,s=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(s=Math.min(i(0,a),s),-1!=(a=e.lastIndexOf(t,n+t.length))&&(s=Math.min(i(0,a),s)));var c=1<<t.length-1;a=-1;for(var l,u,h,d=t.length+e.length,f=0;f<t.length;f++){for(l=0,u=d;l<u;)i(f,n+u)<=s?l=u:d=u,u=Math.floor((d-l)/2+l);d=u;var p=Math.max(1,n-u+1),g=Math.min(n+u,e.length)+t.length,m=Array(g+2);m[g+1]=(1<<f)-1;for(var v=g;v>=p;v--){var y=r[e.charAt(v-1)];if(m[v]=0===f?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(h[v+1]|h[v])<<1|1|h[v+1],m[v]&c){var b=i(f,v-1);if(b<=s){if(s=b,!((a=v-1)>n))break;p=Math.max(1,2*n-a)}}}if(i(f+1,n)>s)break;h=m}return a},i.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},i.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var r=t.substring(e.start2-i,e.start2);r&&e.diffs.unshift([0,r]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push([0,o]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+o.length,e.length2+=r.length+o.length}},i.prototype.patch_make=function(e,t,n){var o,s;if("string"==typeof e&&"string"==typeof t&&"undefined"==typeof n)o=e,s=this.diff_main(o,t,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(e&&"object"==("undefined"===typeof e?"undefined":r(e))&&"undefined"==typeof t&&"undefined"==typeof n)s=e,o=this.diff_text1(s);else if("string"==typeof e&&t&&"object"==("undefined"===typeof t?"undefined":r(t))&&"undefined"==typeof n)o=e,s=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=("undefined"===typeof n?"undefined":r(n)))throw new Error("Unknown call format to patch_make.");o=e,s=n}if(0===s.length)return[];for(var a=[],c=new i.patch_obj,l=0,u=0,h=0,d=o,f=o,p=0;p<s.length;p++){var g=s[p][0],m=s[p][1];switch(l||0===g||(c.start1=u,c.start2=h),g){case 1:c.diffs[l++]=s[p],c.length2+=m.length,f=f.substring(0,h)+m+f.substring(h);break;case-1:c.length1+=m.length,c.diffs[l++]=s[p],f=f.substring(0,h)+f.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&l&&s.length!=p+1?(c.diffs[l++]=s[p],c.length1+=m.length,c.length2+=m.length):m.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(c,d),a.push(c),c=new i.patch_obj,l=0,d=f,u=h)}1!==g&&(u+=m.length),-1!==g&&(h+=m.length)}return l&&(this.patch_addContext_(c,d),a.push(c)),a},i.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=new i.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,t[n]=o}return t},i.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,r=[],o=0;o<e.length;o++){var s,a=e[o].start2+i,c=this.diff_text1(e[o].diffs),l=-1;if(c.length>this.Match_MaxBits?-1!=(s=this.match_main(t,c.substring(0,this.Match_MaxBits),a))&&(-1==(l=this.match_main(t,c.substring(c.length-this.Match_MaxBits),a+c.length-this.Match_MaxBits))||s>=l)&&(s=-1):s=this.match_main(t,c,a),-1==s)r[o]=!1,i-=e[o].length2-e[o].length1;else{r[o]=!0,i=s-a;var u;if(u=-1==l?t.substring(s,s+c.length):t.substring(s,l+this.Match_MaxBits),c==u)t=t.substring(0,s)+this.diff_text2(e[o].diffs)+t.substring(s+c.length);else{var h=this.diff_main(c,u,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(h)/c.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d,f=0,p=0;p<e[o].diffs.length;p++){var g=e[o].diffs[p];0!==g[0]&&(d=this.diff_xIndex(h,f)),1===g[0]?t=t.substring(0,s+d)+g[1]+t.substring(s+d):-1===g[0]&&(t=t.substring(0,s+d)+t.substring(s+this.diff_xIndex(h,f+g[1].length))),-1!==g[0]&&(f+=g[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,r]},i.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var r=e[0],o=r.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>o[0][1].length){var s=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=s,r.start2-=s,r.length1+=s,r.length2+=s}if(r=e[e.length-1],o=r.diffs,0==o.length||0!=o[o.length-1][0])o.push([0,n]),r.length1+=t,r.length2+=t;else if(t>o[o.length-1][1].length){var s=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),r.length1+=s,r.length2+=s}return n},i.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var r=e[n];e.splice(n--,1);for(var o=r.start1,s=r.start2,a="";0!==r.diffs.length;){var c=new i.patch_obj,l=!0;for(c.start1=o-a.length,c.start2=s-a.length,""!==a&&(c.length1=c.length2=a.length,c.diffs.push([0,a]));0!==r.diffs.length&&c.length1<t-this.Patch_Margin;){var u=r.diffs[0][0],h=r.diffs[0][1];1===u?(c.length2+=h.length,s+=h.length,c.diffs.push(r.diffs.shift()),l=!1):-1===u&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*t?(c.length1+=h.length,o+=h.length,l=!1,c.diffs.push([u,h]),r.diffs.shift()):(h=h.substring(0,t-c.length1-this.Patch_Margin),c.length1+=h.length,o+=h.length,0===u?(c.length2+=h.length,s+=h.length):l=!1,c.diffs.push([u,h]),h==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(h.length))}a=this.diff_text2(c.diffs),a=a.substring(a.length-this.Patch_Margin);var d=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==d&&(c.length1+=d.length,c.length2+=d.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=d:c.diffs.push([0,d])),l||e.splice(++n,0,c)}}},i.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},i.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var s=n[r].match(o);if(!s)throw new Error("Invalid patch string: "+n[r]);var a=new i.patch_obj;for(t.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),r++;r<n.length;){var c=n[r].charAt(0);try{var l=decodeURI(n[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==c)a.diffs.push([-1,l]);else if("+"==c)a.diffs.push([1,l]);else if(" "==c)a.diffs.push([0,l]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+l)}r++}}return t},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,i=["@@ -"+e+" +"+t+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}i[r+1]=n+encodeURI(this.diffs[r][1])+"\n"}return i.join("").replace(/%20/g," ")},e.exports=i,e.exports.diff_match_patch=i,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},function(e,t){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,o=function e(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},e.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(o,r),o.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},o.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=o}),ace.define("ace/mode/jsx_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){var i=e("../lib/oop"),r=e("../lib/lang"),o=e("./doc_comment_highlight_rules").DocCommentHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,a=function(){var e=r.arrayToMap("break|do|instanceof|typeof|case|else|new|var|catch|finally|return|void|continue|for|switch|default|while|function|this|if|throw|delete|in|try|class|extends|super|import|from|into|implements|interface|static|mixin|override|abstract|final|number|int|string|boolean|variant|log|assert".split("|")),t=r.arrayToMap("null|true|false|NaN|Infinity|__FILE__|__LINE__|undefined".split("|")),n=r.arrayToMap("debugger|with|const|export|let|private|public|yield|protected|extern|native|as|operator|__fake__|__readonly__".split("|"));this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},o.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:["storage.type","text","entity.name.function"],regex:"(function)(\\s+)([a-zA-Z_][a-zA-Z0-9_]*\\b)"},{token:function(i){return"this"==i?"variable.language":"function"==i?"storage.type":e.hasOwnProperty(i)||n.hasOwnProperty(i)?"keyword":t.hasOwnProperty(i)?"constant.language":/^_?[A-Z][a-zA-Z0-9_]*$/.test(i)?"language.support.class":"identifier"},regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|==|=|!=|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({<]"},{token:"paren.rparen",regex:"[\\])}>]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]},this.embedRules(o,"doc-",[o.getEndRule("start")])};i.inherits(a,s),t.JsxHighlightRules=a}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../range").Range,r=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t),r=n.match(/^(\s*\})/);if(!r)return 0;var o=r[1].length,s=e.findMatchingBracket({row:t,column:o});if(!s||s.row==t)return 0;var a=this.$getIndent(e.getLine(s.row));e.replace(new i(t,0,t,o-1),a)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype),t.MatchingBraceOutdent=r}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("../../range").Range,o=e("./fold_mode").FoldMode,s=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(s,o),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(e,t,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(e,t,n,i){var r=e.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,n);var o=r.match(this.foldingStartMarker);if(o){var s=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,s);var a=e.getCommentFoldRange(n,s+o[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(e,n):"all"!=t&&(a=null)),a}if("markbegin"!==t){var o=r.match(this.foldingStopMarker);if(o){var s=o.index+o[0].length;return o[1]?this.closingBracketBlock(e,o[1],n,s):e.getCommentFoldRange(n,s,-1)}}},this.getSectionRange=function(e,t){var n=e.getLine(t),i=n.search(/\S/),o=t,s=n.length;t+=1;for(var a=t,c=e.getLength();++t<c;){n=e.getLine(t);var l=n.search(/\S/);if(-1!==l){if(i>l)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=o)break;if(u.isMultiLine())t=u.end.row;else if(i==l)break}a=t}}return new r(o,s,a,e.getLine(a).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),o=e.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,c=1;++n<o;){t=e.getLine(n);var l=a.exec(t);if(l&&(l[1]?c--:c++,!c))break}var u=n;if(u>s)return new r(s,i,u,t.length)}}.call(s.prototype)}),ace.define("ace/mode/jsx",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/jsx_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";function i(){this.HighlightRules=s,this.$outdent=new a,this.$behaviour=new c,this.foldingRules=new l}var r=e("../lib/oop"),o=e("./text").Mode,s=e("./jsx_highlight_rules").JsxHighlightRules,a=e("./matching_brace_outdent").MatchingBraceOutdent,c=e("./behaviour/cstyle").CstyleBehaviour,l=e("./folding/cstyle").FoldMode;r.inherits(i,o),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),r=this.getTokenizer().getLineTokens(t,e),o=r.tokens;if(o.length&&"comment"==o[o.length-1].type)return i;if("start"==e){t.match(/^.*[\{\(\[]\s*$/)&&(i+=n)}return i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.$id="ace/mode/jsx"}.call(i.prototype),t.Mode=i})},function(e,t){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass)})},function(e,t){},function(e,t){}]);
//# sourceMappingURL=main.2c9b5a3c.js.map